/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 65);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
function some(value) {
    return value !== undefined;
}
exports.some = some;
function none(value) {
    return value === undefined;
}
exports.none = none;
function serializeMaybe(value) {
    if (some(value)) {
        return value;
    }
    else {
        return null;
    }
}
exports.serializeMaybe = serializeMaybe;
function deserializeMaybe(value) {
    if (value === null) {
        return undefined;
    }
    else {
        return value;
    }
}
exports.deserializeMaybe = deserializeMaybe;
function isEqual(a, b) {
    return a === b;
}
exports.isEqual = isEqual;
var MaybeCompareOptions;
(function (MaybeCompareOptions) {
    MaybeCompareOptions[MaybeCompareOptions["none"] = 0] = "none";
    MaybeCompareOptions[MaybeCompareOptions["compareUndefined"] = 1] = "compareUndefined";
})(MaybeCompareOptions = exports.MaybeCompareOptions || (exports.MaybeCompareOptions = {}));
function maybeCompare(a, b, compare = isEqual, options = MaybeCompareOptions.none) {
    if (some(a) && some(b)) {
        return compare(a, b);
    }
    if (options & MaybeCompareOptions.compareUndefined) {
        return none(a) && none(b);
    }
    return false;
}
exports.maybeCompare = maybeCompare;


/***/ }),
/* 1 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
const date_utils_1 = __webpack_require__(40);
const string_utils_1 = __webpack_require__(3);
class ConsoleLogSink {
    constructor() { }
    log(message) {
        console.log(message);
    }
    logError(message) {
        console.error(message);
    }
}
exports.ConsoleLogSink = ConsoleLogSink;
class Logger {
    constructor() {
        this.sinks = [];
        this.addSink(new ConsoleLogSink());
    }
    addSink(sink) {
        this.sinks.push(sink);
    }
    formatMessage(message) {
        return `${date_utils_1.currentDateTimeString()}: ${message}`;
    }
    log(message) {
        const formattedMessage = this.formatMessage(message);
        for (const sink of this.sinks) {
            sink.log(formattedMessage);
        }
    }
    logError(error) {
        const message = errorToString(error);
        const formattedMessage = this.formatMessage(message);
        for (const sink of this.sinks) {
            sink.logError(formattedMessage);
        }
    }
}
exports.logger = new Logger();
function errorToString(error) {
    return string_utils_1.toString({ name: error.name, message: error.message });
}
exports.errorToString = errorToString;
function log(message) {
    exports.logger.log(message);
}
exports.log = log;
function logError(error) {
    exports.logger.logError(error);
}
exports.logError = logError;


/***/ }),
/* 2 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
const number_utils_1 = __webpack_require__(10);
const array_utils_1 = __webpack_require__(8);
var MessageType;
(function (MessageType) {
    MessageType[MessageType["handshakeV1"] = 0] = "handshakeV1";
    MessageType[MessageType["launchBrowserRequestV1"] = 1] = "launchBrowserRequestV1";
    MessageType[MessageType["launchBrowserResponseV1"] = 2] = "launchBrowserResponseV1";
    MessageType[MessageType["pageEventV1"] = 3] = "pageEventV1";
    MessageType[MessageType["configRequestV1"] = 4] = "configRequestV1";
    MessageType[MessageType["configChangedV1"] = 5] = "configChangedV1";
    MessageType[MessageType["trustUrlV1"] = 6] = "trustUrlV1";
    MessageType[MessageType["downloadCompleteV1"] = 7] = "downloadCompleteV1";
    MessageType[MessageType["logMessageV1"] = 8] = "logMessageV1";
    MessageType[MessageType["addUserTrustedOriginV1"] = 9] = "addUserTrustedOriginV1";
    MessageType[MessageType["addUserUntrustedOriginV1"] = 10] = "addUserUntrustedOriginV1";
    MessageType[MessageType["helperErrorV1"] = 11] = "helperErrorV1";
    MessageType[MessageType["dormantStateChangedV1"] = 12] = "dormantStateChangedV1";
    MessageType[MessageType["extensionReadyV1"] = 13] = "extensionReadyV1";
    MessageType[MessageType["externalAppLinkRequestV1"] = 14] = "externalAppLinkRequestV1";
    MessageType[MessageType["externalAppLinkResponseV1"] = 15] = "externalAppLinkResponseV1";
    MessageType[MessageType["isFileURLTrustedRequestV1"] = 16] = "isFileURLTrustedRequestV1";
    MessageType[MessageType["isFileURLTrustedResponseV1"] = 17] = "isFileURLTrustedResponseV1";
    MessageType[MessageType["blockedFileRequestV1"] = 18] = "blockedFileRequestV1";
    MessageType[MessageType["blockedFileResponseV1"] = 19] = "blockedFileResponseV1";
    MessageType[MessageType["popupDataRequestV1"] = 20] = "popupDataRequestV1";
    MessageType[MessageType["popupDataResponseV1"] = 21] = "popupDataResponseV1";
    MessageType[MessageType["clearRememberedDecisionsV1"] = 22] = "clearRememberedDecisionsV1";
    MessageType[MessageType["blockedPageStringsRequestV1"] = 23] = "blockedPageStringsRequestV1";
    MessageType[MessageType["blockedPageStringsResponseV1"] = 24] = "blockedPageStringsResponseV1";
    MessageType[MessageType["heartbeatV1"] = 25] = "heartbeatV1";
    MessageType[MessageType["enabledFeaturesRequestV2"] = 26] = "enabledFeaturesRequestV2";
    MessageType[MessageType["enabledFeaturesResponseV2"] = 27] = "enabledFeaturesResponseV2";
    MessageType[MessageType["clearRememberedOriginV3"] = 28] = "clearRememberedOriginV3";
    MessageType[MessageType["optionsDataRequestV3"] = 29] = "optionsDataRequestV3";
    MessageType[MessageType["optionsDataResponseV3"] = 30] = "optionsDataResponseV3";
    MessageType[MessageType["configChangedV3"] = 31] = "configChangedV3";
    MessageType[MessageType["reputationChangedV3"] = 32] = "reputationChangedV3";
    MessageType[MessageType["configChangedV4"] = 33] = "configChangedV4";
    MessageType[MessageType["blockedPageDataRequestV4"] = 34] = "blockedPageDataRequestV4";
    MessageType[MessageType["blockedPageDataResponseV4"] = 35] = "blockedPageDataResponseV4";
    MessageType[MessageType["configChangedV5"] = 36] = "configChangedV5";
    MessageType[MessageType["popupDataResponseV5"] = 37] = "popupDataResponseV5";
    MessageType[MessageType["blockedPageDataResponseV6"] = 38] = "blockedPageDataResponseV6";
    MessageType[MessageType["trustUrlV6"] = 39] = "trustUrlV6";
    MessageType[MessageType["configChangedV7"] = 40] = "configChangedV7";
    MessageType[MessageType["trustUrlV8"] = 41] = "trustUrlV8";
    MessageType[MessageType["dontAskAgainV8"] = 42] = "dontAskAgainV8";
    MessageType[MessageType["configChangedV8"] = 43] = "configChangedV8";
    MessageType[MessageType["popupDataResponseV9"] = 44] = "popupDataResponseV9";
    MessageType[MessageType["dontAskAgainV9"] = 45] = "dontAskAgainV9";
    MessageType[MessageType["configChangedV9"] = 46] = "configChangedV9";
    MessageType[MessageType["stopHelperV10"] = 47] = "stopHelperV10";
    MessageType[MessageType["edgeAckV10"] = 48] = "edgeAckV10";
    MessageType[MessageType["endOfStreamV10"] = 49] = "endOfStreamV10";
    MessageType[MessageType["heartbeatV10"] = 50] = "heartbeatV10";
    MessageType[MessageType["popupDataResponseV11"] = 51] = "popupDataResponseV11";
    MessageType[MessageType["configChangedV11"] = 52] = "configChangedV11";
    MessageType[MessageType["configChangedV12"] = 53] = "configChangedV12";
    MessageType[MessageType["minMessageType"] = 0] = "minMessageType";
    MessageType[MessageType["maxMessageType"] = 53] = "maxMessageType";
})(MessageType = exports.MessageType || (exports.MessageType = {}));
function isMessageType(type) {
    return number_utils_1.isInRange(type, MessageType.minMessageType, MessageType.maxMessageType);
}
exports.isMessageType = isMessageType;
function isFrequentlySentMessageType(type) {
    const frequentlySentMessageTypes = [
        MessageType.logMessageV1,
        MessageType.pageEventV1,
        MessageType.heartbeatV1,
        MessageType.edgeAckV10
    ];
    return array_utils_1.has(frequentlySentMessageTypes, type);
}
exports.isFrequentlySentMessageType = isFrequentlySentMessageType;
function isEdgeAckWorkaround(type) {
    return type === MessageType.edgeAckV10;
}
exports.isEdgeAckWorkaround = isEdgeAckWorkaround;


/***/ }),
/* 3 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
const murmur_hash_1 = __webpack_require__(11);
const hash_map_1 = __webpack_require__(16);
const url_utils_1 = __webpack_require__(4);
var StringCompareOptions;
(function (StringCompareOptions) {
    StringCompareOptions[StringCompareOptions["CaseSensitive"] = 0] = "CaseSensitive";
    StringCompareOptions[StringCompareOptions["LowerCase"] = 1] = "LowerCase";
    StringCompareOptions[StringCompareOptions["LocaleLowerCase"] = 2] = "LocaleLowerCase";
})(StringCompareOptions = exports.StringCompareOptions || (exports.StringCompareOptions = {}));
function compareStrings(a, b, options = StringCompareOptions.CaseSensitive) {
    switch (options) {
        case StringCompareOptions.CaseSensitive:
            return a === b;
        case StringCompareOptions.LowerCase:
            return a.toLowerCase() === b.toLowerCase();
        case StringCompareOptions.LocaleLowerCase:
            return a.toLocaleLowerCase() === b.toLocaleLowerCase();
        default:
            throw new Error('stringCompare');
    }
}
exports.compareStrings = compareStrings;
function hashString(value) {
    let hash = 0;
    hash = murmur_hash_1.murmurHash(value, hash);
    return hash;
}
exports.hashString = hashString;
function makeStringHashSet() {
    return new hash_map_1.HashSet(hashString, compareStrings);
}
exports.makeStringHashSet = makeStringHashSet;
function makeStringHashMap() {
    return new hash_map_1.HashMap(hashString, compareStrings);
}
exports.makeStringHashMap = makeStringHashMap;
function line(value) {
    return `${value}\n`;
}
function surround(value, typeName, openTag, closeTag, indentLevel) {
    const indent = makeIndent(indentLevel - 1);
    if (value) {
        return `${line(`${typeName}${openTag}`)}${value}${indent(closeTag)}`;
    }
    else {
        return `${typeName}${openTag}${closeTag}`;
    }
}
function makeKeyValuePrinter(toString, indent) {
    return (key, value) => {
        return line(indent(`${toString(key)}: ${toString(value)},`));
    };
}
function mapToString(map, seenObjects, indentLevel) {
    const indent = makeIndent(indentLevel);
    function toString(value) {
        return toStringRecursive(value, seenObjects, indentLevel);
    }
    const printKeyValue = makeKeyValuePrinter(toString, indent);
    let result = "";
    map.forEach((value, key) => {
        result += printKeyValue(key, value);
    });
    return surround(result, "Map", "{", "}", indentLevel);
}
function makeValuePrinter(toString, indent) {
    return (value) => {
        return line(indent(`${toString(value)},`));
    };
}
function setToString(set, seenObjects, indentLevel) {
    const indent = makeIndent(indentLevel);
    function toString(value) {
        return toStringRecursive(value, seenObjects, indentLevel);
    }
    const printValue = makeValuePrinter(toString, indent);
    let result = "";
    set.forEach((key) => {
        result += printValue(key);
    });
    return surround(result, "Set", "{", "}", indentLevel);
}
function arrayToString(array, seenObjects, indentLevel) {
    const indent = makeIndent(indentLevel);
    function toString(value) {
        return toStringRecursive(value, seenObjects, indentLevel);
    }
    const printValue = makeValuePrinter(toString, indent);
    let result = "";
    array.forEach((value) => {
        result += printValue(value);
    });
    return surround(result, "Array", "[", "]", indentLevel);
}
function objectToString(value, seenObjects, indentLevel) {
    const indent = makeIndent(indentLevel);
    function toString(value) {
        return toStringRecursive(value, seenObjects, indentLevel);
    }
    const printKeyValue = makeKeyValuePrinter(toString, indent);
    let result = "";
    for (const propertyName of Object.getOwnPropertyNames(value)) {
        const property = value[propertyName];
        if (!isFunction(property)) {
            result += printKeyValue(propertyName, property);
        }
    }
    return surround(result, typeName(value), "{", "}", indentLevel);
}
const defaultToStringFunction = (() => {
    const emptyObject = {};
    return emptyObject.toString;
})();
function defaultToString(value) {
    return defaultToStringFunction.call(value);
}
function hasCustomToString(value) {
    return value.toString !== defaultToStringFunction;
}
function isFunction(value) {
    return value instanceof Function;
}
function makeIndentation(indentLevel) {
    if (indentLevel <= 0) {
        return "";
    }
    const tab = "\t";
    let indentation = "";
    for (let level = 0; level < indentLevel; level += 1) {
        indentation += tab;
    }
    return indentation;
}
function makeIndent(indentLevel) {
    const indentation = makeIndentation(indentLevel);
    return (value) => {
        return `${indentation}${value}`;
    };
}
function typeOf(value) {
    return value.constructor;
}
function typeName(value) {
    return typeOf(value).name;
}
function toStringRecursive(value, seenObjects, indentLevel) {
    function didSee(value) {
        return seenObjects.has(value);
    }
    function seeObject(value) {
        seenObjects.add(value);
        return seenObjects;
    }
    const nextIndentLevel = indentLevel + 1;
    if (value === undefined) {
        return "undefined";
    }
    else if (value === null) {
        return "null";
    }
    else if (typeof value === "boolean") {
        return value.toString();
    }
    else if (typeof value === "number") {
        return value.toString();
    }
    else if (typeof value === "string") {
        return value;
    }
    else if (value instanceof Array) {
        return arrayToString(value, seeObject(value), nextIndentLevel);
    }
    else if (value instanceof Map) {
        return mapToString(value, seeObject(value), nextIndentLevel);
    }
    else if (value instanceof Set) {
        return setToString(value, seeObject(value), nextIndentLevel);
    }
    else if (value instanceof URL) {
        return url_utils_1.URLToString(value);
    }
    else if (isFunction(value)) {
        return typeName(value);
    }
    else if (didSee(value)) {
        return typeName(value);
    }
    else if (hasCustomToString(value)) {
        return value.toString();
    }
    else {
        return objectToString(value, seeObject(value), nextIndentLevel);
    }
}
function toString(value, initialIndentLevel = 0) {
    const seenObjects = new Set();
    const indentLevel = initialIndentLevel;
    return toStringRecursive(value, seenObjects, indentLevel);
}
exports.toString = toString;
function safeToString(value) {
    if (value === undefined) {
        return "undefined";
    }
    else if (value === null) {
        return "null";
    }
    else {
        return value.toString();
    }
}
exports.safeToString = safeToString;
function isString(value) {
    return typeof value === 'string';
}
exports.isString = isString;
function isEmptyString(value) {
    return value.length === 0;
}
exports.isEmptyString = isEmptyString;


/***/ }),
/* 4 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
const string_utils_1 = __webpack_require__(3);
const murmur_hash_1 = __webpack_require__(11);
const hash_map_1 = __webpack_require__(16);
const origin_1 = __webpack_require__(9);
var UrlCompareOptions;
(function (UrlCompareOptions) {
    UrlCompareOptions[UrlCompareOptions["Default"] = 0] = "Default";
    UrlCompareOptions[UrlCompareOptions["IgnoreSearchParams"] = 1] = "IgnoreSearchParams";
})(UrlCompareOptions = exports.UrlCompareOptions || (exports.UrlCompareOptions = {}));
var UrlComponent;
(function (UrlComponent) {
    UrlComponent[UrlComponent["Protocol"] = 1] = "Protocol";
    UrlComponent[UrlComponent["Username"] = 2] = "Username";
    UrlComponent[UrlComponent["Password"] = 4] = "Password";
    UrlComponent[UrlComponent["Host"] = 8] = "Host";
    UrlComponent[UrlComponent["Port"] = 16] = "Port";
    UrlComponent[UrlComponent["Pathname"] = 32] = "Pathname";
    UrlComponent[UrlComponent["Search"] = 64] = "Search";
    UrlComponent[UrlComponent["All"] = 127] = "All";
})(UrlComponent || (UrlComponent = {}));
function compareUrlComponents(a, b, components) {
    function compare(component) {
        return (components & component) !== 0;
    }
    if (compare(UrlComponent.Protocol) && a.protocol !== b.protocol) {
        return false;
    }
    if (compare(UrlComponent.Username) && a.username !== b.username) {
        return false;
    }
    if (compare(UrlComponent.Password) && a.password !== b.password) {
        return false;
    }
    if (compare(UrlComponent.Host) && a.host !== b.host) {
        return false;
    }
    if (compare(UrlComponent.Port) && a.port !== b.port) {
        return false;
    }
    if (compare(UrlComponent.Pathname) && a.pathname !== b.pathname) {
        return false;
    }
    if (compare(UrlComponent.Search) && a.search !== b.search) {
        return false;
    }
    return true;
}
function removeComponent(components, component) {
    return components & (~component);
}
function isSameUrl(a, b, options = UrlCompareOptions.Default) {
    switch (options) {
        case UrlCompareOptions.Default:
            return compareUrlComponents(a, b, UrlComponent.All);
        case UrlCompareOptions.IgnoreSearchParams:
            return compareUrlComponents(a, b, removeComponent(UrlComponent.All, UrlComponent.Search));
        default:
            throw new Error(`isSameUrl: invalid options: ${options}`);
    }
}
exports.isSameUrl = isSameUrl;
function isURL(value) {
    return value instanceof URL;
}
exports.isURL = isURL;
function parseUrl(spec) {
    try {
        return new URL(spec);
    }
    catch (e) {
        return undefined;
    }
}
exports.parseUrl = parseUrl;
function maybeParseUrl(spec) {
    const url = parseUrl(spec);
    if (url === undefined) {
        return spec;
    }
    else {
        return url;
    }
}
exports.maybeParseUrl = maybeParseUrl;
function parseURLIfNecessary(urlOrSpec) {
    if (isURL(urlOrSpec)) {
        return urlOrSpec;
    }
    else {
        return parseUrl(urlOrSpec);
    }
}
exports.parseURLIfNecessary = parseURLIfNecessary;
function isSameUrlOrSpec(a, b, options = UrlCompareOptions.Default) {
    if ((a instanceof URL) && (b instanceof URL)) {
        return isSameUrl(a, b);
    }
    else if ((typeof a === "string") && (typeof b === "string")) {
        return a === b;
    }
    else {
        return undefined;
    }
}
exports.isSameUrlOrSpec = isSameUrlOrSpec;
function isFileUrl(url) {
    return string_utils_1.compareStrings(url.protocol, origin_1.Scheme.FILE);
}
exports.isFileUrl = isFileUrl;
function isExtensionUrl(url) {
    const extensionSchemes = [
        origin_1.Scheme.CHROME_EXTENSION,
        origin_1.Scheme.FIREFOX_EXTENSION,
        origin_1.Scheme.EDGE_EXTENSION
    ];
    return extensionSchemes.some((extensionScheme) => string_utils_1.compareStrings(url.protocol, extensionScheme));
}
exports.isExtensionUrl = isExtensionUrl;
function isBrowserUrl(url) {
    return string_utils_1.compareStrings(url.protocol, origin_1.Scheme.CHROME);
}
exports.isBrowserUrl = isBrowserUrl;
function URLToString(url) {
    if (url === undefined) {
        return "";
    }
    if (url instanceof URL) {
        return url.toString();
    }
    else {
        return url;
    }
}
exports.URLToString = URLToString;
function safeEncodeURI(uri) {
    if (uri === undefined) {
        return "";
    }
    return encodeURI(uri);
}
exports.safeEncodeURI = safeEncodeURI;
function safeEncodeURIComponent(component) {
    if (component === undefined) {
        return "";
    }
    return encodeURIComponent(component);
}
exports.safeEncodeURIComponent = safeEncodeURIComponent;
function hashUrlComponents(url, components, seed) {
    function compare(component) {
        return (components & component) !== 0;
    }
    let hash = seed;
    if (compare(UrlComponent.Protocol)) {
        hash = murmur_hash_1.murmurHash(url.protocol, hash);
    }
    if (compare(UrlComponent.Username)) {
        hash = murmur_hash_1.murmurHash(url.username, hash);
    }
    if (compare(UrlComponent.Password)) {
        hash = murmur_hash_1.murmurHash(url.password, hash);
    }
    if (compare(UrlComponent.Host)) {
        hash = murmur_hash_1.murmurHash(url.host, hash);
    }
    if (compare(UrlComponent.Port)) {
        hash = murmur_hash_1.murmurHash(url.port, hash);
    }
    if (compare(UrlComponent.Pathname)) {
        hash = murmur_hash_1.murmurHash(url.pathname, hash);
    }
    if (compare(UrlComponent.Search)) {
        hash = murmur_hash_1.murmurHash(url.search, hash);
    }
    return hash;
}
function hashUrl(url, options = UrlCompareOptions.Default, seed = 0) {
    switch (options) {
        case UrlCompareOptions.Default:
            return hashUrlComponents(url, UrlComponent.All, seed);
        case UrlCompareOptions.IgnoreSearchParams:
            return hashUrlComponents(url, removeComponent(UrlComponent.All, UrlComponent.Search), seed);
        default:
            throw new Error(`hashUrl: invalid options: ${options}`);
    }
}
exports.hashUrl = hashUrl;
function makeUrlHashMap(options = UrlCompareOptions.Default) {
    return new hash_map_1.HashMap((url) => hashUrl(url, options), (a, b) => isSameUrl(a, b, options));
}
exports.makeUrlHashMap = makeUrlHashMap;
function makeUrlHashSet(options = UrlCompareOptions.Default) {
    return new hash_map_1.HashSet((url) => hashUrl(url, options), (a, b) => isSameUrl(a, b, options));
}
exports.makeUrlHashSet = makeUrlHashSet;


/***/ }),
/* 5 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
const message_types_1 = __webpack_require__(2);
const string_utils_1 = __webpack_require__(3);
const type_utils_1 = __webpack_require__(86);
function isSerializedIsEnabledDataV1(value) {
    return type_utils_1.isObject(value) &&
        type_utils_1.isBoolean(value.chrome) &&
        type_utils_1.isBoolean(value.firefox) &&
        type_utils_1.isBoolean(value.edge);
}
exports.isSerializedIsEnabledDataV1 = isSerializedIsEnabledDataV1;
function isSerializedIsEnabledDataV12(value) {
    return type_utils_1.isObject(value) &&
        type_utils_1.isBoolean(value.chrome) &&
        type_utils_1.isBoolean(value.firefox) &&
        type_utils_1.isBoolean(value.edge) &&
        type_utils_1.isBoolean(value.edgeChromium);
}
exports.isSerializedIsEnabledDataV12 = isSerializedIsEnabledDataV12;
function isSerializedPhishingNavSeqData(value) {
    return type_utils_1.isObject(value) &&
        type_utils_1.isNumber(value.version) &&
        type_utils_1.isNumber(value.builtinRulesPrecedence) &&
        type_utils_1.isArray(value.seqs);
}
exports.isSerializedPhishingNavSeqData = isSerializedPhishingNavSeqData;
function isSerializedNewTabPageUrlsV7(value) {
    return type_utils_1.isObject(value) &&
        type_utils_1.isArray(value.chrome) &&
        type_utils_1.isArray(value.firefox) &&
        type_utils_1.isArray(value.edge);
}
exports.isSerializedNewTabPageUrlsV7 = isSerializedNewTabPageUrlsV7;
function isSerializedNewTabPageUrlsV12(value) {
    return type_utils_1.isObject(value) &&
        type_utils_1.isArray(value.chrome) &&
        type_utils_1.isArray(value.firefox) &&
        type_utils_1.isArray(value.edge) &&
        type_utils_1.isArray(value.edgeChromium);
}
exports.isSerializedNewTabPageUrlsV12 = isSerializedNewTabPageUrlsV12;
function isTabMessage(message) {
    return message.tabId !== undefined;
}
exports.isTabMessage = isTabMessage;
function IsIdMessage(message) {
    return message.id !== undefined;
}
exports.IsIdMessage = IsIdMessage;
class LaunchBrowserRequestV1 {
    constructor(urlSpec, id) {
        this.urlSpec = urlSpec;
        this.id = id;
    }
}
exports.LaunchBrowserRequestV1 = LaunchBrowserRequestV1;
class LaunchBrowserResponseV1 {
    constructor(urlSpec, id, didLaunch) {
        this.urlSpec = urlSpec;
        this.id = id;
        this.didLaunch = didLaunch;
    }
}
exports.LaunchBrowserResponseV1 = LaunchBrowserResponseV1;
class HandshakeV1 {
    constructor(versions) {
        this.versions = versions;
    }
}
exports.HandshakeV1 = HandshakeV1;
class ConfigRequestV1 {
    constructor(phishingSourceSitesVersion, phishingNavigationSequencesVersion, browserInfo) {
        this.phishingSourceSitesVersion = phishingSourceSitesVersion;
        this.phishingNavigationSequencesVersion = phishingNavigationSequencesVersion;
        this.browserInfo = browserInfo;
    }
}
exports.ConfigRequestV1 = ConfigRequestV1;
class ExtensibleConfigChangedV1 {
    constructor(isEnabled, blockedPageStrings, phishingSourceSites, phishingNavigationSequences, trustedSites, untrustedSites, userTrustedOrigins, userUntrustedOrigins, openPhishingLinksInSecureBrowser) {
        this.isEnabled = isEnabled;
        this.blockedPageStrings = blockedPageStrings;
        this.phishingSourceSites = phishingSourceSites;
        this.phishingNavigationSequences = phishingNavigationSequences;
        this.trustedSites = trustedSites;
        this.untrustedSites = untrustedSites;
        this.userTrustedOrigins = userTrustedOrigins;
        this.userUntrustedOrigins = userUntrustedOrigins;
        this.openPhishingLinksInSecureBrowser = openPhishingLinksInSecureBrowser;
    }
}
exports.ExtensibleConfigChangedV1 = ExtensibleConfigChangedV1;
class ReputationChangedV3 {
    constructor(index, total, reputableSites) {
        this.index = index;
        this.total = total;
        this.reputableSites = reputableSites;
    }
}
exports.ReputationChangedV3 = ReputationChangedV3;
class TrustUrlV1 {
    constructor(navigateToUrlSpec, blockedUrlSpec, trustUrl, rememberDecision) {
        this.navigateToUrlSpec = navigateToUrlSpec;
        this.blockedUrlSpec = blockedUrlSpec;
        this.trustUrl = trustUrl;
        this.rememberDecision = rememberDecision;
    }
}
exports.TrustUrlV1 = TrustUrlV1;
class DownloadCompleteV1 {
    constructor(urlSpec, fileSpec) {
        this.urlSpec = urlSpec;
        this.fileSpec = fileSpec;
    }
}
exports.DownloadCompleteV1 = DownloadCompleteV1;
var LogLevel;
(function (LogLevel) {
    LogLevel[LogLevel["Info"] = 0] = "Info";
    LogLevel[LogLevel["Error"] = 1] = "Error";
})(LogLevel = exports.LogLevel || (exports.LogLevel = {}));
class LogMessageV1 {
    constructor(level, message) {
        this.level = level;
        this.message = message;
    }
}
exports.LogMessageV1 = LogMessageV1;
class HelperErrorV1 {
    constructor(errorType, errorMessage) {
        this.errorType = errorType;
        this.errorMessage = errorMessage;
    }
}
exports.HelperErrorV1 = HelperErrorV1;
class DormantStateChangedV1 {
    constructor(isDormant) {
        this.isDormant = isDormant;
    }
}
exports.DormantStateChangedV1 = DormantStateChangedV1;
class ExtensionReadyV1 {
    constructor(tabId) {
        this.tabId = tabId;
    }
}
exports.ExtensionReadyV1 = ExtensionReadyV1;
class ExternalAppLinkRequestV1 {
    constructor(linkSpec, externalAppName) {
        this.linkSpec = linkSpec;
        this.externalAppName = externalAppName;
    }
}
exports.ExternalAppLinkRequestV1 = ExternalAppLinkRequestV1;
class ExternalAppLinkResponseV1 {
    constructor(navigateToSpec) {
        this.navigateToSpec = navigateToSpec;
    }
}
exports.ExternalAppLinkResponseV1 = ExternalAppLinkResponseV1;
class AddUserTrustedOriginV1 {
    constructor(origin) {
        this.origin = origin;
    }
}
exports.AddUserTrustedOriginV1 = AddUserTrustedOriginV1;
class AddUserUntrustedOriginV1 {
    constructor(origin) {
        this.origin = origin;
    }
}
exports.AddUserUntrustedOriginV1 = AddUserUntrustedOriginV1;
class IsFileURLTrustedRequestV1 {
    constructor(id, fileUrlSpec) {
        this.id = id;
        this.fileUrlSpec = fileUrlSpec;
    }
}
exports.IsFileURLTrustedRequestV1 = IsFileURLTrustedRequestV1;
class IsFileURLTrustedResponseV1 {
    constructor(id, fileUrlSpec, isTrusted) {
        this.id = id;
        this.fileUrlSpec = fileUrlSpec;
        this.isTrusted = isTrusted;
    }
}
exports.IsFileURLTrustedResponseV1 = IsFileURLTrustedResponseV1;
class BlockedFileRequestV1 {
    constructor(fileUrlSpec) {
        this.fileUrlSpec = fileUrlSpec;
    }
}
exports.BlockedFileRequestV1 = BlockedFileRequestV1;
class BlockedFileResponseV1 {
    constructor(fileUrlSpec, isTrusted) {
        this.fileUrlSpec = fileUrlSpec;
        this.isTrusted = isTrusted;
    }
}
exports.BlockedFileResponseV1 = BlockedFileResponseV1;
class PopupDataRequestV1 {
    constructor() { }
}
exports.PopupDataRequestV1 = PopupDataRequestV1;
class PopupDataResponseV1 {
    constructor(popupMessage, openPhishingLinksInSecureBrowser) {
        this.popupMessage = popupMessage;
        this.openPhishingLinksInSecureBrowser = openPhishingLinksInSecureBrowser;
    }
}
exports.PopupDataResponseV1 = PopupDataResponseV1;
class ClearRememberedDecisionsV1 {
    constructor() { }
}
exports.ClearRememberedDecisionsV1 = ClearRememberedDecisionsV1;
class BlockedPageStringsRequestV1 {
    constructor(contentType) {
        this.contentType = contentType;
    }
}
exports.BlockedPageStringsRequestV1 = BlockedPageStringsRequestV1;
class BlockedPageStringsResponseV1 {
    constructor(title, question) {
        this.title = title;
        this.question = question;
    }
}
exports.BlockedPageStringsResponseV1 = BlockedPageStringsResponseV1;
class HeartbeatV1 {
    constructor() { }
}
exports.HeartbeatV1 = HeartbeatV1;
class EnabledFeaturesRequestV2 {
    constructor(id, respondImmediately) {
        this.id = id;
        this.respondImmediately = respondImmediately;
    }
}
exports.EnabledFeaturesRequestV2 = EnabledFeaturesRequestV2;
class EnabledFeaturesResponseV2 {
    constructor(id, linkProtection, fileURLProtection, pdfProtection, downloadProtection) {
        this.id = id;
        this.linkProtection = linkProtection;
        this.fileURLProtection = fileURLProtection;
        this.pdfProtection = pdfProtection;
        this.downloadProtection = downloadProtection;
    }
}
exports.EnabledFeaturesResponseV2 = EnabledFeaturesResponseV2;
var RememberedOriginTypes;
(function (RememberedOriginTypes) {
    RememberedOriginTypes[RememberedOriginTypes["Trusted"] = 0] = "Trusted";
    RememberedOriginTypes[RememberedOriginTypes["Untrusted"] = 1] = "Untrusted";
})(RememberedOriginTypes = exports.RememberedOriginTypes || (exports.RememberedOriginTypes = {}));
class ClearRememberedOriginV3 {
    constructor(origin, type) {
        this.origin = origin;
        this.type = type;
    }
}
exports.ClearRememberedOriginV3 = ClearRememberedOriginV3;
class OptionsDataRequestV3 {
    constructor() { }
}
exports.OptionsDataRequestV3 = OptionsDataRequestV3;
class OptionsDataResponseV3 {
    constructor(supportStatus, openPhishingLinksInSecureBrowser, userTrustedOrigins, userUntrustedOrigins) {
        this.supportStatus = supportStatus;
        this.openPhishingLinksInSecureBrowser = openPhishingLinksInSecureBrowser;
        this.userTrustedOrigins = userTrustedOrigins;
        this.userUntrustedOrigins = userUntrustedOrigins;
    }
}
exports.OptionsDataResponseV3 = OptionsDataResponseV3;
class ExtensibleConfigChangedV3 extends ExtensibleConfigChangedV1 {
    constructor(isEnabled, blockedPageStrings, phishingSourceSites, phishingNavigationSequences, trustedSites, untrustedSites, userTrustedOrigins, userUntrustedOrigins, openPhishingLinksInSecureBrowser, prioritiseTrustedSites) {
        super(isEnabled, blockedPageStrings, phishingSourceSites, phishingNavigationSequences, trustedSites, untrustedSites, userTrustedOrigins, userUntrustedOrigins, openPhishingLinksInSecureBrowser);
        this.prioritiseTrustedSites = prioritiseTrustedSites;
    }
}
exports.ExtensibleConfigChangedV3 = ExtensibleConfigChangedV3;
class ExtensibleConfigChangedV4 extends ExtensibleConfigChangedV3 {
    constructor(isEnabled, blockedPageStrings, phishingSourceSites, phishingNavigationSequences, trustedSites, untrustedSites, userTrustedOrigins, userUntrustedOrigins, openPhishingLinksInSecureBrowser, prioritiseTrustedSites, promptForUncategorized) {
        super(isEnabled, blockedPageStrings, phishingSourceSites, phishingNavigationSequences, trustedSites, untrustedSites, userTrustedOrigins, userUntrustedOrigins, openPhishingLinksInSecureBrowser, prioritiseTrustedSites);
        this.promptForUncategorized = promptForUncategorized;
    }
}
exports.ExtensibleConfigChangedV4 = ExtensibleConfigChangedV4;
class BlockedPageDataRequestV4 {
    constructor(contentType) {
        this.contentType = contentType;
    }
}
exports.BlockedPageDataRequestV4 = BlockedPageDataRequestV4;
class BlockedPageDataResponseV4 {
    constructor(title, question, rememberDecisionsDefault) {
        this.title = title;
        this.question = question;
        this.rememberDecisionsDefault = rememberDecisionsDefault;
    }
}
exports.BlockedPageDataResponseV4 = BlockedPageDataResponseV4;
class ExtensibleConfigChangedV5 extends ExtensibleConfigChangedV4 {
    constructor(isEnabled, blockedPageStrings, phishingSourceSites, phishingNavigationSequences, trustedSites, untrustedSites, userTrustedOrigins, userUntrustedOrigins, openPhishingLinksInSecureBrowser, prioritiseTrustedSites, promptForUncategorized, isEnterpriseProduct) {
        super(isEnabled, blockedPageStrings, phishingSourceSites, phishingNavigationSequences, trustedSites, untrustedSites, userTrustedOrigins, userUntrustedOrigins, openPhishingLinksInSecureBrowser, prioritiseTrustedSites, promptForUncategorized);
        this.isEnterpriseProduct = isEnterpriseProduct;
    }
}
exports.ExtensibleConfigChangedV5 = ExtensibleConfigChangedV5;
class PopupDataResponseV5 extends PopupDataResponseV1 {
    constructor(popupMessage, openPhishingLinksInSecureBrowser, isEnterpriseProduct) {
        super(popupMessage, openPhishingLinksInSecureBrowser);
        this.isEnterpriseProduct = isEnterpriseProduct;
    }
}
exports.PopupDataResponseV5 = PopupDataResponseV5;
class BlockedPageDataResponseV6 extends BlockedPageDataResponseV4 {
    constructor(title, question, openedSecureExplanation, rememberDecisionsDefault) {
        super(title, question, rememberDecisionsDefault);
        this.openedSecureExplanation = openedSecureExplanation;
    }
}
exports.BlockedPageDataResponseV6 = BlockedPageDataResponseV6;
class TrustUrlV6 extends TrustUrlV1 {
    constructor(navigateToUrlSpec, blockedUrlSpec, trustUrl, rememberDecision, contentType) {
        super(navigateToUrlSpec, blockedUrlSpec, trustUrl, rememberDecision);
        this.contentType = contentType;
    }
}
exports.TrustUrlV6 = TrustUrlV6;
class ExtensibleConfigChangedV7 extends ExtensibleConfigChangedV5 {
    constructor(isEnabled, blockedPageStrings, phishingSourceSites, phishingNavigationSequences, trustedSites, untrustedSites, userTrustedOrigins, userUntrustedOrigins, openPhishingLinksInSecureBrowser, prioritiseTrustedSites, promptForUncategorized, isEnterpriseProduct, newTabPageUrls) {
        super(isEnabled, blockedPageStrings, phishingSourceSites, phishingNavigationSequences, trustedSites, untrustedSites, userTrustedOrigins, userUntrustedOrigins, openPhishingLinksInSecureBrowser, prioritiseTrustedSites, promptForUncategorized, isEnterpriseProduct);
        this.newTabPageUrls = newTabPageUrls;
    }
}
exports.ExtensibleConfigChangedV7 = ExtensibleConfigChangedV7;
class TrustUrlV8 extends TrustUrlV6 {
    constructor(navigateToUrlSpec, blockedUrlSpec, trustUrl, rememberDecision, dontAskAgain, contentType) {
        super(navigateToUrlSpec, blockedUrlSpec, trustUrl, rememberDecision, contentType);
        this.dontAskAgain = dontAskAgain;
    }
}
exports.TrustUrlV8 = TrustUrlV8;
class DontAskAgainV8 {
    constructor() { }
}
exports.DontAskAgainV8 = DontAskAgainV8;
class ExtensibleConfigChangedV8 extends ExtensibleConfigChangedV7 {
    constructor(isEnabled, phishingSourceSites, phishingNavigationSequences, trustedSites, untrustedSites, userTrustedOrigins, userUntrustedOrigins, openPhishingLinksInSecureBrowser, prioritiseTrustedSites, promptForUncategorized, isEnterpriseProduct, isConsumerProduct, newTabPageUrls, blockedPageLearnMoreURL) {
        super(isEnabled, {}, phishingSourceSites, phishingNavigationSequences, trustedSites, untrustedSites, userTrustedOrigins, userUntrustedOrigins, openPhishingLinksInSecureBrowser, prioritiseTrustedSites, promptForUncategorized, isEnterpriseProduct, newTabPageUrls);
        this.isConsumerProduct = isConsumerProduct;
        this.blockedPageLearnMoreURL = blockedPageLearnMoreURL;
    }
}
exports.ExtensibleConfigChangedV8 = ExtensibleConfigChangedV8;
class PopupDataResponseV9 extends PopupDataResponseV5 {
    constructor(popupMessage, openPhishingLinksInSecureBrowser, isEnterpriseProduct, dontAskAgain) {
        super(popupMessage, openPhishingLinksInSecureBrowser, isEnterpriseProduct);
        this.dontAskAgain = dontAskAgain;
    }
}
exports.PopupDataResponseV9 = PopupDataResponseV9;
class DontAskAgainV9 extends DontAskAgainV8 {
    constructor(dontAskAgain) {
        super();
        this.dontAskAgain = dontAskAgain;
    }
}
exports.DontAskAgainV9 = DontAskAgainV9;
class ExtensibleConfigChangedV9 extends ExtensibleConfigChangedV8 {
    constructor(isEnabled, phishingSourceSites, phishingNavigationSequences, trustedSites, untrustedSites, userTrustedOrigins, userUntrustedOrigins, openPhishingLinksInSecureBrowser, prioritiseTrustedSites, promptForUncategorized, isEnterpriseProduct, isConsumerProduct, newTabPageUrls, blockedPageLearnMoreURL, dontAskAgain) {
        super(isEnabled, phishingSourceSites, phishingNavigationSequences, trustedSites, untrustedSites, userTrustedOrigins, userUntrustedOrigins, openPhishingLinksInSecureBrowser, prioritiseTrustedSites, promptForUncategorized, isEnterpriseProduct, isConsumerProduct, newTabPageUrls, blockedPageLearnMoreURL);
        this.dontAskAgain = dontAskAgain;
    }
}
exports.ExtensibleConfigChangedV9 = ExtensibleConfigChangedV9;
class StopHelperV10 {
    constructor() { }
}
exports.StopHelperV10 = StopHelperV10;
class EdgeAckV10 {
    constructor() { }
}
exports.EdgeAckV10 = EdgeAckV10;
class EndOfStreamV10 {
    constructor() { }
}
exports.EndOfStreamV10 = EndOfStreamV10;
class HeartbeatV10 extends HeartbeatV1 {
    constructor(id) {
        super();
        this.id = id;
    }
}
exports.HeartbeatV10 = HeartbeatV10;
class PopupDataResponseV11 {
    constructor(popupMessage, showClearRememberedDecisionsInfo, isEnterpriseProduct, helpLinkURL) {
        this.popupMessage = popupMessage;
        this.showClearRememberedDecisionsInfo = showClearRememberedDecisionsInfo;
        this.isEnterpriseProduct = isEnterpriseProduct;
        this.helpLinkURL = helpLinkURL;
    }
}
exports.PopupDataResponseV11 = PopupDataResponseV11;
var ProductStatuses;
(function (ProductStatuses) {
    ProductStatuses[ProductStatuses["Enabled"] = 0] = "Enabled";
    ProductStatuses[ProductStatuses["Disabled"] = 1] = "Disabled";
    ProductStatuses[ProductStatuses["InitRequired"] = 2] = "InitRequired";
    ProductStatuses[ProductStatuses["Unlicensed"] = 3] = "Unlicensed";
    ProductStatuses[ProductStatuses["Unknown"] = 4] = "Unknown";
})(ProductStatuses = exports.ProductStatuses || (exports.ProductStatuses = {}));
class ExtensibleConfigChangedV11 extends ExtensibleConfigChangedV9 {
    constructor(isEnabled, phishingSourceSites, phishingNavigationSequences, trustedSites, untrustedSites, userTrustedOrigins, userUntrustedOrigins, openPhishingLinksInSecureBrowser, prioritiseTrustedSites, promptForUncategorized, isEnterpriseProduct, isConsumerProduct, newTabPageUrls, blockedPageLearnMoreURL, dontAskAgain, secureBrowserRedirectTrustedSites, productStatus) {
        super(isEnabled, phishingSourceSites, phishingNavigationSequences, trustedSites, untrustedSites, userTrustedOrigins, userUntrustedOrigins, openPhishingLinksInSecureBrowser, prioritiseTrustedSites, promptForUncategorized, isEnterpriseProduct, isConsumerProduct, newTabPageUrls, blockedPageLearnMoreURL, dontAskAgain);
        this.secureBrowserRedirectTrustedSites = secureBrowserRedirectTrustedSites;
        this.productStatus = productStatus;
    }
}
exports.ExtensibleConfigChangedV11 = ExtensibleConfigChangedV11;
class ExtensibleConfigChangedV12 extends ExtensibleConfigChangedV11 {
}
exports.ExtensibleConfigChangedV12 = ExtensibleConfigChangedV12;
class Message {
    constructor(type, payload) {
        this.type = type;
        this.payload = payload;
    }
}
exports.Message = Message;
function messageToString(message) {
    if (message.type === message_types_1.MessageType.reputationChangedV3) {
        const payload = message.payload;
        let str = `Object{\n\t` +
            `type: ${message_types_1.MessageType.reputationChangedV3},\n\t` +
            `payload: Object{\n\t\t\t` +
            `index: ${payload.index},\n\t\t\t` +
            `total: ${payload.total},\n\t\t\t` +
            `reputableSite: [ `;
        for (const entry of payload.reputableSites) {
            str += `[${entry[0]},${entry[1]}], `;
        }
        str += "],\n\t},\n}";
        return str;
    }
    else {
        return string_utils_1.toString(message);
    }
}
exports.messageToString = messageToString;


/***/ }),
/* 6 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
const origin_1 = __webpack_require__(9);
const maybe_1 = __webpack_require__(0);
const url_utils_1 = __webpack_require__(4);
const user_agent_parser_1 = __webpack_require__(89);
const string_utils_1 = __webpack_require__(3);
const array_utils_1 = __webpack_require__(8);
var Browser;
(function (Browser) {
    Browser[Browser["chrome"] = 0] = "chrome";
    Browser[Browser["firefox"] = 1] = "firefox";
    Browser[Browser["edge"] = 2] = "edge";
    Browser[Browser["edgeChromium"] = 3] = "edgeChromium";
})(Browser = exports.Browser || (exports.Browser = {}));
const browserSchemeMap = new Map([
    [origin_1.Scheme.CHROME_EXTENSION, Browser.chrome],
    [origin_1.Scheme.FIREFOX_EXTENSION, Browser.firefox],
    [origin_1.Scheme.EDGE_EXTENSION, Browser.edge]
]);
function getCurrentBrowser() {
    const manifestURL = url_utils_1.parseUrl(chrome.runtime.getURL("manifest.json"));
    if (maybe_1.none(manifestURL)) {
        return undefined;
    }
    for (const scheme of browserSchemeMap.keys()) {
        if (scheme === manifestURL.protocol) {
            const browser = browserSchemeMap.get(scheme);
            if (browser === Browser.chrome) {
                const products = user_agent_parser_1.parseUserAgent(window.navigator.userAgent);
                if (maybe_1.some(products) && products.some((product) => product.name === "Edg")) {
                    return Browser.edgeChromium;
                }
                else {
                    return Browser.chrome;
                }
            }
            return browser;
        }
    }
    return undefined;
}
exports.getCurrentBrowser = getCurrentBrowser;
function getCurrentBrowserInfo() {
    const manifestURL = url_utils_1.parseUrl(chrome.runtime.getURL("manifest.json"));
    const currentBrowser = getCurrentBrowser();
    if (maybe_1.none(manifestURL) || maybe_1.none(currentBrowser)) {
        return { browser: "unknown", urlHostname: "" };
    }
    return { browser: Browser[currentBrowser], urlHostname: manifestURL.hostname };
}
exports.getCurrentBrowserInfo = getCurrentBrowserInfo;
function is32bitFirefox() {
    const userAgent = window.navigator.userAgent;
    return userAgent.search(/WOW64/) !== -1;
}
exports.is32bitFirefox = is32bitFirefox;
function findUserAgent() {
    return window.navigator.userAgent;
}
function findEdgeMajorVersion() {
    const userAgent = findUserAgent();
    if (maybe_1.none(userAgent)) {
        return undefined;
    }
    const products = user_agent_parser_1.parseUserAgent(userAgent);
    if (maybe_1.none(products)) {
        return undefined;
    }
    const edgeProduct = array_utils_1.findUnique(products, (product) => string_utils_1.compareStrings(product.name, "Edge"));
    if (maybe_1.none(edgeProduct)) {
        return undefined;
    }
    const edgeProductVerisonStr = edgeProduct.version;
    if (maybe_1.none(edgeProductVerisonStr)) {
        return undefined;
    }
    const edgeProductVersion = user_agent_parser_1.parseProductVersion(edgeProductVerisonStr);
    const edgeMajorVersion = array_utils_1.maybeFirst(edgeProductVersion);
    return edgeMajorVersion;
}
exports.findEdgeMajorVersion = findEdgeMajorVersion;
function browserToString(browser) {
    if (maybe_1.none(browser)) {
        return "";
    }
    return Browser[browser];
}
exports.browserToString = browserToString;
function browserToDisplayString(browser) {
    switch (browser) {
        case Browser.chrome:
            return "Google Chrome";
        case Browser.firefox:
            return "Mozilla Firefox";
        case Browser.edge:
            return "Microsoft Edge";
        case Browser.edgeChromium:
            return "Microsoft Edge";
    }
}
exports.browserToDisplayString = browserToDisplayString;


/***/ }),
/* 7 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var ConfigKey;
(function (ConfigKey) {
    ConfigKey[ConfigKey["isEnabled"] = 0] = "isEnabled";
    ConfigKey[ConfigKey["trustedUrls"] = 1] = "trustedUrls";
    ConfigKey[ConfigKey["untrustedUrls"] = 2] = "untrustedUrls";
    ConfigKey[ConfigKey["phishingSourceSites"] = 3] = "phishingSourceSites";
    ConfigKey[ConfigKey["phishingNavigationSequences"] = 4] = "phishingNavigationSequences";
    ConfigKey[ConfigKey["userTrustedOrigins"] = 5] = "userTrustedOrigins";
    ConfigKey[ConfigKey["userUntrustedOrigins"] = 6] = "userUntrustedOrigins";
    ConfigKey[ConfigKey["openPhishingLinksInSecureBrowser"] = 7] = "openPhishingLinksInSecureBrowser";
    ConfigKey[ConfigKey["prioritiseTrustedSites"] = 8] = "prioritiseTrustedSites";
    ConfigKey[ConfigKey["promptForUncategorized"] = 9] = "promptForUncategorized";
    ConfigKey[ConfigKey["reputableUrls"] = 10] = "reputableUrls";
    ConfigKey[ConfigKey["isEnterpriseProduct"] = 11] = "isEnterpriseProduct";
    ConfigKey[ConfigKey["isConsumerProduct"] = 12] = "isConsumerProduct";
    ConfigKey[ConfigKey["newTabPageUrls"] = 13] = "newTabPageUrls";
    ConfigKey[ConfigKey["blockedPageLearnMoreURL"] = 14] = "blockedPageLearnMoreURL";
    ConfigKey[ConfigKey["dontAskAgain"] = 15] = "dontAskAgain";
    ConfigKey[ConfigKey["secureBrowserRedirectTrustedSites"] = 16] = "secureBrowserRedirectTrustedSites";
    ConfigKey[ConfigKey["productStatus"] = 17] = "productStatus";
})(ConfigKey = exports.ConfigKey || (exports.ConfigKey = {}));


/***/ }),
/* 8 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
const maybe_1 = __webpack_require__(0);
function isEmpty(array) {
    return array.length === 0;
}
exports.isEmpty = isEmpty;
function first(array) {
    return array[0];
}
exports.first = first;
function second(array) {
    return array[1];
}
exports.second = second;
function last(array) {
    return array[array.length - 1];
}
exports.last = last;
function rest(array) {
    return array.slice(1);
}
exports.rest = rest;
function contains(array, element) {
    return array.indexOf(element) !== -1;
}
exports.contains = contains;
function copyArray(array) {
    const identity = (value) => {
        return value;
    };
    return array.map(identity);
}
exports.copyArray = copyArray;
function isArray(value) {
    return value instanceof Array;
}
exports.isArray = isArray;
function newArray(length, value) {
    const array = new Array();
    for (let index = 0; index < length; index += 1) {
        array.push(value);
    }
    return array;
}
exports.newArray = newArray;
function findIndex(array, value) {
    const notFound = -1;
    const index = array.indexOf(value);
    if (index === notFound) {
        return undefined;
    }
    return index;
}
exports.findIndex = findIndex;
function findAllIndices(array, predicate) {
    const results = new Array();
    array.forEach((element, index) => {
        if (predicate(element)) {
            results.push(index);
        }
    });
    return results;
}
exports.findAllIndices = findAllIndices;
function compareArrays(a, b, compare = maybe_1.isEqual) {
    if (a.length !== b.length) {
        return false;
    }
    const length = a.length;
    for (let i = 0; i < length; i += 1) {
        if (!compare(a[i], b[i])) {
            return false;
        }
    }
    return true;
}
exports.compareArrays = compareArrays;
function has(array, value) {
    return maybe_1.some(findIndex(array, value));
}
exports.has = has;
function findUnique(array, predicate) {
    const matchingElements = array.filter(predicate);
    if (matchingElements.length !== 1) {
        return undefined;
    }
    return first(matchingElements);
}
exports.findUnique = findUnique;
function maybeFirst(array) {
    if (maybe_1.none(array)) {
        return undefined;
    }
    return first(array);
}
exports.maybeFirst = maybeFirst;


/***/ }),
/* 9 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
const maybe_1 = __webpack_require__(0);
const murmur_hash_1 = __webpack_require__(11);
const url_utils_1 = __webpack_require__(4);
const hash_map_1 = __webpack_require__(16);
const log_1 = __webpack_require__(1);
const qlobber_1 = __webpack_require__(66);
const exclusionPrefix = "^";
const wildcardSpecRegex = new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?");
var WildcardSpecGroup;
(function (WildcardSpecGroup) {
    WildcardSpecGroup[WildcardSpecGroup["Scheme"] = 1] = "Scheme";
    WildcardSpecGroup[WildcardSpecGroup["HostAndPort"] = 4] = "HostAndPort";
})(WildcardSpecGroup || (WildcardSpecGroup = {}));
class OriginParseOptions {
    constructor(options) {
        this.allowNonWebSafeSchemes = false;
        this.allowFileScheme = false;
        this.allowChromeScheme = false;
        this.allowEdgeScheme = false;
        this.allowAboutScheme = false;
        this.allowChromeExtensionScheme = false;
        this.allowFirefoxExtensionScheme = false;
        this.allowEdgeExtensionScheme = false;
        this.allowWildcards = false;
        this.allowMissingWildcardScheme = false;
        this.allowTrailingWildcards = false;
        Object.assign(this, options);
    }
}
exports.OriginParseOptions = OriginParseOptions;
class OriginHashOptions {
    constructor(options) {
        this.seed = 0;
        this.ignoreHttpHttpsDifference = false;
        this.ignorePort = false;
        Object.assign(this, options);
    }
}
exports.OriginHashOptions = OriginHashOptions;
var Scheme;
(function (Scheme) {
    Scheme["HTTP"] = "http:";
    Scheme["HTTPS"] = "https:";
    Scheme["FTP"] = "ftp:";
    Scheme["FTPS"] = "ftps:";
    Scheme["WS"] = "ws:";
    Scheme["WSS"] = "wss:";
    Scheme["FILE"] = "file:";
    Scheme["CHROME"] = "chrome:";
    Scheme["EDGE"] = "edge:";
    Scheme["ABOUT"] = "about:";
    Scheme["JAVASCRIPT"] = "javascript:";
    Scheme["CHROME_EXTENSION"] = "chrome-extension:";
    Scheme["FIREFOX_EXTENSION"] = "moz-extension:";
    Scheme["EDGE_EXTENSION"] = "ms-browser-extension:";
    Scheme["WILDCARD_ONE"] = "+:";
    Scheme["WILDCARD_SOME"] = "*:";
})(Scheme = exports.Scheme || (exports.Scheme = {}));
const matcherOptions = {
    separator: ".",
    wildcard_one: Scheme.WILDCARD_ONE[0],
    wildcard_some: Scheme.WILDCARD_SOME[0],
    cache_adds: false
};
const trailingWildcards = [
    matcherOptions.separator + matcherOptions.wildcard_one,
    matcherOptions.separator + matcherOptions.wildcard_some
];
function isWebSafeScheme(scheme) {
    switch (scheme) {
        case Scheme.HTTP:
            return true;
        case Scheme.HTTPS:
            return true;
        default:
            return false;
    }
}
const standardPorts = new Map([
    [Scheme.HTTP, 80], [Scheme.HTTPS, 443]
]);
class Origin {
    constructor(scheme, host, port) {
        this.scheme = scheme;
        this.host = host;
        this.port = port;
    }
    toString() {
        if (this.port === undefined) {
            return `${this.scheme}//${this.host}`;
        }
        else {
            return `${this.scheme}//${this.host}:${this.port}`;
        }
    }
    toDisplayString() {
        return this.host;
    }
}
exports.Origin = Origin;
function isSameOrigin(a, b, options = new OriginHashOptions()) {
    if (maybe_1.none(a) || maybe_1.none(b)) {
        return false;
    }
    let schemeA = a.scheme;
    let schemeB = b.scheme;
    if (options.ignoreHttpHttpsDifference) {
        if (schemeA === Scheme.HTTP) {
            schemeA = Scheme.HTTPS;
        }
        if (schemeB === Scheme.HTTP) {
            schemeB = Scheme.HTTPS;
        }
    }
    if (schemeA !== schemeB) {
        return false;
    }
    if (a.host !== b.host) {
        return false;
    }
    if (options.ignorePort) {
        return true;
    }
    if (a.port === undefined && b.port !== undefined) {
        return false;
    }
    if (a.port !== undefined && b.port === undefined) {
        return false;
    }
    if (a.port === undefined && b.port === undefined) {
        return true;
    }
    return a.port === b.port;
}
exports.isSameOrigin = isSameOrigin;
function hashOrigin(origin, options = new OriginHashOptions()) {
    let hash = options.seed;
    let scheme = origin.scheme;
    if (options.ignoreHttpHttpsDifference && (scheme === Scheme.HTTP)) {
        scheme = Scheme.HTTPS;
    }
    hash = murmur_hash_1.murmurHash(scheme, hash);
    hash = murmur_hash_1.murmurHash(origin.host, hash);
    if (!options.ignorePort && (origin.port !== undefined)) {
        hash = murmur_hash_1.murmurHash(origin.port, hash);
    }
    return hash;
}
exports.hashOrigin = hashOrigin;
function parseScheme(protocol, options) {
    let scheme = undefined;
    switch (protocol.toLowerCase()) {
        case Scheme.HTTP:
            scheme = Scheme.HTTP;
            break;
        case Scheme.HTTPS:
            scheme = Scheme.HTTPS;
            break;
        case Scheme.FILE:
            if (options.allowFileScheme) {
                scheme = Scheme.FILE;
            }
            break;
        case Scheme.CHROME:
            if (options.allowChromeScheme) {
                scheme = Scheme.CHROME;
            }
            break;
        case Scheme.EDGE:
            if (options.allowEdgeScheme) {
                scheme = Scheme.EDGE;
            }
            break;
        case Scheme.ABOUT:
            if (options.allowAboutScheme) {
                scheme = Scheme.ABOUT;
            }
            break;
        case Scheme.CHROME_EXTENSION:
            if (options.allowChromeExtensionScheme) {
                scheme = Scheme.CHROME_EXTENSION;
            }
            break;
        case Scheme.FIREFOX_EXTENSION:
            if (options.allowFirefoxExtensionScheme) {
                scheme = Scheme.FIREFOX_EXTENSION;
            }
            break;
        case Scheme.EDGE_EXTENSION:
            if (options.allowEdgeExtensionScheme) {
                scheme = Scheme.EDGE_EXTENSION;
            }
            break;
        case Scheme.WILDCARD_ONE:
            if (options.allowWildcards) {
                scheme = Scheme.WILDCARD_ONE;
                break;
            }
            return undefined;
        case Scheme.WILDCARD_SOME:
            if (options.allowWildcards) {
                scheme = Scheme.WILDCARD_SOME;
                break;
            }
            return undefined;
        default:
            return undefined;
    }
    if (isWebSafeScheme(scheme)) {
        return scheme;
    }
    if (((scheme === Scheme.WILDCARD_ONE) ||
        (scheme === Scheme.WILDCARD_SOME)) &&
        options.allowWildcards) {
        return scheme;
    }
    else if ((scheme === Scheme.FILE) &&
        options.allowFileScheme) {
        return scheme;
    }
    else if ((scheme === Scheme.CHROME_EXTENSION) &&
        options.allowChromeExtensionScheme) {
        return scheme;
    }
    else if ((scheme === Scheme.FIREFOX_EXTENSION) &&
        options.allowFirefoxExtensionScheme) {
        return scheme;
    }
    else if ((scheme === Scheme.EDGE_EXTENSION) &&
        options.allowEdgeExtensionScheme) {
        return scheme;
    }
    else if ((scheme === Scheme.CHROME) &&
        options.allowChromeScheme) {
        return scheme;
    }
    else if ((scheme === Scheme.EDGE) &&
        options.allowEdgeScheme) {
        return scheme;
    }
    else if ((scheme === Scheme.ABOUT) &&
        options.allowAboutScheme) {
        return scheme;
    }
    else if (options.allowNonWebSafeSchemes) {
        return scheme;
    }
    else {
        return undefined;
    }
}
function isEmpty(value) {
    return value.length === 0;
}
function isInRange(value, min, max) {
    return (value >= min) && (value <= max);
}
function parsePort(portString, scheme) {
    const minPort = 0;
    const maxPort = (2 << 16) - 1;
    if (isEmpty(portString)) {
        return standardPorts.get(scheme);
    }
    const radix = 10;
    const port = parseInt(portString, radix);
    if (!isInRange(port, minPort, maxPort)) {
        throw new Error(`Invalid port ${port}`);
    }
    return port;
}
function parseOrigin(urlOrSpec, options = new OriginParseOptions()) {
    if (urlOrSpec instanceof URL) {
        return parseOriginFromURL(urlOrSpec, options);
    }
    else {
        return parseOriginFromSpec(urlOrSpec, options);
    }
}
exports.parseOrigin = parseOrigin;
function parseOriginFromURL(url, options) {
    const scheme = parseScheme(url.protocol, options);
    if (scheme === undefined) {
        return undefined;
    }
    try {
        const port = parsePort(url.port, scheme);
        return new Origin(scheme, url.hostname, port);
    }
    catch (e) {
        return undefined;
    }
}
function parseOriginFromSpec(spec, options) {
    if (options.allowWildcards) {
        if (!spec.includes("://") && options.allowMissingWildcardScheme) {
            spec = Scheme.WILDCARD_ONE + "//" + spec;
        }
        const match = wildcardSpecRegex.exec(spec);
        if (match === null) {
            return undefined;
        }
        const maybeScheme = match[WildcardSpecGroup.Scheme];
        if (maybeScheme === undefined) {
            return undefined;
        }
        const scheme = parseScheme(maybeScheme, options);
        if (scheme === undefined) {
            return undefined;
        }
        const maybeHostAndPort = match[WildcardSpecGroup.HostAndPort];
        if (maybeHostAndPort === undefined) {
            return undefined;
        }
        const hostAndPort = maybeHostAndPort.split(':');
        const host = hostAndPort[0];
        if (isEmpty(host)) {
            return undefined;
        }
        const port = parsePort(hostAndPort.length > 1 ? hostAndPort[1] : '', scheme);
        if (!options.allowTrailingWildcards) {
            if (trailingWildcards.some(trailingWildcard => host.length >= trailingWildcard.length && host.endsWith(trailingWildcard))) {
                log_1.logError(new Error(`Rule URL hostname ends in trailing wildcard: ${spec}`));
                return undefined;
            }
        }
        return new Origin(scheme, host, port);
    }
    const url = url_utils_1.parseUrl(spec);
    if (url === undefined) {
        return undefined;
    }
    return parseOriginFromURL(url, options);
}
function makeOriginSet(options = new OriginHashOptions()) {
    return new hash_map_1.HashSet((origin) => hashOrigin(origin, options), (a, b) => isSameOrigin(a, b, options));
}
exports.makeOriginSet = makeOriginSet;
function parseOriginSet(specList, setOptions = new OriginHashOptions(), options = new OriginParseOptions()) {
    const specSet = makeOriginSet(setOptions);
    for (const spec of specList) {
        const origin = parseOrigin(spec, options);
        if (origin !== undefined) {
            specSet.add(origin);
        }
    }
    return specSet;
}
exports.parseOriginSet = parseOriginSet;
function topicForOrigin(origin) {
    let scheme = origin.scheme;
    if (scheme === Scheme.WILDCARD_SOME) {
        scheme = Scheme.WILDCARD_ONE;
    }
    return scheme.slice(0, -1) + matcherOptions.separator + origin.host;
}
class OriginMatcher {
    constructor() {
        this.matcher = new qlobber_1.QlobberTrue(matcherOptions);
        this.exclude_matcher = new qlobber_1.QlobberTrue(matcherOptions);
    }
    add(origin) {
        const topic = topicForOrigin(origin);
        this.matcher.add(topic);
        return this;
    }
    exclude(origin) {
        const topic = topicForOrigin(origin);
        this.exclude_matcher.add(topic);
        return this;
    }
    has(origin) {
        const topic = topicForOrigin(origin);
        return this.matcher.test(topic) && !this.exclude_matcher.test(topic);
    }
}
exports.OriginMatcher = OriginMatcher;
function parseOriginMatcher(specList, options = new OriginParseOptions()) {
    if (specList.length > 0) {
        log_1.log(`making matcher from ${specList.length} entries`);
    }
    const matcher = new OriginMatcher();
    for (const spec of specList) {
        if (spec.startsWith(exclusionPrefix)) {
            const origin = parseOrigin(spec.substr(exclusionPrefix.length), options);
            if (origin !== undefined) {
                matcher.exclude(origin);
            }
        }
        else {
            const origin = parseOrigin(spec, options);
            if (origin !== undefined) {
                matcher.add(origin);
            }
        }
    }
    if (specList.length > 0) {
        log_1.log('finished making matcher');
    }
    return matcher;
}
exports.parseOriginMatcher = parseOriginMatcher;
class OriginExpiryMatcher {
    constructor() {
        this.matcher = new qlobber_1.Qlobber(matcherOptions);
    }
    add(origin, expiry) {
        const topic = topicForOrigin(origin);
        this.matcher.add(topic, expiry);
        return this;
    }
    has(origin) {
        const topic = topicForOrigin(origin);
        const expiries = this.matcher.match(topic);
        const now = Date.now() / 1000;
        for (const expiry of expiries) {
            if (expiry > now) {
                return true;
            }
        }
        return false;
    }
}
exports.OriginExpiryMatcher = OriginExpiryMatcher;
function parseOriginExpiryMatcher(specList, options = new OriginParseOptions()) {
    if (specList.length > 0) {
        log_1.log(`making expiry matcher from ${specList.length} entries`);
    }
    const matcher = new OriginExpiryMatcher();
    const now = Date.now() / 1000;
    for (const [spec, expiry] of specList) {
        if (expiry > now) {
            const origin = parseOrigin(spec, options);
            if (origin !== undefined) {
                matcher.add(origin, expiry);
            }
        }
    }
    if (specList.length > 0) {
        log_1.log('finished making expiry matcher');
    }
    return matcher;
}
exports.parseOriginExpiryMatcher = parseOriginExpiryMatcher;
class OriginGrouper {
    constructor() {
        this.grouper = new qlobber_1.Qlobber(matcherOptions);
    }
    addFromSpecList(specList, group, options = new OriginParseOptions()) {
        for (const spec of specList) {
            this.addFromSpec(spec, group, options);
        }
        return this;
    }
    addFromSpec(spec, group, options = new OriginParseOptions()) {
        const origin = parseOrigin(spec, options);
        if (maybe_1.some(origin)) {
            this.add(origin, group);
        }
        return this;
    }
    add(origin, group) {
        const topic = topicForOrigin(origin);
        this.grouper.add(topic, group);
        return this;
    }
    match(origin) {
        const topic = topicForOrigin(origin);
        return this.grouper.match(topic);
    }
}
exports.OriginGrouper = OriginGrouper;


/***/ }),
/* 10 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
function isInRange(value, min, max) {
    return (value >= min) && (value <= max);
}
exports.isInRange = isInRange;
function isNumber(value) {
    return typeof value === "number";
}
exports.isNumber = isNumber;
function parseNumber(value) {
    try {
        const base = 10;
        return parseInt(value, base);
    }
    catch (e) {
        return undefined;
    }
}
exports.parseNumber = parseNumber;


/***/ }),
/* 11 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
function murmurHashString(key, seed) {
    let len = key.length * 2;
    const m = 0xc6a4a793;
    const r = 16;
    let h = seed ^ (len * m);
    for (let i = 0; (i < key.length) && (len >= 4); i += 2) {
        const data = (key.charCodeAt(i) + (key.charCodeAt(i + 1) << 16));
        const k = data;
        h += k;
        h *= m;
        h ^= (h >> 16);
        len -= 4;
    }
    if (len === 2) {
        let data = key.charCodeAt(key.length - 1);
        h += data;
        h *= m;
        h ^= (h >> r);
    }
    h *= m;
    h ^= (h >> 10);
    h *= m;
    h ^= (h >> 17);
    return h;
}
function murmurHashNumber(key, seed) {
    let len = 4;
    const m = 0xc6a4a793;
    const r = 16;
    let h = seed ^ (len * m);
    const data = key & 0xffffffff;
    const k = data;
    h += k;
    h *= m;
    h ^= (h >> 16);
    h *= m;
    h ^= (h >> 10);
    h *= m;
    h ^= (h >> 17);
    return h;
}
function murmurHash(key, seed) {
    if (typeof key === 'string') {
        return murmurHashString(key, seed);
    }
    else if (typeof key === 'boolean') {
        return murmurHashNumber(key ? 1 : 0, seed);
    }
    else {
        return murmurHashNumber(key, seed);
    }
}
exports.murmurHash = murmurHash;


/***/ }),
/* 12 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.hostConstants = {
    hostHelperId: "com.bromium.hosthelper",
    blockedPage: "blocked-page.html",
    externalAppLinkPage: "external-app-link-page-v1.html",
    holdingPage: "holding-page.html",
    edgeExternalAppLinkQueryKey: "d1b30e68-83be-4b6e-9c2a-c1c4ca502e8b",
    edgeExternalAppLinkQueryValue: "0",
    blockedFilePage: "blocked-file-page.html",
    pageTrackerPortName: "com.bromium.page.tracker",
    externalAppLinkPagePortName: "com.bromium.external.app.link.page",
    blockedPagePortName: "com.bromium.blocked.page",
    blockedFilePagePortName: "com.bromium.blocked.file.page",
    popupPortName: "com.bromium.popup",
    optionsPortName: "com.bromium.options",
    maxAgePageEvent: 1000,
    postponementTimeout: 5000
};


/***/ }),
/* 13 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
function makePromise(factory) {
    return new Promise((resolve, reject) => {
        resolve(factory());
    });
}
exports.makePromise = makePromise;
function makePromiseAsync(factory) {
    return new Promise((resolve, reject) => {
        factory(resolve);
    });
}
exports.makePromiseAsync = makePromiseAsync;


/***/ }),
/* 14 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
const string_utils_1 = __webpack_require__(3);
const range_1 = __webpack_require__(98);
const message_types_1 = __webpack_require__(2);
const maybe_1 = __webpack_require__(0);
const errors_1 = __webpack_require__(21);
var ProtocolVersion;
(function (ProtocolVersion) {
    ProtocolVersion["v1"] = "tag:bromium.com,2018-02:protocols:google-chrome-extension:initial";
    ProtocolVersion["v2"] = "tag:bromium.com,2018-06:protocols:google-chrome-extension:v2";
    ProtocolVersion["v3"] = "tag:bromium.com,2018-07:protocols:google-chrome-extension:v3";
    ProtocolVersion["v4"] = "tag:bromium.com,2018-08:protocols:google-chrome-extension:v4";
    ProtocolVersion["v5"] = "tag:bromium.com,2018-11:protocols:google-chrome-extension:v5";
    ProtocolVersion["v6"] = "tag:bromium.com,2018-12:protocols:google-chrome-extension:v6";
    ProtocolVersion["v7"] = "tag:bromium.com,2019-01:protocols:google-chrome-extension:v7";
    ProtocolVersion["v8"] = "tag:bromium.com,2019-06:protocols:google-chrome-extension:v8";
    ProtocolVersion["v9"] = "tag:bromium.com,2019-07:protocols:google-chrome-extension:v9";
    ProtocolVersion["v10"] = "tag:bromium.com,2019-09:protocols:google-chrome-extension:v10";
    ProtocolVersion["v11"] = "tag:bromium.com,2019-10:protocols:google-chrome-extension:v11";
    ProtocolVersion["v12"] = "tag:bromium.com,2019-11:protocols:google-chrome-extension:v12";
})(ProtocolVersion = exports.ProtocolVersion || (exports.ProtocolVersion = {}));
exports.supportedProtocolVersions = [
    ProtocolVersion.v12,
    ProtocolVersion.v11,
    ProtocolVersion.v10,
    ProtocolVersion.v9,
    ProtocolVersion.v8,
    ProtocolVersion.v7,
    ProtocolVersion.v6,
    ProtocolVersion.v5,
    ProtocolVersion.v4,
    ProtocolVersion.v3,
    ProtocolVersion.v2,
    ProtocolVersion.v1
];
const supportedMessageTypes = (() => {
    const supportedMessageRanges = string_utils_1.makeStringHashMap();
    supportedMessageRanges.putMany([
        [ProtocolVersion.v1, new range_1.Range(message_types_1.MessageType.handshakeV1, message_types_1.MessageType.heartbeatV1)],
        [ProtocolVersion.v2, new range_1.Range(message_types_1.MessageType.handshakeV1, message_types_1.MessageType.enabledFeaturesResponseV2)],
        [ProtocolVersion.v3, new range_1.Range(message_types_1.MessageType.handshakeV1, message_types_1.MessageType.reputationChangedV3)],
        [ProtocolVersion.v4, new range_1.Range(message_types_1.MessageType.handshakeV1, message_types_1.MessageType.blockedPageDataResponseV4)],
        [ProtocolVersion.v5, new range_1.Range(message_types_1.MessageType.handshakeV1, message_types_1.MessageType.popupDataResponseV5)],
        [ProtocolVersion.v6, new range_1.Range(message_types_1.MessageType.handshakeV1, message_types_1.MessageType.trustUrlV6)],
        [ProtocolVersion.v7, new range_1.Range(message_types_1.MessageType.handshakeV1, message_types_1.MessageType.configChangedV7)],
        [ProtocolVersion.v8, new range_1.Range(message_types_1.MessageType.handshakeV1, message_types_1.MessageType.configChangedV8)],
        [ProtocolVersion.v9, new range_1.Range(message_types_1.MessageType.handshakeV1, message_types_1.MessageType.configChangedV9)],
        [ProtocolVersion.v10, new range_1.Range(message_types_1.MessageType.handshakeV1, message_types_1.MessageType.heartbeatV10)],
        [ProtocolVersion.v11, new range_1.Range(message_types_1.MessageType.handshakeV1, message_types_1.MessageType.configChangedV11)],
        [ProtocolVersion.v12, new range_1.Range(message_types_1.MessageType.handshakeV1, message_types_1.MessageType.configChangedV12)],
    ]);
    return supportedMessageRanges;
})();
function isMessageTypeSupported(messageType, protocolVersion) {
    const range = supportedMessageTypes.get(protocolVersion);
    if (maybe_1.none(range)) {
        return false;
    }
    return range.contains(messageType);
}
exports.isMessageTypeSupported = isMessageTypeSupported;
var VersionSupportStatus;
(function (VersionSupportStatus) {
    VersionSupportStatus[VersionSupportStatus["notHandshaken"] = 0] = "notHandshaken";
    VersionSupportStatus[VersionSupportStatus["supported"] = 1] = "supported";
    VersionSupportStatus[VersionSupportStatus["unsupported"] = 2] = "unsupported";
})(VersionSupportStatus = exports.VersionSupportStatus || (exports.VersionSupportStatus = {}));
const supportedErrors = (() => {
    const supportedErrors = string_utils_1.makeStringHashMap();
    supportedErrors.putMany([
        [ProtocolVersion.v1, new range_1.Range(errors_1.ChragError.notEnabled, errors_1.ChragError.recoveredFromError)],
        [ProtocolVersion.v2, new range_1.Range(errors_1.ChragError.notEnabled, errors_1.ChragError.recoveredFromError)],
        [ProtocolVersion.v3, new range_1.Range(errors_1.ChragError.notEnabled, errors_1.ChragError.recoveredFromError)],
        [ProtocolVersion.v4, new range_1.Range(errors_1.ChragError.notEnabled, errors_1.ChragError.recoveredFromError)],
        [ProtocolVersion.v5, new range_1.Range(errors_1.ChragError.notEnabled, errors_1.ChragError.recoveredFromError)],
        [ProtocolVersion.v6, new range_1.Range(errors_1.ChragError.notEnabled, errors_1.ChragError.recoveredFromError)],
        [ProtocolVersion.v7, new range_1.Range(errors_1.ChragError.notEnabled, errors_1.ChragError.is32bitFirefox)],
        [ProtocolVersion.v8, new range_1.Range(errors_1.ChragError.notEnabled, errors_1.ChragError.is32bitFirefox)],
        [ProtocolVersion.v9, new range_1.Range(errors_1.ChragError.notEnabled, errors_1.ChragError.is32bitFirefox)],
        [ProtocolVersion.v10, new range_1.Range(errors_1.ChragError.notEnabled, errors_1.ChragError.helperUnresponsive)],
        [ProtocolVersion.v11, new range_1.Range(errors_1.ChragError.notEnabled, errors_1.ChragError.helperUnresponsive)],
        [ProtocolVersion.v12, new range_1.Range(errors_1.ChragError.notEnabled, errors_1.ChragError.helperUnresponsive)],
    ]);
    return supportedErrors;
})();
function isErrorSupported(error, protocolVersion) {
    const range = supportedErrors.get(protocolVersion);
    if (maybe_1.none(range)) {
        return false;
    }
    return range.contains(error);
}
exports.isErrorSupported = isErrorSupported;
function shouldLogMessage(protocolVersion) {
    return !isMessageTypeSupported(message_types_1.MessageType.stopHelperV10, protocolVersion);
}
exports.shouldLogMessage = shouldLogMessage;
var HelpPageVersion;
(function (HelpPageVersion) {
    HelpPageVersion["v415"] = "v4.1.5";
    HelpPageVersion["v4181"] = "v4.1.8.1";
    HelpPageVersion["maxHelpPageVersion"] = "v4.1.8.1";
})(HelpPageVersion || (HelpPageVersion = {}));
;
const supportedHelpPageVersions = (() => {
    const supportedHelpPageVersions = string_utils_1.makeStringHashMap();
    supportedHelpPageVersions.putMany([
        [ProtocolVersion.v1, HelpPageVersion.v415],
        [ProtocolVersion.v2, HelpPageVersion.v415],
        [ProtocolVersion.v3, HelpPageVersion.v415],
        [ProtocolVersion.v4, HelpPageVersion.v415],
        [ProtocolVersion.v5, HelpPageVersion.v415],
        [ProtocolVersion.v6, HelpPageVersion.v415],
        [ProtocolVersion.v7, HelpPageVersion.v415],
        [ProtocolVersion.v8, HelpPageVersion.v415],
        [ProtocolVersion.v9, HelpPageVersion.v415],
        [ProtocolVersion.v10, HelpPageVersion.v415],
        [ProtocolVersion.v11, HelpPageVersion.v4181],
        [ProtocolVersion.v12, HelpPageVersion.v4181],
    ]);
    return supportedHelpPageVersions;
})();
function getHelpPageVersion(protocolVersion) {
    if (maybe_1.some(protocolVersion)) {
        const supportedVersion = supportedHelpPageVersions.get(protocolVersion);
        if (maybe_1.some(supportedVersion)) {
            return supportedVersion;
        }
    }
    return HelpPageVersion.maxHelpPageVersion;
}
exports.getHelpPageVersion = getHelpPageVersion;


/***/ }),
/* 15 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.

// a duplex stream is just a stream that is both readable and writable.
// Since JS doesn't have multiple prototypal inheritance, this class
// prototypally inherits from Readable, and then parasitically from
// Writable.



/*<replacement>*/

var processNextTick = __webpack_require__(26);
/*</replacement>*/

/*<replacement>*/
var objectKeys = Object.keys || function (obj) {
  var keys = [];
  for (var key in obj) {
    keys.push(key);
  }return keys;
};
/*</replacement>*/

module.exports = Duplex;

/*<replacement>*/
var util = __webpack_require__(23);
util.inherits = __webpack_require__(18);
/*</replacement>*/

var Readable = __webpack_require__(41);
var Writable = __webpack_require__(34);

util.inherits(Duplex, Readable);

var keys = objectKeys(Writable.prototype);
for (var v = 0; v < keys.length; v++) {
  var method = keys[v];
  if (!Duplex.prototype[method]) Duplex.prototype[method] = Writable.prototype[method];
}

function Duplex(options) {
  if (!(this instanceof Duplex)) return new Duplex(options);

  Readable.call(this, options);
  Writable.call(this, options);

  if (options && options.readable === false) this.readable = false;

  if (options && options.writable === false) this.writable = false;

  this.allowHalfOpen = true;
  if (options && options.allowHalfOpen === false) this.allowHalfOpen = false;

  this.once('end', onend);
}

// the no-half-open enforcer
function onend() {
  // if we allow half-open state, or if the writable side ended,
  // then we're ok.
  if (this.allowHalfOpen || this._writableState.ended) return;

  // no more data can be written.
  // But allow more writes to happen in this tick.
  processNextTick(onEndNT, this);
}

function onEndNT(self) {
  self.end();
}

Object.defineProperty(Duplex.prototype, 'destroyed', {
  get: function () {
    if (this._readableState === undefined || this._writableState === undefined) {
      return false;
    }
    return this._readableState.destroyed && this._writableState.destroyed;
  },
  set: function (value) {
    // we ignore the value if the stream
    // has not been initialized yet
    if (this._readableState === undefined || this._writableState === undefined) {
      return;
    }

    // backward compatibility, the user is explicitly
    // managing destroyed
    this._readableState.destroyed = value;
    this._writableState.destroyed = value;
  }
});

Duplex.prototype._destroy = function (err, cb) {
  this.push(null);
  this.end();

  processNextTick(cb, err);
};

function forEach(xs, f) {
  for (var i = 0, l = xs.length; i < l; i++) {
    f(xs[i], i);
  }
}

/***/ }),
/* 16 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
function isPowerOf2(value) {
    const mask = value - 1;
    return (value & mask) === 0;
}
function mod(n, d) {
    return n & (d - 1);
}
var TryPutStatus;
(function (TryPutStatus) {
    TryPutStatus[TryPutStatus["ValueInserted"] = 0] = "ValueInserted";
    TryPutStatus[TryPutStatus["ValueUpdated"] = 1] = "ValueUpdated";
    TryPutStatus[TryPutStatus["Failure"] = 2] = "Failure";
})(TryPutStatus || (TryPutStatus = {}));
function convertToArray(elements, selector) {
    const filteredElements = elements.filter((element) => {
        return element !== undefined && element !== null;
    });
    const mappedElements = filteredElements.map(selector);
    return mappedElements;
}
class HashMap {
    constructor(hash, compare, initialCapacity = 0, fillFactor = 0.75) {
        this.hash = hash;
        this.compare = compare;
        this.fillFactor = fillFactor;
        this.size = 0;
        this.elements = [];
        if (initialCapacity !== 0) {
            this.resize(initialCapacity);
        }
    }
    shouldResize(size) {
        if (this.elements.length === 0) {
            return true;
        }
        return (size / this.elements.length) >= this.fillFactor;
    }
    findNextCapacity() {
        if (this.elements.length === 0) {
            return 2;
        }
        return this.elements.length * 2;
    }
    findIndex(hash, elements = this.elements) {
        const index = mod(hash, elements.length);
        if (index < 0) {
            throw new Error(`HashMap.findIndex: index < 0: ${index} < 0`);
        }
        if (index >= elements.length) {
            throw new Error(`HashMap.findIndex: index >= elements.length: ${index} >= ${elements.length}`);
        }
        return index;
    }
    compareKeys(ha, ka, hb, kb) {
        return (ha === hb) && this.compare(ka, kb);
    }
    tryPut(hash, key, value, start, end, elements = this.elements) {
        for (let i = start; i < end; i += 1) {
            const element = elements[i];
            if (element !== undefined && element !== null) {
                const [currentHash, currentKey, currentValue] = element;
                if (this.compareKeys(hash, key, currentHash, currentKey)) {
                    elements[i] = [hash, key, value];
                    return TryPutStatus.ValueUpdated;
                }
            }
            else {
                elements[i] = [hash, key, value];
                return TryPutStatus.ValueInserted;
            }
        }
        return TryPutStatus.Failure;
    }
    resize(capacity) {
        if (capacity <= this.elements.length) {
            throw new Error(`HashMap.resize: capacity <= this.elements.length: ${capacity} <= ${this.elements.length}`);
        }
        if (capacity <= this.size) {
            throw new Error(`HashMap.resize: capacity <= this.size: ${capacity} <= ${this.size}`);
        }
        if (!isPowerOf2(capacity)) {
            throw new Error(`HashMap.resize: !isPowerOf2(${capacity})`);
        }
        const elements = new Array(capacity);
        for (let element of this.elements) {
            if (element !== undefined && element !== null) {
                const [hash, key, value] = element;
                const index = this.findIndex(hash, elements);
                if (this.tryPut(hash, key, value, index, elements.length, elements) !== TryPutStatus.Failure) {
                    continue;
                }
                if (this.tryPut(hash, key, value, 0, index, elements) !== TryPutStatus.Failure) {
                    continue;
                }
                throw new Error(`HashMap.resize: !tryPut`);
            }
        }
        this.elements = elements;
    }
    has(key) {
        return this.get(key) !== undefined;
    }
    isHole(element) {
        return element === undefined;
    }
    tryGet(hash, key, start, end) {
        const foundHole = true;
        for (let i = start; i < end; i += 1) {
            const element = this.elements[i];
            if (element !== undefined && element !== null) {
                const [currentHash, currentKey, currentValue] = element;
                if (this.compareKeys(hash, key, currentHash, currentKey)) {
                    return [!foundHole, currentValue];
                }
            }
            else if (this.isHole(element)) {
                return [foundHole, undefined];
            }
        }
        return [!foundHole, undefined];
    }
    get(key) {
        if (this.size === 0) {
            return undefined;
        }
        const hash = this.hash(key);
        const index = this.findIndex(hash);
        let [foundHole, value] = this.tryGet(hash, key, index, this.elements.length);
        if (value) {
            return value;
        }
        if (foundHole) {
            return undefined;
        }
        [foundHole, value] = this.tryGet(hash, key, 0, index);
        return value;
    }
    put(key, value) {
        if (this.shouldResize(this.size + 1)) {
            this.resize(this.findNextCapacity());
        }
        const hash = this.hash(key);
        const index = this.findIndex(hash);
        switch (this.tryPut(hash, key, value, index, this.elements.length)) {
            case TryPutStatus.ValueInserted:
                this.size += 1;
                return;
            case TryPutStatus.ValueUpdated:
                return;
        }
        switch (this.tryPut(hash, key, value, 0, index)) {
            case TryPutStatus.ValueInserted:
                this.size += 1;
                return;
            case TryPutStatus.ValueUpdated:
                return;
        }
        throw new Error('HashMap.put: !tryPut');
    }
    putMany(keyValues) {
        for (const [key, value] of keyValues) {
            this.put(key, value);
        }
    }
    tryRemove(hash, key, start, end) {
        const foundHole = true;
        const removed = true;
        for (let i = start; i < end; i += 1) {
            const element = this.elements[i];
            if (element !== undefined && element !== null) {
                const [currentHash, currentKey, currentValue] = element;
                if (this.compareKeys(hash, key, currentHash, currentKey)) {
                    this.elements[i] = null;
                    return [!foundHole, removed];
                }
            }
            else if (this.isHole(element)) {
                return [foundHole, !removed];
            }
        }
        return [!foundHole, !removed];
    }
    remove(key) {
        if (this.isEmpty()) {
            return false;
        }
        const hash = this.hash(key);
        const index = this.findIndex(hash);
        let [foundHole, removed] = this.tryRemove(hash, key, index, this.elements.length);
        if (removed) {
            this.size -= 1;
            return true;
        }
        if (foundHole) {
            return false;
        }
        [foundHole, removed] = this.tryRemove(hash, key, 0, index);
        if (removed) {
            this.size -= 1;
        }
        return removed;
    }
    isEmpty() {
        return this.size === 0;
    }
    toArray() {
        const selectKeyValue = ([hash, key, value]) => {
            return [key, value];
        };
        return convertToArray(this.elements, selectKeyValue);
    }
    *[Symbol.iterator]() {
        for (const element of this.elements) {
            if (element !== undefined && element !== null) {
                const [hash, key, value] = element;
                yield [key, value];
            }
        }
    }
}
exports.HashMap = HashMap;
class HashSet {
    constructor(hash, compare, initialCapacity = 0, fillFactor = 0.75) {
        this.map = new HashMap(hash, compare, initialCapacity, fillFactor);
    }
    get size() {
        return this.map.size;
    }
    addMany(keys) {
        let nKeysAdded = 0;
        for (const key of keys) {
            if (this.add(key)) {
                nKeysAdded += 1;
            }
        }
        return nKeysAdded;
    }
    add(key) {
        const sizeBefore = this.map.size;
        this.map.put(key, key);
        const sizeAfter = this.map.size;
        return (sizeAfter - sizeBefore) === 1;
    }
    has(key) {
        return this.map.has(key);
    }
    remove(key) {
        return this.map.remove(key);
    }
    isEmpty() {
        return this.map.isEmpty();
    }
    toArray() {
        const selectKey = ([hash, key, value]) => {
            return key;
        };
        return convertToArray(this.map.elements, selectKey);
    }
    *[Symbol.iterator]() {
        for (const element of this.map.elements) {
            if (element !== undefined && element !== null) {
                const [hash, key, value] = element;
                yield key;
            }
        }
    }
}
exports.HashSet = HashSet;
function defaultHash(instance) {
    return instance.hash();
}
function defaultCompare(a, b) {
    return a.compare(b);
}
function makeDefaultHashMap() {
    return new HashMap(defaultHash, defaultCompare);
}
exports.makeDefaultHashMap = makeDefaultHashMap;
function makeDefaultHashSet() {
    return new HashSet(defaultHash, defaultCompare);
}
exports.makeDefaultHashSet = makeDefaultHashSet;


/***/ }),
/* 17 */
/***/ (function(module, exports) {

var g;

// This works in non-strict mode
g = (function() {
	return this;
})();

try {
	// This works if eval is allowed (see CSP)
	g = g || Function("return this")() || (1,eval)("this");
} catch(e) {
	// This works if the window reference is available
	if(typeof window === "object")
		g = window;
}

// g can still be undefined, but nothing to do about it...
// We return undefined, instead of nothing here, so it's
// easier to handle this case. if(!global) { ...}

module.exports = g;


/***/ }),
/* 18 */
/***/ (function(module, exports) {

if (typeof Object.create === 'function') {
  // implementation from standard node.js 'util' module
  module.exports = function inherits(ctor, superCtor) {
    ctor.super_ = superCtor
    ctor.prototype = Object.create(superCtor.prototype, {
      constructor: {
        value: ctor,
        enumerable: false,
        writable: true,
        configurable: true
      }
    });
  };
} else {
  // old school shim for old browsers
  module.exports = function inherits(ctor, superCtor) {
    ctor.super_ = superCtor
    var TempCtor = function () {}
    TempCtor.prototype = superCtor.prototype
    ctor.prototype = new TempCtor()
    ctor.prototype.constructor = ctor
  }
}


/***/ }),
/* 19 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
const hash_map_1 = __webpack_require__(16);
const murmur_hash_1 = __webpack_require__(11);
class IdGenerator {
    constructor() {
        this.nextId = 0;
    }
    generateId() {
        const id = this.nextId;
        this.nextId += 1;
        return id;
    }
}
exports.IdGenerator = IdGenerator;
function hashId(id, seed = 0) {
    return murmur_hash_1.murmurHash(id, seed);
}
exports.hashId = hashId;
function isSameId(a, b) {
    return a === b;
}
exports.isSameId = isSameId;
function makeIdHashSet() {
    return new hash_map_1.HashSet(hashId, isSameId);
}
exports.makeIdHashSet = makeIdHashSet;
function makeIdHashMap() {
    return new hash_map_1.HashMap(hashId, isSameId);
}
exports.makeIdHashMap = makeIdHashMap;


/***/ }),
/* 20 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
const once_1 = __webpack_require__(30);
class EventDispatcher {
    constructor() {
        this.eventHandlers = new Array();
        this.oneShotEventHandlers = new Array();
    }
    registerEventHandler(eventHandler) {
        this.eventHandlers.push(eventHandler);
    }
    registerOneShotEventHandler(eventHandler) {
        this.oneShotEventHandlers.push(eventHandler);
    }
    dispatchEvent(event) {
        for (const handleEvent of this.eventHandlers) {
            handleEvent(event);
        }
        for (const handleEvent of this.oneShotEventHandlers) {
            handleEvent(event);
        }
        this.oneShotEventHandlers = [];
    }
}
exports.EventDispatcher = EventDispatcher;
class ConditionDispatcher {
    constructor() {
        this.setCondition = once_1.doOnce(() => { this.setConditionImpl(); });
        this.condition = false;
        this.conditionHandlers = new Array();
    }
    registerConditionListener(conditionHandler) {
        if (this.condition) {
            conditionHandler();
        }
        else {
            this.conditionHandlers.push(conditionHandler);
        }
    }
    setConditionImpl() {
        this.condition = true;
        for (const handleCondition of this.conditionHandlers) {
            handleCondition();
        }
        this.conditionHandlers = [];
    }
}
exports.ConditionDispatcher = ConditionDispatcher;


/***/ }),
/* 21 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
const number_utils_1 = __webpack_require__(10);
var ChragError;
(function (ChragError) {
    ChragError[ChragError["notEnabled"] = 0] = "notEnabled";
    ChragError[ChragError["helperPortError"] = 1] = "helperPortError";
    ChragError[ChragError["launchBrowserFailed"] = 2] = "launchBrowserFailed";
    ChragError[ChragError["trustDownloadFailed"] = 3] = "trustDownloadFailed";
    ChragError[ChragError["handshakeError"] = 4] = "handshakeError";
    ChragError[ChragError["unknownError"] = 5] = "unknownError";
    ChragError[ChragError["recoveredFromError"] = 6] = "recoveredFromError";
    ChragError[ChragError["is32bitFirefox"] = 7] = "is32bitFirefox";
    ChragError[ChragError["helperUnresponsive"] = 8] = "helperUnresponsive";
})(ChragError = exports.ChragError || (exports.ChragError = {}));
var ChragErrorLimits;
(function (ChragErrorLimits) {
    ChragErrorLimits[ChragErrorLimits["min"] = 0] = "min";
    ChragErrorLimits[ChragErrorLimits["max"] = 8] = "max";
})(ChragErrorLimits || (ChragErrorLimits = {}));
function isChragError(type) {
    return number_utils_1.isInRange(type, ChragErrorLimits.min, ChragErrorLimits.max);
}
exports.isChragError = isChragError;
function isError(value) {
    return value instanceof Error;
}
exports.isError = isError;


/***/ }),
/* 22 */
/***/ (function(module, exports) {

// shim for using process in browser
var process = module.exports = {};

// cached from whatever global is present so that test runners that stub it
// don't break things.  But we need to wrap it in a try catch in case it is
// wrapped in strict mode code which doesn't define any globals.  It's inside a
// function because try/catches deoptimize in certain engines.

var cachedSetTimeout;
var cachedClearTimeout;

function defaultSetTimout() {
    throw new Error('setTimeout has not been defined');
}
function defaultClearTimeout () {
    throw new Error('clearTimeout has not been defined');
}
(function () {
    try {
        if (typeof setTimeout === 'function') {
            cachedSetTimeout = setTimeout;
        } else {
            cachedSetTimeout = defaultSetTimout;
        }
    } catch (e) {
        cachedSetTimeout = defaultSetTimout;
    }
    try {
        if (typeof clearTimeout === 'function') {
            cachedClearTimeout = clearTimeout;
        } else {
            cachedClearTimeout = defaultClearTimeout;
        }
    } catch (e) {
        cachedClearTimeout = defaultClearTimeout;
    }
} ())
function runTimeout(fun) {
    if (cachedSetTimeout === setTimeout) {
        //normal enviroments in sane situations
        return setTimeout(fun, 0);
    }
    // if setTimeout wasn't available but was latter defined
    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {
        cachedSetTimeout = setTimeout;
        return setTimeout(fun, 0);
    }
    try {
        // when when somebody has screwed with setTimeout but no I.E. maddness
        return cachedSetTimeout(fun, 0);
    } catch(e){
        try {
            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally
            return cachedSetTimeout.call(null, fun, 0);
        } catch(e){
            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error
            return cachedSetTimeout.call(this, fun, 0);
        }
    }


}
function runClearTimeout(marker) {
    if (cachedClearTimeout === clearTimeout) {
        //normal enviroments in sane situations
        return clearTimeout(marker);
    }
    // if clearTimeout wasn't available but was latter defined
    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {
        cachedClearTimeout = clearTimeout;
        return clearTimeout(marker);
    }
    try {
        // when when somebody has screwed with setTimeout but no I.E. maddness
        return cachedClearTimeout(marker);
    } catch (e){
        try {
            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally
            return cachedClearTimeout.call(null, marker);
        } catch (e){
            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.
            // Some versions of I.E. have different rules for clearTimeout vs setTimeout
            return cachedClearTimeout.call(this, marker);
        }
    }



}
var queue = [];
var draining = false;
var currentQueue;
var queueIndex = -1;

function cleanUpNextTick() {
    if (!draining || !currentQueue) {
        return;
    }
    draining = false;
    if (currentQueue.length) {
        queue = currentQueue.concat(queue);
    } else {
        queueIndex = -1;
    }
    if (queue.length) {
        drainQueue();
    }
}

function drainQueue() {
    if (draining) {
        return;
    }
    var timeout = runTimeout(cleanUpNextTick);
    draining = true;

    var len = queue.length;
    while(len) {
        currentQueue = queue;
        queue = [];
        while (++queueIndex < len) {
            if (currentQueue) {
                currentQueue[queueIndex].run();
            }
        }
        queueIndex = -1;
        len = queue.length;
    }
    currentQueue = null;
    draining = false;
    runClearTimeout(timeout);
}

process.nextTick = function (fun) {
    var args = new Array(arguments.length - 1);
    if (arguments.length > 1) {
        for (var i = 1; i < arguments.length; i++) {
            args[i - 1] = arguments[i];
        }
    }
    queue.push(new Item(fun, args));
    if (queue.length === 1 && !draining) {
        runTimeout(drainQueue);
    }
};

// v8 likes predictible objects
function Item(fun, array) {
    this.fun = fun;
    this.array = array;
}
Item.prototype.run = function () {
    this.fun.apply(null, this.array);
};
process.title = 'browser';
process.browser = true;
process.env = {};
process.argv = [];
process.version = ''; // empty string to avoid regexp issues
process.versions = {};

function noop() {}

process.on = noop;
process.addListener = noop;
process.once = noop;
process.off = noop;
process.removeListener = noop;
process.removeAllListeners = noop;
process.emit = noop;
process.prependListener = noop;
process.prependOnceListener = noop;

process.listeners = function (name) { return [] }

process.binding = function (name) {
    throw new Error('process.binding is not supported');
};

process.cwd = function () { return '/' };
process.chdir = function (dir) {
    throw new Error('process.chdir is not supported');
};
process.umask = function() { return 0; };


/***/ }),
/* 23 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(Buffer) {// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.

// NOTE: These type checking functions intentionally don't use `instanceof`
// because it is fragile and can be easily faked with `Object.create()`.

function isArray(arg) {
  if (Array.isArray) {
    return Array.isArray(arg);
  }
  return objectToString(arg) === '[object Array]';
}
exports.isArray = isArray;

function isBoolean(arg) {
  return typeof arg === 'boolean';
}
exports.isBoolean = isBoolean;

function isNull(arg) {
  return arg === null;
}
exports.isNull = isNull;

function isNullOrUndefined(arg) {
  return arg == null;
}
exports.isNullOrUndefined = isNullOrUndefined;

function isNumber(arg) {
  return typeof arg === 'number';
}
exports.isNumber = isNumber;

function isString(arg) {
  return typeof arg === 'string';
}
exports.isString = isString;

function isSymbol(arg) {
  return typeof arg === 'symbol';
}
exports.isSymbol = isSymbol;

function isUndefined(arg) {
  return arg === void 0;
}
exports.isUndefined = isUndefined;

function isRegExp(re) {
  return objectToString(re) === '[object RegExp]';
}
exports.isRegExp = isRegExp;

function isObject(arg) {
  return typeof arg === 'object' && arg !== null;
}
exports.isObject = isObject;

function isDate(d) {
  return objectToString(d) === '[object Date]';
}
exports.isDate = isDate;

function isError(e) {
  return (objectToString(e) === '[object Error]' || e instanceof Error);
}
exports.isError = isError;

function isFunction(arg) {
  return typeof arg === 'function';
}
exports.isFunction = isFunction;

function isPrimitive(arg) {
  return arg === null ||
         typeof arg === 'boolean' ||
         typeof arg === 'number' ||
         typeof arg === 'string' ||
         typeof arg === 'symbol' ||  // ES6 symbol
         typeof arg === 'undefined';
}
exports.isPrimitive = isPrimitive;

exports.isBuffer = Buffer.isBuffer;

function objectToString(o) {
  return Object.prototype.toString.call(o);
}

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(43).Buffer))

/***/ }),
/* 24 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
const message_port_channel_1 = __webpack_require__(58);
const message_types_1 = __webpack_require__(2);
const messages_1 = __webpack_require__(5);
const log_1 = __webpack_require__(1);
const message_router_1 = __webpack_require__(54);
const on_configured_1 = __webpack_require__(61);
var ConnectionState;
(function (ConnectionState) {
    ConnectionState[ConnectionState["disconnected"] = 0] = "disconnected";
    ConnectionState[ConnectionState["connecting"] = 1] = "connecting";
    ConnectionState[ConnectionState["connected"] = 2] = "connected";
})(ConnectionState || (ConnectionState = {}));
class PagePortController {
    constructor(tabId, port, onConnect, onDisconnect, onConfigured = new on_configured_1.DummyOnConfigured()) {
        this.tabId = tabId;
        this.port = port;
        this.onConnect = onConnect;
        this.onDisconnect = onDisconnect;
        this.onConfigured = onConfigured;
        this.messageRouter = new message_router_1.GenericMessageRouter();
        this.connectionState = ConnectionState.disconnected;
        this.pageChannel = new message_port_channel_1.GenericMessagePortChannel(port, (port) => { this.onPageConnected(port); }, (port) => { this.onPageDisconnected(port); }, this.messageRouter, message_port_channel_1.Negotiation.None);
    }
    registerMessageHandler(type, handler) {
        this.messageRouter.registerMessageHandler(type, handler);
    }
    connect() {
        if (this.connectionState === ConnectionState.disconnected) {
            this.connectionState = ConnectionState.connecting;
            this.pageChannel.connect();
        }
    }
    sendMessage(type, payload) {
        const messageSender = this.pageChannel.messageSender;
        messageSender.sendMessage(type, payload);
    }
    sendExtensionReady() {
        this.sendMessage(message_types_1.MessageType.extensionReadyV1, new messages_1.ExtensionReadyV1(this.tabId));
    }
    onPageConnected(port) {
        log_1.log(`PagePortController.onPageConnected: tabId: ${this.tabId}`);
        this.connectionState = ConnectionState.connected;
        this.onConfigured.registerListener(() => {
            if (this.connectionState === ConnectionState.connected) {
                this.sendExtensionReady();
                this.onConnect(port);
            }
        });
    }
    onPageDisconnected(port) {
        log_1.log(`PagePortController.onPageDisconnected: tabId: ${this.tabId}`);
        this.connectionState = ConnectionState.disconnected;
        this.onDisconnect(port);
    }
}
exports.PagePortController = PagePortController;


/***/ }),
/* 25 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
const messages_1 = __webpack_require__(5);
const chrome_new_tab_urls_1 = __webpack_require__(87);
class Config {
    constructor() {
        this.trustedUrls = [];
        this.untrustedUrls = [];
        this.userTrustedOrigins = [];
        this.userUntrustedOrigins = [];
        this.reputableSites = {
            index: 0,
            total: 0,
            reputableSites: []
        };
        this.isEnabled = {
            chrome: true,
            firefox: true,
            edge: true,
            edgeChromium: true
        };
        this.openPhishingLinksInSecureBrowser = false;
        this.prioritiseTrustedSites = false;
        this.promptForUncategorized = false;
        this.isEnterpriseProduct = false;
        this.isConsumerProduct = false;
        this.dontAskAgain = false;
        this.secureBrowserRedirectTrustedSites = false;
        this.productStatus = messages_1.ProductStatuses.Enabled;
        this.phishingSourceSites = undefined;
        this.phishingNavigationSequences = undefined;
        this.newTabPageUrls = {
            chrome: chrome_new_tab_urls_1.chromeNewTabPageUrls,
            firefox: [],
            edge: [],
            edgeChromium: []
        };
    }
    static phishingSourceSitesVersion() {
        return 1;
    }
    static phishingNavigationSequencesVersion() {
        return 1;
    }
}
exports.Config = Config;
function loadConfig() {
    return new Config();
}
exports.loadConfig = loadConfig;


/***/ }),
/* 26 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(process) {

if (!process.version ||
    process.version.indexOf('v0.') === 0 ||
    process.version.indexOf('v1.') === 0 && process.version.indexOf('v1.8.') !== 0) {
  module.exports = nextTick;
} else {
  module.exports = process.nextTick;
}

function nextTick(fn, arg1, arg2, arg3) {
  if (typeof fn !== 'function') {
    throw new TypeError('"callback" argument must be a function');
  }
  var len = arguments.length;
  var args, i;
  switch (len) {
  case 0:
  case 1:
    return process.nextTick(fn);
  case 2:
    return process.nextTick(function afterTickOne() {
      fn.call(null, arg1);
    });
  case 3:
    return process.nextTick(function afterTickTwo() {
      fn.call(null, arg1, arg2);
    });
  case 4:
    return process.nextTick(function afterTickThree() {
      fn.call(null, arg1, arg2, arg3);
    });
  default:
    args = new Array(len - 1);
    i = 0;
    while (i < args.length) {
      args[i++] = arguments[i];
    }
    return process.nextTick(function afterTick() {
      fn.apply(null, args);
    });
  }
}

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(22)))

/***/ }),
/* 27 */
/***/ (function(module, exports, __webpack_require__) {

/* eslint-disable node/no-deprecated-api */
var buffer = __webpack_require__(43)
var Buffer = buffer.Buffer

// alternative to using Object.keys for old browsers
function copyProps (src, dst) {
  for (var key in src) {
    dst[key] = src[key]
  }
}
if (Buffer.from && Buffer.alloc && Buffer.allocUnsafe && Buffer.allocUnsafeSlow) {
  module.exports = buffer
} else {
  // Copy properties from require('buffer')
  copyProps(buffer, exports)
  exports.Buffer = SafeBuffer
}

function SafeBuffer (arg, encodingOrOffset, length) {
  return Buffer(arg, encodingOrOffset, length)
}

// Copy static methods from Buffer
copyProps(Buffer, SafeBuffer)

SafeBuffer.from = function (arg, encodingOrOffset, length) {
  if (typeof arg === 'number') {
    throw new TypeError('Argument must not be a number')
  }
  return Buffer(arg, encodingOrOffset, length)
}

SafeBuffer.alloc = function (size, fill, encoding) {
  if (typeof size !== 'number') {
    throw new TypeError('Argument must be a number')
  }
  var buf = Buffer(size)
  if (fill !== undefined) {
    if (typeof encoding === 'string') {
      buf.fill(fill, encoding)
    } else {
      buf.fill(fill)
    }
  } else {
    buf.fill(0)
  }
  return buf
}

SafeBuffer.allocUnsafe = function (size) {
  if (typeof size !== 'number') {
    throw new TypeError('Argument must be a number')
  }
  return Buffer(size)
}

SafeBuffer.allocUnsafeSlow = function (size) {
  if (typeof size !== 'number') {
    throw new TypeError('Argument must be a number')
  }
  return buffer.SlowBuffer(size)
}


/***/ }),
/* 28 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
const origin_1 = __webpack_require__(9);
const log_1 = __webpack_require__(1);
const maybe_1 = __webpack_require__(0);
const port_utils_1 = __webpack_require__(29);
const browser_1 = __webpack_require__(6);
const extensionUrlOriginParseOptions = new origin_1.OriginParseOptions({
    allowChromeExtensionScheme: true,
    allowFirefoxExtensionScheme: true,
    allowEdgeExtensionScheme: true
});
const ownOrigin = origin_1.parseOrigin(chrome.runtime.getURL("manifest.json"), extensionUrlOriginParseOptions);
function isOwnExtensionUrl(url) {
    return origin_1.isSameOrigin(ownOrigin, origin_1.parseOrigin(url, extensionUrlOriginParseOptions));
}
function removeUrlFromHistory(browser, url) {
    if (maybe_1.some(browser) && browser !== browser_1.Browser.edge) {
        log_1.log(`Removing history entry for "${url}"`);
        chrome.history.deleteUrl({ url: url });
    }
}
exports.removeUrlFromHistory = removeUrlFromHistory;
function removeExtensionPageFromHistoryAfterClosing(browser, port) {
    const pageUrl = port_utils_1.readPortPageUrl(port);
    if (maybe_1.some(pageUrl) && isOwnExtensionUrl(pageUrl)) {
        removeUrlFromHistory(browser, pageUrl.toString());
    }
}
exports.removeExtensionPageFromHistoryAfterClosing = removeExtensionPageFromHistoryAfterClosing;


/***/ }),
/* 29 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
const maybe_1 = __webpack_require__(0);
const tab_utils_1 = __webpack_require__(48);
const url_utils_1 = __webpack_require__(4);
const string_utils_1 = __webpack_require__(3);
function readPortTabId(port) {
    const sender = port.sender;
    if (maybe_1.none(sender)) {
        return undefined;
    }
    const tab = sender.tab;
    if (maybe_1.none(tab)) {
        return undefined;
    }
    const tabId = tab.id;
    if (maybe_1.none(tabId)) {
        return undefined;
    }
    if (!tab_utils_1.isValidTabId(tabId)) {
        return undefined;
    }
    return tabId;
}
exports.readPortTabId = readPortTabId;
function readPortPageUrl(port) {
    const sender = port.sender;
    if (maybe_1.none(sender)) {
        return;
    }
    const urlSpec = sender.url;
    if (maybe_1.none(urlSpec)) {
        return;
    }
    const url = url_utils_1.parseUrl(urlSpec);
    return url;
}
exports.readPortPageUrl = readPortPageUrl;
function readPortTabUrl(port) {
    const sender = port.sender;
    if (maybe_1.none(sender)) {
        return undefined;
    }
    const tab = sender.tab;
    if (maybe_1.none(tab)) {
        return undefined;
    }
    const urlSpec = tab.url;
    if (maybe_1.none(urlSpec)) {
        return undefined;
    }
    const url = url_utils_1.parseUrl(urlSpec);
    return url;
}
exports.readPortTabUrl = readPortTabUrl;
function readPortFrameId(port) {
    const sender = port.sender;
    if (maybe_1.none(sender)) {
        return undefined;
    }
    return sender.frameId;
}
exports.readPortFrameId = readPortFrameId;
function portToString(port) {
    if (port === undefined) {
        return "undefined";
    }
    return string_utils_1.toString({
        name: port.name,
        tabId: readPortTabId(port),
        frameId: readPortFrameId(port),
        pageUrl: readPortPageUrl(port)
    });
}
exports.portToString = portToString;


/***/ }),
/* 30 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
function doOnce(action) {
    let done = false;
    return () => {
        if (!done) {
            done = true;
            action();
        }
    };
}
exports.doOnce = doOnce;


/***/ }),
/* 31 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
const array_utils_1 = __webpack_require__(8);
var I18nMessages;
(function (I18nMessages) {
    I18nMessages["name"] = "extName";
    I18nMessages["locale"] = "locale";
    I18nMessages["productName"] = "productName";
    I18nMessages["blockedLinkPageTitle"] = "blockedLinkPageTitle";
    I18nMessages["blockedLinkPageOpenedSecureExplanation"] = "blockedLinkPageOpenedSecureExplanation";
    I18nMessages["blockedPDFPageTitle"] = "blockedPDFPageTitle";
    I18nMessages["blockedPDFPageOpenedSecureExplanation"] = "blockedPDFPageOpenedSecureExplanation";
    I18nMessages["blockedPageHelpLink"] = "blockedPageHelpLink";
    I18nMessages["blockedPageWarningTooltip"] = "blockedPageWarningTooltip";
    I18nMessages["blockedPageBrowserExplanation"] = "blockedPageSecureBrowserExplanation";
    I18nMessages["blockedPageSBXOpenedSecureExplanation"] = "blockedPageSBXOpenedSecureExplanation";
    I18nMessages["trustUrlButton"] = "blockedPageContinue";
    I18nMessages["trustUrlButtonWithSubstitution"] = "blockedPageContinueV2";
    I18nMessages["untrustUrlButton"] = "blockedPageSecure";
    I18nMessages["untrustUrlButtonWithSubstitution"] = "blockedPageSecureV2";
    I18nMessages["dontAskAgainText"] = "blockedPageDontAskAgain";
    I18nMessages["rememberTrustDecisionText"] = "blockedPageRemember";
    I18nMessages["openLinkInSecureBrowser"] = "contextMenuOpenSecure";
    I18nMessages["popupNoError"] = "popupNoError";
    I18nMessages["popupSBXDisabled"] = "popupSBXDisabled";
    I18nMessages["popupGenericError"] = "popupGenericError";
    I18nMessages["popupMissingHelper"] = "popupMissingHelper";
    I18nMessages["popupIs32bitFirefox"] = "popupIs32bitFirefox";
    I18nMessages["popupDontAskAgain"] = "popupDontAskAgain";
    I18nMessages["popupInitRequired"] = "popupInitRequired";
    I18nMessages["popupProductDisabled"] = "popupProductDisabled";
    I18nMessages["popupUnlicensed"] = "popupUnlicensed";
    I18nMessages["popupUnconfigured"] = "popupUnconfigured";
    I18nMessages["popupClearRememberedDecisionsText"] = "popupClearRememberedDecisionsText";
    I18nMessages["popupClearRememberedDecisionsButton"] = "popupClearRememberedDecisionsButton";
    I18nMessages["openOptionsPageText"] = "popupOpenOptionsPageText";
    I18nMessages["openOptionsPageButton"] = "popupOpenOptionsPageButton";
    I18nMessages["helpLinkText"] = "popupHelpLinkText";
    I18nMessages["helpLinkFile"] = "popupHelpLinkFile";
    I18nMessages["clearAllRememberedDecisionsButton"] = "optionsClearAllRememberedDecisionButton";
    I18nMessages["clearRememberedDecisionButton"] = "optionsClearRememberedDecisionsButton";
    I18nMessages["trustedOriginsTitle"] = "optionsTrustedOriginsTitle";
    I18nMessages["untrustedOriginsTitle"] = "optionsUntrustedOriginsTitle";
    I18nMessages["optionsNoRememberedDecisions"] = "optionsNoRememberedDecisions";
    I18nMessages["optionsPromptDisabled"] = "optionsPromptDisabled";
})(I18nMessages = exports.I18nMessages || (exports.I18nMessages = {}));
function getI18n(i18nMessage, ...subsitutions) {
    if (array_utils_1.isEmpty(subsitutions)) {
        return chrome.i18n.getMessage(i18nMessage);
    }
    else {
        return chrome.i18n.getMessage(i18nMessage, subsitutions);
    }
}
exports.getI18n = getI18n;
function isPopupError(i18nMessage) {
    return (i18nMessage === I18nMessages.popupGenericError ||
        i18nMessage === I18nMessages.popupMissingHelper ||
        i18nMessage === I18nMessages.popupIs32bitFirefox);
}
exports.isPopupError = isPopupError;
var PopupType;
(function (PopupType) {
    PopupType[PopupType["clearRememberedDecisions"] = 0] = "clearRememberedDecisions";
    PopupType[PopupType["optionsPage"] = 1] = "optionsPage";
})(PopupType = exports.PopupType || (exports.PopupType = {}));
exports.popupType = PopupType.clearRememberedDecisions;


/***/ }),
/* 32 */
/***/ (function(module, exports) {

// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.

function EventEmitter() {
  this._events = this._events || {};
  this._maxListeners = this._maxListeners || undefined;
}
module.exports = EventEmitter;

// Backwards-compat with node 0.10.x
EventEmitter.EventEmitter = EventEmitter;

EventEmitter.prototype._events = undefined;
EventEmitter.prototype._maxListeners = undefined;

// By default EventEmitters will print a warning if more than 10 listeners are
// added to it. This is a useful default which helps finding memory leaks.
EventEmitter.defaultMaxListeners = 10;

// Obviously not all Emitters should be limited to 10. This function allows
// that to be increased. Set to zero for unlimited.
EventEmitter.prototype.setMaxListeners = function(n) {
  if (!isNumber(n) || n < 0 || isNaN(n))
    throw TypeError('n must be a positive number');
  this._maxListeners = n;
  return this;
};

EventEmitter.prototype.emit = function(type) {
  var er, handler, len, args, i, listeners;

  if (!this._events)
    this._events = {};

  // If there is no 'error' event listener then throw.
  if (type === 'error') {
    if (!this._events.error ||
        (isObject(this._events.error) && !this._events.error.length)) {
      er = arguments[1];
      if (er instanceof Error) {
        throw er; // Unhandled 'error' event
      } else {
        // At least give some kind of context to the user
        var err = new Error('Uncaught, unspecified "error" event. (' + er + ')');
        err.context = er;
        throw err;
      }
    }
  }

  handler = this._events[type];

  if (isUndefined(handler))
    return false;

  if (isFunction(handler)) {
    switch (arguments.length) {
      // fast cases
      case 1:
        handler.call(this);
        break;
      case 2:
        handler.call(this, arguments[1]);
        break;
      case 3:
        handler.call(this, arguments[1], arguments[2]);
        break;
      // slower
      default:
        args = Array.prototype.slice.call(arguments, 1);
        handler.apply(this, args);
    }
  } else if (isObject(handler)) {
    args = Array.prototype.slice.call(arguments, 1);
    listeners = handler.slice();
    len = listeners.length;
    for (i = 0; i < len; i++)
      listeners[i].apply(this, args);
  }

  return true;
};

EventEmitter.prototype.addListener = function(type, listener) {
  var m;

  if (!isFunction(listener))
    throw TypeError('listener must be a function');

  if (!this._events)
    this._events = {};

  // To avoid recursion in the case that type === "newListener"! Before
  // adding it to the listeners, first emit "newListener".
  if (this._events.newListener)
    this.emit('newListener', type,
              isFunction(listener.listener) ?
              listener.listener : listener);

  if (!this._events[type])
    // Optimize the case of one listener. Don't need the extra array object.
    this._events[type] = listener;
  else if (isObject(this._events[type]))
    // If we've already got an array, just append.
    this._events[type].push(listener);
  else
    // Adding the second element, need to change to array.
    this._events[type] = [this._events[type], listener];

  // Check for listener leak
  if (isObject(this._events[type]) && !this._events[type].warned) {
    if (!isUndefined(this._maxListeners)) {
      m = this._maxListeners;
    } else {
      m = EventEmitter.defaultMaxListeners;
    }

    if (m && m > 0 && this._events[type].length > m) {
      this._events[type].warned = true;
      console.error('(node) warning: possible EventEmitter memory ' +
                    'leak detected. %d listeners added. ' +
                    'Use emitter.setMaxListeners() to increase limit.',
                    this._events[type].length);
      if (typeof console.trace === 'function') {
        // not supported in IE 10
        console.trace();
      }
    }
  }

  return this;
};

EventEmitter.prototype.on = EventEmitter.prototype.addListener;

EventEmitter.prototype.once = function(type, listener) {
  if (!isFunction(listener))
    throw TypeError('listener must be a function');

  var fired = false;

  function g() {
    this.removeListener(type, g);

    if (!fired) {
      fired = true;
      listener.apply(this, arguments);
    }
  }

  g.listener = listener;
  this.on(type, g);

  return this;
};

// emits a 'removeListener' event iff the listener was removed
EventEmitter.prototype.removeListener = function(type, listener) {
  var list, position, length, i;

  if (!isFunction(listener))
    throw TypeError('listener must be a function');

  if (!this._events || !this._events[type])
    return this;

  list = this._events[type];
  length = list.length;
  position = -1;

  if (list === listener ||
      (isFunction(list.listener) && list.listener === listener)) {
    delete this._events[type];
    if (this._events.removeListener)
      this.emit('removeListener', type, listener);

  } else if (isObject(list)) {
    for (i = length; i-- > 0;) {
      if (list[i] === listener ||
          (list[i].listener && list[i].listener === listener)) {
        position = i;
        break;
      }
    }

    if (position < 0)
      return this;

    if (list.length === 1) {
      list.length = 0;
      delete this._events[type];
    } else {
      list.splice(position, 1);
    }

    if (this._events.removeListener)
      this.emit('removeListener', type, listener);
  }

  return this;
};

EventEmitter.prototype.removeAllListeners = function(type) {
  var key, listeners;

  if (!this._events)
    return this;

  // not listening for removeListener, no need to emit
  if (!this._events.removeListener) {
    if (arguments.length === 0)
      this._events = {};
    else if (this._events[type])
      delete this._events[type];
    return this;
  }

  // emit removeListener for all listeners on all events
  if (arguments.length === 0) {
    for (key in this._events) {
      if (key === 'removeListener') continue;
      this.removeAllListeners(key);
    }
    this.removeAllListeners('removeListener');
    this._events = {};
    return this;
  }

  listeners = this._events[type];

  if (isFunction(listeners)) {
    this.removeListener(type, listeners);
  } else if (listeners) {
    // LIFO order
    while (listeners.length)
      this.removeListener(type, listeners[listeners.length - 1]);
  }
  delete this._events[type];

  return this;
};

EventEmitter.prototype.listeners = function(type) {
  var ret;
  if (!this._events || !this._events[type])
    ret = [];
  else if (isFunction(this._events[type]))
    ret = [this._events[type]];
  else
    ret = this._events[type].slice();
  return ret;
};

EventEmitter.prototype.listenerCount = function(type) {
  if (this._events) {
    var evlistener = this._events[type];

    if (isFunction(evlistener))
      return 1;
    else if (evlistener)
      return evlistener.length;
  }
  return 0;
};

EventEmitter.listenerCount = function(emitter, type) {
  return emitter.listenerCount(type);
};

function isFunction(arg) {
  return typeof arg === 'function';
}

function isNumber(arg) {
  return typeof arg === 'number';
}

function isObject(arg) {
  return typeof arg === 'object' && arg !== null;
}

function isUndefined(arg) {
  return arg === void 0;
}


/***/ }),
/* 33 */
/***/ (function(module, exports, __webpack_require__) {

exports = module.exports = __webpack_require__(41);
exports.Stream = exports;
exports.Readable = exports;
exports.Writable = __webpack_require__(34);
exports.Duplex = __webpack_require__(15);
exports.Transform = __webpack_require__(46);
exports.PassThrough = __webpack_require__(81);


/***/ }),
/* 34 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(process, setImmediate, global) {// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.

// A bit simpler than readable streams.
// Implement an async ._write(chunk, encoding, cb), and it'll handle all
// the drain event emission and buffering.



/*<replacement>*/

var processNextTick = __webpack_require__(26);
/*</replacement>*/

module.exports = Writable;

/* <replacement> */
function WriteReq(chunk, encoding, cb) {
  this.chunk = chunk;
  this.encoding = encoding;
  this.callback = cb;
  this.next = null;
}

// It seems a linked list but it is not
// there will be only 2 of these for each stream
function CorkedRequest(state) {
  var _this = this;

  this.next = null;
  this.entry = null;
  this.finish = function () {
    onCorkedFinish(_this, state);
  };
}
/* </replacement> */

/*<replacement>*/
var asyncWrite = !process.browser && ['v0.10', 'v0.9.'].indexOf(process.version.slice(0, 5)) > -1 ? setImmediate : processNextTick;
/*</replacement>*/

/*<replacement>*/
var Duplex;
/*</replacement>*/

Writable.WritableState = WritableState;

/*<replacement>*/
var util = __webpack_require__(23);
util.inherits = __webpack_require__(18);
/*</replacement>*/

/*<replacement>*/
var internalUtil = {
  deprecate: __webpack_require__(80)
};
/*</replacement>*/

/*<replacement>*/
var Stream = __webpack_require__(42);
/*</replacement>*/

/*<replacement>*/
var Buffer = __webpack_require__(27).Buffer;
var OurUint8Array = global.Uint8Array || function () {};
function _uint8ArrayToBuffer(chunk) {
  return Buffer.from(chunk);
}
function _isUint8Array(obj) {
  return Buffer.isBuffer(obj) || obj instanceof OurUint8Array;
}
/*</replacement>*/

var destroyImpl = __webpack_require__(44);

util.inherits(Writable, Stream);

function nop() {}

function WritableState(options, stream) {
  Duplex = Duplex || __webpack_require__(15);

  options = options || {};

  // object stream flag to indicate whether or not this stream
  // contains buffers or objects.
  this.objectMode = !!options.objectMode;

  if (stream instanceof Duplex) this.objectMode = this.objectMode || !!options.writableObjectMode;

  // the point at which write() starts returning false
  // Note: 0 is a valid value, means that we always return false if
  // the entire buffer is not flushed immediately on write()
  var hwm = options.highWaterMark;
  var defaultHwm = this.objectMode ? 16 : 16 * 1024;
  this.highWaterMark = hwm || hwm === 0 ? hwm : defaultHwm;

  // cast to ints.
  this.highWaterMark = Math.floor(this.highWaterMark);

  // if _final has been called
  this.finalCalled = false;

  // drain event flag.
  this.needDrain = false;
  // at the start of calling end()
  this.ending = false;
  // when end() has been called, and returned
  this.ended = false;
  // when 'finish' is emitted
  this.finished = false;

  // has it been destroyed
  this.destroyed = false;

  // should we decode strings into buffers before passing to _write?
  // this is here so that some node-core streams can optimize string
  // handling at a lower level.
  var noDecode = options.decodeStrings === false;
  this.decodeStrings = !noDecode;

  // Crypto is kind of old and crusty.  Historically, its default string
  // encoding is 'binary' so we have to make this configurable.
  // Everything else in the universe uses 'utf8', though.
  this.defaultEncoding = options.defaultEncoding || 'utf8';

  // not an actual buffer we keep track of, but a measurement
  // of how much we're waiting to get pushed to some underlying
  // socket or file.
  this.length = 0;

  // a flag to see when we're in the middle of a write.
  this.writing = false;

  // when true all writes will be buffered until .uncork() call
  this.corked = 0;

  // a flag to be able to tell if the onwrite cb is called immediately,
  // or on a later tick.  We set this to true at first, because any
  // actions that shouldn't happen until "later" should generally also
  // not happen before the first write call.
  this.sync = true;

  // a flag to know if we're processing previously buffered items, which
  // may call the _write() callback in the same tick, so that we don't
  // end up in an overlapped onwrite situation.
  this.bufferProcessing = false;

  // the callback that's passed to _write(chunk,cb)
  this.onwrite = function (er) {
    onwrite(stream, er);
  };

  // the callback that the user supplies to write(chunk,encoding,cb)
  this.writecb = null;

  // the amount that is being written when _write is called.
  this.writelen = 0;

  this.bufferedRequest = null;
  this.lastBufferedRequest = null;

  // number of pending user-supplied write callbacks
  // this must be 0 before 'finish' can be emitted
  this.pendingcb = 0;

  // emit prefinish if the only thing we're waiting for is _write cbs
  // This is relevant for synchronous Transform streams
  this.prefinished = false;

  // True if the error was already emitted and should not be thrown again
  this.errorEmitted = false;

  // count buffered requests
  this.bufferedRequestCount = 0;

  // allocate the first CorkedRequest, there is always
  // one allocated and free to use, and we maintain at most two
  this.corkedRequestsFree = new CorkedRequest(this);
}

WritableState.prototype.getBuffer = function getBuffer() {
  var current = this.bufferedRequest;
  var out = [];
  while (current) {
    out.push(current);
    current = current.next;
  }
  return out;
};

(function () {
  try {
    Object.defineProperty(WritableState.prototype, 'buffer', {
      get: internalUtil.deprecate(function () {
        return this.getBuffer();
      }, '_writableState.buffer is deprecated. Use _writableState.getBuffer ' + 'instead.', 'DEP0003')
    });
  } catch (_) {}
})();

// Test _writableState for inheritance to account for Duplex streams,
// whose prototype chain only points to Readable.
var realHasInstance;
if (typeof Symbol === 'function' && Symbol.hasInstance && typeof Function.prototype[Symbol.hasInstance] === 'function') {
  realHasInstance = Function.prototype[Symbol.hasInstance];
  Object.defineProperty(Writable, Symbol.hasInstance, {
    value: function (object) {
      if (realHasInstance.call(this, object)) return true;

      return object && object._writableState instanceof WritableState;
    }
  });
} else {
  realHasInstance = function (object) {
    return object instanceof this;
  };
}

function Writable(options) {
  Duplex = Duplex || __webpack_require__(15);

  // Writable ctor is applied to Duplexes, too.
  // `realHasInstance` is necessary because using plain `instanceof`
  // would return false, as no `_writableState` property is attached.

  // Trying to use the custom `instanceof` for Writable here will also break the
  // Node.js LazyTransform implementation, which has a non-trivial getter for
  // `_writableState` that would lead to infinite recursion.
  if (!realHasInstance.call(Writable, this) && !(this instanceof Duplex)) {
    return new Writable(options);
  }

  this._writableState = new WritableState(options, this);

  // legacy.
  this.writable = true;

  if (options) {
    if (typeof options.write === 'function') this._write = options.write;

    if (typeof options.writev === 'function') this._writev = options.writev;

    if (typeof options.destroy === 'function') this._destroy = options.destroy;

    if (typeof options.final === 'function') this._final = options.final;
  }

  Stream.call(this);
}

// Otherwise people can pipe Writable streams, which is just wrong.
Writable.prototype.pipe = function () {
  this.emit('error', new Error('Cannot pipe, not readable'));
};

function writeAfterEnd(stream, cb) {
  var er = new Error('write after end');
  // TODO: defer error events consistently everywhere, not just the cb
  stream.emit('error', er);
  processNextTick(cb, er);
}

// Checks that a user-supplied chunk is valid, especially for the particular
// mode the stream is in. Currently this means that `null` is never accepted
// and undefined/non-string values are only allowed in object mode.
function validChunk(stream, state, chunk, cb) {
  var valid = true;
  var er = false;

  if (chunk === null) {
    er = new TypeError('May not write null values to stream');
  } else if (typeof chunk !== 'string' && chunk !== undefined && !state.objectMode) {
    er = new TypeError('Invalid non-string/buffer chunk');
  }
  if (er) {
    stream.emit('error', er);
    processNextTick(cb, er);
    valid = false;
  }
  return valid;
}

Writable.prototype.write = function (chunk, encoding, cb) {
  var state = this._writableState;
  var ret = false;
  var isBuf = _isUint8Array(chunk) && !state.objectMode;

  if (isBuf && !Buffer.isBuffer(chunk)) {
    chunk = _uint8ArrayToBuffer(chunk);
  }

  if (typeof encoding === 'function') {
    cb = encoding;
    encoding = null;
  }

  if (isBuf) encoding = 'buffer';else if (!encoding) encoding = state.defaultEncoding;

  if (typeof cb !== 'function') cb = nop;

  if (state.ended) writeAfterEnd(this, cb);else if (isBuf || validChunk(this, state, chunk, cb)) {
    state.pendingcb++;
    ret = writeOrBuffer(this, state, isBuf, chunk, encoding, cb);
  }

  return ret;
};

Writable.prototype.cork = function () {
  var state = this._writableState;

  state.corked++;
};

Writable.prototype.uncork = function () {
  var state = this._writableState;

  if (state.corked) {
    state.corked--;

    if (!state.writing && !state.corked && !state.finished && !state.bufferProcessing && state.bufferedRequest) clearBuffer(this, state);
  }
};

Writable.prototype.setDefaultEncoding = function setDefaultEncoding(encoding) {
  // node::ParseEncoding() requires lower case.
  if (typeof encoding === 'string') encoding = encoding.toLowerCase();
  if (!(['hex', 'utf8', 'utf-8', 'ascii', 'binary', 'base64', 'ucs2', 'ucs-2', 'utf16le', 'utf-16le', 'raw'].indexOf((encoding + '').toLowerCase()) > -1)) throw new TypeError('Unknown encoding: ' + encoding);
  this._writableState.defaultEncoding = encoding;
  return this;
};

function decodeChunk(state, chunk, encoding) {
  if (!state.objectMode && state.decodeStrings !== false && typeof chunk === 'string') {
    chunk = Buffer.from(chunk, encoding);
  }
  return chunk;
}

// if we're already writing something, then just put this
// in the queue, and wait our turn.  Otherwise, call _write
// If we return false, then we need a drain event, so set that flag.
function writeOrBuffer(stream, state, isBuf, chunk, encoding, cb) {
  if (!isBuf) {
    var newChunk = decodeChunk(state, chunk, encoding);
    if (chunk !== newChunk) {
      isBuf = true;
      encoding = 'buffer';
      chunk = newChunk;
    }
  }
  var len = state.objectMode ? 1 : chunk.length;

  state.length += len;

  var ret = state.length < state.highWaterMark;
  // we must ensure that previous needDrain will not be reset to false.
  if (!ret) state.needDrain = true;

  if (state.writing || state.corked) {
    var last = state.lastBufferedRequest;
    state.lastBufferedRequest = {
      chunk: chunk,
      encoding: encoding,
      isBuf: isBuf,
      callback: cb,
      next: null
    };
    if (last) {
      last.next = state.lastBufferedRequest;
    } else {
      state.bufferedRequest = state.lastBufferedRequest;
    }
    state.bufferedRequestCount += 1;
  } else {
    doWrite(stream, state, false, len, chunk, encoding, cb);
  }

  return ret;
}

function doWrite(stream, state, writev, len, chunk, encoding, cb) {
  state.writelen = len;
  state.writecb = cb;
  state.writing = true;
  state.sync = true;
  if (writev) stream._writev(chunk, state.onwrite);else stream._write(chunk, encoding, state.onwrite);
  state.sync = false;
}

function onwriteError(stream, state, sync, er, cb) {
  --state.pendingcb;

  if (sync) {
    // defer the callback if we are being called synchronously
    // to avoid piling up things on the stack
    processNextTick(cb, er);
    // this can emit finish, and it will always happen
    // after error
    processNextTick(finishMaybe, stream, state);
    stream._writableState.errorEmitted = true;
    stream.emit('error', er);
  } else {
    // the caller expect this to happen before if
    // it is async
    cb(er);
    stream._writableState.errorEmitted = true;
    stream.emit('error', er);
    // this can emit finish, but finish must
    // always follow error
    finishMaybe(stream, state);
  }
}

function onwriteStateUpdate(state) {
  state.writing = false;
  state.writecb = null;
  state.length -= state.writelen;
  state.writelen = 0;
}

function onwrite(stream, er) {
  var state = stream._writableState;
  var sync = state.sync;
  var cb = state.writecb;

  onwriteStateUpdate(state);

  if (er) onwriteError(stream, state, sync, er, cb);else {
    // Check if we're actually ready to finish, but don't emit yet
    var finished = needFinish(state);

    if (!finished && !state.corked && !state.bufferProcessing && state.bufferedRequest) {
      clearBuffer(stream, state);
    }

    if (sync) {
      /*<replacement>*/
      asyncWrite(afterWrite, stream, state, finished, cb);
      /*</replacement>*/
    } else {
      afterWrite(stream, state, finished, cb);
    }
  }
}

function afterWrite(stream, state, finished, cb) {
  if (!finished) onwriteDrain(stream, state);
  state.pendingcb--;
  cb();
  finishMaybe(stream, state);
}

// Must force callback to be called on nextTick, so that we don't
// emit 'drain' before the write() consumer gets the 'false' return
// value, and has a chance to attach a 'drain' listener.
function onwriteDrain(stream, state) {
  if (state.length === 0 && state.needDrain) {
    state.needDrain = false;
    stream.emit('drain');
  }
}

// if there's something in the buffer waiting, then process it
function clearBuffer(stream, state) {
  state.bufferProcessing = true;
  var entry = state.bufferedRequest;

  if (stream._writev && entry && entry.next) {
    // Fast case, write everything using _writev()
    var l = state.bufferedRequestCount;
    var buffer = new Array(l);
    var holder = state.corkedRequestsFree;
    holder.entry = entry;

    var count = 0;
    var allBuffers = true;
    while (entry) {
      buffer[count] = entry;
      if (!entry.isBuf) allBuffers = false;
      entry = entry.next;
      count += 1;
    }
    buffer.allBuffers = allBuffers;

    doWrite(stream, state, true, state.length, buffer, '', holder.finish);

    // doWrite is almost always async, defer these to save a bit of time
    // as the hot path ends with doWrite
    state.pendingcb++;
    state.lastBufferedRequest = null;
    if (holder.next) {
      state.corkedRequestsFree = holder.next;
      holder.next = null;
    } else {
      state.corkedRequestsFree = new CorkedRequest(state);
    }
  } else {
    // Slow case, write chunks one-by-one
    while (entry) {
      var chunk = entry.chunk;
      var encoding = entry.encoding;
      var cb = entry.callback;
      var len = state.objectMode ? 1 : chunk.length;

      doWrite(stream, state, false, len, chunk, encoding, cb);
      entry = entry.next;
      // if we didn't call the onwrite immediately, then
      // it means that we need to wait until it does.
      // also, that means that the chunk and cb are currently
      // being processed, so move the buffer counter past them.
      if (state.writing) {
        break;
      }
    }

    if (entry === null) state.lastBufferedRequest = null;
  }

  state.bufferedRequestCount = 0;
  state.bufferedRequest = entry;
  state.bufferProcessing = false;
}

Writable.prototype._write = function (chunk, encoding, cb) {
  cb(new Error('_write() is not implemented'));
};

Writable.prototype._writev = null;

Writable.prototype.end = function (chunk, encoding, cb) {
  var state = this._writableState;

  if (typeof chunk === 'function') {
    cb = chunk;
    chunk = null;
    encoding = null;
  } else if (typeof encoding === 'function') {
    cb = encoding;
    encoding = null;
  }

  if (chunk !== null && chunk !== undefined) this.write(chunk, encoding);

  // .end() fully uncorks
  if (state.corked) {
    state.corked = 1;
    this.uncork();
  }

  // ignore unnecessary end() calls.
  if (!state.ending && !state.finished) endWritable(this, state, cb);
};

function needFinish(state) {
  return state.ending && state.length === 0 && state.bufferedRequest === null && !state.finished && !state.writing;
}
function callFinal(stream, state) {
  stream._final(function (err) {
    state.pendingcb--;
    if (err) {
      stream.emit('error', err);
    }
    state.prefinished = true;
    stream.emit('prefinish');
    finishMaybe(stream, state);
  });
}
function prefinish(stream, state) {
  if (!state.prefinished && !state.finalCalled) {
    if (typeof stream._final === 'function') {
      state.pendingcb++;
      state.finalCalled = true;
      processNextTick(callFinal, stream, state);
    } else {
      state.prefinished = true;
      stream.emit('prefinish');
    }
  }
}

function finishMaybe(stream, state) {
  var need = needFinish(state);
  if (need) {
    prefinish(stream, state);
    if (state.pendingcb === 0) {
      state.finished = true;
      stream.emit('finish');
    }
  }
  return need;
}

function endWritable(stream, state, cb) {
  state.ending = true;
  finishMaybe(stream, state);
  if (cb) {
    if (state.finished) processNextTick(cb);else stream.once('finish', cb);
  }
  state.ended = true;
  stream.writable = false;
}

function onCorkedFinish(corkReq, state, err) {
  var entry = corkReq.entry;
  corkReq.entry = null;
  while (entry) {
    var cb = entry.callback;
    state.pendingcb--;
    cb(err);
    entry = entry.next;
  }
  if (state.corkedRequestsFree) {
    state.corkedRequestsFree.next = corkReq;
  } else {
    state.corkedRequestsFree = corkReq;
  }
}

Object.defineProperty(Writable.prototype, 'destroyed', {
  get: function () {
    if (this._writableState === undefined) {
      return false;
    }
    return this._writableState.destroyed;
  },
  set: function (value) {
    // we ignore the value if the stream
    // has not been initialized yet
    if (!this._writableState) {
      return;
    }

    // backward compatibility, the user is explicitly
    // managing destroyed
    this._writableState.destroyed = value;
  }
});

Writable.prototype.destroy = destroyImpl.destroy;
Writable.prototype._undestroy = destroyImpl.undestroy;
Writable.prototype._destroy = function (err, cb) {
  this.end();
  cb(err);
};
/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(22), __webpack_require__(78).setImmediate, __webpack_require__(17)))

/***/ }),
/* 35 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
const maybe_1 = __webpack_require__(0);
function first(elements) {
    for (const element of elements) {
        return element;
    }
    return undefined;
}
exports.first = first;
function last(elements) {
    let lastElement = undefined;
    for (const element of elements) {
        lastElement = element;
    }
    return lastElement;
}
exports.last = last;
function count(elements) {
    let count = 0;
    for (const element of elements) {
        count += 1;
    }
    return count;
}
exports.count = count;
function toArray(elements) {
    let array = [];
    for (const element of elements) {
        array.push(element);
    }
    return array;
}
exports.toArray = toArray;
function* filter(elements, predicate) {
    for (const element of elements) {
        if (predicate(element)) {
            yield element;
        }
    }
}
exports.filter = filter;
function* map(elements, transform) {
    for (const element of elements) {
        yield transform(element);
    }
}
exports.map = map;
function isEmpty(elements) {
    for (const element of elements) {
        return false;
    }
    return true;
}
exports.isEmpty = isEmpty;
function has(elements, predicate) {
    return !isEmpty(filter(elements, predicate));
}
exports.has = has;
function isEqual(a, b) {
    return a === b;
}
exports.isEqual = isEqual;
function contains(elements, value, compare = isEqual) {
    for (const element of elements) {
        if (compare(element, value)) {
            return true;
        }
    }
    return false;
}
exports.contains = contains;
function* intersect(as, bs, compare = isEqual) {
    for (const a of as) {
        if (contains(bs, a, compare)) {
            yield a;
        }
    }
}
exports.intersect = intersect;
function* setDifference(as, bs, compare = isEqual) {
    for (const a of as) {
        if (!contains(bs, a, compare)) {
            yield a;
        }
    }
}
exports.setDifference = setDifference;
function max(elements, choose) {
    let chosen = undefined;
    for (const element of elements) {
        if (maybe_1.some(chosen)) {
            chosen = choose(chosen, element);
        }
        else {
            chosen = element;
        }
    }
    return chosen;
}
exports.max = max;


/***/ }),
/* 36 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
const murmur_hash_1 = __webpack_require__(11);
const origin_1 = __webpack_require__(9);
const maybe_1 = __webpack_require__(0);
const log_1 = __webpack_require__(1);
const string_utils_1 = __webpack_require__(3);
const array_utils_1 = __webpack_require__(8);
const number_utils_1 = __webpack_require__(10);
const unused_1 = __webpack_require__(93);
const content_type_1 = __webpack_require__(37);
var NavType;
(function (NavType) {
    NavType[NavType["noType"] = 0] = "noType";
    NavType[NavType["navigation"] = 1] = "navigation";
    NavType[NavType["redirect"] = 2] = "redirect";
    NavType[NavType["parentTab"] = 4] = "parentTab";
    NavType[NavType["contentType"] = 8] = "contentType";
    NavType[NavType["navOrRedirect"] = 3] = "navOrRedirect";
})(NavType = exports.NavType || (exports.NavType = {}));
var UrlCategory;
(function (UrlCategory) {
    UrlCategory[UrlCategory["uncategorizedUrl"] = 1] = "uncategorizedUrl";
    UrlCategory[UrlCategory["trustedUrl"] = 2] = "trustedUrl";
    UrlCategory[UrlCategory["untrustedUrl"] = 4] = "untrustedUrl";
    UrlCategory[UrlCategory["phishingSourceSiteUrl"] = 8] = "phishingSourceSiteUrl";
    UrlCategory[UrlCategory["webMailSiteUrl"] = 16] = "webMailSiteUrl";
    UrlCategory[UrlCategory["authSiteUrl"] = 32] = "authSiteUrl";
    UrlCategory[UrlCategory["siteRequiresAuthUrl"] = 64] = "siteRequiresAuthUrl";
    UrlCategory[UrlCategory["externalAppLink"] = 128] = "externalAppLink";
    UrlCategory[UrlCategory["anyUrl"] = 255] = "anyUrl";
})(UrlCategory = exports.UrlCategory || (exports.UrlCategory = {}));
function notUrlCategory(category) {
    return (~category) & UrlCategory.anyUrl;
}
function* orUrlCategories(mask) {
    const categories = [
        UrlCategory.uncategorizedUrl,
        UrlCategory.trustedUrl,
        UrlCategory.untrustedUrl,
        UrlCategory.phishingSourceSiteUrl,
        UrlCategory.webMailSiteUrl
    ];
    for (const category of categories) {
        if ((mask & category) !== 0x0) {
            yield category;
        }
    }
}
var NavModifer;
(function (NavModifer) {
    NavModifer[NavModifer["noModifier"] = 0] = "noModifier";
    NavModifer[NavModifer["repeated"] = 1] = "repeated";
    NavModifer[NavModifer["not"] = 2] = "not";
    NavModifer[NavModifer["or"] = 4] = "or";
})(NavModifer = exports.NavModifer || (exports.NavModifer = {}));
function categorizeUrl(isTrustedUrl, isUntrustedUrl, isPhishingSourceSite, isWebMailSite, isExternalAppLink) {
    if (isPhishingSourceSite) {
        return UrlCategory.phishingSourceSiteUrl;
    }
    else if (isWebMailSite) {
        return UrlCategory.webMailSiteUrl;
    }
    else if (isExternalAppLink) {
        return UrlCategory.externalAppLink;
    }
    else if (isTrustedUrl) {
        return UrlCategory.trustedUrl;
    }
    else if (isUntrustedUrl) {
        return UrlCategory.untrustedUrl;
    }
    else {
        return UrlCategory.uncategorizedUrl;
    }
}
exports.categorizeUrl = categorizeUrl;
class NavPattern {
    constructor(modifiers, type, id) {
        this.modifiers = modifiers;
        this.type = type;
        this.id = id;
    }
    hasModifier(modifier) {
        return (this.modifiers & modifier) !== NavModifer.noModifier;
    }
    get hasRepeatedModifier() {
        return this.hasModifier(NavModifer.repeated);
    }
    get hasNotModifer() {
        return this.hasModifier(NavModifer.not);
    }
    get hasOrModifier() {
        return this.hasModifier(NavModifer.or);
    }
    *buildNavigations() {
        return;
    }
    get asBackReference() {
        return undefined;
    }
    get asContentType() {
        return undefined;
    }
    *navTypes() {
        const navTypes = [
            NavType.navigation,
            NavType.redirect,
            NavType.parentTab
        ];
        const mask = this.type;
        for (const navType of navTypes) {
            if ((mask & navType) !== 0x0) {
                yield navType;
            }
        }
    }
}
exports.NavPattern = NavPattern;
class OriginNavPattern extends NavPattern {
    constructor(modifiers, type, origin, id) {
        super(modifiers, type, id);
        this.origin = origin;
    }
    *buildNavigations() {
        for (const navType of this.navTypes()) {
            yield new OriginNav(navType, this.origin);
        }
    }
}
exports.OriginNavPattern = OriginNavPattern;
class CategorizedNavPattern extends NavPattern {
    constructor(modifiers, type, category, id) {
        super(modifiers, type, id);
        this.category = category;
    }
    *buildNavigations() {
        for (const navType of this.navTypes()) {
            if (this.hasNotModifer) {
                for (const category of orUrlCategories(notUrlCategory(this.category))) {
                    yield new CategorizedNav(navType, category);
                }
            }
            else if (this.hasOrModifier) {
                for (const category of orUrlCategories(this.category)) {
                    yield new CategorizedNav(navType, category);
                }
            }
            else if (this.category === UrlCategory.anyUrl) {
                for (const category of orUrlCategories(this.category)) {
                    yield new CategorizedNav(navType, category);
                }
            }
            else {
                yield new CategorizedNav(navType, this.category);
            }
        }
    }
}
exports.CategorizedNavPattern = CategorizedNavPattern;
class GroupNavPattern extends NavPattern {
    constructor(modifiers, type, groupName, id) {
        super(modifiers, type, id);
        this.groupName = groupName;
    }
    *buildNavigations() {
        for (const navType of this.navTypes()) {
            yield new GroupNav(navType, this.groupName);
        }
    }
}
exports.GroupNavPattern = GroupNavPattern;
class BackRefNavPattern extends NavPattern {
    constructor(modifiers, type, backRef, id) {
        super(modifiers, type, id);
        this.modifiers = modifiers;
        this.type = type;
        this.backRef = backRef;
    }
    get asBackReference() {
        return this;
    }
}
exports.BackRefNavPattern = BackRefNavPattern;
class ContentTypeNavPattern extends NavPattern {
    constructor(contentType, id) {
        super(NavModifer.noModifier, NavType.noType, id);
        this.contentType = contentType;
    }
    get asContentType() {
        return this;
    }
}
exports.ContentTypeNavPattern = ContentTypeNavPattern;
class OriginNav {
    constructor(type, origin) {
        this.type = type;
        this.origin = origin;
    }
    hashWithSeed(seed) {
        let hash = seed;
        hash = murmur_hash_1.murmurHash(this.type, hash);
        hash = origin_1.hashOrigin(this.origin, new origin_1.OriginHashOptions({ seed: hash }));
        return hash;
    }
    hash() {
        const seed = 0;
        return this.hashWithSeed(seed);
    }
    compare(other) {
        return (this.type === other.type) && origin_1.isSameOrigin(this.origin, other.origin);
    }
}
exports.OriginNav = OriginNav;
class CategorizedNav {
    constructor(type, category) {
        this.type = type;
        this.category = category;
    }
    hashWithSeed(seed) {
        let hash = seed;
        hash = murmur_hash_1.murmurHash(this.type, hash);
        hash = murmur_hash_1.murmurHash(this.category, hash);
        return hash;
    }
    hash() {
        const seed = 0;
        return this.hashWithSeed(seed);
    }
    compare(other) {
        return (this.type === other.type) && (this.category === other.category);
    }
}
exports.CategorizedNav = CategorizedNav;
class GroupNav {
    constructor(type, groupName) {
        this.type = type;
        this.groupName = groupName;
    }
    hashWithSeed(seed) {
        let hash = seed;
        hash = murmur_hash_1.murmurHash(this.type, hash);
        hash = murmur_hash_1.murmurHash(this.groupName, hash);
        return hash;
    }
    hash() {
        const seed = 0;
        return this.hashWithSeed(seed);
    }
    compare(other) {
        return (this.type === other.type) &&
            string_utils_1.compareStrings(this.groupName, other.groupName);
    }
}
exports.GroupNav = GroupNav;
function makeOriginNav(type, url) {
    if (maybe_1.none(url)) {
        return undefined;
    }
    const origin = origin_1.parseOrigin(url);
    if (maybe_1.none(origin)) {
        return undefined;
    }
    return new OriginNav(type, origin);
}
exports.makeOriginNav = makeOriginNav;
function isOriginNav(navigation) {
    return navigation instanceof OriginNav;
}
exports.isOriginNav = isOriginNav;
function isCategorizedNav(navigation) {
    return navigation instanceof CategorizedNav;
}
exports.isCategorizedNav = isCategorizedNav;
function isGroupNav(navigation) {
    return navigation instanceof GroupNav;
}
exports.isGroupNav = isGroupNav;
function hashNavigation(navigation) {
    return navigation.hash();
}
exports.hashNavigation = hashNavigation;
function isSameNavigation(a, b) {
    if (isOriginNav(a) && isOriginNav(b)) {
        return a.compare(b);
    }
    else if (isCategorizedNav(a) && isCategorizedNav(b)) {
        return a.compare(b);
    }
    else if (isGroupNav(a) && isGroupNav(b)) {
        return a.compare(b);
    }
    else {
        return false;
    }
}
exports.isSameNavigation = isSameNavigation;
var NavTypeKey;
(function (NavTypeKey) {
    NavTypeKey["navigation"] = "navigateTo";
    NavTypeKey["redirect"] = "redirectTo";
    NavTypeKey["parentTab"] = "parentTab";
    NavTypeKey["contentType"] = "contentType";
    NavTypeKey["navOrRedirect"] = "navOrRedirectTo";
})(NavTypeKey = exports.NavTypeKey || (exports.NavTypeKey = {}));
var UrlCategoryKey;
(function (UrlCategoryKey) {
    UrlCategoryKey["anyUrl"] = "<anyUrl>";
    UrlCategoryKey["uncategorizedUrl"] = "<uncategorizedUrl>";
    UrlCategoryKey["trustedUrl"] = "<trustedUrl>";
    UrlCategoryKey["untrustedUrl"] = "<untrustedUrl>";
    UrlCategoryKey["phishingSourceSiteUrl"] = "<phishingSourceSiteUrl>";
    UrlCategoryKey["webMailSiteUrl"] = "<webMailSiteUrl>";
    UrlCategoryKey["authSiteUrl"] = "<authSiteUrl>";
    UrlCategoryKey["siteRequiresAuthUrl"] = "<siteRequiresAuthUrl>";
    UrlCategoryKey["externalAppLink"] = "<externalAppLink>";
})(UrlCategoryKey = exports.UrlCategoryKey || (exports.UrlCategoryKey = {}));
var NavModiferKey;
(function (NavModiferKey) {
    NavModiferKey["repeated"] = "repeat";
    NavModiferKey["not"] = "not";
    NavModiferKey["or"] = "or";
})(NavModiferKey = exports.NavModiferKey || (exports.NavModiferKey = {}));
function urlCategoryToString(urlCategory) {
    switch (urlCategory) {
        case UrlCategory.anyUrl:
            return UrlCategoryKey.anyUrl;
        case UrlCategory.uncategorizedUrl:
            return UrlCategoryKey.uncategorizedUrl;
        case UrlCategory.trustedUrl:
            return UrlCategoryKey.trustedUrl;
        case UrlCategory.untrustedUrl:
            return UrlCategoryKey.untrustedUrl;
        case UrlCategory.phishingSourceSiteUrl:
            return UrlCategoryKey.phishingSourceSiteUrl;
        case UrlCategory.webMailSiteUrl:
            return UrlCategoryKey.webMailSiteUrl;
        case UrlCategory.authSiteUrl:
            return UrlCategoryKey.authSiteUrl;
        case UrlCategory.siteRequiresAuthUrl:
            return UrlCategoryKey.siteRequiresAuthUrl;
        case UrlCategory.externalAppLink:
            return UrlCategoryKey.externalAppLink;
        default:
            return `<Invalid UrlCategory: ${urlCategory}>`;
    }
}
exports.urlCategoryToString = urlCategoryToString;
function parseNavType(navTypeKey) {
    switch (navTypeKey) {
        case NavTypeKey.navigation:
            return NavType.navigation;
        case NavTypeKey.redirect:
            return NavType.redirect;
        case NavTypeKey.parentTab:
            return NavType.parentTab;
        case NavTypeKey.contentType:
            return NavType.contentType;
        case NavTypeKey.navOrRedirect:
            return NavType.navOrRedirect;
        default:
            return undefined;
    }
}
function parseUrlCategory(urlCategoryKey) {
    switch (urlCategoryKey) {
        case UrlCategoryKey.anyUrl:
            return UrlCategory.anyUrl;
        case UrlCategoryKey.uncategorizedUrl:
            return UrlCategory.uncategorizedUrl;
        case UrlCategoryKey.trustedUrl:
            return UrlCategory.trustedUrl;
        case UrlCategoryKey.untrustedUrl:
            return UrlCategory.untrustedUrl;
        case UrlCategoryKey.phishingSourceSiteUrl:
            return UrlCategory.phishingSourceSiteUrl;
        case UrlCategoryKey.webMailSiteUrl:
            return UrlCategory.webMailSiteUrl;
        case UrlCategoryKey.authSiteUrl:
            return UrlCategory.authSiteUrl;
        case UrlCategoryKey.siteRequiresAuthUrl:
            return UrlCategory.siteRequiresAuthUrl;
        case UrlCategoryKey.externalAppLink:
            return UrlCategory.externalAppLink;
        default:
            return undefined;
    }
}
function parseNavModiferKey(navModifierKey) {
    switch (navModifierKey) {
        case NavModiferKey.repeated:
            return NavModifer.repeated;
        case NavModiferKey.not:
            return NavModifer.not;
        case NavModiferKey.or:
            return NavModifer.or;
        default:
            return undefined;
    }
}
var HttpHeaderType;
(function (HttpHeaderType) {
    HttpHeaderType[HttpHeaderType["contentType"] = 1] = "contentType";
})(HttpHeaderType = exports.HttpHeaderType || (exports.HttpHeaderType = {}));
var HttpHeaderTypeKey;
(function (HttpHeaderTypeKey) {
    HttpHeaderTypeKey["contentType"] = "Content-Type";
})(HttpHeaderTypeKey = exports.HttpHeaderTypeKey || (exports.HttpHeaderTypeKey = {}));
function parseHeaderType(headerKey) {
    switch (headerKey.toLowerCase()) {
        case HttpHeaderTypeKey.contentType.toLowerCase():
            return HttpHeaderType.contentType;
        default:
            return undefined;
    }
}
exports.parseHeaderType = parseHeaderType;
function headerTypeToString(header) {
    switch (header) {
        case HttpHeaderType.contentType:
            return HttpHeaderTypeKey.contentType;
        default:
            return `Unknown Header: ${header}`;
    }
}
exports.headerTypeToString = headerTypeToString;
function parseGroupName(groupName) {
    const groupNamePrefix = "$";
    if (groupName.startsWith(groupNamePrefix)) {
        return groupName;
    }
    else {
        return undefined;
    }
}
exports.parseGroupName = parseGroupName;
var LexedNavTokenType;
(function (LexedNavTokenType) {
    LexedNavTokenType[LexedNavTokenType["navModifier"] = 0] = "navModifier";
    LexedNavTokenType[LexedNavTokenType["navType"] = 1] = "navType";
    LexedNavTokenType[LexedNavTokenType["urlCategory"] = 2] = "urlCategory";
    LexedNavTokenType[LexedNavTokenType["origin"] = 3] = "origin";
    LexedNavTokenType[LexedNavTokenType["backRef"] = 4] = "backRef";
    LexedNavTokenType[LexedNavTokenType["urlCategoryArray"] = 5] = "urlCategoryArray";
    LexedNavTokenType[LexedNavTokenType["headerType"] = 6] = "headerType";
    LexedNavTokenType[LexedNavTokenType["contentType"] = 7] = "contentType";
    LexedNavTokenType[LexedNavTokenType["groupName"] = 8] = "groupName";
})(LexedNavTokenType || (LexedNavTokenType = {}));
function lexStringToken(token) {
    const modifier = parseNavModiferKey(token);
    if (maybe_1.some(modifier)) {
        return [LexedNavTokenType.navModifier, modifier];
    }
    const type = parseNavType(token);
    if (maybe_1.some(type)) {
        return [LexedNavTokenType.navType, type];
    }
    const category = parseUrlCategory(token);
    if (maybe_1.some(category)) {
        return [LexedNavTokenType.urlCategory, category];
    }
    const origin = origin_1.parseOrigin(token);
    if (maybe_1.some(origin)) {
        return [LexedNavTokenType.origin, origin];
    }
    const header = parseHeaderType(token);
    if (maybe_1.some(header)) {
        return [LexedNavTokenType.headerType, header];
    }
    const contentType = content_type_1.parseContentType(token);
    if (maybe_1.some(contentType)) {
        return [LexedNavTokenType.contentType, contentType];
    }
    const groupName = parseGroupName(token);
    if (maybe_1.some(groupName)) {
        return [LexedNavTokenType.groupName, groupName];
    }
    return undefined;
}
function lexNavigation(tokens, lexedTokens) {
    if (array_utils_1.isEmpty(tokens)) {
        return true;
    }
    const [token, remainingTokens] = [array_utils_1.first(tokens), array_utils_1.rest(tokens)];
    const oldLength = lexedTokens.length;
    if (string_utils_1.isString(token)) {
        const lexedToken = lexStringToken(token);
        if (maybe_1.some(lexedToken)) {
            lexedTokens.push(lexedToken);
        }
    }
    if (number_utils_1.isNumber(token)) {
        const backRef = token;
        lexedTokens.push([LexedNavTokenType.backRef, backRef]);
    }
    if (array_utils_1.isArray(token)) {
        const subTokens = token;
        const urlCategories = subTokens.map((subToken) => {
            if (string_utils_1.isString(subToken)) {
                return parseUrlCategory(subToken);
            }
            return undefined;
        }).filter(maybe_1.some);
        const didLexSubTokens = (urlCategories.length === subTokens.length);
        if (!didLexSubTokens) {
            return false;
        }
        lexedTokens.push([LexedNavTokenType.urlCategoryArray, urlCategories]);
    }
    const newLength = lexedTokens.length;
    const didLexToken = (newLength > oldLength);
    if (didLexToken) {
        return lexNavigation(remainingTokens, lexedTokens);
    }
    else {
        return false;
    }
}
var NavNodeType;
(function (NavNodeType) {
    NavNodeType[NavNodeType["repeatedNav"] = 0] = "repeatedNav";
    NavNodeType[NavNodeType["typedNav"] = 1] = "typedNav";
    NavNodeType[NavNodeType["originNav"] = 2] = "originNav";
    NavNodeType[NavNodeType["categorizedNav"] = 3] = "categorizedNav";
    NavNodeType[NavNodeType["backRef"] = 4] = "backRef";
    NavNodeType[NavNodeType["notNav"] = 5] = "notNav";
    NavNodeType[NavNodeType["orNav"] = 6] = "orNav";
    NavNodeType[NavNodeType["contentTypeNav"] = 7] = "contentTypeNav";
    NavNodeType[NavNodeType["groupNameNav"] = 8] = "groupNameNav";
})(NavNodeType || (NavNodeType = {}));
class NavNode {
    constructor(type) {
        this.type = type;
    }
    visit(visitor) {
        unused_1.unused(visitor);
    }
}
class RepeatedNavNode extends NavNode {
    constructor(child) {
        super(NavNodeType.repeatedNav);
        this.child = child;
    }
    visit(visitor) {
        visitor.visitRepeatedNav(this);
        this.child.visit(visitor);
    }
}
class TypedNavNode extends NavNode {
    constructor(navType, child) {
        super(NavNodeType.repeatedNav);
        this.navType = navType;
        this.child = child;
    }
    visit(visitor) {
        visitor.visitTypedNav(this);
        this.child.visit(visitor);
    }
}
class OriginNavNode extends NavNode {
    constructor(origin) {
        super(NavNodeType.originNav);
        this.origin = origin;
    }
    visit(visitor) {
        visitor.visitOriginNav(this);
    }
}
class CategorizedNavNode extends NavNode {
    constructor(category) {
        super(NavNodeType.categorizedNav);
        this.category = category;
    }
    visit(visitor) {
        visitor.visitCategorizedNav(this);
    }
}
class NotNavNode extends NavNode {
    constructor(child) {
        super(NavNodeType.notNav);
        this.child = child;
    }
    visit(visitor) {
        visitor.visitNotNav(this);
        this.child.visit(visitor);
    }
}
class OrNavNode extends NavNode {
    constructor(categories) {
        super(NavNodeType.orNav);
        this.categories = categories;
    }
    visit(visitor) {
        visitor.visitOrNav(this);
    }
}
class BackRefNavNode extends NavNode {
    constructor(backRef) {
        super(NavNodeType.backRef);
        this.backRef = backRef;
    }
    visit(visitor) {
        visitor.visitBackRefNav(this);
    }
}
class ContentTypeNavNode extends NavNode {
    constructor(contentType) {
        super(NavNodeType.contentTypeNav);
        this.contentType = contentType;
    }
    visit(visitor) {
        visitor.visitContentTypeNav(this);
    }
}
class GroupNameNavNode extends NavNode {
    constructor(groupName) {
        super(NavNodeType.groupNameNav);
        this.groupName = groupName;
    }
    visit(visitor) {
        visitor.visitGroupNameNav(this);
    }
}
function parseNavNode(tokens) {
    if (array_utils_1.isEmpty(tokens)) {
        return undefined;
    }
    const [[tokenType, token], remainingTokens] = [array_utils_1.first(tokens), array_utils_1.rest(tokens)];
    switch (tokenType) {
        case LexedNavTokenType.navModifier: {
            const modifier = token;
            switch (modifier) {
                case NavModifer.repeated: {
                    const childNode = parseNavNode(remainingTokens);
                    if (maybe_1.none(childNode)) {
                        return undefined;
                    }
                    return new RepeatedNavNode(childNode);
                }
                case NavModifer.not: {
                    if (array_utils_1.isEmpty(remainingTokens)) {
                        return undefined;
                    }
                    const childNode = parseNavNode(remainingTokens);
                    if (maybe_1.none(childNode)) {
                        return undefined;
                    }
                    return new NotNavNode(childNode);
                }
                case NavModifer.or: {
                    if (array_utils_1.isEmpty(remainingTokens)) {
                        return undefined;
                    }
                    const [nextTokenType, nextToken] = array_utils_1.first(remainingTokens);
                    if (nextTokenType !== LexedNavTokenType.urlCategoryArray) {
                        return undefined;
                    }
                    if (!array_utils_1.isArray(nextToken)) {
                        return undefined;
                    }
                    const categories = nextToken;
                    if (!array_utils_1.isEmpty(array_utils_1.rest(remainingTokens))) {
                        return undefined;
                    }
                    return new OrNavNode(categories);
                }
                default: {
                    return undefined;
                }
            }
        }
        case LexedNavTokenType.navType: {
            const navType = token;
            const childNode = parseNavNode(remainingTokens);
            if (maybe_1.none(childNode)) {
                return undefined;
            }
            return new TypedNavNode(navType, childNode);
        }
        case LexedNavTokenType.urlCategory: {
            const category = token;
            if (!array_utils_1.isEmpty(remainingTokens)) {
                return undefined;
            }
            return new CategorizedNavNode(category);
        }
        case LexedNavTokenType.origin: {
            const origin = token;
            if (!array_utils_1.isEmpty(remainingTokens)) {
                return undefined;
            }
            return new OriginNavNode(origin);
        }
        case LexedNavTokenType.backRef: {
            const backRef = token;
            if (!array_utils_1.isEmpty(remainingTokens)) {
                return undefined;
            }
            return new BackRefNavNode(backRef);
        }
        case LexedNavTokenType.headerType: {
            if (array_utils_1.isEmpty(remainingTokens)) {
                return undefined;
            }
            const [nextTokenType, nextToken] = array_utils_1.first(remainingTokens);
            if (nextTokenType !== LexedNavTokenType.contentType) {
                return undefined;
            }
            if (!array_utils_1.isEmpty(array_utils_1.rest(remainingTokens))) {
                return undefined;
            }
            const contentType = nextToken;
            return new ContentTypeNavNode(contentType);
        }
        case LexedNavTokenType.groupName: {
            const groupName = token;
            if (!array_utils_1.isEmpty(remainingTokens)) {
                return undefined;
            }
            return new GroupNameNavNode(groupName);
        }
        default: {
            return undefined;
        }
    }
}
var NavNodeVisitorState;
(function (NavNodeVisitorState) {
    NavNodeVisitorState[NavNodeVisitorState["visitedNoNode"] = 0] = "visitedNoNode";
    NavNodeVisitorState[NavNodeVisitorState["visitedRepeatedNode"] = 1] = "visitedRepeatedNode";
    NavNodeVisitorState[NavNodeVisitorState["visitiedTypedNode"] = 2] = "visitiedTypedNode";
    NavNodeVisitorState[NavNodeVisitorState["visitedNotNode"] = 3] = "visitedNotNode";
    NavNodeVisitorState[NavNodeVisitorState["visitedTerminalNode"] = 4] = "visitedTerminalNode";
    NavNodeVisitorState[NavNodeVisitorState["error"] = 5] = "error";
})(NavNodeVisitorState || (NavNodeVisitorState = {}));
class NavNodeVisitor {
    constructor(id) {
        this.id = id;
        this.state = NavNodeVisitorState.visitedNoNode;
        this.modifiers = NavModifer.noModifier;
        this.navType = undefined;
        this.navPattern = undefined;
    }
    visitRepeatedNav(node) {
        switch (this.state) {
            case NavNodeVisitorState.visitedNoNode: {
                this.state = NavNodeVisitorState.visitedRepeatedNode;
                this.modifiers |= NavModifer.repeated;
                break;
            }
            default: {
                this.state = NavNodeVisitorState.error;
                break;
            }
        }
    }
    visitTypedNav(node) {
        const onVisited = () => {
            this.state = NavNodeVisitorState.visitiedTypedNode;
            this.navType = node.navType;
        };
        switch (this.state) {
            case NavNodeVisitorState.visitedNoNode: {
                onVisited();
                break;
            }
            case NavNodeVisitorState.visitedRepeatedNode: {
                onVisited();
                break;
            }
            default: {
                this.state = NavNodeVisitorState.error;
                break;
            }
        }
    }
    visitOriginNav(node) {
        switch (this.state) {
            case NavNodeVisitorState.visitiedTypedNode: {
                this.state = NavNodeVisitorState.visitedTerminalNode;
                this.navPattern = new OriginNavPattern(this.modifiers, this.navType, node.origin, this.id);
                break;
            }
            default: {
                this.state = NavNodeVisitorState.error;
                break;
            }
        }
    }
    visitCategorizedNav(node) {
        const onVisited = () => {
            this.state = NavNodeVisitorState.visitedTerminalNode;
            this.navPattern = new CategorizedNavPattern(this.modifiers, this.navType, node.category, this.id);
        };
        switch (this.state) {
            case NavNodeVisitorState.visitiedTypedNode: {
                onVisited();
                break;
            }
            case NavNodeVisitorState.visitedNotNode: {
                onVisited();
                break;
            }
            default: {
                this.state = NavNodeVisitorState.error;
                break;
            }
        }
    }
    visitBackRefNav(node) {
        const onVisited = () => {
            this.state = NavNodeVisitorState.visitedTerminalNode;
            this.navPattern = new BackRefNavPattern(this.modifiers, this.navType, node.backRef, this.id);
        };
        switch (this.state) {
            case NavNodeVisitorState.visitiedTypedNode: {
                onVisited();
                break;
            }
            case NavNodeVisitorState.visitedNotNode: {
                onVisited();
                break;
            }
            default: {
                this.state = NavNodeVisitorState.error;
                break;
            }
        }
    }
    visitNotNav(node) {
        switch (this.state) {
            case NavNodeVisitorState.visitiedTypedNode: {
                this.state = NavNodeVisitorState.visitedNotNode;
                this.modifiers |= NavModifer.not;
                break;
            }
            default: {
                this.state = NavNodeVisitorState.error;
                break;
            }
        }
    }
    visitOrNav(node) {
        switch (this.state) {
            case NavNodeVisitorState.visitiedTypedNode: {
                this.state = NavNodeVisitorState.visitedTerminalNode;
                this.modifiers |= NavModifer.or;
                let categories = UrlCategory.uncategorizedUrl;
                for (const category of node.categories) {
                    categories |= category;
                }
                this.navPattern = new CategorizedNavPattern(this.modifiers, this.navType, categories, this.id);
                break;
            }
            default: {
                this.state = NavNodeVisitorState.error;
                break;
            }
        }
    }
    visitContentTypeNav(node) {
        switch (this.state) {
            case NavNodeVisitorState.visitedNoNode: {
                this.state = NavNodeVisitorState.visitedTerminalNode;
                this.navPattern = new ContentTypeNavPattern(node.contentType, this.id);
                break;
            }
            default: {
                this.state = NavNodeVisitorState.error;
                break;
            }
        }
    }
    visitGroupNameNav(node) {
        switch (this.state) {
            case NavNodeVisitorState.visitiedTypedNode: {
                this.state = NavNodeVisitorState.visitedTerminalNode;
                this.navPattern = new GroupNavPattern(this.modifiers, this.navType, node.groupName, this.id);
                break;
            }
            default: {
                this.state = NavNodeVisitorState.error;
                break;
            }
        }
    }
    visit(node) {
        node.visit(this);
        if (this.state === NavNodeVisitorState.error) {
            return undefined;
        }
        if (this.state !== NavNodeVisitorState.visitedTerminalNode) {
            return undefined;
        }
        return this.navPattern;
    }
}
function parseNavigation(tokens, index) {
    if (array_utils_1.isEmpty(tokens)) {
        return undefined;
    }
    const lexedTokens = [];
    if (!lexNavigation(tokens, lexedTokens)) {
        return undefined;
    }
    const node = parseNavNode(lexedTokens);
    if (maybe_1.none(node)) {
        return undefined;
    }
    const id = index + 1;
    const visitor = new NavNodeVisitor(id);
    const navigation = visitor.visit(node);
    return navigation;
}
function parseNavSequence(serializedNavSequence) {
    const parsedNavSequence = serializedNavSequence.map(parseNavigation);
    if (parsedNavSequence.some(maybe_1.none)) {
        return undefined;
    }
    const navSequence = parsedNavSequence.filter(maybe_1.some);
    return navSequence;
}
exports.parseNavSequence = parseNavSequence;
function parseNavMetadata(serializedNavMetadata) {
    if (maybe_1.none(serializedNavMetadata.precedence)) {
        return undefined;
    }
    if (maybe_1.none(serializedNavMetadata.allow) && maybe_1.none(serializedNavMetadata.block)) {
        return undefined;
    }
    if (maybe_1.none(serializedNavMetadata.navigateTo)) {
        return undefined;
    }
    return serializedNavMetadata;
}
exports.parseNavMetadata = parseNavMetadata;
function parseNavSeqData(serializedNavSeqData) {
    const parsedNavSequence = parseNavSequence(serializedNavSeqData.seq);
    if (maybe_1.none(parsedNavSequence)) {
        return undefined;
    }
    const parsedNavMetadata = parseNavMetadata(serializedNavSeqData.metadata);
    if (maybe_1.none(parsedNavMetadata)) {
        return undefined;
    }
    return [parsedNavSequence, parsedNavMetadata];
}
exports.parseNavSeqData = parseNavSeqData;
function checkVersion(serializedPhishingNavSeqData, expectedVersion) {
    const isValidVersion = (serializedPhishingNavSeqData.version === expectedVersion);
    if (!isValidVersion) {
        log_1.logError(new Error(`SerializedPhishingNavSeqData version check failed. ${string_utils_1.toString({
            version: serializedPhishingNavSeqData.version,
            expectedVersion: expectedVersion
        })}`));
    }
    return isValidVersion;
}
exports.checkVersion = checkVersion;
function isValidSerializedPhishingNavSeqData(serializedPhishingNavSeqData) {
    if (maybe_1.none(serializedPhishingNavSeqData.version)) {
        return false;
    }
    if (maybe_1.none(serializedPhishingNavSeqData.builtinRulesPrecedence)) {
        return false;
    }
    if (maybe_1.none(serializedPhishingNavSeqData.seqs)) {
        return false;
    }
    return true;
}
exports.isValidSerializedPhishingNavSeqData = isValidSerializedPhishingNavSeqData;


/***/ }),
/* 37 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
const maybe_1 = __webpack_require__(0);
var ContentType;
(function (ContentType) {
    ContentType[ContentType["pdf"] = 1] = "pdf";
})(ContentType = exports.ContentType || (exports.ContentType = {}));
var ContentTypeKey;
(function (ContentTypeKey) {
    ContentTypeKey["pdf"] = "application/pdf";
})(ContentTypeKey || (ContentTypeKey = {}));
function parseContentType(contentTypeKey) {
    const contentTypeKeyLower = contentTypeKey.toLowerCase();
    if (contentTypeKeyLower.startsWith(ContentTypeKey.pdf.toLowerCase())) {
        return ContentType.pdf;
    }
    else {
        return undefined;
    }
}
exports.parseContentType = parseContentType;
function parseRawContentType(rawContentType) {
    return maybe_1.some(rawContentType) ? parseContentType(rawContentType) : undefined;
}
exports.parseRawContentType = parseRawContentType;
function contentTypeToString(contentType) {
    switch (contentType) {
        case ContentType.pdf:
            return ContentTypeKey.pdf;
        default:
            return `Unknown ContentType: ${contentType}`;
    }
}
exports.contentTypeToString = contentTypeToString;


/***/ }),
/* 38 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var ConnectionState;
(function (ConnectionState) {
    ConnectionState[ConnectionState["Connecting"] = 0] = "Connecting";
    ConnectionState[ConnectionState["Handshaking"] = 1] = "Handshaking";
    ConnectionState[ConnectionState["Connected"] = 2] = "Connected";
    ConnectionState[ConnectionState["Disconnecting"] = 3] = "Disconnecting";
    ConnectionState[ConnectionState["Disconnected"] = 4] = "Disconnected";
})(ConnectionState = exports.ConnectionState || (exports.ConnectionState = {}));
class ConnectionStateChangedEvent {
    constructor(oldState, newState) {
        this.oldState = oldState;
        this.newState = newState;
    }
}
exports.ConnectionStateChangedEvent = ConnectionStateChangedEvent;


/***/ }),
/* 39 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
const maybe_1 = __webpack_require__(0);
const promise_utils_1 = __webpack_require__(13);
const port_utils_1 = __webpack_require__(29);
const string_utils_1 = __webpack_require__(3);
const browser_1 = __webpack_require__(6);
class PagePortResolver {
    constructor(portName, onUnresolvedPortConnected, isPageURL, checkPageURL = true) {
        this.portName = portName;
        this.onUnresolvedPortConnected = onUnresolvedPortConnected;
        this.isPageURL = isPageURL;
        this.checkPageURL = checkPageURL;
        this.resolvers = new Map();
        chrome.runtime.onConnect.addListener(this.onPortConnected.bind(this));
    }
    onPortConnected(port) {
        if (!string_utils_1.compareStrings(port.name, this.portName)) {
            return;
        }
        if (this.checkPageURL) {
            const url = port_utils_1.readPortPageUrl(port);
            if (maybe_1.none(url)) {
                return;
            }
            if (!this.isPageURL(url)) {
                return;
            }
        }
        const tabId = port_utils_1.readPortTabId(port);
        if (maybe_1.none(tabId)) {
            return;
        }
        const resolve = this.resolvers.get(tabId);
        if (maybe_1.none(resolve)) {
            this.onUnresolvedPortConnected(tabId, port);
            return;
        }
        this.resolvers.delete(tabId);
        resolve(port);
    }
    resolvePort(tabId) {
        return promise_utils_1.makePromiseAsync((resolve) => {
            this.resolvers.set(tabId, resolve);
        });
    }
}
exports.PagePortResolver = PagePortResolver;
function getBrowserSpecificExtensionPagePortResolver(browser, portName, onUnresolvedPortConnected, isPageURL) {
    if (browser === browser_1.Browser.edge || maybe_1.none(browser)) {
        return new PagePortResolver(portName, onUnresolvedPortConnected, (url) => { return false; }, false);
    }
    else {
        return new PagePortResolver(portName, onUnresolvedPortConnected, isPageURL);
    }
}
exports.getBrowserSpecificExtensionPagePortResolver = getBrowserSpecificExtensionPagePortResolver;


/***/ }),
/* 40 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
function currentDateTimeString() {
    return new Date().toISOString();
}
exports.currentDateTimeString = currentDateTimeString;


/***/ }),
/* 41 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(global, process) {// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.



/*<replacement>*/

var processNextTick = __webpack_require__(26);
/*</replacement>*/

module.exports = Readable;

/*<replacement>*/
var isArray = __webpack_require__(72);
/*</replacement>*/

/*<replacement>*/
var Duplex;
/*</replacement>*/

Readable.ReadableState = ReadableState;

/*<replacement>*/
var EE = __webpack_require__(32).EventEmitter;

var EElistenerCount = function (emitter, type) {
  return emitter.listeners(type).length;
};
/*</replacement>*/

/*<replacement>*/
var Stream = __webpack_require__(42);
/*</replacement>*/

// TODO(bmeurer): Change this back to const once hole checks are
// properly optimized away early in Ignition+TurboFan.
/*<replacement>*/
var Buffer = __webpack_require__(27).Buffer;
var OurUint8Array = global.Uint8Array || function () {};
function _uint8ArrayToBuffer(chunk) {
  return Buffer.from(chunk);
}
function _isUint8Array(obj) {
  return Buffer.isBuffer(obj) || obj instanceof OurUint8Array;
}
/*</replacement>*/

/*<replacement>*/
var util = __webpack_require__(23);
util.inherits = __webpack_require__(18);
/*</replacement>*/

/*<replacement>*/
var debugUtil = __webpack_require__(76);
var debug = void 0;
if (debugUtil && debugUtil.debuglog) {
  debug = debugUtil.debuglog('stream');
} else {
  debug = function () {};
}
/*</replacement>*/

var BufferList = __webpack_require__(77);
var destroyImpl = __webpack_require__(44);
var StringDecoder;

util.inherits(Readable, Stream);

var kProxyEvents = ['error', 'close', 'destroy', 'pause', 'resume'];

function prependListener(emitter, event, fn) {
  // Sadly this is not cacheable as some libraries bundle their own
  // event emitter implementation with them.
  if (typeof emitter.prependListener === 'function') {
    return emitter.prependListener(event, fn);
  } else {
    // This is a hack to make sure that our error handler is attached before any
    // userland ones.  NEVER DO THIS. This is here only because this code needs
    // to continue to work with older versions of Node.js that do not include
    // the prependListener() method. The goal is to eventually remove this hack.
    if (!emitter._events || !emitter._events[event]) emitter.on(event, fn);else if (isArray(emitter._events[event])) emitter._events[event].unshift(fn);else emitter._events[event] = [fn, emitter._events[event]];
  }
}

function ReadableState(options, stream) {
  Duplex = Duplex || __webpack_require__(15);

  options = options || {};

  // object stream flag. Used to make read(n) ignore n and to
  // make all the buffer merging and length checks go away
  this.objectMode = !!options.objectMode;

  if (stream instanceof Duplex) this.objectMode = this.objectMode || !!options.readableObjectMode;

  // the point at which it stops calling _read() to fill the buffer
  // Note: 0 is a valid value, means "don't call _read preemptively ever"
  var hwm = options.highWaterMark;
  var defaultHwm = this.objectMode ? 16 : 16 * 1024;
  this.highWaterMark = hwm || hwm === 0 ? hwm : defaultHwm;

  // cast to ints.
  this.highWaterMark = Math.floor(this.highWaterMark);

  // A linked list is used to store data chunks instead of an array because the
  // linked list can remove elements from the beginning faster than
  // array.shift()
  this.buffer = new BufferList();
  this.length = 0;
  this.pipes = null;
  this.pipesCount = 0;
  this.flowing = null;
  this.ended = false;
  this.endEmitted = false;
  this.reading = false;

  // a flag to be able to tell if the event 'readable'/'data' is emitted
  // immediately, or on a later tick.  We set this to true at first, because
  // any actions that shouldn't happen until "later" should generally also
  // not happen before the first read call.
  this.sync = true;

  // whenever we return null, then we set a flag to say
  // that we're awaiting a 'readable' event emission.
  this.needReadable = false;
  this.emittedReadable = false;
  this.readableListening = false;
  this.resumeScheduled = false;

  // has it been destroyed
  this.destroyed = false;

  // Crypto is kind of old and crusty.  Historically, its default string
  // encoding is 'binary' so we have to make this configurable.
  // Everything else in the universe uses 'utf8', though.
  this.defaultEncoding = options.defaultEncoding || 'utf8';

  // the number of writers that are awaiting a drain event in .pipe()s
  this.awaitDrain = 0;

  // if true, a maybeReadMore has been scheduled
  this.readingMore = false;

  this.decoder = null;
  this.encoding = null;
  if (options.encoding) {
    if (!StringDecoder) StringDecoder = __webpack_require__(45).StringDecoder;
    this.decoder = new StringDecoder(options.encoding);
    this.encoding = options.encoding;
  }
}

function Readable(options) {
  Duplex = Duplex || __webpack_require__(15);

  if (!(this instanceof Readable)) return new Readable(options);

  this._readableState = new ReadableState(options, this);

  // legacy
  this.readable = true;

  if (options) {
    if (typeof options.read === 'function') this._read = options.read;

    if (typeof options.destroy === 'function') this._destroy = options.destroy;
  }

  Stream.call(this);
}

Object.defineProperty(Readable.prototype, 'destroyed', {
  get: function () {
    if (this._readableState === undefined) {
      return false;
    }
    return this._readableState.destroyed;
  },
  set: function (value) {
    // we ignore the value if the stream
    // has not been initialized yet
    if (!this._readableState) {
      return;
    }

    // backward compatibility, the user is explicitly
    // managing destroyed
    this._readableState.destroyed = value;
  }
});

Readable.prototype.destroy = destroyImpl.destroy;
Readable.prototype._undestroy = destroyImpl.undestroy;
Readable.prototype._destroy = function (err, cb) {
  this.push(null);
  cb(err);
};

// Manually shove something into the read() buffer.
// This returns true if the highWaterMark has not been hit yet,
// similar to how Writable.write() returns true if you should
// write() some more.
Readable.prototype.push = function (chunk, encoding) {
  var state = this._readableState;
  var skipChunkCheck;

  if (!state.objectMode) {
    if (typeof chunk === 'string') {
      encoding = encoding || state.defaultEncoding;
      if (encoding !== state.encoding) {
        chunk = Buffer.from(chunk, encoding);
        encoding = '';
      }
      skipChunkCheck = true;
    }
  } else {
    skipChunkCheck = true;
  }

  return readableAddChunk(this, chunk, encoding, false, skipChunkCheck);
};

// Unshift should *always* be something directly out of read()
Readable.prototype.unshift = function (chunk) {
  return readableAddChunk(this, chunk, null, true, false);
};

function readableAddChunk(stream, chunk, encoding, addToFront, skipChunkCheck) {
  var state = stream._readableState;
  if (chunk === null) {
    state.reading = false;
    onEofChunk(stream, state);
  } else {
    var er;
    if (!skipChunkCheck) er = chunkInvalid(state, chunk);
    if (er) {
      stream.emit('error', er);
    } else if (state.objectMode || chunk && chunk.length > 0) {
      if (typeof chunk !== 'string' && !state.objectMode && Object.getPrototypeOf(chunk) !== Buffer.prototype) {
        chunk = _uint8ArrayToBuffer(chunk);
      }

      if (addToFront) {
        if (state.endEmitted) stream.emit('error', new Error('stream.unshift() after end event'));else addChunk(stream, state, chunk, true);
      } else if (state.ended) {
        stream.emit('error', new Error('stream.push() after EOF'));
      } else {
        state.reading = false;
        if (state.decoder && !encoding) {
          chunk = state.decoder.write(chunk);
          if (state.objectMode || chunk.length !== 0) addChunk(stream, state, chunk, false);else maybeReadMore(stream, state);
        } else {
          addChunk(stream, state, chunk, false);
        }
      }
    } else if (!addToFront) {
      state.reading = false;
    }
  }

  return needMoreData(state);
}

function addChunk(stream, state, chunk, addToFront) {
  if (state.flowing && state.length === 0 && !state.sync) {
    stream.emit('data', chunk);
    stream.read(0);
  } else {
    // update the buffer info.
    state.length += state.objectMode ? 1 : chunk.length;
    if (addToFront) state.buffer.unshift(chunk);else state.buffer.push(chunk);

    if (state.needReadable) emitReadable(stream);
  }
  maybeReadMore(stream, state);
}

function chunkInvalid(state, chunk) {
  var er;
  if (!_isUint8Array(chunk) && typeof chunk !== 'string' && chunk !== undefined && !state.objectMode) {
    er = new TypeError('Invalid non-string/buffer chunk');
  }
  return er;
}

// if it's past the high water mark, we can push in some more.
// Also, if we have no data yet, we can stand some
// more bytes.  This is to work around cases where hwm=0,
// such as the repl.  Also, if the push() triggered a
// readable event, and the user called read(largeNumber) such that
// needReadable was set, then we ought to push more, so that another
// 'readable' event will be triggered.
function needMoreData(state) {
  return !state.ended && (state.needReadable || state.length < state.highWaterMark || state.length === 0);
}

Readable.prototype.isPaused = function () {
  return this._readableState.flowing === false;
};

// backwards compatibility.
Readable.prototype.setEncoding = function (enc) {
  if (!StringDecoder) StringDecoder = __webpack_require__(45).StringDecoder;
  this._readableState.decoder = new StringDecoder(enc);
  this._readableState.encoding = enc;
  return this;
};

// Don't raise the hwm > 8MB
var MAX_HWM = 0x800000;
function computeNewHighWaterMark(n) {
  if (n >= MAX_HWM) {
    n = MAX_HWM;
  } else {
    // Get the next highest power of 2 to prevent increasing hwm excessively in
    // tiny amounts
    n--;
    n |= n >>> 1;
    n |= n >>> 2;
    n |= n >>> 4;
    n |= n >>> 8;
    n |= n >>> 16;
    n++;
  }
  return n;
}

// This function is designed to be inlinable, so please take care when making
// changes to the function body.
function howMuchToRead(n, state) {
  if (n <= 0 || state.length === 0 && state.ended) return 0;
  if (state.objectMode) return 1;
  if (n !== n) {
    // Only flow one buffer at a time
    if (state.flowing && state.length) return state.buffer.head.data.length;else return state.length;
  }
  // If we're asking for more than the current hwm, then raise the hwm.
  if (n > state.highWaterMark) state.highWaterMark = computeNewHighWaterMark(n);
  if (n <= state.length) return n;
  // Don't have enough
  if (!state.ended) {
    state.needReadable = true;
    return 0;
  }
  return state.length;
}

// you can override either this method, or the async _read(n) below.
Readable.prototype.read = function (n) {
  debug('read', n);
  n = parseInt(n, 10);
  var state = this._readableState;
  var nOrig = n;

  if (n !== 0) state.emittedReadable = false;

  // if we're doing read(0) to trigger a readable event, but we
  // already have a bunch of data in the buffer, then just trigger
  // the 'readable' event and move on.
  if (n === 0 && state.needReadable && (state.length >= state.highWaterMark || state.ended)) {
    debug('read: emitReadable', state.length, state.ended);
    if (state.length === 0 && state.ended) endReadable(this);else emitReadable(this);
    return null;
  }

  n = howMuchToRead(n, state);

  // if we've ended, and we're now clear, then finish it up.
  if (n === 0 && state.ended) {
    if (state.length === 0) endReadable(this);
    return null;
  }

  // All the actual chunk generation logic needs to be
  // *below* the call to _read.  The reason is that in certain
  // synthetic stream cases, such as passthrough streams, _read
  // may be a completely synchronous operation which may change
  // the state of the read buffer, providing enough data when
  // before there was *not* enough.
  //
  // So, the steps are:
  // 1. Figure out what the state of things will be after we do
  // a read from the buffer.
  //
  // 2. If that resulting state will trigger a _read, then call _read.
  // Note that this may be asynchronous, or synchronous.  Yes, it is
  // deeply ugly to write APIs this way, but that still doesn't mean
  // that the Readable class should behave improperly, as streams are
  // designed to be sync/async agnostic.
  // Take note if the _read call is sync or async (ie, if the read call
  // has returned yet), so that we know whether or not it's safe to emit
  // 'readable' etc.
  //
  // 3. Actually pull the requested chunks out of the buffer and return.

  // if we need a readable event, then we need to do some reading.
  var doRead = state.needReadable;
  debug('need readable', doRead);

  // if we currently have less than the highWaterMark, then also read some
  if (state.length === 0 || state.length - n < state.highWaterMark) {
    doRead = true;
    debug('length less than watermark', doRead);
  }

  // however, if we've ended, then there's no point, and if we're already
  // reading, then it's unnecessary.
  if (state.ended || state.reading) {
    doRead = false;
    debug('reading or ended', doRead);
  } else if (doRead) {
    debug('do read');
    state.reading = true;
    state.sync = true;
    // if the length is currently zero, then we *need* a readable event.
    if (state.length === 0) state.needReadable = true;
    // call internal read method
    this._read(state.highWaterMark);
    state.sync = false;
    // If _read pushed data synchronously, then `reading` will be false,
    // and we need to re-evaluate how much data we can return to the user.
    if (!state.reading) n = howMuchToRead(nOrig, state);
  }

  var ret;
  if (n > 0) ret = fromList(n, state);else ret = null;

  if (ret === null) {
    state.needReadable = true;
    n = 0;
  } else {
    state.length -= n;
  }

  if (state.length === 0) {
    // If we have nothing in the buffer, then we want to know
    // as soon as we *do* get something into the buffer.
    if (!state.ended) state.needReadable = true;

    // If we tried to read() past the EOF, then emit end on the next tick.
    if (nOrig !== n && state.ended) endReadable(this);
  }

  if (ret !== null) this.emit('data', ret);

  return ret;
};

function onEofChunk(stream, state) {
  if (state.ended) return;
  if (state.decoder) {
    var chunk = state.decoder.end();
    if (chunk && chunk.length) {
      state.buffer.push(chunk);
      state.length += state.objectMode ? 1 : chunk.length;
    }
  }
  state.ended = true;

  // emit 'readable' now to make sure it gets picked up.
  emitReadable(stream);
}

// Don't emit readable right away in sync mode, because this can trigger
// another read() call => stack overflow.  This way, it might trigger
// a nextTick recursion warning, but that's not so bad.
function emitReadable(stream) {
  var state = stream._readableState;
  state.needReadable = false;
  if (!state.emittedReadable) {
    debug('emitReadable', state.flowing);
    state.emittedReadable = true;
    if (state.sync) processNextTick(emitReadable_, stream);else emitReadable_(stream);
  }
}

function emitReadable_(stream) {
  debug('emit readable');
  stream.emit('readable');
  flow(stream);
}

// at this point, the user has presumably seen the 'readable' event,
// and called read() to consume some data.  that may have triggered
// in turn another _read(n) call, in which case reading = true if
// it's in progress.
// However, if we're not ended, or reading, and the length < hwm,
// then go ahead and try to read some more preemptively.
function maybeReadMore(stream, state) {
  if (!state.readingMore) {
    state.readingMore = true;
    processNextTick(maybeReadMore_, stream, state);
  }
}

function maybeReadMore_(stream, state) {
  var len = state.length;
  while (!state.reading && !state.flowing && !state.ended && state.length < state.highWaterMark) {
    debug('maybeReadMore read 0');
    stream.read(0);
    if (len === state.length)
      // didn't get any data, stop spinning.
      break;else len = state.length;
  }
  state.readingMore = false;
}

// abstract method.  to be overridden in specific implementation classes.
// call cb(er, data) where data is <= n in length.
// for virtual (non-string, non-buffer) streams, "length" is somewhat
// arbitrary, and perhaps not very meaningful.
Readable.prototype._read = function (n) {
  this.emit('error', new Error('_read() is not implemented'));
};

Readable.prototype.pipe = function (dest, pipeOpts) {
  var src = this;
  var state = this._readableState;

  switch (state.pipesCount) {
    case 0:
      state.pipes = dest;
      break;
    case 1:
      state.pipes = [state.pipes, dest];
      break;
    default:
      state.pipes.push(dest);
      break;
  }
  state.pipesCount += 1;
  debug('pipe count=%d opts=%j', state.pipesCount, pipeOpts);

  var doEnd = (!pipeOpts || pipeOpts.end !== false) && dest !== process.stdout && dest !== process.stderr;

  var endFn = doEnd ? onend : unpipe;
  if (state.endEmitted) processNextTick(endFn);else src.once('end', endFn);

  dest.on('unpipe', onunpipe);
  function onunpipe(readable, unpipeInfo) {
    debug('onunpipe');
    if (readable === src) {
      if (unpipeInfo && unpipeInfo.hasUnpiped === false) {
        unpipeInfo.hasUnpiped = true;
        cleanup();
      }
    }
  }

  function onend() {
    debug('onend');
    dest.end();
  }

  // when the dest drains, it reduces the awaitDrain counter
  // on the source.  This would be more elegant with a .once()
  // handler in flow(), but adding and removing repeatedly is
  // too slow.
  var ondrain = pipeOnDrain(src);
  dest.on('drain', ondrain);

  var cleanedUp = false;
  function cleanup() {
    debug('cleanup');
    // cleanup event handlers once the pipe is broken
    dest.removeListener('close', onclose);
    dest.removeListener('finish', onfinish);
    dest.removeListener('drain', ondrain);
    dest.removeListener('error', onerror);
    dest.removeListener('unpipe', onunpipe);
    src.removeListener('end', onend);
    src.removeListener('end', unpipe);
    src.removeListener('data', ondata);

    cleanedUp = true;

    // if the reader is waiting for a drain event from this
    // specific writer, then it would cause it to never start
    // flowing again.
    // So, if this is awaiting a drain, then we just call it now.
    // If we don't know, then assume that we are waiting for one.
    if (state.awaitDrain && (!dest._writableState || dest._writableState.needDrain)) ondrain();
  }

  // If the user pushes more data while we're writing to dest then we'll end up
  // in ondata again. However, we only want to increase awaitDrain once because
  // dest will only emit one 'drain' event for the multiple writes.
  // => Introduce a guard on increasing awaitDrain.
  var increasedAwaitDrain = false;
  src.on('data', ondata);
  function ondata(chunk) {
    debug('ondata');
    increasedAwaitDrain = false;
    var ret = dest.write(chunk);
    if (false === ret && !increasedAwaitDrain) {
      // If the user unpiped during `dest.write()`, it is possible
      // to get stuck in a permanently paused state if that write
      // also returned false.
      // => Check whether `dest` is still a piping destination.
      if ((state.pipesCount === 1 && state.pipes === dest || state.pipesCount > 1 && indexOf(state.pipes, dest) !== -1) && !cleanedUp) {
        debug('false write response, pause', src._readableState.awaitDrain);
        src._readableState.awaitDrain++;
        increasedAwaitDrain = true;
      }
      src.pause();
    }
  }

  // if the dest has an error, then stop piping into it.
  // however, don't suppress the throwing behavior for this.
  function onerror(er) {
    debug('onerror', er);
    unpipe();
    dest.removeListener('error', onerror);
    if (EElistenerCount(dest, 'error') === 0) dest.emit('error', er);
  }

  // Make sure our error handler is attached before userland ones.
  prependListener(dest, 'error', onerror);

  // Both close and finish should trigger unpipe, but only once.
  function onclose() {
    dest.removeListener('finish', onfinish);
    unpipe();
  }
  dest.once('close', onclose);
  function onfinish() {
    debug('onfinish');
    dest.removeListener('close', onclose);
    unpipe();
  }
  dest.once('finish', onfinish);

  function unpipe() {
    debug('unpipe');
    src.unpipe(dest);
  }

  // tell the dest that it's being piped to
  dest.emit('pipe', src);

  // start the flow if it hasn't been started already.
  if (!state.flowing) {
    debug('pipe resume');
    src.resume();
  }

  return dest;
};

function pipeOnDrain(src) {
  return function () {
    var state = src._readableState;
    debug('pipeOnDrain', state.awaitDrain);
    if (state.awaitDrain) state.awaitDrain--;
    if (state.awaitDrain === 0 && EElistenerCount(src, 'data')) {
      state.flowing = true;
      flow(src);
    }
  };
}

Readable.prototype.unpipe = function (dest) {
  var state = this._readableState;
  var unpipeInfo = { hasUnpiped: false };

  // if we're not piping anywhere, then do nothing.
  if (state.pipesCount === 0) return this;

  // just one destination.  most common case.
  if (state.pipesCount === 1) {
    // passed in one, but it's not the right one.
    if (dest && dest !== state.pipes) return this;

    if (!dest) dest = state.pipes;

    // got a match.
    state.pipes = null;
    state.pipesCount = 0;
    state.flowing = false;
    if (dest) dest.emit('unpipe', this, unpipeInfo);
    return this;
  }

  // slow case. multiple pipe destinations.

  if (!dest) {
    // remove all.
    var dests = state.pipes;
    var len = state.pipesCount;
    state.pipes = null;
    state.pipesCount = 0;
    state.flowing = false;

    for (var i = 0; i < len; i++) {
      dests[i].emit('unpipe', this, unpipeInfo);
    }return this;
  }

  // try to find the right one.
  var index = indexOf(state.pipes, dest);
  if (index === -1) return this;

  state.pipes.splice(index, 1);
  state.pipesCount -= 1;
  if (state.pipesCount === 1) state.pipes = state.pipes[0];

  dest.emit('unpipe', this, unpipeInfo);

  return this;
};

// set up data events if they are asked for
// Ensure readable listeners eventually get something
Readable.prototype.on = function (ev, fn) {
  var res = Stream.prototype.on.call(this, ev, fn);

  if (ev === 'data') {
    // Start flowing on next tick if stream isn't explicitly paused
    if (this._readableState.flowing !== false) this.resume();
  } else if (ev === 'readable') {
    var state = this._readableState;
    if (!state.endEmitted && !state.readableListening) {
      state.readableListening = state.needReadable = true;
      state.emittedReadable = false;
      if (!state.reading) {
        processNextTick(nReadingNextTick, this);
      } else if (state.length) {
        emitReadable(this);
      }
    }
  }

  return res;
};
Readable.prototype.addListener = Readable.prototype.on;

function nReadingNextTick(self) {
  debug('readable nexttick read 0');
  self.read(0);
}

// pause() and resume() are remnants of the legacy readable stream API
// If the user uses them, then switch into old mode.
Readable.prototype.resume = function () {
  var state = this._readableState;
  if (!state.flowing) {
    debug('resume');
    state.flowing = true;
    resume(this, state);
  }
  return this;
};

function resume(stream, state) {
  if (!state.resumeScheduled) {
    state.resumeScheduled = true;
    processNextTick(resume_, stream, state);
  }
}

function resume_(stream, state) {
  if (!state.reading) {
    debug('resume read 0');
    stream.read(0);
  }

  state.resumeScheduled = false;
  state.awaitDrain = 0;
  stream.emit('resume');
  flow(stream);
  if (state.flowing && !state.reading) stream.read(0);
}

Readable.prototype.pause = function () {
  debug('call pause flowing=%j', this._readableState.flowing);
  if (false !== this._readableState.flowing) {
    debug('pause');
    this._readableState.flowing = false;
    this.emit('pause');
  }
  return this;
};

function flow(stream) {
  var state = stream._readableState;
  debug('flow', state.flowing);
  while (state.flowing && stream.read() !== null) {}
}

// wrap an old-style stream as the async data source.
// This is *not* part of the readable stream interface.
// It is an ugly unfortunate mess of history.
Readable.prototype.wrap = function (stream) {
  var state = this._readableState;
  var paused = false;

  var self = this;
  stream.on('end', function () {
    debug('wrapped end');
    if (state.decoder && !state.ended) {
      var chunk = state.decoder.end();
      if (chunk && chunk.length) self.push(chunk);
    }

    self.push(null);
  });

  stream.on('data', function (chunk) {
    debug('wrapped data');
    if (state.decoder) chunk = state.decoder.write(chunk);

    // don't skip over falsy values in objectMode
    if (state.objectMode && (chunk === null || chunk === undefined)) return;else if (!state.objectMode && (!chunk || !chunk.length)) return;

    var ret = self.push(chunk);
    if (!ret) {
      paused = true;
      stream.pause();
    }
  });

  // proxy all the other methods.
  // important when wrapping filters and duplexes.
  for (var i in stream) {
    if (this[i] === undefined && typeof stream[i] === 'function') {
      this[i] = function (method) {
        return function () {
          return stream[method].apply(stream, arguments);
        };
      }(i);
    }
  }

  // proxy certain important events.
  for (var n = 0; n < kProxyEvents.length; n++) {
    stream.on(kProxyEvents[n], self.emit.bind(self, kProxyEvents[n]));
  }

  // when we try to consume some more bytes, simply unpause the
  // underlying stream.
  self._read = function (n) {
    debug('wrapped _read', n);
    if (paused) {
      paused = false;
      stream.resume();
    }
  };

  return self;
};

// exposed for testing purposes only.
Readable._fromList = fromList;

// Pluck off n bytes from an array of buffers.
// Length is the combined lengths of all the buffers in the list.
// This function is designed to be inlinable, so please take care when making
// changes to the function body.
function fromList(n, state) {
  // nothing buffered
  if (state.length === 0) return null;

  var ret;
  if (state.objectMode) ret = state.buffer.shift();else if (!n || n >= state.length) {
    // read it all, truncate the list
    if (state.decoder) ret = state.buffer.join('');else if (state.buffer.length === 1) ret = state.buffer.head.data;else ret = state.buffer.concat(state.length);
    state.buffer.clear();
  } else {
    // read part of list
    ret = fromListPartial(n, state.buffer, state.decoder);
  }

  return ret;
}

// Extracts only enough buffered data to satisfy the amount requested.
// This function is designed to be inlinable, so please take care when making
// changes to the function body.
function fromListPartial(n, list, hasStrings) {
  var ret;
  if (n < list.head.data.length) {
    // slice is the same for buffers and strings
    ret = list.head.data.slice(0, n);
    list.head.data = list.head.data.slice(n);
  } else if (n === list.head.data.length) {
    // first chunk is a perfect match
    ret = list.shift();
  } else {
    // result spans more than one buffer
    ret = hasStrings ? copyFromBufferString(n, list) : copyFromBuffer(n, list);
  }
  return ret;
}

// Copies a specified amount of characters from the list of buffered data
// chunks.
// This function is designed to be inlinable, so please take care when making
// changes to the function body.
function copyFromBufferString(n, list) {
  var p = list.head;
  var c = 1;
  var ret = p.data;
  n -= ret.length;
  while (p = p.next) {
    var str = p.data;
    var nb = n > str.length ? str.length : n;
    if (nb === str.length) ret += str;else ret += str.slice(0, n);
    n -= nb;
    if (n === 0) {
      if (nb === str.length) {
        ++c;
        if (p.next) list.head = p.next;else list.head = list.tail = null;
      } else {
        list.head = p;
        p.data = str.slice(nb);
      }
      break;
    }
    ++c;
  }
  list.length -= c;
  return ret;
}

// Copies a specified amount of bytes from the list of buffered data chunks.
// This function is designed to be inlinable, so please take care when making
// changes to the function body.
function copyFromBuffer(n, list) {
  var ret = Buffer.allocUnsafe(n);
  var p = list.head;
  var c = 1;
  p.data.copy(ret);
  n -= p.data.length;
  while (p = p.next) {
    var buf = p.data;
    var nb = n > buf.length ? buf.length : n;
    buf.copy(ret, ret.length - n, 0, nb);
    n -= nb;
    if (n === 0) {
      if (nb === buf.length) {
        ++c;
        if (p.next) list.head = p.next;else list.head = list.tail = null;
      } else {
        list.head = p;
        p.data = buf.slice(nb);
      }
      break;
    }
    ++c;
  }
  list.length -= c;
  return ret;
}

function endReadable(stream) {
  var state = stream._readableState;

  // If we get here before consuming all the bytes, then that is a
  // bug in node.  Should never happen.
  if (state.length > 0) throw new Error('"endReadable()" called on non-empty stream');

  if (!state.endEmitted) {
    state.ended = true;
    processNextTick(endReadableNT, state, stream);
  }
}

function endReadableNT(state, stream) {
  // Check that we didn't get one last unshift.
  if (!state.endEmitted && state.length === 0) {
    state.endEmitted = true;
    stream.readable = false;
    stream.emit('end');
  }
}

function forEach(xs, f) {
  for (var i = 0, l = xs.length; i < l; i++) {
    f(xs[i], i);
  }
}

function indexOf(xs, x) {
  for (var i = 0, l = xs.length; i < l; i++) {
    if (xs[i] === x) return i;
  }
  return -1;
}
/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(17), __webpack_require__(22)))

/***/ }),
/* 42 */
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__(32).EventEmitter;


/***/ }),
/* 43 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(global) {/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
/* eslint-disable no-proto */



var base64 = __webpack_require__(73)
var ieee754 = __webpack_require__(74)
var isArray = __webpack_require__(75)

exports.Buffer = Buffer
exports.SlowBuffer = SlowBuffer
exports.INSPECT_MAX_BYTES = 50

/**
 * If `Buffer.TYPED_ARRAY_SUPPORT`:
 *   === true    Use Uint8Array implementation (fastest)
 *   === false   Use Object implementation (most compatible, even IE6)
 *
 * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,
 * Opera 11.6+, iOS 4.2+.
 *
 * Due to various browser bugs, sometimes the Object implementation will be used even
 * when the browser supports typed arrays.
 *
 * Note:
 *
 *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,
 *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.
 *
 *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.
 *
 *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of
 *     incorrect length in some situations.

 * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they
 * get the Object implementation, which is slower but behaves correctly.
 */
Buffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined
  ? global.TYPED_ARRAY_SUPPORT
  : typedArraySupport()

/*
 * Export kMaxLength after typed array support is determined.
 */
exports.kMaxLength = kMaxLength()

function typedArraySupport () {
  try {
    var arr = new Uint8Array(1)
    arr.__proto__ = {__proto__: Uint8Array.prototype, foo: function () { return 42 }}
    return arr.foo() === 42 && // typed array instances can be augmented
        typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`
        arr.subarray(1, 1).byteLength === 0 // ie10 has broken `subarray`
  } catch (e) {
    return false
  }
}

function kMaxLength () {
  return Buffer.TYPED_ARRAY_SUPPORT
    ? 0x7fffffff
    : 0x3fffffff
}

function createBuffer (that, length) {
  if (kMaxLength() < length) {
    throw new RangeError('Invalid typed array length')
  }
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    // Return an augmented `Uint8Array` instance, for best performance
    that = new Uint8Array(length)
    that.__proto__ = Buffer.prototype
  } else {
    // Fallback: Return an object instance of the Buffer class
    if (that === null) {
      that = new Buffer(length)
    }
    that.length = length
  }

  return that
}

/**
 * The Buffer constructor returns instances of `Uint8Array` that have their
 * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of
 * `Uint8Array`, so the returned instances will have all the node `Buffer` methods
 * and the `Uint8Array` methods. Square bracket notation works as expected -- it
 * returns a single octet.
 *
 * The `Uint8Array` prototype remains unmodified.
 */

function Buffer (arg, encodingOrOffset, length) {
  if (!Buffer.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer)) {
    return new Buffer(arg, encodingOrOffset, length)
  }

  // Common case.
  if (typeof arg === 'number') {
    if (typeof encodingOrOffset === 'string') {
      throw new Error(
        'If encoding is specified then the first argument must be a string'
      )
    }
    return allocUnsafe(this, arg)
  }
  return from(this, arg, encodingOrOffset, length)
}

Buffer.poolSize = 8192 // not used by this implementation

// TODO: Legacy, not needed anymore. Remove in next major version.
Buffer._augment = function (arr) {
  arr.__proto__ = Buffer.prototype
  return arr
}

function from (that, value, encodingOrOffset, length) {
  if (typeof value === 'number') {
    throw new TypeError('"value" argument must not be a number')
  }

  if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {
    return fromArrayBuffer(that, value, encodingOrOffset, length)
  }

  if (typeof value === 'string') {
    return fromString(that, value, encodingOrOffset)
  }

  return fromObject(that, value)
}

/**
 * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError
 * if value is a number.
 * Buffer.from(str[, encoding])
 * Buffer.from(array)
 * Buffer.from(buffer)
 * Buffer.from(arrayBuffer[, byteOffset[, length]])
 **/
Buffer.from = function (value, encodingOrOffset, length) {
  return from(null, value, encodingOrOffset, length)
}

if (Buffer.TYPED_ARRAY_SUPPORT) {
  Buffer.prototype.__proto__ = Uint8Array.prototype
  Buffer.__proto__ = Uint8Array
  if (typeof Symbol !== 'undefined' && Symbol.species &&
      Buffer[Symbol.species] === Buffer) {
    // Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97
    Object.defineProperty(Buffer, Symbol.species, {
      value: null,
      configurable: true
    })
  }
}

function assertSize (size) {
  if (typeof size !== 'number') {
    throw new TypeError('"size" argument must be a number')
  } else if (size < 0) {
    throw new RangeError('"size" argument must not be negative')
  }
}

function alloc (that, size, fill, encoding) {
  assertSize(size)
  if (size <= 0) {
    return createBuffer(that, size)
  }
  if (fill !== undefined) {
    // Only pay attention to encoding if it's a string. This
    // prevents accidentally sending in a number that would
    // be interpretted as a start offset.
    return typeof encoding === 'string'
      ? createBuffer(that, size).fill(fill, encoding)
      : createBuffer(that, size).fill(fill)
  }
  return createBuffer(that, size)
}

/**
 * Creates a new filled Buffer instance.
 * alloc(size[, fill[, encoding]])
 **/
Buffer.alloc = function (size, fill, encoding) {
  return alloc(null, size, fill, encoding)
}

function allocUnsafe (that, size) {
  assertSize(size)
  that = createBuffer(that, size < 0 ? 0 : checked(size) | 0)
  if (!Buffer.TYPED_ARRAY_SUPPORT) {
    for (var i = 0; i < size; ++i) {
      that[i] = 0
    }
  }
  return that
}

/**
 * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.
 * */
Buffer.allocUnsafe = function (size) {
  return allocUnsafe(null, size)
}
/**
 * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.
 */
Buffer.allocUnsafeSlow = function (size) {
  return allocUnsafe(null, size)
}

function fromString (that, string, encoding) {
  if (typeof encoding !== 'string' || encoding === '') {
    encoding = 'utf8'
  }

  if (!Buffer.isEncoding(encoding)) {
    throw new TypeError('"encoding" must be a valid string encoding')
  }

  var length = byteLength(string, encoding) | 0
  that = createBuffer(that, length)

  var actual = that.write(string, encoding)

  if (actual !== length) {
    // Writing a hex string, for example, that contains invalid characters will
    // cause everything after the first invalid character to be ignored. (e.g.
    // 'abxxcd' will be treated as 'ab')
    that = that.slice(0, actual)
  }

  return that
}

function fromArrayLike (that, array) {
  var length = array.length < 0 ? 0 : checked(array.length) | 0
  that = createBuffer(that, length)
  for (var i = 0; i < length; i += 1) {
    that[i] = array[i] & 255
  }
  return that
}

function fromArrayBuffer (that, array, byteOffset, length) {
  array.byteLength // this throws if `array` is not a valid ArrayBuffer

  if (byteOffset < 0 || array.byteLength < byteOffset) {
    throw new RangeError('\'offset\' is out of bounds')
  }

  if (array.byteLength < byteOffset + (length || 0)) {
    throw new RangeError('\'length\' is out of bounds')
  }

  if (byteOffset === undefined && length === undefined) {
    array = new Uint8Array(array)
  } else if (length === undefined) {
    array = new Uint8Array(array, byteOffset)
  } else {
    array = new Uint8Array(array, byteOffset, length)
  }

  if (Buffer.TYPED_ARRAY_SUPPORT) {
    // Return an augmented `Uint8Array` instance, for best performance
    that = array
    that.__proto__ = Buffer.prototype
  } else {
    // Fallback: Return an object instance of the Buffer class
    that = fromArrayLike(that, array)
  }
  return that
}

function fromObject (that, obj) {
  if (Buffer.isBuffer(obj)) {
    var len = checked(obj.length) | 0
    that = createBuffer(that, len)

    if (that.length === 0) {
      return that
    }

    obj.copy(that, 0, 0, len)
    return that
  }

  if (obj) {
    if ((typeof ArrayBuffer !== 'undefined' &&
        obj.buffer instanceof ArrayBuffer) || 'length' in obj) {
      if (typeof obj.length !== 'number' || isnan(obj.length)) {
        return createBuffer(that, 0)
      }
      return fromArrayLike(that, obj)
    }

    if (obj.type === 'Buffer' && isArray(obj.data)) {
      return fromArrayLike(that, obj.data)
    }
  }

  throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')
}

function checked (length) {
  // Note: cannot use `length < kMaxLength()` here because that fails when
  // length is NaN (which is otherwise coerced to zero.)
  if (length >= kMaxLength()) {
    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +
                         'size: 0x' + kMaxLength().toString(16) + ' bytes')
  }
  return length | 0
}

function SlowBuffer (length) {
  if (+length != length) { // eslint-disable-line eqeqeq
    length = 0
  }
  return Buffer.alloc(+length)
}

Buffer.isBuffer = function isBuffer (b) {
  return !!(b != null && b._isBuffer)
}

Buffer.compare = function compare (a, b) {
  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {
    throw new TypeError('Arguments must be Buffers')
  }

  if (a === b) return 0

  var x = a.length
  var y = b.length

  for (var i = 0, len = Math.min(x, y); i < len; ++i) {
    if (a[i] !== b[i]) {
      x = a[i]
      y = b[i]
      break
    }
  }

  if (x < y) return -1
  if (y < x) return 1
  return 0
}

Buffer.isEncoding = function isEncoding (encoding) {
  switch (String(encoding).toLowerCase()) {
    case 'hex':
    case 'utf8':
    case 'utf-8':
    case 'ascii':
    case 'latin1':
    case 'binary':
    case 'base64':
    case 'ucs2':
    case 'ucs-2':
    case 'utf16le':
    case 'utf-16le':
      return true
    default:
      return false
  }
}

Buffer.concat = function concat (list, length) {
  if (!isArray(list)) {
    throw new TypeError('"list" argument must be an Array of Buffers')
  }

  if (list.length === 0) {
    return Buffer.alloc(0)
  }

  var i
  if (length === undefined) {
    length = 0
    for (i = 0; i < list.length; ++i) {
      length += list[i].length
    }
  }

  var buffer = Buffer.allocUnsafe(length)
  var pos = 0
  for (i = 0; i < list.length; ++i) {
    var buf = list[i]
    if (!Buffer.isBuffer(buf)) {
      throw new TypeError('"list" argument must be an Array of Buffers')
    }
    buf.copy(buffer, pos)
    pos += buf.length
  }
  return buffer
}

function byteLength (string, encoding) {
  if (Buffer.isBuffer(string)) {
    return string.length
  }
  if (typeof ArrayBuffer !== 'undefined' && typeof ArrayBuffer.isView === 'function' &&
      (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)) {
    return string.byteLength
  }
  if (typeof string !== 'string') {
    string = '' + string
  }

  var len = string.length
  if (len === 0) return 0

  // Use a for loop to avoid recursion
  var loweredCase = false
  for (;;) {
    switch (encoding) {
      case 'ascii':
      case 'latin1':
      case 'binary':
        return len
      case 'utf8':
      case 'utf-8':
      case undefined:
        return utf8ToBytes(string).length
      case 'ucs2':
      case 'ucs-2':
      case 'utf16le':
      case 'utf-16le':
        return len * 2
      case 'hex':
        return len >>> 1
      case 'base64':
        return base64ToBytes(string).length
      default:
        if (loweredCase) return utf8ToBytes(string).length // assume utf8
        encoding = ('' + encoding).toLowerCase()
        loweredCase = true
    }
  }
}
Buffer.byteLength = byteLength

function slowToString (encoding, start, end) {
  var loweredCase = false

  // No need to verify that "this.length <= MAX_UINT32" since it's a read-only
  // property of a typed array.

  // This behaves neither like String nor Uint8Array in that we set start/end
  // to their upper/lower bounds if the value passed is out of range.
  // undefined is handled specially as per ECMA-262 6th Edition,
  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.
  if (start === undefined || start < 0) {
    start = 0
  }
  // Return early if start > this.length. Done here to prevent potential uint32
  // coercion fail below.
  if (start > this.length) {
    return ''
  }

  if (end === undefined || end > this.length) {
    end = this.length
  }

  if (end <= 0) {
    return ''
  }

  // Force coersion to uint32. This will also coerce falsey/NaN values to 0.
  end >>>= 0
  start >>>= 0

  if (end <= start) {
    return ''
  }

  if (!encoding) encoding = 'utf8'

  while (true) {
    switch (encoding) {
      case 'hex':
        return hexSlice(this, start, end)

      case 'utf8':
      case 'utf-8':
        return utf8Slice(this, start, end)

      case 'ascii':
        return asciiSlice(this, start, end)

      case 'latin1':
      case 'binary':
        return latin1Slice(this, start, end)

      case 'base64':
        return base64Slice(this, start, end)

      case 'ucs2':
      case 'ucs-2':
      case 'utf16le':
      case 'utf-16le':
        return utf16leSlice(this, start, end)

      default:
        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)
        encoding = (encoding + '').toLowerCase()
        loweredCase = true
    }
  }
}

// The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect
// Buffer instances.
Buffer.prototype._isBuffer = true

function swap (b, n, m) {
  var i = b[n]
  b[n] = b[m]
  b[m] = i
}

Buffer.prototype.swap16 = function swap16 () {
  var len = this.length
  if (len % 2 !== 0) {
    throw new RangeError('Buffer size must be a multiple of 16-bits')
  }
  for (var i = 0; i < len; i += 2) {
    swap(this, i, i + 1)
  }
  return this
}

Buffer.prototype.swap32 = function swap32 () {
  var len = this.length
  if (len % 4 !== 0) {
    throw new RangeError('Buffer size must be a multiple of 32-bits')
  }
  for (var i = 0; i < len; i += 4) {
    swap(this, i, i + 3)
    swap(this, i + 1, i + 2)
  }
  return this
}

Buffer.prototype.swap64 = function swap64 () {
  var len = this.length
  if (len % 8 !== 0) {
    throw new RangeError('Buffer size must be a multiple of 64-bits')
  }
  for (var i = 0; i < len; i += 8) {
    swap(this, i, i + 7)
    swap(this, i + 1, i + 6)
    swap(this, i + 2, i + 5)
    swap(this, i + 3, i + 4)
  }
  return this
}

Buffer.prototype.toString = function toString () {
  var length = this.length | 0
  if (length === 0) return ''
  if (arguments.length === 0) return utf8Slice(this, 0, length)
  return slowToString.apply(this, arguments)
}

Buffer.prototype.equals = function equals (b) {
  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')
  if (this === b) return true
  return Buffer.compare(this, b) === 0
}

Buffer.prototype.inspect = function inspect () {
  var str = ''
  var max = exports.INSPECT_MAX_BYTES
  if (this.length > 0) {
    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')
    if (this.length > max) str += ' ... '
  }
  return '<Buffer ' + str + '>'
}

Buffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {
  if (!Buffer.isBuffer(target)) {
    throw new TypeError('Argument must be a Buffer')
  }

  if (start === undefined) {
    start = 0
  }
  if (end === undefined) {
    end = target ? target.length : 0
  }
  if (thisStart === undefined) {
    thisStart = 0
  }
  if (thisEnd === undefined) {
    thisEnd = this.length
  }

  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {
    throw new RangeError('out of range index')
  }

  if (thisStart >= thisEnd && start >= end) {
    return 0
  }
  if (thisStart >= thisEnd) {
    return -1
  }
  if (start >= end) {
    return 1
  }

  start >>>= 0
  end >>>= 0
  thisStart >>>= 0
  thisEnd >>>= 0

  if (this === target) return 0

  var x = thisEnd - thisStart
  var y = end - start
  var len = Math.min(x, y)

  var thisCopy = this.slice(thisStart, thisEnd)
  var targetCopy = target.slice(start, end)

  for (var i = 0; i < len; ++i) {
    if (thisCopy[i] !== targetCopy[i]) {
      x = thisCopy[i]
      y = targetCopy[i]
      break
    }
  }

  if (x < y) return -1
  if (y < x) return 1
  return 0
}

// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,
// OR the last index of `val` in `buffer` at offset <= `byteOffset`.
//
// Arguments:
// - buffer - a Buffer to search
// - val - a string, Buffer, or number
// - byteOffset - an index into `buffer`; will be clamped to an int32
// - encoding - an optional encoding, relevant is val is a string
// - dir - true for indexOf, false for lastIndexOf
function bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {
  // Empty buffer means no match
  if (buffer.length === 0) return -1

  // Normalize byteOffset
  if (typeof byteOffset === 'string') {
    encoding = byteOffset
    byteOffset = 0
  } else if (byteOffset > 0x7fffffff) {
    byteOffset = 0x7fffffff
  } else if (byteOffset < -0x80000000) {
    byteOffset = -0x80000000
  }
  byteOffset = +byteOffset  // Coerce to Number.
  if (isNaN(byteOffset)) {
    // byteOffset: it it's undefined, null, NaN, "foo", etc, search whole buffer
    byteOffset = dir ? 0 : (buffer.length - 1)
  }

  // Normalize byteOffset: negative offsets start from the end of the buffer
  if (byteOffset < 0) byteOffset = buffer.length + byteOffset
  if (byteOffset >= buffer.length) {
    if (dir) return -1
    else byteOffset = buffer.length - 1
  } else if (byteOffset < 0) {
    if (dir) byteOffset = 0
    else return -1
  }

  // Normalize val
  if (typeof val === 'string') {
    val = Buffer.from(val, encoding)
  }

  // Finally, search either indexOf (if dir is true) or lastIndexOf
  if (Buffer.isBuffer(val)) {
    // Special case: looking for empty string/buffer always fails
    if (val.length === 0) {
      return -1
    }
    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)
  } else if (typeof val === 'number') {
    val = val & 0xFF // Search for a byte value [0-255]
    if (Buffer.TYPED_ARRAY_SUPPORT &&
        typeof Uint8Array.prototype.indexOf === 'function') {
      if (dir) {
        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)
      } else {
        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)
      }
    }
    return arrayIndexOf(buffer, [ val ], byteOffset, encoding, dir)
  }

  throw new TypeError('val must be string, number or Buffer')
}

function arrayIndexOf (arr, val, byteOffset, encoding, dir) {
  var indexSize = 1
  var arrLength = arr.length
  var valLength = val.length

  if (encoding !== undefined) {
    encoding = String(encoding).toLowerCase()
    if (encoding === 'ucs2' || encoding === 'ucs-2' ||
        encoding === 'utf16le' || encoding === 'utf-16le') {
      if (arr.length < 2 || val.length < 2) {
        return -1
      }
      indexSize = 2
      arrLength /= 2
      valLength /= 2
      byteOffset /= 2
    }
  }

  function read (buf, i) {
    if (indexSize === 1) {
      return buf[i]
    } else {
      return buf.readUInt16BE(i * indexSize)
    }
  }

  var i
  if (dir) {
    var foundIndex = -1
    for (i = byteOffset; i < arrLength; i++) {
      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {
        if (foundIndex === -1) foundIndex = i
        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize
      } else {
        if (foundIndex !== -1) i -= i - foundIndex
        foundIndex = -1
      }
    }
  } else {
    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength
    for (i = byteOffset; i >= 0; i--) {
      var found = true
      for (var j = 0; j < valLength; j++) {
        if (read(arr, i + j) !== read(val, j)) {
          found = false
          break
        }
      }
      if (found) return i
    }
  }

  return -1
}

Buffer.prototype.includes = function includes (val, byteOffset, encoding) {
  return this.indexOf(val, byteOffset, encoding) !== -1
}

Buffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {
  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)
}

Buffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {
  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)
}

function hexWrite (buf, string, offset, length) {
  offset = Number(offset) || 0
  var remaining = buf.length - offset
  if (!length) {
    length = remaining
  } else {
    length = Number(length)
    if (length > remaining) {
      length = remaining
    }
  }

  // must be an even number of digits
  var strLen = string.length
  if (strLen % 2 !== 0) throw new TypeError('Invalid hex string')

  if (length > strLen / 2) {
    length = strLen / 2
  }
  for (var i = 0; i < length; ++i) {
    var parsed = parseInt(string.substr(i * 2, 2), 16)
    if (isNaN(parsed)) return i
    buf[offset + i] = parsed
  }
  return i
}

function utf8Write (buf, string, offset, length) {
  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)
}

function asciiWrite (buf, string, offset, length) {
  return blitBuffer(asciiToBytes(string), buf, offset, length)
}

function latin1Write (buf, string, offset, length) {
  return asciiWrite(buf, string, offset, length)
}

function base64Write (buf, string, offset, length) {
  return blitBuffer(base64ToBytes(string), buf, offset, length)
}

function ucs2Write (buf, string, offset, length) {
  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)
}

Buffer.prototype.write = function write (string, offset, length, encoding) {
  // Buffer#write(string)
  if (offset === undefined) {
    encoding = 'utf8'
    length = this.length
    offset = 0
  // Buffer#write(string, encoding)
  } else if (length === undefined && typeof offset === 'string') {
    encoding = offset
    length = this.length
    offset = 0
  // Buffer#write(string, offset[, length][, encoding])
  } else if (isFinite(offset)) {
    offset = offset | 0
    if (isFinite(length)) {
      length = length | 0
      if (encoding === undefined) encoding = 'utf8'
    } else {
      encoding = length
      length = undefined
    }
  // legacy write(string, encoding, offset, length) - remove in v0.13
  } else {
    throw new Error(
      'Buffer.write(string, encoding, offset[, length]) is no longer supported'
    )
  }

  var remaining = this.length - offset
  if (length === undefined || length > remaining) length = remaining

  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {
    throw new RangeError('Attempt to write outside buffer bounds')
  }

  if (!encoding) encoding = 'utf8'

  var loweredCase = false
  for (;;) {
    switch (encoding) {
      case 'hex':
        return hexWrite(this, string, offset, length)

      case 'utf8':
      case 'utf-8':
        return utf8Write(this, string, offset, length)

      case 'ascii':
        return asciiWrite(this, string, offset, length)

      case 'latin1':
      case 'binary':
        return latin1Write(this, string, offset, length)

      case 'base64':
        // Warning: maxLength not taken into account in base64Write
        return base64Write(this, string, offset, length)

      case 'ucs2':
      case 'ucs-2':
      case 'utf16le':
      case 'utf-16le':
        return ucs2Write(this, string, offset, length)

      default:
        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)
        encoding = ('' + encoding).toLowerCase()
        loweredCase = true
    }
  }
}

Buffer.prototype.toJSON = function toJSON () {
  return {
    type: 'Buffer',
    data: Array.prototype.slice.call(this._arr || this, 0)
  }
}

function base64Slice (buf, start, end) {
  if (start === 0 && end === buf.length) {
    return base64.fromByteArray(buf)
  } else {
    return base64.fromByteArray(buf.slice(start, end))
  }
}

function utf8Slice (buf, start, end) {
  end = Math.min(buf.length, end)
  var res = []

  var i = start
  while (i < end) {
    var firstByte = buf[i]
    var codePoint = null
    var bytesPerSequence = (firstByte > 0xEF) ? 4
      : (firstByte > 0xDF) ? 3
      : (firstByte > 0xBF) ? 2
      : 1

    if (i + bytesPerSequence <= end) {
      var secondByte, thirdByte, fourthByte, tempCodePoint

      switch (bytesPerSequence) {
        case 1:
          if (firstByte < 0x80) {
            codePoint = firstByte
          }
          break
        case 2:
          secondByte = buf[i + 1]
          if ((secondByte & 0xC0) === 0x80) {
            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)
            if (tempCodePoint > 0x7F) {
              codePoint = tempCodePoint
            }
          }
          break
        case 3:
          secondByte = buf[i + 1]
          thirdByte = buf[i + 2]
          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {
            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)
            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {
              codePoint = tempCodePoint
            }
          }
          break
        case 4:
          secondByte = buf[i + 1]
          thirdByte = buf[i + 2]
          fourthByte = buf[i + 3]
          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {
            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)
            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {
              codePoint = tempCodePoint
            }
          }
      }
    }

    if (codePoint === null) {
      // we did not generate a valid codePoint so insert a
      // replacement char (U+FFFD) and advance only 1 byte
      codePoint = 0xFFFD
      bytesPerSequence = 1
    } else if (codePoint > 0xFFFF) {
      // encode to utf16 (surrogate pair dance)
      codePoint -= 0x10000
      res.push(codePoint >>> 10 & 0x3FF | 0xD800)
      codePoint = 0xDC00 | codePoint & 0x3FF
    }

    res.push(codePoint)
    i += bytesPerSequence
  }

  return decodeCodePointsArray(res)
}

// Based on http://stackoverflow.com/a/22747272/680742, the browser with
// the lowest limit is Chrome, with 0x10000 args.
// We go 1 magnitude less, for safety
var MAX_ARGUMENTS_LENGTH = 0x1000

function decodeCodePointsArray (codePoints) {
  var len = codePoints.length
  if (len <= MAX_ARGUMENTS_LENGTH) {
    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()
  }

  // Decode in chunks to avoid "call stack size exceeded".
  var res = ''
  var i = 0
  while (i < len) {
    res += String.fromCharCode.apply(
      String,
      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)
    )
  }
  return res
}

function asciiSlice (buf, start, end) {
  var ret = ''
  end = Math.min(buf.length, end)

  for (var i = start; i < end; ++i) {
    ret += String.fromCharCode(buf[i] & 0x7F)
  }
  return ret
}

function latin1Slice (buf, start, end) {
  var ret = ''
  end = Math.min(buf.length, end)

  for (var i = start; i < end; ++i) {
    ret += String.fromCharCode(buf[i])
  }
  return ret
}

function hexSlice (buf, start, end) {
  var len = buf.length

  if (!start || start < 0) start = 0
  if (!end || end < 0 || end > len) end = len

  var out = ''
  for (var i = start; i < end; ++i) {
    out += toHex(buf[i])
  }
  return out
}

function utf16leSlice (buf, start, end) {
  var bytes = buf.slice(start, end)
  var res = ''
  for (var i = 0; i < bytes.length; i += 2) {
    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)
  }
  return res
}

Buffer.prototype.slice = function slice (start, end) {
  var len = this.length
  start = ~~start
  end = end === undefined ? len : ~~end

  if (start < 0) {
    start += len
    if (start < 0) start = 0
  } else if (start > len) {
    start = len
  }

  if (end < 0) {
    end += len
    if (end < 0) end = 0
  } else if (end > len) {
    end = len
  }

  if (end < start) end = start

  var newBuf
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    newBuf = this.subarray(start, end)
    newBuf.__proto__ = Buffer.prototype
  } else {
    var sliceLen = end - start
    newBuf = new Buffer(sliceLen, undefined)
    for (var i = 0; i < sliceLen; ++i) {
      newBuf[i] = this[i + start]
    }
  }

  return newBuf
}

/*
 * Need to make sure that buffer isn't trying to write out of bounds.
 */
function checkOffset (offset, ext, length) {
  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')
  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')
}

Buffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {
  offset = offset | 0
  byteLength = byteLength | 0
  if (!noAssert) checkOffset(offset, byteLength, this.length)

  var val = this[offset]
  var mul = 1
  var i = 0
  while (++i < byteLength && (mul *= 0x100)) {
    val += this[offset + i] * mul
  }

  return val
}

Buffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {
  offset = offset | 0
  byteLength = byteLength | 0
  if (!noAssert) {
    checkOffset(offset, byteLength, this.length)
  }

  var val = this[offset + --byteLength]
  var mul = 1
  while (byteLength > 0 && (mul *= 0x100)) {
    val += this[offset + --byteLength] * mul
  }

  return val
}

Buffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 1, this.length)
  return this[offset]
}

Buffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 2, this.length)
  return this[offset] | (this[offset + 1] << 8)
}

Buffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 2, this.length)
  return (this[offset] << 8) | this[offset + 1]
}

Buffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 4, this.length)

  return ((this[offset]) |
      (this[offset + 1] << 8) |
      (this[offset + 2] << 16)) +
      (this[offset + 3] * 0x1000000)
}

Buffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 4, this.length)

  return (this[offset] * 0x1000000) +
    ((this[offset + 1] << 16) |
    (this[offset + 2] << 8) |
    this[offset + 3])
}

Buffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {
  offset = offset | 0
  byteLength = byteLength | 0
  if (!noAssert) checkOffset(offset, byteLength, this.length)

  var val = this[offset]
  var mul = 1
  var i = 0
  while (++i < byteLength && (mul *= 0x100)) {
    val += this[offset + i] * mul
  }
  mul *= 0x80

  if (val >= mul) val -= Math.pow(2, 8 * byteLength)

  return val
}

Buffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {
  offset = offset | 0
  byteLength = byteLength | 0
  if (!noAssert) checkOffset(offset, byteLength, this.length)

  var i = byteLength
  var mul = 1
  var val = this[offset + --i]
  while (i > 0 && (mul *= 0x100)) {
    val += this[offset + --i] * mul
  }
  mul *= 0x80

  if (val >= mul) val -= Math.pow(2, 8 * byteLength)

  return val
}

Buffer.prototype.readInt8 = function readInt8 (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 1, this.length)
  if (!(this[offset] & 0x80)) return (this[offset])
  return ((0xff - this[offset] + 1) * -1)
}

Buffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 2, this.length)
  var val = this[offset] | (this[offset + 1] << 8)
  return (val & 0x8000) ? val | 0xFFFF0000 : val
}

Buffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 2, this.length)
  var val = this[offset + 1] | (this[offset] << 8)
  return (val & 0x8000) ? val | 0xFFFF0000 : val
}

Buffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 4, this.length)

  return (this[offset]) |
    (this[offset + 1] << 8) |
    (this[offset + 2] << 16) |
    (this[offset + 3] << 24)
}

Buffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 4, this.length)

  return (this[offset] << 24) |
    (this[offset + 1] << 16) |
    (this[offset + 2] << 8) |
    (this[offset + 3])
}

Buffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 4, this.length)
  return ieee754.read(this, offset, true, 23, 4)
}

Buffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 4, this.length)
  return ieee754.read(this, offset, false, 23, 4)
}

Buffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 8, this.length)
  return ieee754.read(this, offset, true, 52, 8)
}

Buffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 8, this.length)
  return ieee754.read(this, offset, false, 52, 8)
}

function checkInt (buf, value, offset, ext, max, min) {
  if (!Buffer.isBuffer(buf)) throw new TypeError('"buffer" argument must be a Buffer instance')
  if (value > max || value < min) throw new RangeError('"value" argument is out of bounds')
  if (offset + ext > buf.length) throw new RangeError('Index out of range')
}

Buffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {
  value = +value
  offset = offset | 0
  byteLength = byteLength | 0
  if (!noAssert) {
    var maxBytes = Math.pow(2, 8 * byteLength) - 1
    checkInt(this, value, offset, byteLength, maxBytes, 0)
  }

  var mul = 1
  var i = 0
  this[offset] = value & 0xFF
  while (++i < byteLength && (mul *= 0x100)) {
    this[offset + i] = (value / mul) & 0xFF
  }

  return offset + byteLength
}

Buffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {
  value = +value
  offset = offset | 0
  byteLength = byteLength | 0
  if (!noAssert) {
    var maxBytes = Math.pow(2, 8 * byteLength) - 1
    checkInt(this, value, offset, byteLength, maxBytes, 0)
  }

  var i = byteLength - 1
  var mul = 1
  this[offset + i] = value & 0xFF
  while (--i >= 0 && (mul *= 0x100)) {
    this[offset + i] = (value / mul) & 0xFF
  }

  return offset + byteLength
}

Buffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)
  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)
  this[offset] = (value & 0xff)
  return offset + 1
}

function objectWriteUInt16 (buf, value, offset, littleEndian) {
  if (value < 0) value = 0xffff + value + 1
  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; ++i) {
    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>
      (littleEndian ? i : 1 - i) * 8
  }
}

Buffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value & 0xff)
    this[offset + 1] = (value >>> 8)
  } else {
    objectWriteUInt16(this, value, offset, true)
  }
  return offset + 2
}

Buffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value >>> 8)
    this[offset + 1] = (value & 0xff)
  } else {
    objectWriteUInt16(this, value, offset, false)
  }
  return offset + 2
}

function objectWriteUInt32 (buf, value, offset, littleEndian) {
  if (value < 0) value = 0xffffffff + value + 1
  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; ++i) {
    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff
  }
}

Buffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset + 3] = (value >>> 24)
    this[offset + 2] = (value >>> 16)
    this[offset + 1] = (value >>> 8)
    this[offset] = (value & 0xff)
  } else {
    objectWriteUInt32(this, value, offset, true)
  }
  return offset + 4
}

Buffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value >>> 24)
    this[offset + 1] = (value >>> 16)
    this[offset + 2] = (value >>> 8)
    this[offset + 3] = (value & 0xff)
  } else {
    objectWriteUInt32(this, value, offset, false)
  }
  return offset + 4
}

Buffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) {
    var limit = Math.pow(2, 8 * byteLength - 1)

    checkInt(this, value, offset, byteLength, limit - 1, -limit)
  }

  var i = 0
  var mul = 1
  var sub = 0
  this[offset] = value & 0xFF
  while (++i < byteLength && (mul *= 0x100)) {
    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {
      sub = 1
    }
    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF
  }

  return offset + byteLength
}

Buffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) {
    var limit = Math.pow(2, 8 * byteLength - 1)

    checkInt(this, value, offset, byteLength, limit - 1, -limit)
  }

  var i = byteLength - 1
  var mul = 1
  var sub = 0
  this[offset + i] = value & 0xFF
  while (--i >= 0 && (mul *= 0x100)) {
    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {
      sub = 1
    }
    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF
  }

  return offset + byteLength
}

Buffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)
  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)
  if (value < 0) value = 0xff + value + 1
  this[offset] = (value & 0xff)
  return offset + 1
}

Buffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value & 0xff)
    this[offset + 1] = (value >>> 8)
  } else {
    objectWriteUInt16(this, value, offset, true)
  }
  return offset + 2
}

Buffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value >>> 8)
    this[offset + 1] = (value & 0xff)
  } else {
    objectWriteUInt16(this, value, offset, false)
  }
  return offset + 2
}

Buffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value & 0xff)
    this[offset + 1] = (value >>> 8)
    this[offset + 2] = (value >>> 16)
    this[offset + 3] = (value >>> 24)
  } else {
    objectWriteUInt32(this, value, offset, true)
  }
  return offset + 4
}

Buffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)
  if (value < 0) value = 0xffffffff + value + 1
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value >>> 24)
    this[offset + 1] = (value >>> 16)
    this[offset + 2] = (value >>> 8)
    this[offset + 3] = (value & 0xff)
  } else {
    objectWriteUInt32(this, value, offset, false)
  }
  return offset + 4
}

function checkIEEE754 (buf, value, offset, ext, max, min) {
  if (offset + ext > buf.length) throw new RangeError('Index out of range')
  if (offset < 0) throw new RangeError('Index out of range')
}

function writeFloat (buf, value, offset, littleEndian, noAssert) {
  if (!noAssert) {
    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)
  }
  ieee754.write(buf, value, offset, littleEndian, 23, 4)
  return offset + 4
}

Buffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {
  return writeFloat(this, value, offset, true, noAssert)
}

Buffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {
  return writeFloat(this, value, offset, false, noAssert)
}

function writeDouble (buf, value, offset, littleEndian, noAssert) {
  if (!noAssert) {
    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)
  }
  ieee754.write(buf, value, offset, littleEndian, 52, 8)
  return offset + 8
}

Buffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {
  return writeDouble(this, value, offset, true, noAssert)
}

Buffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {
  return writeDouble(this, value, offset, false, noAssert)
}

// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)
Buffer.prototype.copy = function copy (target, targetStart, start, end) {
  if (!start) start = 0
  if (!end && end !== 0) end = this.length
  if (targetStart >= target.length) targetStart = target.length
  if (!targetStart) targetStart = 0
  if (end > 0 && end < start) end = start

  // Copy 0 bytes; we're done
  if (end === start) return 0
  if (target.length === 0 || this.length === 0) return 0

  // Fatal error conditions
  if (targetStart < 0) {
    throw new RangeError('targetStart out of bounds')
  }
  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')
  if (end < 0) throw new RangeError('sourceEnd out of bounds')

  // Are we oob?
  if (end > this.length) end = this.length
  if (target.length - targetStart < end - start) {
    end = target.length - targetStart + start
  }

  var len = end - start
  var i

  if (this === target && start < targetStart && targetStart < end) {
    // descending copy from end
    for (i = len - 1; i >= 0; --i) {
      target[i + targetStart] = this[i + start]
    }
  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {
    // ascending copy from start
    for (i = 0; i < len; ++i) {
      target[i + targetStart] = this[i + start]
    }
  } else {
    Uint8Array.prototype.set.call(
      target,
      this.subarray(start, start + len),
      targetStart
    )
  }

  return len
}

// Usage:
//    buffer.fill(number[, offset[, end]])
//    buffer.fill(buffer[, offset[, end]])
//    buffer.fill(string[, offset[, end]][, encoding])
Buffer.prototype.fill = function fill (val, start, end, encoding) {
  // Handle string cases:
  if (typeof val === 'string') {
    if (typeof start === 'string') {
      encoding = start
      start = 0
      end = this.length
    } else if (typeof end === 'string') {
      encoding = end
      end = this.length
    }
    if (val.length === 1) {
      var code = val.charCodeAt(0)
      if (code < 256) {
        val = code
      }
    }
    if (encoding !== undefined && typeof encoding !== 'string') {
      throw new TypeError('encoding must be a string')
    }
    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {
      throw new TypeError('Unknown encoding: ' + encoding)
    }
  } else if (typeof val === 'number') {
    val = val & 255
  }

  // Invalid ranges are not set to a default, so can range check early.
  if (start < 0 || this.length < start || this.length < end) {
    throw new RangeError('Out of range index')
  }

  if (end <= start) {
    return this
  }

  start = start >>> 0
  end = end === undefined ? this.length : end >>> 0

  if (!val) val = 0

  var i
  if (typeof val === 'number') {
    for (i = start; i < end; ++i) {
      this[i] = val
    }
  } else {
    var bytes = Buffer.isBuffer(val)
      ? val
      : utf8ToBytes(new Buffer(val, encoding).toString())
    var len = bytes.length
    for (i = 0; i < end - start; ++i) {
      this[i + start] = bytes[i % len]
    }
  }

  return this
}

// HELPER FUNCTIONS
// ================

var INVALID_BASE64_RE = /[^+\/0-9A-Za-z-_]/g

function base64clean (str) {
  // Node strips out invalid characters like \n and \t from the string, base64-js does not
  str = stringtrim(str).replace(INVALID_BASE64_RE, '')
  // Node converts strings with length < 2 to ''
  if (str.length < 2) return ''
  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not
  while (str.length % 4 !== 0) {
    str = str + '='
  }
  return str
}

function stringtrim (str) {
  if (str.trim) return str.trim()
  return str.replace(/^\s+|\s+$/g, '')
}

function toHex (n) {
  if (n < 16) return '0' + n.toString(16)
  return n.toString(16)
}

function utf8ToBytes (string, units) {
  units = units || Infinity
  var codePoint
  var length = string.length
  var leadSurrogate = null
  var bytes = []

  for (var i = 0; i < length; ++i) {
    codePoint = string.charCodeAt(i)

    // is surrogate component
    if (codePoint > 0xD7FF && codePoint < 0xE000) {
      // last char was a lead
      if (!leadSurrogate) {
        // no lead yet
        if (codePoint > 0xDBFF) {
          // unexpected trail
          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)
          continue
        } else if (i + 1 === length) {
          // unpaired lead
          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)
          continue
        }

        // valid lead
        leadSurrogate = codePoint

        continue
      }

      // 2 leads in a row
      if (codePoint < 0xDC00) {
        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)
        leadSurrogate = codePoint
        continue
      }

      // valid surrogate pair
      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000
    } else if (leadSurrogate) {
      // valid bmp char, but last char was a lead
      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)
    }

    leadSurrogate = null

    // encode utf8
    if (codePoint < 0x80) {
      if ((units -= 1) < 0) break
      bytes.push(codePoint)
    } else if (codePoint < 0x800) {
      if ((units -= 2) < 0) break
      bytes.push(
        codePoint >> 0x6 | 0xC0,
        codePoint & 0x3F | 0x80
      )
    } else if (codePoint < 0x10000) {
      if ((units -= 3) < 0) break
      bytes.push(
        codePoint >> 0xC | 0xE0,
        codePoint >> 0x6 & 0x3F | 0x80,
        codePoint & 0x3F | 0x80
      )
    } else if (codePoint < 0x110000) {
      if ((units -= 4) < 0) break
      bytes.push(
        codePoint >> 0x12 | 0xF0,
        codePoint >> 0xC & 0x3F | 0x80,
        codePoint >> 0x6 & 0x3F | 0x80,
        codePoint & 0x3F | 0x80
      )
    } else {
      throw new Error('Invalid code point')
    }
  }

  return bytes
}

function asciiToBytes (str) {
  var byteArray = []
  for (var i = 0; i < str.length; ++i) {
    // Node's code seems to be doing this and not & 0x7F..
    byteArray.push(str.charCodeAt(i) & 0xFF)
  }
  return byteArray
}

function utf16leToBytes (str, units) {
  var c, hi, lo
  var byteArray = []
  for (var i = 0; i < str.length; ++i) {
    if ((units -= 2) < 0) break

    c = str.charCodeAt(i)
    hi = c >> 8
    lo = c % 256
    byteArray.push(lo)
    byteArray.push(hi)
  }

  return byteArray
}

function base64ToBytes (str) {
  return base64.toByteArray(base64clean(str))
}

function blitBuffer (src, dst, offset, length) {
  for (var i = 0; i < length; ++i) {
    if ((i + offset >= dst.length) || (i >= src.length)) break
    dst[i + offset] = src[i]
  }
  return i
}

function isnan (val) {
  return val !== val // eslint-disable-line no-self-compare
}

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(17)))

/***/ }),
/* 44 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/*<replacement>*/

var processNextTick = __webpack_require__(26);
/*</replacement>*/

// undocumented cb() API, needed for core, not for public API
function destroy(err, cb) {
  var _this = this;

  var readableDestroyed = this._readableState && this._readableState.destroyed;
  var writableDestroyed = this._writableState && this._writableState.destroyed;

  if (readableDestroyed || writableDestroyed) {
    if (cb) {
      cb(err);
    } else if (err && (!this._writableState || !this._writableState.errorEmitted)) {
      processNextTick(emitErrorNT, this, err);
    }
    return;
  }

  // we set destroyed to true before firing error callbacks in order
  // to make it re-entrance safe in case destroy() is called within callbacks

  if (this._readableState) {
    this._readableState.destroyed = true;
  }

  // if this is a duplex stream mark the writable part as destroyed as well
  if (this._writableState) {
    this._writableState.destroyed = true;
  }

  this._destroy(err || null, function (err) {
    if (!cb && err) {
      processNextTick(emitErrorNT, _this, err);
      if (_this._writableState) {
        _this._writableState.errorEmitted = true;
      }
    } else if (cb) {
      cb(err);
    }
  });
}

function undestroy() {
  if (this._readableState) {
    this._readableState.destroyed = false;
    this._readableState.reading = false;
    this._readableState.ended = false;
    this._readableState.endEmitted = false;
  }

  if (this._writableState) {
    this._writableState.destroyed = false;
    this._writableState.ended = false;
    this._writableState.ending = false;
    this._writableState.finished = false;
    this._writableState.errorEmitted = false;
  }
}

function emitErrorNT(self, err) {
  self.emit('error', err);
}

module.exports = {
  destroy: destroy,
  undestroy: undestroy
};

/***/ }),
/* 45 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var Buffer = __webpack_require__(27).Buffer;

var isEncoding = Buffer.isEncoding || function (encoding) {
  encoding = '' + encoding;
  switch (encoding && encoding.toLowerCase()) {
    case 'hex':case 'utf8':case 'utf-8':case 'ascii':case 'binary':case 'base64':case 'ucs2':case 'ucs-2':case 'utf16le':case 'utf-16le':case 'raw':
      return true;
    default:
      return false;
  }
};

function _normalizeEncoding(enc) {
  if (!enc) return 'utf8';
  var retried;
  while (true) {
    switch (enc) {
      case 'utf8':
      case 'utf-8':
        return 'utf8';
      case 'ucs2':
      case 'ucs-2':
      case 'utf16le':
      case 'utf-16le':
        return 'utf16le';
      case 'latin1':
      case 'binary':
        return 'latin1';
      case 'base64':
      case 'ascii':
      case 'hex':
        return enc;
      default:
        if (retried) return; // undefined
        enc = ('' + enc).toLowerCase();
        retried = true;
    }
  }
};

// Do not cache `Buffer.isEncoding` when checking encoding names as some
// modules monkey-patch it to support additional encodings
function normalizeEncoding(enc) {
  var nenc = _normalizeEncoding(enc);
  if (typeof nenc !== 'string' && (Buffer.isEncoding === isEncoding || !isEncoding(enc))) throw new Error('Unknown encoding: ' + enc);
  return nenc || enc;
}

// StringDecoder provides an interface for efficiently splitting a series of
// buffers into a series of JS strings without breaking apart multi-byte
// characters.
exports.StringDecoder = StringDecoder;
function StringDecoder(encoding) {
  this.encoding = normalizeEncoding(encoding);
  var nb;
  switch (this.encoding) {
    case 'utf16le':
      this.text = utf16Text;
      this.end = utf16End;
      nb = 4;
      break;
    case 'utf8':
      this.fillLast = utf8FillLast;
      nb = 4;
      break;
    case 'base64':
      this.text = base64Text;
      this.end = base64End;
      nb = 3;
      break;
    default:
      this.write = simpleWrite;
      this.end = simpleEnd;
      return;
  }
  this.lastNeed = 0;
  this.lastTotal = 0;
  this.lastChar = Buffer.allocUnsafe(nb);
}

StringDecoder.prototype.write = function (buf) {
  if (buf.length === 0) return '';
  var r;
  var i;
  if (this.lastNeed) {
    r = this.fillLast(buf);
    if (r === undefined) return '';
    i = this.lastNeed;
    this.lastNeed = 0;
  } else {
    i = 0;
  }
  if (i < buf.length) return r ? r + this.text(buf, i) : this.text(buf, i);
  return r || '';
};

StringDecoder.prototype.end = utf8End;

// Returns only complete characters in a Buffer
StringDecoder.prototype.text = utf8Text;

// Attempts to complete a partial non-UTF-8 character using bytes from a Buffer
StringDecoder.prototype.fillLast = function (buf) {
  if (this.lastNeed <= buf.length) {
    buf.copy(this.lastChar, this.lastTotal - this.lastNeed, 0, this.lastNeed);
    return this.lastChar.toString(this.encoding, 0, this.lastTotal);
  }
  buf.copy(this.lastChar, this.lastTotal - this.lastNeed, 0, buf.length);
  this.lastNeed -= buf.length;
};

// Checks the type of a UTF-8 byte, whether it's ASCII, a leading byte, or a
// continuation byte.
function utf8CheckByte(byte) {
  if (byte <= 0x7F) return 0;else if (byte >> 5 === 0x06) return 2;else if (byte >> 4 === 0x0E) return 3;else if (byte >> 3 === 0x1E) return 4;
  return -1;
}

// Checks at most 3 bytes at the end of a Buffer in order to detect an
// incomplete multi-byte UTF-8 character. The total number of bytes (2, 3, or 4)
// needed to complete the UTF-8 character (if applicable) are returned.
function utf8CheckIncomplete(self, buf, i) {
  var j = buf.length - 1;
  if (j < i) return 0;
  var nb = utf8CheckByte(buf[j]);
  if (nb >= 0) {
    if (nb > 0) self.lastNeed = nb - 1;
    return nb;
  }
  if (--j < i) return 0;
  nb = utf8CheckByte(buf[j]);
  if (nb >= 0) {
    if (nb > 0) self.lastNeed = nb - 2;
    return nb;
  }
  if (--j < i) return 0;
  nb = utf8CheckByte(buf[j]);
  if (nb >= 0) {
    if (nb > 0) {
      if (nb === 2) nb = 0;else self.lastNeed = nb - 3;
    }
    return nb;
  }
  return 0;
}

// Validates as many continuation bytes for a multi-byte UTF-8 character as
// needed or are available. If we see a non-continuation byte where we expect
// one, we "replace" the validated continuation bytes we've seen so far with
// UTF-8 replacement characters ('\ufffd'), to match v8's UTF-8 decoding
// behavior. The continuation byte check is included three times in the case
// where all of the continuation bytes for a character exist in the same buffer.
// It is also done this way as a slight performance increase instead of using a
// loop.
function utf8CheckExtraBytes(self, buf, p) {
  if ((buf[0] & 0xC0) !== 0x80) {
    self.lastNeed = 0;
    return '\ufffd'.repeat(p);
  }
  if (self.lastNeed > 1 && buf.length > 1) {
    if ((buf[1] & 0xC0) !== 0x80) {
      self.lastNeed = 1;
      return '\ufffd'.repeat(p + 1);
    }
    if (self.lastNeed > 2 && buf.length > 2) {
      if ((buf[2] & 0xC0) !== 0x80) {
        self.lastNeed = 2;
        return '\ufffd'.repeat(p + 2);
      }
    }
  }
}

// Attempts to complete a multi-byte UTF-8 character using bytes from a Buffer.
function utf8FillLast(buf) {
  var p = this.lastTotal - this.lastNeed;
  var r = utf8CheckExtraBytes(this, buf, p);
  if (r !== undefined) return r;
  if (this.lastNeed <= buf.length) {
    buf.copy(this.lastChar, p, 0, this.lastNeed);
    return this.lastChar.toString(this.encoding, 0, this.lastTotal);
  }
  buf.copy(this.lastChar, p, 0, buf.length);
  this.lastNeed -= buf.length;
}

// Returns all complete UTF-8 characters in a Buffer. If the Buffer ended on a
// partial character, the character's bytes are buffered until the required
// number of bytes are available.
function utf8Text(buf, i) {
  var total = utf8CheckIncomplete(this, buf, i);
  if (!this.lastNeed) return buf.toString('utf8', i);
  this.lastTotal = total;
  var end = buf.length - (total - this.lastNeed);
  buf.copy(this.lastChar, 0, end);
  return buf.toString('utf8', i, end);
}

// For UTF-8, a replacement character for each buffered byte of a (partial)
// character needs to be added to the output.
function utf8End(buf) {
  var r = buf && buf.length ? this.write(buf) : '';
  if (this.lastNeed) return r + '\ufffd'.repeat(this.lastTotal - this.lastNeed);
  return r;
}

// UTF-16LE typically needs two bytes per character, but even if we have an even
// number of bytes available, we need to check if we end on a leading/high
// surrogate. In that case, we need to wait for the next two bytes in order to
// decode the last character properly.
function utf16Text(buf, i) {
  if ((buf.length - i) % 2 === 0) {
    var r = buf.toString('utf16le', i);
    if (r) {
      var c = r.charCodeAt(r.length - 1);
      if (c >= 0xD800 && c <= 0xDBFF) {
        this.lastNeed = 2;
        this.lastTotal = 4;
        this.lastChar[0] = buf[buf.length - 2];
        this.lastChar[1] = buf[buf.length - 1];
        return r.slice(0, -1);
      }
    }
    return r;
  }
  this.lastNeed = 1;
  this.lastTotal = 2;
  this.lastChar[0] = buf[buf.length - 1];
  return buf.toString('utf16le', i, buf.length - 1);
}

// For UTF-16LE we do not explicitly append special replacement characters if we
// end on a partial character, we simply let v8 handle that.
function utf16End(buf) {
  var r = buf && buf.length ? this.write(buf) : '';
  if (this.lastNeed) {
    var end = this.lastTotal - this.lastNeed;
    return r + this.lastChar.toString('utf16le', 0, end);
  }
  return r;
}

function base64Text(buf, i) {
  var n = (buf.length - i) % 3;
  if (n === 0) return buf.toString('base64', i);
  this.lastNeed = 3 - n;
  this.lastTotal = 3;
  if (n === 1) {
    this.lastChar[0] = buf[buf.length - 1];
  } else {
    this.lastChar[0] = buf[buf.length - 2];
    this.lastChar[1] = buf[buf.length - 1];
  }
  return buf.toString('base64', i, buf.length - n);
}

function base64End(buf) {
  var r = buf && buf.length ? this.write(buf) : '';
  if (this.lastNeed) return r + this.lastChar.toString('base64', 0, 3 - this.lastNeed);
  return r;
}

// Pass bytes on through for single-byte encodings (e.g. ascii, latin1, hex)
function simpleWrite(buf) {
  return buf.toString(this.encoding);
}

function simpleEnd(buf) {
  return buf && buf.length ? this.write(buf) : '';
}

/***/ }),
/* 46 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.

// a transform stream is a readable/writable stream where you do
// something with the data.  Sometimes it's called a "filter",
// but that's not a great name for it, since that implies a thing where
// some bits pass through, and others are simply ignored.  (That would
// be a valid example of a transform, of course.)
//
// While the output is causally related to the input, it's not a
// necessarily symmetric or synchronous transformation.  For example,
// a zlib stream might take multiple plain-text writes(), and then
// emit a single compressed chunk some time in the future.
//
// Here's how this works:
//
// The Transform stream has all the aspects of the readable and writable
// stream classes.  When you write(chunk), that calls _write(chunk,cb)
// internally, and returns false if there's a lot of pending writes
// buffered up.  When you call read(), that calls _read(n) until
// there's enough pending readable data buffered up.
//
// In a transform stream, the written data is placed in a buffer.  When
// _read(n) is called, it transforms the queued up data, calling the
// buffered _write cb's as it consumes chunks.  If consuming a single
// written chunk would result in multiple output chunks, then the first
// outputted bit calls the readcb, and subsequent chunks just go into
// the read buffer, and will cause it to emit 'readable' if necessary.
//
// This way, back-pressure is actually determined by the reading side,
// since _read has to be called to start processing a new chunk.  However,
// a pathological inflate type of transform can cause excessive buffering
// here.  For example, imagine a stream where every byte of input is
// interpreted as an integer from 0-255, and then results in that many
// bytes of output.  Writing the 4 bytes {ff,ff,ff,ff} would result in
// 1kb of data being output.  In this case, you could write a very small
// amount of input, and end up with a very large amount of output.  In
// such a pathological inflating mechanism, there'd be no way to tell
// the system to stop doing the transform.  A single 4MB write could
// cause the system to run out of memory.
//
// However, even in such a pathological case, only a single written chunk
// would be consumed, and then the rest would wait (un-transformed) until
// the results of the previous transformed chunk were consumed.



module.exports = Transform;

var Duplex = __webpack_require__(15);

/*<replacement>*/
var util = __webpack_require__(23);
util.inherits = __webpack_require__(18);
/*</replacement>*/

util.inherits(Transform, Duplex);

function TransformState(stream) {
  this.afterTransform = function (er, data) {
    return afterTransform(stream, er, data);
  };

  this.needTransform = false;
  this.transforming = false;
  this.writecb = null;
  this.writechunk = null;
  this.writeencoding = null;
}

function afterTransform(stream, er, data) {
  var ts = stream._transformState;
  ts.transforming = false;

  var cb = ts.writecb;

  if (!cb) {
    return stream.emit('error', new Error('write callback called multiple times'));
  }

  ts.writechunk = null;
  ts.writecb = null;

  if (data !== null && data !== undefined) stream.push(data);

  cb(er);

  var rs = stream._readableState;
  rs.reading = false;
  if (rs.needReadable || rs.length < rs.highWaterMark) {
    stream._read(rs.highWaterMark);
  }
}

function Transform(options) {
  if (!(this instanceof Transform)) return new Transform(options);

  Duplex.call(this, options);

  this._transformState = new TransformState(this);

  var stream = this;

  // start out asking for a readable event once data is transformed.
  this._readableState.needReadable = true;

  // we have implemented the _read method, and done the other things
  // that Readable wants before the first _read call, so unset the
  // sync guard flag.
  this._readableState.sync = false;

  if (options) {
    if (typeof options.transform === 'function') this._transform = options.transform;

    if (typeof options.flush === 'function') this._flush = options.flush;
  }

  // When the writable side finishes, then flush out anything remaining.
  this.once('prefinish', function () {
    if (typeof this._flush === 'function') this._flush(function (er, data) {
      done(stream, er, data);
    });else done(stream);
  });
}

Transform.prototype.push = function (chunk, encoding) {
  this._transformState.needTransform = false;
  return Duplex.prototype.push.call(this, chunk, encoding);
};

// This is the part where you do stuff!
// override this function in implementation classes.
// 'chunk' is an input chunk.
//
// Call `push(newChunk)` to pass along transformed output
// to the readable side.  You may call 'push' zero or more times.
//
// Call `cb(err)` when you are done with this chunk.  If you pass
// an error, then that'll put the hurt on the whole operation.  If you
// never call cb(), then you'll never get another chunk.
Transform.prototype._transform = function (chunk, encoding, cb) {
  throw new Error('_transform() is not implemented');
};

Transform.prototype._write = function (chunk, encoding, cb) {
  var ts = this._transformState;
  ts.writecb = cb;
  ts.writechunk = chunk;
  ts.writeencoding = encoding;
  if (!ts.transforming) {
    var rs = this._readableState;
    if (ts.needTransform || rs.needReadable || rs.length < rs.highWaterMark) this._read(rs.highWaterMark);
  }
};

// Doesn't matter what the args are here.
// _transform does all the work.
// That we got here means that the readable side wants more data.
Transform.prototype._read = function (n) {
  var ts = this._transformState;

  if (ts.writechunk !== null && ts.writecb && !ts.transforming) {
    ts.transforming = true;
    this._transform(ts.writechunk, ts.writeencoding, ts.afterTransform);
  } else {
    // mark that we need a transform, so that any data that comes in
    // will get processed, now that we've asked for it.
    ts.needTransform = true;
  }
};

Transform.prototype._destroy = function (err, cb) {
  var _this = this;

  Duplex.prototype._destroy.call(this, err, function (err2) {
    cb(err2);
    _this.emit('close');
  });
};

function done(stream, er, data) {
  if (er) return stream.emit('error', er);

  if (data !== null && data !== undefined) stream.push(data);

  // if there's nothing in the write buffer, then that means
  // that nothing more will ever be provided
  var ws = stream._writableState;
  var ts = stream._transformState;

  if (ws.length) throw new Error('Calling transform done when ws.length != 0');

  if (ts.transforming) throw new Error('Calling transform done when still transforming');

  return stream.push(null);
}

/***/ }),
/* 47 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
const maybe_1 = __webpack_require__(0);
const tab_utils_1 = __webpack_require__(48);
const url_utils_1 = __webpack_require__(4);
const iter_utils_1 = __webpack_require__(35);
const iter_utils_2 = __webpack_require__(35);
const browser_1 = __webpack_require__(6);
const string_utils_1 = __webpack_require__(3);
function parseBrowserNewTabURLs() {
    const newTabSpecs = [
        [browser_1.Browser.chrome, "chrome://newtab"],
        [browser_1.Browser.firefox, "about:newtab"],
        [browser_1.Browser.edge, "https://www.msn.com/spartan/ntp"],
        [browser_1.Browser.edgeChromium, "https://ntp.msn.com/edge/ntp"]
    ];
    const newTabURLs = newTabSpecs.map(([browser, spec]) => {
        const url = url_utils_1.parseUrl(spec);
        if (maybe_1.none(url)) {
            return undefined;
        }
        return [browser, url];
    }).filter(maybe_1.some);
    return new Map(newTabURLs);
}
exports.parseBrowserNewTabURLs = parseBrowserNewTabURLs;
function parseTabUrl(tab) {
    if (tab.url === undefined) {
        return undefined;
    }
    const spec = tab.url;
    const url = url_utils_1.parseUrl(spec);
    if (url === undefined) {
        return spec;
    }
    else {
        return url;
    }
}
class TabStalker {
    constructor(browser) {
        this.browser = browser;
        this.windows = new Set();
        this.tabs = new Set();
        this.windowsToTabs = new Map();
        this.tabsToWindows = new Map();
        this.tabURLs = new Map();
        this.windowActivatedTabs = new Map();
        this.windowLastUniqueActivatedTabs = new Map();
        this.activatedTabs = new Set();
        this.openerTabs = new Map();
        this.openerWindows = new Map();
        this.restoredSessionTabs = new Set();
        this.onTabClosedHandlers = [];
        this.onTabCreatedHandlers = [];
        this.onTabRestoredListeners = [];
        this.browserNewTabURLs = parseBrowserNewTabURLs();
    }
    queryRestoredSessionTabs() {
        chrome.windows.getAll((windows) => {
            for (const window of windows) {
                this.onWindowCreated(window);
            }
            chrome.tabs.query({}, (tabs) => {
                for (const tab of tabs) {
                    this.onTabCreated(tab);
                    const tabId = tab.id;
                    if (maybe_1.some(tabId)) {
                        this.restoredSessionTabs.add(tabId);
                        const url = maybe_1.some(tab.url) ? url_utils_1.parseUrl(tab.url) : undefined;
                        this.notifyOnTabRestoredListeners(tabId, url);
                    }
                }
            });
        });
    }
    onTabCreated(tab) {
        const tabId = tab.id;
        if (tabId === undefined) {
            return;
        }
        if (!tab_utils_1.isValidTabId(tabId)) {
            return;
        }
        const windowId = tab.windowId;
        this.tabs.add(tabId);
        this.addTabToWindow(tabId, windowId);
        const openerTabId = tab.openerTabId;
        if (openerTabId !== undefined) {
            this.openerTabs.set(tabId, openerTabId);
        }
        if (tab.active) {
            this.updateTabActivation(tabId, windowId);
        }
        this.updateTabURL(tabId, tab);
        this.notifyOnTabCreatedHandlers(tabId);
    }
    updateTabURL(tabId, tabInfo) {
        if (tabInfo.url === undefined) {
            return;
        }
        const url = parseTabUrl(tabInfo);
        if (url === undefined) {
            return;
        }
        this.tabURLs.set(tabId, url);
    }
    onTabUpdated(tabId, changeInfo, tab) {
        if (!tab_utils_1.isValidTabId(tabId)) {
            return;
        }
        this.tabs.add(tabId);
        if (tab.active) {
            this.updateTabActivation(tabId, tab.windowId);
        }
        this.updateTabURL(tabId, changeInfo);
    }
    onTabMoved(tabId, moveInfo) {
    }
    onTabActivated(activeInfo) {
        const tabId = activeInfo.tabId;
        const windowId = activeInfo.windowId;
        if (this.tabs.has(tabId)) {
            this.updateTabActivation(tabId, windowId);
        }
        else {
            chrome.tabs.get(tabId, tab => this.onTabCreated(tab));
        }
    }
    updateTabActivation(tabId, windowId) {
        if (!tab_utils_1.isValidTabId(tabId)) {
            return;
        }
        if (!tab_utils_1.isValidWindowId(windowId)) {
            return;
        }
        const lastActivatedTabId = this.windowActivatedTabs.get(windowId);
        if (maybe_1.some(lastActivatedTabId) && lastActivatedTabId !== tabId) {
            this.windowLastUniqueActivatedTabs.set(windowId, lastActivatedTabId);
        }
        this.windowActivatedTabs.set(windowId, tabId);
        this.activatedTabs = new Set(this.windowActivatedTabs.values());
    }
    onTabHighlighted(highlightInfo) {
    }
    onTabDetached(tabId, detachInfo) {
        if (!tab_utils_1.isValidTabId(tabId)) {
            return;
        }
        const windowId = detachInfo.oldWindowId;
        if (!tab_utils_1.isValidWindowId(windowId)) {
            return;
        }
        this.removeTabFromWindow(tabId, windowId);
    }
    onTabAttached(tabId, attachInfo) {
        if (!tab_utils_1.isValidTabId(tabId)) {
            return;
        }
        const windowId = attachInfo.newWindowId;
        if (!tab_utils_1.isValidWindowId(windowId)) {
            return;
        }
        this.addTabToWindow(tabId, windowId);
    }
    removeTab(tabId) {
        this.tabs.delete(tabId);
        this.tabURLs.delete(tabId);
        this.openerTabs.delete(tabId);
        this.restoredSessionTabs.delete(tabId);
    }
    onTabRemoved(tabId, removeInfo) {
        if (!tab_utils_1.isValidTabId(tabId)) {
            return;
        }
        const windowId = removeInfo.windowId;
        if (!tab_utils_1.isValidWindowId(windowId)) {
            return;
        }
        this.notifyOnTabClosedHandlers(tabId);
        this.removeTabFromWindow(tabId, windowId);
        this.removeTab(tabId);
    }
    onTabReplaced(addedTabId, removedTabId) {
        if (this.isTab(addedTabId)) {
            const windowId = this.findTabWindowId(addedTabId);
            if (maybe_1.some(windowId)) {
                this.addTabToWindow(addedTabId, windowId);
            }
        }
        if (this.isTab(removedTabId)) {
            const windowId = this.findTabWindowId(removedTabId);
            if (maybe_1.some(windowId)) {
                this.removeTabFromWindow(removedTabId, windowId);
                this.removeTab(removedTabId);
            }
        }
    }
    onWindowCreated(window) {
        const windowId = window.id;
        if (!tab_utils_1.isValidWindowId(windowId)) {
            return;
        }
        this.windows.add(windowId);
        let focusedWindowId = this.focusedWindowId;
        if (focusedWindowId === undefined) {
            focusedWindowId = this.lastFocusedWindowId;
        }
        if (focusedWindowId !== undefined) {
            const activatedTabId = this.windowActivatedTabs.get(focusedWindowId);
            if (activatedTabId !== undefined) {
                this.openerWindows.set(windowId, [focusedWindowId, activatedTabId]);
            }
        }
    }
    onWindowRemoved(windowId) {
        if (!tab_utils_1.isValidWindowId) {
            return;
        }
        this.windows.delete(windowId);
        const tabs = this.windowsToTabs.get(windowId);
        if (tabs !== undefined) {
            for (const tabId of tabs) {
                this.removeTab(tabId);
                this.removeTabFromWindow(tabId, windowId);
            }
        }
        this.windowsToTabs.delete(windowId);
        this.windowActivatedTabs.delete(windowId);
        this.windowLastUniqueActivatedTabs.delete(windowId);
        this.openerWindows.delete(windowId);
    }
    onWindowFocusChanged(windowId) {
        if (this.focusedWindowId !== undefined) {
            this.lastFocusedWindowId = this.focusedWindowId;
        }
        if (tab_utils_1.isValidWindowId(windowId)) {
            this.focusedWindowId = windowId;
        }
        else {
            this.focusedWindowId = undefined;
        }
    }
    registerTabEventListeners() {
        chrome.tabs.onCreated.addListener(this.onTabCreated.bind(this));
        chrome.tabs.onUpdated.addListener(this.onTabUpdated.bind(this));
        chrome.tabs.onMoved.addListener(this.onTabMoved.bind(this));
        chrome.tabs.onActivated.addListener(this.onTabActivated.bind(this));
        chrome.tabs.onHighlighted.addListener(this.onTabHighlighted.bind(this));
        chrome.tabs.onDetached.addListener(this.onTabDetached.bind(this));
        chrome.tabs.onAttached.addListener(this.onTabAttached.bind(this));
        chrome.tabs.onRemoved.addListener(this.onTabRemoved.bind(this));
        chrome.tabs.onReplaced.addListener(this.onTabReplaced.bind(this));
    }
    registerWindowEventListeners() {
        chrome.windows.onCreated.addListener(this.onWindowCreated.bind(this));
        chrome.windows.onRemoved.addListener(this.onWindowRemoved.bind(this));
        chrome.windows.onFocusChanged.addListener(this.onWindowFocusChanged.bind(this));
    }
    registerListeners() {
        this.registerWindowEventListeners();
        this.registerTabEventListeners();
    }
    addTabToWindow(tabId, windowId) {
        const windowToTabs = this.windowsToTabs.get(windowId);
        if (windowToTabs === undefined) {
            this.windowsToTabs.set(windowId, new Set([tabId]));
        }
        else {
            windowToTabs.add(tabId);
        }
        this.tabsToWindows.set(tabId, windowId);
    }
    removeTabFromWindow(tabId, windowId) {
        const windowToTabs = this.windowsToTabs.get(windowId);
        if (windowToTabs !== undefined) {
            this.windowsToTabs.delete(tabId);
        }
        this.tabsToWindows.delete(tabId);
    }
    findActivatedTabId(windowId) {
        if (windowId === undefined) {
            return undefined;
        }
        if (!tab_utils_1.isValidWindowId(windowId)) {
            return undefined;
        }
        return this.windowActivatedTabs.get(windowId);
    }
    findLastActivatedTabId(windowId) {
        if (windowId === undefined) {
            return undefined;
        }
        if (!tab_utils_1.isValidWindowId(windowId)) {
            return undefined;
        }
        return this.windowLastUniqueActivatedTabs.get(windowId);
    }
    findTabURL(tabId) {
        if (tabId === undefined) {
            return undefined;
        }
        if (!tab_utils_1.isValidTabId(tabId)) {
            return undefined;
        }
        return this.tabURLs.get(tabId);
    }
    findOpenerTabId(tabId) {
        if (tabId === undefined) {
            return undefined;
        }
        if (!tab_utils_1.isValidTabId(tabId)) {
            return undefined;
        }
        return this.openerTabs.get(tabId);
    }
    findTabWindowId(tabId) {
        if (tabId === undefined) {
            return undefined;
        }
        if (!tab_utils_1.isValidTabId(tabId)) {
            return undefined;
        }
        return this.tabsToWindows.get(tabId);
    }
    findOpenerWindowId(windowId) {
        if (windowId === undefined) {
            return undefined;
        }
        if (!tab_utils_1.isValidWindowId(windowId)) {
            return undefined;
        }
        return this.openerWindows.get(windowId);
    }
    findWindowTabCount(windowId) {
        if (windowId === undefined) {
            return 0;
        }
        const windowToTabs = this.windowsToTabs.get(windowId);
        if (windowToTabs === undefined) {
            return 0;
        }
        return windowToTabs.size;
    }
    get maybeNewWindowId() {
        const emptyWindowIds = iter_utils_1.toArray(iter_utils_1.filter(this.windows.keys(), (windowId) => {
            return this.findWindowTabCount(windowId) === 0;
        }));
        if (emptyWindowIds.length === 1) {
            return iter_utils_2.first(emptyWindowIds);
        }
        else {
            return undefined;
        }
    }
    isTabActivated(tabId) {
        return this.activatedTabs.has(tabId);
    }
    get activatedTabId() {
        return this.findActivatedTabId(this.focusedWindowId);
    }
    get activatedTabURL() {
        return this.findTabURL(this.activatedTabId);
    }
    get lastActivatedTabId() {
        return this.findLastActivatedTabId(this.focusedWindowId);
    }
    get lastFocusedWindowActivatedTabId() {
        return this.findActivatedTabId(this.lastFocusedWindowId);
    }
    isTab(tabId) {
        return tab_utils_1.isValidTabId(tabId) && this.tabs.has(tabId);
    }
    isWindow(windowId) {
        return tab_utils_1.isValidWindowId(windowId) && this.windows.has(windowId);
    }
    isRestoredSessionTab(tabId) {
        return tab_utils_1.isValidTabId(tabId) && this.restoredSessionTabs.has(tabId);
    }
    findPopupWindowTabId(windowId) {
        if (!tab_utils_1.isValidWindowId(windowId)) {
            return undefined;
        }
        const tabs = this.windowsToTabs.get(windowId);
        if (maybe_1.none(tabs) || (tabs.size !== 1)) {
            return undefined;
        }
        return iter_utils_2.first(tabs);
    }
    findPopupWindowTabIds() {
        const windows = iter_utils_1.toArray(this.windows);
        return windows.map((windowId) => this.findPopupWindowTabId(windowId)).filter(maybe_1.some);
    }
    findBrowserNewTabURL() {
        if (maybe_1.none(this.browser)) {
            return undefined;
        }
        if (maybe_1.none(this.browserNewTabURLs)) {
            return undefined;
        }
        const browserNewTabURL = this.browserNewTabURLs.get(this.browser);
        return browserNewTabURL;
    }
    didUserCreateTab(tabId) {
        const urlOrSpec = this.findTabURL(tabId);
        if (maybe_1.none(urlOrSpec)) {
            return false;
        }
        const url = url_utils_1.parseURLIfNecessary(urlOrSpec);
        if (maybe_1.none(url)) {
            return false;
        }
        const browserNewTabURL = this.findBrowserNewTabURL();
        if (maybe_1.none(browserNewTabURL)) {
            return false;
        }
        return url_utils_1.isSameUrl(url, browserNewTabURL, url_utils_1.UrlCompareOptions.IgnoreSearchParams);
    }
    registerOnTabClosedHandler(handler) {
        this.onTabClosedHandlers.push(handler);
    }
    notifyOnTabClosedHandlers(tabId) {
        for (const onTabClosed of this.onTabClosedHandlers) {
            onTabClosed(tabId);
        }
    }
    registerOnTabCreatedHandler(handler) {
        this.onTabCreatedHandlers.push(handler);
    }
    notifyOnTabCreatedHandlers(tabId) {
        for (const onTabCreated of this.onTabCreatedHandlers) {
            onTabCreated(tabId);
        }
    }
    registerOnTabRestoredListeners(listener) {
        this.onTabRestoredListeners.push(listener);
        if (!iter_utils_1.isEmpty(this.restoredSessionTabs)) {
            for (const tabId of this.restoredSessionTabs) {
                const urlOrSpec = this.findTabURL(tabId);
                const url = maybe_1.some(urlOrSpec) ? url_utils_1.parseURLIfNecessary(urlOrSpec) : undefined;
                this.notifyOnTabRestoredListeners(tabId, url);
            }
        }
    }
    notifyOnTabRestoredListeners(tabId, url) {
        for (const onTabRestored of this.onTabRestoredListeners) {
            onTabRestored(tabId, url);
        }
    }
    toString() {
        const windowsToTabsToURLs = new Map();
        for (const [window, tabs] of this.windowsToTabs) {
            let tabsToURLs = new Map();
            for (const tab of tabs) {
                tabsToURLs.set(tab, this.tabURLs.get(tab));
            }
            windowsToTabsToURLs.set(window, tabsToURLs);
        }
        return string_utils_1.toString({
            windowsToTabsToURLs: windowsToTabsToURLs,
            windowActivatedTabs: this.windowActivatedTabs,
            windowLastUniqueActivatedTabs: this.windowLastUniqueActivatedTabs,
            activatedTabs: this.activatedTabs,
            openerTabs: this.openerTabs,
            openerWindows: this.openerWindows,
            browserNewTabURLs: this.browserNewTabURLs
        }, 1);
    }
}
exports.TabStalker = TabStalker;


/***/ }),
/* 48 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
const murmur_hash_1 = __webpack_require__(11);
function isValidWindowId(windowId) {
    return windowId !== chrome.windows.WINDOW_ID_NONE;
}
exports.isValidWindowId = isValidWindowId;
function isValidTabId(tabId) {
    return tabId !== chrome.tabs.TAB_ID_NONE;
}
exports.isValidTabId = isValidTabId;
function hashTabId(tabId, seed = 0) {
    return murmur_hash_1.murmurHash(tabId, seed);
}
exports.hashTabId = hashTabId;
function isSameTabId(a, b) {
    if (!isValidTabId(a) || !isValidTabId(b)) {
        return false;
    }
    return a === b;
}
exports.isSameTabId = isSameTabId;


/***/ }),
/* 49 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
const url_utils_1 = __webpack_require__(4);
const murmur_hash_1 = __webpack_require__(11);
const origin_1 = __webpack_require__(9);
const maybe_1 = __webpack_require__(0);
const hash_map_1 = __webpack_require__(16);
const id_generator_1 = __webpack_require__(19);
const iter_utils_1 = __webpack_require__(35);
const config_keys_1 = __webpack_require__(7);
const log_1 = __webpack_require__(1);
const string_utils_1 = __webpack_require__(3);
const array_utils_1 = __webpack_require__(8);
const nav_sequence_parser_1 = __webpack_require__(36);
const config_1 = __webpack_require__(25);
const builtin_nav_sequence_detector_rules_1 = __webpack_require__(94);
const browser_1 = __webpack_require__(6);
class PartialNavSequence {
    constructor(navSequenceId, id, partialLength, completeLength) {
        this.navSequenceId = navSequenceId;
        this.id = id;
        this.partialLength = partialLength;
        this.completeLength = completeLength;
    }
    get isPartial() {
        return this.partialLength < this.completeLength;
    }
    get isComplete() {
        return this.partialLength === this.completeLength;
    }
    hashWithSeed(seed) {
        let hash = seed;
        hash = murmur_hash_1.murmurHash(this.navSequenceId, hash);
        hash = murmur_hash_1.murmurHash(this.id, hash);
        hash = murmur_hash_1.murmurHash(this.partialLength, hash);
        hash = murmur_hash_1.murmurHash(this.completeLength, hash);
        return hash;
    }
    hash() {
        const seed = 0;
        return this.hashWithSeed(seed);
    }
    compare(other) {
        return (this.navSequenceId === other.navSequenceId) &&
            (this.id === other.id) &&
            (this.partialLength === other.partialLength) &&
            (this.completeLength === other.completeLength);
    }
    get asBackRef() {
        return this.id;
    }
    get asIndex() {
        return this.partialLength - 1;
    }
    get asNextIndex() {
        if (this.isComplete) {
            return undefined;
        }
        return this.partialLength;
    }
}
class NavData {
    constructor(type, url, origin, category, groups) {
        this.type = type;
        this.url = url;
        this.origin = origin;
        this.category = category;
        this.groups = groups;
        this.isNewTab = undefined;
        this.didUserCreateTab = undefined;
        this.contentType = undefined;
    }
    get isParentTab() {
        return this.type === nav_sequence_parser_1.NavType.parentTab;
    }
}
exports.NavData = NavData;
function isSameNavData(a, b) {
    return (a.type === b.type) &&
        url_utils_1.isSameUrl(a.url, b.url) &&
        origin_1.isSameOrigin(a.origin, b.origin) &&
        (a.category === b.category);
}
exports.isSameNavData = isSameNavData;
class TrackedNavSequence {
    constructor(metadata) {
        this.metadata = metadata;
        this.sequence = [];
        this.boundBackRefs = new Map();
    }
    push(navData, partialNavSequence) {
        this.sequence.push(navData);
        const backRef = partialNavSequence.asBackRef;
        this.boundBackRefs.set(backRef, navData);
    }
    get(index) {
        return this.sequence[index];
    }
    lookupBackRefBinding(backRef) {
        return this.boundBackRefs.get(backRef);
    }
    get precedence() {
        if (maybe_1.none(this.metadata)) {
            return undefined;
        }
        return this.metadata.precedence;
    }
    get length() {
        return this.sequence.length;
    }
    get navigateToURL() {
        if (maybe_1.none(this.metadata)) {
            if (array_utils_1.isEmpty(this.sequence)) {
                return undefined;
            }
            const navData = array_utils_1.last(this.sequence);
            return navData.url;
        }
        const navData = this.boundBackRefs.get(this.metadata.navigateTo);
        if (maybe_1.none(navData)) {
            return undefined;
        }
        return navData.url;
    }
    get navSequence() {
        return this.sequence;
    }
}
exports.TrackedNavSequence = TrackedNavSequence;
class EmptyNavSequenceDetection {
    get precedence() {
        return undefined;
    }
    get navSequence() {
        return [];
    }
    get navigateToURL() {
        return undefined;
    }
}
class EmptyNavSequenceDetections {
    get precedence() {
        return undefined;
    }
    get shouldBlock() {
        return false;
    }
    get shouldPossiblyBlock() {
        return false;
    }
    get shouldAllow() {
        return false;
    }
    get shouldPossiblyAllow() {
        return false;
    }
    get blocked() {
        return new EmptyNavSequenceDetection();
    }
    get possibleBlocked() {
        return new EmptyNavSequenceDetection();
    }
    get allowed() {
        return new EmptyNavSequenceDetection();
    }
    get possibleAllowed() {
        return new EmptyNavSequenceDetection();
    }
}
exports.EmptyNavSequenceDetections = EmptyNavSequenceDetections;
var BlockType;
(function (BlockType) {
    BlockType[BlockType["none"] = 0] = "none";
    BlockType[BlockType["block"] = 1] = "block";
    BlockType[BlockType["allow"] = 2] = "allow";
})(BlockType = exports.BlockType || (exports.BlockType = {}));
var DetectedType;
(function (DetectedType) {
    DetectedType[DetectedType["none"] = 0] = "none";
    DetectedType[DetectedType["detected"] = 1] = "detected";
    DetectedType[DetectedType["possiblyDetected"] = 2] = "possiblyDetected";
})(DetectedType = exports.DetectedType || (exports.DetectedType = {}));
class ResolvedDetectionAction {
    constructor(precedence, block, detected) {
        this.precedence = precedence;
        this.block = block;
        this.detected = detected;
    }
    get isBlocked() {
        return this.block === BlockType.block;
    }
    get isAllowed() {
        return this.block === BlockType.allow;
    }
    get isDetected() {
        return this.detected === DetectedType.detected;
    }
    get isPossiblyDetected() {
        return this.detected === DetectedType.possiblyDetected;
    }
    get shouldBlock() {
        return this.isBlocked && this.isDetected;
    }
    get shouldAllow() {
        return this.isAllowed && this.isDetected;
    }
    get shouldPossiblyBlock() {
        return this.isBlocked && this.isPossiblyDetected;
    }
    get shouldPossilbyAllow() {
        return this.isAllowed && this.isPossiblyDetected;
    }
}
exports.ResolvedDetectionAction = ResolvedDetectionAction;
class NavSequenceDetections {
    constructor(detected, possiblyDetected) {
        this.blockedDetected = [];
        this.blockedPossiblyDetected = [];
        this.allowedDetected = [];
        this.allowedPossiblyDetected = [];
        const isBlocked = (sequence) => {
            const metadata = sequence.metadata;
            if (maybe_1.none(metadata)) {
                return false;
            }
            return metadata.block;
        };
        const isAllowed = (sequence) => {
            const metadata = sequence.metadata;
            if (maybe_1.none(metadata)) {
                return false;
            }
            return metadata.allow;
        };
        this.blockedDetected = sortDetectedNavSequences(detected.filter(isBlocked));
        this.blockedPossiblyDetected = sortDetectedNavSequences(possiblyDetected.filter(isBlocked));
        this.allowedDetected = sortDetectedNavSequences(detected.filter(isAllowed));
        this.allowedPossiblyDetected = sortDetectedNavSequences(possiblyDetected.filter(isAllowed));
        this.action = this.resolveActions();
    }
    sortActions(actions) {
        if (array_utils_1.isEmpty(actions)) {
            return [];
        }
        return actions.sort((a, b) => {
            const [sequenceA, blockA, detectedA] = a;
            const [sequenceB, blockB, detectedB] = b;
            const comparison = compareTrackedNavSequences(sequenceA, sequenceB);
            if (comparison === 0) {
                const isBlockedA = blockA === BlockType.block;
                const isBlockedB = blockB === BlockType.block;
                const isAllowedA = blockA === BlockType.allow;
                const isAllowedB = blockB === BlockType.allow;
                const isDetectedA = detectedA === DetectedType.detected;
                const isDetectedB = detectedB === DetectedType.detected;
                const isPossiblyDetectedA = detectedA === DetectedType.possiblyDetected;
                const isPossiblyDetectedB = detectedB === DetectedType.possiblyDetected;
                if (isDetectedA && isPossiblyDetectedB) {
                    return -1;
                }
                else if (isDetectedB && isPossiblyDetectedA) {
                    return 1;
                }
                else if (isBlockedA && isAllowedB) {
                    return -1;
                }
                else if (isBlockedB && isAllowedA) {
                    return 1;
                }
                else {
                    return compareHigher(sequenceA.length, sequenceB.length);
                }
            }
            else {
                return comparison;
            }
        });
    }
    resolveActions() {
        const actions = [];
        const maybeAddAction = (sequences, block, detected) => {
            if (!array_utils_1.isEmpty(sequences)) {
                actions.push([array_utils_1.first(sequences), block, detected]);
            }
        };
        maybeAddAction(this.blockedDetected, BlockType.block, DetectedType.detected);
        maybeAddAction(this.allowedDetected, BlockType.allow, DetectedType.detected);
        maybeAddAction(this.blockedPossiblyDetected, BlockType.block, DetectedType.possiblyDetected);
        maybeAddAction(this.allowedPossiblyDetected, BlockType.allow, DetectedType.possiblyDetected);
        if (array_utils_1.isEmpty(actions)) {
            const precedence = undefined;
            return new ResolvedDetectionAction(precedence, BlockType.none, DetectedType.none);
        }
        const sortedActions = this.sortActions(actions);
        const [action, block, detected] = array_utils_1.first(sortedActions);
        return new ResolvedDetectionAction(action.precedence, block, detected);
    }
    get precedence() {
        return this.action.precedence;
    }
    get shouldBlock() {
        return this.action.shouldBlock;
    }
    get shouldPossiblyBlock() {
        return this.action.shouldPossiblyBlock;
    }
    get shouldAllow() {
        return this.action.shouldAllow;
    }
    get shouldPossiblyAllow() {
        return this.action.shouldPossilbyAllow;
    }
    findFirstDetection(sequences) {
        if (array_utils_1.isEmpty(sequences)) {
            return new EmptyNavSequenceDetection();
        }
        return array_utils_1.first(sequences);
    }
    get blocked() {
        return this.findFirstDetection(this.blockedDetected);
    }
    get possibleBlocked() {
        return this.findFirstDetection(this.blockedPossiblyDetected);
    }
    get allowed() {
        return this.findFirstDetection(this.allowedDetected);
    }
    get possibleAllowed() {
        return this.findFirstDetection(this.allowedPossiblyDetected);
    }
}
class CompleteNavSequence {
    constructor(metadata) {
        this.metadata = metadata;
        this.sequence = [];
        this.backRefs = [];
    }
    push(navPattern, partialNavSequence) {
        this.sequence.push([navPattern, partialNavSequence]);
        const backRef = navPattern.asBackReference;
        if (maybe_1.some(backRef)) {
            this.backRefs.push([backRef, partialNavSequence]);
        }
    }
    get length() {
        return this.sequence.length;
    }
    get(index) {
        if (index < 0 || index >= this.sequence.length) {
            return undefined;
        }
        return this.sequence[index];
    }
}
function* findInclusions(length) {
    const includes = array_utils_1.newArray(length, false);
    yield includes;
    let foundAllInclusions = false;
    while (!foundAllInclusions) {
        let carry = true;
        for (let index = 0; carry && (index < includes.length); index += 1) {
            const include = includes[index];
            if (include) {
                includes[index] = false;
                carry = true;
            }
            else {
                includes[index] = true;
                carry = false;
            }
        }
        if (carry) {
            foundAllInclusions = true;
        }
        else {
            yield includes;
        }
    }
}
function makeIndexMask(indices, length) {
    const isIndexMask = array_utils_1.newArray(length, false);
    const indexMask = array_utils_1.newArray(length, -1);
    for (let i = 0; i < indices.length; i += 1) {
        const index = indices[i];
        isIndexMask[index] = true;
        indexMask[index] = i;
    }
    return [isIndexMask, indexMask];
}
class NavSequenceDetector {
    constructor(navSequences) {
        this.completeNavSequenceMap = new Map();
        this.partialNavSequenceMap = new hash_map_1.HashMap(nav_sequence_parser_1.hashNavigation, nav_sequence_parser_1.isSameNavigation);
        this.idGenerator = new id_generator_1.IdGenerator();
        for (const [navSequence, navMetadata] of navSequences) {
            for (const navSequenceVariation of this.findRepeatPatternVariations(navSequence)) {
                const navSequenceId = this.idGenerator.generateId();
                this.buildPartialNavSequences(navSequenceVariation, navMetadata, navSequenceId);
            }
        }
    }
    *findRepeatPatternVariations(navSequence) {
        const repeatPatternIndices = array_utils_1.findAllIndices(navSequence, (navPattern) => {
            return navPattern.hasRepeatedModifier;
        });
        const [isRepeatPattern, includesIndex] = makeIndexMask(repeatPatternIndices, navSequence.length);
        const doInclude = (includes, index) => {
            if (isRepeatPattern[index]) {
                return includes[includesIndex[index]];
            }
            else {
                return true;
            }
        };
        for (const includes of findInclusions(repeatPatternIndices.length)) {
            const navSequenceVariation = new Array();
            for (let index = 0; index < navSequence.length; index += 1) {
                if (doInclude(includes, index)) {
                    navSequenceVariation.push(navSequence[index]);
                }
            }
            yield navSequenceVariation;
        }
    }
    emptyPartialNavSequenceSet() {
        return hash_map_1.makeDefaultHashSet();
    }
    addPartialNavSequence(navigation, partialNavSequence) {
        const partialNavSequenceSet = this.partialNavSequenceMap.get(navigation);
        if (maybe_1.some(partialNavSequenceSet)) {
            partialNavSequenceSet.add(partialNavSequence);
        }
        else {
            const newPartialNavSequenceSet = this.emptyPartialNavSequenceSet();
            newPartialNavSequenceSet.add(partialNavSequence);
            this.partialNavSequenceMap.put(navigation, newPartialNavSequenceSet);
        }
    }
    addCompleteNavSequence(navPattern, partialNavSequence, navMetadata) {
        const navSequenceId = partialNavSequence.navSequenceId;
        const completeNavSequence = this.completeNavSequenceMap.get(navSequenceId);
        if (maybe_1.some(completeNavSequence)) {
            completeNavSequence.push(navPattern, partialNavSequence);
        }
        else {
            const newCompleteNavSequence = new CompleteNavSequence(navMetadata);
            newCompleteNavSequence.push(navPattern, partialNavSequence);
            this.completeNavSequenceMap.set(navSequenceId, newCompleteNavSequence);
        }
    }
    buildPartialNavSequences(navSequence, navMetadata, navSequenceId) {
        const completeLength = navSequence.length;
        navSequence.forEach((navPattern, index) => {
            const id = navPattern.id;
            const partialLength = index + 1;
            const partialNavSequence = new PartialNavSequence(navSequenceId, id, partialLength, completeLength);
            this.addCompleteNavSequence(navPattern, partialNavSequence, navMetadata);
            for (const navigation of navPattern.buildNavigations()) {
                this.addPartialNavSequence(navigation, partialNavSequence);
            }
        });
    }
    findNextInCompleteNavSequence(partialNavSequence) {
        if (partialNavSequence.isComplete) {
            return undefined;
        }
        const navSequenceId = partialNavSequence.navSequenceId;
        const completeNavSequence = this.completeNavSequenceMap.get(navSequenceId);
        if (maybe_1.none(completeNavSequence)) {
            return undefined;
        }
        const nextIndex = partialNavSequence.asNextIndex;
        if (maybe_1.none(nextIndex)) {
            return undefined;
        }
        const nextInSequence = completeNavSequence.get(nextIndex);
        return nextInSequence;
    }
    findNextInNavSequenceWithRepeated(partialNavSequence, nextPartialNavSequenceSet) {
        if (partialNavSequence.isComplete) {
            return undefined;
        }
        const navSequenceId = partialNavSequence.navSequenceId;
        const completeNavSequence = this.completeNavSequenceMap.get(navSequenceId);
        if (maybe_1.none(completeNavSequence)) {
            return undefined;
        }
        const nextIndex = partialNavSequence.asNextIndex;
        if (maybe_1.some(nextIndex)) {
            const nextPossible = completeNavSequence.get(nextIndex);
            if (maybe_1.some(nextPossible)) {
                const [, nextPartialNavSequence] = nextPossible;
                if (nextPartialNavSequenceSet.has(nextPartialNavSequence)) {
                    return nextPartialNavSequence;
                }
            }
        }
        const currentIndex = partialNavSequence.asIndex;
        const repeatedNextPossible = completeNavSequence.get(currentIndex);
        if (maybe_1.some(repeatedNextPossible)) {
            const [, currentPartialNavSequence] = repeatedNextPossible;
            if (nextPartialNavSequenceSet.has(currentPartialNavSequence)) {
                return currentPartialNavSequence;
            }
        }
        return undefined;
    }
    *findNextInNavSequences(currentPartialNavSequenceResultMap, nextPartialNavSequenceSet, navData) {
        for (const [partialNavSequence, trackedNavSequence] of currentPartialNavSequenceResultMap) {
            const nextPartialNavSequence = this.findNextInNavSequenceWithRepeated(partialNavSequence, nextPartialNavSequenceSet);
            if (maybe_1.some(nextPartialNavSequence)) {
                trackedNavSequence.push(navData, nextPartialNavSequence);
                yield [nextPartialNavSequence, trackedNavSequence];
            }
        }
    }
    findNavMetadata(navSequenceId) {
        const completeNavSequence = this.completeNavSequenceMap.get(navSequenceId);
        if (maybe_1.none(completeNavSequence)) {
            return undefined;
        }
        return completeNavSequence.metadata;
    }
    *findFirstInNavSequences(partialNavSequenceSet, navData) {
        yield* iter_utils_1.map(iter_utils_1.filter(partialNavSequenceSet, (partialNavSequence) => {
            return (partialNavSequence.partialLength === 1);
        }), (partialNavSequence) => {
            const navSequenceId = partialNavSequence.navSequenceId;
            const metadata = this.findNavMetadata(navSequenceId);
            const trackedNavSequence = new TrackedNavSequence(metadata);
            trackedNavSequence.push(navData, partialNavSequence);
            return [partialNavSequence, trackedNavSequence];
        });
    }
    findPartialNavSequenceSet(navigation) {
        if (maybe_1.none(navigation)) {
            return this.emptyPartialNavSequenceSet();
        }
        const partialNavSequenceSet = this.partialNavSequenceMap.get(navigation);
        if (maybe_1.none(partialNavSequenceSet)) {
            return this.emptyPartialNavSequenceSet();
        }
        return partialNavSequenceSet;
    }
    findOriginPartialNavSequenceSet(navData) {
        if (maybe_1.some(navData.origin)) {
            const navigation = new nav_sequence_parser_1.OriginNav(navData.type, navData.origin);
            return this.findPartialNavSequenceSet(navigation);
        }
        return this.emptyPartialNavSequenceSet();
    }
    findCategorizedPartialNavSequenceSet(navData) {
        const navigation = new nav_sequence_parser_1.CategorizedNav(navData.type, navData.category);
        return this.findPartialNavSequenceSet(navigation);
    }
    findGroupPartialNavSequenceSet(navData) {
        if (maybe_1.none(navData.groups)) {
            return this.emptyPartialNavSequenceSet();
        }
        const groupPartialNavSequenceSet = this.emptyPartialNavSequenceSet();
        for (const group of navData.groups) {
            const navigation = new nav_sequence_parser_1.GroupNav(navData.type, group);
            groupPartialNavSequenceSet.addMany(this.findPartialNavSequenceSet(navigation));
        }
        return groupPartialNavSequenceSet;
    }
    *findBackRefPartialNavSequences(navData, currentPartialNavSequence, trackedNavSequence) {
        const navSequenceId = currentPartialNavSequence.navSequenceId;
        const completeNavSequence = this.completeNavSequenceMap.get(navSequenceId);
        if (maybe_1.none(completeNavSequence)) {
            return;
        }
        for (const [backRefNavPattern, nextPartialNavSequence] of completeNavSequence.backRefs) {
            const backRefNavData = trackedNavSequence.lookupBackRefBinding(backRefNavPattern.backRef);
            for (const navType of backRefNavPattern.navTypes()) {
                const hasSameNavType = (navData.type === navType);
                const hasSameOrigin = (maybe_1.some(backRefNavData) && origin_1.isSameOrigin(navData.origin, backRefNavData.origin));
                if (backRefNavPattern.hasNotModifer) {
                    if (hasSameNavType && maybe_1.some(backRefNavData) && !hasSameOrigin) {
                        yield nextPartialNavSequence;
                    }
                }
                else {
                    if (hasSameNavType && maybe_1.some(backRefNavData) && hasSameOrigin) {
                        yield nextPartialNavSequence;
                    }
                }
            }
        }
    }
    findBackRefPartialNavSequenceSet(navData, currentPartialNavSequenceResultMap) {
        const nextPartialNavSequenceSet = this.emptyPartialNavSequenceSet();
        for (const [currentPartialNavSequence, trackedNavSequence] of currentPartialNavSequenceResultMap) {
            nextPartialNavSequenceSet.addMany(this.findBackRefPartialNavSequences(navData, currentPartialNavSequence, trackedNavSequence));
        }
        return nextPartialNavSequenceSet;
    }
    detectNavSequence(navData, currentPartialNavSequenceResultMap) {
        if (navData.type === nav_sequence_parser_1.NavType.contentType) {
            return this.detectNavSequenceWithContentType(navData, currentPartialNavSequenceResultMap);
        }
        const nextPartialNavSequenceSet = this.emptyPartialNavSequenceSet();
        nextPartialNavSequenceSet.addMany(this.findOriginPartialNavSequenceSet(navData));
        nextPartialNavSequenceSet.addMany(this.findCategorizedPartialNavSequenceSet(navData));
        nextPartialNavSequenceSet.addMany(this.findGroupPartialNavSequenceSet(navData));
        nextPartialNavSequenceSet.addMany(this.findBackRefPartialNavSequenceSet(navData, currentPartialNavSequenceResultMap));
        const nextPartialNavSequenceResultMap = hash_map_1.makeDefaultHashMap();
        nextPartialNavSequenceResultMap.putMany(this.findFirstInNavSequences(nextPartialNavSequenceSet, navData));
        nextPartialNavSequenceResultMap.putMany(this.findNextInNavSequences(currentPartialNavSequenceResultMap, nextPartialNavSequenceSet, navData));
        return nextPartialNavSequenceResultMap;
    }
    findContentType(navigation) {
        if (maybe_1.none(navigation.asContentType)) {
            return undefined;
        }
        return navigation.asContentType.contentType;
    }
    findNextInNavSequenceWithContentType(currentPartialNavSequence, trackedNavSequence, navData) {
        const nextInSequence = this.findNextInCompleteNavSequence(currentPartialNavSequence);
        if (maybe_1.none(nextInSequence)) {
            return undefined;
        }
        const [nextNavigation, nextPartialNavSequence] = nextInSequence;
        const nextContentType = this.findContentType(nextNavigation);
        if (maybe_1.none(nextContentType)) {
            return [currentPartialNavSequence, trackedNavSequence];
        }
        const contentType = navData.contentType;
        if (maybe_1.none(contentType)) {
            return undefined;
        }
        if (contentType === nextContentType) {
            trackedNavSequence.push(navData, nextPartialNavSequence);
            return [nextPartialNavSequence, trackedNavSequence];
        }
        return undefined;
    }
    *findNextInNavSequencesWithContentType(navData, currentPartialNavSequenceResultMap) {
        for (const [currentPartialNavSequence, trackedNavSequence] of currentPartialNavSequenceResultMap) {
            const nextInSequence = this.findNextInNavSequenceWithContentType(currentPartialNavSequence, trackedNavSequence, navData);
            if (maybe_1.some(nextInSequence)) {
                yield nextInSequence;
            }
        }
    }
    detectNavSequenceWithContentType(navData, currentPartialNavSequenceResultMap) {
        const nextPartialNavSequenceResultMap = hash_map_1.makeDefaultHashMap();
        nextPartialNavSequenceResultMap.putMany(this.findNextInNavSequencesWithContentType(navData, currentPartialNavSequenceResultMap));
        return nextPartialNavSequenceResultMap;
    }
}
class TabNavSequence {
    constructor(tabId) {
        this.tabId = tabId;
        this.navSequence = new Array();
        this.navListeners = new Array();
    }
    onParentTab(url, origin, category, groups) {
        const navigation = new NavData(nav_sequence_parser_1.NavType.parentTab, url, origin, category, groups);
        this.onNavigation(navigation);
    }
    onNavigate(url, origin, category, groups, isNewTab, didUserCreateTab) {
        const navigation = new NavData(nav_sequence_parser_1.NavType.navigation, url, origin, category, groups);
        navigation.isNewTab = isNewTab;
        navigation.didUserCreateTab = didUserCreateTab;
        this.onNavigation(navigation);
    }
    onRedirect(url, origin, category, groups) {
        const navigation = new NavData(nav_sequence_parser_1.NavType.redirect, url, origin, category, groups);
        this.onNavigation(navigation);
    }
    onContentType(url, origin, category, groups, contentType) {
        const navigation = new NavData(nav_sequence_parser_1.NavType.contentType, url, origin, category, groups);
        navigation.contentType = contentType;
        this.onNavigation(navigation);
    }
    onNavigation(navigation) {
        this.navSequence.push(navigation);
        this.notifyListeners(navigation);
    }
    notifyListeners(navigation) {
        for (const onNavigation of this.navListeners) {
            onNavigation(navigation);
        }
    }
    addListener(onNavigation) {
        for (const navigation of this.navSequence) {
            onNavigation(navigation);
        }
        this.navListeners.push(onNavigation);
    }
    get isNewTab() {
        return array_utils_1.isEmpty(this.navSequence);
    }
    reset() {
        this.navSequence = [];
    }
}
class TabNavSequenceDetector {
    constructor(tabId, tabNavSequence, navSequenceDetector) {
        this.tabId = tabId;
        this.navSequenceDetector = navSequenceDetector;
        this.partialNavSequenceResultMap = hash_map_1.makeDefaultHashMap();
        this.navigationCount = 0;
        tabNavSequence.addListener((navigation) => this.onNavigation(navigation));
    }
    onNavigation(navigation) {
        const isParentTab = (navigation.type === nav_sequence_parser_1.NavType.parentTab);
        const isFirstNavigation = (this.navigationCount === 0);
        if (isParentTab && !isFirstNavigation) {
            return;
        }
        this.navigationCount += 1;
        this.partialNavSequenceResultMap = this.detectNavSequence(navigation);
    }
    detectNavSequence(navigation) {
        return this.navSequenceDetector.detectNavSequence(navigation, this.partialNavSequenceResultMap);
    }
    findDetectedNavSequences(doIncludeNavSequence) {
        const detectedNavSequences = [];
        for (const [partialNavSequence, trackedNavSequence] of this.partialNavSequenceResultMap) {
            if (doIncludeNavSequence(partialNavSequence)) {
                detectedNavSequences.push(trackedNavSequence);
            }
        }
        return detectedNavSequences;
    }
    get detectedNavSequences() {
        return this.findDetectedNavSequences((partialNavSequence) => {
            return partialNavSequence.isComplete;
        });
    }
    get possiblyDetectedNavSequences() {
        return this.findDetectedNavSequences((partialNavSequence) => {
            return partialNavSequence.isPartial;
        });
    }
    reset() {
        this.partialNavSequenceResultMap = hash_map_1.makeDefaultHashMap();
        this.navigationCount = 0;
    }
}
class PhishingNavSequenceDetector {
    constructor(browser, configNotifier, tabClosedDispatcher) {
        this.browser = browser;
        this.tabNavSequences = new Map();
        this.tabNavSequenceDetectors = new Map();
        this.builtinRulesPrecedence = undefined;
        this.updateNavSequenceDetector(builtin_nav_sequence_detector_rules_1.builtinRules);
        configNotifier.addConfigListenerForKey(this.onConfigChanged.bind(this), config_keys_1.ConfigKey.phishingNavigationSequences);
        tabClosedDispatcher.registerOnTabClosedHandler(this.onTabClosed.bind(this));
    }
    chooseRules(serializedPhishingNavSeqData) {
        if (!nav_sequence_parser_1.isValidSerializedPhishingNavSeqData(serializedPhishingNavSeqData)) {
            log_1.logError(new Error(`Invalid SerializedPhishingNavSeqData: ${string_utils_1.toString(serializedPhishingNavSeqData)}`));
            return builtin_nav_sequence_detector_rules_1.builtinRules;
        }
        if (!nav_sequence_parser_1.checkVersion(serializedPhishingNavSeqData, config_1.Config.phishingNavigationSequencesVersion())) {
            log_1.logError(new Error(`Failed to check version: ${string_utils_1.toString(serializedPhishingNavSeqData)}`));
            return builtin_nav_sequence_detector_rules_1.builtinRules;
        }
        return serializedPhishingNavSeqData;
    }
    updateNavSequenceDetector(serializedPhishingNavSeqData) {
        const rules = this.chooseRules(serializedPhishingNavSeqData);
        this.builtinRulesPrecedence = rules.builtinRulesPrecedence;
        const parsedPhishingNavSequences = rules.seqs.map(nav_sequence_parser_1.parseNavSeqData);
        if (parsedPhishingNavSequences.some(maybe_1.none)) {
            log_1.logError(new Error(`Failed to parse phishingNavigationSequences: ${string_utils_1.toString(rules)}`));
            return;
        }
        const phishingNavigationSequences = parsedPhishingNavSequences.filter(maybe_1.some);
        const navSequenceDetector = new NavSequenceDetector(phishingNavigationSequences);
        this.tabNavSequenceDetectors = this.makeTabNavSequenceDetectors(navSequenceDetector);
        this.navSequenceDetector = navSequenceDetector;
    }
    makeTabNavSequenceDetectors(navSequenceDetector) {
        const tabNavSequenceDetectors = new Map();
        this.tabNavSequences.forEach((tabNavSequence, tabId) => {
            const tabNavSequenceDetector = new TabNavSequenceDetector(tabId, tabNavSequence, navSequenceDetector);
            tabNavSequenceDetectors.set(tabId, tabNavSequenceDetector);
        });
        return tabNavSequenceDetectors;
    }
    onConfigChanged(key, config) {
        switch (key) {
            case config_keys_1.ConfigKey.phishingNavigationSequences: {
                if (maybe_1.some(config.phishingNavigationSequences)) {
                    this.updateNavSequenceDetector(config.phishingNavigationSequences);
                }
                break;
            }
        }
    }
    onTabClosed(tabId) {
        this.tabNavSequenceDetectors.delete(tabId);
        this.tabNavSequences.delete(tabId);
    }
    onNewTab(tabId) {
        const tabNavSequence = new TabNavSequence(tabId);
        this.tabNavSequences.set(tabId, tabNavSequence);
        if (maybe_1.some(this.navSequenceDetector)) {
            const tabNavSequenceDetector = new TabNavSequenceDetector(tabId, tabNavSequence, this.navSequenceDetector);
            this.tabNavSequenceDetectors.set(tabId, tabNavSequenceDetector);
        }
    }
    hasHigherPrecedenceThanBuiltin(navSequenceDetections) {
        if (maybe_1.none(this.builtinRulesPrecedence) ||
            maybe_1.none(navSequenceDetections.precedence)) {
            return false;
        }
        return navSequenceDetections.precedence > this.builtinRulesPrecedence;
    }
    resetDetector(tabId) {
        const tabNavSequence = this.tabNavSequences.get(tabId);
        if (maybe_1.some(tabNavSequence)) {
            tabNavSequence.reset();
        }
        const tabNavSequenceDetector = this.tabNavSequenceDetectors.get(tabId);
        if (maybe_1.some(tabNavSequenceDetector)) {
            tabNavSequenceDetector.reset();
        }
    }
    onTabDetected(tabId) {
        if (this.tabNavSequences.has(tabId)) {
            return;
        }
        this.onNewTab(tabId);
    }
    onParentTabDetected(tabId, url, category, groups) {
        const tabNavSequence = this.tabNavSequences.get(tabId);
        if (maybe_1.none(tabNavSequence)) {
            return false;
        }
        if (!tabNavSequence.isNewTab) {
            return false;
        }
        const origin = origin_1.parseOrigin(url);
        if (maybe_1.none(origin)) {
            return false;
        }
        tabNavSequence.onParentTab(url, origin, category, groups);
        return true;
    }
    parseOriginForBrowser(url) {
        switch (this.browser) {
            case browser_1.Browser.chrome:
                return origin_1.parseOrigin(url, new origin_1.OriginParseOptions({
                    allowChromeScheme: true,
                    allowChromeExtensionScheme: true,
                }));
            case browser_1.Browser.firefox:
                return origin_1.parseOrigin(url, new origin_1.OriginParseOptions({
                    allowAboutScheme: true,
                    allowFirefoxExtensionScheme: true,
                }));
            case browser_1.Browser.edge:
                return origin_1.parseOrigin(url, new origin_1.OriginParseOptions({
                    allowAboutScheme: true,
                    allowEdgeExtensionScheme: true
                }));
            case browser_1.Browser.edgeChromium:
                return origin_1.parseOrigin(url, new origin_1.OriginParseOptions({
                    allowEdgeScheme: true,
                    allowChromeScheme: true,
                    allowChromeExtensionScheme: true,
                }));
            default:
                log_1.logError(new Error("Current browser unknown in NavSequenceDetector.parseOriginForBrowser"));
                return origin_1.parseOrigin(url, new origin_1.OriginParseOptions());
        }
    }
    onEvent(tabId, url, handleEvent) {
        const tabNavSequence = this.tabNavSequences.get(tabId);
        if (maybe_1.none(tabNavSequence)) {
            return new EmptyNavSequenceDetections();
        }
        const origin = this.parseOriginForBrowser(url);
        handleEvent(tabNavSequence, url, origin);
        const tabNavSequenceDetector = this.tabNavSequenceDetectors.get(tabId);
        if (maybe_1.none(tabNavSequenceDetector)) {
            return new EmptyNavSequenceDetections();
        }
        return new NavSequenceDetections(tabNavSequenceDetector.detectedNavSequences, tabNavSequenceDetector.possiblyDetectedNavSequences);
    }
    onNavigate(tabId, url, category, groups, isNewTab, didUserCreateTab) {
        return this.onEvent(tabId, url, (tabNavSequence, url, origin) => {
            tabNavSequence.onNavigate(url, origin, category, groups, isNewTab, didUserCreateTab);
        });
    }
    onRedirect(tabId, url, category, groups) {
        return this.onEvent(tabId, url, (tabNavSequence, url, origin) => {
            tabNavSequence.onRedirect(url, origin, category, groups);
        });
    }
    onContentType(tabId, url, category, groups, contentType) {
        return this.onEvent(tabId, url, (tabNavSequence, url, origin) => {
            tabNavSequence.onContentType(url, origin, category, groups, contentType);
        });
    }
}
exports.PhishingNavSequenceDetector = PhishingNavSequenceDetector;
function compareHigher(a, b) {
    if (a > b) {
        return -1;
    }
    else if (a < b) {
        return 1;
    }
    else {
        return 0;
    }
}
function compareTrackedNavSequences(a, b) {
    const aPrecedence = a.precedence;
    const bPrecedence = b.precedence;
    if (maybe_1.none(aPrecedence) || maybe_1.none(bPrecedence)) {
        return 0;
    }
    return compareHigher(aPrecedence, bPrecedence);
}
function sortDetectedNavSequences(detectedNavSequences) {
    if (array_utils_1.isEmpty(detectedNavSequences)) {
        return [];
    }
    return detectedNavSequences.sort(compareTrackedNavSequences);
}


/***/ }),
/* 50 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
const http_method_1 = __webpack_require__(51);
const origin_1 = __webpack_require__(9);
const hash_map_1 = __webpack_require__(16);
const maybe_1 = __webpack_require__(0);
const nav_sequence_parser_1 = __webpack_require__(36);
const murmur_hash_1 = __webpack_require__(11);
const string_utils_1 = __webpack_require__(3);
var TabType;
(function (TabType) {
    TabType[TabType["newTab"] = 0] = "newTab";
    TabType[TabType["sameTab"] = 1] = "sameTab";
})(TabType = exports.TabType || (exports.TabType = {}));
class PhishingSourceSitesKey {
    constructor(tabType, navType, methodType) {
        this.tabType = tabType;
        this.navType = navType;
        this.methodType = methodType;
    }
    hashWithSeed(seed) {
        let hash = seed;
        hash = murmur_hash_1.murmurHash(this.tabType, hash);
        hash = murmur_hash_1.murmurHash(this.navType, hash);
        hash = murmur_hash_1.murmurHash(this.methodType, hash);
        return hash;
    }
    hash() {
        const seed = 0;
        return this.hashWithSeed(seed);
    }
    compare(other) {
        return (this.tabType === other.tabType) &&
            (this.navType === other.navType) &&
            (this.methodType === other.methodType);
    }
}
class EmptyPhishingSourceSites {
    isPhishingSourceSite(origin) {
        return false;
    }
    isWebMailSite(origin) {
        return false;
    }
    siteRequiresAuth(origin) {
        return false;
    }
    isAuthSite(origin) {
        return false;
    }
    findGroups(origin) {
        return [];
    }
    shouldBlockNavigation(tabType, navType, methodType, origin) {
        return false;
    }
    get shouldEnablePageInputEventHeuristics() {
        return true;
    }
    get shouldEnableNavigationRequestTypeHeuristics() {
        return true;
    }
}
exports.EmptyPhishingSourceSites = EmptyPhishingSourceSites;
class PhishingSourceSites {
    constructor(serializedSites) {
        this.serializedSites = serializedSites;
        this.keyedSites = hash_map_1.makeDefaultHashMap();
        this.groups = new origin_1.OriginGrouper();
        this.phishingSourceSites = this.parseOriginMatcher(serializedSites.phishingSourceSites);
        this.webMailSites = this.parseOriginMatcher(serializedSites.webMail);
        this.requireAuthSites = this.parseOriginMatcher(serializedSites.advanced.requireAuth);
        this.authSites = this.parseOriginMatcher(serializedSites.advanced.auth);
        this.parseGroups(serializedSites.groups);
        this.deserializeKeyedSites(serializedSites);
    }
    get originParseOptions() {
        return new origin_1.OriginParseOptions({
            allowWildcards: true,
            allowMissingWildcardScheme: true
        });
    }
    parseOriginMatcher(specList) {
        return origin_1.parseOriginMatcher(specList, this.originParseOptions);
    }
    parseGroups(serializedGroups) {
        for (const group of Object.keys(serializedGroups)) {
            const specList = serializedGroups[group];
            this.groups.addFromSpecList(specList, group, this.originParseOptions);
        }
    }
    makeKey(tabType, navType, methodType) {
        const key = new PhishingSourceSitesKey(tabType, navType, methodType);
        return key;
    }
    shouldBlockNavigation(tabType, navType, methodType, origin) {
        const key = this.makeKey(tabType, navType, methodType);
        const matcher = this.keyedSites.get(key);
        if (maybe_1.none(matcher)) {
            return false;
        }
        return matcher.has(origin);
    }
    isPhishingSourceSite(origin) {
        return this.phishingSourceSites.has(origin);
    }
    isWebMailSite(origin) {
        return this.webMailSites.has(origin);
    }
    siteRequiresAuth(origin) {
        return this.requireAuthSites.has(origin);
    }
    isAuthSite(origin) {
        return this.authSites.has(origin);
    }
    findGroups(origin) {
        return this.groups.match(origin);
    }
    get shouldEnablePageInputEventHeuristics() {
        return this.serializedSites.advanced.heuristics.pageInputEvents;
    }
    get shouldEnableNavigationRequestTypeHeuristics() {
        return this.serializedSites.advanced.heuristics.navigationRequestType;
    }
    addKeyedSites(tabType, navType, methodType, specList) {
        const deduplicate = (values) => {
            const set = string_utils_1.makeStringHashSet();
            set.addMany(values);
            return set.toArray();
        };
        const dedeuplicatedSpecList = deduplicate(specList);
        const matcher = this.parseOriginMatcher(dedeuplicatedSpecList);
        const key = this.makeKey(tabType, navType, methodType);
        this.keyedSites.put(key, matcher);
    }
    deserializeKeyedSites(serializedSites) {
        const withWebMail = (sites) => {
            return sites.concat(serializedSites.webMail);
        };
        const withPhishingSourceSites = (sites) => {
            return sites.concat(serializedSites.phishingSourceSites);
        };
        const withDisableHeuristics = (() => {
            if (this.shouldEnableNavigationRequestTypeHeuristics) {
                return (sites) => {
                    return sites;
                };
            }
            else {
                return (sites) => {
                    return withPhishingSourceSites(withWebMail(sites));
                };
            }
        })();
        this.addKeyedSites(TabType.newTab, nav_sequence_parser_1.NavType.navigation, http_method_1.HttpMethodType.get, withPhishingSourceSites(withWebMail(serializedSites.advanced.newTab.navigate.get)));
        this.addKeyedSites(TabType.newTab, nav_sequence_parser_1.NavType.navigation, http_method_1.HttpMethodType.post, withDisableHeuristics(serializedSites.advanced.newTab.navigate.post));
        this.addKeyedSites(TabType.newTab, nav_sequence_parser_1.NavType.redirect, http_method_1.HttpMethodType.get, withDisableHeuristics(serializedSites.advanced.newTab.redirect.get));
        this.addKeyedSites(TabType.newTab, nav_sequence_parser_1.NavType.redirect, http_method_1.HttpMethodType.post, withDisableHeuristics(serializedSites.advanced.newTab.redirect.post));
        this.addKeyedSites(TabType.sameTab, nav_sequence_parser_1.NavType.navigation, http_method_1.HttpMethodType.get, withDisableHeuristics(withPhishingSourceSites(serializedSites.advanced.sameTab.navigate.get)));
        this.addKeyedSites(TabType.sameTab, nav_sequence_parser_1.NavType.navigation, http_method_1.HttpMethodType.post, withDisableHeuristics(serializedSites.advanced.sameTab.navigate.post));
        this.addKeyedSites(TabType.sameTab, nav_sequence_parser_1.NavType.redirect, http_method_1.HttpMethodType.get, withDisableHeuristics(withPhishingSourceSites(serializedSites.advanced.sameTab.redirect.get)));
        this.addKeyedSites(TabType.sameTab, nav_sequence_parser_1.NavType.redirect, http_method_1.HttpMethodType.post, withDisableHeuristics(serializedSites.advanced.sameTab.redirect.post));
    }
}
exports.PhishingSourceSites = PhishingSourceSites;


/***/ }),
/* 51 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var HttpMethodType;
(function (HttpMethodType) {
    HttpMethodType[HttpMethodType["get"] = 0] = "get";
    HttpMethodType[HttpMethodType["post"] = 1] = "post";
})(HttpMethodType = exports.HttpMethodType || (exports.HttpMethodType = {}));
;
var HttpMethodKeys;
(function (HttpMethodKeys) {
    HttpMethodKeys["get"] = "get";
    HttpMethodKeys["post"] = "post";
})(HttpMethodKeys || (HttpMethodKeys = {}));
function parseHttpMethod(method) {
    switch (method.toLowerCase()) {
        case HttpMethodKeys.get:
            return HttpMethodType.get;
        case HttpMethodKeys.post:
            return HttpMethodType.post;
        default:
            return undefined;
    }
}
exports.parseHttpMethod = parseHttpMethod;
function httpMethodTypeToString(methodType) {
    switch (methodType) {
        case HttpMethodType.get:
            return HttpMethodKeys.get.toUpperCase();
        case HttpMethodType.post:
            return HttpMethodKeys.post.toUpperCase();
        default:
            return `Invalid HttpMethodType: ${methodType}`;
    }
}
exports.httpMethodTypeToString = httpMethodTypeToString;


/***/ }),
/* 52 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
const maybe_1 = __webpack_require__(0);
const url_utils_1 = __webpack_require__(4);
const number_utils_1 = __webpack_require__(10);
function findDocumentUrl(window) {
    return url_utils_1.parseUrl(window.location.toString());
}
exports.findDocumentUrl = findDocumentUrl;
function getQueryParamFromSearch(search, queryParam) {
    const paramsString = search.substring(1);
    const params = paramsString.split("&");
    for (const pairString of params) {
        const pair = pairString.split("=");
        if (decodeURIComponent(pair[0]) === queryParam) {
            return decodeURIComponent(pair[1]);
        }
    }
    return null;
}
function findDocumentQueryParam(documentUrl, queryParam) {
    if (maybe_1.none(documentUrl)) {
        return "";
    }
    let value = null;
    if (documentUrl.searchParams === undefined) {
        try {
            const searchParams = new URLSearchParams(documentUrl.search);
            value = searchParams.get(queryParam);
        }
        catch (e) {
            value = getQueryParamFromSearch(documentUrl.search, queryParam);
        }
    }
    else {
        value = documentUrl.searchParams.get(queryParam);
    }
    if (value === null) {
        return undefined;
    }
    return value;
}
exports.findDocumentQueryParam = findDocumentQueryParam;
function findURLDocumentQueryParam(documentUrl, queryParam) {
    const queryParamValue = findDocumentQueryParam(documentUrl, queryParam);
    if (maybe_1.none(queryParamValue)) {
        return undefined;
    }
    return url_utils_1.parseUrl(queryParamValue);
}
exports.findURLDocumentQueryParam = findURLDocumentQueryParam;
function findNumberDocumentQueryParam(documentUrl, queryParamName) {
    const queryParamValue = findDocumentQueryParam(documentUrl, queryParamName);
    if (maybe_1.none(queryParamValue)) {
        return undefined;
    }
    return number_utils_1.parseNumber(queryParamValue);
}
exports.findNumberDocumentQueryParam = findNumberDocumentQueryParam;


/***/ }),
/* 53 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var OptionNames;
(function (OptionNames) {
    OptionNames["navigateToSpec"] = "navigateSpec";
    OptionNames["blockedSpec"] = "blockedSpec";
    OptionNames["contentType"] = "contentType";
    OptionNames["rememberDecisionsDefault"] = "rememberDecisionsDefault";
    OptionNames["isConsumerProduct"] = "isConsumerProduct";
    OptionNames["learnMoreURL"] = "learnMoreURL";
    OptionNames["launchedSpec"] = "launchedSpec";
})(OptionNames = exports.OptionNames || (exports.OptionNames = {}));


/***/ }),
/* 54 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
const message_decoder_1 = __webpack_require__(55);
const event_dispatcher_1 = __webpack_require__(20);
function handleInvalidMessage(port, invalidMessage) {
    console.log(`handleInvalidMessage: invalidMessage: ${invalidMessage}`);
}
function onUnhandledMessage(port, message) {
    console.log(`onUnhandledMessage: message: ${message}`);
}
class MessageRouter {
    constructor(handleInvalidMessage, onUnhandledMessage) {
        this.handleInvalidMessage = handleInvalidMessage;
        this.onUnhandledMessage = onUnhandledMessage;
        this.messageHandlers = new Map();
    }
    registerMessageHandler(type, handleMessage) {
        this.registerPortMessageHandler(type, (port, message) => {
            handleMessage(message);
        });
    }
    registerPortMessageHandler(type, handleMessage) {
        const messageHandlers = this.messageHandlers.get(type);
        if (messageHandlers === undefined) {
            this.messageHandlers.set(type, [handleMessage]);
        }
        else {
            messageHandlers.push(handleMessage);
        }
    }
}
class GenericMessageRouter extends MessageRouter {
    constructor() {
        super(handleInvalidMessage, onUnhandledMessage);
        this.onMessageDecoded = new event_dispatcher_1.EventDispatcher();
    }
    onMessageReceived(port, encodedMessage) {
        let message = message_decoder_1.decodeMessage(encodedMessage);
        if (message === undefined) {
            this.handleInvalidMessage(port, encodedMessage);
            return;
        }
        this.onMessageDecoded.dispatchEvent(new message_decoder_1.MessageDecodedEvent(message));
        const messageHandlers = this.messageHandlers.get(message.type);
        if (messageHandlers === undefined) {
            this.onUnhandledMessage(port, message);
            return;
        }
        for (const handleMessage of messageHandlers) {
            handleMessage(port, message);
        }
    }
}
exports.GenericMessageRouter = GenericMessageRouter;


/***/ }),
/* 55 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
const message_types_1 = __webpack_require__(2);
const number_utils_1 = __webpack_require__(10);
function decodeMessage(encodedMessage) {
    let message = encodedMessage;
    if (message.type === undefined) {
        message = JSON.parse(encodedMessage.toString());
        if (message.type === undefined) {
            return undefined;
        }
    }
    if (!number_utils_1.isNumber(message.type)) {
        return undefined;
    }
    if (!message_types_1.isMessageType(message.type)) {
        return undefined;
    }
    return message;
}
exports.decodeMessage = decodeMessage;
class MessageDecodedEvent {
    constructor(message) {
        this.message = message;
    }
}
exports.MessageDecodedEvent = MessageDecodedEvent;


/***/ }),
/* 56 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
const host_constants_1 = __webpack_require__(12);
const port_resolver_1 = __webpack_require__(57);
const page_port_controller_1 = __webpack_require__(24);
const message_types_1 = __webpack_require__(2);
const messages_1 = __webpack_require__(5);
const i18n_1 = __webpack_require__(31);
const log_1 = __webpack_require__(1);
const promise_utils_1 = __webpack_require__(13);
const maybe_1 = __webpack_require__(0);
const config_keys_1 = __webpack_require__(7);
const protocol_versions_1 = __webpack_require__(14);
const branding_1 = __webpack_require__(99);
exports.sureClickAdvancedHelpHostname = "https://help-sureclickadvanced.bromium-online.com";
exports.sureClickHelpHostname = "https://help-sureclick.bromium-online.com";
exports.bromiumHelpHostname = "https://help.bromium-online.com";
class PopupPageController {
    constructor(port, currentPopupMessage, openPhishingLinksInSecureBrowser, isEnterpriseProduct, dontAskAgain, helpLinkURL, onDisconnect, hostHelperMessageSender, featureManager) {
        this.currentPopupMessage = currentPopupMessage;
        this.openPhishingLinksInSecureBrowser = openPhishingLinksInSecureBrowser;
        this.isEnterpriseProduct = isEnterpriseProduct;
        this.dontAskAgain = dontAskAgain;
        this.helpLinkURL = helpLinkURL;
        this.onDisconnect = onDisconnect;
        this.hostHelperMessageSender = hostHelperMessageSender;
        this.featureManager = featureManager;
        this.pagePortController = new page_port_controller_1.PagePortController(chrome.tabs.TAB_ID_NONE, port, (port) => { }, (port) => { this.onDisconnect(); });
        this.pagePortController.registerMessageHandler(message_types_1.MessageType.popupDataRequestV1, (message) => this.handlePopupDataRequest(message));
        this.pagePortController.connect();
        if (i18n_1.popupType === i18n_1.PopupType.clearRememberedDecisions) {
            this.pagePortController.registerMessageHandler(message_types_1.MessageType.clearRememberedDecisionsV1, (message) => this.clearAllRememberedDecisions(message));
        }
    }
    clearAllRememberedDecisions(message) {
        this.hostHelperMessageSender.sendMessage(message_types_1.MessageType.clearRememberedDecisionsV1, new messages_1.ClearRememberedDecisionsV1());
    }
    updatePopupData(i18nMessage, openPhishingLinksInSecureBrowser, isEnterpriseProduct, dontAskAgain, helpLinkURL) {
        this.currentPopupMessage = i18nMessage;
        this.openPhishingLinksInSecureBrowser = openPhishingLinksInSecureBrowser;
        this.isEnterpriseProduct = isEnterpriseProduct;
        this.dontAskAgain = dontAskAgain;
        this.helpLinkURL = helpLinkURL;
        this.sendPopupDataResponse();
    }
    sendPopupDataResponse() {
        let message = this.currentPopupMessage;
        if (this.dontAskAgain && message === i18n_1.I18nMessages.popupNoError) {
            message = i18n_1.I18nMessages.popupDontAskAgain;
        }
        this.pagePortController.sendMessage(message_types_1.MessageType.popupDataResponseV11, new messages_1.PopupDataResponseV11(message, this.showClearRememberedDecisionsInfo, this.isEnterpriseProduct, this.helpLinkURL));
    }
    handlePopupDataRequest(message) {
        this.sendPopupDataResponse();
    }
    get showClearRememberedDecisionsInfo() {
        if (this.dontAskAgain || this.openPhishingLinksInSecureBrowser) {
            return false;
        }
        return this.featureManager.isLinkProtectionEnabled || this.featureManager.isPDFProtectionEnabled;
    }
}
class PopupController {
    constructor(hostHelperMessageSender, configNotifier, errorHandler, featureManager, handshaker) {
        this.hostHelperMessageSender = hostHelperMessageSender;
        this.featureManager = featureManager;
        this.openPhishingLinksInSecureBrowser = false;
        this.isEnterpriseProduct = false;
        this.dontAskAgain = false;
        this.isSureClick = branding_1.isSureClick();
        configNotifier.addConfigListenerForKeys(this.onConfigChanged.bind(this), [config_keys_1.ConfigKey.openPhishingLinksInSecureBrowser, config_keys_1.ConfigKey.isEnterpriseProduct, config_keys_1.ConfigKey.dontAskAgain]);
        this.portResolver = new port_resolver_1.PortResolver(host_constants_1.hostConstants.popupPortName, port => this.onUnresolvedPortConnected(port));
        const port = this.portResolver.resolvePort();
        this.currentPopupMessage = errorHandler.isDormant ? i18n_1.I18nMessages.popupGenericError : i18n_1.I18nMessages.popupNoError;
        errorHandler.onPopupDataChanged.registerEventHandler(this.onPopupDataChanged.bind(this));
        if (handshaker.isHandshaken && maybe_1.some(handshaker.negotiatedVersion)) {
            this.onHandshaken(handshaker.negotiatedVersion);
        }
        else {
            handshaker.onHandshaken.registerEventHandler(event => this.onHandshaken(event.negotiatedVersion));
        }
        this.makeNewPageController(port);
    }
    onHandshaken(negotiatedVersion) {
        this.negotiatedVersion = negotiatedVersion;
        this.updatePopupData();
    }
    onConfigChanged(key, config) {
        switch (key) {
            case config_keys_1.ConfigKey.openPhishingLinksInSecureBrowser:
                this.openPhishingLinksInSecureBrowser = config.openPhishingLinksInSecureBrowser;
                this.updatePopupData();
                break;
            case config_keys_1.ConfigKey.isEnterpriseProduct:
                this.isEnterpriseProduct = config.isEnterpriseProduct;
                this.updatePopupData();
                break;
            case config_keys_1.ConfigKey.dontAskAgain:
                this.dontAskAgain = config.dontAskAgain;
                this.updatePopupData();
                break;
        }
    }
    onPopupDataChanged(newPopupMessage) {
        log_1.log(`Setting popup message to internationalised string ${newPopupMessage}`);
        if (this.currentPopupMessage !== newPopupMessage) {
            this.currentPopupMessage = newPopupMessage;
            this.updatePopupData();
        }
    }
    updatePopupData() {
        if (maybe_1.some(this.popupPageController)) {
            this.popupPageController.updatePopupData(this.currentPopupMessage, this.openPhishingLinksInSecureBrowser, this.isEnterpriseProduct, this.dontAskAgain, this.helpLinkURL);
        }
    }
    makeNewPageController(port) {
        this.popupPageController = new PopupPageController(port, this.currentPopupMessage, this.openPhishingLinksInSecureBrowser, this.isEnterpriseProduct, this.dontAskAgain, this.helpLinkURL, () => { this.onPortDisconnected(); }, this.hostHelperMessageSender, this.featureManager);
    }
    onPortDisconnected() {
        this.popupPageController = undefined;
        const port = this.portResolver.resolvePort();
        this.makeNewPageController(port);
    }
    onUnresolvedPortConnected(port) {
        log_1.log("PopupController.onUnexpectedPortConnected");
        if (maybe_1.none(this.popupPageController)) {
            this.makeNewPageController(promise_utils_1.makePromise(() => port));
        }
    }
    get helpLinkURL() {
        const hostname = (() => {
            if (this.isSureClick) {
                if (this.isEnterpriseProduct) {
                    return exports.sureClickAdvancedHelpHostname;
                }
                else {
                    return exports.sureClickHelpHostname;
                }
            }
            else {
                return exports.bromiumHelpHostname;
            }
        })();
        const version = protocol_versions_1.getHelpPageVersion(this.negotiatedVersion);
        const localisedHelpFile = i18n_1.getI18n(i18n_1.I18nMessages.helpLinkFile);
        return `${hostname}/secure-browsing/${version}/${localisedHelpFile}`;
    }
}
exports.PopupController = PopupController;


/***/ }),
/* 57 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
const maybe_1 = __webpack_require__(0);
const promise_utils_1 = __webpack_require__(13);
const string_utils_1 = __webpack_require__(3);
class PortResolver {
    constructor(portName, onUnresolvedPortConnected) {
        this.portName = portName;
        this.onUnresolvedPortConnected = onUnresolvedPortConnected;
        this.resolver = undefined;
        chrome.runtime.onConnect.addListener(this.onPortConnected.bind(this));
    }
    onPortConnected(port) {
        if (!string_utils_1.compareStrings(port.name, this.portName)) {
            return;
        }
        if (maybe_1.none(this.resolver)) {
            this.onUnresolvedPortConnected(port);
            return;
        }
        this.resolver(port);
    }
    resolvePort() {
        return promise_utils_1.makePromiseAsync((resolve) => {
            this.resolver = resolve;
        });
    }
}
exports.PortResolver = PortResolver;


/***/ }),
/* 58 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
const message_sender_1 = __webpack_require__(59);
const messages_1 = __webpack_require__(5);
const message_types_1 = __webpack_require__(2);
const message_encoder_1 = __webpack_require__(60);
const message_decoder_1 = __webpack_require__(55);
const maybe_1 = __webpack_require__(0);
const event_dispatcher_1 = __webpack_require__(20);
const handshaker_1 = __webpack_require__(97);
const string_utils_1 = __webpack_require__(3);
const errors_1 = __webpack_require__(21);
const port_utils_1 = __webpack_require__(29);
const protocol_versions_1 = __webpack_require__(14);
const connection_1 = __webpack_require__(38);
const log_1 = __webpack_require__(1);
var Negotiation;
(function (Negotiation) {
    Negotiation[Negotiation["None"] = 0] = "None";
    Negotiation[Negotiation["NegotiateProtocolVersion"] = 1] = "NegotiateProtocolVersion";
})(Negotiation = exports.Negotiation || (exports.Negotiation = {}));
class MessagePortChannel {
    constructor(connectToPort, onConnect, onDisconnect, onPortError, onNegotiationError, messageRouter, negotiation) {
        this.connectToPort = connectToPort;
        this.onConnect = onConnect;
        this.onDisconnect = onDisconnect;
        this.onPortError = onPortError;
        this.onNegotiationError = onNegotiationError;
        this.messageRouter = messageRouter;
        this.negotiation = negotiation;
        this.onHandshaken = new event_dispatcher_1.EventDispatcher();
        this.onConnectionStateChanged = new event_dispatcher_1.EventDispatcher();
        this.messages = new Array();
        this._connState = connection_1.ConnectionState.Disconnected;
        this._negotiatedVersion = undefined;
        this.messageSender = new message_sender_1.MessageSender((message) => this.sendMessage(message));
    }
    disconnectPort(port) {
        port.disconnect();
        this.handleDisconnect(port);
    }
    connect() {
        console.log("MessagePortChannel.connect");
        if (this.connState !== connection_1.ConnectionState.Disconnected) {
            throw new Error(`MessagePortChannel.connect called with connState == ${this.connState}`);
        }
        this.connState = connection_1.ConnectionState.Connecting;
        this.connectToPort.then((port) => {
            if (this.connState === connection_1.ConnectionState.Disconnecting) {
                this.disconnectPort(port);
                return;
            }
            this.port = port;
            this.port.onMessage.addListener((encodeMessage, port) => this.onMessage(encodeMessage, port));
            this.port.onDisconnect.addListener((port) => this.handleDisconnect(port));
            if (this.negotiation === Negotiation.NegotiateProtocolVersion) {
                this.connState = connection_1.ConnectionState.Handshaking;
                const handshake = new messages_1.HandshakeV1(protocol_versions_1.supportedProtocolVersions);
                const message = message_encoder_1.encodeMessage(message_types_1.MessageType.handshakeV1, handshake);
                this.postMessage(message);
            }
            else {
                this.sendQueuedMessages();
                this.connState = connection_1.ConnectionState.Connected;
                this.onConnect(this.port);
            }
        });
    }
    disconnect() {
        console.log(`MessagePortChannel.connect: connState == ${this.connState}`);
        switch (this.connState) {
            case connection_1.ConnectionState.Disconnected:
                break;
            case connection_1.ConnectionState.Disconnecting:
                break;
            case connection_1.ConnectionState.Connecting:
                this.connState = connection_1.ConnectionState.Disconnecting;
                break;
            case connection_1.ConnectionState.Handshaking:
                if (maybe_1.some(this.port)) {
                    this.disconnectPort(this.port);
                }
                break;
            case connection_1.ConnectionState.Connected:
                if (maybe_1.some(this.port)) {
                    this.disconnectPort(this.port);
                }
                break;
        }
    }
    postMessage(message) {
        try {
            if (maybe_1.none(this.port)) {
                throw new Error("MessagePortChannel.postMessage: this.port === undefined");
            }
            if (!message_types_1.isFrequentlySentMessageType(message.type)) {
                this.log(`MessagePortChannel.postMessage: message: ${messages_1.messageToString(message)}`);
            }
            this.port.postMessage(message);
        }
        catch (e) {
            if (errors_1.isError(e)) {
                this.onPortError(e);
            }
            else {
                const error = new Error(`Unknown error caught in postMessage: ${string_utils_1.toString(e)}`);
                this.onPortError(error);
            }
        }
    }
    sendQueuedMessages() {
        for (const message of this.messages) {
            this.postMessage(message);
        }
        this.messages = [];
    }
    queueMessage(message) {
        this.messages.push(message);
    }
    sendMessage(message) {
        if (this.connState === connection_1.ConnectionState.Connected) {
            this.postMessage(message);
        }
        else {
            this.queueMessage(message);
        }
        return true;
    }
    onMessage(encodedMessage, port) {
        if (this.connState === connection_1.ConnectionState.Handshaking) {
            this.log(`MessagePortChannel.onMessage: message: ${string_utils_1.toString(encodedMessage)} port: ${port_utils_1.portToString(port)}`);
            let message = message_decoder_1.decodeMessage(encodedMessage);
            if (maybe_1.none(message)) {
                this.logError(new Error('MessagePortChannel.onMessage: invalid message'));
            }
            else if (message_types_1.isEdgeAckWorkaround(message.type)) {
            }
            else if (message.type !== message_types_1.MessageType.handshakeV1) {
                this.onNegotiationError(new Error(`Message before handshaken: ${message.type}`));
            }
            else if (maybe_1.none(this.port)) {
                this.onPortError(new Error("MessagePortChannel.onMessage: this.port === undefined"));
            }
            else {
                const handshake = message.payload;
                for (const supportedVersion of protocol_versions_1.supportedProtocolVersions) {
                    if (handshake.versions.indexOf(supportedVersion) >= 0) {
                        this._negotiatedVersion = supportedVersion;
                        this.log(`Negotiated protocol version: ${this._negotiatedVersion}`);
                        this.sendQueuedMessages();
                        this.connState = connection_1.ConnectionState.Connected;
                        this.onHandshaken.dispatchEvent(new handshaker_1.HandshakenEvent(this._negotiatedVersion));
                        this.onConnect(this.port);
                        return;
                    }
                }
                this.onNegotiationError(new Error(`No supported version received in handshake: ${handshake.versions}`));
            }
        }
        else if (this.connState == connection_1.ConnectionState.Connected) {
            this.messageRouter.onMessageReceived(port, encodedMessage);
        }
    }
    handleDisconnect(port) {
        if (this.connState === connection_1.ConnectionState.Disconnected) {
            return;
        }
        this.connState = connection_1.ConnectionState.Disconnected;
        this.port = undefined;
        console.log(`MessagePortChannel.handleDisconnect: port: ${port_utils_1.portToString(port)}`);
        this.onDisconnect(port);
    }
    shouldLogMessage() {
        if (this.negotiation === Negotiation.None) {
            return true;
        }
        return maybe_1.some(this.negotiatedVersion) && protocol_versions_1.shouldLogMessage(this.negotiatedVersion);
    }
    log(message) {
        if (this.shouldLogMessage()) {
            log_1.log(message);
        }
        else {
            console.log(message);
        }
    }
    logError(error) {
        if (this.shouldLogMessage()) {
            log_1.logError(error);
        }
        else {
            console.error(error);
        }
    }
    get connState() {
        return this._connState;
    }
    set connState(newState) {
        const oldState = this._connState;
        this._connState = newState;
        this.onConnectionStateChanged.dispatchEvent(new connection_1.ConnectionStateChangedEvent(oldState, newState));
    }
    get isHandshaken() {
        return this.connState === connection_1.ConnectionState.Connected;
    }
    get negotiatedVersion() {
        return this._negotiatedVersion;
    }
    get connectionState() {
        return this.connState;
    }
}
exports.MessagePortChannel = MessagePortChannel;
class GenericMessagePortChannel extends MessagePortChannel {
    constructor(connectToPort, onConnect, onDisconnect, messageRouter, negotiation) {
        super(connectToPort, onConnect, onDisconnect, (e) => { console.error(e); }, (e) => { console.error(e); }, messageRouter, negotiation);
    }
}
exports.GenericMessagePortChannel = GenericMessagePortChannel;


/***/ }),
/* 59 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
const message_encoder_1 = __webpack_require__(60);
class MessageSender {
    constructor(doSendMessage) {
        this.doSendMessage = doSendMessage;
    }
    sendMessage(type, payload) {
        const message = message_encoder_1.encodeMessage(type, payload);
        return this.doSendMessage(message);
    }
}
exports.MessageSender = MessageSender;


/***/ }),
/* 60 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
function encodeMessage(type, payload) {
    return { type: type, payload: payload };
}
exports.encodeMessage = encodeMessage;


/***/ }),
/* 61 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
const event_dispatcher_1 = __webpack_require__(20);
const once_1 = __webpack_require__(30);
const log_1 = __webpack_require__(1);
class OnConfiguredManager {
    constructor() {
        this.onConfigured = once_1.doOnce(() => {
            this.configured = true;
            log_1.log("OnConfiguredManager: SBX is fully configured");
            this.onConfiguredDispatcher.setCondition();
        });
        this.onConfiguredDispatcher = new event_dispatcher_1.ConditionDispatcher();
        this.configured = false;
    }
    registerListener(listener) {
        this.onConfiguredDispatcher.registerConditionListener(listener);
    }
    get isConfigured() {
        return this.configured;
    }
}
exports.OnConfiguredManager = OnConfiguredManager;
class DummyOnConfigured {
    constructor() {
        this.isConfigured = true;
    }
    registerListener(listener) {
        listener();
    }
}
exports.DummyOnConfigured = DummyOnConfigured;


/***/ }),
/* 62 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
const url_utils_1 = __webpack_require__(4);
const array_utils_1 = __webpack_require__(8);
class UrlEncoder {
    constructor(url) {
        this.url = url;
        this.queryParams = new Array();
    }
    addUrlQueryParam(name, value) {
        this.addQueryParam(name, url_utils_1.URLToString(value));
    }
    addQueryParam(name, value) {
        this.queryParams.push([name, encodeURIComponent(value)]);
    }
    encodeQueryParam(name, value) {
        return `${name}=${value}`;
    }
    encodeQueryParams() {
        return this.queryParams.map(([name, value]) => this.encodeQueryParam(name, value)).join("&");
    }
    encodeUrl() {
        if (array_utils_1.isEmpty(this.queryParams)) {
            return this.url;
        }
        const spec = `${url_utils_1.URLToString(this.url)}?${this.encodeQueryParams()}`;
        return url_utils_1.parseUrl(spec);
    }
}
exports.UrlEncoder = UrlEncoder;


/***/ }),
/* 63 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
const errors_1 = __webpack_require__(21);
const once_1 = __webpack_require__(30);
const messages_1 = __webpack_require__(5);
const message_types_1 = __webpack_require__(2);
const config_keys_1 = __webpack_require__(7);
const i18n_1 = __webpack_require__(31);
const browser_action_1 = __webpack_require__(106);
const maybe_1 = __webpack_require__(0);
const number_utils_1 = __webpack_require__(10);
const browser_1 = __webpack_require__(6);
const host_constants_1 = __webpack_require__(12);
const protocol_versions_1 = __webpack_require__(14);
const connection_1 = __webpack_require__(38);
const event_dispatcher_1 = __webpack_require__(20);
exports.maxFailedReloadAttempts = 3;
exports.maxFailedReconnectAttempts = 30;
const log = console.log;
const logError = console.error;
class ExtensionReloader {
    constructor() {
        this.reload = once_1.doOnce(() => {
            this.readFailedReloadAttempts((failedReloadAttempts) => {
                this.reloadExtension(failedReloadAttempts);
            });
        });
        this.loadedSuccessfully = once_1.doOnce(() => {
            this.writeFailedReloadAttempts({ failedReloadAttempts: 0, isReload: false }, () => {
                log(`ExtensionReloader.loadedSuccessfully: reset failedReloadAttempts`);
            });
        });
        chrome.runtime.onStartup.addListener(() => this.onStartup());
        this.readFailedReloadAttempts(failedReloadAttemps => {
            log(`ExtensionReloader.constructor: failedReloadAttempts == ${failedReloadAttemps}`);
        });
    }
    onStartup() {
        log("ExtensionReloader.onStartup");
        this.loadedSuccessfully();
    }
    readFailedReloadAttempts(callback) {
        const key = ExtensionReloader.failedReloadAttemptsKey;
        chrome.storage.local.get(key, (items) => {
            const error = chrome.runtime.lastError;
            if (error) {
                logError(new Error(`ExtensionReloader.readFailedReloadAttempts: error: ${error.message}`));
                return;
            }
            const failedReloadAttempts = items[key];
            if (number_utils_1.isNumber(failedReloadAttempts)) {
                callback(failedReloadAttempts);
            }
            else {
                callback(0);
            }
        });
    }
    writeFailedReloadAttempts(args, callback) {
        const key = ExtensionReloader.failedReloadAttemptsKey;
        chrome.storage.local.set({
            [key]: args.failedReloadAttempts
        }, () => {
            const error = chrome.runtime.lastError;
            if (error) {
                logError(new Error(`ExtensionReloader.writeFailedReloadAttempts: error: ${error.message}`));
                return;
            }
            callback();
        });
    }
    reloadExtension(failedReloadAttempts) {
        if (failedReloadAttempts < exports.maxFailedReloadAttempts) {
            const extensionTabs = chrome.extension.getViews({ type: "tab" });
            if (extensionTabs.length > 0) {
                setTimeout(() => this.reloadExtension(failedReloadAttempts), host_constants_1.hostConstants.postponementTimeout);
                return;
            }
            this.writeFailedReloadAttempts({ failedReloadAttempts: failedReloadAttempts + 1, isReload: true }, () => {
                log(`ExtensionReloader.reloadExtension: reloading extension attempt: ${failedReloadAttempts}`);
                chrome.runtime.reload();
            });
        }
    }
}
ExtensionReloader.failedReloadAttemptsKey = "failedReloadAttempts";
class ErrorHandler {
    constructor(browser, messageRouter, configNotifier, onConfiguredRaiser) {
        this.browser = browser;
        this.onConfiguredRaiser = onConfiguredRaiser;
        this.onDormantStateChanged = new event_dispatcher_1.EventDispatcher();
        this.onPopupDataChanged = new event_dispatcher_1.EventDispatcher();
        this.lastError = errors_1.ChragError.recoveredFromError;
        this._isDormant = false;
        this.extensionReloader = new ExtensionReloader();
        this.messageSender = undefined;
        this.reconnectToHelper = undefined;
        this.protocolVersion = undefined;
        this.isSBXEnabled = true;
        this.productStatus = messages_1.ProductStatuses.Enabled;
        this.isEnterpriseProduct = false;
        messageRouter.registerMessageHandler(message_types_1.MessageType.helperErrorV1, this.onHelperError.bind(this));
        this.iconUpdater = new browser_action_1.IconUpdater(this.browser, browser_action_1.IconType.normal);
        browser_action_1.setNormalBadge();
        configNotifier.addConfigListenerForKeys(this.onConfigChanged.bind(this), [config_keys_1.ConfigKey.isEnabled, config_keys_1.ConfigKey.productStatus, config_keys_1.ConfigKey.isEnterpriseProduct]);
    }
    onBrowserLaunchEvent(event) {
        if (event.didLaunch) {
            this.extensionReloader.loadedSuccessfully();
        }
    }
    get isDormant() {
        return this._isDormant;
    }
    sendDormantState() {
        try {
            this.sendMessage(message_types_1.MessageType.dormantStateChangedV1, new messages_1.DormantStateChangedV1(this.isDormant));
        }
        catch (e) {
            logError(e);
        }
    }
    enterDormantState(popupMessage, errorCode) {
        if (!this.isDormant) {
            logError(new Error("Chrag has encountered a fatal error and is entering a dormant state."));
            this._isDormant = true;
            this.onDormantStateChanged.dispatchEvent(this.isDormant);
            this.onPopupDataChanged.dispatchEvent(popupMessage);
            this.iconUpdater.setIcon(browser_action_1.IconType.error);
            if (i18n_1.isPopupError(popupMessage)) {
                browser_action_1.setErrorBadge();
            }
            if (errorCode !== errors_1.ChragError.notEnabled) {
                this.sendDormantState();
            }
        }
    }
    wakeFromDormantState(popupMessage, lastErrorCode) {
        if (this.isDormant) {
            logError(new Error("Chrag has recovered and is reactivating (waking from a dormant state)."));
            this._isDormant = false;
            this.onDormantStateChanged.dispatchEvent(this.isDormant);
            this.onPopupDataChanged.dispatchEvent(popupMessage);
            this.iconUpdater.setIcon(browser_action_1.IconType.normal);
            browser_action_1.setNormalBadge();
            if (lastErrorCode !== errors_1.ChragError.notEnabled) {
                this.sendDormantState();
            }
        }
    }
    reloadExtension() {
        log("ErrorHandler.reloadExtension");
        if (this.browser === browser_1.Browser.edge) {
            if (maybe_1.none(this.reconnectToHelper)) {
                throw new Error("ErrorHandler.reloadExtension: this.reconnectToHelper === undefined");
            }
            this.reconnectToHelper();
        }
        else {
            this.extensionReloader.reload();
        }
    }
    handleHelperError(popupMessage, errorCode) {
        log(`ErrorHandler.handleHelperError: errorCode == ${errorCode}`);
        try {
            this.enterDormantState(popupMessage, errorCode);
        }
        catch (e) {
            logError(e);
        }
        try {
            this.reloadExtension();
        }
        finally {
            this.onConfiguredRaiser.onConfigured();
        }
    }
    raiseError(errorCode, e) {
        if (e) {
            logError(e);
        }
        errorCode = this.toProtocolError(errorCode);
        logError(new Error(`ChragError raised: ${errors_1.ChragError[errorCode]}`));
        if (errorCode === this.lastError) {
            return;
        }
        try {
            switch (errorCode) {
                case errors_1.ChragError.notEnabled:
                    this.enterDormantState(this.disabledPopupMessage, errorCode);
                    break;
                case errors_1.ChragError.helperPortError:
                    this.handleHelperError(i18n_1.I18nMessages.popupMissingHelper, errorCode);
                    break;
                case errors_1.ChragError.trustDownloadFailed:
                    break;
                case errors_1.ChragError.launchBrowserFailed:
                    this.enterDormantState(i18n_1.I18nMessages.popupGenericError, errorCode);
                    break;
                case errors_1.ChragError.handshakeError:
                    this.enterDormantState(i18n_1.I18nMessages.popupGenericError, errorCode);
                    break;
                case errors_1.ChragError.unknownError:
                    this.enterDormantState(i18n_1.I18nMessages.popupGenericError, errorCode);
                    break;
                case errors_1.ChragError.recoveredFromError:
                    this.wakeFromDormantState(i18n_1.I18nMessages.popupNoError, this.lastError);
                    break;
                case errors_1.ChragError.is32bitFirefox:
                    this.enterDormantState(i18n_1.I18nMessages.popupIs32bitFirefox, errorCode);
                    break;
                case errors_1.ChragError.helperUnresponsive:
                    this.handleHelperError(i18n_1.I18nMessages.popupMissingHelper, errorCode);
                    break;
            }
        }
        finally {
            this.lastError = errorCode;
        }
    }
    onHelperError(message) {
        const helperError = message.payload;
        this.raiseError(helperError.errorType, new Error(helperError.errorMessage));
    }
    get disabledPopupMessage() {
        if (!this.isSBXEnabled) {
            return i18n_1.I18nMessages.popupSBXDisabled;
        }
        switch (this.productStatus) {
            case messages_1.ProductStatuses.Disabled:
                return i18n_1.I18nMessages.popupProductDisabled;
            case messages_1.ProductStatuses.InitRequired:
                return i18n_1.I18nMessages.popupInitRequired;
            case messages_1.ProductStatuses.Unlicensed:
                if (this.isEnterpriseProduct) {
                    return i18n_1.I18nMessages.popupUnlicensed;
                }
                else {
                    return i18n_1.I18nMessages.popupUnconfigured;
                }
            case messages_1.ProductStatuses.Unknown:
                return i18n_1.I18nMessages.popupGenericError;
        }
        return i18n_1.I18nMessages.popupNoError;
    }
    get isDisabled() {
        return !this.isSBXEnabled || this.productStatus !== messages_1.ProductStatuses.Enabled;
    }
    setIsSBXEnabled(config) {
        if (maybe_1.none(config.isEnabled)) {
            this.raiseError(errors_1.ChragError.unknownError, new Error("isEnabled config is undefined"));
            return;
        }
        switch (this.browser) {
            case browser_1.Browser.chrome:
                this.isSBXEnabled = config.isEnabled.chrome;
                return;
            case browser_1.Browser.firefox:
                this.isSBXEnabled = config.isEnabled.firefox;
                return;
            case browser_1.Browser.edge:
                this.isSBXEnabled = config.isEnabled.edge;
                return;
            case browser_1.Browser.edgeChromium:
                this.isSBXEnabled = config.isEnabled.edgeChromium;
                return;
        }
        this.raiseError(errors_1.ChragError.unknownError, new Error("Current browser unknown in ErrorHandler.onConfigChanged"));
    }
    onConfigChanged(key, config) {
        switch (key) {
            case config_keys_1.ConfigKey.isEnabled:
                this.setIsSBXEnabled(config);
                break;
            case config_keys_1.ConfigKey.productStatus:
                this.productStatus = config.productStatus;
                break;
            case config_keys_1.ConfigKey.isEnterpriseProduct:
                this.isEnterpriseProduct = config.isEnterpriseProduct;
                break;
            default:
                return;
        }
        if (this.isDisabled) {
            this.raiseError(errors_1.ChragError.notEnabled);
        }
        else if (this.isDormant && this.lastError === errors_1.ChragError.notEnabled) {
            this.raiseError(errors_1.ChragError.recoveredFromError);
        }
    }
    sendMessage(type, payload) {
        if (maybe_1.none(this.messageSender)) {
            throw new Error("ErrorHandler.sendMessage: this.messageSender === undefined");
        }
        this.messageSender.sendMessage(type, payload);
    }
    setup(messageSender, handshaker, connection, reconnectToHelper) {
        this.messageSender = messageSender;
        this.reconnectToHelper = reconnectToHelper;
        handshaker.onHandshaken.registerEventHandler((event) => {
            this.protocolVersion = event.negotiatedVersion;
        });
        connection.onConnectionStateChanged.registerEventHandler((event) => {
            if (event.newState === connection_1.ConnectionState.Connected) {
                if (this.isDormant) {
                    switch (this.lastError) {
                        case errors_1.ChragError.helperPortError:
                            this.raiseError(errors_1.ChragError.recoveredFromError);
                            break;
                        case errors_1.ChragError.helperUnresponsive:
                            this.raiseError(errors_1.ChragError.recoveredFromError);
                            break;
                        default:
                            break;
                    }
                }
            }
        });
    }
    toProtocolError(error) {
        const protocolVersion = maybe_1.some(this.protocolVersion) ? this.protocolVersion : protocol_versions_1.ProtocolVersion.v1;
        if (protocol_versions_1.isErrorSupported(error, protocolVersion)) {
            return error;
        }
        else {
            return errors_1.ChragError.unknownError;
        }
    }
}
exports.ErrorHandler = ErrorHandler;


/***/ }),
/* 64 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
const maybe_1 = __webpack_require__(0);
class RequestResponseHandler {
    constructor(requestType, responseType, makeRequest, readResponse, messageRouter, messageSender, idGenerator) {
        this.requestType = requestType;
        this.responseType = responseType;
        this.makeRequest = makeRequest;
        this.readResponse = readResponse;
        this.messageSender = messageSender;
        this.idGenerator = idGenerator;
        this.requests = new Map();
        messageRouter.registerMessageHandler(responseType, (message) => this.handleResponse(message));
    }
    sendRequest(data, onResponse) {
        const id = this.idGenerator.generateId();
        this.requests.set(id, [data, onResponse]);
        const request = this.makeRequest(id, data);
        this.messageSender.sendMessage(this.requestType, request);
    }
    handleResponse(message) {
        const [id, result] = this.readResponse(message);
        const request = this.requests.get(id);
        if (maybe_1.none(request)) {
            return;
        }
        this.requests.delete(id);
        const [data, onResponse] = request;
        onResponse(data, result);
    }
}
exports.RequestResponseHandler = RequestResponseHandler;


/***/ }),
/* 65 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
const config_1 = __webpack_require__(25);
const event_page_listener_1 = __webpack_require__(88);
const config = config_1.loadConfig();
const eventPageListener = new event_page_listener_1.EventPageListener(config);


/***/ }),
/* 66 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/*jslint node: true*/

module.exports = __webpack_require__(67);


/***/ }),
/* 67 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/**
# qlobber&nbsp;&nbsp;&nbsp;[![Build Status](https://travis-ci.org/davedoesdev/qlobber.png)](https://travis-ci.org/davedoesdev/qlobber) [![Coverage Status](https://coveralls.io/repos/davedoesdev/qlobber/badge.png?branch=master)](https://coveralls.io/r/davedoesdev/qlobber?branch=master) [![NPM version](https://badge.fury.io/js/qlobber.png)](http://badge.fury.io/js/qlobber)

Node.js globbing for amqp-like topics.

Example:

```javascript
var Qlobber = require('qlobber').Qlobber;
var matcher = new Qlobber();
matcher.add('foo.*', 'it matched!');
assert.deepEqual(matcher.match('foo.bar'), ['it matched!']);
assert(matcher.test('foo.bar', 'it matched!'));
```

The API is described [here](#tableofcontents).

qlobber is implemented using a trie, as described in the RabbitMQ blog posts [here](http://www.rabbitmq.com/blog/2010/09/14/very-fast-and-scalable-topic-routing-part-1/) and [here](http://www.rabbitmq.com/blog/2011/03/28/very-fast-and-scalable-topic-routing-part-2/).

## Installation

```shell
npm install qlobber
```

## Another Example

A more advanced example using topics from the [RabbitMQ topic tutorial](http://www.rabbitmq.com/tutorials/tutorial-five-python.html):

```javascript
var matcher = new Qlobber();
matcher.add('*.orange.*', 'Q1');
matcher.add('*.*.rabbit', 'Q2');
matcher.add('lazy.#', 'Q2');
assert.deepEqual(['quick.orange.rabbit',
                  'lazy.orange.elephant',
                  'quick.orange.fox',
                  'lazy.brown.fox',
                  'lazy.pink.rabbit',
                  'quick.brown.fox',
                  'orange',
                  'quick.orange.male.rabbit',
                  'lazy.orange.male.rabbit'].map(function (topic)
                  {
                      return matcher.match(topic).sort();
                  }),
                 [['Q1', 'Q2'],
                  ['Q1', 'Q2'],
                  ['Q1'],
                  ['Q2'],
                  ['Q2', 'Q2'],
                  [],
                  [],
                  [],
                  ['Q2']]);
```

## Licence

[MIT](LICENCE)

## Tests

qlobber passes the [RabbitMQ topic tests](https://github.com/rabbitmq/rabbitmq-server/blob/master/src/rabbit_tests.erl) (I converted them from Erlang to Javascript).

To run the tests:

```shell
grunt test
```

## Lint

```shell
grunt lint
```

## Code Coverage

```shell
grunt coverage
```

[Instanbul](http://gotwarlost.github.io/istanbul/) results are available [here](http://rawgit.davedoesdev.com/davedoesdev/qlobber/master/coverage/lcov-report/index.html).

Coveralls page is [here](https://coveralls.io/r/davedoesdev/qlobber).

## Benchmarks

```shell
grunt bench
```

qlobber is also benchmarked in [ascoltatori](https://github.com/mcollina/ascoltatori).

# API
*/

/*jslint node: true, nomen: true */


var util = __webpack_require__(68);

/**
Creates a new qlobber.

@constructor
@param {Object} [options] Configures the qlobber. Use the following properties:
- `{String} separator` The character to use for separating words in topics. Defaults to '.'. MQTT uses '/' as the separator, for example.

- `{String} wildcard_one` The character to use for matching exactly one word in a topic. Defaults to '*'. MQTT uses '+', for example.

- `{String} wildcard_some` The character to use for matching zero or more words in a topic. Defaults to '#'. MQTT uses '#' too.

- `{Boolean} cache_adds` Whether to cache topics when adding topic matchers. This will make adding multiple matchers for the same topic faster at the cost of extra memory usage. Defaults to `false`.
*/
function Qlobber (options)
{
    options = options || {};

    this._separator = options.separator || '.';
    this._wildcard_one = options.wildcard_one || '*';
    this._wildcard_some = options.wildcard_some || '#';
    this._trie = new Map();
    if (options.cache_adds)
    {
        this._shortcuts = new Map();
    }
}

Qlobber.prototype._initial_value = function (val)
{
    return [val];
};

Qlobber.prototype._add_value = function (vals, val)
{
    vals[vals.length] = val;
};

Qlobber.prototype._add_values = function (dest, origin)
{
    var i, destLength = dest.length, originLength = origin.length;

    for (i = 0; i < originLength; i += 1)
    {
        dest[destLength + i] = origin[i];
    }
};

Qlobber.prototype._remove_value = function (vals, val)
{
    if (val === undefined)
    {
        return true;
    }

    var index = vals.lastIndexOf(val);

    if (index >= 0)
    {
        vals.splice(index, 1);
    }

    return vals.length === 0;
};

Qlobber.prototype._add = function (val, i, words, sub_trie)
{
    var st, word;

    if (i === words.length)
    {
        st = sub_trie.get(this._separator);
        
        if (st)
        {
            this._add_value(st, val);
        }
        else
        {
            st = this._initial_value(val);
            sub_trie.set(this._separator, st);
        }
        
        return st;
    }

    word = words[i];
    st = sub_trie.get(word);
    
    if (!st)
    {
        st = new Map();
        sub_trie.set(word, st);
    }
    
    return this._add(val, i + 1, words, st);
};

Qlobber.prototype._remove = function (val, i, words, sub_trie)
{
    var st, word, r;

    if (i === words.length)
    {
        st = sub_trie.get(this._separator);

        if (st && this._remove_value(st, val))
        {
            sub_trie.delete(this._separator);
            return true;
        }

        return false;
    }
    
    word = words[i];
    st = sub_trie.get(word);

    if (!st)
    {
        return false;
    }

    r = this._remove(val, i + 1, words, st);

    if (st.size === 0)
    {
        sub_trie.delete(word);
    }

    return r;
};

Qlobber.prototype._match_some = function (v, i, words, st, ctx)
{
    var j, w;

    for (w of st.keys())
    {
        if (w !== this._separator)
        {
            for (j = i; j < words.length; j += 1)
            {
                v = this._match(v, j, words, st, ctx);
            }
            break;
        }
    }

    return v;
};

Qlobber.prototype._match = function (v, i, words, sub_trie, ctx)
{
    var word, st;

    st = sub_trie.get(this._wildcard_some);

    if (st)
    {
        // in the common case there will be no more levels...
        v = this._match_some(v, i, words, st, ctx);
        // and we'll end up matching the rest of the words:
        v = this._match(v, words.length, words, st, ctx);
    }

    if (i === words.length)
    {
        st = sub_trie.get(this._separator);

        if (st)
        {
            if (v.dest)
            {
                this._add_values(v.dest, v.source, ctx);
                this._add_values(v.dest, st, ctx);
                v = v.dest;
            }
            else if (v.source)
            {
                v.dest = v.source;
                v.source = st;
            }
            else
            {
                this._add_values(v, st, ctx);
            }
        }
    }
    else
    {
        word = words[i];

        if ((word !== this._wildcard_one) && (word !== this._wildcard_some))
        {
            st = sub_trie.get(word);

            if (st)
            {
                v = this._match(v, i + 1, words, st, ctx);
            }
        }

        if (word)
        {
            st = sub_trie.get(this._wildcard_one);

            if (st)
            {
                v = this._match(v, i + 1, words, st, ctx);
            }
        }
    }

    return v;
};

Qlobber.prototype._match2 = function (v, topic, ctx)
{
    var vals = this._match(
    {
        source: v
    }, 0, topic.split(this._separator), this._trie, ctx);

    return vals.source || vals;
};

Qlobber.prototype._test_some = function (v, i, words, st)
{
    var j, w;

    for (w of st.keys())
    {
        if (w !== this._separator)
        {
            for (j = i; j < words.length; j += 1)
            {
                if (this._test(v, j, words, st))
                {
                    return true;
                }
            }
            break;
        }
    }

    return false;
};

Qlobber.prototype._test = function (v, i, words, sub_trie)
{
    var word, st;

    st = sub_trie.get(this._wildcard_some);

    if (st)
    {
            // in the common case there will be no more levels...
        if (this._test_some(v, i, words, st) ||
            // and we'll end up matching the rest of the words:
            this._test(v, words.length, words, st))
        {
            return true;
        }
    }

    if (i === words.length)
    {
        st = sub_trie.get(this._separator);

        if (st && this.test_values(st, v))
        {
            return true;
        }
    }
    else
    {
        word = words[i];

        if ((word !== this._wildcard_one) && (word !== this._wildcard_some))
        {
            st = sub_trie.get(word);

            if (st && this._test(v, i + 1, words, st))
            {
                return true;
            }
        }

        if (word)
        {
            st = sub_trie.get(this._wildcard_one);

            if (st && this._test(v, i + 1, words, st))
            {
                return true;
            }
        }
    }

    return false;
};

/**
Add a topic matcher to the qlobber.

Note you can match more than one value against a topic by calling `add` multiple times with the same topic and different values.

@param {String} topic The topic to match against.
@param {Any} val The value to return if the topic is matched.
@return {Qlobber} The qlobber (for chaining).
*/
Qlobber.prototype.add = function (topic, val)
{
    var shortcut = this._shortcuts && this._shortcuts.get(topic);
    if (shortcut)
    {
        this._add_value(shortcut, val);
    }
    else
    {
        shortcut = this._add(val, 0, topic.split(this._separator), this._trie);
        if (this._shortcuts)
        {
            this._shortcuts.set(topic, shortcut);
        }
    }
    return this;
};

/**
Remove a topic matcher from the qlobber.

@param {String} topic The topic that's being matched against.
@param {Any} [val] The value that's being matched. If you don't specify `val` then all matchers for `topic` are removed.
@return {Qlobber} The qlobber (for chaining).
*/
Qlobber.prototype.remove = function (topic, val)
{
    if (this._remove(val, 0, topic.split(this._separator), this._trie) && this._shortcuts)
    {
        this._shortcuts.delete(topic);
    }
    return this;
};

/**
Match a topic.

@param {String} topic The topic to match against.
@return {Array} List of values that matched the topic. This may contain duplicates. Use a [`QlobberDedup`](#qlobberdedupoptions) if you don't want duplicates.
*/
Qlobber.prototype.match = function (topic, ctx)
{
    return this._match2([], topic, ctx);
};

/**
Test whether a topic match contains a value. Faster than calling [`match`](#qlobberprototypematchtopic) and searching the result for the value. Values are tested using [`test_values`](#qlobberprototypetest_valuesvals-val).

@param {String} topic The topic to match against.
@param {Any} val The value being tested for.
@return {Boolean} Whether matching against `topic` contains `val`.
*/
Qlobber.prototype.test = function (topic, val)
{
    return this._test(val, 0, topic.split(this._separator), this._trie);
};

/**
Test whether values found in a match contain a value passed to [`test`](#qlobberprototypetesttopic-val). You can override this to provide a custom implementation. Defaults to using `indexOf`.

@param {Array} vals The values found while matching.
@param {Any} val The value being tested for.
@return {Boolean} Whether `vals` contains `val`.
*/
Qlobber.prototype.test_values = function (vals, val)
{
    return vals.indexOf(val) >= 0;
};

/**
Reset the qlobber.

Removes all topic matchers from the qlobber.

@return {Qlobber} The qlobber (for chaining).
*/
Qlobber.prototype.clear = function ()
{
    this._trie.clear();
    if (this._shortcuts)
    {
        this._shortcuts.clear();
    }
    return this;
};

// for debugging
Qlobber.prototype.get_trie = function ()
{
    return this._trie;
};

/**
Visit each node in the qlobber's trie in turn.

@return {Iterator} An iterator on the trie. The iterator returns objects which, if fed (in the same order) to the function returned by [`get_restorer`](#qlobberprototypeget_restoreroptions) on a different qlobber, will build that qlobber's trie to the same state. The objects can be serialized using `JSON.stringify`, _if_ the values you store in the qlobber are also serializable.
*/
Qlobber.prototype.visit = function* ()
{
    let iterators = [],
        iterator = this._trie.entries(),
        i = 0;

    while (true)
    {
        if (i === 0)
        {
            yield { type: 'start_entries' };
        }

        let next = iterator.next();

        if (next.done)
        {
            yield { type: 'end_entries' };

            let prev = iterators.pop();
            if (prev === undefined)
            {
                return;
            }

            [iterator, i] = prev;
            continue;
        }

        let [key, value] = next.value;
        yield { type: 'entry', i: i++, key: key };

        if (key === this._separator)
        {
            yield { type: 'start_values' };

            if (value[Symbol.iterator])
            {
                let j = 0;
                for (let v of value)
                {
                    yield { type: 'value', i: j++, value: v };
                }
            }
            else
            {
                yield { type: 'value', i: 0, value: value };
            }

            yield { type: 'end_values' };
            continue;
        }

        iterators.push([iterator, i]);
        iterator = value.entries();
        i = 0;
    }
};

/**
Get a function which can restore the qlobber's trie to a state you retrieved
by calling [`visit`](#qlobberprototypevisit) on this or another qlobber.

@param {Object} [options] Options for restoring the trie.
- `{Boolean} cache_adds` Whether to cache topics when rebuilding the trie. This only applies if you also passed `cache_adds` as true in the [constructor](#qlobberoptions).

@return {Function} Function to call in order to rebuild the qlobber's trie. You should call this repeatedly with the objects you received from a call to [`visit`](#qlobberprototypevisit). If you serialized the objects, remember to deserialize them first (e.g. with `JSON.parse`)!
*/
Qlobber.prototype.get_restorer = function (options)
{
    options = options || {};

    let sts = [],
        entry = this._trie,
        path = '';

    return (obj) =>
    {
        switch (obj.type)
        {
            case 'entry':
                entry = entry || new Map();
                sts.push([entry, obj.key, path]);
                entry = entry.get(obj.key);
                if (options.cache_adds)
                {
                    if (path)
                    {
                        path += this._separator;
                    }
                    path += obj.key;
                }
                break;

            case 'value':
                if (entry)
                {
                    this._add_value(entry, obj.value);
                }
                else
                {
                    entry = this._initial_value(obj.value);
                }
                break;

            case 'end_entries':
                if (entry && (entry.size === 0))
                {
                    entry = undefined;
                }
                /* falls through */

            case 'end_values':
                let prev = sts.pop();
                if (prev === undefined)
                {
                    entry = undefined;
                    path = '';
                }
                else
                {
                    let [prev_entry, key, prev_path] = prev;
                    if (entry)
                    {
                        if (options.cache_adds &&
                            this._shortcuts &&
                            (obj.type === 'end_values'))
                        {
                            this._shortcuts.set(prev_path, entry);
                        }
                        prev_entry.set(key, entry);
                    }
                    entry = prev_entry;
                    path = prev_path;
                }
                break;
        }
    };
};

/**
Creates a new de-duplicating qlobber.

Inherits from [`Qlobber`](#qlobberoptions).

@constructor
@param {Object} [options] Same options as Qlobber.
*/
function QlobberDedup (options)
{
    Qlobber.call(this, options);
}

util.inherits(QlobberDedup, Qlobber);

QlobberDedup.prototype._initial_value = function (val)
{
    return new Set().add(val);
};

QlobberDedup.prototype._add_value = function (vals, val)
{
    vals.add(val);
};

QlobberDedup.prototype._add_values = function (dest, origin)
{
    origin.forEach(function (val)
    {
        dest.add(val);
    });
};

QlobberDedup.prototype._remove_value = function (vals, val)
{
    if (val === undefined)
    {
        return true;
    }

    vals.delete(val);
    return vals.size === 0;
};

/**
Test whether values found in a match contain a value passed to [`test`](#qlobberprototypetesttopic_val). You can override this to provide a custom implementation. Defaults to using `has`.

@param {Set} vals The values found while matching ([ES6 Set](http://www.ecma-international.org/ecma-262/6.0/#sec-set-objects)).
@param {Any} val The value being tested for.
@return {Boolean} Whether `vals` contains `val`.
*/
QlobberDedup.prototype.test_values = function (vals, val)
{
    return vals.has(val);
};

/**
Match a topic.

@param {String} topic The topic to match against.
@return {Set} [ES6 Set](http://www.ecma-international.org/ecma-262/6.0/#sec-set-objects) of values that matched the topic.
*/
QlobberDedup.prototype.match = function (topic, ctx)
{
    return this._match2(new Set(), topic, ctx);
};

/**
Creates a new qlobber which only stores the value `true`.

Whatever value you [`add`](#qlobberprototypeaddtopic-val) to this qlobber
(even `undefined`), a single, de-duplicated `true` will be stored. Use this
qlobber if you only need to test whether topics match, not about the values
they match to.

Inherits from [`Qlobber`](#qlobberoptions).

@constructor
@param {Object} [options] Same options as Qlobber.
*/
function QlobberTrue (options)
{
    Qlobber.call(this, options);
}

util.inherits(QlobberTrue, Qlobber);

QlobberTrue.prototype._initial_value = function ()
{
    return true;
};

QlobberTrue.prototype._add_value = function ()
{
};

QlobberTrue.prototype._remove_value = function ()
{
    return true;
};

/**
This override of [`test_values`](#qlobberprototypetest_valuesvals-val) always
returns `true`. When you call [`test`](#qlobberprototypetesttopic-val) on a
`QlobberTrue` instance, the value you pass is ignored since it only cares
whether a topic is matched.

@return {Boolean} Always `true`.
*/
QlobberTrue.prototype.test_values = function ()
{
    return true;    
};

/**
Match a topic.

Since `QlobberTrue` only cares whether a topic is matched and not about values
it matches to, this override of [`match`](#qlobberprototypematchtopic) just
calls [`test`](#qlobberprototypetesttopic-val) (with value `undefined`).

@param {String} topic The topic to match against.
@return {Boolean} Whether the `QlobberTrue` instance matches the topic.
*/
QlobberTrue.prototype.match = function (topic, ctx)
{
    return this.test(topic, ctx);
};

let stream = __webpack_require__(71);

/**
Creates a new [`Readable`](https://nodejs.org/dist/latest-v8.x/docs/api/stream.html#stream_class_stream_readable) stream, in object mode, which calls [`visit`](#qlobberprototypevisit) on a qlobber to generate its data.

You could [`pipe`](https://nodejs.org/dist/latest-v8.x/docs/api/stream.html#stream_readable_pipe_destination_options) this to a [`JSONStream.stringify`](https://github.com/dominictarr/JSONStream#jsonstreamstringifyopen-sep-close) stream, for instance, to serialize the qlobber to JSON. See [this test](test/json.js#L14) for an example.

Inherits from [`Readable`](https://nodejs.org/dist/latest-v8.x/docs/api/stream.html#stream_class_stream_readable).

@constructor

@param {Qlobber} qlobber The qlobber to call [`visit`](#qlobberprototypevisit) on.
*/
function VisitorStream (qlobber)
{
    stream.Readable.call(this, { objectMode: true });
    this._iterator = qlobber.visit();
}

util.inherits(VisitorStream, stream.Readable);

VisitorStream.prototype._read = function ()
{
    while (true)
    {
        let { done, value } = this._iterator.next();

        if (done)
        {
            this.push(null);
            break;
        }

        if (!this.push(value))
        {
            break;
        }
    }
};

/**
Creates a new [`Writable`](https://nodejs.org/dist/latest-v8.x/docs/api/stream.html#stream_class_stream_writable) stream, in object mode, which passes data written to it into the function returned by calling [`get_restorer`](#qlobberprototypeget_restoreroptions) on a qlobber.

You could [`pipe`](https://nodejs.org/dist/latest-v8.x/docs/api/stream.html#stream_readable_pipe_destination_options) a [`JSONStream.parse`](https://github.com/dominictarr/JSONStream#jsonstreamparsepath) stream to this, for instance, to deserialize the qlobber from JSON. See [this test](test/json.js#L33) for an example.

Inherits from [`Writable`](https://nodejs.org/dist/latest-v8.x/docs/api/stream.html#stream_class_stream_writable).

@constructor

@param {Qlobber} qlobber The qlobber to call [`get_restorer`](#qlobberprototypeget_restoreroptions) on.
*/
function RestorerStream (qlobber)
{
    stream.Writable.call(this, { objectMode: true });
    this._restorer = qlobber.get_restorer();
}

util.inherits(RestorerStream, stream.Writable);

RestorerStream.prototype._write = function (value, _, cb)
{
    this._restorer(value);
    cb();
};

exports.Qlobber = Qlobber;
exports.QlobberDedup = QlobberDedup;
exports.QlobberTrue = QlobberTrue;
exports.VisitorStream = VisitorStream;
exports.RestorerStream = RestorerStream;



/***/ }),
/* 68 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(global, process) {// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.

var formatRegExp = /%[sdj%]/g;
exports.format = function(f) {
  if (!isString(f)) {
    var objects = [];
    for (var i = 0; i < arguments.length; i++) {
      objects.push(inspect(arguments[i]));
    }
    return objects.join(' ');
  }

  var i = 1;
  var args = arguments;
  var len = args.length;
  var str = String(f).replace(formatRegExp, function(x) {
    if (x === '%%') return '%';
    if (i >= len) return x;
    switch (x) {
      case '%s': return String(args[i++]);
      case '%d': return Number(args[i++]);
      case '%j':
        try {
          return JSON.stringify(args[i++]);
        } catch (_) {
          return '[Circular]';
        }
      default:
        return x;
    }
  });
  for (var x = args[i]; i < len; x = args[++i]) {
    if (isNull(x) || !isObject(x)) {
      str += ' ' + x;
    } else {
      str += ' ' + inspect(x);
    }
  }
  return str;
};


// Mark that a method should not be used.
// Returns a modified function which warns once by default.
// If --no-deprecation is set, then it is a no-op.
exports.deprecate = function(fn, msg) {
  // Allow for deprecating things in the process of starting up.
  if (isUndefined(global.process)) {
    return function() {
      return exports.deprecate(fn, msg).apply(this, arguments);
    };
  }

  if (process.noDeprecation === true) {
    return fn;
  }

  var warned = false;
  function deprecated() {
    if (!warned) {
      if (process.throwDeprecation) {
        throw new Error(msg);
      } else if (process.traceDeprecation) {
        console.trace(msg);
      } else {
        console.error(msg);
      }
      warned = true;
    }
    return fn.apply(this, arguments);
  }

  return deprecated;
};


var debugs = {};
var debugEnviron;
exports.debuglog = function(set) {
  if (isUndefined(debugEnviron))
    debugEnviron = process.env.NODE_DEBUG || '';
  set = set.toUpperCase();
  if (!debugs[set]) {
    if (new RegExp('\\b' + set + '\\b', 'i').test(debugEnviron)) {
      var pid = process.pid;
      debugs[set] = function() {
        var msg = exports.format.apply(exports, arguments);
        console.error('%s %d: %s', set, pid, msg);
      };
    } else {
      debugs[set] = function() {};
    }
  }
  return debugs[set];
};


/**
 * Echos the value of a value. Trys to print the value out
 * in the best way possible given the different types.
 *
 * @param {Object} obj The object to print out.
 * @param {Object} opts Optional options object that alters the output.
 */
/* legacy: obj, showHidden, depth, colors*/
function inspect(obj, opts) {
  // default options
  var ctx = {
    seen: [],
    stylize: stylizeNoColor
  };
  // legacy...
  if (arguments.length >= 3) ctx.depth = arguments[2];
  if (arguments.length >= 4) ctx.colors = arguments[3];
  if (isBoolean(opts)) {
    // legacy...
    ctx.showHidden = opts;
  } else if (opts) {
    // got an "options" object
    exports._extend(ctx, opts);
  }
  // set default options
  if (isUndefined(ctx.showHidden)) ctx.showHidden = false;
  if (isUndefined(ctx.depth)) ctx.depth = 2;
  if (isUndefined(ctx.colors)) ctx.colors = false;
  if (isUndefined(ctx.customInspect)) ctx.customInspect = true;
  if (ctx.colors) ctx.stylize = stylizeWithColor;
  return formatValue(ctx, obj, ctx.depth);
}
exports.inspect = inspect;


// http://en.wikipedia.org/wiki/ANSI_escape_code#graphics
inspect.colors = {
  'bold' : [1, 22],
  'italic' : [3, 23],
  'underline' : [4, 24],
  'inverse' : [7, 27],
  'white' : [37, 39],
  'grey' : [90, 39],
  'black' : [30, 39],
  'blue' : [34, 39],
  'cyan' : [36, 39],
  'green' : [32, 39],
  'magenta' : [35, 39],
  'red' : [31, 39],
  'yellow' : [33, 39]
};

// Don't use 'blue' not visible on cmd.exe
inspect.styles = {
  'special': 'cyan',
  'number': 'yellow',
  'boolean': 'yellow',
  'undefined': 'grey',
  'null': 'bold',
  'string': 'green',
  'date': 'magenta',
  // "name": intentionally not styling
  'regexp': 'red'
};


function stylizeWithColor(str, styleType) {
  var style = inspect.styles[styleType];

  if (style) {
    return '\u001b[' + inspect.colors[style][0] + 'm' + str +
           '\u001b[' + inspect.colors[style][1] + 'm';
  } else {
    return str;
  }
}


function stylizeNoColor(str, styleType) {
  return str;
}


function arrayToHash(array) {
  var hash = {};

  array.forEach(function(val, idx) {
    hash[val] = true;
  });

  return hash;
}


function formatValue(ctx, value, recurseTimes) {
  // Provide a hook for user-specified inspect functions.
  // Check that value is an object with an inspect function on it
  if (ctx.customInspect &&
      value &&
      isFunction(value.inspect) &&
      // Filter out the util module, it's inspect function is special
      value.inspect !== exports.inspect &&
      // Also filter out any prototype objects using the circular check.
      !(value.constructor && value.constructor.prototype === value)) {
    var ret = value.inspect(recurseTimes, ctx);
    if (!isString(ret)) {
      ret = formatValue(ctx, ret, recurseTimes);
    }
    return ret;
  }

  // Primitive types cannot have properties
  var primitive = formatPrimitive(ctx, value);
  if (primitive) {
    return primitive;
  }

  // Look up the keys of the object.
  var keys = Object.keys(value);
  var visibleKeys = arrayToHash(keys);

  if (ctx.showHidden) {
    keys = Object.getOwnPropertyNames(value);
  }

  // IE doesn't make error fields non-enumerable
  // http://msdn.microsoft.com/en-us/library/ie/dww52sbt(v=vs.94).aspx
  if (isError(value)
      && (keys.indexOf('message') >= 0 || keys.indexOf('description') >= 0)) {
    return formatError(value);
  }

  // Some type of object without properties can be shortcutted.
  if (keys.length === 0) {
    if (isFunction(value)) {
      var name = value.name ? ': ' + value.name : '';
      return ctx.stylize('[Function' + name + ']', 'special');
    }
    if (isRegExp(value)) {
      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');
    }
    if (isDate(value)) {
      return ctx.stylize(Date.prototype.toString.call(value), 'date');
    }
    if (isError(value)) {
      return formatError(value);
    }
  }

  var base = '', array = false, braces = ['{', '}'];

  // Make Array say that they are Array
  if (isArray(value)) {
    array = true;
    braces = ['[', ']'];
  }

  // Make functions say that they are functions
  if (isFunction(value)) {
    var n = value.name ? ': ' + value.name : '';
    base = ' [Function' + n + ']';
  }

  // Make RegExps say that they are RegExps
  if (isRegExp(value)) {
    base = ' ' + RegExp.prototype.toString.call(value);
  }

  // Make dates with properties first say the date
  if (isDate(value)) {
    base = ' ' + Date.prototype.toUTCString.call(value);
  }

  // Make error with message first say the error
  if (isError(value)) {
    base = ' ' + formatError(value);
  }

  if (keys.length === 0 && (!array || value.length == 0)) {
    return braces[0] + base + braces[1];
  }

  if (recurseTimes < 0) {
    if (isRegExp(value)) {
      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');
    } else {
      return ctx.stylize('[Object]', 'special');
    }
  }

  ctx.seen.push(value);

  var output;
  if (array) {
    output = formatArray(ctx, value, recurseTimes, visibleKeys, keys);
  } else {
    output = keys.map(function(key) {
      return formatProperty(ctx, value, recurseTimes, visibleKeys, key, array);
    });
  }

  ctx.seen.pop();

  return reduceToSingleString(output, base, braces);
}


function formatPrimitive(ctx, value) {
  if (isUndefined(value))
    return ctx.stylize('undefined', 'undefined');
  if (isString(value)) {
    var simple = '\'' + JSON.stringify(value).replace(/^"|"$/g, '')
                                             .replace(/'/g, "\\'")
                                             .replace(/\\"/g, '"') + '\'';
    return ctx.stylize(simple, 'string');
  }
  if (isNumber(value))
    return ctx.stylize('' + value, 'number');
  if (isBoolean(value))
    return ctx.stylize('' + value, 'boolean');
  // For some reason typeof null is "object", so special case here.
  if (isNull(value))
    return ctx.stylize('null', 'null');
}


function formatError(value) {
  return '[' + Error.prototype.toString.call(value) + ']';
}


function formatArray(ctx, value, recurseTimes, visibleKeys, keys) {
  var output = [];
  for (var i = 0, l = value.length; i < l; ++i) {
    if (hasOwnProperty(value, String(i))) {
      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,
          String(i), true));
    } else {
      output.push('');
    }
  }
  keys.forEach(function(key) {
    if (!key.match(/^\d+$/)) {
      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,
          key, true));
    }
  });
  return output;
}


function formatProperty(ctx, value, recurseTimes, visibleKeys, key, array) {
  var name, str, desc;
  desc = Object.getOwnPropertyDescriptor(value, key) || { value: value[key] };
  if (desc.get) {
    if (desc.set) {
      str = ctx.stylize('[Getter/Setter]', 'special');
    } else {
      str = ctx.stylize('[Getter]', 'special');
    }
  } else {
    if (desc.set) {
      str = ctx.stylize('[Setter]', 'special');
    }
  }
  if (!hasOwnProperty(visibleKeys, key)) {
    name = '[' + key + ']';
  }
  if (!str) {
    if (ctx.seen.indexOf(desc.value) < 0) {
      if (isNull(recurseTimes)) {
        str = formatValue(ctx, desc.value, null);
      } else {
        str = formatValue(ctx, desc.value, recurseTimes - 1);
      }
      if (str.indexOf('\n') > -1) {
        if (array) {
          str = str.split('\n').map(function(line) {
            return '  ' + line;
          }).join('\n').substr(2);
        } else {
          str = '\n' + str.split('\n').map(function(line) {
            return '   ' + line;
          }).join('\n');
        }
      }
    } else {
      str = ctx.stylize('[Circular]', 'special');
    }
  }
  if (isUndefined(name)) {
    if (array && key.match(/^\d+$/)) {
      return str;
    }
    name = JSON.stringify('' + key);
    if (name.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)) {
      name = name.substr(1, name.length - 2);
      name = ctx.stylize(name, 'name');
    } else {
      name = name.replace(/'/g, "\\'")
                 .replace(/\\"/g, '"')
                 .replace(/(^"|"$)/g, "'");
      name = ctx.stylize(name, 'string');
    }
  }

  return name + ': ' + str;
}


function reduceToSingleString(output, base, braces) {
  var numLinesEst = 0;
  var length = output.reduce(function(prev, cur) {
    numLinesEst++;
    if (cur.indexOf('\n') >= 0) numLinesEst++;
    return prev + cur.replace(/\u001b\[\d\d?m/g, '').length + 1;
  }, 0);

  if (length > 60) {
    return braces[0] +
           (base === '' ? '' : base + '\n ') +
           ' ' +
           output.join(',\n  ') +
           ' ' +
           braces[1];
  }

  return braces[0] + base + ' ' + output.join(', ') + ' ' + braces[1];
}


// NOTE: These type checking functions intentionally don't use `instanceof`
// because it is fragile and can be easily faked with `Object.create()`.
function isArray(ar) {
  return Array.isArray(ar);
}
exports.isArray = isArray;

function isBoolean(arg) {
  return typeof arg === 'boolean';
}
exports.isBoolean = isBoolean;

function isNull(arg) {
  return arg === null;
}
exports.isNull = isNull;

function isNullOrUndefined(arg) {
  return arg == null;
}
exports.isNullOrUndefined = isNullOrUndefined;

function isNumber(arg) {
  return typeof arg === 'number';
}
exports.isNumber = isNumber;

function isString(arg) {
  return typeof arg === 'string';
}
exports.isString = isString;

function isSymbol(arg) {
  return typeof arg === 'symbol';
}
exports.isSymbol = isSymbol;

function isUndefined(arg) {
  return arg === void 0;
}
exports.isUndefined = isUndefined;

function isRegExp(re) {
  return isObject(re) && objectToString(re) === '[object RegExp]';
}
exports.isRegExp = isRegExp;

function isObject(arg) {
  return typeof arg === 'object' && arg !== null;
}
exports.isObject = isObject;

function isDate(d) {
  return isObject(d) && objectToString(d) === '[object Date]';
}
exports.isDate = isDate;

function isError(e) {
  return isObject(e) &&
      (objectToString(e) === '[object Error]' || e instanceof Error);
}
exports.isError = isError;

function isFunction(arg) {
  return typeof arg === 'function';
}
exports.isFunction = isFunction;

function isPrimitive(arg) {
  return arg === null ||
         typeof arg === 'boolean' ||
         typeof arg === 'number' ||
         typeof arg === 'string' ||
         typeof arg === 'symbol' ||  // ES6 symbol
         typeof arg === 'undefined';
}
exports.isPrimitive = isPrimitive;

exports.isBuffer = __webpack_require__(69);

function objectToString(o) {
  return Object.prototype.toString.call(o);
}


function pad(n) {
  return n < 10 ? '0' + n.toString(10) : n.toString(10);
}


var months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep',
              'Oct', 'Nov', 'Dec'];

// 26 Feb 16:19:34
function timestamp() {
  var d = new Date();
  var time = [pad(d.getHours()),
              pad(d.getMinutes()),
              pad(d.getSeconds())].join(':');
  return [d.getDate(), months[d.getMonth()], time].join(' ');
}


// log is just a thin wrapper to console.log that prepends a timestamp
exports.log = function() {
  console.log('%s - %s', timestamp(), exports.format.apply(exports, arguments));
};


/**
 * Inherit the prototype methods from one constructor into another.
 *
 * The Function.prototype.inherits from lang.js rewritten as a standalone
 * function (not on Function.prototype). NOTE: If this file is to be loaded
 * during bootstrapping this function needs to be rewritten using some native
 * functions as prototype setup using normal JavaScript does not work as
 * expected during bootstrapping (see mirror.js in r114903).
 *
 * @param {function} ctor Constructor function which needs to inherit the
 *     prototype.
 * @param {function} superCtor Constructor function to inherit prototype from.
 */
exports.inherits = __webpack_require__(70);

exports._extend = function(origin, add) {
  // Don't do anything if add isn't an object
  if (!add || !isObject(add)) return origin;

  var keys = Object.keys(add);
  var i = keys.length;
  while (i--) {
    origin[keys[i]] = add[keys[i]];
  }
  return origin;
};

function hasOwnProperty(obj, prop) {
  return Object.prototype.hasOwnProperty.call(obj, prop);
}

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(17), __webpack_require__(22)))

/***/ }),
/* 69 */
/***/ (function(module, exports) {

module.exports = function isBuffer(arg) {
  return arg && typeof arg === 'object'
    && typeof arg.copy === 'function'
    && typeof arg.fill === 'function'
    && typeof arg.readUInt8 === 'function';
}

/***/ }),
/* 70 */
/***/ (function(module, exports) {

if (typeof Object.create === 'function') {
  // implementation from standard node.js 'util' module
  module.exports = function inherits(ctor, superCtor) {
    ctor.super_ = superCtor
    ctor.prototype = Object.create(superCtor.prototype, {
      constructor: {
        value: ctor,
        enumerable: false,
        writable: true,
        configurable: true
      }
    });
  };
} else {
  // old school shim for old browsers
  module.exports = function inherits(ctor, superCtor) {
    ctor.super_ = superCtor
    var TempCtor = function () {}
    TempCtor.prototype = superCtor.prototype
    ctor.prototype = new TempCtor()
    ctor.prototype.constructor = ctor
  }
}


/***/ }),
/* 71 */
/***/ (function(module, exports, __webpack_require__) {

// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.

module.exports = Stream;

var EE = __webpack_require__(32).EventEmitter;
var inherits = __webpack_require__(18);

inherits(Stream, EE);
Stream.Readable = __webpack_require__(33);
Stream.Writable = __webpack_require__(82);
Stream.Duplex = __webpack_require__(83);
Stream.Transform = __webpack_require__(84);
Stream.PassThrough = __webpack_require__(85);

// Backwards-compat with node 0.4.x
Stream.Stream = Stream;



// old-style streams.  Note that the pipe method (the only relevant
// part of this class) is overridden in the Readable class.

function Stream() {
  EE.call(this);
}

Stream.prototype.pipe = function(dest, options) {
  var source = this;

  function ondata(chunk) {
    if (dest.writable) {
      if (false === dest.write(chunk) && source.pause) {
        source.pause();
      }
    }
  }

  source.on('data', ondata);

  function ondrain() {
    if (source.readable && source.resume) {
      source.resume();
    }
  }

  dest.on('drain', ondrain);

  // If the 'end' option is not supplied, dest.end() will be called when
  // source gets the 'end' or 'close' events.  Only dest.end() once.
  if (!dest._isStdio && (!options || options.end !== false)) {
    source.on('end', onend);
    source.on('close', onclose);
  }

  var didOnEnd = false;
  function onend() {
    if (didOnEnd) return;
    didOnEnd = true;

    dest.end();
  }


  function onclose() {
    if (didOnEnd) return;
    didOnEnd = true;

    if (typeof dest.destroy === 'function') dest.destroy();
  }

  // don't leave dangling pipes when there are errors.
  function onerror(er) {
    cleanup();
    if (EE.listenerCount(this, 'error') === 0) {
      throw er; // Unhandled stream error in pipe.
    }
  }

  source.on('error', onerror);
  dest.on('error', onerror);

  // remove all the event listeners that were added.
  function cleanup() {
    source.removeListener('data', ondata);
    dest.removeListener('drain', ondrain);

    source.removeListener('end', onend);
    source.removeListener('close', onclose);

    source.removeListener('error', onerror);
    dest.removeListener('error', onerror);

    source.removeListener('end', cleanup);
    source.removeListener('close', cleanup);

    dest.removeListener('close', cleanup);
  }

  source.on('end', cleanup);
  source.on('close', cleanup);

  dest.on('close', cleanup);

  dest.emit('pipe', source);

  // Allow for unix-like usage: A.pipe(B).pipe(C)
  return dest;
};


/***/ }),
/* 72 */
/***/ (function(module, exports) {

var toString = {}.toString;

module.exports = Array.isArray || function (arr) {
  return toString.call(arr) == '[object Array]';
};


/***/ }),
/* 73 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


exports.byteLength = byteLength
exports.toByteArray = toByteArray
exports.fromByteArray = fromByteArray

var lookup = []
var revLookup = []
var Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array

var code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'
for (var i = 0, len = code.length; i < len; ++i) {
  lookup[i] = code[i]
  revLookup[code.charCodeAt(i)] = i
}

revLookup['-'.charCodeAt(0)] = 62
revLookup['_'.charCodeAt(0)] = 63

function placeHoldersCount (b64) {
  var len = b64.length
  if (len % 4 > 0) {
    throw new Error('Invalid string. Length must be a multiple of 4')
  }

  // the number of equal signs (place holders)
  // if there are two placeholders, than the two characters before it
  // represent one byte
  // if there is only one, then the three characters before it represent 2 bytes
  // this is just a cheap hack to not do indexOf twice
  return b64[len - 2] === '=' ? 2 : b64[len - 1] === '=' ? 1 : 0
}

function byteLength (b64) {
  // base64 is 4/3 + up to two characters of the original data
  return (b64.length * 3 / 4) - placeHoldersCount(b64)
}

function toByteArray (b64) {
  var i, l, tmp, placeHolders, arr
  var len = b64.length
  placeHolders = placeHoldersCount(b64)

  arr = new Arr((len * 3 / 4) - placeHolders)

  // if there are placeholders, only get up to the last complete 4 chars
  l = placeHolders > 0 ? len - 4 : len

  var L = 0

  for (i = 0; i < l; i += 4) {
    tmp = (revLookup[b64.charCodeAt(i)] << 18) | (revLookup[b64.charCodeAt(i + 1)] << 12) | (revLookup[b64.charCodeAt(i + 2)] << 6) | revLookup[b64.charCodeAt(i + 3)]
    arr[L++] = (tmp >> 16) & 0xFF
    arr[L++] = (tmp >> 8) & 0xFF
    arr[L++] = tmp & 0xFF
  }

  if (placeHolders === 2) {
    tmp = (revLookup[b64.charCodeAt(i)] << 2) | (revLookup[b64.charCodeAt(i + 1)] >> 4)
    arr[L++] = tmp & 0xFF
  } else if (placeHolders === 1) {
    tmp = (revLookup[b64.charCodeAt(i)] << 10) | (revLookup[b64.charCodeAt(i + 1)] << 4) | (revLookup[b64.charCodeAt(i + 2)] >> 2)
    arr[L++] = (tmp >> 8) & 0xFF
    arr[L++] = tmp & 0xFF
  }

  return arr
}

function tripletToBase64 (num) {
  return lookup[num >> 18 & 0x3F] + lookup[num >> 12 & 0x3F] + lookup[num >> 6 & 0x3F] + lookup[num & 0x3F]
}

function encodeChunk (uint8, start, end) {
  var tmp
  var output = []
  for (var i = start; i < end; i += 3) {
    tmp = (uint8[i] << 16) + (uint8[i + 1] << 8) + (uint8[i + 2])
    output.push(tripletToBase64(tmp))
  }
  return output.join('')
}

function fromByteArray (uint8) {
  var tmp
  var len = uint8.length
  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes
  var output = ''
  var parts = []
  var maxChunkLength = 16383 // must be multiple of 3

  // go through the array every three bytes, we'll deal with trailing stuff later
  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {
    parts.push(encodeChunk(uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)))
  }

  // pad the end with zeros, but make sure to not forget the extra bytes
  if (extraBytes === 1) {
    tmp = uint8[len - 1]
    output += lookup[tmp >> 2]
    output += lookup[(tmp << 4) & 0x3F]
    output += '=='
  } else if (extraBytes === 2) {
    tmp = (uint8[len - 2] << 8) + (uint8[len - 1])
    output += lookup[tmp >> 10]
    output += lookup[(tmp >> 4) & 0x3F]
    output += lookup[(tmp << 2) & 0x3F]
    output += '='
  }

  parts.push(output)

  return parts.join('')
}


/***/ }),
/* 74 */
/***/ (function(module, exports) {

exports.read = function (buffer, offset, isLE, mLen, nBytes) {
  var e, m
  var eLen = nBytes * 8 - mLen - 1
  var eMax = (1 << eLen) - 1
  var eBias = eMax >> 1
  var nBits = -7
  var i = isLE ? (nBytes - 1) : 0
  var d = isLE ? -1 : 1
  var s = buffer[offset + i]

  i += d

  e = s & ((1 << (-nBits)) - 1)
  s >>= (-nBits)
  nBits += eLen
  for (; nBits > 0; e = e * 256 + buffer[offset + i], i += d, nBits -= 8) {}

  m = e & ((1 << (-nBits)) - 1)
  e >>= (-nBits)
  nBits += mLen
  for (; nBits > 0; m = m * 256 + buffer[offset + i], i += d, nBits -= 8) {}

  if (e === 0) {
    e = 1 - eBias
  } else if (e === eMax) {
    return m ? NaN : ((s ? -1 : 1) * Infinity)
  } else {
    m = m + Math.pow(2, mLen)
    e = e - eBias
  }
  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)
}

exports.write = function (buffer, value, offset, isLE, mLen, nBytes) {
  var e, m, c
  var eLen = nBytes * 8 - mLen - 1
  var eMax = (1 << eLen) - 1
  var eBias = eMax >> 1
  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)
  var i = isLE ? 0 : (nBytes - 1)
  var d = isLE ? 1 : -1
  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0

  value = Math.abs(value)

  if (isNaN(value) || value === Infinity) {
    m = isNaN(value) ? 1 : 0
    e = eMax
  } else {
    e = Math.floor(Math.log(value) / Math.LN2)
    if (value * (c = Math.pow(2, -e)) < 1) {
      e--
      c *= 2
    }
    if (e + eBias >= 1) {
      value += rt / c
    } else {
      value += rt * Math.pow(2, 1 - eBias)
    }
    if (value * c >= 2) {
      e++
      c /= 2
    }

    if (e + eBias >= eMax) {
      m = 0
      e = eMax
    } else if (e + eBias >= 1) {
      m = (value * c - 1) * Math.pow(2, mLen)
      e = e + eBias
    } else {
      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)
      e = 0
    }
  }

  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}

  e = (e << mLen) | m
  eLen += mLen
  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}

  buffer[offset + i - d] |= s * 128
}


/***/ }),
/* 75 */
/***/ (function(module, exports) {

var toString = {}.toString;

module.exports = Array.isArray || function (arr) {
  return toString.call(arr) == '[object Array]';
};


/***/ }),
/* 76 */
/***/ (function(module, exports) {

/* (ignored) */

/***/ }),
/* 77 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/*<replacement>*/

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var Buffer = __webpack_require__(27).Buffer;
/*</replacement>*/

function copyBuffer(src, target, offset) {
  src.copy(target, offset);
}

module.exports = function () {
  function BufferList() {
    _classCallCheck(this, BufferList);

    this.head = null;
    this.tail = null;
    this.length = 0;
  }

  BufferList.prototype.push = function push(v) {
    var entry = { data: v, next: null };
    if (this.length > 0) this.tail.next = entry;else this.head = entry;
    this.tail = entry;
    ++this.length;
  };

  BufferList.prototype.unshift = function unshift(v) {
    var entry = { data: v, next: this.head };
    if (this.length === 0) this.tail = entry;
    this.head = entry;
    ++this.length;
  };

  BufferList.prototype.shift = function shift() {
    if (this.length === 0) return;
    var ret = this.head.data;
    if (this.length === 1) this.head = this.tail = null;else this.head = this.head.next;
    --this.length;
    return ret;
  };

  BufferList.prototype.clear = function clear() {
    this.head = this.tail = null;
    this.length = 0;
  };

  BufferList.prototype.join = function join(s) {
    if (this.length === 0) return '';
    var p = this.head;
    var ret = '' + p.data;
    while (p = p.next) {
      ret += s + p.data;
    }return ret;
  };

  BufferList.prototype.concat = function concat(n) {
    if (this.length === 0) return Buffer.alloc(0);
    if (this.length === 1) return this.head.data;
    var ret = Buffer.allocUnsafe(n >>> 0);
    var p = this.head;
    var i = 0;
    while (p) {
      copyBuffer(p.data, ret, i);
      i += p.data.length;
      p = p.next;
    }
    return ret;
  };

  return BufferList;
}();

/***/ }),
/* 78 */
/***/ (function(module, exports, __webpack_require__) {

var apply = Function.prototype.apply;

// DOM APIs, for completeness

exports.setTimeout = function() {
  return new Timeout(apply.call(setTimeout, window, arguments), clearTimeout);
};
exports.setInterval = function() {
  return new Timeout(apply.call(setInterval, window, arguments), clearInterval);
};
exports.clearTimeout =
exports.clearInterval = function(timeout) {
  if (timeout) {
    timeout.close();
  }
};

function Timeout(id, clearFn) {
  this._id = id;
  this._clearFn = clearFn;
}
Timeout.prototype.unref = Timeout.prototype.ref = function() {};
Timeout.prototype.close = function() {
  this._clearFn.call(window, this._id);
};

// Does not start the time, just sets up the members needed.
exports.enroll = function(item, msecs) {
  clearTimeout(item._idleTimeoutId);
  item._idleTimeout = msecs;
};

exports.unenroll = function(item) {
  clearTimeout(item._idleTimeoutId);
  item._idleTimeout = -1;
};

exports._unrefActive = exports.active = function(item) {
  clearTimeout(item._idleTimeoutId);

  var msecs = item._idleTimeout;
  if (msecs >= 0) {
    item._idleTimeoutId = setTimeout(function onTimeout() {
      if (item._onTimeout)
        item._onTimeout();
    }, msecs);
  }
};

// setimmediate attaches itself to the global object
__webpack_require__(79);
exports.setImmediate = setImmediate;
exports.clearImmediate = clearImmediate;


/***/ }),
/* 79 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(global, process) {(function (global, undefined) {
    "use strict";

    if (global.setImmediate) {
        return;
    }

    var nextHandle = 1; // Spec says greater than zero
    var tasksByHandle = {};
    var currentlyRunningATask = false;
    var doc = global.document;
    var registerImmediate;

    function setImmediate(callback) {
      // Callback can either be a function or a string
      if (typeof callback !== "function") {
        callback = new Function("" + callback);
      }
      // Copy function arguments
      var args = new Array(arguments.length - 1);
      for (var i = 0; i < args.length; i++) {
          args[i] = arguments[i + 1];
      }
      // Store and register the task
      var task = { callback: callback, args: args };
      tasksByHandle[nextHandle] = task;
      registerImmediate(nextHandle);
      return nextHandle++;
    }

    function clearImmediate(handle) {
        delete tasksByHandle[handle];
    }

    function run(task) {
        var callback = task.callback;
        var args = task.args;
        switch (args.length) {
        case 0:
            callback();
            break;
        case 1:
            callback(args[0]);
            break;
        case 2:
            callback(args[0], args[1]);
            break;
        case 3:
            callback(args[0], args[1], args[2]);
            break;
        default:
            callback.apply(undefined, args);
            break;
        }
    }

    function runIfPresent(handle) {
        // From the spec: "Wait until any invocations of this algorithm started before this one have completed."
        // So if we're currently running a task, we'll need to delay this invocation.
        if (currentlyRunningATask) {
            // Delay by doing a setTimeout. setImmediate was tried instead, but in Firefox 7 it generated a
            // "too much recursion" error.
            setTimeout(runIfPresent, 0, handle);
        } else {
            var task = tasksByHandle[handle];
            if (task) {
                currentlyRunningATask = true;
                try {
                    run(task);
                } finally {
                    clearImmediate(handle);
                    currentlyRunningATask = false;
                }
            }
        }
    }

    function installNextTickImplementation() {
        registerImmediate = function(handle) {
            process.nextTick(function () { runIfPresent(handle); });
        };
    }

    function canUsePostMessage() {
        // The test against `importScripts` prevents this implementation from being installed inside a web worker,
        // where `global.postMessage` means something completely different and can't be used for this purpose.
        if (global.postMessage && !global.importScripts) {
            var postMessageIsAsynchronous = true;
            var oldOnMessage = global.onmessage;
            global.onmessage = function() {
                postMessageIsAsynchronous = false;
            };
            global.postMessage("", "*");
            global.onmessage = oldOnMessage;
            return postMessageIsAsynchronous;
        }
    }

    function installPostMessageImplementation() {
        // Installs an event handler on `global` for the `message` event: see
        // * https://developer.mozilla.org/en/DOM/window.postMessage
        // * http://www.whatwg.org/specs/web-apps/current-work/multipage/comms.html#crossDocumentMessages

        var messagePrefix = "setImmediate$" + Math.random() + "$";
        var onGlobalMessage = function(event) {
            if (event.source === global &&
                typeof event.data === "string" &&
                event.data.indexOf(messagePrefix) === 0) {
                runIfPresent(+event.data.slice(messagePrefix.length));
            }
        };

        if (global.addEventListener) {
            global.addEventListener("message", onGlobalMessage, false);
        } else {
            global.attachEvent("onmessage", onGlobalMessage);
        }

        registerImmediate = function(handle) {
            global.postMessage(messagePrefix + handle, "*");
        };
    }

    function installMessageChannelImplementation() {
        var channel = new MessageChannel();
        channel.port1.onmessage = function(event) {
            var handle = event.data;
            runIfPresent(handle);
        };

        registerImmediate = function(handle) {
            channel.port2.postMessage(handle);
        };
    }

    function installReadyStateChangeImplementation() {
        var html = doc.documentElement;
        registerImmediate = function(handle) {
            // Create a <script> element; its readystatechange event will be fired asynchronously once it is inserted
            // into the document. Do so, thus queuing up the task. Remember to clean up once it's been called.
            var script = doc.createElement("script");
            script.onreadystatechange = function () {
                runIfPresent(handle);
                script.onreadystatechange = null;
                html.removeChild(script);
                script = null;
            };
            html.appendChild(script);
        };
    }

    function installSetTimeoutImplementation() {
        registerImmediate = function(handle) {
            setTimeout(runIfPresent, 0, handle);
        };
    }

    // If supported, we should attach to the prototype of global, since that is where setTimeout et al. live.
    var attachTo = Object.getPrototypeOf && Object.getPrototypeOf(global);
    attachTo = attachTo && attachTo.setTimeout ? attachTo : global;

    // Don't get fooled by e.g. browserify environments.
    if ({}.toString.call(global.process) === "[object process]") {
        // For Node.js before 0.9
        installNextTickImplementation();

    } else if (canUsePostMessage()) {
        // For non-IE10 modern browsers
        installPostMessageImplementation();

    } else if (global.MessageChannel) {
        // For web workers, where supported
        installMessageChannelImplementation();

    } else if (doc && "onreadystatechange" in doc.createElement("script")) {
        // For IE 6–8
        installReadyStateChangeImplementation();

    } else {
        // For older browsers
        installSetTimeoutImplementation();
    }

    attachTo.setImmediate = setImmediate;
    attachTo.clearImmediate = clearImmediate;
}(typeof self === "undefined" ? typeof global === "undefined" ? this : global : self));

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(17), __webpack_require__(22)))

/***/ }),
/* 80 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(global) {
/**
 * Module exports.
 */

module.exports = deprecate;

/**
 * Mark that a method should not be used.
 * Returns a modified function which warns once by default.
 *
 * If `localStorage.noDeprecation = true` is set, then it is a no-op.
 *
 * If `localStorage.throwDeprecation = true` is set, then deprecated functions
 * will throw an Error when invoked.
 *
 * If `localStorage.traceDeprecation = true` is set, then deprecated functions
 * will invoke `console.trace()` instead of `console.error()`.
 *
 * @param {Function} fn - the function to deprecate
 * @param {String} msg - the string to print to the console when `fn` is invoked
 * @returns {Function} a new "deprecated" version of `fn`
 * @api public
 */

function deprecate (fn, msg) {
  if (config('noDeprecation')) {
    return fn;
  }

  var warned = false;
  function deprecated() {
    if (!warned) {
      if (config('throwDeprecation')) {
        throw new Error(msg);
      } else if (config('traceDeprecation')) {
        console.trace(msg);
      } else {
        console.warn(msg);
      }
      warned = true;
    }
    return fn.apply(this, arguments);
  }

  return deprecated;
}

/**
 * Checks `localStorage` for boolean values for the given `name`.
 *
 * @param {String} name
 * @returns {Boolean}
 * @api private
 */

function config (name) {
  // accessing global.localStorage can trigger a DOMException in sandboxed iframes
  try {
    if (!global.localStorage) return false;
  } catch (_) {
    return false;
  }
  var val = global.localStorage[name];
  if (null == val) return false;
  return String(val).toLowerCase() === 'true';
}

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(17)))

/***/ }),
/* 81 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.

// a passthrough stream.
// basically just the most minimal sort of Transform stream.
// Every written chunk gets output as-is.



module.exports = PassThrough;

var Transform = __webpack_require__(46);

/*<replacement>*/
var util = __webpack_require__(23);
util.inherits = __webpack_require__(18);
/*</replacement>*/

util.inherits(PassThrough, Transform);

function PassThrough(options) {
  if (!(this instanceof PassThrough)) return new PassThrough(options);

  Transform.call(this, options);
}

PassThrough.prototype._transform = function (chunk, encoding, cb) {
  cb(null, chunk);
};

/***/ }),
/* 82 */
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__(34);


/***/ }),
/* 83 */
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__(15);


/***/ }),
/* 84 */
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__(33).Transform


/***/ }),
/* 85 */
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__(33).PassThrough


/***/ }),
/* 86 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
function isObject(value) {
    return value instanceof Object;
}
exports.isObject = isObject;
function isBoolean(value) {
    return typeof value === "boolean";
}
exports.isBoolean = isBoolean;
function isNumber(value) {
    return typeof value === "number";
}
exports.isNumber = isNumber;
function isArray(value) {
    return Array.isArray(value);
}
exports.isArray = isArray;


/***/ }),
/* 87 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.chromeNewTabPageUrls = [
    "https://www.bing.com/chrome/newtab",
    "https://www.google.ac/_/chrome/newtab",
    "https://www.google.ad/_/chrome/newtab",
    "https://www.google.ae/_/chrome/newtab",
    "https://www.google.af/_/chrome/newtab",
    "https://www.google.ag/_/chrome/newtab",
    "https://www.google.al/_/chrome/newtab",
    "https://www.google.am/_/chrome/newtab",
    "https://www.google.as/_/chrome/newtab",
    "https://www.google.at/_/chrome/newtab",
    "https://www.google.aw/_/chrome/newtab",
    "https://www.google.az/_/chrome/newtab",
    "https://www.google.ba/_/chrome/newtab",
    "https://www.google.be/_/chrome/newtab",
    "https://www.google.bf/_/chrome/newtab",
    "https://www.google.bg/_/chrome/newtab",
    "https://www.google.bi/_/chrome/newtab",
    "https://www.google.bj/_/chrome/newtab",
    "https://www.google.bm/_/chrome/newtab",
    "https://www.google.bn/_/chrome/newtab",
    "https://www.google.bo/_/chrome/newtab",
    "https://www.google.bs/_/chrome/newtab",
    "https://www.google.bt/_/chrome/newtab",
    "https://www.google.by/_/chrome/newtab",
    "https://www.google.ca/_/chrome/newtab",
    "https://www.google.cat/_/chrome/newtab",
    "https://www.google.cc/_/chrome/newtab",
    "https://www.google.cd/_/chrome/newtab",
    "https://www.google.cf/_/chrome/newtab",
    "https://www.google.cg/_/chrome/newtab",
    "https://www.google.ch/_/chrome/newtab",
    "https://www.google.ci/_/chrome/newtab",
    "https://www.google.cl/_/chrome/newtab",
    "https://www.google.cm/_/chrome/newtab",
    "https://www.google.cn/_/chrome/newtab",
    "https://www.google.co.ao/_/chrome/newtab",
    "https://www.google.co.bw/_/chrome/newtab",
    "https://www.google.co.ck/_/chrome/newtab",
    "https://www.google.co.cr/_/chrome/newtab",
    "https://www.google.co.gy/_/chrome/newtab",
    "https://www.google.co.hu/_/chrome/newtab",
    "https://www.google.co.id/_/chrome/newtab",
    "https://www.google.co.il/_/chrome/newtab",
    "https://www.google.co.im/_/chrome/newtab",
    "https://www.google.co.in/_/chrome/newtab",
    "https://www.google.co.je/_/chrome/newtab",
    "https://www.google.co.jp/_/chrome/newtab",
    "https://www.google.co.ke/_/chrome/newtab",
    "https://www.google.co.kr/_/chrome/newtab",
    "https://www.google.co.ls/_/chrome/newtab",
    "https://www.google.co.ma/_/chrome/newtab",
    "https://www.google.co.mz/_/chrome/newtab",
    "https://www.google.co.nz/_/chrome/newtab",
    "https://www.google.co.rs/_/chrome/newtab",
    "https://www.google.co.th/_/chrome/newtab",
    "https://www.google.co.tz/_/chrome/newtab",
    "https://www.google.co.ug/_/chrome/newtab",
    "https://www.google.co.uk/_/chrome/newtab",
    "https://www.google.co.uz/_/chrome/newtab",
    "https://www.google.co.ve/_/chrome/newtab",
    "https://www.google.co.vi/_/chrome/newtab",
    "https://www.google.co.za/_/chrome/newtab",
    "https://www.google.co.zm/_/chrome/newtab",
    "https://www.google.co.zw/_/chrome/newtab",
    "https://www.google.co/_/chrome/newtab",
    "https://www.google.com.af/_/chrome/newtab",
    "https://www.google.com.ag/_/chrome/newtab",
    "https://www.google.com.ai/_/chrome/newtab",
    "https://www.google.com.ar/_/chrome/newtab",
    "https://www.google.com.au/_/chrome/newtab",
    "https://www.google.com.bd/_/chrome/newtab",
    "https://www.google.com.bh/_/chrome/newtab",
    "https://www.google.com.bi/_/chrome/newtab",
    "https://www.google.com.bn/_/chrome/newtab",
    "https://www.google.com.bo/_/chrome/newtab",
    "https://www.google.com.br/_/chrome/newtab",
    "https://www.google.com.by/_/chrome/newtab",
    "https://www.google.com.bz/_/chrome/newtab",
    "https://www.google.com.cn/_/chrome/newtab",
    "https://www.google.com.co/_/chrome/newtab",
    "https://www.google.com.cu/_/chrome/newtab",
    "https://www.google.com.cy/_/chrome/newtab",
    "https://www.google.com.do/_/chrome/newtab",
    "https://www.google.com.dz/_/chrome/newtab",
    "https://www.google.com.ec/_/chrome/newtab",
    "https://www.google.com.eg/_/chrome/newtab",
    "https://www.google.com.er/_/chrome/newtab",
    "https://www.google.com.et/_/chrome/newtab",
    "https://www.google.com.fj/_/chrome/newtab",
    "https://www.google.com.ge/_/chrome/newtab",
    "https://www.google.com.gh/_/chrome/newtab",
    "https://www.google.com.gi/_/chrome/newtab",
    "https://www.google.com.gp/_/chrome/newtab",
    "https://www.google.com.gr/_/chrome/newtab",
    "https://www.google.com.gt/_/chrome/newtab",
    "https://www.google.com.gy/_/chrome/newtab",
    "https://www.google.com.hk/_/chrome/newtab",
    "https://www.google.com.ht/_/chrome/newtab",
    "https://www.google.com.iq/_/chrome/newtab",
    "https://www.google.com.jm/_/chrome/newtab",
    "https://www.google.com.jo/_/chrome/newtab",
    "https://www.google.com.kh/_/chrome/newtab",
    "https://www.google.com.kw/_/chrome/newtab",
    "https://www.google.com.kz/_/chrome/newtab",
    "https://www.google.com.lb/_/chrome/newtab",
    "https://www.google.com.lv/_/chrome/newtab",
    "https://www.google.com.ly/_/chrome/newtab",
    "https://www.google.com.mm/_/chrome/newtab",
    "https://www.google.com.mt/_/chrome/newtab",
    "https://www.google.com.mx/_/chrome/newtab",
    "https://www.google.com.my/_/chrome/newtab",
    "https://www.google.com.na/_/chrome/newtab",
    "https://www.google.com.nc/_/chrome/newtab",
    "https://www.google.com.nf/_/chrome/newtab",
    "https://www.google.com.ng/_/chrome/newtab",
    "https://www.google.com.ni/_/chrome/newtab",
    "https://www.google.com.np/_/chrome/newtab",
    "https://www.google.com.nr/_/chrome/newtab",
    "https://www.google.com.om/_/chrome/newtab",
    "https://www.google.com.pa/_/chrome/newtab",
    "https://www.google.com.pe/_/chrome/newtab",
    "https://www.google.com.pg/_/chrome/newtab",
    "https://www.google.com.ph/_/chrome/newtab",
    "https://www.google.com.pk/_/chrome/newtab",
    "https://www.google.com.pl/_/chrome/newtab",
    "https://www.google.com.pr/_/chrome/newtab",
    "https://www.google.com.ps/_/chrome/newtab",
    "https://www.google.com.pt/_/chrome/newtab",
    "https://www.google.com.py/_/chrome/newtab",
    "https://www.google.com.qa/_/chrome/newtab",
    "https://www.google.com.ru/_/chrome/newtab",
    "https://www.google.com.sa/_/chrome/newtab",
    "https://www.google.com.sb/_/chrome/newtab",
    "https://www.google.com.sg/_/chrome/newtab",
    "https://www.google.com.sl/_/chrome/newtab",
    "https://www.google.com.sv/_/chrome/newtab",
    "https://www.google.com.tj/_/chrome/newtab",
    "https://www.google.com.tm/_/chrome/newtab",
    "https://www.google.com.tn/_/chrome/newtab",
    "https://www.google.com.tr/_/chrome/newtab",
    "https://www.google.com.tw/_/chrome/newtab",
    "https://www.google.com.ua/_/chrome/newtab",
    "https://www.google.com.uy/_/chrome/newtab",
    "https://www.google.com.vc/_/chrome/newtab",
    "https://www.google.com.ve/_/chrome/newtab",
    "https://www.google.com.vn/_/chrome/newtab",
    "https://www.google.com/_/chrome/newtab",
    "https://www.google.cv/_/chrome/newtab",
    "https://www.google.cz/_/chrome/newtab",
    "https://www.google.de/_/chrome/newtab",
    "https://www.google.dj/_/chrome/newtab",
    "https://www.google.dk/_/chrome/newtab",
    "https://www.google.dm/_/chrome/newtab",
    "https://www.google.do/_/chrome/newtab",
    "https://www.google.dz/_/chrome/newtab",
    "https://www.google.ec/_/chrome/newtab",
    "https://www.google.ee/_/chrome/newtab",
    "https://www.google.es/_/chrome/newtab",
    "https://www.google.eu/_/chrome/newtab",
    "https://www.google.fi/_/chrome/newtab",
    "https://www.google.fm/_/chrome/newtab",
    "https://www.google.fr/_/chrome/newtab",
    "https://www.google.ga/_/chrome/newtab",
    "https://www.google.gd/_/chrome/newtab",
    "https://www.google.ge/_/chrome/newtab",
    "https://www.google.gf/_/chrome/newtab",
    "https://www.google.gg/_/chrome/newtab",
    "https://www.google.gl/_/chrome/newtab",
    "https://www.google.gm/_/chrome/newtab",
    "https://www.google.gp/_/chrome/newtab",
    "https://www.google.gr/_/chrome/newtab",
    "https://www.google.gw/_/chrome/newtab",
    "https://www.google.gy/_/chrome/newtab",
    "https://www.google.hk/_/chrome/newtab",
    "https://www.google.hn/_/chrome/newtab",
    "https://www.google.hr/_/chrome/newtab",
    "https://www.google.ht/_/chrome/newtab",
    "https://www.google.hu/_/chrome/newtab",
    "https://www.google.ie/_/chrome/newtab",
    "https://www.google.im/_/chrome/newtab",
    "https://www.google.in/_/chrome/newtab",
    "https://www.google.info/_/chrome/newtab",
    "https://www.google.io/_/chrome/newtab",
    "https://www.google.iq/_/chrome/newtab",
    "https://www.google.is/_/chrome/newtab",
    "https://www.google.it.ao/_/chrome/newtab",
    "https://www.google.it/_/chrome/newtab",
    "https://www.google.je/_/chrome/newtab",
    "https://www.google.jo/_/chrome/newtab",
    "https://www.google.jobs/_/chrome/newtab",
    "https://www.google.jp/_/chrome/newtab",
    "https://www.google.kg/_/chrome/newtab",
    "https://www.google.ki/_/chrome/newtab",
    "https://www.google.km/_/chrome/newtab",
    "https://www.google.kr/_/chrome/newtab",
    "https://www.google.kz/_/chrome/newtab",
    "https://www.google.la/_/chrome/newtab",
    "https://www.google.li/_/chrome/newtab",
    "https://www.google.lk/_/chrome/newtab",
    "https://www.google.lt/_/chrome/newtab",
    "https://www.google.lu/_/chrome/newtab",
    "https://www.google.lv/_/chrome/newtab",
    "https://www.google.ma/_/chrome/newtab",
    "https://www.google.md/_/chrome/newtab",
    "https://www.google.me/_/chrome/newtab",
    "https://www.google.mg/_/chrome/newtab",
    "https://www.google.mh/_/chrome/newtab",
    "https://www.google.mk/_/chrome/newtab",
    "https://www.google.ml/_/chrome/newtab",
    "https://www.google.mn/_/chrome/newtab",
    "https://www.google.mr/_/chrome/newtab",
    "https://www.google.ms/_/chrome/newtab",
    "https://www.google.mu/_/chrome/newtab",
    "https://www.google.mv/_/chrome/newtab",
    "https://www.google.mw/_/chrome/newtab",
    "https://www.google.mx/_/chrome/newtab",
    "https://www.google.ne.jp/_/chrome/newtab",
    "https://www.google.ne/_/chrome/newtab",
    "https://www.google.net/_/chrome/newtab",
    "https://www.google.ng/_/chrome/newtab",
    "https://www.google.nl/_/chrome/newtab",
    "https://www.google.no/_/chrome/newtab",
    "https://www.google.nr/_/chrome/newtab",
    "https://www.google.nu/_/chrome/newtab",
    "https://www.google.off.ai/_/chrome/newtab",
    "https://www.google.org/_/chrome/newtab",
    "https://www.google.pf/_/chrome/newtab",
    "https://www.google.ph/_/chrome/newtab",
    "https://www.google.pk/_/chrome/newtab",
    "https://www.google.pl/_/chrome/newtab",
    "https://www.google.pn/_/chrome/newtab",
    "https://www.google.ps/_/chrome/newtab",
    "https://www.google.pt/_/chrome/newtab",
    "https://www.google.qa/_/chrome/newtab",
    "https://www.google.re/_/chrome/newtab",
    "https://www.google.ro/_/chrome/newtab",
    "https://www.google.rs/_/chrome/newtab",
    "https://www.google.ru/_/chrome/newtab",
    "https://www.google.rw/_/chrome/newtab",
    "https://www.google.sc/_/chrome/newtab",
    "https://www.google.se/_/chrome/newtab",
    "https://www.google.sg/_/chrome/newtab",
    "https://www.google.sh/_/chrome/newtab",
    "https://www.google.si/_/chrome/newtab",
    "https://www.google.sk/_/chrome/newtab",
    "https://www.google.sl/_/chrome/newtab",
    "https://www.google.sm/_/chrome/newtab",
    "https://www.google.sn/_/chrome/newtab",
    "https://www.google.so/_/chrome/newtab",
    "https://www.google.sr/_/chrome/newtab",
    "https://www.google.st/_/chrome/newtab",
    "https://www.google.sz/_/chrome/newtab",
    "https://www.google.td/_/chrome/newtab",
    "https://www.google.tel/_/chrome/newtab",
    "https://www.google.tg/_/chrome/newtab",
    "https://www.google.tk/_/chrome/newtab",
    "https://www.google.tl/_/chrome/newtab",
    "https://www.google.tm/_/chrome/newtab",
    "https://www.google.tn/_/chrome/newtab",
    "https://www.google.to/_/chrome/newtab",
    "https://www.google.tt/_/chrome/newtab",
    "https://www.google.tw/_/chrome/newtab",
    "https://www.google.ua/_/chrome/newtab",
    "https://www.google.us/_/chrome/newtab",
    "https://www.google.uz/_/chrome/newtab",
    "https://www.google.vg/_/chrome/newtab",
    "https://www.google.vn/_/chrome/newtab",
    "https://www.google.vu/_/chrome/newtab",
    "https://www.google.ws/_/chrome/newtab",
    "https://www.google.yt/_/chrome/newtab",
];


/***/ }),
/* 88 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
const date_utils_1 = __webpack_require__(40);
const tab_stalker_1 = __webpack_require__(47);
const web_request_listener_1 = __webpack_require__(91);
const maybe_1 = __webpack_require__(0);
const once_1 = __webpack_require__(30);
const message_router_1 = __webpack_require__(54);
const log_1 = __webpack_require__(1);
const trusted_url_tracker_1 = __webpack_require__(96);
const placement_manager_1 = __webpack_require__(100);
const blocked_page_controller_1 = __webpack_require__(101);
const download_tracker_1 = __webpack_require__(102);
const config_notifier_1 = __webpack_require__(103);
const config_updater_1 = __webpack_require__(104);
const nav_sequence_detector_1 = __webpack_require__(49);
const error_handler_1 = __webpack_require__(63);
const errors_1 = __webpack_require__(21);
const message_types_1 = __webpack_require__(2);
const external_app_link_controller_1 = __webpack_require__(107);
const file_url_tracker_1 = __webpack_require__(108);
const file_blocker_1 = __webpack_require__(109);
const popup_page_controller_1 = __webpack_require__(56);
const browser_1 = __webpack_require__(6);
const feature_manager_1 = __webpack_require__(111);
const heartbeat_1 = __webpack_require__(112);
const options_page_controller_1 = __webpack_require__(113);
const on_configured_1 = __webpack_require__(61);
const new_tab_page_url_tracker_1 = __webpack_require__(114);
const host_helper_channel_1 = __webpack_require__(115);
const logger_1 = __webpack_require__(117);
const context_menus_1 = __webpack_require__(118);
class EventPageListener {
    constructor(config) {
        this.config = config;
        const browser = browser_1.getCurrentBrowser();
        const configNotifier = new config_notifier_1.ConfigNotifier(this.config);
        const messageRouter = new message_router_1.GenericMessageRouter();
        messageRouter.registerMessageHandler(message_types_1.MessageType.edgeAckV10, () => { });
        const onConfiguredManager = new on_configured_1.OnConfiguredManager();
        const errorHandler = new error_handler_1.ErrorHandler(browser, messageRouter, configNotifier, onConfiguredManager);
        const hostHelperChannel = new host_helper_channel_1.HelperPortChannel(errorHandler, messageRouter);
        const messageSender = hostHelperChannel.messageSender;
        errorHandler.setup(messageSender, hostHelperChannel, hostHelperChannel, () => hostHelperChannel.reconnect());
        log_1.logger.addSink(new logger_1.HelperLogSink(messageSender));
        new logger_1.MessageLogger(messageRouter, hostHelperChannel);
        new heartbeat_1.HeartbeatController(errorHandler, messageSender, messageRouter, hostHelperChannel);
        new config_updater_1.ConfigUpdater(this.config, configNotifier, messageSender, messageRouter, hostHelperChannel, onConfiguredManager);
        const featureManager = new feature_manager_1.FeatureManager(messageRouter, messageSender, hostHelperChannel, configNotifier, onConfiguredManager);
        const tabStalker = new tab_stalker_1.TabStalker(browser);
        const trustedUrlTracker = new trusted_url_tracker_1.TrustedUrlTracker(configNotifier, messageSender);
        const fileUrlTracker = new file_url_tracker_1.FileUrlTracker(messageRouter, messageSender, browser);
        const newTabPageUrlTracker = new new_tab_page_url_tracker_1.NewTabPageUrlTracker(configNotifier, browser);
        const placementManager = new placement_manager_1.PlacementManager(trustedUrlTracker, fileUrlTracker, newTabPageUrlTracker, configNotifier);
        const browserLauncher = new blocked_page_controller_1.BrowserLauncher(messageRouter, messageSender, hostHelperChannel);
        browserLauncher.registerEventHandler(event => errorHandler.onBrowserLaunchEvent(event));
        const contextMenuManager = new context_menus_1.ContextMenuManager(browserLauncher, placementManager, errorHandler, configNotifier);
        const blockedPageController = new blocked_page_controller_1.BlockedPageController(browser, trustedUrlTracker, browserLauncher, configNotifier, hostHelperChannel, onConfiguredManager, messageSender);
        const fileBlocker = new file_blocker_1.FileBlocker(browser, fileUrlTracker, browserLauncher, onConfiguredManager);
        const blockLink = (linkURL, tabId) => blockedPageController.blockLink(linkURL, tabId);
        const externalAppLinkController = new external_app_link_controller_1.ExternalAppLinkController(browser, blockLink, onConfiguredManager, errorHandler);
        new popup_page_controller_1.PopupController(messageSender, configNotifier, errorHandler, featureManager, hostHelperChannel);
        new options_page_controller_1.OptionsController(messageSender, configNotifier, hostHelperChannel);
        const phishingNavSequenceDetector = new nav_sequence_detector_1.PhishingNavSequenceDetector(browser, configNotifier, tabStalker);
        const downloadTracker = new download_tracker_1.DownloadTracker(browser, messageSender, hostHelperChannel, featureManager, errorHandler);
        const webRequestListener = new web_request_listener_1.WebRequestListener(browser, configNotifier, tabStalker, placementManager, blockedPageController, fileBlocker, browserLauncher, phishingNavSequenceDetector, externalAppLinkController, featureManager, onConfiguredManager, errorHandler);
        const registerListeners = once_1.doOnce(() => {
            chrome.runtime.onInstalled.addListener(this.onInstalled.bind(this));
            chrome.runtime.onUpdateAvailable.addListener(this.onUpdateAvailable.bind(this));
            contextMenuManager.registerListeners();
            hostHelperChannel.connect();
            tabStalker.registerListeners();
            downloadTracker.registerListeners();
            webRequestListener.registerListeners();
            tabStalker.queryRestoredSessionTabs();
        });
        if (maybe_1.some(browser)) {
            log_1.log(`The current browser is ${browser_1.Browser[browser]} with userAgent "${navigator.userAgent}"`);
        }
        else {
            log_1.logError(new Error("Unable to work out the current browser"));
        }
        log_1.log(`EventPageListener constructed for extension version: ${chrome.runtime.getManifest().version}`);
        registerListeners();
        if (browser == browser_1.Browser.firefox && browser_1.is32bitFirefox()) {
            errorHandler.raiseError(errors_1.ChragError.is32bitFirefox);
        }
    }
    onInstalled(details) {
        log_1.log(`onInstalled(${JSON.stringify(details)})`);
        log_1.log(`onInstalled: ${date_utils_1.currentDateTimeString()}`);
    }
    onUpdateAvailable(details) {
        log_1.log(`onUpdateAvailable(${JSON.stringify(details)})`);
        log_1.log(`onUpdateAvailable: ${date_utils_1.currentDateTimeString()}`);
    }
}
exports.EventPageListener = EventPageListener;


/***/ }),
/* 89 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
const maybe_1 = __webpack_require__(0);
const array_utils_1 = __webpack_require__(8);
const parser_utils_1 = __webpack_require__(90);
const number_utils_1 = __webpack_require__(10);
exports.charLexers = (() => {
    const octet = parser_utils_1.matchCharCodeRange(0, 255);
    const char = parser_utils_1.matchCharCodeRange(0, 127);
    const upalpha = parser_utils_1.matchCharRange('A', 'Z');
    const loalpha = parser_utils_1.matchCharRange('a', 'z');
    const digit = parser_utils_1.matchCharRange('0', '9');
    const ctl = parser_utils_1.matchCharSet(parser_utils_1.matchCharCodeRange(0, 31), parser_utils_1.matchCharCode(127));
    const cr = parser_utils_1.matchCharCode(13);
    const lf = parser_utils_1.matchCharCode(10);
    const sp = parser_utils_1.matchCharCode(32);
    const ht = parser_utils_1.matchCharCode(9);
    const doubleQuote = parser_utils_1.matchCharCode(34);
    const crlf = parser_utils_1.matchCharSeq(cr, lf);
    const lws = parser_utils_1.matchSeq(parser_utils_1.matchMaybe(crlf), parser_utils_1.matchAtLeastOnce(parser_utils_1.matchStream(parser_utils_1.matchCharSet(sp, ht))));
    const nonWhitespaceText = parser_utils_1.matchStream(parser_utils_1.matchAndChar(octet, parser_utils_1.matchNotChar(ctl)));
    const text = parser_utils_1.matchAtLeastOnce(parser_utils_1.matchAlt(nonWhitespaceText, lws));
    const hex = parser_utils_1.matchCharSet(parser_utils_1.matchCharRange('A', 'F'), parser_utils_1.matchCharRange('a', 'f'), digit);
    const separators = parser_utils_1.matchCharSet(parser_utils_1.matchChars('(', ')', '<', '>', '@', ',', ';', ':', '\\', '"', '/', '[', ']', '?', '=', '{', '}'), sp, ht);
    const token = parser_utils_1.matchAtLeastOnce(parser_utils_1.matchStream(parser_utils_1.matchAndChar(char, parser_utils_1.matchNotChar(ctl), parser_utils_1.matchNotChar(separators))));
    const nonWhitespaceNonParens = parser_utils_1.matchStream(parser_utils_1.matchAndChar(octet, parser_utils_1.matchNotChar(ctl), parser_utils_1.matchNotChar(parser_utils_1.matchChars('(', ')'))));
    const ctext = parser_utils_1.matchAtLeastOnce(parser_utils_1.matchAlt(nonWhitespaceNonParens, lws));
    const quotedPair = parser_utils_1.matchCharSeq(parser_utils_1.matchChar('\\'), char);
    let comment;
    const matchComment = (stream) => {
        return comment(stream);
    };
    comment = parser_utils_1.matchSeq(parser_utils_1.matchStream(parser_utils_1.matchChar('(')), parser_utils_1.matchRepeat(parser_utils_1.matchAlt(ctext, quotedPair, matchComment)), parser_utils_1.matchStream(parser_utils_1.matchChar(')')));
    const nonWhitespaceNonQuotedText = parser_utils_1.matchStream(parser_utils_1.matchAndChar(octet, parser_utils_1.matchNotChar(ctl), parser_utils_1.matchNotChar(parser_utils_1.matchChar('"'))));
    const qdtext = parser_utils_1.matchAtLeastOnce(parser_utils_1.matchAlt(nonWhitespaceNonQuotedText, lws));
    const quotedString = parser_utils_1.matchSeq(parser_utils_1.matchStream(doubleQuote), parser_utils_1.matchRepeat(parser_utils_1.matchAlt(qdtext, quotedPair)), parser_utils_1.matchStream(doubleQuote));
    return {
        octet,
        char,
        upalpha,
        loalpha,
        digit,
        ctl,
        cr,
        lf,
        sp,
        ht,
        doubleQuote,
        crlf,
        lws,
        text,
        hex,
        token,
        comment,
        quotedString,
        quotedPair
    };
})();
var TokenType;
(function (TokenType) {
    TokenType[TokenType["unspecified"] = 0] = "unspecified";
    TokenType[TokenType["comment"] = 1] = "comment";
    TokenType[TokenType["productName"] = 2] = "productName";
    TokenType[TokenType["productVersion"] = 3] = "productVersion";
    TokenType[TokenType["product"] = 4] = "product";
    TokenType[TokenType["userAgent"] = 5] = "userAgent";
    TokenType[TokenType["versionNumberComponent"] = 6] = "versionNumberComponent";
    TokenType[TokenType["versionNumber"] = 7] = "versionNumber";
})(TokenType = exports.TokenType || (exports.TokenType = {}));
function matchUnspecifiedToken(matcher) {
    return parser_utils_1.matchTree(TokenType.unspecified, matcher);
}
exports.tokenParsers = (() => {
    const comment = parser_utils_1.matchTree(TokenType.comment, exports.charLexers.comment);
    const productName = parser_utils_1.matchTree(TokenType.productName, exports.charLexers.token);
    const productVersion = parser_utils_1.matchTree(TokenType.productVersion, exports.charLexers.token);
    const product = parser_utils_1.matchTreeFlatten(TokenType.product, parser_utils_1.matchSeq(productName, parser_utils_1.matchMaybe(parser_utils_1.matchSeq(matchUnspecifiedToken(parser_utils_1.matchStream(parser_utils_1.matchChar('/'))), productVersion))));
    const userAgent = parser_utils_1.matchTreeFlatten(TokenType.userAgent, parser_utils_1.matchSeq(parser_utils_1.matchAlt(product, comment), parser_utils_1.matchRepeat(parser_utils_1.matchSeq(parser_utils_1.matchTree(TokenType.unspecified, exports.charLexers.lws), parser_utils_1.matchAlt(product, comment)))));
    const versionNumberComponent = parser_utils_1.matchTree(TokenType.versionNumberComponent, parser_utils_1.matchAtLeastOnce(parser_utils_1.matchStream(exports.charLexers.digit)));
    const versionNumber = parser_utils_1.matchTreeFlatten(TokenType.versionNumber, parser_utils_1.matchSeq(versionNumberComponent, parser_utils_1.matchRepeat(parser_utils_1.matchSeq(matchUnspecifiedToken(parser_utils_1.matchStream(parser_utils_1.matchChar('.'))), versionNumberComponent))));
    return {
        comment,
        product,
        userAgent,
        versionNumber
    };
})();
class Product {
    constructor(name, version) {
        this.name = name;
        this.version = version;
    }
}
exports.Product = Product;
function parseToken(matchToken, type, tokenStr) {
    const stream = parser_utils_1.makeStringStream(tokenStr);
    const tree = array_utils_1.maybeFirst(matchToken(stream));
    if (maybe_1.none(tree)) {
        return undefined;
    }
    if (tree.key !== type) {
        return undefined;
    }
    return tree;
}
function parseUserAgent(userAgentStr) {
    const userAgentTree = parseToken(exports.tokenParsers.userAgent, TokenType.userAgent, userAgentStr);
    if (maybe_1.none(userAgentTree)) {
        return undefined;
    }
    const productTrees = userAgentTree.find(TokenType.product);
    const findUniqueChild = (type, tree) => {
        const child = array_utils_1.maybeFirst(tree.find(type));
        return child;
    };
    const findUniqueChildValue = (type, tree) => {
        const child = findUniqueChild(type, tree);
        if (maybe_1.none(child)) {
            return undefined;
        }
        return String.fromCharCode(...child.value);
    };
    const makeProduct = (productTree) => {
        const productName = findUniqueChildValue(TokenType.productName, productTree);
        if (maybe_1.none(productName)) {
            return undefined;
        }
        const productVersion = findUniqueChildValue(TokenType.productVersion, productTree);
        return new Product(productName, productVersion);
    };
    const products = productTrees.map(makeProduct).filter(maybe_1.some);
    return products;
}
exports.parseUserAgent = parseUserAgent;
function parseProductVersion(productVersionStr) {
    const productVersionTree = parseToken(exports.tokenParsers.versionNumber, TokenType.versionNumber, productVersionStr);
    if (maybe_1.none(productVersionTree)) {
        return undefined;
    }
    const versionComponentTrees = productVersionTree.find(TokenType.versionNumberComponent);
    const parsedVersionComponents = versionComponentTrees.map((tree) => number_utils_1.parseNumber(String.fromCharCode(...tree.value)));
    if (parsedVersionComponents.some(maybe_1.none)) {
        return undefined;
    }
    const versionComponents = parsedVersionComponents.filter(maybe_1.some);
    return versionComponents;
}
exports.parseProductVersion = parseProductVersion;


/***/ }),
/* 90 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
const maybe_1 = __webpack_require__(0);
const array_utils_1 = __webpack_require__(8);
class Tree {
    constructor(key, value, children = []) {
        this.key = key;
        this.value = value;
        this.children = children;
    }
    addChild(key, value) {
        const child = new Tree(key, value);
        return new Tree(this.key, this.value, [...this.children, child]);
    }
    find(key, compareKeys = maybe_1.isEqual) {
        return this.doFind(key, compareKeys, []);
    }
    doFind(key, compareKeys, result) {
        if (key === this.key) {
            result.push(this);
        }
        for (const child of this.children) {
            child.doFind(key, compareKeys, result);
        }
        return result;
    }
    isEqual(other, compareKeys = maybe_1.isEqual, compareValues = maybe_1.isEqual) {
        if (!compareKeys(this.key, other.key)) {
            return false;
        }
        if (!compareValues(this.value, other.value)) {
            return false;
        }
        return array_utils_1.compareArrays(this.children, other.children, (a, b) => a.isEqual(b, compareKeys, compareValues));
    }
}
exports.Tree = Tree;
function makeTree(key, value, ...children) {
    return new Tree(key, value, children);
}
exports.makeTree = makeTree;
function charToCode(char) {
    return char.charCodeAt(0);
}
exports.charToCode = charToCode;
function strToCharCodes(str) {
    const codes = new Array();
    for (let i = 0; i < str.length; i += 1) {
        const code = str.charCodeAt(i);
        codes.push(code);
    }
    return codes;
}
exports.strToCharCodes = strToCharCodes;
class Stream {
    constructor(content, pos = 0) {
        this.content = content;
        this.pos = pos;
    }
    get position() {
        return this.pos;
    }
    get length() {
        return this.content.length;
    }
    isAtEnd() {
        return this.position === this.length;
    }
    canRead() {
        return this.position < this.length;
    }
    read() {
        if (!this.canRead()) {
            return undefined;
        }
        const value = this.content[this.position];
        this.setPosition(this.position + 1);
        return value;
    }
    savePosition() {
        return this.position;
    }
    restorePosition(position) {
        this.setPosition(position);
    }
    setPosition(position) {
        this.pos = position;
    }
}
exports.Stream = Stream;
function makeStringStream(str) {
    const content = strToCharCodes(str);
    return new Stream(content);
}
exports.makeStringStream = makeStringStream;
function matchCharCode(valueToMatch) {
    return (value) => {
        if (value === valueToMatch) {
            return value;
        }
        return undefined;
    };
}
exports.matchCharCode = matchCharCode;
function matchChar(valueToMatch) {
    return matchCharCode(charToCode(valueToMatch));
}
exports.matchChar = matchChar;
function matchCharCodes(...values) {
    return (value) => {
        if (array_utils_1.has(values, value)) {
            return value;
        }
        return undefined;
    };
}
exports.matchCharCodes = matchCharCodes;
function matchChars(...values) {
    return matchCharCodes(...values.map(charToCode));
}
exports.matchChars = matchChars;
function matchCharCodeRange(first, last) {
    return (value) => {
        if (value >= first && value <= last) {
            return value;
        }
        return undefined;
    };
}
exports.matchCharCodeRange = matchCharCodeRange;
function matchCharRange(first, last) {
    return matchCharCodeRange(charToCode(first), charToCode(last));
}
exports.matchCharRange = matchCharRange;
function matchCharSet(...matchers) {
    return (value) => {
        if (matchers.some(matcher => maybe_1.some(matcher(value)))) {
            return value;
        }
        return undefined;
    };
}
exports.matchCharSet = matchCharSet;
function matchNotChar(matcher) {
    return (value) => {
        if (maybe_1.none(matcher(value))) {
            return value;
        }
        return undefined;
    };
}
exports.matchNotChar = matchNotChar;
function matchAndChar(...matchers) {
    return (value) => {
        if (matchers.every(matcher => maybe_1.some(matcher(value)))) {
            return value;
        }
        return undefined;
    };
}
exports.matchAndChar = matchAndChar;
function matchStream(matcher) {
    return (stream) => {
        const position = stream.savePosition();
        const onMatchFailed = () => {
            stream.restorePosition(position);
            return undefined;
        };
        const result = new Array();
        const value = stream.read();
        if (maybe_1.none(value)) {
            return onMatchFailed();
        }
        const match = matcher(value);
        if (maybe_1.none(match)) {
            return onMatchFailed();
        }
        result.push(match);
        return result;
    };
}
exports.matchStream = matchStream;
function matchCharSeq(...matchers) {
    return (stream) => {
        const position = stream.savePosition();
        const didNotMatch = () => {
            stream.restorePosition(position);
            return undefined;
        };
        const result = new Array();
        for (const matcher of matchers) {
            const value = stream.read();
            if (maybe_1.none(value)) {
                return didNotMatch();
            }
            const match = matcher(value);
            if (maybe_1.none(match)) {
                return didNotMatch();
            }
            result.push(match);
        }
        return result;
    };
}
exports.matchCharSeq = matchCharSeq;
function matchSeq(...matchers) {
    return (stream) => {
        const position = stream.savePosition();
        let result = new Array();
        for (const matcher of matchers) {
            const match = matcher(stream);
            if (maybe_1.none(match)) {
                stream.restorePosition(position);
                return undefined;
            }
            result = result.concat(match);
        }
        return result;
    };
}
exports.matchSeq = matchSeq;
function matchMaybe(matcher) {
    return (stream) => {
        const position = stream.savePosition();
        const match = matcher(stream);
        if (maybe_1.none(match)) {
            stream.restorePosition(position);
            return new Array();
        }
        return match;
    };
}
exports.matchMaybe = matchMaybe;
function matchAtLeastOnce(matcher) {
    return (stream) => {
        const position = stream.savePosition();
        const match = matcher(stream);
        if (maybe_1.none(match)) {
            stream.restorePosition(position);
            return undefined;
        }
        let result = match;
        while (true) {
            const position = stream.savePosition();
            const match = matcher(stream);
            if (maybe_1.none(match)) {
                stream.restorePosition(position);
                return result;
            }
            result = result.concat(match);
        }
    };
}
exports.matchAtLeastOnce = matchAtLeastOnce;
function matchRepeat(matcher) {
    const doMatchAtLeastOnce = matchAtLeastOnce(matcher);
    return (stream) => {
        const match = doMatchAtLeastOnce(stream);
        if (maybe_1.none(match)) {
            return new Array();
        }
        return match;
    };
}
exports.matchRepeat = matchRepeat;
function matchAlt(...matchers) {
    return (stream) => {
        for (const matcher of matchers) {
            const position = stream.savePosition();
            const match = matcher(stream);
            if (maybe_1.some(match)) {
                return match;
            }
            stream.restorePosition(position);
        }
        return undefined;
    };
}
exports.matchAlt = matchAlt;
function matchTree(key, matcher) {
    return (stream) => {
        const match = matcher(stream);
        if (maybe_1.none(match)) {
            return undefined;
        }
        return [makeTree(key, match)];
    };
}
exports.matchTree = matchTree;
function matchTreeFlatten(key, matcher) {
    return (stream) => {
        const match = matcher(stream);
        if (maybe_1.none(match)) {
            return undefined;
        }
        const value = match.reduce((currentValue, tree) => currentValue.concat(tree.value), new Array());
        return [makeTree(key, value, ...match)];
    };
}
exports.matchTreeFlatten = matchTreeFlatten;


/***/ }),
/* 91 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
const url_utils_1 = __webpack_require__(4);
const tab_stalker_1 = __webpack_require__(47);
const boolean_utils_1 = __webpack_require__(92);
const array_utils_1 = __webpack_require__(8);
const log_1 = __webpack_require__(1);
const string_utils_1 = __webpack_require__(3);
const origin_1 = __webpack_require__(9);
const maybe_1 = __webpack_require__(0);
const nav_sequence_detector_1 = __webpack_require__(49);
const nav_sequence_parser_1 = __webpack_require__(36);
const array_utils_2 = __webpack_require__(8);
const phishing_source_sites_1 = __webpack_require__(50);
const http_method_1 = __webpack_require__(51);
const browser_1 = __webpack_require__(6);
const host_constants_1 = __webpack_require__(12);
const url_parse_utils_1 = __webpack_require__(52);
const config_keys_1 = __webpack_require__(7);
const blocked_page_options_1 = __webpack_require__(53);
const url_parse_utils_2 = __webpack_require__(52);
const id_generator_1 = __webpack_require__(19);
const web_request_listener_filter_1 = __webpack_require__(95);
const history_1 = __webpack_require__(28);
const content_type_1 = __webpack_require__(37);
function ifIncognitoTab(tabId, action) {
    chrome.tabs.get(tabId, tab => {
        if (tab.incognito) {
            action();
        }
    });
}
var Comparison;
(function (Comparison) {
    Comparison[Comparison["lessThan"] = -1] = "lessThan";
    Comparison[Comparison["equal"] = 0] = "equal";
    Comparison[Comparison["greaterThan"] = 1] = "greaterThan";
})(Comparison || (Comparison = {}));
class WebRequestListener {
    constructor(browser, configNotifier, tabStalker, placementManager, blockedPageController, fileBlocker, browserLauncher, phishingNavSequenceDetector, externalAppLinkController, featureManager, onConfigured, errorHandler) {
        this.browser = browser;
        this.tabStalker = tabStalker;
        this.placementManager = placementManager;
        this.blockedPageController = blockedPageController;
        this.fileBlocker = fileBlocker;
        this.browserLauncher = browserLauncher;
        this.phishingNavSequenceDetector = phishingNavSequenceDetector;
        this.externalAppLinkController = externalAppLinkController;
        this.featureManager = featureManager;
        this.onConfigured = onConfigured;
        this.extensionHoldingPageURL = chrome.runtime.getURL(host_constants_1.hostConstants.holdingPage);
        this.onBeforeRequestCB = (details) => this.onBeforeRequest(details);
        this.onBeforeRedirectCB = (details) => this.onBeforeRedirect(details);
        this.onHeadersReceivedCB = (details) => this.onHeadersReceived(details);
        this.onCompletedCB = (details) => this.onCompleted(details);
        this.onErrorOccurredCB = (details) => this.onErrorOccurred(details);
        this.pendingRedirects = new Set();
        this.tabs = new Set();
        this.tabURLs = new Map();
        this.redirectBackToSrcInfo = new Map();
        this.isDormant = false;
        this.promptForUncategorized = false;
        this.delayedTabs = new Set();
        this.idGenerator = new id_generator_1.IdGenerator();
        this.newTabURLs = tab_stalker_1.parseBrowserNewTabURLs();
        this.aboutBlankURL = url_utils_1.parseUrl("about:blank");
        this.edgeMajorVersion = browser_1.findEdgeMajorVersion();
        configNotifier.addConfigListenerForKeys((key, config) => { this.onConfigChanged(key, config); }, [config_keys_1.ConfigKey.promptForUncategorized]);
        this.tabStalker.registerOnTabClosedHandler((tabId) => this.onTabClosed(tabId));
        this.tabStalker.registerOnTabRestoredListeners((tabId, url) => this.onTabRestored(tabId, url));
        errorHandler.onDormantStateChanged.registerEventHandler(this.onDormantStateChanged.bind(this));
        this.onConfigured.registerListener(() => this.removeHoldingPageFromHistory());
    }
    onConfigChanged(key, config) {
        switch (key) {
            case config_keys_1.ConfigKey.promptForUncategorized:
                this.promptForUncategorized = config.promptForUncategorized;
                break;
        }
    }
    onDormantStateChanged(dormantState) {
        this.isDormant = dormantState;
    }
    removeHoldingPageFromHistory() {
        const extensionWindows = chrome.extension.getViews({ type: "tab" });
        if (extensionWindows.some(window => window.location.href === this.extensionHoldingPageURL)) {
            setTimeout(() => this.removeHoldingPageFromHistory(), 500);
            return;
        }
        history_1.removeUrlFromHistory(this.browser, this.extensionHoldingPageURL);
    }
    onTabRestored(tabId, url) {
        const isNewTab = this.detectedTab(tabId);
        if (!isNewTab) {
            return;
        }
        this.onConfigured.registerListener(() => {
            log_1.log(`WebRequestListener.onTabRestored: tabId: ${tabId} url: ${url}`);
            const urlCategory = this.categorizeURL(url);
            const groups = this.findGroups(url);
            const didUserCreateTab = this.didUserCreateTab(tabId);
            this.detectPhishingNavSequenceOnNavigate(tabId, url, urlCategory, groups, isNewTab, didUserCreateTab);
            this.onTabNavigated(tabId, url);
        });
    }
    isRestoredSessionTab(tabId) {
        return this.tabStalker.isRestoredSessionTab(tabId);
    }
    findTabURL(tabId) {
        if (maybe_1.none(tabId)) {
            return undefined;
        }
        const webRequestListenerURL = this.tabURLs.get(tabId);
        let tabStalkerURL = undefined;
        const urlOrSpec = this.tabStalker.findTabURL(tabId);
        if (maybe_1.some(urlOrSpec)) {
            tabStalkerURL = url_utils_1.parseURLIfNecessary(urlOrSpec);
        }
        if (maybe_1.some(webRequestListenerURL) && maybe_1.some(tabStalkerURL)) {
            if (!url_utils_1.isSameUrl(webRequestListenerURL, tabStalkerURL)) {
                log_1.logError(new Error(`webRequestListenerURL (${webRequestListenerURL}) and tabStalkerURL` +
                    ` (${tabStalkerURL}) do not match for tab ${tabId}. Will use tabStalkerURL`));
            }
            return tabStalkerURL;
        }
        if (maybe_1.some(webRequestListenerURL)) {
            return webRequestListenerURL;
        }
        if (maybe_1.some(tabStalkerURL)) {
            return tabStalkerURL;
        }
        return undefined;
    }
    findOpenerTabId(tabId) {
        return this.tabStalker.findOpenerTabId(tabId);
    }
    findOpenerWindowTabId(windowId) {
        const ids = this.tabStalker.findOpenerWindowId(windowId);
        if (maybe_1.none(ids)) {
            return undefined;
        }
        const [, openerTabId] = ids;
        return openerTabId;
    }
    findParentTabIds(tabId, isNewTab) {
        const filterUniqueTabIds = (tabIds) => {
            const uniqueTabsIds = [];
            const unorderedUniqueTabIds = new Set();
            for (const tabId of tabIds) {
                if (!unorderedUniqueTabIds.has(tabId)) {
                    unorderedUniqueTabIds.add(tabId);
                    uniqueTabsIds.push(tabId);
                }
            }
            return uniqueTabsIds;
        };
        const removeTabId = (tabIds, tabIdToRemove) => {
            return tabIds.filter((tabId) => tabId !== tabIdToRemove);
        };
        const isSameTab = (parentTabId) => {
            return tabId === parentTabId;
        };
        let parentTabIds = [];
        const openerTabId = this.findOpenerTabId(tabId);
        if (maybe_1.some(openerTabId) && !isSameTab(openerTabId)) {
            parentTabIds.push(openerTabId);
        }
        const activatedTabId = this.tabStalker.activatedTabId;
        if (maybe_1.some(activatedTabId)) {
            if (!isSameTab(activatedTabId)) {
                parentTabIds.push(activatedTabId);
            }
            else {
                const lastActivatedTabId = this.tabStalker.lastActivatedTabId;
                if (maybe_1.some(lastActivatedTabId) && !isSameTab(lastActivatedTabId)) {
                    parentTabIds.push(lastActivatedTabId);
                }
            }
        }
        const lastFocusedWindowActivatedTabId = this.tabStalker.lastFocusedWindowActivatedTabId;
        if (maybe_1.some(lastFocusedWindowActivatedTabId) && !isSameTab(lastFocusedWindowActivatedTabId)) {
            parentTabIds.push(lastFocusedWindowActivatedTabId);
        }
        const maybeNewWindowId = this.tabStalker.maybeNewWindowId;
        if (maybe_1.some(maybeNewWindowId) && isNewTab) {
            const openerWindowTabId = this.findOpenerWindowTabId(maybeNewWindowId);
            if (maybe_1.some(openerWindowTabId) && !isSameTab(openerWindowTabId)) {
                parentTabIds.push(openerWindowTabId);
            }
        }
        const lastFocusedWindowId = this.tabStalker.lastFocusedWindowId;
        if (maybe_1.some(lastFocusedWindowId) && isNewTab) {
            const popupWindowTabId = this.tabStalker.findPopupWindowTabId(lastFocusedWindowId);
            if (maybe_1.some(popupWindowTabId) && !isSameTab(popupWindowTabId)) {
                parentTabIds.push(popupWindowTabId);
            }
        }
        if (this.browser == browser_1.Browser.edge) {
            parentTabIds = parentTabIds.concat(this.tabStalker.findPopupWindowTabIds());
        }
        parentTabIds = filterUniqueTabIds(parentTabIds);
        parentTabIds = removeTabId(parentTabIds, tabId);
        log_1.log(`findParentTabIds: ${string_utils_1.toString({
            parentTabIds: parentTabIds,
            tabStalker: this.tabStalker
        })}`);
        return parentTabIds;
    }
    findSrcURL(tabId, initiator, initiatorIsSrc) {
        let srcURL = this.findTabURL(tabId);
        if (maybe_1.none(srcURL) && initiatorIsSrc && maybe_1.some(initiator)) {
            srcURL = url_utils_1.parseUrl(initiator);
        }
        return srcURL;
    }
    isBlockedPageURL(url) {
        return this.blockedPageController.isBlockedPageURL(url);
    }
    isBlockedFilePageURL(url) {
        return this.fileBlocker.isBlockedFilePageURL(url);
    }
    isExternalAppLinkURL(url) {
        return this.externalAppLinkController.isExternalAppLinkURL(url);
    }
    isNewTabPageUrl(url) {
        if (maybe_1.none(url)) {
            return false;
        }
        return this.placementManager.isNewTabPageUrl(url);
    }
    isPhishingSourceSite(url) {
        if (maybe_1.none(url)) {
            return false;
        }
        const isPhishingSourceSite = this.placementManager.isPhishingSourceSite(url);
        return boolean_utils_1.isTrue(isPhishingSourceSite);
    }
    isWebMailSite(url) {
        if (maybe_1.none(url)) {
            return false;
        }
        const isWebMailSite = this.placementManager.isWebMailSite(url);
        return boolean_utils_1.isTrue(isWebMailSite);
    }
    findGroups(url) {
        if (maybe_1.none(url)) {
            return [];
        }
        const groups = this.placementManager.findGroups(url);
        if (maybe_1.none(groups)) {
            return [];
        }
        return groups;
    }
    shouldBlockNavigation(isNewTab, isRedirect, httpMethod, srcURL, parentURL) {
        if (maybe_1.none(httpMethod)) {
            return false;
        }
        const url = isNewTab ? parentURL : srcURL;
        if (maybe_1.none(url)) {
            return false;
        }
        const tabType = isNewTab ? phishing_source_sites_1.TabType.newTab : phishing_source_sites_1.TabType.sameTab;
        const navType = isRedirect ? nav_sequence_parser_1.NavType.redirect : nav_sequence_parser_1.NavType.navigation;
        const shouldBlock = this.placementManager.shouldBlockNavigation(tabType, navType, httpMethod, url);
        return boolean_utils_1.isTrue(shouldBlock);
    }
    isAuthRequest(srcURL, destURL) {
        if (maybe_1.none(srcURL) || maybe_1.none(destURL)) {
            return false;
        }
        const siteRequiresAuth = this.placementManager.siteRequiresAuth(srcURL);
        const isAuthSite = this.placementManager.isAuthSite(destURL);
        const isAuthRequest = boolean_utils_1.isTrue(siteRequiresAuth) && boolean_utils_1.isTrue(isAuthSite);
        return isAuthRequest;
    }
    isTrustedURL(url) {
        const isTrusted = true;
        const isUntrusted = true;
        if (maybe_1.none(url)) {
            return [!isTrusted, !isUntrusted];
        }
        const isTrustedURL = this.placementManager.isTrustedUrl(url);
        if (maybe_1.none(isTrustedURL)) {
            return [!isTrusted, !isUntrusted];
        }
        return [isTrustedURL, !isTrustedURL];
    }
    isTrustedFileURL(fileURL) {
        const isFileURL = true;
        const isTrusted = true;
        const isUntrusted = true;
        if (maybe_1.none(fileURL) || !url_utils_1.isFileUrl(fileURL)) {
            return [!isFileURL, !isTrusted, !isUntrusted];
        }
        const isTrustedFileURL = this.placementManager.isTrustedFileUrl(fileURL);
        if (maybe_1.none(isTrustedFileURL)) {
            return [isFileURL, !isTrusted, !isUntrusted];
        }
        return [isFileURL, isTrustedFileURL, !isTrustedFileURL];
    }
    isSameOrigin(srcURL, destURL) {
        if (maybe_1.none(srcURL) || maybe_1.none(destURL)) {
            return false;
        }
        const srcOrigin = origin_1.parseOrigin(srcURL);
        const destOrigin = origin_1.parseOrigin(destURL);
        if (maybe_1.none(srcOrigin) || maybe_1.none(destOrigin)) {
            return false;
        }
        return origin_1.isSameOrigin(srcOrigin, destOrigin);
    }
    isRedirect(requestId) {
        return this.pendingRedirects.has(requestId);
    }
    clearPendingRedirect(requestId) {
        this.pendingRedirects.delete(requestId);
    }
    canLaunchBrowser(url) {
        return this.browserLauncher.canLaunchBrowser(url);
    }
    launchBrowser(url) {
        if (maybe_1.none(url)) {
            return;
        }
        this.browserLauncher.launchBrowser(url, () => { });
    }
    launchBrowserAndCloseTabOrNavigateTab(tabId, url, closeTab) {
        if (maybe_1.none(url)) {
            return;
        }
        this.browserLauncher.launchBrowserAndCloseTabOrNavigateTab(tabId, url, closeTab);
    }
    closeTab(tabId, onTabClosed = () => { }) {
        setTimeout(() => {
            chrome.tabs.remove(tabId, () => {
                log_1.log(`WebRequestListener.closeTab: tabId: ${tabId}`);
                onTabClosed(tabId);
            });
        }, 100);
    }
    closeTabAndLaunchBrowser(tabId, url) {
        this.closeTab(tabId, () => {
            this.launchBrowser(url);
        });
    }
    createTab(url, onTabCreated = () => { }) {
        chrome.tabs.create({ url: url }, (tab) => {
            log_1.log(`WebRequestListener.createTab: ${string_utils_1.toString({
                tabId: tab.id,
                url: url
            })}`);
            onTabCreated(tab);
        });
    }
    onTabClosed(tabId) {
        log_1.log(`WebRequestListener.onTabClosed: tabId: ${tabId}`);
        this.tabURLs.delete(tabId);
        this.tabs.delete(tabId);
        this.delayedTabs.delete(tabId);
    }
    detectedTab(tabId) {
        const isNewTab = !this.tabs.has(tabId);
        if (isNewTab) {
            this.tabs.add(tabId);
            this.phishingNavSequenceDetector.onTabDetected(tabId);
        }
        return isNewTab;
    }
    didUserCreateTab(tabId) {
        return this.tabStalker.didUserCreateTab(tabId);
    }
    onTabNavigated(tabId, url) {
        if (maybe_1.none(url)) {
            return;
        }
        this.tabURLs.set(tabId, url);
    }
    detectedExternalAppLink(tabId) {
        this.externalAppLinkController.onExternalAppLinkDetected(tabId);
    }
    detectedParentTab(tabId, url, urlCategory, groups) {
        if (maybe_1.none(url)) {
            return;
        }
        if (this.isBlockedPageURL(url)) {
            return;
        }
        if (!this.phishingNavSequenceDetector.onParentTabDetected(tabId, url, urlCategory, groups)) {
            log_1.logError(new Error(`WebRequestListener.detectedParentTab: ${string_utils_1.toString({
                tabId: tabId,
                url: url,
                urlCategory: nav_sequence_parser_1.urlCategoryToString(urlCategory),
                groups: groups
            })}`));
        }
    }
    detectPhishingNavSequence(url, doDetect) {
        if (maybe_1.none(url)) {
            return new nav_sequence_detector_1.EmptyNavSequenceDetections();
        }
        if (this.isBlockedPageURL(url) || this.isBlockedFilePageURL(url)) {
            return new nav_sequence_detector_1.EmptyNavSequenceDetections();
        }
        return doDetect(this.phishingNavSequenceDetector, url);
    }
    detectPhishingNavSequenceOnNavigate(tabId, url, urlCategory, groups, isNewTab, didUserCreateTab) {
        return this.detectPhishingNavSequence(url, (phishingNavSequenceDetector, url) => {
            return phishingNavSequenceDetector.onNavigate(tabId, url, urlCategory, groups, isNewTab, didUserCreateTab);
        });
    }
    detectPhishingNavSequenceOnRedirect(tabId, url, urlCategory, groups) {
        return this.detectPhishingNavSequence(url, (phishingNavSequenceDetector, url) => {
            return phishingNavSequenceDetector.onRedirect(tabId, url, urlCategory, groups);
        });
    }
    detectPhishingNavSequenceOnContentType(tabId, url, urlCategory, groups, contentType) {
        return this.detectPhishingNavSequence(url, (phishingNavSequenceDetector, url) => {
            return phishingNavSequenceDetector.onContentType(tabId, url, urlCategory, groups, contentType);
        });
    }
    hasHigherPrecedenceThanBuiltin(navSequenceDetections) {
        return this.phishingNavSequenceDetector.hasHigherPrecedenceThanBuiltin(navSequenceDetections);
    }
    categorizeURL(url) {
        const [isTrustedURL, isUntrustedURL] = this.isTrustedURL(url);
        const isPhishingSourceSite = this.isPhishingSourceSite(url);
        const isWebMailSite = this.isWebMailSite(url);
        const isExternalAppLinkURL = this.isExternalAppLinkURL(url);
        const urlCategory = nav_sequence_parser_1.categorizeUrl(isTrustedURL, isUntrustedURL, isPhishingSourceSite, isWebMailSite, isExternalAppLinkURL);
        log_1.log(`WebRequestListener.categorizeURL: ${string_utils_1.toString({
            url: url,
            isTrustedURL: isTrustedURL,
            isUntrustedURL: isUntrustedURL,
            isPhishingSourceSite: isPhishingSourceSite,
            isWebMailSite: isWebMailSite,
            isExternalAppLinkURL: isExternalAppLinkURL,
            urlCategory: nav_sequence_parser_1.urlCategoryToString(urlCategory)
        })}`);
        return urlCategory;
    }
    get shouldOpenPhishingLinksInSecureBrowser() {
        return this.placementManager.shouldOpenPhishingLinksInSecureBrowser;
    }
    isBlockedPageContinueNavigation(srcURL, destURL) {
        if (this.isBlockedPageURL(srcURL)) {
            const srcBlockedPageNavigateToURL = url_parse_utils_2.findURLDocumentQueryParam(srcURL, blocked_page_options_1.OptionNames.navigateToSpec);
            if (maybe_1.some(destURL) && maybe_1.some(srcBlockedPageNavigateToURL)) {
                return url_utils_1.isSameUrl(destURL, srcBlockedPageNavigateToURL);
            }
        }
        return false;
    }
    continueNavigation() {
        return {
            cancel: false
        };
    }
    blockNavigation() {
        return {
            cancel: true
        };
    }
    redirectNavigation(tabId, url) {
        if (maybe_1.none(url)) {
            log_1.logError(new Error("Invalid redirect URL. Letting navigation proceed"));
            return this.continueNavigation();
        }
        this.onTabNavigated(tabId, url);
        if (this.browser === browser_1.Browser.edge && url_utils_1.isExtensionUrl(url)) {
            this.createTab(url_utils_1.URLToString(url), () => {
                this.closeTab(tabId);
            });
            return this.blockNavigation();
        }
        return {
            redirectUrl: url_utils_1.URLToString(url)
        };
    }
    ;
    launchBrowserAndCloseTab(tabId, launchURL, redirectURL = undefined) {
        if (maybe_1.none(launchURL) || !this.canLaunchBrowser(launchURL)) {
            log_1.logError(new Error("Can't launch Secure Browser. Letting navigation proceed"));
            return this.continueNavigation();
        }
        const shouldRedirectAndKeepTab = maybe_1.some(redirectURL) && !url_utils_1.isSameUrl(launchURL, redirectURL);
        chrome.tabs.get(tabId, () => {
            const err = chrome.runtime.lastError;
            if (err) {
                log_1.log(`launchBrowser will not be called because an error ` +
                    `was encountered while checking if the tabId (${tabId}) was ` +
                    `valid in onBeforeRequest: blockUntrusted - "${err.message}"`);
                return;
            }
            this.launchBrowserAndCloseTabOrNavigateTab(tabId, launchURL, !shouldRedirectAndKeepTab);
        });
        if (shouldRedirectAndKeepTab) {
            log_1.log(`Instead of cancelling the navigation and closing the tab we are ` +
                `redirecting to ${redirectURL} and keeping the native tab (${tabId}) open`);
            return this.redirectNavigation(tabId, redirectURL);
        }
        else {
            return this.blockNavigation();
        }
    }
    detectNotChromeExternalAppLinkFileNavigation(tabId, srcURL, isNewTab, didUserCreateTab) {
        if (this.browser === browser_1.Browser.chrome || this.browser === browser_1.Browser.edgeChromium) {
            return;
        }
        const isSrcExternalAppLinkURL = this.isExternalAppLinkURL(srcURL);
        log_1.log(`detectNotChromeExternalAppLinkFileNavigation(${string_utils_1.toString({
            tabId: tabId,
            srcURL: srcURL,
            isSrcExternalAppLinkPageURL: isSrcExternalAppLinkURL,
        })})`);
        if (!isSrcExternalAppLinkURL) {
            return;
        }
        const srcGroups = this.findGroups(srcURL);
        this.detectPhishingNavSequenceOnNavigate(tabId, srcURL, nav_sequence_parser_1.UrlCategory.externalAppLink, srcGroups, isNewTab, didUserCreateTab);
        this.onTabNavigated(tabId, srcURL);
    }
    isEdgeExternalAppLinkNavigation(destURL) {
        if (this.browser !== browser_1.Browser.edge) {
            return false;
        }
        const edgeExternalAppLinkQueryValue = url_parse_utils_1.findDocumentQueryParam(destURL, host_constants_1.hostConstants.edgeExternalAppLinkQueryKey);
        const hasEdgeExternalAppLinkQueryParam = maybe_1.some(edgeExternalAppLinkQueryValue);
        log_1.log(`detectEdgeExternalAppLinkNavigation(${string_utils_1.toString({
            destURLSearchParams: destURL.search,
            hasEdgeExternalAppLinkQueryParam: hasEdgeExternalAppLinkQueryParam
        })})`);
        return hasEdgeExternalAppLinkQueryParam;
    }
    stripEdgeExternalAppLinkNavigationQueryParam(destURL) {
        const targetURL = destURL;
        try {
            const searchParams = new URLSearchParams(targetURL.search);
            searchParams.delete(host_constants_1.hostConstants.edgeExternalAppLinkQueryKey);
            targetURL.search = searchParams.toString();
        }
        catch (e) {
            const searchParams = targetURL.search;
            const re = new RegExp("[?&]" + host_constants_1.hostConstants.edgeExternalAppLinkQueryKey +
                "=" + host_constants_1.hostConstants.edgeExternalAppLinkQueryValue);
            targetURL.search = searchParams.replace(re, "");
        }
        return targetURL;
    }
    selectParentTab(parentTabIds, initiator, initiatorIsParent) {
        if (initiatorIsParent && maybe_1.some(initiator)) {
            const parentURL = url_utils_1.parseUrl(initiator);
            if (maybe_1.some(parentURL)) {
                return [undefined, parentURL, this.categorizeURL(parentURL)];
            }
        }
        const sortedParentTabs = parentTabIds.map((parentTabId) => {
            const parentURL = this.findTabURL(parentTabId);
            const parentURLCategory = this.categorizeURL(parentURL);
            return [parentTabId, parentURL, parentURLCategory];
        }).sort((a, b) => {
            const [, , urlCategoryA] = a;
            const [, , urlCategoryB] = b;
            const isWebMailSiteA = urlCategoryA === nav_sequence_parser_1.UrlCategory.webMailSiteUrl;
            const isWebMailSiteB = urlCategoryB === nav_sequence_parser_1.UrlCategory.webMailSiteUrl;
            const isPhishingSourceSiteA = urlCategoryA === nav_sequence_parser_1.UrlCategory.phishingSourceSiteUrl;
            const isPhishingSourceSiteB = urlCategoryB === nav_sequence_parser_1.UrlCategory.phishingSourceSiteUrl;
            if (isWebMailSiteA) {
                return Comparison.lessThan;
            }
            else if (isWebMailSiteB) {
                return Comparison.greaterThan;
            }
            else if (isPhishingSourceSiteA) {
                return Comparison.lessThan;
            }
            else if (isPhishingSourceSiteB) {
                return Comparison.greaterThan;
            }
            else {
                return Comparison.equal;
            }
        });
        log_1.log(`selectParentTab: sortedParentTabs: ${string_utils_1.toString(sortedParentTabs.map(([tabId, url, urlCategory]) => [
            tabId,
            url,
            nav_sequence_parser_1.urlCategoryToString(urlCategory)
        ]))}`);
        if (array_utils_2.isEmpty(sortedParentTabs)) {
            return [undefined, undefined, nav_sequence_parser_1.UrlCategory.uncategorizedUrl];
        }
        const selectedParentTab = array_utils_1.first(sortedParentTabs);
        return selectedParentTab;
    }
    get holdingPageURL() {
        if (this.browser === browser_1.Browser.edge) {
            if (maybe_1.none(this.edgeMajorVersion) || this.edgeMajorVersion < 18) {
                return "about:blank";
            }
        }
        return this.extensionHoldingPageURL;
    }
    getEdgeRedirectURL(redirectURL) {
        const newTabURL = this.newTabURLs.get(browser_1.Browser.edge);
        if (newTabURL && url_utils_1.isSameUrl(redirectURL, newTabURL, url_utils_1.UrlCompareOptions.IgnoreSearchParams)) {
            return this.aboutBlankURL;
        }
        return redirectURL;
    }
    getRedirectURL(requestId) {
        const info = this.redirectBackToSrcInfo.get(requestId);
        if (maybe_1.none(info)) {
            return undefined;
        }
        const { srcURL, isNewTab, didUserCreateTab } = info;
        if (isNewTab && !didUserCreateTab) {
            return undefined;
        }
        if (this.browser === browser_1.Browser.edge) {
            return this.getEdgeRedirectURL(srcURL);
        }
        return srcURL;
    }
    getInitiator(onBeforeRequestDetails) {
        switch (this.browser) {
            case browser_1.Browser.chrome:
                return onBeforeRequestDetails.initiator;
            case browser_1.Browser.edgeChromium:
                return onBeforeRequestDetails.initiator;
            case browser_1.Browser.firefox:
                return onBeforeRequestDetails.originUrl;
            default:
                return undefined;
        }
    }
    onBeforeRequest(details) {
        if (this.onConfigured.isConfigured || this.isDormant || this.delayedTabs.has(details.tabId)) {
            return this.onBeforeRequestImpl(details);
        }
        const tabId = details.tabId;
        this.delayedTabs.add(tabId);
        const proceedURL = details.url;
        const holdingURL = this.holdingPageURL;
        if (proceedURL === holdingURL) {
            log_1.log(`onBeforeRequest to [holdingURL] will proceed. Details: ${string_utils_1.toString(details)}`);
            this.onTabNavigated(tabId, url_utils_1.parseUrl(proceedURL));
            return this.continueNavigation();
        }
        let didTimeout = false;
        const timeout = host_constants_1.hostConstants.postponementTimeout;
        const id = this.idGenerator.generateId();
        log_1.log(`onBeforeRequest: SBX hasn't received all configuration so this onBeforeRequest event to ` +
            `${proceedURL} in tab ${tabId} has been postponed for up to ${timeout}ms and given id ${id}`);
        const proceed = () => {
            log_1.log(`onBeforeRequest: postponed id ${id}: proceed: ${string_utils_1.toString({
                tabId: tabId,
                proceedURL: proceedURL
            })}`);
            chrome.tabs.update(tabId, { url: proceedURL });
        };
        const redirect = (redirectURL) => {
            log_1.log(`onBeforeRequest: postponed id ${id}: redirect: ${string_utils_1.toString({
                tabId: tabId,
                redirectURL: redirectURL
            })}`);
            chrome.tabs.update(details.tabId, { url: redirectURL });
        };
        const onTimeout = () => {
            didTimeout = true;
            log_1.log(`onBeforeRequest: postponed id: ${id} onTimeout`);
            this.onTabNavigated(tabId, url_utils_1.parseUrl(proceedURL));
            proceed();
        };
        const timeoutId = setTimeout(onTimeout, timeout);
        this.onConfigured.registerListener(() => {
            clearTimeout(timeoutId);
            if (didTimeout) {
                return;
            }
            log_1.log(`onBeforeRequest: postponed id ${id}: onConfigured`);
            const onBeforeRequestAction = this.onBeforeRequestImpl(details);
            log_1.log(`onBeforeRequest: postponed id ${id}: onBeforeRequestAction: ${string_utils_1.toString(onBeforeRequestAction)}`);
            const cancel = onBeforeRequestAction.cancel;
            if (boolean_utils_1.isFalse(cancel)) {
                proceed();
            }
            const redirectURL = onBeforeRequestAction.redirectUrl;
            if (maybe_1.some(redirectURL)) {
                redirect(redirectURL);
            }
        });
        this.onTabNavigated(tabId, url_utils_1.parseUrl(holdingURL));
        return {
            redirectUrl: holdingURL
        };
    }
    onBeforeRequestImpl(details) {
        log_1.log(`onBeforeRequest(${string_utils_1.toString(details)})`);
        const requestId = details.requestId;
        const tabId = details.tabId;
        const frameId = details.frameId;
        const destURL = url_utils_1.parseUrl(details.url);
        const httpMethod = http_method_1.parseHttpMethod(details.method);
        const didUserCreateTab = this.didUserCreateTab(tabId);
        const isNewTab = this.detectedTab(tabId);
        const isRestoredSessionTab = this.isRestoredSessionTab(tabId);
        const considerParentTab = isNewTab && !didUserCreateTab;
        const initiator = this.getInitiator(details);
        const initiatorIsParent = considerParentTab;
        const initiatorIsSrc = !considerParentTab;
        const parentTabIds = this.findParentTabIds(tabId, isNewTab);
        const selectedParentTab = this.selectParentTab(parentTabIds, initiator, initiatorIsParent);
        const [parentTabId, parentURL, parentURLCategory] = selectedParentTab;
        const srcURL = this.findSrcURL(tabId, initiator, initiatorIsSrc);
        this.detectNotChromeExternalAppLinkFileNavigation(tabId, srcURL, isNewTab, didUserCreateTab);
        const isRedirect = this.isRedirect(requestId);
        if (isRedirect) {
            this.clearPendingRedirect(requestId);
        }
        if (maybe_1.some(srcURL) && !this.isExternalAppLinkURL(srcURL) && !isRedirect) {
            this.redirectBackToSrcInfo.set(requestId, { srcURL, isNewTab, didUserCreateTab });
        }
        else {
            this.redirectBackToSrcInfo.delete(requestId);
        }
        const proceed = () => {
            log_1.log(`onBeforeRequest: proceed(${string_utils_1.toString({
                destURL: destURL,
                tabId: tabId,
                isNewTab: isNewTab,
                isRedirect: isRedirect
            })})`);
            this.onTabNavigated(tabId, destURL);
            return this.continueNavigation();
        };
        const block = (url) => {
            log_1.log(`onBeforeRequest: block(${string_utils_1.toString({
                destURL: destURL,
                tabId: tabId,
                isNewTab: isNewTab,
                isRedirect: isRedirect,
                shouldOpenPhishingLinksInSecureBrowser: this.shouldOpenPhishingLinksInSecureBrowser
            })})`);
            if (!this.featureManager.isLinkProtectionEnabled) {
                log_1.log(`onBeforeRequest: block: link protection is not enabled`);
                return proceed();
            }
            if (this.shouldOpenPhishingLinksInSecureBrowser) {
                return this.launchBrowserAndCloseTab(tabId, url);
            }
            ifIncognitoTab(tabId, () => {
                this.closeTabAndLaunchBrowser(tabId, url);
            });
            this.phishingNavSequenceDetector.resetDetector(tabId);
            const blockedPageURL = this.blockedPageController.blockNavigation(url, tabId);
            return this.redirectNavigation(tabId, blockedPageURL);
        };
        const blockWithNavSequence = (url, blockedNavSequence) => {
            log_1.log(`onBeforeRequest: blockWithNavSequence(${string_utils_1.toString({
                destURL: destURL,
                tabId: tabId,
                isNewTab: isNewTab,
                isRedirect: isRedirect,
                shouldOpenPhishingLinksInSecureBrowser: this.shouldOpenPhishingLinksInSecureBrowser
            })})`);
            if (!this.featureManager.isLinkProtectionEnabled) {
                log_1.log(`onBeforeRequest: blockWithNavSequence: link protection is not enabled`);
                return proceed();
            }
            if (this.shouldOpenPhishingLinksInSecureBrowser) {
                return this.launchBrowserAndCloseTab(tabId, url);
            }
            ifIncognitoTab(tabId, () => {
                this.closeTabAndLaunchBrowser(tabId, url);
            });
            this.phishingNavSequenceDetector.resetDetector(tabId);
            const blockedPageURL = this.blockedPageController.blockNavigationWithNavSequence(url, blockedNavSequence, tabId);
            return this.redirectNavigation(tabId, blockedPageURL);
        };
        const blockUntrusted = (url) => {
            log_1.log(`onBeforeRequest: blockUntrusted(${string_utils_1.toString({
                destURL: destURL,
                tabId: tabId,
                isNewTab: isNewTab,
                isRedirect: isRedirect
            })})`);
            if (!this.featureManager.isLinkProtectionEnabled) {
                log_1.log(`onBeforeRequest: blockUntrusted: link protection is not enabled`);
                return proceed();
            }
            const redirectURL = this.getRedirectURL(requestId);
            return this.launchBrowserAndCloseTab(tabId, url, redirectURL);
        };
        const blockFile = (fileURL) => {
            log_1.log(`onBeforeRequest: blockFile(${string_utils_1.toString({
                destURL: destURL,
                tabId: tabId,
                isNewTab: isNewTab,
                isRedirect: isRedirect
            })})`);
            if (!this.featureManager.isFileURLProtectionEnabled) {
                log_1.log(`onBeforeRequest: blockFile: file URL protection is not enabled`);
                return proceed();
            }
            ifIncognitoTab(tabId, () => {
                this.closeTabAndLaunchBrowser(tabId, fileURL);
            });
            this.phishingNavSequenceDetector.resetDetector(tabId);
            const blockedFilePageURL = this.fileBlocker.blockFile(fileURL, tabId);
            return this.redirectNavigation(tabId, blockedFilePageURL);
        };
        const blockUntrustedFile = (fileURL) => {
            log_1.log(`onBeforeRequest: blockUntrustedFile(${string_utils_1.toString({
                destURL: destURL,
                tabId: tabId,
                isNewTab: isNewTab,
                isRedirect: isRedirect
            })})`);
            if (!this.featureManager.isFileURLProtectionEnabled) {
                log_1.log(`onBeforeRequest: blockUntrustedFile: file URL protection is not enabled`);
                return proceed();
            }
            return this.launchBrowserAndCloseTab(tabId, fileURL);
        };
        const sendToExternalAppLinkPage = (url) => {
            log_1.log(`onBeforeRequest: sendToExternalAppLinkPage(${string_utils_1.toString({
                URL: url,
                tabId: tabId,
                isNewTab: isNewTab,
                isRedirect: isRedirect
            })})`);
            this.phishingNavSequenceDetector.resetDetector(tabId);
            const externalAppLinkURL = url_utils_1.URLToString(this.externalAppLinkController.getExternalAppLinkURL())
                + "?linkSpec=" + encodeURIComponent(url.toString())
                + "&externalAppName=unknown";
            return this.redirectNavigation(tabId, url_utils_1.parseUrl(externalAppLinkURL));
        };
        const isAuthRequest = this.isAuthRequest(srcURL, destURL);
        const isParentPhishingSourceSite = this.isPhishingSourceSite(parentURL);
        const isSrcPhishingSourceSite = this.isPhishingSourceSite(srcURL);
        const isDestPhishingSourceSite = this.isPhishingSourceSite(destURL);
        const isParentWebMailSite = this.isWebMailSite(parentURL);
        const isSrcWebMailSite = this.isWebMailSite(srcURL);
        const isDestWebMailSite = this.isWebMailSite(destURL);
        const shouldBlockNavigation = this.shouldBlockNavigation(isNewTab, isRedirect, httpMethod, srcURL, parentURL);
        const [isParentTrustedURL] = this.isTrustedURL(parentURL);
        const [isDestTrustedURL, isDestUntrustedURL] = this.isTrustedURL(destURL);
        const isDestUncategorizedURL = (maybe_1.some(destURL) && !isDestTrustedURL && !isDestUntrustedURL);
        const [isDestFileURL, isDestTrustedFileURL, isDestUntrustedFileURL] = this.isTrustedFileURL(destURL);
        const isDestBlockedPageURL = this.isBlockedPageURL(destURL);
        const isDestBlockedFilePageURL = this.isBlockedFilePageURL(destURL);
        const isDestExternalAppLinkURL = this.isExternalAppLinkURL(destURL);
        const isParentExternalAppLinkURL = this.isExternalAppLinkURL(parentURL);
        const isDestNewTabPageUrl = this.isNewTabPageUrl(destURL);
        const parentGroups = this.findGroups(parentURL);
        const destGroups = this.findGroups(destURL);
        const isSrcSameOrigin = this.isSameOrigin(srcURL, destURL);
        const isParentSameOrigin = this.isSameOrigin(parentURL, destURL);
        const isBlockedPageContinue = this.isBlockedPageContinueNavigation(srcURL, destURL);
        if (isDestExternalAppLinkURL) {
            this.detectedExternalAppLink(tabId);
        }
        const destURLCategory = nav_sequence_parser_1.categorizeUrl(isDestTrustedURL, isDestUntrustedURL, isDestPhishingSourceSite, isDestWebMailSite, isDestExternalAppLinkURL);
        if (isDestBlockedPageURL ||
            isDestBlockedFilePageURL) {
            this.phishingNavSequenceDetector.resetDetector(tabId);
        }
        if (considerParentTab) {
            this.detectedParentTab(tabId, parentURL, parentURLCategory, parentGroups);
        }
        const navSequenceDetections = (isRedirect ?
            this.detectPhishingNavSequenceOnRedirect(tabId, destURL, destURLCategory, destGroups) :
            this.detectPhishingNavSequenceOnNavigate(tabId, destURL, destURLCategory, destGroups, isNewTab, didUserCreateTab));
        const hasHigherPrecedenceThanBuiltin = this.hasHigherPrecedenceThanBuiltin(navSequenceDetections);
        const shouldAllowNavigation = (navSequenceDetections.shouldAllow ||
            navSequenceDetections.shouldPossiblyAllow ||
            navSequenceDetections.shouldPossiblyBlock) &&
            hasHigherPrecedenceThanBuiltin;
        log_1.log(`onBeforeRequest(${string_utils_1.toString({
            requestId: requestId,
            frameId: frameId,
            tabId: tabId,
            parentTabId: parentTabId,
            isNewTab: isNewTab,
            didUserCreateTab: didUserCreateTab,
            considerParentTab: considerParentTab,
            isRestoredSessionTab: isRestoredSessionTab,
            initiator: initiator,
            srcURL: srcURL,
            destURL: destURL,
            parentURL: parentURL,
            isRedirect: isRedirect,
            isAuthRequest: isAuthRequest,
            httpMethod: maybe_1.some(httpMethod) ? http_method_1.httpMethodTypeToString(httpMethod) : details.method,
            isSrcPhishingSourceSite: isSrcPhishingSourceSite,
            isDestPhishingSourceSite: isDestPhishingSourceSite,
            isParentPhishingSourceSite: isParentPhishingSourceSite,
            isSrcWebMailSite: isSrcWebMailSite,
            isDestWebMailSite: isDestWebMailSite,
            isParentWebMailSite: isParentWebMailSite,
            isDestTrustedURL: isDestTrustedURL,
            isDestUntrustedURL: isDestUntrustedURL,
            isDestUncategorizedURL: isDestUncategorizedURL,
            isParentTrustedURL: isParentTrustedURL,
            isDestBlockedPageURL: isDestBlockedPageURL,
            isDestBlockedFilePageURL: isDestBlockedFilePageURL,
            isDestExternalAppLinkPageURL: isDestExternalAppLinkURL,
            isParentExternalAppLinkPageURL: isParentExternalAppLinkURL,
            isDestNewTabPageUrl: isDestNewTabPageUrl,
            parentGroups: parentGroups,
            destGroups: destGroups,
            shouldBlockNavigation: shouldBlockNavigation,
            shouldAllowNavigation: shouldAllowNavigation,
            destURLCategory: nav_sequence_parser_1.urlCategoryToString(destURLCategory),
            parentURLCategory: nav_sequence_parser_1.urlCategoryToString(parentURLCategory),
            isSrcSameOrigin: isSrcSameOrigin,
            isParentSameOrigin: isParentSameOrigin,
            isBlockedPageContinue: isBlockedPageContinue,
            isBlockedNavSequence: navSequenceDetections.shouldBlock,
            isPossibleBlockedNavSequence: navSequenceDetections.shouldPossiblyBlock,
            isAllowedNavSequence: navSequenceDetections.shouldAllow,
            isPossibleAllowedNavSequence: navSequenceDetections.shouldPossiblyAllow,
            navSequenceDetectionsPrecedence: navSequenceDetections.precedence,
            hasHigherPrecedenceThanBuiltin: hasHigherPrecedenceThanBuiltin,
        })})`);
        if (maybe_1.some(destURL) && this.isEdgeExternalAppLinkNavigation(destURL)) {
            const targetURL = this.stripEdgeExternalAppLinkNavigationQueryParam(destURL);
            return sendToExternalAppLinkPage(targetURL);
        }
        if (this.isDormant) {
            log_1.log("Extension is in a dormant state so onBeforeRequest will return proceed()");
            return proceed();
        }
        if (isDestBlockedPageURL ||
            isDestBlockedFilePageURL ||
            isDestExternalAppLinkURL ||
            isDestNewTabPageUrl ||
            isBlockedPageContinue) {
            return proceed();
        }
        else if (isDestUntrustedURL) {
            return blockUntrusted(destURL);
        }
        else if (isDestFileURL) {
            if (isDestTrustedFileURL) {
                return proceed();
            }
            else if (isDestUntrustedFileURL) {
                return blockUntrustedFile(destURL);
            }
            else {
                return blockFile(destURL);
            }
        }
        else if (navSequenceDetections.shouldBlock &&
            hasHigherPrecedenceThanBuiltin) {
            return blockWithNavSequence(destURL, navSequenceDetections.blocked);
        }
        else if (navSequenceDetections.shouldAllow &&
            hasHigherPrecedenceThanBuiltin) {
            return proceed();
        }
        else if (this.promptForUncategorized &&
            isDestUncategorizedURL &&
            !isBlockedPageContinue) {
            return block(destURL);
        }
        else if (isNewTab && isRedirect) {
            log_1.logError(new Error(`onBeforeRequest: unexpected: ${string_utils_1.toString({
                destURL: destURL,
                tabId: tabId,
                isNewTab: isNewTab,
                isRedirect: isRedirect
            })}`));
            return proceed();
        }
        else if (isNewTab) {
            if (isRestoredSessionTab) {
                return proceed();
            }
            else if (shouldBlockNavigation &&
                !shouldAllowNavigation &&
                !isDestTrustedURL &&
                !isParentSameOrigin &&
                !didUserCreateTab) {
                return block(destURL);
            }
        }
        else if (isRedirect) {
            if (shouldBlockNavigation &&
                !shouldAllowNavigation &&
                !isAuthRequest &&
                !isDestTrustedURL &&
                !isSrcSameOrigin) {
                return block(destURL);
            }
        }
        else if (shouldBlockNavigation &&
            !navSequenceDetections.shouldAllow &&
            !navSequenceDetections.shouldPossiblyBlock &&
            !navSequenceDetections.shouldPossiblyAllow &&
            !isAuthRequest &&
            !isDestTrustedURL &&
            !isSrcSameOrigin) {
            return block(destURL);
        }
        if (navSequenceDetections.shouldBlock &&
            !hasHigherPrecedenceThanBuiltin) {
            return blockWithNavSequence(destURL, navSequenceDetections.blocked);
        }
        else if (navSequenceDetections.shouldAllow &&
            !hasHigherPrecedenceThanBuiltin) {
            return proceed();
        }
        return proceed();
    }
    onBeforeRedirect(details) {
        log_1.log(`onBeforeRedirect(${string_utils_1.toString(details)})`);
        this.pendingRedirects.add(details.requestId);
    }
    readContentTypeHeader(headers) {
        if (maybe_1.none(headers)) {
            return undefined;
        }
        const filteredHeaders = headers.filter((header) => {
            const headerType = nav_sequence_parser_1.parseHeaderType(header.name);
            return headerType === nav_sequence_parser_1.HttpHeaderType.contentType;
        });
        if (filteredHeaders.length !== 1) {
            return undefined;
        }
        const contentTypeHeader = array_utils_1.first(filteredHeaders);
        return contentTypeHeader.value;
    }
    readContentType(contentTypeHeader) {
        if (maybe_1.none(contentTypeHeader)) {
            return undefined;
        }
        return content_type_1.parseContentType(contentTypeHeader);
    }
    isPDFContentType(contentType) {
        if (maybe_1.none(contentType)) {
            return false;
        }
        return contentType === content_type_1.ContentType.pdf;
    }
    onHeadersReceived(details) {
        const requestId = details.requestId;
        const tabId = details.tabId;
        const url = url_utils_1.parseUrl(details.url);
        const headers = details.responseHeaders;
        const contentTypeHeader = this.readContentTypeHeader(headers);
        const contentType = this.readContentType(contentTypeHeader);
        const isPDFContentType = this.isPDFContentType(contentType);
        const urlCategory = this.categorizeURL(url);
        const groups = this.findGroups(url);
        const navSequenceDetections = this.detectPhishingNavSequenceOnContentType(tabId, url, urlCategory, groups, contentType);
        log_1.log(`onHeadersReceived: ${string_utils_1.toString({
            requestId: requestId,
            tabId: tabId,
            url: url,
            contentTypeHeader: contentTypeHeader,
            contentType: maybe_1.some(contentType) ? content_type_1.contentTypeToString(contentType) : contentTypeHeader,
            isPDFContentType: isPDFContentType,
            urlCategory: nav_sequence_parser_1.urlCategoryToString(urlCategory),
            groups: groups,
            shouldBlock: navSequenceDetections.shouldBlock,
            shouldAllow: navSequenceDetections.shouldAllow,
            shouldPossiblyBlock: navSequenceDetections.shouldPossiblyBlock,
            shouldPossiblyAllow: navSequenceDetections.shouldPossiblyAllow,
        })}`);
        const proceed = () => {
            log_1.log(`onHeadersReceived: proceed: ${string_utils_1.toString({
                tabId: tabId,
                url: url,
                isPDFContentType: isPDFContentType
            })}`);
            return this.continueNavigation();
        };
        const block = (phishingNavSequence) => {
            log_1.log(`onHeadersReceived: block: ${string_utils_1.toString({
                tabId: tabId,
                url: url,
                isPDFContentType: isPDFContentType
            })}`);
            if (!this.featureManager.isPDFProtectionEnabled) {
                log_1.log(`onHeadersReceived: block: PDF protection is not enabled`);
                return proceed();
            }
            if (this.shouldOpenPhishingLinksInSecureBrowser) {
                if (isPDFContentType) {
                    const redirectURL = this.getRedirectURL(requestId);
                    return this.launchBrowserAndCloseTab(tabId, url, redirectURL);
                }
                else {
                    return this.launchBrowserAndCloseTab(tabId, url);
                }
            }
            this.phishingNavSequenceDetector.resetDetector(tabId);
            const blockedPageURL = this.blockedPageController.blockContentType(url, contentTypeHeader, phishingNavSequence, tabId);
            return this.redirectNavigation(tabId, blockedPageURL);
        };
        if (this.isDormant) {
            log_1.log("Extension is in a dormant state so onHeadersReceived will return proceed()");
            return proceed();
        }
        if (navSequenceDetections.shouldBlock) {
            return block(navSequenceDetections.blocked);
        }
        else {
            return proceed();
        }
    }
    onCompleted(details) {
        this.redirectBackToSrcInfo.delete(details.requestId);
    }
    onErrorOccurred(details) {
        this.redirectBackToSrcInfo.delete(details.requestId);
    }
    registerListeners() {
        const mainFrameFilter = 'main_frame';
        const filter = {
            urls: web_request_listener_filter_1.getWebRequestListenerUrlFilter(this.browser),
            types: [mainFrameFilter]
        };
        log_1.log(`WebRequestListener.registerListeners: ${string_utils_1.toString({
            browser: browser_1.browserToString(this.browser),
            filter
        })}`);
        if (!chrome.webRequest.onBeforeRequest.hasListener(this.onBeforeRequestCB)) {
            chrome.webRequest.onBeforeRequest.addListener(this.onBeforeRequestCB, filter, ['blocking', 'requestBody']);
        }
        if (!chrome.webRequest.onBeforeRedirect.hasListener(this.onBeforeRedirectCB)) {
            chrome.webRequest.onBeforeRedirect.addListener(this.onBeforeRedirectCB, filter);
        }
        if (!chrome.webRequest.onHeadersReceived.hasListener(this.onHeadersReceivedCB)) {
            chrome.webRequest.onHeadersReceived.addListener(this.onHeadersReceivedCB, filter, ['blocking', 'responseHeaders']);
        }
        if (!chrome.webRequest.onCompleted.hasListener(this.onCompletedCB)) {
            chrome.webRequest.onCompleted.addListener(this.onCompletedCB, filter);
        }
        if (!chrome.webRequest.onErrorOccurred.hasListener(this.onErrorOccurredCB)) {
            chrome.webRequest.onErrorOccurred.addListener(this.onErrorOccurredCB, filter);
        }
        chrome.webRequest.handlerBehaviorChanged();
    }
    removeListeners() {
        chrome.webRequest.onBeforeRequest.removeListener(this.onBeforeRequestCB);
        chrome.webRequest.onBeforeRedirect.removeListener(this.onBeforeRedirectCB);
        chrome.webRequest.onHeadersReceived.removeListener(this.onHeadersReceivedCB);
        chrome.webRequest.onCompleted.removeListener(this.onCompletedCB);
        chrome.webRequest.onErrorOccurred.removeListener(this.onErrorOccurredCB);
        chrome.webRequest.handlerBehaviorChanged();
    }
}
exports.WebRequestListener = WebRequestListener;


/***/ }),
/* 92 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
function isTrue(value) {
    return value === true;
}
exports.isTrue = isTrue;
function isFalse(value) {
    return value === false;
}
exports.isFalse = isFalse;


/***/ }),
/* 93 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
function unused(arg) {
}
exports.unused = unused;


/***/ }),
/* 94 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.builtinRules = {
    "version": 1,
    "builtinRulesPrecedence": 10,
    "seqs": [
        {
            "seq": [
                ["parentTab", "$gmail"],
                ["navigateTo", "https://accounts.google.com"]
            ],
            "metadata": {
                "precedence": 11,
                "allow": true,
                "block": false,
                "navigateTo": 3
            }
        },
        {
            "seq": [
                ["parentTab", "$gmail"],
                ["navigateTo", "https://hangouts.google.com"]
            ],
            "metadata": {
                "precedence": 12,
                "allow": true,
                "block": false,
                "navigateTo": 3
            }
        },
        {
            "seq": [
                ["parentTab", "$gmail"],
                ["navigateTo", "https://www.google.com"],
                ["navOrRedirectTo", "<uncategorizedUrl>"]
            ],
            "metadata": {
                "precedence": 13,
                "allow": false,
                "block": true,
                "navigateTo": 3
            }
        },
        {
            "seq": [
                ["navigateTo", "<externalAppLink>"],
                ["navigateTo", "<webMailSiteUrl>"]
            ],
            "metadata": {
                "precedence": 14,
                "allow": true,
                "block": false,
                "navigateTo": 2
            }
        },
        {
            "seq": [
                ["parentTab", "<webMailSiteUrl>"],
                ["navigateTo", "<uncategorizedUrl>"]
            ],
            "metadata": {
                "precedence": 9,
                "allow": false,
                "block": true,
                "navigateTo": 4
            }
        },
        {
            "seq": [
                ["parentTab", "<webMailSiteUrl>"],
                ["navigateTo", "<trustedUrl>"],
                ["repeat", "redirectTo", "not", "<untrustedUrl>"],
                ["redirectTo", "<uncategorizedUrl>"]
            ],
            "metadata": {
                "precedence": 8,
                "allow": false,
                "block": true,
                "navigateTo": 4
            }
        },
        {
            "seq": [
                ["navigateTo", "<externalAppLink>"],
                ["navigateTo", "<trustedUrl>"],
                ["repeat", "redirectTo", "not", "<untrustedUrl>"],
                ["redirectTo", "<uncategorizedUrl>"]
            ],
            "metadata": {
                "precedence": 5,
                "allow": false,
                "block": true,
                "navigateTo": 4
            }
        },
        {
            "seq": [
                ["navigateTo", "<externalAppLink>"],
                ["navigateTo", "$navigatingEmailRewriter"],
                ["navigateTo", "<uncategorizedUrl>"]
            ],
            "metadata": {
                "precedence": 6,
                "allow": false,
                "block": true,
                "navigateTo": 3
            }
        },
        {
            "seq": [
                ["navigateTo", "<externalAppLink>"],
                ["navigateTo", "not", "<trustedUrl>"]
            ],
            "metadata": {
                "precedence": 7,
                "allow": false,
                "block": true,
                "navigateTo": 2
            }
        },
        {
            "seq": [
                ["navOrRedirectTo", "not", "<trustedUrl>"],
                ["navigateTo", "not", "<trustedUrl>"],
                ["Content-Type", "application/pdf"]
            ],
            "metadata": {
                "precedence": 2,
                "allow": false,
                "block": true,
                "navigateTo": 2
            }
        },
        {
            "seq": [
                ["navOrRedirectTo", "not", "<trustedUrl>"],
                ["repeat", "redirectTo", "not", "<untrustedUrl>"],
                ["redirectTo", "not", "<trustedUrl>"],
                ["Content-Type", "application/pdf"]
            ],
            "metadata": {
                "precedence": 1,
                "allow": false,
                "block": true,
                "navigateTo": 3,
                "requiresUserClick": 2
            }
        },
        {
            "seq": [
                ["parentTab", "not", "<trustedUrl>"],
                ["navigateTo", "not", "<trustedUrl>"],
                ["Content-Type", "application/pdf"]
            ],
            "metadata": {
                "precedence": 4,
                "allow": false,
                "block": true,
                "navigateTo": 2
            }
        },
        {
            "seq": [
                ["parentTab", "not", "<trustedUrl>"],
                ["navigateTo", "not", "<trustedUrl>"],
                ["repeat", "redirectTo", "not", "<untrustedUrl>"],
                ["redirectTo", "not", "<trustedUrl>"],
                ["Content-Type", "application/pdf"]
            ],
            "metadata": {
                "precedence": 3,
                "allow": false,
                "block": true,
                "navigateTo": 4,
                "requiresUserClick": 2
            }
        }
    ]
};


/***/ }),
/* 95 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
const maybe_1 = __webpack_require__(0);
const browser_1 = __webpack_require__(6);
const origin_1 = __webpack_require__(9);
const log_1 = __webpack_require__(1);
const string_utils_1 = __webpack_require__(3);
function getWebRequestListenerUrlFilter(browser) {
    const getDefaultUrlFilter = () => {
        return ["<all_urls>"];
    };
    const getEdgeUrlFilter = () => {
        const edgeMajorVersion = browser_1.findEdgeMajorVersion();
        log_1.log(`getEdgeUrlFilter: ${string_utils_1.toString({
            edgeMajorVersion
        })}`);
        if (maybe_1.none(edgeMajorVersion)) {
            return getDefaultUrlFilter();
        }
        if (edgeMajorVersion === 15) {
            const makeUrlSchemeFilter = (...schemes) => {
                return schemes.map(scheme => `${scheme}//*/*`);
            };
            return makeUrlSchemeFilter(origin_1.Scheme.WILDCARD_SOME);
        }
        return getDefaultUrlFilter();
    };
    if (maybe_1.none(browser)) {
        return getDefaultUrlFilter();
    }
    const browserUrlFilters = new Map([
        [browser_1.Browser.chrome, getDefaultUrlFilter],
        [browser_1.Browser.firefox, getDefaultUrlFilter],
        [browser_1.Browser.edge, getEdgeUrlFilter],
        [browser_1.Browser.edgeChromium, getDefaultUrlFilter]
    ]);
    const getUrlFilter = browserUrlFilters.get(browser);
    if (maybe_1.none(getUrlFilter)) {
        return getDefaultUrlFilter();
    }
    return getUrlFilter();
}
exports.getWebRequestListenerUrlFilter = getWebRequestListenerUrlFilter;


/***/ }),
/* 96 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
const origin_1 = __webpack_require__(9);
const url_utils_1 = __webpack_require__(4);
const config_keys_1 = __webpack_require__(7);
const maybe_1 = __webpack_require__(0);
const message_types_1 = __webpack_require__(2);
const messages_1 = __webpack_require__(5);
const log_1 = __webpack_require__(1);
const popup_page_controller_1 = __webpack_require__(56);
const originMatcherOptions = new origin_1.OriginParseOptions({ allowWildcards: true, allowMissingWildcardScheme: true });
const originHashOptions = new origin_1.OriginHashOptions({ ignoreHttpHttpsDifference: true, ignorePort: true });
class TrustedUrlTracker {
    constructor(configNotifier, messageSender) {
        this.messageSender = messageSender;
        this.trustedOrigins = new origin_1.OriginMatcher();
        this.untrustedOrigins = new origin_1.OriginMatcher();
        this.pendingReputableSites = [];
        this.reputableOrigins = new origin_1.OriginExpiryMatcher();
        this.userTrustedOrigins = origin_1.makeOriginSet(originHashOptions);
        this.userUntrustedOrigins = origin_1.makeOriginSet(originHashOptions);
        this.prioritiseTrustedSites = false;
        configNotifier.addConfigListenerForKeys((key, config) => this.onConfigChanged(key, config), [
            config_keys_1.ConfigKey.trustedUrls,
            config_keys_1.ConfigKey.untrustedUrls,
            config_keys_1.ConfigKey.userTrustedOrigins,
            config_keys_1.ConfigKey.userUntrustedOrigins,
            config_keys_1.ConfigKey.prioritiseTrustedSites,
            config_keys_1.ConfigKey.reputableUrls
        ]);
        this.sbxTrustedOrigins = origin_1.parseOriginMatcher([
            popup_page_controller_1.sureClickAdvancedHelpHostname,
            popup_page_controller_1.sureClickHelpHostname,
            popup_page_controller_1.bromiumHelpHostname,
        ]);
    }
    onConfigChanged(key, config) {
        switch (key) {
            case config_keys_1.ConfigKey.trustedUrls:
                this.trustedOrigins = origin_1.parseOriginMatcher(config.trustedUrls, originMatcherOptions);
                break;
            case config_keys_1.ConfigKey.untrustedUrls:
                this.untrustedOrigins = origin_1.parseOriginMatcher(config.untrustedUrls, originMatcherOptions);
                break;
            case config_keys_1.ConfigKey.userTrustedOrigins:
                this.userTrustedOrigins = origin_1.parseOriginSet(config.userTrustedOrigins, originHashOptions);
                break;
            case config_keys_1.ConfigKey.userUntrustedOrigins:
                this.userUntrustedOrigins = origin_1.parseOriginSet(config.userUntrustedOrigins, originHashOptions);
                break;
            case config_keys_1.ConfigKey.prioritiseTrustedSites:
                this.prioritiseTrustedSites = config.prioritiseTrustedSites;
                break;
            case config_keys_1.ConfigKey.reputableUrls:
                this.updateReputation(config);
                break;
        }
    }
    updateReputation(config) {
        const index = config.reputableSites.index;
        if (index === 0) {
            this.pendingReputableSites = [];
        }
        let length = this.pendingReputableSites.length;
        if (length !== index) {
            log_1.logError(new Error(`Reputable site index mismatch: index=${index} length=${length}`));
            return;
        }
        this.pendingReputableSites = this.pendingReputableSites.concat(config.reputableSites.reputableSites);
        length = this.pendingReputableSites.length;
        const total = config.reputableSites.total;
        if (length > total) {
            log_1.logError(new Error(`Reputable site length mismatch: total=${total} length=${length}`));
            return;
        }
        if (length === total) {
            this.reputableOrigins = origin_1.parseOriginExpiryMatcher(this.pendingReputableSites, originMatcherOptions);
        }
    }
    trustUrl(url, trust) {
        const origin = origin_1.parseOrigin(url);
        if (maybe_1.none(origin)) {
            return;
        }
        this.trustOrigin(origin, trust);
    }
    trustOrigin(origin, trust) {
        if (trust) {
            if (!this.userTrustedOrigins.add(origin)) {
                return;
            }
            const request = new messages_1.AddUserTrustedOriginV1(origin.toString());
            this.messageSender.sendMessage(message_types_1.MessageType.addUserTrustedOriginV1, request);
        }
        else {
            if (!this.userUntrustedOrigins.add(origin)) {
                return;
            }
            const request = new messages_1.AddUserUntrustedOriginV1(origin.toString());
            this.messageSender.sendMessage(message_types_1.MessageType.addUserUntrustedOriginV1, request);
        }
    }
    isTrustedUrl(url) {
        if (url_utils_1.isExtensionUrl(url)) {
            return true;
        }
        if (url_utils_1.isBrowserUrl(url)) {
            return true;
        }
        const origin = origin_1.parseOrigin(url);
        if (maybe_1.none(origin)) {
            return undefined;
        }
        if (this.sbxTrustedOrigins.has(origin)) {
            return true;
        }
        const handleUntrustedOrigin = () => {
            if (this.untrustedOrigins.has(origin)) {
                return false;
            }
            return undefined;
        };
        const handleTrustedOrigin = () => {
            if (this.trustedOrigins.has(origin)) {
                return true;
            }
            return undefined;
        };
        const handleUserUntrustedOrigin = () => {
            if (this.userUntrustedOrigins.has(origin)) {
                return false;
            }
            return undefined;
        };
        const handleUserTrustedOrigin = () => {
            if (this.userTrustedOrigins.has(origin)) {
                return true;
            }
            return undefined;
        };
        const handleReputableOrigin = () => {
            if (this.reputableOrigins.has(origin)) {
                return true;
            }
            return undefined;
        };
        const originHandlers = this.prioritiseTrustedSites ? [
            handleTrustedOrigin,
            handleUntrustedOrigin,
            handleUserTrustedOrigin,
            handleUserUntrustedOrigin,
            handleReputableOrigin
        ] : [
            handleUntrustedOrigin,
            handleTrustedOrigin,
            handleUserUntrustedOrigin,
            handleUserTrustedOrigin,
            handleReputableOrigin
        ];
        for (const originHandler of originHandlers) {
            const result = originHandler();
            if (maybe_1.some(result)) {
                return result;
            }
        }
        return undefined;
    }
}
exports.TrustedUrlTracker = TrustedUrlTracker;


/***/ }),
/* 97 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
class HandshakenEvent {
    constructor(negotiatedVersion) {
        this.negotiatedVersion = negotiatedVersion;
    }
}
exports.HandshakenEvent = HandshakenEvent;


/***/ }),
/* 98 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
const number_utils_1 = __webpack_require__(10);
class Range {
    constructor(min, max) {
        this.min = min;
        this.max = max;
    }
    contains(value) {
        return number_utils_1.isInRange(value, this.min, this.max);
    }
}
exports.Range = Range;


/***/ }),
/* 99 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
const i18n_1 = __webpack_require__(31);
function isSureClick() {
    const name = i18n_1.getI18n(i18n_1.I18nMessages.name);
    return name.startsWith("HP");
}
exports.isSureClick = isSureClick;


/***/ }),
/* 100 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
const maybe_1 = __webpack_require__(0);
const url_utils_1 = __webpack_require__(4);
const origin_1 = __webpack_require__(9);
const config_keys_1 = __webpack_require__(7);
const phishing_source_sites_1 = __webpack_require__(50);
const config_1 = __webpack_require__(25);
function maybeIsSameUrl(a, b) {
    if (b === undefined) {
        return false;
    }
    return url_utils_1.isSameUrl(a, b, url_utils_1.UrlCompareOptions.IgnoreSearchParams);
}
class PlacementManager {
    constructor(trustedUrlTracker, fileUrlTracker, newTabPageUrlTracker, configNotifier) {
        this.trustedUrlTracker = trustedUrlTracker;
        this.fileUrlTracker = fileUrlTracker;
        this.newTabPageUrlTracker = newTabPageUrlTracker;
        this.shouldOpenPhishingLinksInSecureBrowser = false;
        this.phishingSourceSites = new phishing_source_sites_1.EmptyPhishingSourceSites();
        configNotifier.addConfigListenerForKeys((key, config) => this.onConfigChanged(key, config), [
            config_keys_1.ConfigKey.phishingSourceSites,
            config_keys_1.ConfigKey.openPhishingLinksInSecureBrowser
        ]);
    }
    onConfigChanged(key, config) {
        switch (key) {
            case config_keys_1.ConfigKey.phishingSourceSites: {
                if (maybe_1.some(config.phishingSourceSites)) {
                    if (config.phishingSourceSites.version === config_1.Config.phishingSourceSitesVersion()) {
                        this.phishingSourceSites = new phishing_source_sites_1.PhishingSourceSites(config.phishingSourceSites);
                    }
                }
                break;
            }
            case config_keys_1.ConfigKey.openPhishingLinksInSecureBrowser: {
                this.shouldOpenPhishingLinksInSecureBrowser = config.openPhishingLinksInSecureBrowser;
                break;
            }
            default:
                break;
        }
    }
    isNewTabPageUrl(url) {
        return this.newTabPageUrlTracker.isNewTabPageUrl(url);
    }
    isTrustedUrl(url) {
        return this.trustedUrlTracker.isTrustedUrl(url);
    }
    isTrustedFileUrl(fileUrl) {
        return this.fileUrlTracker.isFileUrlTrusted(fileUrl);
    }
    isPhishingSourceSite(url) {
        const origin = origin_1.parseOrigin(url);
        if (maybe_1.none(origin)) {
            return undefined;
        }
        return this.phishingSourceSites.isPhishingSourceSite(origin);
    }
    isWebMailSite(url) {
        const origin = origin_1.parseOrigin(url);
        if (maybe_1.none(origin)) {
            return undefined;
        }
        return this.phishingSourceSites.isWebMailSite(origin);
    }
    siteRequiresAuth(url) {
        const origin = origin_1.parseOrigin(url);
        if (maybe_1.none(origin)) {
            return undefined;
        }
        return this.phishingSourceSites.siteRequiresAuth(origin);
    }
    isAuthSite(url) {
        const origin = origin_1.parseOrigin(url);
        if (maybe_1.none(origin)) {
            return undefined;
        }
        return this.phishingSourceSites.isAuthSite(origin);
    }
    findGroups(url) {
        const origin = origin_1.parseOrigin(url);
        if (maybe_1.none(origin)) {
            return undefined;
        }
        return this.phishingSourceSites.findGroups(origin);
    }
    shouldBlockNavigation(tabType, navType, methodType, url) {
        const origin = origin_1.parseOrigin(url);
        if (maybe_1.none(origin)) {
            return undefined;
        }
        return this.phishingSourceSites.shouldBlockNavigation(tabType, navType, methodType, origin);
    }
}
exports.PlacementManager = PlacementManager;


/***/ }),
/* 101 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
const url_utils_1 = __webpack_require__(4);
const maybe_1 = __webpack_require__(0);
const id_generator_1 = __webpack_require__(19);
const message_types_1 = __webpack_require__(2);
const messages_1 = __webpack_require__(5);
const promise_utils_1 = __webpack_require__(13);
const log_1 = __webpack_require__(1);
const string_utils_1 = __webpack_require__(3);
const blocked_page_options_1 = __webpack_require__(53);
const host_constants_1 = __webpack_require__(12);
const page_port_resolver_1 = __webpack_require__(39);
const page_port_controller_1 = __webpack_require__(24);
const url_encoder_1 = __webpack_require__(62);
const config_keys_1 = __webpack_require__(7);
const event_dispatcher_1 = __webpack_require__(20);
const history_1 = __webpack_require__(28);
const content_type_1 = __webpack_require__(37);
const protocol_versions_1 = __webpack_require__(14);
class BlockedPagePageController {
    constructor(tabId, port, onConfigured, onTrustUrl, onDisconnect, messageSender, configNotifier, handshaker) {
        this.tabId = tabId;
        this.port = port;
        this.onTrustUrl = onTrustUrl;
        this.onDisconnect = onDisconnect;
        this.messageSender = messageSender;
        this.handshaker = handshaker;
        this.isConsumerProduct = false;
        configNotifier.addConfigListenerForKeys((key, config) => this.onConfigChanged(key, config), [config_keys_1.ConfigKey.isConsumerProduct]);
        this.pagePortController = new page_port_controller_1.PagePortController(tabId, port, (port) => this.onPageConnected(port), (port) => this.onPageDisconnnected(port), onConfigured);
        this.pagePortController.registerMessageHandler(message_types_1.MessageType.trustUrlV8, (message) => this.handleTrustUrl(message));
        this.pagePortController.connect();
    }
    onPageConnected(port) { }
    onPageDisconnnected(port) {
        this.onDisconnect(port);
    }
    onConfigChanged(key, config) {
        switch (key) {
            case config_keys_1.ConfigKey.isConsumerProduct:
                this.isConsumerProduct = config.isConsumerProduct;
                break;
        }
    }
    sendDontAskAgain(protocolVersion) {
        if (protocol_versions_1.isMessageTypeSupported(message_types_1.MessageType.dontAskAgainV9, protocolVersion)) {
            this.messageSender.sendMessage(message_types_1.MessageType.dontAskAgainV9, new messages_1.DontAskAgainV9(true));
        }
        else if (protocol_versions_1.isMessageTypeSupported(message_types_1.MessageType.dontAskAgainV8, protocolVersion)) {
            this.messageSender.sendMessage(message_types_1.MessageType.dontAskAgainV8, new messages_1.DontAskAgainV8());
        }
        else {
            log_1.logError(new Error(`User has chosen "Don't ask me agagin" but the protocol version doesn't ` +
                `support the DontAskAgain messages: "${protocolVersion}"`));
        }
    }
    handleTrustUrl(message) {
        const trustUrlMessage = message.payload;
        const contentType = content_type_1.parseRawContentType(trustUrlMessage.contentType);
        const navigateToURL = url_utils_1.parseUrl(trustUrlMessage.navigateToUrlSpec);
        const blockedURL = url_utils_1.parseUrl(trustUrlMessage.blockedUrlSpec);
        if (maybe_1.some(navigateToURL) && maybe_1.some(blockedURL)) {
            this.onTrustUrl(trustUrlMessage.trustUrl, trustUrlMessage.rememberDecision, navigateToURL, blockedURL, this.tabId, contentType);
        }
        if (trustUrlMessage.dontAskAgain && this.isConsumerProduct) {
            if (this.handshaker.isHandshaken && maybe_1.some(this.handshaker.negotiatedVersion)) {
                this.sendDontAskAgain(this.handshaker.negotiatedVersion);
            }
            else {
                this.handshaker.onHandshaken.registerEventHandler(event => this.sendDontAskAgain(event.negotiatedVersion));
            }
        }
    }
}
class BrowserLaunchEvent {
    constructor(urlSpec, id, didLaunch) {
        this.urlSpec = urlSpec;
        this.id = id;
        this.didLaunch = didLaunch;
    }
}
exports.BrowserLaunchEvent = BrowserLaunchEvent;
class BrowserLauncher {
    constructor(messageRouter, messageSender, handshaker) {
        this.messageSender = messageSender;
        this.handshaker = handshaker;
        this.pendingRequests = new Map();
        this.eventDispatcher = new event_dispatcher_1.EventDispatcher();
        this.idGenerator = new id_generator_1.IdGenerator();
        const blockedPageSpec = chrome.runtime.getURL(host_constants_1.hostConstants.blockedPage);
        const blockedPageURL = url_utils_1.parseUrl(blockedPageSpec);
        if (maybe_1.none(blockedPageURL)) {
            throw new Error(`Failed to parse blockedPageURL ${blockedPageSpec}`);
        }
        this.blockedPageURL = blockedPageURL;
        messageRouter.registerMessageHandler(message_types_1.MessageType.launchBrowserResponseV1, (message) => this.onLaunchBrowserResponse(message));
    }
    registerEventHandler(eventHandler) {
        this.eventDispatcher.registerEventHandler(eventHandler);
    }
    onLaunchBrowserResponse(message) {
        const response = message.payload;
        const id = response.id;
        const onBrowserLaunchResponse = this.pendingRequests.get(id);
        if (maybe_1.none(onBrowserLaunchResponse)) {
            log_1.logError(new Error(`Unexpected launch browser response: ${string_utils_1.toString(response)}`));
            return;
        }
        log_1.log(`BrowserLauncher.onLaunchBrowserResponse: ${string_utils_1.toString(response)}`);
        onBrowserLaunchResponse(response.urlSpec, response.didLaunch);
        this.pendingRequests.delete(id);
        this.eventDispatcher.dispatchEvent(new BrowserLaunchEvent(response.urlSpec, response.id, response.didLaunch));
    }
    canLaunchBrowser(url) {
        if (this.handshaker.isHandshaken) {
            return true;
        }
        else {
            return false;
        }
    }
    launchBrowser(url, onBrowserLaunchResponse) {
        if (this.handshaker.isHandshaken) {
            const id = this.idGenerator.generateId();
            const message = new messages_1.LaunchBrowserRequestV1(url_utils_1.URLToString(url), id);
            this.messageSender.sendMessage(message_types_1.MessageType.launchBrowserRequestV1, message);
            this.pendingRequests.set(id, onBrowserLaunchResponse);
            return true;
        }
        else {
            log_1.logError(new Error(`Not handshaken so not sending launch browser message for url=<${url}>`));
            return false;
        }
    }
    launchBrowserAndCloseTabOrNavigateTab(tabId, url, closeTab = true) {
        const failOpen = () => {
            chrome.tabs.update(tabId, { url: url_utils_1.URLToString(url) });
        };
        const displayLaunchedPage = () => {
            log_1.log(`BrowserLauncher.launchBrowserAndCloseTabOrNavigateTab: Displaying launched page for tab ${tabId} ` +
                `rather than closing because it is the only tab.`);
            const urlEncoder = new url_encoder_1.UrlEncoder(this.blockedPageURL);
            urlEncoder.addUrlQueryParam(blocked_page_options_1.OptionNames.launchedSpec, url);
            const blockedPageURL = urlEncoder.encodeUrl();
            if (maybe_1.some(blockedPageURL)) {
                chrome.tabs.update(tabId, { url: url_utils_1.URLToString(blockedPageURL) });
            }
            else {
                failOpen();
            }
        };
        const onBrowserLaunchResponse = (urlSpec, didLaunch) => {
            if (didLaunch) {
                if (closeTab) {
                    chrome.tabs.query({}, (tabs) => {
                        if (tabs.length > 1) {
                            this.closeTab(tabId);
                        }
                        else {
                            displayLaunchedPage();
                        }
                    });
                }
                return;
            }
            failOpen();
        };
        if (!this.launchBrowser(url, onBrowserLaunchResponse)) {
            failOpen();
        }
    }
    onTabClosed(tabId) {
        log_1.log(`BrowserLauncher.onTabClosed: tabId: ${tabId}`);
    }
    closeTab(tabId) {
        chrome.tabs.remove(tabId, () => this.onTabClosed(tabId));
    }
}
exports.BrowserLauncher = BrowserLauncher;
class BlockedPageController {
    constructor(browser, trustedURLTracker, browserLauncher, configNotifier, handshaker, onConfigured, messageSender) {
        this.browser = browser;
        this.trustedURLTracker = trustedURLTracker;
        this.browserLauncher = browserLauncher;
        this.configNotifier = configNotifier;
        this.handshaker = handshaker;
        this.onConfigured = onConfigured;
        this.messageSender = messageSender;
        this.blockedPageControllers = new Map();
        this.rememberDecisionsDefault = false;
        this.isConsumerProduct = false;
        this.idGenerator = new id_generator_1.IdGenerator();
        configNotifier.addConfigListenerForKeys((key, config) => this.onConfigChanged(key, config), [
            config_keys_1.ConfigKey.promptForUncategorized,
            config_keys_1.ConfigKey.isConsumerProduct,
            config_keys_1.ConfigKey.blockedPageLearnMoreURL
        ]);
        const blockedPageSpec = chrome.runtime.getURL(host_constants_1.hostConstants.blockedPage);
        const blockedPageURL = url_utils_1.parseUrl(blockedPageSpec);
        if (maybe_1.none(blockedPageURL)) {
            throw new Error(`Failed to parse blockedPageURL ${blockedPageSpec}`);
        }
        this.blockedPageURL = blockedPageURL;
        this.portResolver = page_port_resolver_1.getBrowserSpecificExtensionPagePortResolver(this.browser, host_constants_1.hostConstants.blockedPagePortName, (tabId, port) => this.onUnresolvedPortConnected(tabId, port), (url) => this.isBlockedPageURL(url));
    }
    onConfigChanged(key, config) {
        switch (key) {
            case config_keys_1.ConfigKey.promptForUncategorized:
                this.rememberDecisionsDefault = config.promptForUncategorized;
                break;
            case config_keys_1.ConfigKey.isConsumerProduct:
                this.isConsumerProduct = config.isConsumerProduct;
                break;
            case config_keys_1.ConfigKey.blockedPageLearnMoreURL:
                this.learnMoreURL = config.blockedPageLearnMoreURL;
                break;
        }
    }
    onUnresolvedPortConnected(tabId, port) {
        this.addBlockedPageController(tabId, promise_utils_1.makePromise(() => port));
    }
    isBlockedPageURL(url) {
        if (url === undefined) {
            return false;
        }
        return url_utils_1.isSameUrl(url, this.blockedPageURL, url_utils_1.UrlCompareOptions.IgnoreSearchParams);
    }
    makeBlockedPageURL(navigateToURL, blockedURL, contentType) {
        const urlEncoder = new url_encoder_1.UrlEncoder(this.blockedPageURL);
        urlEncoder.addUrlQueryParam(blocked_page_options_1.OptionNames.navigateToSpec, navigateToURL);
        urlEncoder.addUrlQueryParam(blocked_page_options_1.OptionNames.blockedSpec, blockedURL);
        if (maybe_1.some(contentType)) {
            urlEncoder.addQueryParam(blocked_page_options_1.OptionNames.contentType, contentType);
        }
        if (this.rememberDecisionsDefault) {
            urlEncoder.addQueryParam(blocked_page_options_1.OptionNames.rememberDecisionsDefault, "true");
        }
        if (this.isConsumerProduct) {
            urlEncoder.addQueryParam(blocked_page_options_1.OptionNames.isConsumerProduct, "true");
        }
        if (maybe_1.some(this.learnMoreURL)) {
            urlEncoder.addQueryParam(blocked_page_options_1.OptionNames.learnMoreURL, this.learnMoreURL);
        }
        const blockedPageURL = urlEncoder.encodeUrl();
        if (maybe_1.none(blockedPageURL)) {
            return this.blockedPageURL;
        }
        return blockedPageURL;
    }
    addBlockedPageController(tabId, port) {
        const id = this.idGenerator.generateId();
        const controller = new BlockedPagePageController(tabId, port, this.onConfigured, (trustURL, rememberDecision, navigateToURL, blockedURL, tabId, contentType) => this.trustURL(trustURL, rememberDecision, navigateToURL, blockedURL, tabId, contentType, id), port => this.onPageDisconnected(port, id), this.messageSender, this.configNotifier, this.handshaker);
        this.blockedPageControllers.set(id, controller);
    }
    onPageDisconnected(port, id) {
        this.blockedPageControllers.delete(id);
        history_1.removeExtensionPageFromHistoryAfterClosing(this.browser, port);
    }
    trustURL(trustURL, rememberDecision, navigateToURL, blockedURL, tabId, contentType, id) {
        const controller = this.blockedPageControllers.get(id);
        if (maybe_1.none(controller) ||
            maybe_1.none(navigateToURL) || !url_utils_1.isURL(navigateToURL) ||
            maybe_1.none(blockedURL) || !url_utils_1.isURL(blockedURL)) {
            log_1.logError(new Error(`NavigationBlocker.trustURL: invalid parameters: ${string_utils_1.toString({
                trustURL: trustURL,
                trustURLPermanently: rememberDecision,
                navigateToURL: navigateToURL,
                blockedURL: blockedURL,
                tabId: tabId,
            })}`));
            return;
        }
        if (rememberDecision) {
            this.trustedURLTracker.trustUrl(blockedURL, trustURL);
        }
        if (!trustURL) {
            const shouldCloseTab = contentType !== content_type_1.ContentType.pdf;
            this.browserLauncher.launchBrowserAndCloseTabOrNavigateTab(tabId, navigateToURL, shouldCloseTab);
        }
    }
    findNavigateToURL(url, phishingNavSequence) {
        if (maybe_1.none(url)) {
            return undefined;
        }
        if (maybe_1.none(phishingNavSequence)) {
            return url;
        }
        const navigateToURL = phishingNavSequence.navigateToURL;
        if (maybe_1.none(navigateToURL)) {
            return url;
        }
        return navigateToURL;
    }
    blockURL(blockedURL, navigateToURL, tabId, contentType = undefined) {
        const port = this.portResolver.resolvePort(tabId);
        this.addBlockedPageController(tabId, port);
        const blockedPageUrl = this.makeBlockedPageURL(navigateToURL, blockedURL, contentType);
        return blockedPageUrl;
    }
    blockNavigation(blockedURL, tabId) {
        return this.blockURL(blockedURL, blockedURL, tabId);
    }
    blockNavigationWithNavSequence(blockedURL, phishingNavSequence, tabId) {
        const navigateToURL = this.findNavigateToURL(blockedURL, phishingNavSequence);
        return this.blockURL(blockedURL, navigateToURL, tabId);
    }
    blockLink(linkURL, tabId) {
        const blockedURL = linkURL;
        const navigateToURL = linkURL;
        return this.blockURL(blockedURL, navigateToURL, tabId);
    }
    blockContentType(blockedURL, contentType, phishingNavSequence, tabId) {
        const navigateToURL = this.findNavigateToURL(blockedURL, phishingNavSequence);
        return this.blockURL(blockedURL, navigateToURL, tabId, contentType);
    }
}
exports.BlockedPageController = BlockedPageController;


/***/ }),
/* 102 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
const message_types_1 = __webpack_require__(2);
const messages_1 = __webpack_require__(5);
const log_1 = __webpack_require__(1);
const maybe_1 = __webpack_require__(0);
const browser_1 = __webpack_require__(6);
class DownloadTracker {
    constructor(browser, messageSender, handshaker, featureManager, errorHandler) {
        this.messageSender = messageSender;
        this.handshaker = handshaker;
        this.featureManager = featureManager;
        this.onChangedCB = this.onChanged.bind(this);
        this.isDormant = false;
        if (maybe_1.some(browser) && browser !== browser_1.Browser.edge) {
            this.isDownloadsApiSupported = true;
        }
        else {
            this.isDownloadsApiSupported = false;
        }
        errorHandler.onDormantStateChanged.registerEventHandler(this.onDormantStateChanged.bind(this));
    }
    onDormantStateChanged(dormantState) {
        this.isDormant = dormantState;
    }
    onChanged(downloadDelta) {
        if (downloadDelta.state &&
            (downloadDelta.state.current === 'complete')) {
            chrome.downloads.search({ id: downloadDelta.id }, this.foundDownloads.bind(this));
        }
    }
    foundDownloads(downloadItems) {
        if (downloadItems.length === 0) {
            return;
        }
        const downloadItem = downloadItems[0];
        log_1.log(`Download completed url=<${downloadItem.url}> filename=<${downloadItem.filename}>`);
        if (this.isDormant) {
            log_1.log("Extension is in a dormant state so foundDownloads will not send downloadComplete message");
            return;
        }
        if (!this.featureManager.isDownloadProtectionEnabled) {
            log_1.log("DownloadTracker: foundDownloads: download protection is not enabled");
            return;
        }
        if (this.handshaker.isHandshaken) {
            const message = new messages_1.DownloadCompleteV1(downloadItem.url, downloadItem.filename);
            this.messageSender.sendMessage(message_types_1.MessageType.downloadCompleteV1, message);
        }
        else {
            log_1.logError(new Error(`Not handshaken so not sending download complete message for url=<${downloadItem.url}> filename=<${downloadItem.filename}>`));
        }
    }
    registerListeners() {
        if (this.isDownloadsApiSupported) {
            if (!chrome.downloads.onChanged.hasListener(this.onChangedCB)) {
                chrome.downloads.onChanged.addListener(this.onChangedCB);
            }
        }
    }
    removeListeners() {
        if (this.isDownloadsApiSupported) {
            chrome.downloads.onChanged.removeListener(this.onChangedCB);
        }
    }
}
exports.DownloadTracker = DownloadTracker;


/***/ }),
/* 103 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
const maybe_1 = __webpack_require__(0);
class ConfigNotifier {
    constructor(config) {
        this.config = config;
        this.keyListeners = new Map();
    }
    addConfigListenerForKey(listener, key) {
        const listenersForKey = this.keyListeners.get(key);
        if (maybe_1.some(listenersForKey)) {
            listenersForKey.push(listener);
        }
        else {
            this.keyListeners.set(key, [listener]);
        }
        listener(key, this.config);
    }
    addConfigListenerForKeys(listener, keys) {
        for (const key of keys) {
            this.addConfigListenerForKey(listener, key);
        }
    }
    onConfigChanged(key) {
        const listenersForKey = this.keyListeners.get(key);
        if (maybe_1.some(listenersForKey)) {
            for (const listener of listenersForKey) {
                listener(key, this.config);
            }
        }
    }
}
exports.ConfigNotifier = ConfigNotifier;


/***/ }),
/* 104 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
const message_types_1 = __webpack_require__(2);
const messages_1 = __webpack_require__(5);
const config_1 = __webpack_require__(25);
const config_keys_1 = __webpack_require__(7);
const serialized_phishing_source_sites_1 = __webpack_require__(105);
const browser_1 = __webpack_require__(6);
const string_utils_1 = __webpack_require__(3);
class ConfigUpdaterV1 {
    constructor(config) {
        this.config = config;
    }
    updateConfig(configChanged) {
        const isEnabled = configChanged.isEnabled;
        const phishingSourceSites = configChanged.phishingSourceSites;
        const phishingNavigationSequences = configChanged.phishingNavigationSequences;
        const trustedSites = configChanged.trustedSites;
        const untrustedSites = configChanged.untrustedSites;
        const userTrustedOrigins = configChanged.userTrustedOrigins;
        const userUntrustedOrigins = configChanged.userUntrustedOrigins;
        const openPhishingLinksInSecureBrowser = configChanged.openPhishingLinksInSecureBrowser;
        if (messages_1.isSerializedIsEnabledDataV12(isEnabled)) {
            this.config.isEnabled = isEnabled;
        }
        else if (messages_1.isSerializedIsEnabledDataV1(isEnabled)) {
            this.config.isEnabled = Object.assign({}, isEnabled, { edgeChromium: false });
        }
        else {
            this.config.isEnabled = {
                chrome: false,
                firefox: false,
                edge: false,
                edgeChromium: false
            };
        }
        if (serialized_phishing_source_sites_1.isValidSerializedPhishingSourceSites(phishingSourceSites) &&
            (phishingSourceSites.version === config_1.Config.phishingSourceSitesVersion())) {
            this.config.phishingSourceSites = phishingSourceSites;
        }
        else {
            this.config.phishingSourceSites = undefined;
        }
        if (messages_1.isSerializedPhishingNavSeqData(phishingNavigationSequences)) {
            this.config.phishingNavigationSequences = phishingNavigationSequences;
        }
        else {
            this.config.phishingNavigationSequences = undefined;
        }
        this.config.trustedUrls = trustedSites;
        this.config.untrustedUrls = untrustedSites;
        this.config.userTrustedOrigins = userTrustedOrigins;
        this.config.userUntrustedOrigins = userUntrustedOrigins;
        this.config.openPhishingLinksInSecureBrowser = openPhishingLinksInSecureBrowser;
    }
}
class ConfigUpdaterV3 extends ConfigUpdaterV1 {
    updateConfig(configChanged) {
        super.updateConfig(configChanged);
        const prioritiseTrustedSites = configChanged.prioritiseTrustedSites;
        this.config.prioritiseTrustedSites = prioritiseTrustedSites;
    }
}
class ConfigUpdaterV4 extends ConfigUpdaterV3 {
    updateConfig(configChanged) {
        super.updateConfig(configChanged);
        const promptForUncategorized = configChanged.promptForUncategorized;
        this.config.promptForUncategorized = promptForUncategorized;
    }
}
class ConfigUpdaterV5 extends ConfigUpdaterV4 {
    updateConfig(configChanged) {
        super.updateConfig(configChanged);
        const isEnterpriseProduct = configChanged.isEnterpriseProduct;
        this.config.isEnterpriseProduct = isEnterpriseProduct;
    }
}
class ConfigUpdaterV7 extends ConfigUpdaterV5 {
    updateConfig(configChanged) {
        super.updateConfig(configChanged);
        const newTabPageUrls = configChanged.newTabPageUrls;
        if (messages_1.isSerializedNewTabPageUrlsV12(newTabPageUrls)) {
            this.config.newTabPageUrls = newTabPageUrls;
        }
        else if (messages_1.isSerializedNewTabPageUrlsV7(newTabPageUrls)) {
            this.config.newTabPageUrls = Object.assign({}, newTabPageUrls, { edgeChromium: [] });
        }
    }
}
class ConfigUpdaterV8 extends ConfigUpdaterV7 {
    updateConfig(configChanged) {
        super.updateConfig(configChanged);
        const isConsumerProduct = configChanged.isConsumerProduct;
        const blockedPageLearnMoreURL = configChanged.blockedPageLearnMoreURL;
        this.config.isConsumerProduct = isConsumerProduct;
        if (!string_utils_1.isEmptyString(blockedPageLearnMoreURL)) {
            this.config.blockedPageLearnMoreURL = blockedPageLearnMoreURL;
        }
    }
}
class ConfigUpdaterV9 extends ConfigUpdaterV8 {
    updateConfig(configChanged) {
        super.updateConfig(configChanged);
        const dontAskAgain = configChanged.dontAskAgain;
        this.config.dontAskAgain = dontAskAgain;
    }
}
class ConfigUpdaterV11 extends ConfigUpdaterV9 {
    updateConfig(configChanged) {
        super.updateConfig(configChanged);
        const secureBrowserRedirectTrustedSites = configChanged.secureBrowserRedirectTrustedSites;
        const productStatus = configChanged.productStatus;
        this.config.secureBrowserRedirectTrustedSites = secureBrowserRedirectTrustedSites;
        this.config.productStatus = productStatus;
    }
}
class ConfigUpdaterV12 extends ConfigUpdaterV11 {
    updateConfig(configChanged) {
        super.updateConfig(configChanged);
    }
}
class ConfigNotifierV1 {
    constructor(configNotifier) {
        this.configNotifier = configNotifier;
    }
    notify() {
        this.configNotifier.onConfigChanged(config_keys_1.ConfigKey.isEnabled);
        this.configNotifier.onConfigChanged(config_keys_1.ConfigKey.phishingSourceSites);
        this.configNotifier.onConfigChanged(config_keys_1.ConfigKey.phishingNavigationSequences);
        this.configNotifier.onConfigChanged(config_keys_1.ConfigKey.trustedUrls);
        this.configNotifier.onConfigChanged(config_keys_1.ConfigKey.untrustedUrls);
        this.configNotifier.onConfigChanged(config_keys_1.ConfigKey.userTrustedOrigins);
        this.configNotifier.onConfigChanged(config_keys_1.ConfigKey.userUntrustedOrigins);
        this.configNotifier.onConfigChanged(config_keys_1.ConfigKey.openPhishingLinksInSecureBrowser);
    }
}
class ConfigNotifierV3 extends ConfigNotifierV1 {
    notify() {
        super.notify();
        this.configNotifier.onConfigChanged(config_keys_1.ConfigKey.prioritiseTrustedSites);
    }
}
class ConfigNotifierV4 extends ConfigNotifierV3 {
    notify() {
        super.notify();
        this.configNotifier.onConfigChanged(config_keys_1.ConfigKey.promptForUncategorized);
    }
}
class ConfigNotifierV5 extends ConfigNotifierV4 {
    notify() {
        super.notify();
        this.configNotifier.onConfigChanged(config_keys_1.ConfigKey.isEnterpriseProduct);
    }
}
class ConfigNotifierV7 extends ConfigNotifierV5 {
    notify() {
        super.notify();
        this.configNotifier.onConfigChanged(config_keys_1.ConfigKey.newTabPageUrls);
    }
}
class ConfigNotifierV8 extends ConfigNotifierV7 {
    notify() {
        super.notify();
        this.configNotifier.onConfigChanged(config_keys_1.ConfigKey.isConsumerProduct);
        this.configNotifier.onConfigChanged(config_keys_1.ConfigKey.blockedPageLearnMoreURL);
    }
}
class ConfigNotifierV9 extends ConfigNotifierV8 {
    notify() {
        super.notify();
        this.configNotifier.onConfigChanged(config_keys_1.ConfigKey.dontAskAgain);
    }
}
class ConfigNotifierV11 extends ConfigNotifierV9 {
    notify() {
        super.notify();
        this.configNotifier.onConfigChanged(config_keys_1.ConfigKey.secureBrowserRedirectTrustedSites);
        this.configNotifier.onConfigChanged(config_keys_1.ConfigKey.productStatus);
    }
}
class ConfigNotifierV12 extends ConfigNotifierV11 {
    notify() {
        super.notify();
    }
}
class ConfigUpdater {
    constructor(config, configNotifier, messageSender, messageRouter, handshaker, onConfiguredRaiser) {
        this.config = config;
        this.configNotifier = configNotifier;
        this.messageSender = messageSender;
        this.onConfiguredRaiser = onConfiguredRaiser;
        messageRouter.registerMessageHandler(message_types_1.MessageType.configChangedV1, (message) => {
            this.onConfigUpdatedV1(message);
        });
        messageRouter.registerMessageHandler(message_types_1.MessageType.configChangedV3, (message) => {
            this.onConfigUpdatedV3(message);
        });
        messageRouter.registerMessageHandler(message_types_1.MessageType.configChangedV4, (message) => {
            this.onConfigUpdatedV4(message);
        });
        messageRouter.registerMessageHandler(message_types_1.MessageType.configChangedV5, (message) => {
            this.onConfigUpdatedV5(message);
        });
        messageRouter.registerMessageHandler(message_types_1.MessageType.configChangedV7, (message) => {
            this.onConfigUpdatedV7(message);
        });
        messageRouter.registerMessageHandler(message_types_1.MessageType.configChangedV8, (message) => {
            this.onConfigUpdatedV8(message);
        });
        messageRouter.registerMessageHandler(message_types_1.MessageType.configChangedV9, (message) => {
            this.onConfigUpdatedV9(message);
        });
        messageRouter.registerMessageHandler(message_types_1.MessageType.configChangedV11, (message) => {
            this.onConfigUpdatedV11(message);
        });
        messageRouter.registerMessageHandler(message_types_1.MessageType.configChangedV12, (message) => {
            this.onConfigUpdatedV12(message);
        });
        messageRouter.registerMessageHandler(message_types_1.MessageType.reputationChangedV3, message => {
            this.onReputationUpdatedV3(message);
        });
        handshaker.onHandshaken.registerEventHandler((_) => {
            this.requestConfigUpdate();
        });
    }
    requestConfigUpdate() {
        const request = new messages_1.ConfigRequestV1(config_1.Config.phishingSourceSitesVersion(), config_1.Config.phishingNavigationSequencesVersion(), browser_1.getCurrentBrowserInfo());
        this.messageSender.sendMessage(message_types_1.MessageType.configRequestV1, request);
    }
    onConfigUpdated(message, updater, notifier) {
        const configChanged = message.payload;
        updater.updateConfig(configChanged);
        notifier.notify();
    }
    onConfigUpdatedV1(message) {
        this.onConfigUpdated(message, new ConfigUpdaterV1(this.config), new ConfigNotifierV1(this.configNotifier));
        this.onConfiguredRaiser.onConfigured();
    }
    onConfigUpdatedV3(message) {
        this.onConfigUpdated(message, new ConfigUpdaterV3(this.config), new ConfigNotifierV3(this.configNotifier));
    }
    onConfigUpdatedV4(message) {
        this.onConfigUpdated(message, new ConfigUpdaterV4(this.config), new ConfigNotifierV4(this.configNotifier));
    }
    onConfigUpdatedV5(message) {
        this.onConfigUpdated(message, new ConfigUpdaterV5(this.config), new ConfigNotifierV5(this.configNotifier));
    }
    onConfigUpdatedV7(message) {
        this.onConfigUpdated(message, new ConfigUpdaterV7(this.config), new ConfigNotifierV7(this.configNotifier));
    }
    onConfigUpdatedV8(message) {
        this.onConfigUpdated(message, new ConfigUpdaterV8(this.config), new ConfigNotifierV8(this.configNotifier));
    }
    onConfigUpdatedV9(message) {
        this.onConfigUpdated(message, new ConfigUpdaterV9(this.config), new ConfigNotifierV9(this.configNotifier));
    }
    onConfigUpdatedV11(message) {
        this.onConfigUpdated(message, new ConfigUpdaterV11(this.config), new ConfigNotifierV11(this.configNotifier));
    }
    onConfigUpdatedV12(message) {
        this.onConfigUpdated(message, new ConfigUpdaterV12(this.config), new ConfigNotifierV12(this.configNotifier));
    }
    onReputationUpdatedV3(message) {
        const reputationChanged = message.payload;
        this.config.reputableSites = reputationChanged;
        this.configNotifier.onConfigChanged(config_keys_1.ConfigKey.reputableUrls);
    }
}
exports.ConfigUpdater = ConfigUpdater;


/***/ }),
/* 105 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
const maybe_1 = __webpack_require__(0);
function isValidSerializedPhishingSourceSites(value) {
    const isValidMethodData = (value) => {
        return maybe_1.some(value.get) &&
            maybe_1.some(value.post);
    };
    const isValidNavData = (value) => {
        return maybe_1.some(value.navigate) &&
            maybe_1.some(value.redirect) &&
            isValidMethodData(value.navigate) &&
            isValidMethodData(value.redirect);
    };
    const isValidHeuristics = (value) => {
        return maybe_1.some(value.pageInputEvents) &&
            maybe_1.some(value.navigationRequestType);
    };
    return value instanceof Object &&
        maybe_1.some(value.version) &&
        maybe_1.some(value.phishingSourceSites) &&
        maybe_1.some(value.webMail) &&
        maybe_1.some(value.advanced) &&
        maybe_1.some(value.advanced.requireAuth) &&
        maybe_1.some(value.advanced.auth) &&
        maybe_1.some(value.advanced.heuristics) &&
        maybe_1.some(value.advanced.newTab) &&
        maybe_1.some(value.advanced.sameTab) &&
        isValidHeuristics(value.advanced.heuristics) &&
        isValidNavData(value.advanced.newTab) &&
        isValidNavData(value.advanced.sameTab);
}
exports.isValidSerializedPhishingSourceSites = isValidSerializedPhishingSourceSites;


/***/ }),
/* 106 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
const maybe_1 = __webpack_require__(0);
const log_1 = __webpack_require__(1);
const browser_1 = __webpack_require__(6);
function setNormalBadge() {
    chrome.browserAction.setBadgeText({ text: "" });
}
exports.setNormalBadge = setNormalBadge;
function setErrorBadge() {
    chrome.browserAction.setBadgeBackgroundColor({ color: [255, 0, 0, 255] });
    chrome.browserAction.setBadgeText({ text: "!" });
}
exports.setErrorBadge = setErrorBadge;
const normalIcon = {
    path: {
        16: "icons/icon16.png",
        32: "icons/icon32.png",
        64: "icons/icon64.png"
    }
};
const normalEdgeIcon = { path: "icons/icon64.png" };
const errorIcon = {
    path: {
        16: "icons/greyscale_icon16.png",
        32: "icons/greyscale_icon32.png",
        64: "icons/greyscale_icon64.png"
    }
};
const errorEdgeIcon = { path: "icons/greyscale_icon64.png" };
var IconType;
(function (IconType) {
    IconType[IconType["normal"] = 0] = "normal";
    IconType[IconType["error"] = 1] = "error";
})(IconType = exports.IconType || (exports.IconType = {}));
class IconUpdater {
    constructor(browser, currentIconType) {
        this.browser = browser;
        this.currentIconType = currentIconType;
        this.getNormalIcon = () => {
            if (maybe_1.some(this.browser) && this.browser !== browser_1.Browser.edge) {
                return normalIcon;
            }
            return normalEdgeIcon;
        };
        this.getErrorIcon = () => {
            if (maybe_1.some(this.browser) && this.browser !== browser_1.Browser.edge) {
                return errorIcon;
            }
            return errorEdgeIcon;
        };
        this.updateIcon(this.currentIconType);
    }
    chooseIcon(type) {
        switch (type) {
            case IconType.normal:
                return this.getNormalIcon();
            case IconType.error:
                return this.getErrorIcon();
            default:
                return this.getErrorIcon();
        }
    }
    getIcon() {
        return this.currentIconType;
    }
    setIcon(newIconType) {
        if (maybe_1.some(this.pendingIconType)) {
            this.pendingIconType = newIconType;
        }
        else if (newIconType !== this.currentIconType) {
            this.updateIcon(newIconType);
        }
    }
    updateIcon(newIconType) {
        this.pendingIconType = newIconType;
        const newIcon = this.chooseIcon(newIconType);
        chrome.browserAction.setIcon(newIcon, () => {
            this.currentIconType = newIconType;
            if (maybe_1.none(this.pendingIconType)) {
                log_1.logError(new Error("updateIcon callback: unexpected undefined pendingIconType"));
            }
            else if (this.pendingIconType === this.currentIconType) {
                this.pendingIconType = undefined;
            }
            else {
                this.updateIcon(this.pendingIconType);
            }
        });
    }
}
exports.IconUpdater = IconUpdater;


/***/ }),
/* 107 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
const page_port_resolver_1 = __webpack_require__(39);
const promise_utils_1 = __webpack_require__(13);
const message_types_1 = __webpack_require__(2);
const messages_1 = __webpack_require__(5);
const log_1 = __webpack_require__(1);
const string_utils_1 = __webpack_require__(3);
const url_utils_1 = __webpack_require__(4);
const maybe_1 = __webpack_require__(0);
const port_utils_1 = __webpack_require__(29);
const host_constants_1 = __webpack_require__(12);
const page_port_controller_1 = __webpack_require__(24);
const browser_1 = __webpack_require__(6);
const history_1 = __webpack_require__(28);
var BlockLinkType;
(function (BlockLinkType) {
    BlockLinkType[BlockLinkType["allow"] = 0] = "allow";
    BlockLinkType[BlockLinkType["retry"] = 1] = "retry";
})(BlockLinkType || (BlockLinkType = {}));
class ExternalAppLinkPageController {
    constructor(tabId, port, onDisconnect, blockLink, shouldBlockLinkType, onConfigured) {
        this.tabId = tabId;
        this.onDisconnect = onDisconnect;
        this.blockLink = blockLink;
        this.shouldBlockLinkType = shouldBlockLinkType;
        this.pagePortController = new page_port_controller_1.PagePortController(tabId, port, (port) => this.onPageConnected(port), (port) => this.onPageDisconnected(port), onConfigured);
        this.pagePortController.registerMessageHandler(message_types_1.MessageType.externalAppLinkRequestV1, (message) => this.handleRequest(message));
        this.pagePortController.connect();
    }
    get shouldRetryLink() {
        return this.shouldBlockLinkType === BlockLinkType.retry;
    }
    sendMessage(type, payload) {
        this.pagePortController.sendMessage(type, payload);
    }
    handleRequest(message) {
        const request = message.payload;
        const linkSpec = request.linkSpec;
        const linkURL = url_utils_1.parseUrl(linkSpec);
        log_1.log(`ExternalAppLinkPageController.handleExternalAppLink: ${string_utils_1.toString({
            tabId: this.tabId,
            linkSpec: request.linkSpec,
            externalAppName: request.externalAppName,
            navigateToLink: maybe_1.some(linkURL),
            shouldRetryLink: this.shouldRetryLink
        })}`);
        let navigateToURL;
        if (maybe_1.some(linkURL)) {
            if (this.shouldRetryLink) {
                if (maybe_1.some(this.senderURL)) {
                    navigateToURL = this.senderURL;
                }
            }
            else {
                navigateToURL = linkURL;
            }
        }
        this.sendResponse(maybe_1.some(navigateToURL) ? navigateToURL : this.blockLink(linkURL, this.tabId));
    }
    sendResponse(navigateToURL) {
        const navigateToSpec = url_utils_1.URLToString(navigateToURL);
        this.sendMessage(message_types_1.MessageType.externalAppLinkResponseV1, new messages_1.ExternalAppLinkResponseV1(navigateToSpec));
    }
    onPageConnected(port) {
        this.senderURL = port_utils_1.readPortPageUrl(port);
    }
    onPageDisconnected(port) {
        this.onDisconnect(port, this.tabId);
    }
}
class ExternalAppLinkController {
    constructor(browser, blockLink, onConfigured, errorHandler) {
        this.browser = browser;
        this.blockLink = blockLink;
        this.onConfigured = onConfigured;
        this.externalAppLinkPage = undefined;
        this.pageControllers = new Map();
        this.isDormant = false;
        this.externalAppLinkPage = url_utils_1.parseUrl(chrome.runtime.getURL(host_constants_1.hostConstants.externalAppLinkPage));
        this.portResolver = page_port_resolver_1.getBrowserSpecificExtensionPagePortResolver(this.browser, host_constants_1.hostConstants.externalAppLinkPagePortName, (tabId, port) => this.onUnresolvedPortConnected(tabId, port), (url) => this.isExternalAppLinkURL(url));
        errorHandler.onDormantStateChanged.registerEventHandler(this.onDormantStateChanged.bind(this));
    }
    onDormantStateChanged(dormantState) {
        this.isDormant = dormantState;
    }
    isExternalAppLinkURL(url) {
        if (maybe_1.none(url) || maybe_1.none(this.externalAppLinkPage)) {
            return false;
        }
        return url_utils_1.isSameUrl(url, this.externalAppLinkPage, url_utils_1.UrlCompareOptions.IgnoreSearchParams);
    }
    getExternalAppLinkURL() {
        return this.externalAppLinkPage;
    }
    onExternalAppLinkDetected(tabId) {
        const port = this.portResolver.resolvePort(tabId);
        this.addPageController(tabId, port, BlockLinkType.allow);
    }
    addPageController(tabId, port, shouldBlockLink) {
        const onPortDisconnected = (port, tabId) => {
            this.onPortDisconnected(port, tabId);
        };
        const pageController = new ExternalAppLinkPageController(tabId, port, onPortDisconnected, this.blockLink, shouldBlockLink, this.onConfigured);
        this.pageControllers.set(tabId, pageController);
    }
    onPortDisconnected(port, tabId) {
        this.pageControllers.delete(tabId);
        history_1.removeExtensionPageFromHistoryAfterClosing(this.browser, port);
    }
    onUnresolvedPortConnected(tabId, port) {
        log_1.log(`ExternalAppLinkController.onUnexpectedPortConnected: tabId: ${tabId}`);
        if (this.isDormant) {
            log_1.log("Extension in a dormant state so set BlockLinkType.allow instead of retry.");
            this.addPageController(tabId, promise_utils_1.makePromise(() => port), BlockLinkType.allow);
        }
        else if (this.browser === browser_1.Browser.chrome || this.browser === browser_1.Browser.edgeChromium) {
            this.addPageController(tabId, promise_utils_1.makePromise(() => port), BlockLinkType.retry);
        }
        else {
            this.addPageController(tabId, promise_utils_1.makePromise(() => port), BlockLinkType.allow);
        }
    }
}
exports.ExternalAppLinkController = ExternalAppLinkController;


/***/ }),
/* 108 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
const request_response_handler_1 = __webpack_require__(64);
const url_utils_1 = __webpack_require__(4);
const message_types_1 = __webpack_require__(2);
const messages_1 = __webpack_require__(5);
const id_generator_1 = __webpack_require__(19);
const browser_1 = __webpack_require__(6);
function makeIsFileUrlTrustedRequestHandler(messageRouter, messageSender, idGenerator) {
    const makeRequest = (id, fileUrl) => {
        return new messages_1.IsFileURLTrustedRequestV1(id, url_utils_1.URLToString(fileUrl));
    };
    const readResponse = (message) => {
        const response = message.payload;
        const id = response.id;
        const isTrusted = response.isTrusted;
        return [id, isTrusted];
    };
    return new request_response_handler_1.RequestResponseHandler(message_types_1.MessageType.isFileURLTrustedRequestV1, message_types_1.MessageType.isFileURLTrustedResponseV1, makeRequest, readResponse, messageRouter, messageSender, idGenerator);
}
class FileUrlTracker {
    constructor(messageRouter, messageSender, browser) {
        this.browser = browser;
        this.idGenerator = new id_generator_1.IdGenerator();
        this.trustedFileUrls = url_utils_1.makeUrlHashSet(url_utils_1.UrlCompareOptions.IgnoreSearchParams);
        this.untrustedFileUrls = url_utils_1.makeUrlHashSet(url_utils_1.UrlCompareOptions.IgnoreSearchParams);
        this.requestHandler = makeIsFileUrlTrustedRequestHandler(messageRouter, messageSender, this.idGenerator);
    }
    isEdgeDnsErrorPage(fileUrl) {
        const isEdge = this.browser === browser_1.Browser.edge;
        const isDnsErrorPage = fileUrl.pathname.endsWith("dnserror.html");
        return isEdge && isDnsErrorPage;
    }
    isFileUrlTrusted(fileUrl) {
        if (!url_utils_1.isFileUrl(fileUrl)) {
            return undefined;
        }
        if (this.untrustedFileUrls.has(fileUrl)) {
            return false;
        }
        if (this.trustedFileUrls.has(fileUrl)) {
            return true;
        }
        if (this.isEdgeDnsErrorPage(fileUrl)) {
            return true;
        }
        return undefined;
    }
    queryFileUrlTrustedness(fileUrl, onQueryComplete) {
        if (!url_utils_1.isFileUrl(fileUrl)) {
            return false;
        }
        this.requestHandler.sendRequest(fileUrl, (fileUrl, isTrusted) => {
            this.untrustedFileUrls.remove(fileUrl);
            this.trustedFileUrls.remove(fileUrl);
            if (isTrusted) {
                this.trustedFileUrls.add(fileUrl);
            }
            else {
                this.untrustedFileUrls.add(fileUrl);
            }
            onQueryComplete(fileUrl, isTrusted);
        });
        return true;
    }
}
exports.FileUrlTracker = FileUrlTracker;


/***/ }),
/* 109 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
const message_types_1 = __webpack_require__(2);
const messages_1 = __webpack_require__(5);
const page_port_resolver_1 = __webpack_require__(39);
const host_constants_1 = __webpack_require__(12);
const maybe_1 = __webpack_require__(0);
const url_utils_1 = __webpack_require__(4);
const page_port_controller_1 = __webpack_require__(24);
const log_1 = __webpack_require__(1);
const string_utils_1 = __webpack_require__(3);
const url_encoder_1 = __webpack_require__(62);
const blocked_file_page_options_1 = __webpack_require__(110);
const promise_utils_1 = __webpack_require__(13);
const browser_1 = __webpack_require__(6);
const history_1 = __webpack_require__(28);
class BlockedFilePageController {
    constructor(browser, tabId, port, onDisconnect, fileUrlTracker, browserLauncher, onConfigured) {
        this.browser = browser;
        this.tabId = tabId;
        this.port = port;
        this.onDisconnect = onDisconnect;
        this.fileUrlTracker = fileUrlTracker;
        this.browserLauncher = browserLauncher;
        this.pagePortController = new page_port_controller_1.PagePortController(tabId, port, (port) => this.onPortConnected(port), (port) => this.onPortDisconnected(port), onConfigured);
        this.pagePortController.registerMessageHandler(message_types_1.MessageType.blockedFileRequestV1, (message) => this.handleRequest(message));
        this.pagePortController.connect();
    }
    closeTab() {
        chrome.tabs.remove(this.tabId, () => {
            log_1.log(`BlockedFilePageController.closeTab: tabId: ${this.tabId}`);
        });
    }
    handleRequest(message) {
        const request = message.payload;
        const fileUrl = url_utils_1.parseUrl(request.fileUrlSpec);
        if (maybe_1.none(fileUrl) || !url_utils_1.isFileUrl(fileUrl)) {
            this.closeTab();
            return;
        }
        this.fileUrlTracker.queryFileUrlTrustedness(fileUrl, (fileUrl, isTrusted) => {
            log_1.log(`BlockedFilePageController.handleRequest: ${string_utils_1.toString({
                fileUrl: fileUrl,
                isTrusted: isTrusted
            })}`);
            if (!isTrusted) {
                this.browserLauncher.launchBrowserAndCloseTabOrNavigateTab(this.tabId, fileUrl);
            }
            else if (this.browser === browser_1.Browser.edge) {
                chrome.tabs.update(this.tabId, { url: url_utils_1.URLToString(fileUrl) });
            }
            else {
                this.sendResponse(fileUrl, isTrusted);
            }
        });
    }
    sendResponse(fileUrl, isTrusted) {
        this.pagePortController.sendMessage(message_types_1.MessageType.blockedFileResponseV1, new messages_1.BlockedFileResponseV1(url_utils_1.URLToString(fileUrl), isTrusted));
    }
    onPortConnected(port) { }
    onPortDisconnected(port) {
        this.onDisconnect(port, this.tabId);
    }
}
class FileBlocker {
    constructor(browser, fileUrlTracker, browserLauncher, onConfigured) {
        this.browser = browser;
        this.fileUrlTracker = fileUrlTracker;
        this.browserLauncher = browserLauncher;
        this.onConfigured = onConfigured;
        this.pageControllers = new Map();
        const blockedFilePageSpec = chrome.runtime.getURL(host_constants_1.hostConstants.blockedFilePage);
        const blockedFilePageURL = url_utils_1.parseUrl(blockedFilePageSpec);
        if (maybe_1.none(blockedFilePageURL)) {
            throw new Error(`FileBlocker.constructor: invalid blockedFilePageURL: ${host_constants_1.hostConstants.blockedFilePage}`);
        }
        this.blockedFilePageURL = blockedFilePageURL;
        this.pagePortResolver = page_port_resolver_1.getBrowserSpecificExtensionPagePortResolver(this.browser, host_constants_1.hostConstants.blockedFilePagePortName, (tabId, port) => this.onUnresolvedPagePortConnected(tabId, port), (url) => this.isBlockedFilePageURL(url));
    }
    isBlockedFilePageURL(url) {
        if (maybe_1.none(url) || maybe_1.none(this.blockedFilePageURL)) {
            return false;
        }
        return url_utils_1.isSameUrl(url, this.blockedFilePageURL, url_utils_1.UrlCompareOptions.IgnoreSearchParams);
    }
    makeBlockedFilePageURL(fileUrl) {
        const urlEncoder = new url_encoder_1.UrlEncoder(this.blockedFilePageURL);
        urlEncoder.addUrlQueryParam(blocked_file_page_options_1.OptionNames.fileUrlSpec, fileUrl);
        const blockedFilePageURL = urlEncoder.encodeUrl();
        if (maybe_1.none(blockedFilePageURL)) {
            return this.blockedFilePageURL;
        }
        return blockedFilePageURL;
    }
    addBlockedFilePageController(tabId, port) {
        const controller = new BlockedFilePageController(this.browser, tabId, port, (port, tabId) => this.onPageDisconnected(port, tabId), this.fileUrlTracker, this.browserLauncher, this.onConfigured);
        this.pageControllers.set(tabId, controller);
    }
    onPageDisconnected(port, tabId) {
        this.pageControllers.delete(tabId);
        history_1.removeExtensionPageFromHistoryAfterClosing(this.browser, port);
    }
    onUnresolvedPagePortConnected(tabId, port) {
        this.addBlockedFilePageController(tabId, promise_utils_1.makePromise(() => port));
    }
    blockFile(fileUrl, tabId) {
        const port = this.pagePortResolver.resolvePort(tabId);
        this.addBlockedFilePageController(tabId, port);
        const blockedFilePageURL = this.makeBlockedFilePageURL(fileUrl);
        return blockedFilePageURL;
    }
}
exports.FileBlocker = FileBlocker;


/***/ }),
/* 110 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var OptionNames;
(function (OptionNames) {
    OptionNames["fileUrlSpec"] = "fileUrlSpec";
})(OptionNames = exports.OptionNames || (exports.OptionNames = {}));


/***/ }),
/* 111 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
const request_response_handler_1 = __webpack_require__(64);
const id_generator_1 = __webpack_require__(19);
const messages_1 = __webpack_require__(5);
const message_types_1 = __webpack_require__(2);
const protocol_versions_1 = __webpack_require__(14);
const maybe_1 = __webpack_require__(0);
const config_keys_1 = __webpack_require__(7);
const log_1 = __webpack_require__(1);
var ResponseTime;
(function (ResponseTime) {
    ResponseTime[ResponseTime["respondImmediately"] = 0] = "respondImmediately";
    ResponseTime[ResponseTime["respondWhenChanged"] = 1] = "respondWhenChanged";
})(ResponseTime || (ResponseTime = {}));
function makeEnabledFeaturesRequestHandler(messageRouter, messageSender, idGenerator) {
    const makeRequest = (id, responseTime) => {
        const respondImmediately = responseTime === ResponseTime.respondImmediately;
        return new messages_1.EnabledFeaturesRequestV2(id, respondImmediately);
    };
    const readResponse = (message) => {
        const response = message.payload;
        const id = response.id;
        const enabledFeatures = response;
        return [id, enabledFeatures];
    };
    return new request_response_handler_1.RequestResponseHandler(message_types_1.MessageType.enabledFeaturesRequestV2, message_types_1.MessageType.enabledFeaturesResponseV2, makeRequest, readResponse, messageRouter, messageSender, idGenerator);
}
class FeatureManager {
    constructor(messageRouter, messageSender, handshaker, configNotifier, onConfiguredRaiser) {
        this.onConfiguredRaiser = onConfiguredRaiser;
        this.idGenerator = new id_generator_1.IdGenerator();
        this.enabledFeatures = undefined;
        this.dontAskAgain = false;
        this.isConsumerProduct = false;
        this.requestHandler = makeEnabledFeaturesRequestHandler(messageRouter, messageSender, this.idGenerator);
        handshaker.onHandshaken.registerEventHandler((event) => {
            this.onHandshaken(event);
        });
        configNotifier.addConfigListenerForKeys((key, config) => this.onConfigChanged(key, config), [config_keys_1.ConfigKey.dontAskAgain, config_keys_1.ConfigKey.isConsumerProduct]);
    }
    onConfigChanged(key, config) {
        switch (key) {
            case config_keys_1.ConfigKey.dontAskAgain:
                this.dontAskAgain = config.dontAskAgain;
                break;
            case config_keys_1.ConfigKey.isConsumerProduct:
                this.isConsumerProduct = config.isConsumerProduct;
                break;
        }
    }
    get shouldNotAskAgain() {
        return this.isConsumerProduct && this.dontAskAgain;
    }
    get isLinkProtectionEnabled() {
        if (this.shouldNotAskAgain) {
            log_1.log(`Treating link protection as disabled because the user has chosen "Don't ask again"`);
            return false;
        }
        return maybe_1.some(this.enabledFeatures) && this.enabledFeatures.linkProtection;
    }
    get isFileURLProtectionEnabled() {
        return maybe_1.some(this.enabledFeatures) && this.enabledFeatures.fileURLProtection;
    }
    get isPDFProtectionEnabled() {
        if (this.shouldNotAskAgain) {
            log_1.log(`Treating PDF protection as disabled because the user has chosen "Don't ask again"`);
            return false;
        }
        return maybe_1.some(this.enabledFeatures) && this.enabledFeatures.pdfProtection;
    }
    get isDownloadProtectionEnabled() {
        return maybe_1.some(this.enabledFeatures) && this.enabledFeatures.downloadProtection;
    }
    onHandshaken(event) {
        const protocolVersion = event.negotiatedVersion;
        if (protocol_versions_1.isMessageTypeSupported(message_types_1.MessageType.enabledFeaturesRequestV2, protocolVersion)) {
            this.requestHandler.sendRequest(ResponseTime.respondImmediately, (responseTime, enabledFeatures) => this.onResponseReceived(responseTime, enabledFeatures));
        }
        else {
            this.enabledFeatures = {
                linkProtection: true,
                fileURLProtection: true,
                pdfProtection: true,
                downloadProtection: true
            };
        }
    }
    onResponseReceived(responseTime, enabledFeatures) {
        this.enabledFeatures = enabledFeatures;
        this.requestHandler.sendRequest(ResponseTime.respondWhenChanged, (responseTime, enabledFeatures) => this.onResponseReceived(responseTime, enabledFeatures));
        this.onConfiguredRaiser.onConfigured();
    }
}
exports.FeatureManager = FeatureManager;


/***/ }),
/* 112 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
const message_types_1 = __webpack_require__(2);
const messages_1 = __webpack_require__(5);
const id_generator_1 = __webpack_require__(19);
const maybe_1 = __webpack_require__(0);
const errors_1 = __webpack_require__(21);
const protocol_versions_1 = __webpack_require__(14);
class HeartbeatController {
    constructor(errorHandler, messageSender, messageRouter, handshaker) {
        this.errorHandler = errorHandler;
        this.messageSender = messageSender;
        this.timeoutId = undefined;
        this.pendingHeartbeat = undefined;
        this.idGenerator = new id_generator_1.IdGenerator();
        messageRouter.registerMessageHandler(message_types_1.MessageType.heartbeatV10, (message) => this.onHeartbeatReceived(message));
        handshaker.onHandshaken.registerEventHandler((event) => {
            this.resetPendingHeartbeat();
            this.cancelTimeout();
            const negotiatedVersion = event.negotiatedVersion;
            if (maybe_1.some(negotiatedVersion) && protocol_versions_1.isMessageTypeSupported(message_types_1.MessageType.heartbeatV10, negotiatedVersion)) {
                this.sendHeartbeat();
            }
        });
    }
    onHeartbeatReceived(message) {
        const heartbeat = message.payload;
        if (maybe_1.some(this.pendingHeartbeat) && this.pendingHeartbeat === heartbeat.id) {
            this.resetPendingHeartbeat();
        }
    }
    sendHeartbeat() {
        this.resetPendingHeartbeat();
        this.cancelTimeout();
        const id = this.idGenerator.generateId();
        this.messageSender.sendMessage(message_types_1.MessageType.heartbeatV10, new messages_1.HeartbeatV10(id));
        try {
            const oneMinute = 60000;
            this.timeoutId = setTimeout(() => {
                if (maybe_1.some(this.pendingHeartbeat)) {
                    this.resetPendingHeartbeat();
                    this.errorHandler.raiseError(errors_1.ChragError.helperUnresponsive);
                    return;
                }
                else {
                    this.sendHeartbeat();
                }
            }, oneMinute);
        }
        finally {
            this.pendingHeartbeat = id;
        }
    }
    resetPendingHeartbeat() {
        if (maybe_1.none(this.pendingHeartbeat)) {
            return;
        }
        this.pendingHeartbeat = undefined;
    }
    cancelTimeout() {
        if (maybe_1.none(this.timeoutId)) {
            return;
        }
        try {
            clearTimeout(this.timeoutId);
        }
        finally {
            this.timeoutId = undefined;
        }
    }
}
exports.HeartbeatController = HeartbeatController;


/***/ }),
/* 113 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
const host_constants_1 = __webpack_require__(12);
const port_resolver_1 = __webpack_require__(57);
const page_port_controller_1 = __webpack_require__(24);
const message_types_1 = __webpack_require__(2);
const messages_1 = __webpack_require__(5);
const log_1 = __webpack_require__(1);
const promise_utils_1 = __webpack_require__(13);
const maybe_1 = __webpack_require__(0);
const config_keys_1 = __webpack_require__(7);
const protocol_versions_1 = __webpack_require__(14);
class OptionsPageController {
    constructor(handshaker, port, openPhishingLinksInSecureBrowser, userTrustedOrigins, userUntrustedOrigins, onDisconnect, hostHelperMessageSender) {
        this.handshaker = handshaker;
        this.openPhishingLinksInSecureBrowser = openPhishingLinksInSecureBrowser;
        this.userTrustedOrigins = userTrustedOrigins;
        this.userUntrustedOrigins = userUntrustedOrigins;
        this.onDisconnect = onDisconnect;
        this.hostHelperMessageSender = hostHelperMessageSender;
        this.optionsPageSupportStatus = protocol_versions_1.VersionSupportStatus.notHandshaken;
        this.pagePortController = new page_port_controller_1.PagePortController(chrome.tabs.TAB_ID_NONE, port, (port) => { }, (port) => { this.onDisconnect(); });
        this.pagePortController.registerMessageHandler(message_types_1.MessageType.optionsDataRequestV3, (message) => this.handleOptionsDataRequest(message));
        this.pagePortController.registerMessageHandler(message_types_1.MessageType.clearRememberedDecisionsV1, (message) => this.clearAllRememberedDecisions(message));
        this.pagePortController.registerMessageHandler(message_types_1.MessageType.clearRememberedOriginV3, (message) => this.clearRememberedOrigin(message));
        this.pagePortController.connect();
        if (this.handshaker.isHandshaken && maybe_1.some(this.handshaker.negotiatedVersion)) {
            this.setOptionsPageSupportStatus(this.handshaker.negotiatedVersion);
        }
        else {
            this.handshaker.onHandshaken.registerEventHandler((handshakenEvent) => {
                this.onNegotiatedVersion(handshakenEvent.negotiatedVersion);
            });
        }
    }
    setOptionsPageSupportStatus(negotiatedVersion) {
        if (protocol_versions_1.isMessageTypeSupported(message_types_1.MessageType.optionsDataResponseV3, negotiatedVersion)) {
            this.optionsPageSupportStatus = protocol_versions_1.VersionSupportStatus.supported;
        }
        else {
            this.optionsPageSupportStatus = protocol_versions_1.VersionSupportStatus.unsupported;
        }
    }
    onNegotiatedVersion(negotiatedVersion) {
        this.setOptionsPageSupportStatus(negotiatedVersion);
        this.sendOptionsDataResponse();
    }
    updateOptionsData(openPhishingLinksInSecureBrowser, userTrustedOrigins, userUntrustedOrigins) {
        this.openPhishingLinksInSecureBrowser = openPhishingLinksInSecureBrowser;
        this.userTrustedOrigins = userTrustedOrigins;
        this.userUntrustedOrigins = userUntrustedOrigins;
        this.sendOptionsDataResponse();
    }
    sendOptionsDataResponse() {
        this.pagePortController.sendMessage(message_types_1.MessageType.optionsDataResponseV3, new messages_1.OptionsDataResponseV3(this.optionsPageSupportStatus, this.openPhishingLinksInSecureBrowser, this.userTrustedOrigins, this.userUntrustedOrigins));
    }
    handleOptionsDataRequest(message) {
        this.sendOptionsDataResponse();
    }
    clearRememberedOrigin(message) {
        const protocol = this.handshaker.negotiatedVersion;
        if (maybe_1.some(protocol) && protocol_versions_1.isMessageTypeSupported(message_types_1.MessageType.clearRememberedOriginV3, protocol)) {
            this.hostHelperMessageSender.sendMessage(message_types_1.MessageType.clearRememberedOriginV3, message.payload);
        }
    }
    clearAllRememberedDecisions(message) {
        this.hostHelperMessageSender.sendMessage(message_types_1.MessageType.clearRememberedDecisionsV1, new messages_1.ClearRememberedDecisionsV1());
    }
}
class OptionsController {
    constructor(hostHelperMessageSender, configNotifier, handshaker) {
        this.hostHelperMessageSender = hostHelperMessageSender;
        this.handshaker = handshaker;
        this.openPhishingLinksInSecureBrowser = false;
        this.userTrustedOrigins = [];
        this.userUntrustedOrigins = [];
        configNotifier.addConfigListenerForKeys((key, config) => { this.onConfigChanged(key, config); }, [
            config_keys_1.ConfigKey.openPhishingLinksInSecureBrowser,
            config_keys_1.ConfigKey.userTrustedOrigins,
            config_keys_1.ConfigKey.userUntrustedOrigins
        ]);
        this.portResolver = new port_resolver_1.PortResolver(host_constants_1.hostConstants.optionsPortName, port => this.onUnresolvedPortConnected(port));
        const port = this.portResolver.resolvePort();
        this.makeNewPageController(port);
    }
    onConfigChanged(key, config) {
        switch (key) {
            case config_keys_1.ConfigKey.openPhishingLinksInSecureBrowser:
                this.openPhishingLinksInSecureBrowser = config.openPhishingLinksInSecureBrowser;
                break;
            case config_keys_1.ConfigKey.userTrustedOrigins:
                this.userTrustedOrigins = config.userTrustedOrigins;
                break;
            case config_keys_1.ConfigKey.userUntrustedOrigins:
                this.userUntrustedOrigins = config.userUntrustedOrigins;
                break;
        }
        if (maybe_1.some(this.optionsPageController)) {
            this.optionsPageController.updateOptionsData(this.openPhishingLinksInSecureBrowser, this.userTrustedOrigins, this.userUntrustedOrigins);
        }
    }
    makeNewPageController(port) {
        this.optionsPageController = new OptionsPageController(this.handshaker, port, this.openPhishingLinksInSecureBrowser, this.userTrustedOrigins, this.userUntrustedOrigins, () => { this.onPortDisconnected(); }, this.hostHelperMessageSender);
    }
    onPortDisconnected() {
        this.optionsPageController = undefined;
        const port = this.portResolver.resolvePort();
        this.makeNewPageController(port);
    }
    onUnresolvedPortConnected(port) {
        log_1.log("OptionsController.onUnexpectedPortConnected");
        if (maybe_1.none(this.optionsPageController)) {
            this.makeNewPageController(promise_utils_1.makePromise(() => port));
        }
    }
}
exports.OptionsController = OptionsController;


/***/ }),
/* 114 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
const config_keys_1 = __webpack_require__(7);
const url_utils_1 = __webpack_require__(4);
const browser_1 = __webpack_require__(6);
const maybe_1 = __webpack_require__(0);
const defaultNewTabPageUrls = {
    chrome: [
        "https://www.google.com/_/chrome/newtab",
        "https://www.bing.com/chrome/newtab"
    ],
    firefox: [],
    edge: [],
    edgeChromium: []
};
class NewTabPageUrlTracker {
    constructor(configNotifier, browser) {
        this.browser = browser;
        this.newTabPageUrls = new Map();
        this.updateNewTabPageUrls(defaultNewTabPageUrls);
        configNotifier.addConfigListenerForKey((key, config) => {
            this.onConfigChanged(key, config);
        }, config_keys_1.ConfigKey.newTabPageUrls);
    }
    onConfigChanged(key, config) {
        switch (key) {
            case config_keys_1.ConfigKey.newTabPageUrls:
                this.updateNewTabPageUrls(config.newTabPageUrls);
                break;
            default:
                break;
        }
    }
    isNewTabPageUrl(url) {
        if (maybe_1.none(this.browser)) {
            return false;
        }
        const urls = this.newTabPageUrls.get(this.browser);
        if (maybe_1.none(urls)) {
            return false;
        }
        return urls.has(url);
    }
    updateNewTabPageUrls(serializedNewTabPageUrls) {
        if (maybe_1.none(serializedNewTabPageUrls)) {
            this.newTabPageUrls = new Map();
            return;
        }
        this.newTabPageUrls = new Map();
        const updateBrowserNewTabPageUrls = (browser, specs) => {
            const urls = url_utils_1.makeUrlHashSet(url_utils_1.UrlCompareOptions.IgnoreSearchParams);
            urls.addMany(specs.map(url_utils_1.parseUrl).filter(maybe_1.some));
            this.newTabPageUrls.set(browser, urls);
        };
        updateBrowserNewTabPageUrls(browser_1.Browser.chrome, serializedNewTabPageUrls.chrome);
        updateBrowserNewTabPageUrls(browser_1.Browser.firefox, serializedNewTabPageUrls.firefox);
        updateBrowserNewTabPageUrls(browser_1.Browser.edge, serializedNewTabPageUrls.edge);
        updateBrowserNewTabPageUrls(browser_1.Browser.edgeChromium, serializedNewTabPageUrls.edgeChromium);
    }
}
exports.NewTabPageUrlTracker = NewTabPageUrlTracker;


/***/ }),
/* 115 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
const message_port_channel_1 = __webpack_require__(58);
const error_handler_1 = __webpack_require__(63);
const message_sender_1 = __webpack_require__(59);
const promise_utils_1 = __webpack_require__(13);
const host_helper_connection_1 = __webpack_require__(116);
const errors_1 = __webpack_require__(21);
const event_dispatcher_1 = __webpack_require__(20);
const connection_1 = __webpack_require__(38);
const log = console.log;
class DummyMessagePortChannel {
    constructor() {
        this.messageSender = new message_sender_1.MessageSender((message) => this.sendMessage(message));
        this.onConnectionStateChanged = new event_dispatcher_1.EventDispatcher();
        this.onHandshaken = new event_dispatcher_1.EventDispatcher();
        this.isHandshaken = false;
        this.negotiatedVersion = undefined;
        this.connectionState = connection_1.ConnectionState.Disconnected;
    }
    connect() { }
    disconnect() { }
    sendMessage(message) {
        return false;
    }
}
class HelperPortChannel {
    constructor(errorHandler, messageRouter) {
        this.errorHandler = errorHandler;
        this.messageRouter = messageRouter;
        this.onHandshaken = new event_dispatcher_1.EventDispatcher();
        this.onConnectionStateChanged = new event_dispatcher_1.EventDispatcher();
        this.failedReconnectAttempts = 0;
        this.messageSender = new message_sender_1.MessageSender((message) => this.sendMessage(message));
        this.channel = this.makeConnection();
    }
    makeDummyConnection() {
        return new DummyMessagePortChannel();
    }
    makeConnection() {
        const createPort = promise_utils_1.makePromise(() => {
            return host_helper_connection_1.createHostHelperPort();
        });
        const channel = new message_port_channel_1.MessagePortChannel(createPort, (port) => this.onPortConnected(port), (port) => this.onPortDisconnected(port), (e) => this.onPortError(e), (e) => this.onHandshakeError(e), this.messageRouter, message_port_channel_1.Negotiation.NegotiateProtocolVersion);
        channel.onHandshaken.registerEventHandler((event) => this.onHandshaken.dispatchEvent(event));
        channel.onConnectionStateChanged.registerEventHandler((event) => this.onConnectionStateChanged.dispatchEvent(event));
        return channel;
    }
    connect() {
        log("HostHelperChannel.connect");
        this.channel.connect();
    }
    disconnect() {
        log("HostHelperChannel.disconnect");
        this.channel.disconnect();
    }
    reconnect() {
        log("HostHelperChannel.reconnect");
        const channel = this.channel;
        this.channel = this.makeDummyConnection();
        channel.disconnect();
    }
    sendMessage(message) {
        return this.channel.sendMessage(message);
    }
    onPortConnected(port) {
        log("HostHelperChannel.onPortConnected");
    }
    onPortDisconnected(port) {
        log(`HostHelperChannel.onPortDisconnected: failedReconnectAttempts: ${this.failedReconnectAttempts}`);
        if (this.failedReconnectAttempts < error_handler_1.maxFailedReconnectAttempts) {
            try {
                this.channel = this.makeConnection();
                this.channel.connect();
            }
            finally {
                this.failedReconnectAttempts += 1;
            }
        }
        else {
            this.errorHandler.raiseError(errors_1.ChragError.helperPortError, new Error("hostHelperChannel.onPortDisconnected"));
        }
    }
    onPortError(e) {
        log(`HostHelperChannel.onPortError: ${e}`);
        this.errorHandler.raiseError(errors_1.ChragError.helperPortError, e);
    }
    onHandshakeError(e) {
        log(`HostHelperChannel.onHandshakeError: ${e}`);
        this.errorHandler.raiseError(errors_1.ChragError.handshakeError, e);
    }
    get isHandshaken() {
        return this.channel.isHandshaken;
    }
    get negotiatedVersion() {
        return this.channel.negotiatedVersion;
    }
    get connectionState() {
        return this.channel.connectionState;
    }
}
exports.HelperPortChannel = HelperPortChannel;


/***/ }),
/* 116 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
const host_constants_1 = __webpack_require__(12);
function createHostHelperPort() {
    return chrome.runtime.connectNative(host_constants_1.hostConstants.hostHelperId);
}
exports.createHostHelperPort = createHostHelperPort;


/***/ }),
/* 117 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
const log_1 = __webpack_require__(1);
const messages_1 = __webpack_require__(5);
const message_types_1 = __webpack_require__(2);
const maybe_1 = __webpack_require__(0);
const protocol_versions_1 = __webpack_require__(14);
class HelperLogSink {
    constructor(sender) {
        this.sender = sender;
        this.isSendingLogMessage = false;
    }
    log(message) {
        if (this.isSendingLogMessage) {
            return;
        }
        const msg = new messages_1.LogMessageV1(messages_1.LogLevel.Info, message);
        this.isSendingLogMessage = true;
        try {
            this.sender.sendMessage(message_types_1.MessageType.logMessageV1, msg);
        }
        catch (e) {
        }
        finally {
            this.isSendingLogMessage = false;
        }
    }
    logError(message) {
        this.log(message);
    }
}
exports.HelperLogSink = HelperLogSink;
class MessageLogger {
    constructor(messageDecoder, handshaker) {
        this.protocolVersion = undefined;
        handshaker.onHandshaken.registerEventHandler((event) => {
            this.protocolVersion = event.negotiatedVersion;
        });
        messageDecoder.onMessageDecoded.registerEventHandler((event) => {
            const message = event.message;
            if (!message_types_1.isFrequentlySentMessageType(message.type)) {
                this.log(`MessageLogger.onMessageReceived: message: ${messages_1.messageToString(message)}`);
            }
        });
    }
    log(message) {
        if (maybe_1.some(this.protocolVersion) && protocol_versions_1.shouldLogMessage(this.protocolVersion)) {
            log_1.log(message);
        }
        else {
            console.log(message);
        }
    }
}
exports.MessageLogger = MessageLogger;


/***/ }),
/* 118 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
const i18n_1 = __webpack_require__(31);
const maybe_1 = __webpack_require__(0);
const log_1 = __webpack_require__(1);
const config_keys_1 = __webpack_require__(7);
const url_utils_1 = __webpack_require__(4);
var ContextMenuIds;
(function (ContextMenuIds) {
    ContextMenuIds["brOpenLink"] = "BrOpenLink";
})(ContextMenuIds || (ContextMenuIds = {}));
class ContextMenuManager {
    constructor(browserLauncher, placementManager, errorHandler, configNotifier) {
        this.browserLauncher = browserLauncher;
        this.placementManager = placementManager;
        this.secureBrowserRedirectTrustedSites = false;
        chrome.contextMenus.create({
            id: ContextMenuIds.brOpenLink,
            title: i18n_1.getI18n(i18n_1.I18nMessages.openLinkInSecureBrowser),
            contexts: ['link']
        });
        if (errorHandler.isDormant) {
            this.hideContextMenus();
        }
        errorHandler.onDormantStateChanged.registerEventHandler(isDormant => this.onDormantStateChanged(isDormant));
        configNotifier.addConfigListenerForKeys((key, config) => this.onConfigChanged(key, config), [config_keys_1.ConfigKey.secureBrowserRedirectTrustedSites]);
    }
    registerListeners() {
        chrome.contextMenus.onClicked.addListener(itemData => this.onContextMenuClicked(itemData));
    }
    onDormantStateChanged(isDormant) {
        if (isDormant) {
            this.hideContextMenus();
        }
        else {
            this.showContextMenus();
        }
    }
    hideContextMenus() {
        chrome.contextMenus.update(ContextMenuIds.brOpenLink, { enabled: false });
    }
    showContextMenus() {
        chrome.contextMenus.update(ContextMenuIds.brOpenLink, { enabled: true });
    }
    onConfigChanged(key, config) {
        switch (key) {
            case config_keys_1.ConfigKey.secureBrowserRedirectTrustedSites:
                this.secureBrowserRedirectTrustedSites = config.secureBrowserRedirectTrustedSites;
                break;
        }
    }
    onContextMenuClicked(itemData) {
        if (maybe_1.none(this.browserLauncher) || maybe_1.none(this.placementManager)) {
            log_1.logError(new Error("Context menu click before ContextMenuManager.setup() has been called"));
            return;
        }
        if ((itemData.menuItemId === ContextMenuIds.brOpenLink) && itemData.linkUrl) {
            log_1.log(`User wants to open link in secure browser: ${itemData.linkUrl}`);
            let url = url_utils_1.parseUrl(itemData.linkUrl);
            if (maybe_1.some(url)) {
                if (this.secureBrowserRedirectTrustedSites && this.placementManager.isTrustedUrl(url)) {
                    log_1.log(`Ignoring context menu click to open ${itemData.linkUrl} in the secure browser because the site `
                        + `is trusted and trusted site redirection for BrChrome is enabled`);
                    return;
                }
                this.browserLauncher.launchBrowser(url, () => { });
            }
        }
    }
}
exports.ContextMenuManager = ContextMenuManager;


/***/ })
/******/ ]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAgZjM1ODNiY2JlMWE2NGVmYjg1MmYiLCJ3ZWJwYWNrOi8vLy4uL2xpYi9jb21tb24vbWF5YmUudHMiLCJ3ZWJwYWNrOi8vLy4uL2xpYi9jb21tb24vbG9nLnRzIiwid2VicGFjazovLy8uLi9saWIvaG9zdC9tZXNzYWdlLXR5cGVzLnRzIiwid2VicGFjazovLy8uLi9saWIvY29tbW9uL3N0cmluZy11dGlscy50cyIsIndlYnBhY2s6Ly8vLi4vbGliL2NvbW1vbi91cmwtdXRpbHMudHMiLCJ3ZWJwYWNrOi8vLy4uL2xpYi9ob3N0L21lc3NhZ2VzLnRzIiwid2VicGFjazovLy8uLi9saWIvY29tbW9uL2Jyb3dzZXIudHMiLCJ3ZWJwYWNrOi8vLy4vY29uZmlnLWtleXMudHMiLCJ3ZWJwYWNrOi8vLy4uL2xpYi9jb21tb24vYXJyYXktdXRpbHMudHMiLCJ3ZWJwYWNrOi8vLy4uL2xpYi9jb21tb24vb3JpZ2luLnRzIiwid2VicGFjazovLy8uLi9saWIvY29tbW9uL251bWJlci11dGlscy50cyIsIndlYnBhY2s6Ly8vLi4vbGliL2NvbW1vbi9tdXJtdXItaGFzaC50cyIsIndlYnBhY2s6Ly8vLi4vbGliL2hvc3QvaG9zdC1jb25zdGFudHMudHMiLCJ3ZWJwYWNrOi8vLy4uL2xpYi9jb21tb24vcHJvbWlzZS11dGlscy50cyIsIndlYnBhY2s6Ly8vLi4vbGliL2hvc3QvcHJvdG9jb2wtdmVyc2lvbnMudHMiLCJ3ZWJwYWNrOi8vL2M6L2plbmtpbnMvd29ya3NwYWNlL2NhbV9zYnhfYWxsX21hc3Rlcl9zaWduZWQvc2J4LWFsbC1zaWduZWQvbm9kZV9tb2R1bGVzL3N0cmVhbS1icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9yZWFkYWJsZS1zdHJlYW0vbGliL19zdHJlYW1fZHVwbGV4LmpzIiwid2VicGFjazovLy8uLi9saWIvY29tbW9uL2hhc2gtbWFwLnRzIiwid2VicGFjazovLy8od2VicGFjaykvYnVpbGRpbi9nbG9iYWwuanMiLCJ3ZWJwYWNrOi8vL2M6L2plbmtpbnMvd29ya3NwYWNlL2NhbV9zYnhfYWxsX21hc3Rlcl9zaWduZWQvc2J4LWFsbC1zaWduZWQvbm9kZV9tb2R1bGVzL2luaGVyaXRzL2luaGVyaXRzX2Jyb3dzZXIuanMiLCJ3ZWJwYWNrOi8vLy4uL2xpYi9jb21tb24vaWQtZ2VuZXJhdG9yLnRzIiwid2VicGFjazovLy8uLi9saWIvY29tbW9uL2V2ZW50LWRpc3BhdGNoZXIudHMiLCJ3ZWJwYWNrOi8vLy4uL2xpYi9jb21tb24vZXJyb3JzLnRzIiwid2VicGFjazovLy9jOi9qZW5raW5zL3dvcmtzcGFjZS9jYW1fc2J4X2FsbF9tYXN0ZXJfc2lnbmVkL3NieC1hbGwtc2lnbmVkL25vZGVfbW9kdWxlcy9wcm9jZXNzL2Jyb3dzZXIuanMiLCJ3ZWJwYWNrOi8vL2M6L2plbmtpbnMvd29ya3NwYWNlL2NhbV9zYnhfYWxsX21hc3Rlcl9zaWduZWQvc2J4LWFsbC1zaWduZWQvbm9kZV9tb2R1bGVzL2NvcmUtdXRpbC1pcy9saWIvdXRpbC5qcyIsIndlYnBhY2s6Ly8vLi4vbGliL2NvbW1vbi9wYWdlLXBvcnQtY29udHJvbGxlci50cyIsIndlYnBhY2s6Ly8vLi9jb25maWcudHMiLCJ3ZWJwYWNrOi8vL2M6L2plbmtpbnMvd29ya3NwYWNlL2NhbV9zYnhfYWxsX21hc3Rlcl9zaWduZWQvc2J4LWFsbC1zaWduZWQvbm9kZV9tb2R1bGVzL3Byb2Nlc3MtbmV4dGljay1hcmdzL2luZGV4LmpzIiwid2VicGFjazovLy9jOi9qZW5raW5zL3dvcmtzcGFjZS9jYW1fc2J4X2FsbF9tYXN0ZXJfc2lnbmVkL3NieC1hbGwtc2lnbmVkL25vZGVfbW9kdWxlcy9zYWZlLWJ1ZmZlci9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9oaXN0b3J5LnRzIiwid2VicGFjazovLy8uLi9saWIvY29tbW9uL3BvcnQtdXRpbHMudHMiLCJ3ZWJwYWNrOi8vLy4uL2xpYi9jb21tb24vb25jZS50cyIsIndlYnBhY2s6Ly8vLi4vbGliL2NvbW1vbi9pMThuLnRzIiwid2VicGFjazovLy9jOi9qZW5raW5zL3dvcmtzcGFjZS9jYW1fc2J4X2FsbF9tYXN0ZXJfc2lnbmVkL3NieC1hbGwtc2lnbmVkL25vZGVfbW9kdWxlcy9ldmVudHMvZXZlbnRzLmpzIiwid2VicGFjazovLy9jOi9qZW5raW5zL3dvcmtzcGFjZS9jYW1fc2J4X2FsbF9tYXN0ZXJfc2lnbmVkL3NieC1hbGwtc2lnbmVkL25vZGVfbW9kdWxlcy9zdHJlYW0tYnJvd3NlcmlmeS9ub2RlX21vZHVsZXMvcmVhZGFibGUtc3RyZWFtL3JlYWRhYmxlLWJyb3dzZXIuanMiLCJ3ZWJwYWNrOi8vL2M6L2plbmtpbnMvd29ya3NwYWNlL2NhbV9zYnhfYWxsX21hc3Rlcl9zaWduZWQvc2J4LWFsbC1zaWduZWQvbm9kZV9tb2R1bGVzL3N0cmVhbS1icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9yZWFkYWJsZS1zdHJlYW0vbGliL19zdHJlYW1fd3JpdGFibGUuanMiLCJ3ZWJwYWNrOi8vLy4uL2xpYi9jb21tb24vaXRlci11dGlscy50cyIsIndlYnBhY2s6Ly8vLi9uYXYtc2VxdWVuY2UtcGFyc2VyLnRzIiwid2VicGFjazovLy8uLi9saWIvY29tbW9uL2NvbnRlbnQtdHlwZS50cyIsIndlYnBhY2s6Ly8vLi4vbGliL2NvbW1vbi9jb25uZWN0aW9uLnRzIiwid2VicGFjazovLy8uLi9saWIvY29tbW9uL3BhZ2UtcG9ydC1yZXNvbHZlci50cyIsIndlYnBhY2s6Ly8vLi4vbGliL2NvbW1vbi9kYXRlLXV0aWxzLnRzIiwid2VicGFjazovLy9jOi9qZW5raW5zL3dvcmtzcGFjZS9jYW1fc2J4X2FsbF9tYXN0ZXJfc2lnbmVkL3NieC1hbGwtc2lnbmVkL25vZGVfbW9kdWxlcy9zdHJlYW0tYnJvd3NlcmlmeS9ub2RlX21vZHVsZXMvcmVhZGFibGUtc3RyZWFtL2xpYi9fc3RyZWFtX3JlYWRhYmxlLmpzIiwid2VicGFjazovLy9jOi9qZW5raW5zL3dvcmtzcGFjZS9jYW1fc2J4X2FsbF9tYXN0ZXJfc2lnbmVkL3NieC1hbGwtc2lnbmVkL25vZGVfbW9kdWxlcy9zdHJlYW0tYnJvd3NlcmlmeS9ub2RlX21vZHVsZXMvcmVhZGFibGUtc3RyZWFtL2xpYi9pbnRlcm5hbC9zdHJlYW1zL3N0cmVhbS1icm93c2VyLmpzIiwid2VicGFjazovLy9jOi9qZW5raW5zL3dvcmtzcGFjZS9jYW1fc2J4X2FsbF9tYXN0ZXJfc2lnbmVkL3NieC1hbGwtc2lnbmVkL25vZGVfbW9kdWxlcy9idWZmZXIvaW5kZXguanMiLCJ3ZWJwYWNrOi8vL2M6L2plbmtpbnMvd29ya3NwYWNlL2NhbV9zYnhfYWxsX21hc3Rlcl9zaWduZWQvc2J4LWFsbC1zaWduZWQvbm9kZV9tb2R1bGVzL3N0cmVhbS1icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9yZWFkYWJsZS1zdHJlYW0vbGliL2ludGVybmFsL3N0cmVhbXMvZGVzdHJveS5qcyIsIndlYnBhY2s6Ly8vYzovamVua2lucy93b3Jrc3BhY2UvY2FtX3NieF9hbGxfbWFzdGVyX3NpZ25lZC9zYngtYWxsLXNpZ25lZC9ub2RlX21vZHVsZXMvbm9kZS1saWJzLWJyb3dzZXIvbm9kZV9tb2R1bGVzL3N0cmluZ19kZWNvZGVyL2xpYi9zdHJpbmdfZGVjb2Rlci5qcyIsIndlYnBhY2s6Ly8vYzovamVua2lucy93b3Jrc3BhY2UvY2FtX3NieF9hbGxfbWFzdGVyX3NpZ25lZC9zYngtYWxsLXNpZ25lZC9ub2RlX21vZHVsZXMvc3RyZWFtLWJyb3dzZXJpZnkvbm9kZV9tb2R1bGVzL3JlYWRhYmxlLXN0cmVhbS9saWIvX3N0cmVhbV90cmFuc2Zvcm0uanMiLCJ3ZWJwYWNrOi8vLy4vdGFiLXN0YWxrZXIudHMiLCJ3ZWJwYWNrOi8vLy4uL2xpYi9jb21tb24vdGFiLXV0aWxzLnRzIiwid2VicGFjazovLy8uL25hdi1zZXF1ZW5jZS1kZXRlY3Rvci50cyIsIndlYnBhY2s6Ly8vLi9waGlzaGluZy1zb3VyY2Utc2l0ZXMudHMiLCJ3ZWJwYWNrOi8vLy4uL2xpYi9jb21tb24vaHR0cC1tZXRob2QudHMiLCJ3ZWJwYWNrOi8vLy4uL2xpYi9jb21tb24vdXJsLXBhcnNlLXV0aWxzLnRzIiwid2VicGFjazovLy8uLi9saWIvaG9zdC9ibG9ja2VkLXBhZ2Utb3B0aW9ucy50cyIsIndlYnBhY2s6Ly8vLi4vbGliL2NvbW1vbi9tZXNzYWdlLXJvdXRlci50cyIsIndlYnBhY2s6Ly8vLi4vbGliL2NvbW1vbi9tZXNzYWdlLWRlY29kZXIudHMiLCJ3ZWJwYWNrOi8vLy4vcG9wdXAtcGFnZS1jb250cm9sbGVyLnRzIiwid2VicGFjazovLy8uLi9saWIvY29tbW9uL3BvcnQtcmVzb2x2ZXIudHMiLCJ3ZWJwYWNrOi8vLy4uL2xpYi9jb21tb24vbWVzc2FnZS1wb3J0LWNoYW5uZWwudHMiLCJ3ZWJwYWNrOi8vLy4uL2xpYi9jb21tb24vbWVzc2FnZS1zZW5kZXIudHMiLCJ3ZWJwYWNrOi8vLy4uL2xpYi9jb21tb24vbWVzc2FnZS1lbmNvZGVyLnRzIiwid2VicGFjazovLy8uLi9saWIvY29tbW9uL29uLWNvbmZpZ3VyZWQudHMiLCJ3ZWJwYWNrOi8vLy4uL2xpYi9jb21tb24vdXJsLWVuY29kZXIudHMiLCJ3ZWJwYWNrOi8vLy4vZXJyb3ItaGFuZGxlci50cyIsIndlYnBhY2s6Ly8vLi4vbGliL2NvbW1vbi9yZXF1ZXN0LXJlc3BvbnNlLWhhbmRsZXIudHMiLCJ3ZWJwYWNrOi8vLy4vbWFpbi50cyIsIndlYnBhY2s6Ly8vLi4vbm9kZV9tb2R1bGVzL3Fsb2JiZXIvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4uL25vZGVfbW9kdWxlcy9xbG9iYmVyL2xpYi9xbG9iYmVyLmpzIiwid2VicGFjazovLy9jOi9qZW5raW5zL3dvcmtzcGFjZS9jYW1fc2J4X2FsbF9tYXN0ZXJfc2lnbmVkL3NieC1hbGwtc2lnbmVkL25vZGVfbW9kdWxlcy91dGlsL3V0aWwuanMiLCJ3ZWJwYWNrOi8vL2M6L2plbmtpbnMvd29ya3NwYWNlL2NhbV9zYnhfYWxsX21hc3Rlcl9zaWduZWQvc2J4LWFsbC1zaWduZWQvbm9kZV9tb2R1bGVzL3V0aWwvc3VwcG9ydC9pc0J1ZmZlckJyb3dzZXIuanMiLCJ3ZWJwYWNrOi8vL2M6L2plbmtpbnMvd29ya3NwYWNlL2NhbV9zYnhfYWxsX21hc3Rlcl9zaWduZWQvc2J4LWFsbC1zaWduZWQvbm9kZV9tb2R1bGVzL3V0aWwvbm9kZV9tb2R1bGVzL2luaGVyaXRzL2luaGVyaXRzX2Jyb3dzZXIuanMiLCJ3ZWJwYWNrOi8vL2M6L2plbmtpbnMvd29ya3NwYWNlL2NhbV9zYnhfYWxsX21hc3Rlcl9zaWduZWQvc2J4LWFsbC1zaWduZWQvbm9kZV9tb2R1bGVzL3N0cmVhbS1icm93c2VyaWZ5L2luZGV4LmpzIiwid2VicGFjazovLy9jOi9qZW5raW5zL3dvcmtzcGFjZS9jYW1fc2J4X2FsbF9tYXN0ZXJfc2lnbmVkL3NieC1hbGwtc2lnbmVkL25vZGVfbW9kdWxlcy9zdHJlYW0tYnJvd3NlcmlmeS9ub2RlX21vZHVsZXMvaXNhcnJheS9pbmRleC5qcyIsIndlYnBhY2s6Ly8vYzovamVua2lucy93b3Jrc3BhY2UvY2FtX3NieF9hbGxfbWFzdGVyX3NpZ25lZC9zYngtYWxsLXNpZ25lZC9ub2RlX21vZHVsZXMvYmFzZTY0LWpzL2luZGV4LmpzIiwid2VicGFjazovLy9jOi9qZW5raW5zL3dvcmtzcGFjZS9jYW1fc2J4X2FsbF9tYXN0ZXJfc2lnbmVkL3NieC1hbGwtc2lnbmVkL25vZGVfbW9kdWxlcy9pZWVlNzU0L2luZGV4LmpzIiwid2VicGFjazovLy9jOi9qZW5raW5zL3dvcmtzcGFjZS9jYW1fc2J4X2FsbF9tYXN0ZXJfc2lnbmVkL3NieC1hbGwtc2lnbmVkL25vZGVfbW9kdWxlcy9idWZmZXIvbm9kZV9tb2R1bGVzL2lzYXJyYXkvaW5kZXguanMiLCJ3ZWJwYWNrOi8vL3V0aWwgKGlnbm9yZWQpIiwid2VicGFjazovLy9jOi9qZW5raW5zL3dvcmtzcGFjZS9jYW1fc2J4X2FsbF9tYXN0ZXJfc2lnbmVkL3NieC1hbGwtc2lnbmVkL25vZGVfbW9kdWxlcy9zdHJlYW0tYnJvd3NlcmlmeS9ub2RlX21vZHVsZXMvcmVhZGFibGUtc3RyZWFtL2xpYi9pbnRlcm5hbC9zdHJlYW1zL0J1ZmZlckxpc3QuanMiLCJ3ZWJwYWNrOi8vL2M6L2plbmtpbnMvd29ya3NwYWNlL2NhbV9zYnhfYWxsX21hc3Rlcl9zaWduZWQvc2J4LWFsbC1zaWduZWQvbm9kZV9tb2R1bGVzL3RpbWVycy1icm93c2VyaWZ5L21haW4uanMiLCJ3ZWJwYWNrOi8vL2M6L2plbmtpbnMvd29ya3NwYWNlL2NhbV9zYnhfYWxsX21hc3Rlcl9zaWduZWQvc2J4LWFsbC1zaWduZWQvbm9kZV9tb2R1bGVzL3NldGltbWVkaWF0ZS9zZXRJbW1lZGlhdGUuanMiLCJ3ZWJwYWNrOi8vL2M6L2plbmtpbnMvd29ya3NwYWNlL2NhbV9zYnhfYWxsX21hc3Rlcl9zaWduZWQvc2J4LWFsbC1zaWduZWQvbm9kZV9tb2R1bGVzL3V0aWwtZGVwcmVjYXRlL2Jyb3dzZXIuanMiLCJ3ZWJwYWNrOi8vL2M6L2plbmtpbnMvd29ya3NwYWNlL2NhbV9zYnhfYWxsX21hc3Rlcl9zaWduZWQvc2J4LWFsbC1zaWduZWQvbm9kZV9tb2R1bGVzL3N0cmVhbS1icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9yZWFkYWJsZS1zdHJlYW0vbGliL19zdHJlYW1fcGFzc3Rocm91Z2guanMiLCJ3ZWJwYWNrOi8vL2M6L2plbmtpbnMvd29ya3NwYWNlL2NhbV9zYnhfYWxsX21hc3Rlcl9zaWduZWQvc2J4LWFsbC1zaWduZWQvbm9kZV9tb2R1bGVzL3N0cmVhbS1icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9yZWFkYWJsZS1zdHJlYW0vd3JpdGFibGUtYnJvd3Nlci5qcyIsIndlYnBhY2s6Ly8vYzovamVua2lucy93b3Jrc3BhY2UvY2FtX3NieF9hbGxfbWFzdGVyX3NpZ25lZC9zYngtYWxsLXNpZ25lZC9ub2RlX21vZHVsZXMvc3RyZWFtLWJyb3dzZXJpZnkvbm9kZV9tb2R1bGVzL3JlYWRhYmxlLXN0cmVhbS9kdXBsZXgtYnJvd3Nlci5qcyIsIndlYnBhY2s6Ly8vYzovamVua2lucy93b3Jrc3BhY2UvY2FtX3NieF9hbGxfbWFzdGVyX3NpZ25lZC9zYngtYWxsLXNpZ25lZC9ub2RlX21vZHVsZXMvc3RyZWFtLWJyb3dzZXJpZnkvbm9kZV9tb2R1bGVzL3JlYWRhYmxlLXN0cmVhbS90cmFuc2Zvcm0uanMiLCJ3ZWJwYWNrOi8vL2M6L2plbmtpbnMvd29ya3NwYWNlL2NhbV9zYnhfYWxsX21hc3Rlcl9zaWduZWQvc2J4LWFsbC1zaWduZWQvbm9kZV9tb2R1bGVzL3N0cmVhbS1icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9yZWFkYWJsZS1zdHJlYW0vcGFzc3Rocm91Z2guanMiLCJ3ZWJwYWNrOi8vLy4uL2xpYi9jb21tb24vdHlwZS11dGlscy50cyIsIndlYnBhY2s6Ly8vLi9jaHJvbWUtbmV3LXRhYi11cmxzLnRzIiwid2VicGFjazovLy8uL2V2ZW50LXBhZ2UtbGlzdGVuZXIudHMiLCJ3ZWJwYWNrOi8vLy4uL2xpYi9jb21tb24vdXNlci1hZ2VudC1wYXJzZXIudHMiLCJ3ZWJwYWNrOi8vLy4uL2xpYi9jb21tb24vcGFyc2VyLXV0aWxzLnRzIiwid2VicGFjazovLy8uL3dlYi1yZXF1ZXN0LWxpc3RlbmVyLnRzIiwid2VicGFjazovLy8uLi9saWIvY29tbW9uL2Jvb2xlYW4tdXRpbHMudHMiLCJ3ZWJwYWNrOi8vLy4uL2xpYi9jb21tb24vdW51c2VkLnRzIiwid2VicGFjazovLy8uL2J1aWx0aW4tbmF2LXNlcXVlbmNlLWRldGVjdG9yLXJ1bGVzLnRzIiwid2VicGFjazovLy8uL3dlYi1yZXF1ZXN0LWxpc3RlbmVyLWZpbHRlci50cyIsIndlYnBhY2s6Ly8vLi4vbGliL2NvbW1vbi90cnVzdGVkLXVybC10cmFja2VyLnRzIiwid2VicGFjazovLy8uLi9saWIvY29tbW9uL2hhbmRzaGFrZXIudHMiLCJ3ZWJwYWNrOi8vLy4uL2xpYi9jb21tb24vcmFuZ2UudHMiLCJ3ZWJwYWNrOi8vLy4uL2xpYi9jb21tb24vYnJhbmRpbmcudHMiLCJ3ZWJwYWNrOi8vLy4uL2xpYi9jb21tb24vcGxhY2VtZW50LW1hbmFnZXIudHMiLCJ3ZWJwYWNrOi8vLy4vYmxvY2tlZC1wYWdlLWNvbnRyb2xsZXIudHMiLCJ3ZWJwYWNrOi8vLy4vZG93bmxvYWQtdHJhY2tlci50cyIsIndlYnBhY2s6Ly8vLi9jb25maWctbm90aWZpZXIudHMiLCJ3ZWJwYWNrOi8vLy4vY29uZmlnLXVwZGF0ZXIudHMiLCJ3ZWJwYWNrOi8vLy4uL2xpYi9ob3N0L3NlcmlhbGl6ZWQtcGhpc2hpbmctc291cmNlLXNpdGVzLnRzIiwid2VicGFjazovLy8uL2Jyb3dzZXItYWN0aW9uLnRzIiwid2VicGFjazovLy8uL2V4dGVybmFsLWFwcC1saW5rLWNvbnRyb2xsZXIudHMiLCJ3ZWJwYWNrOi8vLy4uL2xpYi9jb21tb24vZmlsZS11cmwtdHJhY2tlci50cyIsIndlYnBhY2s6Ly8vLi9maWxlLWJsb2NrZXIudHMiLCJ3ZWJwYWNrOi8vLy4uL2xpYi9ob3N0L2Jsb2NrZWQtZmlsZS1wYWdlLW9wdGlvbnMudHMiLCJ3ZWJwYWNrOi8vLy4vZmVhdHVyZS1tYW5hZ2VyLnRzIiwid2VicGFjazovLy8uLi9saWIvY29tbW9uL2hlYXJ0YmVhdC50cyIsIndlYnBhY2s6Ly8vLi9vcHRpb25zLXBhZ2UtY29udHJvbGxlci50cyIsIndlYnBhY2s6Ly8vLi9uZXctdGFiLXBhZ2UtdXJsLXRyYWNrZXIudHMiLCJ3ZWJwYWNrOi8vLy4vaG9zdC1oZWxwZXItY2hhbm5lbC50cyIsIndlYnBhY2s6Ly8vLi9ob3N0LWhlbHBlci1jb25uZWN0aW9uLnRzIiwid2VicGFjazovLy8uL2xvZ2dlci50cyIsIndlYnBhY2s6Ly8vLi9jb250ZXh0LW1lbnVzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFD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LENBQUMsUUFBUSxFQUFFLENBQUM7SUFDNUIsQ0FBQztJQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxPQUFPLEtBQUssS0FBSyxRQUFRLENBQUMsQ0FBQyxDQUFDO1FBQ25DLE1BQU0sQ0FBQyxLQUFLLENBQUMsUUFBUSxFQUFFLENBQUM7SUFDNUIsQ0FBQztJQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxPQUFPLEtBQUssS0FBSyxRQUFRLENBQUMsQ0FBQyxDQUFDO1FBQ25DLE1BQU0sQ0FBQyxLQUFLLENBQUM7SUFDakIsQ0FBQztJQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxLQUFLLFlBQVksS0FBSyxDQUFDLENBQUMsQ0FBQztRQUNoQyxNQUFNLENBQUMsYUFBYSxDQUFDLEtBQUssRUFBRSxTQUFTLENBQUMsS0FBSyxDQUFDLEVBQUUsZUFBZSxDQUFDLENBQUM7SUFDbkUsQ0FBQztJQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxLQUFLLFlBQVksR0FBRyxDQUFDLENBQUMsQ0FBQztRQUM5QixNQUFNLENBQUMsV0FBVyxDQUFDLEtBQUssRUFBRSxTQUFTLENBQUMsS0FBSyxDQUFDLEVBQUUsZUFBZSxDQUFDLENBQUM7SUFDakUsQ0FBQztJQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxLQUFLLFlBQVksR0FBRyxDQUFDLENBQUMsQ0FBQztRQUM5QixNQUFNLENBQUMsV0FBVyxDQUFDLEtBQUssRUFBRSxTQUFTLENBQUMsS0FBSyxDQUFDLEVBQUUsZUFBZSxDQUFDLENBQUM7SUFDakUsQ0FBQztJQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxLQUFLLFlBQVksR0FBRyxDQUFDLENBQUMsQ0FBQztRQUM5QixNQUFNLENBQUMsdUJBQVcsQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUM5QixDQUFDO0lBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDM0IsTUFBTSxDQUFDLFFBQVEsQ0FBQyxLQUFL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LEdBQUcsSUFBSSxDQUFDO0lBQ2hCLEVBQUUsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxZQUFZLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ2pDLElBQUksR0FBRyx3QkFBVSxDQUFDLEdBQUcsQ0FBQyxRQUFRLEVBQUUsSUFBSSxDQUFDLENBQUM7SUFDMUMsQ0FBQztJQUNELEVBQUUsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxZQUFZLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ2pDLElBQUksR0FBRyx3QkFBVSxDQUFDLEdBQUcsQ0FBQyxRQUFRLEVBQUUsSUFBSSxDQUFDLENBQUM7SUFDMUMsQ0FBQztJQUNELEVBQUUsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxZQUFZLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ2pDLElBQUksR0FBRyx3QkFBVSxDQUFDLEdBQUcsQ0FBQyxRQUFRLEVBQUUsSUFBSSxDQUFDLENBQUM7SUFDMUMsQ0FBQztJQUNELEVBQUUsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzdCLElBQUksR0FBRyx3QkFBVSxDQUFDLEdBQUcsQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLENBQUM7SUFDdEMsQ0FBQztJQUNELEVBQUUsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzdCLElBQUksR0FBRyx3QkFBVSxDQUFDLEdBQUcsQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLENBQUM7SUFDdEMsQ0FBQztJQUNELEVBQUUsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxZQUFZLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ2pDLElBQUksR0FBRyx3QkFBVSxDQUFDLEdBQUcsQ0FBQyxRQUFRLEVBQUUsSUFBSSxDQUFDLENBQUM7SUFDMUMsQ0FBQztJQUNELEVBQUUsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxZQUFZLENBQUMsTUFBTSxDQUFDLENBQUMs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Ozs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLHNCQUFzQjtBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEscUNBQXFDOztBQUVyQztBQUNBO0FBQ0E7O0FBRUEsMkJBQTJCO0FBQzNCO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixVQUFVOzs7Ozs7O0FDdkx0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNB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O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLGVBQWUsU0FBUztBQUN4QjtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsR0FBRztBQUNILG9CQUFvQixTQUFTO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOzs7Ozs7O0FDN1NBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7OztBQ05BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTCxHQUFHO0FBQ0gsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGlDQUFpQzs7QUFFakM7O0FBRUEsMkNBQTJDO0FBQzNDO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtREFBbUQ7QUFDbkQ7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUEsb0RBQW9EO0FBQ3BEO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FB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QUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJFQUEyRSw2RUFBNkU7QUFDeEo7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGtHQUFrRztBQUNsRyxPQUFPO0FBQ1A7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsNEZBQTRGO0FBQzVGLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLGdEQUFnRDs7QUFFaEQ7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEVBQTRFO0FBQzVFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2REFBNkQ7QUFDN0Q7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLHNDQUFzQzs7QUFFdEM7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJEQUEyRDtBQUMzRDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQSwrQ0FBK0M7O0FBRS9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLG9CQUFvQjs7QUFFcEI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxtQkFBbUIsU0FBUztBQUM1QjtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQSw0RUFBNEU7O0FBRTVFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTs7QUFFQTtBQUNBLGlCQUFpQix5QkFBeUI7QUFDMUM7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsbURBQW1EO0FBQ25EO0FBQ0EsbURBQW1ELGlFQUFpRTtBQUNwSDtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQztBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBLHVDQUF1QztBQUN2QyxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVDQUF1QztBQUN2QyxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsZ0NBQWdDLE9BQU87QUFDdkM7QUFDQTtBQUNBOztBQUVBO0FBQ0EsZ0NBQWdDLE9BQU87QUFDdkM7QUFDQTtBQUNBO0FBQ0EsQzs7Ozs7OztBQzkrQkE7Ozs7Ozs7O0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsbURBQW1EO0FBQ3hFO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsVUFBVTtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsWUFBWTtBQUM3QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsMEJBQTBCO0FBQzFCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBLHVDQUF1QyxTQUFTO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsaUJBQWlCO0FBQ2hDO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsYUFBYSxpQkFBaUI7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLFNBQVM7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixTQUFTO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixTQUFTO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0RBQWdELEVBQUU7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUEsaUJBQWlCLFNBQVM7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlDQUF5QztBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGVBQWU7QUFDdkM7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0Esd0JBQXdCLFFBQVE7QUFDaEM7QUFDQSxxQkFBcUIsZUFBZTtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsWUFBWTtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEscUJBQXFCLFNBQVM7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLHFCQUFxQixTQUFTO0FBQzlCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLHFCQUFxQixTQUFTO0FBQzlCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixrQkFBa0I7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLG1CQUFtQixjQUFjO0FBQ2pDO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSx1REFBdUQsT0FBTztBQUM5RDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsdURBQXVELE9BQU87QUFDOUQ7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsa0JBQWtCO0FBQ2xCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EscUJBQXFCLFFBQVE7QUFDN0I7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLGVBQWUsU0FBUztBQUN4QjtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLG1CQUFtQixTQUFTO0FBQzVCO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLGlCQUFpQjtBQUNoQztBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGlCQUFpQixZQUFZO0FBQzdCOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxpQkFBaUIsZ0JBQWdCO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLGdCQUFnQjtBQUNqQzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxpQkFBaUIsWUFBWTtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7Ozs7Ozs7O0FDNXZEQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxFOzs7Ozs7O0FDdkVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEI7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsc0NBQXNDLHNDQUFzQztBQUN6RztBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQjtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsQzs7Ozs7OztBQy9RQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMENBQTBDLFlBQVk7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVB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O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUI7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0EsUUFBUSxPQUFPO0FBQ2YsSUFBSSxPQUFPOztBQUVYLElBQUksT0FBTzs7QUFFWCxJQUFJLE9BQU87O0FBRVgsSUFBSSxRQUFRO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxlQUFlLGtCQUFrQjtBQUNqQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7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QUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBLFFBQVEsT0FBTztBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUEsUUFBUSxJQUFJO0FBQ1osUUFBUSxJQUFJO0FBQ1osU0FBUyxRQUFRO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSxRQUFRLE9BQU87QUFDZixTQUFTLElBQUk7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQSxRQUFRLE9BQU87QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLFNBQVMsUUFBUTtBQUNqQjtBQUNBO0FBQ0E7QUFDQSxnQjtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLFFBQVEsT0FBTztBQUNmLFNBQVMsUUFBUTtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUEsUUFBUSxRQUFRO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyxtQkFBbUI7QUFDbkQ7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsY0FBYzs7QUFFM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQSxRQUFRLFFBQVE7QUFDaEI7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLG1CQUFtQjtBQUNuRDtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7QUNqMUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsc0JBQXNCO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILHVCQUF1QixTQUFTO0FBQ2hDO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxPQUFPO0FBQ2xCLFdBQVcsT0FBTztBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLDRDQUE0QyxLQUFLOztBQUVqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7O0FBRUE7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0EsbUNBQW1DLE9BQU87QUFDMUM7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7O0FBR0E7QUFDQTtBQUNBLHlEQUF5RDtBQUN6RDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWCxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsU0FBUztBQUNwQjtBQUNBLFdBQVcsU0FBUztBQUNwQjtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7Ozs7Ozs7O0FDemtCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQzs7Ozs7O0FDTEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7QUN0QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOzs7O0FBSUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWU7QUFDZjtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7Ozs7OztBQzlIQSxpQkFBaUI7O0FBRWpCO0FBQ0E7QUFDQTs7Ozs7Ozs7QUNKQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0Esa0NBQWtDLFNBQVM7QUFDM0M7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBLGFBQWEsT0FBTztBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsU0FBUztBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsMENBQTBDLFVBQVU7QUFDcEQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7Ozs7Ozs7QUNqSEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsV0FBVzs7QUFFbkI7QUFDQTtBQUNBO0FBQ0EsUUFBUSxXQUFXOztBQUVuQjtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsUUFBUSxXQUFXOztBQUVuQjtBQUNBO0FBQ0EsUUFBUSxVQUFVOztBQUVsQjtBQUNBOzs7Ozs7O0FDbkZBLGlCQUFpQjs7QUFFakI7QUFDQTtBQUNBOzs7Ozs7O0FDSkEsZTs7Ozs7OztBQ0FBOztBQUVBOztBQUVBLGlEQUFpRCwwQ0FBMEMsMERBQTBELEVBQUU7O0FBRXZKO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGlCQUFpQjtBQUNqQixnREFBZ0Q7QUFDaEQ7QUFDQTtBQUNBOztBQUVBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLHdEQUF3RDtBQUN4RDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsQ0FBQyxHOzs7Ozs7QUN6RUQ7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7OztBQ3BEQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSx1QkFBdUI7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsaUJBQWlCO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSwwQ0FBMEMsc0JBQXNCLEVBQUU7QUFDbEU7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUM7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLFVBQVU7QUFDVjtBQUNBOztBQUVBLEtBQUs7QUFDTDtBQUNBOztBQUVBLEtBQUs7QUFDTDtBQUNBOztBQUVBLEtBQUs7QUFDTDtBQUNBOztBQUVBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLENBQUM7Ozs7Ozs7OztBQ3hMRDtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxTQUFTO0FBQ3BCLFdBQVcsT0FBTztBQUNsQixhQUFhLFNBQVM7QUFDdEI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsT0FBTztBQUNsQixhQUFhO0FBQ2I7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7OztBQ2xFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEU7Ozs7OztBQzlDQTs7Ozs7OztBQ0FBOzs7Ozs7O0FDQUE7Ozs7Ozs7QUNBQTs7Ozs7Ozs7OztBQ0FBLGtCQUF5QixLQUFVO0lBQy9CLE1BQU0sQ0FBQyxLQUFLLFlBQVksTUFBTSxDQUFDO0FBQ25DLENBQUM7QUFGRCw0QkFFQztBQUVELG1CQUEwQixLQUFVO0lBQ2hDLE1BQU0sQ0FBQyxPQUFPLEtBQUssS0FBSyxTQUFTLENBQUM7QUFDdEMsQ0FBQztBQUZELDhCQUVDO0FBRUQsa0JBQXlCLEtBQVU7SUFDL0IsTUFBTSxDQUFDLE9BQU8sS0FBSyxLQUFLLFFBQVEsQ0FBQztBQUNyQyxDQUFDO0FBRkQsNEJBRUM7QUFFRCxpQkFBd0IsS0FBVTtJQUM5QixNQUFNLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQztBQUNoQyxDQUFDO0FBRkQsMEJBRUM7Ozs7Ozs7Ozs7QUNkWSw0QkFBb0IsR0FBRztJQUNoQyxvQ0FBb0M7SUFDcEMsdUNBQXVDO0lBQ3ZDLHVDQUF1QztJQUN2Qyx1Q0FBdUM7SUFDdkMsdUNBQXVDO0lBQ3ZDLHVDQUF1QztJQUN2Qyx1Q0FBdUM7SUFDdkMsdUNBQXVDO0lBQ3ZDLHVDQUF1QztJQUN2Qyx1Q0FBdUM7SUFDdkMsdUNBQXVDO0lBQ3ZDLHVDQUF1QztJQUN2Qyx1Q0FBdUM7SUFDdkMsdUNBQXVDO0lBQ3ZDLHVDQUF1QztJQUN2Qyx1Q0FBdUM7SUFDdkMsdUNBQXVDO0lBQ3ZDLHVDQUF1QztJQUN2Qyx1Q0FBdUM7SUFDdkMsdUNBQXVDO0lBQ3ZDLHVDQUF1QztJQUN2Qyx1Q0FBdUM7SUFDdkMsdUNBQXVDO0lBQ3ZDLHVDQUF1QztJQUN2Qyx1Q0FBdUM7SUFDdkMsd0NBQXdDO0lBQ3hDLHVDQUF1QztJQUN2Qyx1Q0FBdUM7SUFDdkMsdUNBQXVDO0lBQ3ZDLHVDQUF1QztJQUN2Qyx1Q0FBdUM7SUFDdkMsdUNBQXVDO0lBQ3ZDLHVDQUF1QztJQUN2Qyx1Q0FBdUM7SUFDdkMsdUNBQXVDO0lBQ3ZDLDBDQUEwQztJQUMxQywwQ0FBMEM7SUFDMUMsMENBQTBDO0lBQzFDLDBDQUEwQztJQUMxQywwQ0FBMEM7SUFDMUMsMENBQTBDO0lBQzFDLDBDQUEwQztJQUMxQywwQ0FBMEM7SUFDMUMsMENBQTBDO0lBQzFDLDBDQUEwQztJQUMxQywwQ0FBMEM7SUFDMUMsMENBQTBDO0lBQzFDLDBDQUEwQztJQUMxQywwQ0FBMEM7SUFDMUMsMENBQTBDO0lBQzFDLDBDQUEwQztJQUMxQywwQ0FBMEM7SUFDMUMsMENBQTBDO0lBQzFDLDBDQUEwQztJQUMxQywwQ0FBMEM7SUFDMUMsMENBQTBDO0lBQzFDLDBDQUEwQztJQUMxQywwQ0FBMEM7SUFDMUMsMENBQTBDO0lBQzFDLDBDQUEwQztJQUMxQywwQ0FBMEM7SUFDMUMsMENBQTBDO0lBQzFDLDBDQUEwQztJQUMxQywwQ0FBMEM7SUFDMUMsdUNBQXVDO0lBQ3ZDLDJDQUEyQztJQUMzQywyQ0FBMkM7SUFDM0MsMkNBQTJDO0lBQzNDLDJDQUEyQztJQUMzQywyQ0FBMkM7SUFDM0MsMkNBQTJDO0lBQzNDLDJDQUEyQztJQUMzQywyQ0FBMkM7SUFDM0MsMkNBQTJDO0lBQzNDLDJDQUEyQztJQUMzQywyQ0FBMkM7SUFDM0MsMkNBQTJDO0lBQzNDLDJDQUEyQztJQUMzQywyQ0FBMkM7SUFDM0MsMkNBQTJDO0lBQzNDLDJDQUEyQztJQUMzQywyQ0FBMkM7SUFDM0MsMkNBQTJDO0lBQzNDLDJDQUEyQztJQUMzQywyQ0FBMkM7SUFDM0MsMkNBQTJDO0lBQzNDLDJDQUEyQztJQUMzQywyQ0FBMkM7SUFDM0MsMkNBQTJDO0lBQzNDLDJDQUEyQztJQUMzQywyQ0FBMkM7SUFDM0MsMkNBQTJDO0lBQzNDLDJDQUEyQztJQUMzQywyQ0FBMkM7SUFDM0MsMkNBQTJDO0lBQzNDLDJDQUEyQztJQUMzQywyQ0FBMkM7SUFDM0MsMkNBQTJDO0lBQzNDLDJDQUEyQztJQUMzQywyQ0FBMkM7SUFDM0MsMkNBQTJDO0lBQzNDLDJDQUEyQztJQUMzQywyQ0FBMkM7SUFDM0MsMkNBQTJDO0lBQzNDLDJDQUEyQztJQUMzQywyQ0FBMkM7SUFDM0MsMkNBQTJDO0lBQzNDLDJDQUEyQztJQUMzQywyQ0FBMkM7SUFDM0MsMkNBQTJDO0lBQzNDLDJDQUEyQztJQUMzQywyQ0FBMkM7SUFDM0MsMkNBQTJDO0lBQzNDLDJDQUEyQztJQUMzQywyQ0FBMkM7SUFDM0MsMkNBQTJDO0lBQzNDLDJDQUEyQztJQUMzQywyQ0FBMkM7SUFDM0MsMkNBQTJDO0lBQzNDLDJDQUEyQztJQUMzQywyQ0FBMkM7SUFDM0MsMkNBQTJDO0lBQzNDLDJDQUEyQztJQUMzQywyQ0FBMkM7SUFDM0MsMkNBQTJDO0lBQzNDLDJDQUEyQztJQUMzQywyQ0FBMkM7SUFDM0MsMkNBQTJDO0lBQzNDLDJDQUEyQztJQUMzQywyQ0FBMkM7SUFDM0MsMkNBQTJDO0lBQzNDLDJDQUEyQztJQUMzQywyQ0FBMkM7SUFDM0MsMkNBQTJDO0lBQzNDLDJDQUEyQztJQUMzQywyQ0FBMkM7SUFDM0MsMkNBQTJDO0lBQzNDLDJDQUEyQztJQUMzQywyQ0FBMkM7SUFDM0MsMkNBQTJDO0lBQzNDLDJDQUEyQztJQUMzQywyQ0FBMkM7SUFDM0MsMkNBQTJDO0lBQzNDLDJDQUEyQztJQUMzQywyQ0FBMkM7SUFDM0MsMkNBQTJDO0lBQzNDLHdDQUF3QztJQUN4Qyx1Q0FBdUM7SUFDdkMsdUNBQXVDO0lBQ3ZDLHVDQUF1QztJQUN2Qyx1Q0FBdUM7SUFDdkMsdUNBQXVDO0lBQ3ZDLHVDQUF1QztJQUN2Qyx1Q0FBdUM7SUFDdkMsdUNBQXVDO0lBQ3ZDLHVDQUF1QztJQUN2Qyx1Q0FBdUM7SUFDdkMsdUNBQXVDO0lBQ3ZDLHVDQUF1QztJQUN2Qyx1Q0FBdUM7SUFDdkMsdUNBQXVDO0lBQ3ZDLHVDQUF1QztJQUN2Qyx1Q0FBdUM7SUFDdkMsdUNBQXVDO0lBQ3ZDLHVDQUF1QztJQUN2Qyx1Q0FBdUM7SUFDdkMsdUNBQXVDO0lBQ3ZDLHVDQUF1QztJQUN2Qyx1Q0FBdUM7SUFDdkMsdUNBQXVDO0lBQ3ZDLHVDQUF1QztJQUN2Qyx1Q0FBdUM7SUFDdkMsdUNBQXVDO0lBQ3ZDLHVDQUF1QztJQUN2Qyx1Q0FBdUM7SUFDdkMsdUNBQXVDO0lBQ3ZDLHVDQUF1QztJQUN2Qyx1Q0FBdUM7SUFDdkMsdUNBQXVDO0lBQ3ZDLHVDQUF1QztJQUN2Qyx1Q0FBdUM7SUFDdkMseUNBQXlDO0lBQ3pDLHVDQUF1QztJQUN2Qyx1Q0FBdUM7SUFDdkMsdUNBQXVDO0lBQ3ZDLDBDQUEwQztJQUMxQyx1Q0FBdUM7SUFDdkMsdUNBQXVDO0lBQ3ZDLHVDQUF1QztJQUN2Qyx5Q0FBeUM7SUFDekMsdUNBQXVDO0lBQ3ZDLHVDQUF1QztJQUN2Qyx1Q0FBdUM7SUFDdkMsdUNBQXVDO0lBQ3ZDLHVDQUF1QztJQUN2Qyx1Q0FBdUM7SUFDdkMsdUNBQXVDO0lBQ3ZDLHVDQUF1QztJQUN2Qyx1Q0FBdUM7SUFDdkMsdUNBQXVDO0lBQ3ZDLHVDQUF1QztJQUN2Qyx1Q0FBdUM7SUFDdkMsdUNBQXVDO0lBQ3ZDLHVDQUF1QztJQUN2Qyx1Q0FBdUM7SUFDdkMsdUNBQXVDO0lBQ3ZDLHVDQUF1QztJQUN2Qyx1Q0FBdUM7SUFDdkMsdUNBQXVDO0lBQ3ZDLHVDQUF1QztJQUN2Qyx1Q0FBdUM7SUFDdkMsdUNBQXVDO0lBQ3ZDLHVDQUF1QztJQUN2Qyx1Q0FBdUM7SUFDdkMsdUNBQXVDO0lBQ3ZDLHVDQUF1QztJQUN2QywwQ0FBMEM7SUFDMUMsdUNBQXVDO0lBQ3ZDLHdDQUF3QztJQUN4Qyx1Q0FBdUM7SUFDdkMsdUNBQXVDO0lBQ3ZDLHVDQUF1QztJQUN2Qyx1Q0FBdUM7SUFDdkMsdUNBQXVDO0lBQ3ZDLDJDQUEyQztJQUMzQyx3Q0FBd0M7SUFDeEMsdUNBQXVDO0lBQ3ZDLHVDQUF1QztJQUN2Qyx1Q0FBdUM7SUFDdkMsdUNBQXVDO0lBQ3ZDLHVDQUF1QztJQUN2Qyx1Q0FBdUM7SUFDdkMsdUNBQXVDO0lBQ3ZDLHVDQUF1QztJQUN2Qyx1Q0FBdUM7SUFDdkMsdUNBQXVDO0lBQ3ZDLHVDQUF1QztJQUN2Qyx1Q0FBdUM7SUFDdkMsdUNBQXVDO0lBQ3ZDLHVDQUF1QztJQUN2Qyx1Q0FBdUM7SUFDdkMsdUNBQXVDO0lBQ3ZDLHVDQUF1QztJQUN2Qyx1Q0FBdUM7SUFDdkMsdUNBQXVDO0lB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RSxDQUFDLENBQUMsWUFBSSxDQUFDLElBQUksQ0FBQyxlQUFlLENBQUMsSUFBSSxZQUFJLENBQUMsSUFBSSxDQUFDLGdCQUFnQixDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQzVELGNBQVEsQ0FBQyxJQUFJLEtBQUssQ0FBQyxzRUFBc0UsQ0FBQyxDQUFDLENBQUM7WUFDNUYsTUFBTSxDQUFDO1FBQ1gsQ0FBQztRQUVELEVBQUUsQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLFVBQVUsS0FBSyxjQUFjLENBQUMsVUFBVSxDQUFDLElBQUksUUFBUSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUM7WUFDMUUsU0FBRyxDQUFDLDhDQUE4QyxRQUFRLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQztZQUN0RSxJQUFJLEdBQUcsR0FBRyxvQkFBUSxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsQ0FBQztZQUNyQyxFQUFFLENBQUMsQ0FBQyxZQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUNaLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxpQ0FBaUMsSUFBSSxJQUFJLENBQUMsZ0JBQWdCLENBQUMsWUFBWSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztvQkFDcEYsU0FBRyxDQUFDLHVDQUF1QyxRQUFRLENBQUMsT0FBTywwQ0FBMEM7MEJBQy9GLGlFQUFpRSxDQUFDLENBQUM7b0JBQ3pFLE1BQU0sQ0FBQztnQkFDWCxDQUFDO2dCQUNELElBQUksQ0FBQyxlQUFlLENBQUMsYUFBYSxDQUFDLEdBQUcsRUFBRSxRQUFPLENBQUMsQ0FBQyxDQUFDO1lBQ3RELENBQUM7UUFDTCxDQUFDO0lBQ0wsQ0FBQztDQUdKO0FBcEVELGdEQW9FQyIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7XG4gXHRcdFx0XHRjb25maWd1cmFibGU6IGZhbHNlLFxuIFx0XHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcbiBcdFx0XHRcdGdldDogZ2V0dGVyXG4gXHRcdFx0fSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gNjUpO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2svYm9vdHN0cmFwIGYzNTgzYmNiZTFhNjRlZmI4NTJmIiwiLy8gQ29weXJpZ2h0IChjKSAyMDE4IEJyb21pdW0sIEluYy5cclxuLy8gVXNlIG9mIHRoZSBCcm9taXVtLCBJbmMuIHNvZnR3YXJlIHJlcXVpcmVzIGEgbGljZW5zZSBhZ3JlZW1lbnQgd2l0aCBCcm9taXVtLCBJbmMuIG9yIGFuIGF1dGhvcml6ZWQgcmVzZWxsZXIuXHJcblxyXG5leHBvcnQgdHlwZSBOb25lID0gdW5kZWZpbmVkO1xyXG5leHBvcnQgdHlwZSBTb21lPFQ+ID0gVDtcclxuZXhwb3J0IHR5cGUgTWF5YmU8VD4gPSBTb21lPFQ+IHwgTm9uZTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBzb21lPFQ+KHZhbHVlOiBNYXliZTxUPik6IHZhbHVlIGlzIFQge1xyXG4gICAgcmV0dXJuIHZhbHVlICE9PSB1bmRlZmluZWQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBub25lPFQ+KHZhbHVlOiBNYXliZTxUPik6IHZhbHVlIGlzIHVuZGVmaW5lZCB7XHJcbiAgICByZXR1cm4gdmFsdWUgPT09IHVuZGVmaW5lZDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHNlcmlhbGl6ZU1heWJlPFQ+KHZhbHVlOiBNYXliZTxUPik6IFR8bnVsbCB7XHJcbiAgICBpZiAoc29tZSh2YWx1ZSkpIHtcclxuICAgICAgICByZXR1cm4gdmFsdWU7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZGVzZXJpYWxpemVNYXliZTxUPih2YWx1ZTogVHxudWxsKTogTWF5YmU8VD4ge1xyXG4gICAgaWYgKHZhbHVlID09PSBudWxsKSB7XHJcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaXNFcXVhbDxUPihhOiBULCBiOiBUKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gYSA9PT0gYjtcclxufVxyXG5cclxuZXhwb3J0IGVudW0gTWF5YmVDb21wYXJlT3B0aW9ucyB7XHJcbiAgICBub25lID0gMHgwLFxyXG4gICAgY29tcGFyZVVuZGVmaW5lZCA9IDB4MSxcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIG1heWJlQ29tcGFyZTxUPihhOiBNYXliZTxUPiwgYjogTWF5YmU8VD4sIGNvbXBhcmU6IChhOiBULCBiOiBUKSA9PiBib29sZWFuID0gaXNFcXVhbCwgb3B0aW9uczogTWF5YmVDb21wYXJlT3B0aW9ucyA9IE1heWJlQ29tcGFyZU9wdGlvbnMubm9uZSkge1xyXG4gICAgaWYgKHNvbWUoYSkgJiYgc29tZShiKSkge1xyXG4gICAgICAgIHJldHVybiBjb21wYXJlKGEsIGIpO1xyXG4gICAgfVxyXG4gICAgaWYgKG9wdGlvbnMgJiBNYXliZUNvbXBhcmVPcHRpb25zLmNvbXBhcmVVbmRlZmluZWQpIHtcclxuICAgICAgICByZXR1cm4gbm9uZShhKSAmJiBub25lKGIpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG59XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuLi9saWIvY29tbW9uL21heWJlLnRzIiwiLy8gQ29weXJpZ2h0IChjKSAyMDE4IEJyb21pdW0sIEluYy5cclxuLy8gVXNlIG9mIHRoZSBCcm9taXVtLCBJbmMuIHNvZnR3YXJlIHJlcXVpcmVzIGEgbGljZW5zZSBhZ3JlZW1lbnQgd2l0aCBCcm9taXVtLCBJbmMuIG9yIGFuIGF1dGhvcml6ZWQgcmVzZWxsZXIuXHJcblxyXG5pbXBvcnQgeyBjdXJyZW50RGF0ZVRpbWVTdHJpbmcgfSBmcm9tIFwiLi9kYXRlLXV0aWxzXCI7XHJcbmltcG9ydCB7IHRvU3RyaW5nIH0gZnJvbSBcIi4vc3RyaW5nLXV0aWxzXCI7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElMb2dTaW5rIHtcclxuICAgIGxvZyhtZXNzYWdlOiBzdHJpbmcpOiB2b2lkO1xyXG4gICAgbG9nRXJyb3IobWVzc2FnZTogc3RyaW5nKTogdm9pZFxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgQ29uc29sZUxvZ1NpbmsgaW1wbGVtZW50cyBJTG9nU2luayB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHt9XHJcblxyXG4gICAgbG9nKG1lc3NhZ2U6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKG1lc3NhZ2UpO1xyXG4gICAgfVxyXG5cclxuICAgIGxvZ0Vycm9yKG1lc3NhZ2U6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IobWVzc2FnZSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmNsYXNzIExvZ2dlciB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB0aGlzLmFkZFNpbmsobmV3IENvbnNvbGVMb2dTaW5rKCkpO1xyXG4gICAgfVxyXG5cclxuICAgIGFkZFNpbmsoc2luazogSUxvZ1NpbmspIHtcclxuICAgICAgICB0aGlzLnNpbmtzLnB1c2goc2luayk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBmb3JtYXRNZXNzYWdlKG1lc3NhZ2U6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIGAke2N1cnJlbnREYXRlVGltZVN0cmluZygpfTogJHttZXNzYWdlfWA7XHJcbiAgICB9XHJcblxyXG4gICAgbG9nKG1lc3NhZ2U6IHN0cmluZykge1xyXG4gICAgICAgIGNvbnN0IGZvcm1hdHRlZE1lc3NhZ2UgPSB0aGlzLmZvcm1hdE1lc3NhZ2UobWVzc2FnZSk7XHJcbiAgICAgICAgZm9yIChjb25zdCBzaW5rIG9mIHRoaXMuc2lua3MpIHtcclxuICAgICAgICAgICAgc2luay5sb2coZm9ybWF0dGVkTWVzc2FnZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGxvZ0Vycm9yKGVycm9yOiBFcnJvcikge1xyXG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBlcnJvclRvU3RyaW5nKGVycm9yKTtcclxuICAgICAgICBjb25zdCBmb3JtYXR0ZWRNZXNzYWdlID0gdGhpcy5mb3JtYXRNZXNzYWdlKG1lc3NhZ2UpO1xyXG4gICAgICAgIGZvciAoY29uc3Qgc2luayBvZiB0aGlzLnNpbmtzKSB7XHJcbiAgICAgICAgICAgIHNpbmsubG9nRXJyb3IoZm9ybWF0dGVkTWVzc2FnZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2lua3M6IElMb2dTaW5rW10gPSBbXTtcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IGxvZ2dlciA9IG5ldyBMb2dnZXIoKTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBlcnJvclRvU3RyaW5nKGVycm9yOiBFcnJvcik6IHN0cmluZyB7XHJcbiAgICByZXR1cm4gdG9TdHJpbmcoeyBuYW1lOiBlcnJvci5uYW1lLCBtZXNzYWdlOiBlcnJvci5tZXNzYWdlIH0pO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gbG9nKG1lc3NhZ2U6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgbG9nZ2VyLmxvZyhtZXNzYWdlKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGxvZ0Vycm9yKGVycm9yOiBFcnJvcik6IHZvaWQge1xyXG4gICAgbG9nZ2VyLmxvZ0Vycm9yKGVycm9yKTtcclxufVxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuLi9saWIvY29tbW9uL2xvZy50cyIsIi8vIENvcHlyaWdodCAoYykgMjAxOCBCcm9taXVtLCBJbmMuXHJcbi8vIFVzZSBvZiB0aGUgQnJvbWl1bSwgSW5jLiBzb2Z0d2FyZSByZXF1aXJlcyBhIGxpY2Vuc2UgYWdyZWVtZW50IHdpdGggQnJvbWl1bSwgSW5jLiBvciBhbiBhdXRob3JpemVkIHJlc2VsbGVyLlxyXG5cclxuaW1wb3J0IHsgaXNJblJhbmdlIH0gZnJvbSBcIi4vbnVtYmVyLXV0aWxzXCI7XHJcbmltcG9ydCB7IGhhcyB9IGZyb20gXCIuL2FycmF5LXV0aWxzXCI7XHJcblxyXG5leHBvcnQgZW51bSBNZXNzYWdlVHlwZSB7XHJcbiAgICBoYW5kc2hha2VWMSxcclxuICAgIGxhdW5jaEJyb3dzZXJSZXF1ZXN0VjEsXHJcbiAgICBsYXVuY2hCcm93c2VyUmVzcG9uc2VWMSxcclxuICAgIHBhZ2VFdmVudFYxLFxyXG4gICAgY29uZmlnUmVxdWVzdFYxLFxyXG4gICAgY29uZmlnQ2hhbmdlZFYxLFxyXG4gICAgdHJ1c3RVcmxWMSxcclxuICAgIGRvd25sb2FkQ29tcGxldGVWMSxcclxuICAgIGxvZ01lc3NhZ2VWMSxcclxuICAgIGFkZFVzZXJUcnVzdGVkT3JpZ2luVjEsXHJcbiAgICBhZGRVc2VyVW50cnVzdGVkT3JpZ2luVjEsXHJcbiAgICBoZWxwZXJFcnJvclYxLFxyXG4gICAgZG9ybWFudFN0YXRlQ2hhbmdlZFYxLFxyXG4gICAgZXh0ZW5zaW9uUmVhZHlWMSxcclxuICAgIGV4dGVybmFsQXBwTGlua1JlcXVlc3RWMSxcclxuICAgIGV4dGVybmFsQXBwTGlua1Jlc3BvbnNlVjEsXHJcbiAgICBpc0ZpbGVVUkxUcnVzdGVkUmVxdWVzdFYxLFxyXG4gICAgaXNGaWxlVVJMVHJ1c3RlZFJlc3BvbnNlVjEsXHJcbiAgICBibG9ja2VkRmlsZVJlcXVlc3RWMSxcclxuICAgIGJsb2NrZWRGaWxlUmVzcG9uc2VWMSxcclxuICAgIHBvcHVwRGF0YVJlcXVlc3RWMSxcclxuICAgIHBvcHVwRGF0YVJlc3BvbnNlVjEsXHJcbiAgICBjbGVhclJlbWVtYmVyZWREZWNpc2lvbnNWMSxcclxuICAgIGJsb2NrZWRQYWdlU3RyaW5nc1JlcXVlc3RWMSxcclxuICAgIGJsb2NrZWRQYWdlU3RyaW5nc1Jlc3BvbnNlVjEsXHJcbiAgICBoZWFydGJlYXRWMSxcclxuICAgIGVuYWJsZWRGZWF0dXJlc1JlcXVlc3RWMixcclxuICAgIGVuYWJsZWRGZWF0dXJlc1Jlc3BvbnNlVjIsXHJcbiAgICBjbGVhclJlbWVtYmVyZWRPcmlnaW5WMyxcclxuICAgIG9wdGlvbnNEYXRhUmVxdWVzdFYzLFxyXG4gICAgb3B0aW9uc0RhdGFSZXNwb25zZVYzLFxyXG4gICAgY29uZmlnQ2hhbmdlZFYzLFxyXG4gICAgcmVwdXRhdGlvbkNoYW5nZWRWMyxcclxuICAgIGNvbmZpZ0NoYW5nZWRWNCxcclxuICAgIGJsb2NrZWRQYWdlRGF0YVJlcXVlc3RWNCxcclxuICAgIGJsb2NrZWRQYWdlRGF0YVJlc3BvbnNlVjQsXHJcbiAgICBjb25maWdDaGFuZ2VkVjUsXHJcbiAgICBwb3B1cERhdGFSZXNwb25zZVY1LFxyXG4gICAgYmxvY2tlZFBhZ2VEYXRhUmVzcG9uc2VWNixcclxuICAgIHRydXN0VXJsVjYsXHJcbiAgICBjb25maWdDaGFuZ2VkVjcsXHJcbiAgICB0cnVzdFVybFY4LFxyXG4gICAgZG9udEFza0FnYWluVjgsXHJcbiAgICBjb25maWdDaGFuZ2VkVjgsXHJcbiAgICBwb3B1cERhdGFSZXNwb25zZVY5LFxyXG4gICAgZG9udEFza0FnYWluVjksXHJcbiAgICBjb25maWdDaGFuZ2VkVjksXHJcbiAgICBzdG9wSGVscGVyVjEwLFxyXG4gICAgZWRnZUFja1YxMCxcclxuICAgIGVuZE9mU3RyZWFtVjEwLFxyXG4gICAgaGVhcnRiZWF0VjEwLFxyXG4gICAgcG9wdXBEYXRhUmVzcG9uc2VWMTEsXHJcbiAgICBjb25maWdDaGFuZ2VkVjExLFxyXG4gICAgY29uZmlnQ2hhbmdlZFYxMixcclxuICAgIG1pbk1lc3NhZ2VUeXBlID0gaGFuZHNoYWtlVjEsXHJcbiAgICBtYXhNZXNzYWdlVHlwZSA9IGNvbmZpZ0NoYW5nZWRWMTJcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGlzTWVzc2FnZVR5cGUodHlwZTogTWVzc2FnZVR5cGUpOiBib29sZWFuIHtcclxuICAgIHJldHVybiBpc0luUmFuZ2UodHlwZSwgTWVzc2FnZVR5cGUubWluTWVzc2FnZVR5cGUsIE1lc3NhZ2VUeXBlLm1heE1lc3NhZ2VUeXBlKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGlzRnJlcXVlbnRseVNlbnRNZXNzYWdlVHlwZSh0eXBlOiBNZXNzYWdlVHlwZSk6IGJvb2xlYW4ge1xyXG4gICAgY29uc3QgZnJlcXVlbnRseVNlbnRNZXNzYWdlVHlwZXMgPSBbXHJcbiAgICAgICAgTWVzc2FnZVR5cGUubG9nTWVzc2FnZVYxLFxyXG4gICAgICAgIE1lc3NhZ2VUeXBlLnBhZ2VFdmVudFYxLFxyXG4gICAgICAgIE1lc3NhZ2VUeXBlLmhlYXJ0YmVhdFYxLFxyXG4gICAgICAgIE1lc3NhZ2VUeXBlLmVkZ2VBY2tWMTBcclxuICAgIF07XHJcbiAgICByZXR1cm4gaGFzKGZyZXF1ZW50bHlTZW50TWVzc2FnZVR5cGVzLCB0eXBlKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGlzRWRnZUFja1dvcmthcm91bmQodHlwZTogTWVzc2FnZVR5cGUpOiBib29sZWFuIHtcclxuICAgIHJldHVybiB0eXBlID09PSBNZXNzYWdlVHlwZS5lZGdlQWNrVjEwO1xyXG59XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4uL2xpYi9ob3N0L21lc3NhZ2UtdHlwZXMudHMiLCIvLyBDb3B5cmlnaHQgKGMpIDIwMTggQnJvbWl1bSwgSW5jLlxyXG4vLyBVc2Ugb2YgdGhlIEJyb21pdW0sIEluYy4gc29mdHdhcmUgcmVxdWlyZXMgYSBsaWNlbnNlIGFncmVlbWVudCB3aXRoIEJyb21pdW0sIEluYy4gb3IgYW4gYXV0aG9yaXplZCByZXNlbGxlci5cclxuXHJcbmltcG9ydCB7IG11cm11ckhhc2ggfSBmcm9tIFwiLi9tdXJtdXItaGFzaFwiO1xyXG5pbXBvcnQgeyBIYXNoU2V0LCBIYXNoTWFwIH0gZnJvbSBcIi4vaGFzaC1tYXBcIjtcclxuaW1wb3J0IHsgVVJMLCBVUkxUb1N0cmluZyB9IGZyb20gXCIuL3VybC11dGlsc1wiO1xyXG5cclxuZXhwb3J0IGVudW0gU3RyaW5nQ29tcGFyZU9wdGlvbnMge1xyXG4gICAgQ2FzZVNlbnNpdGl2ZSxcclxuICAgIExvd2VyQ2FzZSxcclxuICAgIExvY2FsZUxvd2VyQ2FzZVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY29tcGFyZVN0cmluZ3MoYTogc3RyaW5nLCBiOiBzdHJpbmcsIG9wdGlvbnMgPSBTdHJpbmdDb21wYXJlT3B0aW9ucy5DYXNlU2Vuc2l0aXZlKTogYm9vbGVhbiB7XHJcbiAgICBzd2l0Y2ggKG9wdGlvbnMpIHtcclxuICAgICAgICBjYXNlIFN0cmluZ0NvbXBhcmVPcHRpb25zLkNhc2VTZW5zaXRpdmU6XHJcbiAgICAgICAgICAgIHJldHVybiBhID09PSBiO1xyXG4gICAgICAgIGNhc2UgU3RyaW5nQ29tcGFyZU9wdGlvbnMuTG93ZXJDYXNlOlxyXG4gICAgICAgICAgICByZXR1cm4gYS50b0xvd2VyQ2FzZSgpID09PSBiLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgY2FzZSBTdHJpbmdDb21wYXJlT3B0aW9ucy5Mb2NhbGVMb3dlckNhc2U6XHJcbiAgICAgICAgICAgIHJldHVybiBhLnRvTG9jYWxlTG93ZXJDYXNlKCkgPT09IGIudG9Mb2NhbGVMb3dlckNhc2UoKTtcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3N0cmluZ0NvbXBhcmUnKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGhhc2hTdHJpbmcodmFsdWU6IHN0cmluZykge1xyXG4gICAgbGV0IGhhc2ggPSAwO1xyXG4gICAgaGFzaCA9IG11cm11ckhhc2godmFsdWUsIGhhc2gpO1xyXG4gICAgcmV0dXJuIGhhc2g7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBtYWtlU3RyaW5nSGFzaFNldCgpOiBIYXNoU2V0PHN0cmluZz4ge1xyXG4gICAgcmV0dXJuIG5ldyBIYXNoU2V0PHN0cmluZz4oaGFzaFN0cmluZywgY29tcGFyZVN0cmluZ3MpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gbWFrZVN0cmluZ0hhc2hNYXA8VD4oKTogSGFzaE1hcDxzdHJpbmcsIFQ+IHtcclxuICAgIHJldHVybiBuZXcgSGFzaE1hcDxzdHJpbmcsIFQ+KGhhc2hTdHJpbmcsIGNvbXBhcmVTdHJpbmdzKTtcclxufVxyXG5cclxuZnVuY3Rpb24gbGluZSh2YWx1ZTogc3RyaW5nKSB7XHJcbiAgICByZXR1cm4gYCR7dmFsdWV9XFxuYDtcclxufVxyXG5cclxuZnVuY3Rpb24gc3Vycm91bmQodmFsdWU6IHN0cmluZywgdHlwZU5hbWU6IHN0cmluZywgb3BlblRhZzogc3RyaW5nLCBjbG9zZVRhZzogc3RyaW5nLCBpbmRlbnRMZXZlbDogbnVtYmVyKSB7XHJcbiAgICBjb25zdCBpbmRlbnQ6ICh2YWx1ZTogc3RyaW5nKSA9PiBzdHJpbmcgPSBtYWtlSW5kZW50KGluZGVudExldmVsIC0gMSk7XHJcbiAgICBpZiAodmFsdWUpIHtcclxuICAgICAgICByZXR1cm4gYCR7bGluZShgJHt0eXBlTmFtZX0ke29wZW5UYWd9YCl9JHt2YWx1ZX0ke2luZGVudChjbG9zZVRhZyl9YDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy8gRG9uJ3QgYm90aGVyIGFkZGluZyBsaW5lYnJlYWtzIGlmIHRoZXJlJ3Mgbm90aGluZyB0byBzdXJyb3VuZC5cclxuICAgICAgICByZXR1cm4gYCR7dHlwZU5hbWV9JHtvcGVuVGFnfSR7Y2xvc2VUYWd9YFxyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBtYWtlS2V5VmFsdWVQcmludGVyKHRvU3RyaW5nOiAodmFsdWU6IGFueSkgPT4gc3RyaW5nLCBpbmRlbnQ6ICh2YWx1ZTogc3RyaW5nKSA9PiBzdHJpbmcpOiAoa2V5OiBhbnksIHZhbHVlOiBhbnkpID0+IHN0cmluZyB7XHJcbiAgICByZXR1cm4gKGtleTogYW55LCB2YWx1ZTogYW55KSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGxpbmUoaW5kZW50KGAke3RvU3RyaW5nKGtleSl9OiAke3RvU3RyaW5nKHZhbHVlKX0sYCkpO1xyXG4gICAgfTtcclxufVxyXG5cclxuZnVuY3Rpb24gbWFwVG9TdHJpbmc8SywgVj4obWFwOiBNYXA8SywgVj4sIHNlZW5PYmplY3RzOiBTZXQ8YW55PiwgaW5kZW50TGV2ZWw6IG51bWJlcik6IHN0cmluZyB7XHJcbiAgICBjb25zdCBpbmRlbnQ6ICh2YWx1ZTogc3RyaW5nKSA9PiBzdHJpbmcgPSBtYWtlSW5kZW50KGluZGVudExldmVsKTtcclxuXHJcbiAgICBmdW5jdGlvbiB0b1N0cmluZyh2YWx1ZTogYW55KTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gdG9TdHJpbmdSZWN1cnNpdmUodmFsdWUsIHNlZW5PYmplY3RzLCBpbmRlbnRMZXZlbCk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgcHJpbnRLZXlWYWx1ZSA9IG1ha2VLZXlWYWx1ZVByaW50ZXIodG9TdHJpbmcsIGluZGVudCk7XHJcblxyXG4gICAgbGV0IHJlc3VsdCA9IFwiXCI7XHJcbiAgICBtYXAuZm9yRWFjaCgodmFsdWU6IFYsIGtleTogSykgPT4ge1xyXG4gICAgICAgIHJlc3VsdCArPSBwcmludEtleVZhbHVlKGtleSwgdmFsdWUpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIHN1cnJvdW5kKHJlc3VsdCwgXCJNYXBcIiwgXCJ7XCIsIFwifVwiLCBpbmRlbnRMZXZlbCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG1ha2VWYWx1ZVByaW50ZXIodG9TdHJpbmc6ICh2YWx1ZTogYW55KSA9PiBzdHJpbmcsIGluZGVudDogKHZhbHVlOiBzdHJpbmcpID0+IHN0cmluZyk6ICh2YWx1ZTogYW55KSA9PiBzdHJpbmcge1xyXG4gICAgcmV0dXJuICh2YWx1ZTogYW55KSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGxpbmUoaW5kZW50KGAke3RvU3RyaW5nKHZhbHVlKX0sYCkpO1xyXG4gICAgfTtcclxufVxyXG5cclxuZnVuY3Rpb24gc2V0VG9TdHJpbmc8Sz4oc2V0OiBTZXQ8Sz4sIHNlZW5PYmplY3RzOiBTZXQ8YW55PiwgaW5kZW50TGV2ZWw6IG51bWJlcik6IHN0cmluZyB7XHJcbiAgICBjb25zdCBpbmRlbnQ6ICh2YWx1ZTogc3RyaW5nKSA9PiBzdHJpbmcgPSBtYWtlSW5kZW50KGluZGVudExldmVsKTtcclxuXHJcbiAgICBmdW5jdGlvbiB0b1N0cmluZyh2YWx1ZTogYW55KTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gdG9TdHJpbmdSZWN1cnNpdmUodmFsdWUsIHNlZW5PYmplY3RzLCBpbmRlbnRMZXZlbCk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgcHJpbnRWYWx1ZSA9IG1ha2VWYWx1ZVByaW50ZXIodG9TdHJpbmcsIGluZGVudCk7XHJcblxyXG4gICAgbGV0IHJlc3VsdCA9IFwiXCI7XHJcbiAgICBzZXQuZm9yRWFjaCgoa2V5OiBLKSA9PiB7XHJcbiAgICAgICAgcmVzdWx0ICs9IHByaW50VmFsdWUoa2V5KTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHN1cnJvdW5kKHJlc3VsdCwgXCJTZXRcIiwgXCJ7XCIsIFwifVwiLCBpbmRlbnRMZXZlbCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGFycmF5VG9TdHJpbmc8VD4oYXJyYXk6IFRbXSwgc2Vlbk9iamVjdHM6IFNldDxhbnk+LCBpbmRlbnRMZXZlbDogbnVtYmVyKTogc3RyaW5nIHtcclxuICAgIGNvbnN0IGluZGVudDogKHZhbHVlOiBzdHJpbmcpID0+IHN0cmluZyA9IG1ha2VJbmRlbnQoaW5kZW50TGV2ZWwpO1xyXG5cclxuICAgIGZ1bmN0aW9uIHRvU3RyaW5nKHZhbHVlOiBhbnkpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiB0b1N0cmluZ1JlY3Vyc2l2ZSh2YWx1ZSwgc2Vlbk9iamVjdHMsIGluZGVudExldmVsKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBwcmludFZhbHVlID0gbWFrZVZhbHVlUHJpbnRlcih0b1N0cmluZywgaW5kZW50KTtcclxuXHJcbiAgICBsZXQgcmVzdWx0ID0gXCJcIjtcclxuICAgIGFycmF5LmZvckVhY2goKHZhbHVlOiBUKSA9PiB7XHJcbiAgICAgICAgcmVzdWx0ICs9IHByaW50VmFsdWUodmFsdWUpO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gc3Vycm91bmQocmVzdWx0LCBcIkFycmF5XCIsIFwiW1wiLCBcIl1cIiwgaW5kZW50TGV2ZWwpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBvYmplY3RUb1N0cmluZyh2YWx1ZTogYW55LCBzZWVuT2JqZWN0czogU2V0PGFueT4sIGluZGVudExldmVsOiBudW1iZXIpOiBzdHJpbmcge1xyXG4gICAgY29uc3QgaW5kZW50OiAodmFsdWU6IHN0cmluZykgPT4gc3RyaW5nID0gbWFrZUluZGVudChpbmRlbnRMZXZlbCk7XHJcblxyXG4gICAgZnVuY3Rpb24gdG9TdHJpbmcodmFsdWU6IGFueSk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIHRvU3RyaW5nUmVjdXJzaXZlKHZhbHVlLCBzZWVuT2JqZWN0cywgaW5kZW50TGV2ZWwpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHByaW50S2V5VmFsdWUgPSBtYWtlS2V5VmFsdWVQcmludGVyKHRvU3RyaW5nLCBpbmRlbnQpO1xyXG5cclxuICAgIGxldCByZXN1bHQgPSBcIlwiO1xyXG4gICAgZm9yIChjb25zdCBwcm9wZXJ0eU5hbWUgb2YgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXModmFsdWUpKSB7XHJcbiAgICAgICAgY29uc3QgcHJvcGVydHkgPSB2YWx1ZVtwcm9wZXJ0eU5hbWVdO1xyXG4gICAgICAgIGlmICghaXNGdW5jdGlvbihwcm9wZXJ0eSkpIHtcclxuICAgICAgICAgICAgcmVzdWx0ICs9IHByaW50S2V5VmFsdWUocHJvcGVydHlOYW1lLCBwcm9wZXJ0eSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHN1cnJvdW5kKHJlc3VsdCwgdHlwZU5hbWUodmFsdWUpLCBcIntcIiwgXCJ9XCIsIGluZGVudExldmVsKTtcclxufVxyXG5cclxuY29uc3QgZGVmYXVsdFRvU3RyaW5nRnVuY3Rpb246IEZ1bmN0aW9uID0gKCgpID0+IHtcclxuICAgIGNvbnN0IGVtcHR5T2JqZWN0ID0ge307XHJcbiAgICByZXR1cm4gZW1wdHlPYmplY3QudG9TdHJpbmc7XHJcbn0pKCk7XHJcblxyXG5mdW5jdGlvbiBkZWZhdWx0VG9TdHJpbmcodmFsdWU6IGFueSk6IHN0cmluZyB7XHJcbiAgICByZXR1cm4gZGVmYXVsdFRvU3RyaW5nRnVuY3Rpb24uY2FsbCh2YWx1ZSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhc0N1c3RvbVRvU3RyaW5nKHZhbHVlOiBhbnkpIHtcclxuICAgIHJldHVybiB2YWx1ZS50b1N0cmluZyAhPT0gZGVmYXVsdFRvU3RyaW5nRnVuY3Rpb247XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGlzRnVuY3Rpb24odmFsdWU6IGFueSkge1xyXG4gICAgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgRnVuY3Rpb247XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG1ha2VJbmRlbnRhdGlvbihpbmRlbnRMZXZlbDogbnVtYmVyKTogc3RyaW5nIHtcclxuICAgIGlmIChpbmRlbnRMZXZlbCA8PSAwKSB7XHJcbiAgICAgICAgcmV0dXJuIFwiXCI7XHJcbiAgICB9XHJcbiAgICBjb25zdCB0YWIgPSBcIlxcdFwiO1xyXG4gICAgbGV0IGluZGVudGF0aW9uID0gXCJcIjtcclxuICAgIGZvciAobGV0IGxldmVsID0gMDsgbGV2ZWwgPCBpbmRlbnRMZXZlbDsgbGV2ZWwgKz0gMSkge1xyXG4gICAgICAgIGluZGVudGF0aW9uICs9IHRhYjtcclxuICAgIH1cclxuICAgIHJldHVybiBpbmRlbnRhdGlvbjtcclxufVxyXG5cclxuZnVuY3Rpb24gbWFrZUluZGVudChpbmRlbnRMZXZlbDogbnVtYmVyKTogKHZhbHVlOiBzdHJpbmcpID0+IHN0cmluZyB7XHJcbiAgICBjb25zdCBpbmRlbnRhdGlvbiA9IG1ha2VJbmRlbnRhdGlvbihpbmRlbnRMZXZlbCk7XHJcbiAgICByZXR1cm4gKHZhbHVlOiBzdHJpbmcpID0+IHtcclxuICAgICAgICByZXR1cm4gYCR7aW5kZW50YXRpb259JHt2YWx1ZX1gO1xyXG4gICAgfTtcclxufVxyXG5cclxuZnVuY3Rpb24gdHlwZU9mKHZhbHVlOiBhbnkpOiBhbnkge1xyXG4gICAgcmV0dXJuIHZhbHVlLmNvbnN0cnVjdG9yO1xyXG59XHJcblxyXG5mdW5jdGlvbiB0eXBlTmFtZSh2YWx1ZTogYW55KTogc3RyaW5nIHtcclxuICAgIHJldHVybiB0eXBlT2YodmFsdWUpLm5hbWU7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHRvU3RyaW5nUmVjdXJzaXZlKHZhbHVlOiBhbnksIHNlZW5PYmplY3RzOiBTZXQ8YW55PiwgaW5kZW50TGV2ZWw6IG51bWJlcik6IHN0cmluZyB7XHJcbiAgICBmdW5jdGlvbiBkaWRTZWUodmFsdWU6IGFueSkge1xyXG4gICAgICAgIHJldHVybiBzZWVuT2JqZWN0cy5oYXModmFsdWUpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHNlZU9iamVjdCh2YWx1ZTogYW55KTogU2V0PGFueT4ge1xyXG4gICAgICAgIHNlZW5PYmplY3RzLmFkZCh2YWx1ZSk7XHJcbiAgICAgICAgcmV0dXJuIHNlZW5PYmplY3RzO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IG5leHRJbmRlbnRMZXZlbCA9IGluZGVudExldmVsICsgMTtcclxuXHJcbiAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIHJldHVybiBcInVuZGVmaW5lZFwiO1xyXG4gICAgfSBlbHNlIGlmICh2YWx1ZSA9PT0gbnVsbCkge1xyXG4gICAgICAgIHJldHVybiBcIm51bGxcIjtcclxuICAgIH0gZWxzZSBpZiAodHlwZW9mIHZhbHVlID09PSBcImJvb2xlYW5cIikge1xyXG4gICAgICAgIHJldHVybiB2YWx1ZS50b1N0cmluZygpO1xyXG4gICAgfSBlbHNlIGlmICh0eXBlb2YgdmFsdWUgPT09IFwibnVtYmVyXCIpIHtcclxuICAgICAgICByZXR1cm4gdmFsdWUudG9TdHJpbmcoKTtcclxuICAgIH0gZWxzZSBpZiAodHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiKSB7XHJcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xyXG4gICAgfSBlbHNlIGlmICh2YWx1ZSBpbnN0YW5jZW9mIEFycmF5KSB7XHJcbiAgICAgICAgcmV0dXJuIGFycmF5VG9TdHJpbmcodmFsdWUsIHNlZU9iamVjdCh2YWx1ZSksIG5leHRJbmRlbnRMZXZlbCk7XHJcbiAgICB9IGVsc2UgaWYgKHZhbHVlIGluc3RhbmNlb2YgTWFwKSB7XHJcbiAgICAgICAgcmV0dXJuIG1hcFRvU3RyaW5nKHZhbHVlLCBzZWVPYmplY3QodmFsdWUpLCBuZXh0SW5kZW50TGV2ZWwpO1xyXG4gICAgfSBlbHNlIGlmICh2YWx1ZSBpbnN0YW5jZW9mIFNldCkge1xyXG4gICAgICAgIHJldHVybiBzZXRUb1N0cmluZyh2YWx1ZSwgc2VlT2JqZWN0KHZhbHVlKSwgbmV4dEluZGVudExldmVsKTtcclxuICAgIH0gZWxzZSBpZiAodmFsdWUgaW5zdGFuY2VvZiBVUkwpIHtcclxuICAgICAgICByZXR1cm4gVVJMVG9TdHJpbmcodmFsdWUpO1xyXG4gICAgfSBlbHNlIGlmIChpc0Z1bmN0aW9uKHZhbHVlKSkge1xyXG4gICAgICAgIHJldHVybiB0eXBlTmFtZSh2YWx1ZSk7XHJcbiAgICB9IGVsc2UgaWYgKGRpZFNlZSh2YWx1ZSkpIHtcclxuICAgICAgICByZXR1cm4gdHlwZU5hbWUodmFsdWUpO1xyXG4gICAgfSBlbHNlIGlmIChoYXNDdXN0b21Ub1N0cmluZyh2YWx1ZSkpIHtcclxuICAgICAgICByZXR1cm4gdmFsdWUudG9TdHJpbmcoKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIG9iamVjdFRvU3RyaW5nKHZhbHVlLCBzZWVPYmplY3QodmFsdWUpLCBuZXh0SW5kZW50TGV2ZWwpO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gdG9TdHJpbmcodmFsdWU6IGFueSwgaW5pdGlhbEluZGVudExldmVsID0gMCkge1xyXG4gICAgY29uc3Qgc2Vlbk9iamVjdHMgPSBuZXcgU2V0PGFueT4oKTtcclxuICAgIGNvbnN0IGluZGVudExldmVsID0gaW5pdGlhbEluZGVudExldmVsO1xyXG4gICAgcmV0dXJuIHRvU3RyaW5nUmVjdXJzaXZlKHZhbHVlLCBzZWVuT2JqZWN0cywgaW5kZW50TGV2ZWwpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gc2FmZVRvU3RyaW5nKHZhbHVlOiBhbnkpOiBzdHJpbmcge1xyXG4gICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICByZXR1cm4gXCJ1bmRlZmluZWRcIjtcclxuICAgIH0gZWxzZSBpZiAodmFsdWUgPT09IG51bGwpIHtcclxuICAgICAgICByZXR1cm4gXCJudWxsXCI7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiB2YWx1ZS50b1N0cmluZygpO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaXNTdHJpbmcodmFsdWU6IGFueSk6IHZhbHVlIGlzIHN0cmluZyB7XHJcbiAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJztcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGlzRW1wdHlTdHJpbmcodmFsdWU6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIHZhbHVlLmxlbmd0aCA9PT0gMDtcclxufVxyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi4vbGliL2NvbW1vbi9zdHJpbmctdXRpbHMudHMiLCIvLyBDb3B5cmlnaHQgKGMpIDIwMTggQnJvbWl1bSwgSW5jLlxyXG4vLyBVc2Ugb2YgdGhlIEJyb21pdW0sIEluYy4gc29mdHdhcmUgcmVxdWlyZXMgYSBsaWNlbnNlIGFncmVlbWVudCB3aXRoIEJyb21pdW0sIEluYy4gb3IgYW4gYXV0aG9yaXplZCByZXNlbGxlci5cclxuXHJcbmltcG9ydCB7IE5vbmUsIFNvbWUsIE1heWJlIH0gZnJvbSBcIi4vbWF5YmVcIjtcclxuaW1wb3J0IHsgY29tcGFyZVN0cmluZ3MsIFN0cmluZ0NvbXBhcmVPcHRpb25zIH0gZnJvbSBcIi4vc3RyaW5nLXV0aWxzXCI7XHJcbmltcG9ydCB7IFVybCBhcyBVUkwgfSBmcm9tIFwiLi91cmxcIjtcclxuaW1wb3J0IHsgSGFzaCB9IGZyb20gXCIuL2hhc2hcIjtcclxuaW1wb3J0IHsgbXVybXVySGFzaCB9IGZyb20gXCIuL211cm11ci1oYXNoXCI7XHJcbmltcG9ydCB7IEhhc2hNYXAsIEhhc2hTZXQgfSBmcm9tIFwiLi9oYXNoLW1hcFwiO1xyXG5pbXBvcnQgeyBTY2hlbWUgfSBmcm9tIFwiLi9vcmlnaW5cIjtcclxuXHJcbmV4cG9ydCB7IFVSTCB9O1xyXG5leHBvcnQgdHlwZSBVUkxPclNwZWMgPSBVUkwgfCBzdHJpbmc7XHJcblxyXG5leHBvcnQgZW51bSBVcmxDb21wYXJlT3B0aW9ucyB7XHJcbiAgICBEZWZhdWx0LFxyXG4gICAgSWdub3JlU2VhcmNoUGFyYW1zXHJcbn1cclxuXHJcbmVudW0gVXJsQ29tcG9uZW50IHtcclxuICAgIFByb3RvY29sID0gMSA8PCAwLFxyXG4gICAgVXNlcm5hbWUgPSAxIDw8IDEsXHJcbiAgICBQYXNzd29yZCA9IDEgPDwgMixcclxuICAgIEhvc3QgPSAxIDw8IDMsXHJcbiAgICBQb3J0ID0gMSA8PCA0LFxyXG4gICAgUGF0aG5hbWUgPSAxIDw8IDUsXHJcbiAgICBTZWFyY2ggPSAxIDw8IDYsXHJcbiAgICBBbGwgPSAoMSA8PCA3KSAtIDFcclxufVxyXG5cclxuZnVuY3Rpb24gY29tcGFyZVVybENvbXBvbmVudHMoYTogVVJMLCBiOiBVUkwsIGNvbXBvbmVudHM6IFVybENvbXBvbmVudCk6IGJvb2xlYW4ge1xyXG4gICAgZnVuY3Rpb24gY29tcGFyZShjb21wb25lbnQ6IFVybENvbXBvbmVudCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiAoY29tcG9uZW50cyAmIGNvbXBvbmVudCkgIT09IDA7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGNvbXBhcmUoVXJsQ29tcG9uZW50LlByb3RvY29sKSAmJiBhLnByb3RvY29sICE9PSBiLnByb3RvY29sKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgaWYgKGNvbXBhcmUoVXJsQ29tcG9uZW50LlVzZXJuYW1lKSAmJiBhLnVzZXJuYW1lICE9PSBiLnVzZXJuYW1lKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgaWYgKGNvbXBhcmUoVXJsQ29tcG9uZW50LlBhc3N3b3JkKSAmJiBhLnBhc3N3b3JkICE9PSBiLnBhc3N3b3JkKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgaWYgKGNvbXBhcmUoVXJsQ29tcG9uZW50Lkhvc3QpICYmIGEuaG9zdCAhPT0gYi5ob3N0KSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgaWYgKGNvbXBhcmUoVXJsQ29tcG9uZW50LlBvcnQpICYmIGEucG9ydCAhPT0gYi5wb3J0KSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgaWYgKGNvbXBhcmUoVXJsQ29tcG9uZW50LlBhdGhuYW1lKSAmJiBhLnBhdGhuYW1lICE9PSBiLnBhdGhuYW1lKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgaWYgKGNvbXBhcmUoVXJsQ29tcG9uZW50LlNlYXJjaCkgJiYgYS5zZWFyY2ggIT09IGIuc2VhcmNoKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRydWU7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlbW92ZUNvbXBvbmVudChjb21wb25lbnRzOiBVcmxDb21wb25lbnQsIGNvbXBvbmVudDogVXJsQ29tcG9uZW50KTogVXJsQ29tcG9uZW50IHtcclxuICAgIHJldHVybiBjb21wb25lbnRzICYgKH5jb21wb25lbnQpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaXNTYW1lVXJsKGE6IFVSTCwgYjogVVJMLCBvcHRpb25zID0gVXJsQ29tcGFyZU9wdGlvbnMuRGVmYXVsdCk6IGJvb2xlYW4ge1xyXG4gICAgc3dpdGNoIChvcHRpb25zKSB7XHJcbiAgICAgICAgY2FzZSBVcmxDb21wYXJlT3B0aW9ucy5EZWZhdWx0OlxyXG4gICAgICAgICAgICByZXR1cm4gY29tcGFyZVVybENvbXBvbmVudHMoYSwgYiwgVXJsQ29tcG9uZW50LkFsbCk7XHJcbiAgICAgICAgY2FzZSBVcmxDb21wYXJlT3B0aW9ucy5JZ25vcmVTZWFyY2hQYXJhbXM6XHJcbiAgICAgICAgICAgIHJldHVybiBjb21wYXJlVXJsQ29tcG9uZW50cyhhLCBiLCByZW1vdmVDb21wb25lbnQoVXJsQ29tcG9uZW50LkFsbCwgVXJsQ29tcG9uZW50LlNlYXJjaCkpO1xyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgaXNTYW1lVXJsOiBpbnZhbGlkIG9wdGlvbnM6ICR7b3B0aW9uc31gKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGlzVVJMKHZhbHVlOiBhbnkpOiB2YWx1ZSBpcyBVUkwge1xyXG4gICAgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgVVJMO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VVcmwoc3BlYzogc3RyaW5nKTogTWF5YmU8VVJMPiB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIHJldHVybiBuZXcgVVJMKHNwZWMpO1xyXG4gICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBtYXliZVBhcnNlVXJsKHNwZWM6IHN0cmluZyk6IFVSTE9yU3BlYyB7XHJcbiAgICBjb25zdCB1cmwgPSBwYXJzZVVybChzcGVjKTtcclxuICAgIGlmICh1cmwgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIHJldHVybiBzcGVjO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gdXJsO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VVUkxJZk5lY2Vzc2FyeSh1cmxPclNwZWM6IFVSTE9yU3BlYyk6IE1heWJlPFVSTD4ge1xyXG4gICAgaWYgKGlzVVJMKHVybE9yU3BlYykpIHtcclxuICAgICAgICByZXR1cm4gdXJsT3JTcGVjO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gcGFyc2VVcmwodXJsT3JTcGVjKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGlzU2FtZVVybE9yU3BlYyhhOiBVUkxPclNwZWMsIGI6IFVSTE9yU3BlYywgb3B0aW9ucyA9IFVybENvbXBhcmVPcHRpb25zLkRlZmF1bHQpOiBNYXliZTxib29sZWFuPiB7XHJcbiAgICBpZiAoKGEgaW5zdGFuY2VvZiBVUkwpICYmIChiIGluc3RhbmNlb2YgVVJMKSkge1xyXG4gICAgICAgIHJldHVybiBpc1NhbWVVcmwoYSwgYik7XHJcbiAgICB9IGVsc2UgaWYgKCh0eXBlb2YgYSA9PT0gXCJzdHJpbmdcIikgJiYgKHR5cGVvZiBiID09PSBcInN0cmluZ1wiKSkge1xyXG4gICAgICAgIHJldHVybiBhID09PSBiO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaXNGaWxlVXJsKHVybDogVVJMKSB7XHJcbiAgICByZXR1cm4gY29tcGFyZVN0cmluZ3ModXJsLnByb3RvY29sLCBTY2hlbWUuRklMRSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBpc0V4dGVuc2lvblVybCh1cmw6IFVSTCkge1xyXG4gICAgY29uc3QgZXh0ZW5zaW9uU2NoZW1lcyA9IFtcclxuICAgICAgICBTY2hlbWUuQ0hST01FX0VYVEVOU0lPTixcclxuICAgICAgICBTY2hlbWUuRklSRUZPWF9FWFRFTlNJT04sXHJcbiAgICAgICAgU2NoZW1lLkVER0VfRVhURU5TSU9OXHJcbiAgICBdO1xyXG4gICAgcmV0dXJuIGV4dGVuc2lvblNjaGVtZXMuc29tZSgoZXh0ZW5zaW9uU2NoZW1lKSA9PiBjb21wYXJlU3RyaW5ncyh1cmwucHJvdG9jb2wsIGV4dGVuc2lvblNjaGVtZSkpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaXNCcm93c2VyVXJsKHVybDogVVJMKSB7XHJcbiAgICByZXR1cm4gY29tcGFyZVN0cmluZ3ModXJsLnByb3RvY29sLCBTY2hlbWUuQ0hST01FKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIFVSTFRvU3RyaW5nKHVybDogTWF5YmU8VVJMT3JTcGVjPik6IHN0cmluZyB7XHJcbiAgICBpZiAodXJsID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICByZXR1cm4gXCJcIjtcclxuICAgIH1cclxuICAgIGlmICh1cmwgaW5zdGFuY2VvZiBVUkwpIHtcclxuICAgICAgICByZXR1cm4gdXJsLnRvU3RyaW5nKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiB1cmw7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBzYWZlRW5jb2RlVVJJKHVyaTogTWF5YmU8c3RyaW5nPik6IHN0cmluZyB7XHJcbiAgICBpZiAodXJpID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICByZXR1cm4gXCJcIjtcclxuICAgIH1cclxuICAgIHJldHVybiBlbmNvZGVVUkkodXJpKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHNhZmVFbmNvZGVVUklDb21wb25lbnQoY29tcG9uZW50OiBNYXliZTxzdHJpbmc+KTogc3RyaW5nIHtcclxuICAgIGlmIChjb21wb25lbnQgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIHJldHVybiBcIlwiO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudChjb21wb25lbnQpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYXNoVXJsQ29tcG9uZW50cyh1cmw6IFVSTCwgY29tcG9uZW50czogVXJsQ29tcG9uZW50LCBzZWVkOiBIYXNoKTogSGFzaCB7XHJcbiAgICBmdW5jdGlvbiBjb21wYXJlKGNvbXBvbmVudDogVXJsQ29tcG9uZW50KTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIChjb21wb25lbnRzICYgY29tcG9uZW50KSAhPT0gMDtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgaGFzaCA9IHNlZWQ7XHJcbiAgICBpZiAoY29tcGFyZShVcmxDb21wb25lbnQuUHJvdG9jb2wpKSB7XHJcbiAgICAgICAgaGFzaCA9IG11cm11ckhhc2godXJsLnByb3RvY29sLCBoYXNoKTtcclxuICAgIH1cclxuICAgIGlmIChjb21wYXJlKFVybENvbXBvbmVudC5Vc2VybmFtZSkpIHtcclxuICAgICAgICBoYXNoID0gbXVybXVySGFzaCh1cmwudXNlcm5hbWUsIGhhc2gpO1xyXG4gICAgfVxyXG4gICAgaWYgKGNvbXBhcmUoVXJsQ29tcG9uZW50LlBhc3N3b3JkKSkge1xyXG4gICAgICAgIGhhc2ggPSBtdXJtdXJIYXNoKHVybC5wYXNzd29yZCwgaGFzaCk7XHJcbiAgICB9XHJcbiAgICBpZiAoY29tcGFyZShVcmxDb21wb25lbnQuSG9zdCkpIHtcclxuICAgICAgICBoYXNoID0gbXVybXVySGFzaCh1cmwuaG9zdCwgaGFzaCk7XHJcbiAgICB9XHJcbiAgICBpZiAoY29tcGFyZShVcmxDb21wb25lbnQuUG9ydCkpIHtcclxuICAgICAgICBoYXNoID0gbXVybXVySGFzaCh1cmwucG9ydCwgaGFzaCk7XHJcbiAgICB9XHJcbiAgICBpZiAoY29tcGFyZShVcmxDb21wb25lbnQuUGF0aG5hbWUpKSB7XHJcbiAgICAgICAgaGFzaCA9IG11cm11ckhhc2godXJsLnBhdGhuYW1lLCBoYXNoKTtcclxuICAgIH1cclxuICAgIGlmIChjb21wYXJlKFVybENvbXBvbmVudC5TZWFyY2gpKSB7XHJcbiAgICAgICAgaGFzaCA9IG11cm11ckhhc2godXJsLnNlYXJjaCwgaGFzaCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gaGFzaDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGhhc2hVcmwodXJsOiBVUkwsIG9wdGlvbnM6IFVybENvbXBhcmVPcHRpb25zID0gVXJsQ29tcGFyZU9wdGlvbnMuRGVmYXVsdCwgc2VlZDogSGFzaCA9IDApOiBIYXNoIHtcclxuICAgIHN3aXRjaCAob3B0aW9ucykge1xyXG4gICAgICAgIGNhc2UgVXJsQ29tcGFyZU9wdGlvbnMuRGVmYXVsdDpcclxuICAgICAgICAgICAgcmV0dXJuIGhhc2hVcmxDb21wb25lbnRzKHVybCwgVXJsQ29tcG9uZW50LkFsbCwgc2VlZCk7XHJcbiAgICAgICAgY2FzZSBVcmxDb21wYXJlT3B0aW9ucy5JZ25vcmVTZWFyY2hQYXJhbXM6XHJcbiAgICAgICAgICAgIHJldHVybiBoYXNoVXJsQ29tcG9uZW50cyh1cmwsIHJlbW92ZUNvbXBvbmVudChVcmxDb21wb25lbnQuQWxsLCBVcmxDb21wb25lbnQuU2VhcmNoKSwgc2VlZCk7XHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBoYXNoVXJsOiBpbnZhbGlkIG9wdGlvbnM6ICR7b3B0aW9uc31gKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIG1ha2VVcmxIYXNoTWFwPFQ+KG9wdGlvbnM6IFVybENvbXBhcmVPcHRpb25zID0gVXJsQ29tcGFyZU9wdGlvbnMuRGVmYXVsdCkgOiBIYXNoTWFwPFVSTCwgVD4ge1xyXG4gICAgcmV0dXJuIG5ldyBIYXNoTWFwPFVSTCwgVD4oKHVybCkgPT4gaGFzaFVybCh1cmwsIG9wdGlvbnMpLCAoYSwgYikgPT4gaXNTYW1lVXJsKGEsIGIsIG9wdGlvbnMpKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIG1ha2VVcmxIYXNoU2V0KG9wdGlvbnM6IFVybENvbXBhcmVPcHRpb25zID0gVXJsQ29tcGFyZU9wdGlvbnMuRGVmYXVsdCkgOiBIYXNoU2V0PFVSTD4ge1xyXG4gICAgcmV0dXJuIG5ldyBIYXNoU2V0PFVSTD4oKHVybCkgPT4gaGFzaFVybCh1cmwsIG9wdGlvbnMpLCAoYSwgYikgPT4gaXNTYW1lVXJsKGEsIGIsIG9wdGlvbnMpKTtcclxufVxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuLi9saWIvY29tbW9uL3VybC11dGlscy50cyIsIi8vIENvcHlyaWdodCAoYykgMjAxOCBCcm9taXVtLCBJbmMuXHJcbi8vIFVzZSBvZiB0aGUgQnJvbWl1bSwgSW5jLiBzb2Z0d2FyZSByZXF1aXJlcyBhIGxpY2Vuc2UgYWdyZWVtZW50IHdpdGggQnJvbWl1bSwgSW5jLiBvciBhbiBhdXRob3JpemVkIHJlc2VsbGVyLlxyXG5cclxuaW1wb3J0IHsgTWVzc2FnZVR5cGUgfSBmcm9tIFwiLi9tZXNzYWdlLXR5cGVzXCI7XHJcbmltcG9ydCB7IElkIH0gZnJvbSBcIi4vaWQtZ2VuZXJhdG9yXCI7XHJcbmltcG9ydCB7IFRhYklkIH0gZnJvbSBcIi4vY29tbW9uLXR5cGVzXCI7XHJcbmltcG9ydCB7IENocmFnRXJyb3IgfSBmcm9tIFwiLi9lcnJvcnNcIlxyXG5pbXBvcnQgeyBTZXJpYWxpemVkUGhpc2hpbmdTb3VyY2VTaXRlcyB9IGZyb20gXCIuL3NlcmlhbGl6ZWQtcGhpc2hpbmctc291cmNlLXNpdGVzXCI7XHJcbmltcG9ydCB7IEVtcHR5T2JqZWN0IH0gZnJvbSBcIi4vZW1wdHktb2JqZWN0XCI7XHJcbmltcG9ydCB7IEkxOG5NZXNzYWdlcyB9IGZyb20gXCIuL2kxOG5cIjtcclxuaW1wb3J0IHsgTWF5YmUgfSBmcm9tIFwiLi9tYXliZVwiO1xyXG5pbXBvcnQgeyBWZXJzaW9uU3VwcG9ydFN0YXR1cyB9IGZyb20gXCIuL3Byb3RvY29sLXZlcnNpb25zXCI7XHJcbmltcG9ydCB7IHRvU3RyaW5nIH0gZnJvbSBcIi4vc3RyaW5nLXV0aWxzXCI7XHJcbmltcG9ydCB7IGlzT2JqZWN0LCBpc0Jvb2xlYW4sIGlzTnVtYmVyLCBpc0FycmF5IH0gZnJvbSBcIi4vdHlwZS11dGlsc1wiO1xyXG5cclxuZXhwb3J0IHR5cGUgU2VyaWFsaXplZEJyb3dzZXJJbmZvID0ge1xyXG4gICAgYnJvd3Nlcjogc3RyaW5nLFxyXG4gICAgdXJsSG9zdG5hbWU6IHN0cmluZ1xyXG59XHJcblxyXG5leHBvcnQgdHlwZSBTZXJpYWxpemVkSXNFbmFibGVkRGF0YVYxID0ge1xyXG4gICAgY2hyb21lOiBib29sZWFuLFxyXG4gICAgZmlyZWZveDogYm9vbGVhbixcclxuICAgIGVkZ2U6IGJvb2xlYW5cclxufVxyXG5leHBvcnQgdHlwZSBTZXJpYWxpemVkSXNFbmFibGVkRGF0YVYxMiA9IHtcclxuICAgIGNocm9tZTogYm9vbGVhbixcclxuICAgIGZpcmVmb3g6IGJvb2xlYW4sXHJcbiAgICBlZGdlOiBib29sZWFuLFxyXG4gICAgZWRnZUNocm9taXVtOiBib29sZWFuXHJcbn1cclxuZXhwb3J0IHR5cGUgU2VyaWFsaXplZElzRW5hYmxlZERhdGEgPSBTZXJpYWxpemVkSXNFbmFibGVkRGF0YVYxIHwgU2VyaWFsaXplZElzRW5hYmxlZERhdGFWMTI7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaXNTZXJpYWxpemVkSXNFbmFibGVkRGF0YVYxKHZhbHVlOiBhbnkpOiB2YWx1ZSBpcyBTZXJpYWxpemVkSXNFbmFibGVkRGF0YVYxIHtcclxuICAgIHJldHVybiBpc09iamVjdCh2YWx1ZSkgJiZcclxuICAgICAgICBpc0Jvb2xlYW4odmFsdWUuY2hyb21lKSAmJlxyXG4gICAgICAgIGlzQm9vbGVhbih2YWx1ZS5maXJlZm94KSAmJlxyXG4gICAgICAgIGlzQm9vbGVhbih2YWx1ZS5lZGdlKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGlzU2VyaWFsaXplZElzRW5hYmxlZERhdGFWMTIodmFsdWU6IGFueSk6IHZhbHVlIGlzIFNlcmlhbGl6ZWRJc0VuYWJsZWREYXRhVjEyIHtcclxuICAgIHJldHVybiBpc09iamVjdCh2YWx1ZSkgJiZcclxuICAgICAgICBpc0Jvb2xlYW4odmFsdWUuY2hyb21lKSAmJlxyXG4gICAgICAgIGlzQm9vbGVhbih2YWx1ZS5maXJlZm94KSAmJlxyXG4gICAgICAgIGlzQm9vbGVhbih2YWx1ZS5lZGdlKSAmJlxyXG4gICAgICAgIGlzQm9vbGVhbih2YWx1ZS5lZGdlQ2hyb21pdW0pO1xyXG59XHJcblxyXG5leHBvcnQgdHlwZSBTZXJpYWxpemVkTmF2aWdhdGlvblRva2VuID0gc3RyaW5nfG51bWJlcnxbc3RyaW5nfG51bWJlcl07XHJcbmV4cG9ydCB0eXBlIFNlcmlhbGl6ZWROYXZpZ2F0aW9uID0gU2VyaWFsaXplZE5hdmlnYXRpb25Ub2tlbltdO1xyXG5leHBvcnQgdHlwZSBTZXJpYWxpemVkTmF2TWV0YWRhdGEgPSB7XHJcbiAgICBwcmVjZWRlbmNlOiBudW1iZXIsXHJcbiAgICBhbGxvdz86IGJvb2xlYW4sXHJcbiAgICBibG9jaz86IGJvb2xlYW4sXHJcbiAgICBuYXZpZ2F0ZVRvOiBudW1iZXIsXHJcbiAgICByZXF1aXJlc1VzZXJDbGljaz86IG51bWJlclxyXG59O1xyXG5leHBvcnQgdHlwZSBTZXJpYWxpemVkTmF2U2VxRGF0YSA9IHtcclxuICAgIHNlcTogU2VyaWFsaXplZE5hdmlnYXRpb25bXSxcclxuICAgIG1ldGFkYXRhOiBTZXJpYWxpemVkTmF2TWV0YWRhdGFcclxufTtcclxuZXhwb3J0IHR5cGUgU2VyaWFsaXplZFBoaXNoaW5nTmF2U2VxRGF0YSA9IHtcclxuICAgIHZlcnNpb246IG51bWJlcixcclxuICAgIGJ1aWx0aW5SdWxlc1ByZWNlZGVuY2U6IG51bWJlcixcclxuICAgIHNlcXM6IFNlcmlhbGl6ZWROYXZTZXFEYXRhW11cclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBpc1NlcmlhbGl6ZWRQaGlzaGluZ05hdlNlcURhdGEodmFsdWU6IGFueSk6IHZhbHVlIGlzIFNlcmlhbGl6ZWRQaGlzaGluZ05hdlNlcURhdGEge1xyXG4gICAgcmV0dXJuIGlzT2JqZWN0KHZhbHVlKSAmJlxyXG4gICAgICAgIGlzTnVtYmVyKHZhbHVlLnZlcnNpb24pICYmXHJcbiAgICAgICAgaXNOdW1iZXIodmFsdWUuYnVpbHRpblJ1bGVzUHJlY2VkZW5jZSkgJiZcclxuICAgICAgICBpc0FycmF5KHZhbHVlLnNlcXMpO1xyXG59XHJcblxyXG5leHBvcnQgdHlwZSBTZXJpYWxpemVkTmV3VGFiUGFnZVVybHNWNyA9IHtcclxuICAgIGNocm9tZTogc3RyaW5nW10sXHJcbiAgICBmaXJlZm94OiBzdHJpbmdbXSxcclxuICAgIGVkZ2U6IHN0cmluZ1tdXHJcbn07XHJcbmV4cG9ydCB0eXBlIFNlcmlhbGl6ZWROZXdUYWJQYWdlVXJsc1YxMiA9IHtcclxuICAgIGNocm9tZTogc3RyaW5nW10sXHJcbiAgICBmaXJlZm94OiBzdHJpbmdbXSxcclxuICAgIGVkZ2U6IHN0cmluZ1tdLFxyXG4gICAgZWRnZUNocm9taXVtOiBzdHJpbmdbXVxyXG59O1xyXG5leHBvcnQgdHlwZSBTZXJpYWxpemVkTmV3VGFiUGFnZVVybHMgPSBTZXJpYWxpemVkTmV3VGFiUGFnZVVybHNWNyB8IFNlcmlhbGl6ZWROZXdUYWJQYWdlVXJsc1YxMjtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBpc1NlcmlhbGl6ZWROZXdUYWJQYWdlVXJsc1Y3KHZhbHVlOiBhbnkpOiB2YWx1ZSBpcyBTZXJpYWxpemVkTmV3VGFiUGFnZVVybHNWNyB7XHJcbiAgICByZXR1cm4gaXNPYmplY3QodmFsdWUpICYmXHJcbiAgICAgICAgaXNBcnJheSh2YWx1ZS5jaHJvbWUpICYmXHJcbiAgICAgICAgaXNBcnJheSh2YWx1ZS5maXJlZm94KSAmJlxyXG4gICAgICAgIGlzQXJyYXkodmFsdWUuZWRnZSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBpc1NlcmlhbGl6ZWROZXdUYWJQYWdlVXJsc1YxMih2YWx1ZTogYW55KTogdmFsdWUgaXMgU2VyaWFsaXplZE5ld1RhYlBhZ2VVcmxzVjEyIHtcclxuICAgIHJldHVybiBpc09iamVjdCh2YWx1ZSkgJiZcclxuICAgICAgICBpc0FycmF5KHZhbHVlLmNocm9tZSkgJiZcclxuICAgICAgICBpc0FycmF5KHZhbHVlLmZpcmVmb3gpICYmXHJcbiAgICAgICAgaXNBcnJheSh2YWx1ZS5lZGdlKSAmJlxyXG4gICAgICAgIGlzQXJyYXkodmFsdWUuZWRnZUNocm9taXVtKTtcclxufVxyXG5cclxuZXhwb3J0IHR5cGUgTWVzc2FnZVBheWxvYWQgPSBIYW5kc2hha2VWMSB8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTGF1bmNoQnJvd3NlclJlcXVlc3RWMSB8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTGF1bmNoQnJvd3NlclJlc3BvbnNlVjEgfFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIENvbmZpZ1JlcXVlc3RWMSB8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ29uZmlnQ2hhbmdlZFYxIHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUcnVzdFVybFYxIHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEb3dubG9hZENvbXBsZXRlVjEgfFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIExvZ01lc3NhZ2VWMSB8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQWRkVXNlclRydXN0ZWRPcmlnaW5WMSB8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQWRkVXNlclVudHJ1c3RlZE9yaWdpblYxIHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBIZWxwZXJFcnJvclYxIHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEb3JtYW50U3RhdGVDaGFuZ2VkVjEgfFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIEV4dGVuc2lvblJlYWR5VjEgfFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIEV4dGVybmFsQXBwTGlua1JlcXVlc3RWMSB8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXh0ZXJuYWxBcHBMaW5rUmVzcG9uc2VWMSB8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSXNGaWxlVVJMVHJ1c3RlZFJlcXVlc3RWMSB8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSXNGaWxlVVJMVHJ1c3RlZFJlc3BvbnNlVjEgfFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIEJsb2NrZWRGaWxlUmVxdWVzdFYxIHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBCbG9ja2VkRmlsZVJlc3BvbnNlVjEgfFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBvcHVwRGF0YVJlcXVlc3RWMSB8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUG9wdXBEYXRhUmVzcG9uc2VWMSB8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ2xlYXJSZW1lbWJlcmVkRGVjaXNpb25zVjEgfFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIEJsb2NrZWRQYWdlU3RyaW5nc1JlcXVlc3RWMSB8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQmxvY2tlZFBhZ2VTdHJpbmdzUmVzcG9uc2VWMSB8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSGVhcnRiZWF0VjEgfFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVuYWJsZWRGZWF0dXJlc1JlcXVlc3RWMiB8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRW5hYmxlZEZlYXR1cmVzUmVzcG9uc2VWMiB8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ2xlYXJSZW1lbWJlcmVkT3JpZ2luVjMgfFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9wdGlvbnNEYXRhUmVxdWVzdFYzIHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPcHRpb25zRGF0YVJlc3BvbnNlVjMgfFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIENvbmZpZ0NoYW5nZWRWMyB8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVwdXRhdGlvbkNoYW5nZWRWMyB8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ29uZmlnQ2hhbmdlZFY0IHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBCbG9ja2VkUGFnZURhdGFSZXF1ZXN0VjQgfFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIEJsb2NrZWRQYWdlRGF0YVJlc3BvbnNlVjQgfFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIENvbmZpZ0NoYW5nZWRWNSB8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUG9wdXBEYXRhUmVzcG9uc2VWNSB8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQmxvY2tlZFBhZ2VEYXRhUmVzcG9uc2VWNiB8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHJ1c3RVcmxWNiB8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ29uZmlnQ2hhbmdlZFY3IHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUcnVzdFVybFY4IHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEb250QXNrQWdhaW5WOCB8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ29uZmlnQ2hhbmdlZFY4IHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQb3B1cERhdGFSZXNwb25zZVY5IHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEb250QXNrQWdhaW5WOSB8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ29uZmlnQ2hhbmdlZFY5IHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTdG9wSGVscGVyVjEwIHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFZGdlQWNrVjEwIHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFbmRPZlN0cmVhbVYxMCB8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSGVhcnRiZWF0VjEwIHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDb25maWdDaGFuZ2VkVjExIHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDb25maWdDaGFuZ2VkVjEyO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJVGFiTWVzc2FnZSB7XHJcbiAgICByZWFkb25seSB0YWJJZDogVGFiSWQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBpc1RhYk1lc3NhZ2UobWVzc2FnZTogTWVzc2FnZVBheWxvYWQpOiBtZXNzYWdlIGlzIElUYWJNZXNzYWdlIHtcclxuICAgIHJldHVybiAobWVzc2FnZSBhcyBJVGFiTWVzc2FnZSkudGFiSWQgIT09IHVuZGVmaW5lZDtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJSWRNZXNzYWdlIHtcclxuICAgIHJlYWRvbmx5IGlkOiBJZDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIElzSWRNZXNzYWdlKG1lc3NhZ2U6IG9iamVjdCk6IG1lc3NhZ2UgaXMgSUlkTWVzc2FnZSB7XHJcbiAgICByZXR1cm4gKG1lc3NhZ2UgYXMgSUlkTWVzc2FnZSkuaWQgIT09IHVuZGVmaW5lZDtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIExhdW5jaEJyb3dzZXJSZXF1ZXN0VjEge1xyXG4gICAgY29uc3RydWN0b3IocmVhZG9ubHkgdXJsU3BlYzogc3RyaW5nLCByZWFkb25seSBpZDogSWQpIHsgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgTGF1bmNoQnJvd3NlclJlc3BvbnNlVjEge1xyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAgICAgICAgIHJlYWRvbmx5IHVybFNwZWM6IHN0cmluZyxcclxuICAgICAgICAgICAgcmVhZG9ubHkgaWQ6IElkLFxyXG4gICAgICAgICAgICByZWFkb25seSBkaWRMYXVuY2g6IGJvb2xlYW4pIHsgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgSGFuZHNoYWtlVjEge1xyXG4gICAgY29uc3RydWN0b3IocmVhZG9ubHkgdmVyc2lvbnMgOiBzdHJpbmdbXSkge1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgQ29uZmlnUmVxdWVzdFYxIHtcclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgIHJlYWRvbmx5IHBoaXNoaW5nU291cmNlU2l0ZXNWZXJzaW9uOiBudW1iZXIsXHJcbiAgICAgICAgcmVhZG9ubHkgcGhpc2hpbmdOYXZpZ2F0aW9uU2VxdWVuY2VzVmVyc2lvbjogbnVtYmVyLFxyXG4gICAgICAgIHJlYWRvbmx5IGJyb3dzZXJJbmZvOiBTZXJpYWxpemVkQnJvd3NlckluZm8pIHsgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgRXh0ZW5zaWJsZUNvbmZpZ0NoYW5nZWRWMTxUU2VyaWFsaXplZElzRW5hYmxlZERhdGE+IHtcclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgIHJlYWRvbmx5IGlzRW5hYmxlZDogVFNlcmlhbGl6ZWRJc0VuYWJsZWREYXRhfEVtcHR5T2JqZWN0LFxyXG4gICAgICAgIHJlYWRvbmx5IGJsb2NrZWRQYWdlU3RyaW5nczogRW1wdHlPYmplY3QsIC8vIERlcHJlY2F0ZWRcclxuICAgICAgICByZWFkb25seSBwaGlzaGluZ1NvdXJjZVNpdGVzOiBTZXJpYWxpemVkUGhpc2hpbmdTb3VyY2VTaXRlc3xFbXB0eU9iamVjdCxcclxuICAgICAgICByZWFkb25seSBwaGlzaGluZ05hdmlnYXRpb25TZXF1ZW5jZXM6IFNlcmlhbGl6ZWRQaGlzaGluZ05hdlNlcURhdGF8RW1wdHlPYmplY3QsXHJcbiAgICAgICAgcmVhZG9ubHkgdHJ1c3RlZFNpdGVzIDogc3RyaW5nW10sXHJcbiAgICAgICAgcmVhZG9ubHkgdW50cnVzdGVkU2l0ZXMgOiBzdHJpbmdbXSxcclxuICAgICAgICByZWFkb25seSB1c2VyVHJ1c3RlZE9yaWdpbnMgOiBzdHJpbmdbXSxcclxuICAgICAgICByZWFkb25seSB1c2VyVW50cnVzdGVkT3JpZ2lucyA6IHN0cmluZ1tdLFxyXG4gICAgICAgIHJlYWRvbmx5IG9wZW5QaGlzaGluZ0xpbmtzSW5TZWN1cmVCcm93c2VyOiBib29sZWFuKSB7IH1cclxufVxyXG5leHBvcnQgdHlwZSBDb25maWdDaGFuZ2VkVjEgPSBFeHRlbnNpYmxlQ29uZmlnQ2hhbmdlZFYxPFNlcmlhbGl6ZWRJc0VuYWJsZWREYXRhVjE+O1xyXG5cclxuZXhwb3J0IHR5cGUgU2l0ZUFuZEV4cGlyeSA9IFtzdHJpbmcsIG51bWJlcl07XHJcbmV4cG9ydCBjbGFzcyBSZXB1dGF0aW9uQ2hhbmdlZFYzIHtcclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgIHJlYWRvbmx5IGluZGV4IDogbnVtYmVyLFxyXG4gICAgICAgIHJlYWRvbmx5IHRvdGFsIDogbnVtYmVyLFxyXG4gICAgICAgIHJlYWRvbmx5IHJlcHV0YWJsZVNpdGVzOiBTaXRlQW5kRXhwaXJ5W10pIHsgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgVHJ1c3RVcmxWMSB7XHJcbiAgICBjb25zdHJ1Y3RvcihcclxuICAgICAgICByZWFkb25seSBuYXZpZ2F0ZVRvVXJsU3BlYzogc3RyaW5nLFxyXG4gICAgICAgIHJlYWRvbmx5IGJsb2NrZWRVcmxTcGVjOiBzdHJpbmcsXHJcbiAgICAgICAgcmVhZG9ubHkgdHJ1c3RVcmw6IGJvb2xlYW4sXHJcbiAgICAgICAgcmVhZG9ubHkgcmVtZW1iZXJEZWNpc2lvbjogYm9vbGVhbikgeyB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBEb3dubG9hZENvbXBsZXRlVjEge1xyXG4gICAgY29uc3RydWN0b3IocmVhZG9ubHkgdXJsU3BlYzogc3RyaW5nLCByZWFkb25seSBmaWxlU3BlYzogc3RyaW5nKSB7IH1cclxufVxyXG5cclxuZXhwb3J0IGVudW0gTG9nTGV2ZWwge1xyXG4gICAgSW5mbyxcclxuICAgIEVycm9yXHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBMb2dNZXNzYWdlVjEge1xyXG4gICAgY29uc3RydWN0b3IocmVhZG9ubHkgbGV2ZWwgOiBMb2dMZXZlbCwgcmVhZG9ubHkgbWVzc2FnZSA6IHN0cmluZykgeyB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBIZWxwZXJFcnJvclYxIHtcclxuICAgIGNvbnN0cnVjdG9yKHJlYWRvbmx5IGVycm9yVHlwZTogQ2hyYWdFcnJvciwgcmVhZG9ubHkgZXJyb3JNZXNzYWdlOiBzdHJpbmcpIHsgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgRG9ybWFudFN0YXRlQ2hhbmdlZFYxIHtcclxuICAgIGNvbnN0cnVjdG9yKHJlYWRvbmx5IGlzRG9ybWFudDogYm9vbGVhbikgeyB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBFeHRlbnNpb25SZWFkeVYxIHtcclxuICAgIGNvbnN0cnVjdG9yKHJlYWRvbmx5IHRhYklkOiBUYWJJZCkgeyB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBFeHRlcm5hbEFwcExpbmtSZXF1ZXN0VjEge1xyXG4gICAgY29uc3RydWN0b3IocmVhZG9ubHkgbGlua1NwZWM6IHN0cmluZywgcmVhZG9ubHkgZXh0ZXJuYWxBcHBOYW1lOiBzdHJpbmcpIHsgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgRXh0ZXJuYWxBcHBMaW5rUmVzcG9uc2VWMSB7XHJcbiAgICBjb25zdHJ1Y3RvcihyZWFkb25seSBuYXZpZ2F0ZVRvU3BlYzogc3RyaW5nKSB7IH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEFkZFVzZXJUcnVzdGVkT3JpZ2luVjEge1xyXG4gICAgY29uc3RydWN0b3IocmVhZG9ubHkgb3JpZ2luIDogc3RyaW5nKSB7IH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEFkZFVzZXJVbnRydXN0ZWRPcmlnaW5WMSB7XHJcbiAgICBjb25zdHJ1Y3RvcihyZWFkb25seSBvcmlnaW4gOiBzdHJpbmcpIHsgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgSXNGaWxlVVJMVHJ1c3RlZFJlcXVlc3RWMSB7XHJcbiAgICBjb25zdHJ1Y3RvcihyZWFkb25seSBpZDogSWQsIHJlYWRvbmx5IGZpbGVVcmxTcGVjOiBzdHJpbmcpIHt9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBJc0ZpbGVVUkxUcnVzdGVkUmVzcG9uc2VWMSB7XHJcbiAgICBjb25zdHJ1Y3RvcihyZWFkb25seSBpZDogSWQsIHJlYWRvbmx5IGZpbGVVcmxTcGVjOiBzdHJpbmcsIHJlYWRvbmx5IGlzVHJ1c3RlZDogYm9vbGVhbikge31cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEJsb2NrZWRGaWxlUmVxdWVzdFYxIHtcclxuICAgIGNvbnN0cnVjdG9yKHJlYWRvbmx5IGZpbGVVcmxTcGVjOiBzdHJpbmcpIHt9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBCbG9ja2VkRmlsZVJlc3BvbnNlVjEge1xyXG4gICAgY29uc3RydWN0b3IocmVhZG9ubHkgZmlsZVVybFNwZWM6IHN0cmluZywgcmVhZG9ubHkgaXNUcnVzdGVkOiBib29sZWFuKSB7fVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgUG9wdXBEYXRhUmVxdWVzdFYxIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge31cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFBvcHVwRGF0YVJlc3BvbnNlVjEge1xyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAgICAgcmVhZG9ubHkgcG9wdXBNZXNzYWdlOiBJMThuTWVzc2FnZXMsXHJcbiAgICAgICAgcmVhZG9ubHkgb3BlblBoaXNoaW5nTGlua3NJblNlY3VyZUJyb3dzZXI6IGJvb2xlYW4pIHt9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBDbGVhclJlbWVtYmVyZWREZWNpc2lvbnNWMSB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHt9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBCbG9ja2VkUGFnZVN0cmluZ3NSZXF1ZXN0VjEge1xyXG4gICAgY29uc3RydWN0b3IocmVhZG9ubHkgY29udGVudFR5cGU6IE1heWJlPHN0cmluZz4pIHt9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBCbG9ja2VkUGFnZVN0cmluZ3NSZXNwb25zZVYxIHtcclxuICAgIGNvbnN0cnVjdG9yKHJlYWRvbmx5IHRpdGxlOiBzdHJpbmcsIHJlYWRvbmx5IHF1ZXN0aW9uOiBzdHJpbmcpIHt9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBIZWFydGJlYXRWMSB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHt9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBFbmFibGVkRmVhdHVyZXNSZXF1ZXN0VjIge1xyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAgICAgcmVhZG9ubHkgaWQ6IElkLFxyXG4gICAgICAgIHJlYWRvbmx5IHJlc3BvbmRJbW1lZGlhdGVseTogYm9vbGVhbikge31cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEVuYWJsZWRGZWF0dXJlc1Jlc3BvbnNlVjIge1xyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAgICAgcmVhZG9ubHkgaWQ6IElkLFxyXG4gICAgICAgIHJlYWRvbmx5IGxpbmtQcm90ZWN0aW9uOiBib29sZWFuLFxyXG4gICAgICAgIHJlYWRvbmx5IGZpbGVVUkxQcm90ZWN0aW9uOiBib29sZWFuLFxyXG4gICAgICAgIHJlYWRvbmx5IHBkZlByb3RlY3Rpb246IGJvb2xlYW4sXHJcbiAgICAgICAgcmVhZG9ubHkgZG93bmxvYWRQcm90ZWN0aW9uOiBib29sZWFuKSB7fVxyXG59XHJcblxyXG5leHBvcnQgZW51bSBSZW1lbWJlcmVkT3JpZ2luVHlwZXMge1xyXG4gICAgVHJ1c3RlZCxcclxuICAgIFVudHJ1c3RlZFxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgQ2xlYXJSZW1lbWJlcmVkT3JpZ2luVjMge1xyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAgICAgcmVhZG9ubHkgb3JpZ2luOiBzdHJpbmcsXHJcbiAgICAgICAgcmVhZG9ubHkgdHlwZTogUmVtZW1iZXJlZE9yaWdpblR5cGVzKSB7fVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgT3B0aW9uc0RhdGFSZXF1ZXN0VjMge1xyXG4gICAgY29uc3RydWN0b3IoKSB7fVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgT3B0aW9uc0RhdGFSZXNwb25zZVYzIHtcclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgIHJlYWRvbmx5IHN1cHBvcnRTdGF0dXM6IFZlcnNpb25TdXBwb3J0U3RhdHVzLFxyXG4gICAgICAgIHJlYWRvbmx5IG9wZW5QaGlzaGluZ0xpbmtzSW5TZWN1cmVCcm93c2VyOiBib29sZWFuLFxyXG4gICAgICAgIHJlYWRvbmx5IHVzZXJUcnVzdGVkT3JpZ2luczogc3RyaW5nW10sXHJcbiAgICAgICAgcmVhZG9ubHkgdXNlclVudHJ1c3RlZE9yaWdpbnM6IHN0cmluZ1tdKSB7fVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgRXh0ZW5zaWJsZUNvbmZpZ0NoYW5nZWRWMzxUU2VyaWFsaXplZElzRW5hYmxlZERhdGE+IGV4dGVuZHMgRXh0ZW5zaWJsZUNvbmZpZ0NoYW5nZWRWMTxUU2VyaWFsaXplZElzRW5hYmxlZERhdGE+IHtcclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgICAgICBpc0VuYWJsZWQ6IFRTZXJpYWxpemVkSXNFbmFibGVkRGF0YXxFbXB0eU9iamVjdCxcclxuICAgICAgICAgICAgYmxvY2tlZFBhZ2VTdHJpbmdzOiBFbXB0eU9iamVjdCwgLy8gRGVwcmVjYXRlZFxyXG4gICAgICAgICAgICBwaGlzaGluZ1NvdXJjZVNpdGVzOiBTZXJpYWxpemVkUGhpc2hpbmdTb3VyY2VTaXRlc3xFbXB0eU9iamVjdCxcclxuICAgICAgICAgICAgcGhpc2hpbmdOYXZpZ2F0aW9uU2VxdWVuY2VzOiBTZXJpYWxpemVkUGhpc2hpbmdOYXZTZXFEYXRhfEVtcHR5T2JqZWN0LFxyXG4gICAgICAgICAgICB0cnVzdGVkU2l0ZXMgOiBzdHJpbmdbXSxcclxuICAgICAgICAgICAgdW50cnVzdGVkU2l0ZXMgOiBzdHJpbmdbXSxcclxuICAgICAgICAgICAgdXNlclRydXN0ZWRPcmlnaW5zIDogc3RyaW5nW10sXHJcbiAgICAgICAgICAgIHVzZXJVbnRydXN0ZWRPcmlnaW5zIDogc3RyaW5nW10sXHJcbiAgICAgICAgICAgIG9wZW5QaGlzaGluZ0xpbmtzSW5TZWN1cmVCcm93c2VyOiBib29sZWFuLFxyXG4gICAgICAgICAgICByZWFkb25seSBwcmlvcml0aXNlVHJ1c3RlZFNpdGVzOiBib29sZWFuKSB7XHJcbiAgICAgICAgc3VwZXIoXHJcbiAgICAgICAgICAgIGlzRW5hYmxlZCxcclxuICAgICAgICAgICAgYmxvY2tlZFBhZ2VTdHJpbmdzLFxyXG4gICAgICAgICAgICBwaGlzaGluZ1NvdXJjZVNpdGVzLFxyXG4gICAgICAgICAgICBwaGlzaGluZ05hdmlnYXRpb25TZXF1ZW5jZXMsXHJcbiAgICAgICAgICAgIHRydXN0ZWRTaXRlcyxcclxuICAgICAgICAgICAgdW50cnVzdGVkU2l0ZXMsXHJcbiAgICAgICAgICAgIHVzZXJUcnVzdGVkT3JpZ2lucyxcclxuICAgICAgICAgICAgdXNlclVudHJ1c3RlZE9yaWdpbnMsXHJcbiAgICAgICAgICAgIG9wZW5QaGlzaGluZ0xpbmtzSW5TZWN1cmVCcm93c2VyKVxyXG4gICAgfVxyXG59XHJcbmV4cG9ydCB0eXBlIENvbmZpZ0NoYW5nZWRWMyA9IEV4dGVuc2libGVDb25maWdDaGFuZ2VkVjM8U2VyaWFsaXplZElzRW5hYmxlZERhdGFWMT47XHJcblxyXG5leHBvcnQgY2xhc3MgRXh0ZW5zaWJsZUNvbmZpZ0NoYW5nZWRWNDxUU2VyaWFsaXplZElzRW5hYmxlZERhdGE+IGV4dGVuZHMgRXh0ZW5zaWJsZUNvbmZpZ0NoYW5nZWRWMzxUU2VyaWFsaXplZElzRW5hYmxlZERhdGE+IHtcclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgICAgICBpc0VuYWJsZWQ6IFRTZXJpYWxpemVkSXNFbmFibGVkRGF0YXxFbXB0eU9iamVjdCxcclxuICAgICAgICAgICAgYmxvY2tlZFBhZ2VTdHJpbmdzOiBFbXB0eU9iamVjdCwgLy8gRGVwcmVjYXRlZFxyXG4gICAgICAgICAgICBwaGlzaGluZ1NvdXJjZVNpdGVzOiBTZXJpYWxpemVkUGhpc2hpbmdTb3VyY2VTaXRlc3xFbXB0eU9iamVjdCxcclxuICAgICAgICAgICAgcGhpc2hpbmdOYXZpZ2F0aW9uU2VxdWVuY2VzOiBTZXJpYWxpemVkUGhpc2hpbmdOYXZTZXFEYXRhfEVtcHR5T2JqZWN0LFxyXG4gICAgICAgICAgICB0cnVzdGVkU2l0ZXMgOiBzdHJpbmdbXSxcclxuICAgICAgICAgICAgdW50cnVzdGVkU2l0ZXMgOiBzdHJpbmdbXSxcclxuICAgICAgICAgICAgdXNlclRydXN0ZWRPcmlnaW5zIDogc3RyaW5nW10sXHJcbiAgICAgICAgICAgIHVzZXJVbnRydXN0ZWRPcmlnaW5zIDogc3RyaW5nW10sXHJcbiAgICAgICAgICAgIG9wZW5QaGlzaGluZ0xpbmtzSW5TZWN1cmVCcm93c2VyOiBib29sZWFuLFxyXG4gICAgICAgICAgICBwcmlvcml0aXNlVHJ1c3RlZFNpdGVzOiBib29sZWFuLFxyXG4gICAgICAgICAgICByZWFkb25seSBwcm9tcHRGb3JVbmNhdGVnb3JpemVkOiBib29sZWFuKSB7XHJcbiAgICAgICAgc3VwZXIoXHJcbiAgICAgICAgICAgIGlzRW5hYmxlZCxcclxuICAgICAgICAgICAgYmxvY2tlZFBhZ2VTdHJpbmdzLFxyXG4gICAgICAgICAgICBwaGlzaGluZ1NvdXJjZVNpdGVzLFxyXG4gICAgICAgICAgICBwaGlzaGluZ05hdmlnYXRpb25TZXF1ZW5jZXMsXHJcbiAgICAgICAgICAgIHRydXN0ZWRTaXRlcyxcclxuICAgICAgICAgICAgdW50cnVzdGVkU2l0ZXMsXHJcbiAgICAgICAgICAgIHVzZXJUcnVzdGVkT3JpZ2lucyxcclxuICAgICAgICAgICAgdXNlclVudHJ1c3RlZE9yaWdpbnMsXHJcbiAgICAgICAgICAgIG9wZW5QaGlzaGluZ0xpbmtzSW5TZWN1cmVCcm93c2VyLFxyXG4gICAgICAgICAgICBwcmlvcml0aXNlVHJ1c3RlZFNpdGVzKVxyXG4gICAgfVxyXG59XHJcbmV4cG9ydCB0eXBlIENvbmZpZ0NoYW5nZWRWNCA9IEV4dGVuc2libGVDb25maWdDaGFuZ2VkVjQ8U2VyaWFsaXplZElzRW5hYmxlZERhdGFWMT47XHJcblxyXG5leHBvcnQgY2xhc3MgQmxvY2tlZFBhZ2VEYXRhUmVxdWVzdFY0IHtcclxuICAgIGNvbnN0cnVjdG9yKHJlYWRvbmx5IGNvbnRlbnRUeXBlOiBNYXliZTxzdHJpbmc+KSB7fVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgQmxvY2tlZFBhZ2VEYXRhUmVzcG9uc2VWNCB7XHJcbiAgICBjb25zdHJ1Y3RvcihcclxuICAgICAgICByZWFkb25seSB0aXRsZTogc3RyaW5nLFxyXG4gICAgICAgIHJlYWRvbmx5IHF1ZXN0aW9uOiBzdHJpbmcsXHJcbiAgICAgICAgcmVhZG9ubHkgcmVtZW1iZXJEZWNpc2lvbnNEZWZhdWx0OiBib29sZWFuKSB7fVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgRXh0ZW5zaWJsZUNvbmZpZ0NoYW5nZWRWNTxUU2VyaWFsaXplZElzRW5hYmxlZERhdGE+IGV4dGVuZHMgRXh0ZW5zaWJsZUNvbmZpZ0NoYW5nZWRWNDxUU2VyaWFsaXplZElzRW5hYmxlZERhdGE+IHtcclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgICAgICBpc0VuYWJsZWQ6IFRTZXJpYWxpemVkSXNFbmFibGVkRGF0YXxFbXB0eU9iamVjdCxcclxuICAgICAgICAgICAgYmxvY2tlZFBhZ2VTdHJpbmdzOiBFbXB0eU9iamVjdCwgLy8gRGVwcmVjYXRlZFxyXG4gICAgICAgICAgICBwaGlzaGluZ1NvdXJjZVNpdGVzOiBTZXJpYWxpemVkUGhpc2hpbmdTb3VyY2VTaXRlc3xFbXB0eU9iamVjdCxcclxuICAgICAgICAgICAgcGhpc2hpbmdOYXZpZ2F0aW9uU2VxdWVuY2VzOiBTZXJpYWxpemVkUGhpc2hpbmdOYXZTZXFEYXRhfEVtcHR5T2JqZWN0LFxyXG4gICAgICAgICAgICB0cnVzdGVkU2l0ZXMgOiBzdHJpbmdbXSxcclxuICAgICAgICAgICAgdW50cnVzdGVkU2l0ZXMgOiBzdHJpbmdbXSxcclxuICAgICAgICAgICAgdXNlclRydXN0ZWRPcmlnaW5zIDogc3RyaW5nW10sXHJcbiAgICAgICAgICAgIHVzZXJVbnRydXN0ZWRPcmlnaW5zIDogc3RyaW5nW10sXHJcbiAgICAgICAgICAgIG9wZW5QaGlzaGluZ0xpbmtzSW5TZWN1cmVCcm93c2VyOiBib29sZWFuLFxyXG4gICAgICAgICAgICBwcmlvcml0aXNlVHJ1c3RlZFNpdGVzOiBib29sZWFuLFxyXG4gICAgICAgICAgICBwcm9tcHRGb3JVbmNhdGVnb3JpemVkOiBib29sZWFuLFxyXG4gICAgICAgICAgICByZWFkb25seSBpc0VudGVycHJpc2VQcm9kdWN0OiBib29sZWFuKSB7XHJcbiAgICAgICAgc3VwZXIoXHJcbiAgICAgICAgICAgIGlzRW5hYmxlZCxcclxuICAgICAgICAgICAgYmxvY2tlZFBhZ2VTdHJpbmdzLFxyXG4gICAgICAgICAgICBwaGlzaGluZ1NvdXJjZVNpdGVzLFxyXG4gICAgICAgICAgICBwaGlzaGluZ05hdmlnYXRpb25TZXF1ZW5jZXMsXHJcbiAgICAgICAgICAgIHRydXN0ZWRTaXRlcyxcclxuICAgICAgICAgICAgdW50cnVzdGVkU2l0ZXMsXHJcbiAgICAgICAgICAgIHVzZXJUcnVzdGVkT3JpZ2lucyxcclxuICAgICAgICAgICAgdXNlclVudHJ1c3RlZE9yaWdpbnMsXHJcbiAgICAgICAgICAgIG9wZW5QaGlzaGluZ0xpbmtzSW5TZWN1cmVCcm93c2VyLFxyXG4gICAgICAgICAgICBwcmlvcml0aXNlVHJ1c3RlZFNpdGVzLFxyXG4gICAgICAgICAgICBwcm9tcHRGb3JVbmNhdGVnb3JpemVkKVxyXG4gICAgfVxyXG59XHJcbmV4cG9ydCB0eXBlIENvbmZpZ0NoYW5nZWRWNSA9IEV4dGVuc2libGVDb25maWdDaGFuZ2VkVjU8U2VyaWFsaXplZElzRW5hYmxlZERhdGFWMT47XHJcblxyXG5leHBvcnQgY2xhc3MgUG9wdXBEYXRhUmVzcG9uc2VWNSBleHRlbmRzIFBvcHVwRGF0YVJlc3BvbnNlVjEge1xyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAgICAgICAgIHBvcHVwTWVzc2FnZTogSTE4bk1lc3NhZ2VzLFxyXG4gICAgICAgICAgICBvcGVuUGhpc2hpbmdMaW5rc0luU2VjdXJlQnJvd3NlcjogYm9vbGVhbixcclxuICAgICAgICAgICAgcmVhZG9ubHkgaXNFbnRlcnByaXNlUHJvZHVjdDogYm9vbGVhbikge1xyXG4gICAgICAgIHN1cGVyKHBvcHVwTWVzc2FnZSwgb3BlblBoaXNoaW5nTGlua3NJblNlY3VyZUJyb3dzZXIpXHJcbiAgICAgICAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgQmxvY2tlZFBhZ2VEYXRhUmVzcG9uc2VWNiBleHRlbmRzIEJsb2NrZWRQYWdlRGF0YVJlc3BvbnNlVjQge1xyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAgICAgICAgIHRpdGxlOiBzdHJpbmcsXHJcbiAgICAgICAgICAgIHF1ZXN0aW9uOiBzdHJpbmcsXHJcbiAgICAgICAgICAgIHJlYWRvbmx5IG9wZW5lZFNlY3VyZUV4cGxhbmF0aW9uOiBzdHJpbmcsXHJcbiAgICAgICAgICAgIHJlbWVtYmVyRGVjaXNpb25zRGVmYXVsdDogYm9vbGVhbikge1xyXG4gICAgICAgIHN1cGVyKHRpdGxlLCBxdWVzdGlvbiwgcmVtZW1iZXJEZWNpc2lvbnNEZWZhdWx0KTtcclxuICAgICAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBUcnVzdFVybFY2IGV4dGVuZHMgVHJ1c3RVcmxWMSB7XHJcbiAgICBjb25zdHJ1Y3RvcihcclxuICAgICAgICAgICAgbmF2aWdhdGVUb1VybFNwZWM6IHN0cmluZyxcclxuICAgICAgICAgICAgYmxvY2tlZFVybFNwZWM6IHN0cmluZyxcclxuICAgICAgICAgICAgdHJ1c3RVcmw6IGJvb2xlYW4sXHJcbiAgICAgICAgICAgIHJlbWVtYmVyRGVjaXNpb246IGJvb2xlYW4sXHJcbiAgICAgICAgICAgIHJlYWRvbmx5IGNvbnRlbnRUeXBlOiBNYXliZTxzdHJpbmc+KSB7XHJcbiAgICAgICAgc3VwZXIobmF2aWdhdGVUb1VybFNwZWMsIGJsb2NrZWRVcmxTcGVjLCB0cnVzdFVybCwgcmVtZW1iZXJEZWNpc2lvbik7XHJcbiAgICAgICAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgRXh0ZW5zaWJsZUNvbmZpZ0NoYW5nZWRWNzxUU2VyaWFsaXplZElzRW5hYmxlZERhdGEsIFRTZXJpYWxpemVkTmV3VGFiUGFnZVVybHM+IGV4dGVuZHMgRXh0ZW5zaWJsZUNvbmZpZ0NoYW5nZWRWNTxUU2VyaWFsaXplZElzRW5hYmxlZERhdGE+IHtcclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgICAgICBpc0VuYWJsZWQ6IFRTZXJpYWxpemVkSXNFbmFibGVkRGF0YXxFbXB0eU9iamVjdCxcclxuICAgICAgICAgICAgYmxvY2tlZFBhZ2VTdHJpbmdzOiBFbXB0eU9iamVjdCwgLy8gRGVwcmVjYXRlZFxyXG4gICAgICAgICAgICBwaGlzaGluZ1NvdXJjZVNpdGVzOiBTZXJpYWxpemVkUGhpc2hpbmdTb3VyY2VTaXRlc3xFbXB0eU9iamVjdCxcclxuICAgICAgICAgICAgcGhpc2hpbmdOYXZpZ2F0aW9uU2VxdWVuY2VzOiBTZXJpYWxpemVkUGhpc2hpbmdOYXZTZXFEYXRhfEVtcHR5T2JqZWN0LFxyXG4gICAgICAgICAgICB0cnVzdGVkU2l0ZXMgOiBzdHJpbmdbXSxcclxuICAgICAgICAgICAgdW50cnVzdGVkU2l0ZXMgOiBzdHJpbmdbXSxcclxuICAgICAgICAgICAgdXNlclRydXN0ZWRPcmlnaW5zIDogc3RyaW5nW10sXHJcbiAgICAgICAgICAgIHVzZXJVbnRydXN0ZWRPcmlnaW5zIDogc3RyaW5nW10sXHJcbiAgICAgICAgICAgIG9wZW5QaGlzaGluZ0xpbmtzSW5TZWN1cmVCcm93c2VyOiBib29sZWFuLFxyXG4gICAgICAgICAgICBwcmlvcml0aXNlVHJ1c3RlZFNpdGVzOiBib29sZWFuLFxyXG4gICAgICAgICAgICBwcm9tcHRGb3JVbmNhdGVnb3JpemVkOiBib29sZWFuLFxyXG4gICAgICAgICAgICBpc0VudGVycHJpc2VQcm9kdWN0OiBib29sZWFuLFxyXG4gICAgICAgICAgICByZWFkb25seSBuZXdUYWJQYWdlVXJsczogVFNlcmlhbGl6ZWROZXdUYWJQYWdlVXJsc3xFbXB0eU9iamVjdCkge1xyXG4gICAgICAgIHN1cGVyKFxyXG4gICAgICAgICAgICBpc0VuYWJsZWQsXHJcbiAgICAgICAgICAgIGJsb2NrZWRQYWdlU3RyaW5ncyxcclxuICAgICAgICAgICAgcGhpc2hpbmdTb3VyY2VTaXRlcyxcclxuICAgICAgICAgICAgcGhpc2hpbmdOYXZpZ2F0aW9uU2VxdWVuY2VzLFxyXG4gICAgICAgICAgICB0cnVzdGVkU2l0ZXMsXHJcbiAgICAgICAgICAgIHVudHJ1c3RlZFNpdGVzLFxyXG4gICAgICAgICAgICB1c2VyVHJ1c3RlZE9yaWdpbnMsXHJcbiAgICAgICAgICAgIHVzZXJVbnRydXN0ZWRPcmlnaW5zLFxyXG4gICAgICAgICAgICBvcGVuUGhpc2hpbmdMaW5rc0luU2VjdXJlQnJvd3NlcixcclxuICAgICAgICAgICAgcHJpb3JpdGlzZVRydXN0ZWRTaXRlcyxcclxuICAgICAgICAgICAgcHJvbXB0Rm9yVW5jYXRlZ29yaXplZCxcclxuICAgICAgICAgICAgaXNFbnRlcnByaXNlUHJvZHVjdClcclxuICAgIH1cclxufVxyXG5leHBvcnQgdHlwZSBDb25maWdDaGFuZ2VkVjcgPSBFeHRlbnNpYmxlQ29uZmlnQ2hhbmdlZFY3PFNlcmlhbGl6ZWRJc0VuYWJsZWREYXRhVjEsIFNlcmlhbGl6ZWROZXdUYWJQYWdlVXJsc1Y3PjtcclxuXHJcbmV4cG9ydCBjbGFzcyBUcnVzdFVybFY4IGV4dGVuZHMgVHJ1c3RVcmxWNiB7XHJcbiAgICBjb25zdHJ1Y3RvcihcclxuICAgICAgICAgICAgbmF2aWdhdGVUb1VybFNwZWM6IHN0cmluZyxcclxuICAgICAgICAgICAgYmxvY2tlZFVybFNwZWM6IHN0cmluZyxcclxuICAgICAgICAgICAgdHJ1c3RVcmw6IGJvb2xlYW4sXHJcbiAgICAgICAgICAgIHJlbWVtYmVyRGVjaXNpb246IGJvb2xlYW4sXHJcbiAgICAgICAgICAgIHJlYWRvbmx5IGRvbnRBc2tBZ2FpbjogYm9vbGVhbixcclxuICAgICAgICAgICAgY29udGVudFR5cGU6IE1heWJlPHN0cmluZz4pIHtcclxuICAgICAgICBzdXBlcihuYXZpZ2F0ZVRvVXJsU3BlYywgYmxvY2tlZFVybFNwZWMsIHRydXN0VXJsLCByZW1lbWJlckRlY2lzaW9uLCBjb250ZW50VHlwZSk7XHJcbiAgICAgICAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgRG9udEFza0FnYWluVjgge1xyXG4gICAgY29uc3RydWN0b3IoKSB7fVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgRXh0ZW5zaWJsZUNvbmZpZ0NoYW5nZWRWODxUU2VyaWFsaXplZElzRW5hYmxlZERhdGEsIFRTZXJpYWxpemVkTmV3VGFiUGFnZVVybHM+IGV4dGVuZHMgRXh0ZW5zaWJsZUNvbmZpZ0NoYW5nZWRWNzxUU2VyaWFsaXplZElzRW5hYmxlZERhdGEsIFRTZXJpYWxpemVkTmV3VGFiUGFnZVVybHM+IHtcclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgICAgICBpc0VuYWJsZWQ6IFRTZXJpYWxpemVkSXNFbmFibGVkRGF0YXxFbXB0eU9iamVjdCxcclxuICAgICAgICAgICAgcGhpc2hpbmdTb3VyY2VTaXRlczogU2VyaWFsaXplZFBoaXNoaW5nU291cmNlU2l0ZXN8RW1wdHlPYmplY3QsXHJcbiAgICAgICAgICAgIHBoaXNoaW5nTmF2aWdhdGlvblNlcXVlbmNlczogU2VyaWFsaXplZFBoaXNoaW5nTmF2U2VxRGF0YXxFbXB0eU9iamVjdCxcclxuICAgICAgICAgICAgdHJ1c3RlZFNpdGVzIDogc3RyaW5nW10sXHJcbiAgICAgICAgICAgIHVudHJ1c3RlZFNpdGVzIDogc3RyaW5nW10sXHJcbiAgICAgICAgICAgIHVzZXJUcnVzdGVkT3JpZ2lucyA6IHN0cmluZ1tdLFxyXG4gICAgICAgICAgICB1c2VyVW50cnVzdGVkT3JpZ2lucyA6IHN0cmluZ1tdLFxyXG4gICAgICAgICAgICBvcGVuUGhpc2hpbmdMaW5rc0luU2VjdXJlQnJvd3NlcjogYm9vbGVhbixcclxuICAgICAgICAgICAgcHJpb3JpdGlzZVRydXN0ZWRTaXRlczogYm9vbGVhbixcclxuICAgICAgICAgICAgcHJvbXB0Rm9yVW5jYXRlZ29yaXplZDogYm9vbGVhbixcclxuICAgICAgICAgICAgaXNFbnRlcnByaXNlUHJvZHVjdDogYm9vbGVhbixcclxuICAgICAgICAgICAgcmVhZG9ubHkgaXNDb25zdW1lclByb2R1Y3Q6IGJvb2xlYW4sXHJcbiAgICAgICAgICAgIG5ld1RhYlBhZ2VVcmxzOiBUU2VyaWFsaXplZE5ld1RhYlBhZ2VVcmxzfEVtcHR5T2JqZWN0LFxyXG4gICAgICAgICAgICByZWFkb25seSBibG9ja2VkUGFnZUxlYXJuTW9yZVVSTDogc3RyaW5nKSB7XHJcbiAgICAgICAgc3VwZXIoXHJcbiAgICAgICAgICAgIGlzRW5hYmxlZCxcclxuICAgICAgICAgICAge30sIC8vIGJsb2NrZWRQYWdlU3RyaW5ncyBpcyBkZXByZWN0ZWQgYnV0IGl0J3MgYXdrd2FyZCB0byByZW1vdmUgYmVjYXVzZSBtZXNzYWdlcyBpbmhlcml0IGZyb20gcHJldmlvdXMgdmVyc2lvbnNcclxuICAgICAgICAgICAgcGhpc2hpbmdTb3VyY2VTaXRlcyxcclxuICAgICAgICAgICAgcGhpc2hpbmdOYXZpZ2F0aW9uU2VxdWVuY2VzLFxyXG4gICAgICAgICAgICB0cnVzdGVkU2l0ZXMsXHJcbiAgICAgICAgICAgIHVudHJ1c3RlZFNpdGVzLFxyXG4gICAgICAgICAgICB1c2VyVHJ1c3RlZE9yaWdpbnMsXHJcbiAgICAgICAgICAgIHVzZXJVbnRydXN0ZWRPcmlnaW5zLFxyXG4gICAgICAgICAgICBvcGVuUGhpc2hpbmdMaW5rc0luU2VjdXJlQnJvd3NlcixcclxuICAgICAgICAgICAgcHJpb3JpdGlzZVRydXN0ZWRTaXRlcyxcclxuICAgICAgICAgICAgcHJvbXB0Rm9yVW5jYXRlZ29yaXplZCxcclxuICAgICAgICAgICAgaXNFbnRlcnByaXNlUHJvZHVjdCxcclxuICAgICAgICAgICAgbmV3VGFiUGFnZVVybHMpXHJcbiAgICB9XHJcbn1cclxuZXhwb3J0IHR5cGUgQ29uZmlnQ2hhbmdlZFY4ID0gRXh0ZW5zaWJsZUNvbmZpZ0NoYW5nZWRWODxTZXJpYWxpemVkSXNFbmFibGVkRGF0YVYxLCBTZXJpYWxpemVkTmV3VGFiUGFnZVVybHNWNz47XHJcblxyXG5leHBvcnQgY2xhc3MgUG9wdXBEYXRhUmVzcG9uc2VWOSBleHRlbmRzIFBvcHVwRGF0YVJlc3BvbnNlVjUge1xyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAgICAgICAgIHBvcHVwTWVzc2FnZTogSTE4bk1lc3NhZ2VzLFxyXG4gICAgICAgICAgICBvcGVuUGhpc2hpbmdMaW5rc0luU2VjdXJlQnJvd3NlcjogYm9vbGVhbixcclxuICAgICAgICAgICAgaXNFbnRlcnByaXNlUHJvZHVjdDogYm9vbGVhbixcclxuICAgICAgICAgICAgcmVhZG9ubHkgZG9udEFza0FnYWluOiBib29sZWFuKSB7XHJcbiAgICAgICAgc3VwZXIocG9wdXBNZXNzYWdlLCBvcGVuUGhpc2hpbmdMaW5rc0luU2VjdXJlQnJvd3NlciwgaXNFbnRlcnByaXNlUHJvZHVjdClcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIERvbnRBc2tBZ2FpblY5IGV4dGVuZHMgRG9udEFza0FnYWluVjgge1xyXG4gICAgY29uc3RydWN0b3IocmVhZG9ubHkgZG9udEFza0FnYWluOiBib29sZWFuKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEV4dGVuc2libGVDb25maWdDaGFuZ2VkVjk8VFNlcmlhbGl6ZWRJc0VuYWJsZWREYXRhLCBUU2VyaWFsaXplZE5ld1RhYlBhZ2VVcmxzPiBleHRlbmRzIEV4dGVuc2libGVDb25maWdDaGFuZ2VkVjg8VFNlcmlhbGl6ZWRJc0VuYWJsZWREYXRhLCBUU2VyaWFsaXplZE5ld1RhYlBhZ2VVcmxzPiB7XHJcbiAgICBjb25zdHJ1Y3RvcihcclxuICAgICAgICAgICAgaXNFbmFibGVkOiBUU2VyaWFsaXplZElzRW5hYmxlZERhdGF8RW1wdHlPYmplY3QsXHJcbiAgICAgICAgICAgIHBoaXNoaW5nU291cmNlU2l0ZXM6IFNlcmlhbGl6ZWRQaGlzaGluZ1NvdXJjZVNpdGVzfEVtcHR5T2JqZWN0LFxyXG4gICAgICAgICAgICBwaGlzaGluZ05hdmlnYXRpb25TZXF1ZW5jZXM6IFNlcmlhbGl6ZWRQaGlzaGluZ05hdlNlcURhdGF8RW1wdHlPYmplY3QsXHJcbiAgICAgICAgICAgIHRydXN0ZWRTaXRlcyA6IHN0cmluZ1tdLFxyXG4gICAgICAgICAgICB1bnRydXN0ZWRTaXRlcyA6IHN0cmluZ1tdLFxyXG4gICAgICAgICAgICB1c2VyVHJ1c3RlZE9yaWdpbnMgOiBzdHJpbmdbXSxcclxuICAgICAgICAgICAgdXNlclVudHJ1c3RlZE9yaWdpbnMgOiBzdHJpbmdbXSxcclxuICAgICAgICAgICAgb3BlblBoaXNoaW5nTGlua3NJblNlY3VyZUJyb3dzZXI6IGJvb2xlYW4sXHJcbiAgICAgICAgICAgIHByaW9yaXRpc2VUcnVzdGVkU2l0ZXM6IGJvb2xlYW4sXHJcbiAgICAgICAgICAgIHByb21wdEZvclVuY2F0ZWdvcml6ZWQ6IGJvb2xlYW4sXHJcbiAgICAgICAgICAgIGlzRW50ZXJwcmlzZVByb2R1Y3Q6IGJvb2xlYW4sXHJcbiAgICAgICAgICAgIGlzQ29uc3VtZXJQcm9kdWN0OiBib29sZWFuLFxyXG4gICAgICAgICAgICBuZXdUYWJQYWdlVXJsczogVFNlcmlhbGl6ZWROZXdUYWJQYWdlVXJsc3xFbXB0eU9iamVjdCxcclxuICAgICAgICAgICAgYmxvY2tlZFBhZ2VMZWFybk1vcmVVUkw6IHN0cmluZyxcclxuICAgICAgICAgICAgcmVhZG9ubHkgZG9udEFza0FnYWluOiBib29sZWFuKSB7XHJcbiAgICAgICAgc3VwZXIoXHJcbiAgICAgICAgICAgIGlzRW5hYmxlZCxcclxuICAgICAgICAgICAgcGhpc2hpbmdTb3VyY2VTaXRlcyxcclxuICAgICAgICAgICAgcGhpc2hpbmdOYXZpZ2F0aW9uU2VxdWVuY2VzLFxyXG4gICAgICAgICAgICB0cnVzdGVkU2l0ZXMsXHJcbiAgICAgICAgICAgIHVudHJ1c3RlZFNpdGVzLFxyXG4gICAgICAgICAgICB1c2VyVHJ1c3RlZE9yaWdpbnMsXHJcbiAgICAgICAgICAgIHVzZXJVbnRydXN0ZWRPcmlnaW5zLFxyXG4gICAgICAgICAgICBvcGVuUGhpc2hpbmdMaW5rc0luU2VjdXJlQnJvd3NlcixcclxuICAgICAgICAgICAgcHJpb3JpdGlzZVRydXN0ZWRTaXRlcyxcclxuICAgICAgICAgICAgcHJvbXB0Rm9yVW5jYXRlZ29yaXplZCxcclxuICAgICAgICAgICAgaXNFbnRlcnByaXNlUHJvZHVjdCxcclxuICAgICAgICAgICAgaXNDb25zdW1lclByb2R1Y3QsXHJcbiAgICAgICAgICAgIG5ld1RhYlBhZ2VVcmxzLFxyXG4gICAgICAgICAgICBibG9ja2VkUGFnZUxlYXJuTW9yZVVSTClcclxuICAgIH1cclxufVxyXG5leHBvcnQgdHlwZSBDb25maWdDaGFuZ2VkVjkgPSBFeHRlbnNpYmxlQ29uZmlnQ2hhbmdlZFY5PFNlcmlhbGl6ZWRJc0VuYWJsZWREYXRhVjEsIFNlcmlhbGl6ZWROZXdUYWJQYWdlVXJsc1Y3PjtcclxuXHJcbmV4cG9ydCBjbGFzcyBTdG9wSGVscGVyVjEwIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge31cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEVkZ2VBY2tWMTAge1xyXG4gICAgY29uc3RydWN0b3IoKSB7fVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgRW5kT2ZTdHJlYW1WMTAge1xyXG4gICAgY29uc3RydWN0b3IoKSB7fVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgSGVhcnRiZWF0VjEwIGV4dGVuZHMgSGVhcnRiZWF0VjEge1xyXG4gICAgY29uc3RydWN0b3IocmVhZG9ubHkgaWQgOiBJZCkge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIERvbid0IGV4dGVudCBQb3B1cERhdGFSZXNwb25zZVY5IHNpbmNlIFBoaXNoaW5nTGlua3NJblNlY3VyZUJyb3dzZXIgYW5kIGRvbnRBc2tBZ2FpbiBoYXZlIGJlZW4gZGVwcmVjYXRlZFxyXG5leHBvcnQgY2xhc3MgUG9wdXBEYXRhUmVzcG9uc2VWMTEge1xyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAgICAgICAgIHJlYWRvbmx5IHBvcHVwTWVzc2FnZTogSTE4bk1lc3NhZ2VzLFxyXG4gICAgICAgICAgICByZWFkb25seSBzaG93Q2xlYXJSZW1lbWJlcmVkRGVjaXNpb25zSW5mbzogYm9vbGVhbixcclxuICAgICAgICAgICAgcmVhZG9ubHkgaXNFbnRlcnByaXNlUHJvZHVjdDogYm9vbGVhbixcclxuICAgICAgICAgICAgcmVhZG9ubHkgaGVscExpbmtVUkw6IHN0cmluZykge1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZW51bSBQcm9kdWN0U3RhdHVzZXMge1xyXG4gICAgRW5hYmxlZCxcclxuICAgIERpc2FibGVkLFxyXG4gICAgSW5pdFJlcXVpcmVkLFxyXG4gICAgVW5saWNlbnNlZCxcclxuICAgIFVua25vd25cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEV4dGVuc2libGVDb25maWdDaGFuZ2VkVjExPFRTZXJpYWxpemVkSXNFbmFibGVkRGF0YSwgVFNlcmlhbGl6ZWROZXdUYWJQYWdlVXJscz4gZXh0ZW5kcyBFeHRlbnNpYmxlQ29uZmlnQ2hhbmdlZFY5PFRTZXJpYWxpemVkSXNFbmFibGVkRGF0YSwgVFNlcmlhbGl6ZWROZXdUYWJQYWdlVXJscz4ge1xyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAgICAgICAgIGlzRW5hYmxlZDogVFNlcmlhbGl6ZWRJc0VuYWJsZWREYXRhfEVtcHR5T2JqZWN0LFxyXG4gICAgICAgICAgICBwaGlzaGluZ1NvdXJjZVNpdGVzOiBTZXJpYWxpemVkUGhpc2hpbmdTb3VyY2VTaXRlc3xFbXB0eU9iamVjdCxcclxuICAgICAgICAgICAgcGhpc2hpbmdOYXZpZ2F0aW9uU2VxdWVuY2VzOiBTZXJpYWxpemVkUGhpc2hpbmdOYXZTZXFEYXRhfEVtcHR5T2JqZWN0LFxyXG4gICAgICAgICAgICB0cnVzdGVkU2l0ZXMgOiBzdHJpbmdbXSxcclxuICAgICAgICAgICAgdW50cnVzdGVkU2l0ZXMgOiBzdHJpbmdbXSxcclxuICAgICAgICAgICAgdXNlclRydXN0ZWRPcmlnaW5zIDogc3RyaW5nW10sXHJcbiAgICAgICAgICAgIHVzZXJVbnRydXN0ZWRPcmlnaW5zIDogc3RyaW5nW10sXHJcbiAgICAgICAgICAgIG9wZW5QaGlzaGluZ0xpbmtzSW5TZWN1cmVCcm93c2VyOiBib29sZWFuLFxyXG4gICAgICAgICAgICBwcmlvcml0aXNlVHJ1c3RlZFNpdGVzOiBib29sZWFuLFxyXG4gICAgICAgICAgICBwcm9tcHRGb3JVbmNhdGVnb3JpemVkOiBib29sZWFuLFxyXG4gICAgICAgICAgICBpc0VudGVycHJpc2VQcm9kdWN0OiBib29sZWFuLFxyXG4gICAgICAgICAgICBpc0NvbnN1bWVyUHJvZHVjdDogYm9vbGVhbixcclxuICAgICAgICAgICAgbmV3VGFiUGFnZVVybHM6IFRTZXJpYWxpemVkTmV3VGFiUGFnZVVybHN8RW1wdHlPYmplY3QsXHJcbiAgICAgICAgICAgIGJsb2NrZWRQYWdlTGVhcm5Nb3JlVVJMOiBzdHJpbmcsXHJcbiAgICAgICAgICAgIGRvbnRBc2tBZ2FpbjogYm9vbGVhbixcclxuICAgICAgICAgICAgcmVhZG9ubHkgc2VjdXJlQnJvd3NlclJlZGlyZWN0VHJ1c3RlZFNpdGVzOiBib29sZWFuLFxyXG4gICAgICAgICAgICByZWFkb25seSBwcm9kdWN0U3RhdHVzOiBQcm9kdWN0U3RhdHVzZXMpIHtcclxuICAgICAgICBzdXBlcihcclxuICAgICAgICAgICAgaXNFbmFibGVkLFxyXG4gICAgICAgICAgICBwaGlzaGluZ1NvdXJjZVNpdGVzLFxyXG4gICAgICAgICAgICBwaGlzaGluZ05hdmlnYXRpb25TZXF1ZW5jZXMsXHJcbiAgICAgICAgICAgIHRydXN0ZWRTaXRlcyxcclxuICAgICAgICAgICAgdW50cnVzdGVkU2l0ZXMsXHJcbiAgICAgICAgICAgIHVzZXJUcnVzdGVkT3JpZ2lucyxcclxuICAgICAgICAgICAgdXNlclVudHJ1c3RlZE9yaWdpbnMsXHJcbiAgICAgICAgICAgIG9wZW5QaGlzaGluZ0xpbmtzSW5TZWN1cmVCcm93c2VyLFxyXG4gICAgICAgICAgICBwcmlvcml0aXNlVHJ1c3RlZFNpdGVzLFxyXG4gICAgICAgICAgICBwcm9tcHRGb3JVbmNhdGVnb3JpemVkLFxyXG4gICAgICAgICAgICBpc0VudGVycHJpc2VQcm9kdWN0LFxyXG4gICAgICAgICAgICBpc0NvbnN1bWVyUHJvZHVjdCxcclxuICAgICAgICAgICAgbmV3VGFiUGFnZVVybHMsXHJcbiAgICAgICAgICAgIGJsb2NrZWRQYWdlTGVhcm5Nb3JlVVJMLFxyXG4gICAgICAgICAgICBkb250QXNrQWdhaW4pXHJcbiAgICB9XHJcbn1cclxuZXhwb3J0IHR5cGUgQ29uZmlnQ2hhbmdlZFYxMSA9IEV4dGVuc2libGVDb25maWdDaGFuZ2VkVjExPFNlcmlhbGl6ZWRJc0VuYWJsZWREYXRhVjEyLCBTZXJpYWxpemVkTmV3VGFiUGFnZVVybHNWMTI+O1xyXG5cclxuZXhwb3J0IGNsYXNzIEV4dGVuc2libGVDb25maWdDaGFuZ2VkVjEyPFRTZXJpYWxpemVkSXNFbmFibGVkRGF0YSwgVFNlcmlhbGl6ZWROZXdUYWJQYWdlVXJscz4gZXh0ZW5kcyBFeHRlbnNpYmxlQ29uZmlnQ2hhbmdlZFYxMTxUU2VyaWFsaXplZElzRW5hYmxlZERhdGEsIFRTZXJpYWxpemVkTmV3VGFiUGFnZVVybHM+IHtcclxufVxyXG5leHBvcnQgdHlwZSBDb25maWdDaGFuZ2VkVjEyID0gRXh0ZW5zaWJsZUNvbmZpZ0NoYW5nZWRWMTI8U2VyaWFsaXplZElzRW5hYmxlZERhdGFWMTIsIFNlcmlhbGl6ZWROZXdUYWJQYWdlVXJsc1YxMj47XHJcblxyXG5leHBvcnQgY2xhc3MgTWVzc2FnZSB7XHJcbiAgICBjb25zdHJ1Y3RvcihcclxuICAgICAgICByZWFkb25seSB0eXBlOiBNZXNzYWdlVHlwZSxcclxuICAgICAgICByZWFkb25seSBwYXlsb2FkOiBNZXNzYWdlUGF5bG9hZCkgeyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBtZXNzYWdlVG9TdHJpbmcobWVzc2FnZTogTWVzc2FnZSk6IHN0cmluZyB7XHJcbiAgICAvLyBMb2cgdGhlIHJlcHV0YWJsZSBzaXRlcyBsaXN0IGNvbmNpc2VseSBzaW5jZSBpdCdzIHZlcnkgbG9uZy5cclxuICAgIGlmIChtZXNzYWdlLnR5cGUgPT09IE1lc3NhZ2VUeXBlLnJlcHV0YXRpb25DaGFuZ2VkVjMpIHtcclxuICAgICAgICBjb25zdCBwYXlsb2FkID0gbWVzc2FnZS5wYXlsb2FkIGFzIFJlcHV0YXRpb25DaGFuZ2VkVjM7XHJcbiAgICAgICAgbGV0IHN0ciA9IGBPYmplY3R7XFxuXFx0YCArXHJcbiAgICAgICAgICAgICAgICAgIGB0eXBlOiAke01lc3NhZ2VUeXBlLnJlcHV0YXRpb25DaGFuZ2VkVjN9LFxcblxcdGAgK1xyXG4gICAgICAgICAgICAgICAgICBgcGF5bG9hZDogT2JqZWN0e1xcblxcdFxcdFxcdGAgK1xyXG4gICAgICAgICAgICAgICAgICBgaW5kZXg6ICR7cGF5bG9hZC5pbmRleH0sXFxuXFx0XFx0XFx0YCArXHJcbiAgICAgICAgICAgICAgICAgIGB0b3RhbDogJHtwYXlsb2FkLnRvdGFsfSxcXG5cXHRcXHRcXHRgICtcclxuICAgICAgICAgICAgICAgICAgYHJlcHV0YWJsZVNpdGU6IFsgYDtcclxuICAgICAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIHBheWxvYWQucmVwdXRhYmxlU2l0ZXMpIHtcclxuICAgICAgICAgICAgc3RyICs9IGBbJHtlbnRyeVswXX0sJHtlbnRyeVsxXX1dLCBgXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHN0ciArPSBcIl0sXFxuXFx0fSxcXG59XCJcclxuICAgICAgICByZXR1cm4gc3RyO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gdG9TdHJpbmcobWVzc2FnZSk7XHJcbiAgICB9XHJcbn1cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4uL2xpYi9ob3N0L21lc3NhZ2VzLnRzIiwiLy8gQ29weXJpZ2h0IChjKSAyMDE4IEJyb21pdW0sIEluYy5cclxuLy8gVXNlIG9mIHRoZSBCcm9taXVtLCBJbmMuIHNvZnR3YXJlIHJlcXVpcmVzIGEgbGljZW5zZSBhZ3JlZW1lbnQgd2l0aCBCcm9taXVtLCBJbmMuIG9yIGFuIGF1dGhvcml6ZWQgcmVzZWxsZXIuXHJcblxyXG4vLy8gPHJlZmVyZW5jZSB0eXBlcz1cImNocm9tZVwiLz5cclxuaW1wb3J0IHsgU2NoZW1lIH0gZnJvbSBcIi4vb3JpZ2luXCI7XHJcbmltcG9ydCB7IE1heWJlLCBub25lLCBzb21lIH0gZnJvbSBcIi4vbWF5YmVcIjtcclxuaW1wb3J0IHsgcGFyc2VVcmwgfSBmcm9tIFwiLi91cmwtdXRpbHNcIjtcclxuaW1wb3J0IHsgU2VyaWFsaXplZEJyb3dzZXJJbmZvIH0gZnJvbSBcIi4vbWVzc2FnZXNcIjtcclxuaW1wb3J0IHsgcGFyc2VVc2VyQWdlbnQsIHBhcnNlUHJvZHVjdFZlcnNpb24gfSBmcm9tIFwiLi91c2VyLWFnZW50LXBhcnNlclwiO1xyXG5pbXBvcnQgeyBjb21wYXJlU3RyaW5ncyB9IGZyb20gXCIuL3N0cmluZy11dGlsc1wiO1xyXG5pbXBvcnQgeyBmaW5kVW5pcXVlLCBtYXliZUZpcnN0IH0gZnJvbSBcIi4vYXJyYXktdXRpbHNcIjtcclxuXHJcbmV4cG9ydCBlbnVtIEJyb3dzZXIge1xyXG4gICAgY2hyb21lLFxyXG4gICAgZmlyZWZveCxcclxuICAgIGVkZ2UsXHJcbiAgICBlZGdlQ2hyb21pdW1cclxufVxyXG5cclxuY29uc3QgYnJvd3NlclNjaGVtZU1hcDogTWFwPFN0cmluZywgQnJvd3Nlcj4gPSBuZXcgTWFwKFtcclxuICAgIFtTY2hlbWUuQ0hST01FX0VYVEVOU0lPTiwgQnJvd3Nlci5jaHJvbWVdLFxyXG4gICAgW1NjaGVtZS5GSVJFRk9YX0VYVEVOU0lPTiwgQnJvd3Nlci5maXJlZm94XSxcclxuICAgIFtTY2hlbWUuRURHRV9FWFRFTlNJT04sIEJyb3dzZXIuZWRnZV1cclxuICAgIC8vIFdlIGluc3RhbGwgU0JYIGZyb20gdGhlIENocm9tZSBXZWIgU3RvcmUgaW50byBDaHJvbWl1bS1iYXNlZCBFZGdlIGFuZCBpdCB1c2VzIHRoZSBjaHJvbWUtZXh0ZW5zaW9uOi8vIHNjaGVtZSBzb1xyXG4gICAgLy8gd2UgZG9uJ3QgYWRkIGFuIGVudHJ5IGZvciB8QnJvd3Nlci5lZGdlQ2hyb21pdW18IGhlcmUuXHJcbl0pXHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q3VycmVudEJyb3dzZXIoKTogTWF5YmU8QnJvd3Nlcj4ge1xyXG4gICAgY29uc3QgbWFuaWZlc3RVUkwgPSBwYXJzZVVybChjaHJvbWUucnVudGltZS5nZXRVUkwoXCJtYW5pZmVzdC5qc29uXCIpKTtcclxuICAgIGlmIChub25lKG1hbmlmZXN0VVJMKSkge1xyXG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgZm9yIChjb25zdCBzY2hlbWUgb2YgYnJvd3NlclNjaGVtZU1hcC5rZXlzKCkpIHtcclxuICAgICAgICBpZiAoc2NoZW1lID09PSBtYW5pZmVzdFVSTC5wcm90b2NvbCkge1xyXG4gICAgICAgICAgICBjb25zdCBicm93c2VyID0gYnJvd3NlclNjaGVtZU1hcC5nZXQoc2NoZW1lKTtcclxuICAgICAgICAgICAgaWYgKGJyb3dzZXIgPT09IEJyb3dzZXIuY2hyb21lKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBVc2UgdGhlIHVzZXJBZ2VudCB0byBkaXN0aW5ndWlzaCBDaHJvbWUgYW5kIENocm9taXVtLWJhc2VkIEVkZ2UuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBwcm9kdWN0cyA9IHBhcnNlVXNlckFnZW50KHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50KVxyXG4gICAgICAgICAgICAgICAgaWYgKHNvbWUocHJvZHVjdHMpICYmIHByb2R1Y3RzLnNvbWUoKHByb2R1Y3QpID0+IHByb2R1Y3QubmFtZSA9PT0gXCJFZGdcIikpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gQnJvd3Nlci5lZGdlQ2hyb21pdW07XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBCcm93c2VyLmNocm9tZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gYnJvd3NlcjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q3VycmVudEJyb3dzZXJJbmZvKCk6IFNlcmlhbGl6ZWRCcm93c2VySW5mbyB7XHJcbiAgICBjb25zdCBtYW5pZmVzdFVSTCA9IHBhcnNlVXJsKGNocm9tZS5ydW50aW1lLmdldFVSTChcIm1hbmlmZXN0Lmpzb25cIikpO1xyXG4gICAgY29uc3QgY3VycmVudEJyb3dzZXIgPSBnZXRDdXJyZW50QnJvd3NlcigpO1xyXG4gICAgaWYgKG5vbmUobWFuaWZlc3RVUkwpIHx8IG5vbmUoY3VycmVudEJyb3dzZXIpKSB7XHJcbiAgICAgICAgcmV0dXJuIHsgYnJvd3NlcjogXCJ1bmtub3duXCIsIHVybEhvc3RuYW1lOiBcIlwiIH07XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHsgYnJvd3NlcjogQnJvd3NlcltjdXJyZW50QnJvd3Nlcl0sIHVybEhvc3RuYW1lOiBtYW5pZmVzdFVSTC5ob3N0bmFtZSB9O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaXMzMmJpdEZpcmVmb3goKTogYm9vbGVhbiB7XHJcbiAgICBjb25zdCB1c2VyQWdlbnQgPSB3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudDtcclxuICAgIC8vIFNlZSBodHRwczovL3N1cHBvcnQubW96aWxsYS5vcmcvZW4tVVMva2IvaG93LWRvLWktdGVsbC1pZi0zMi1iaXQtb3ItNjQtYml0I3dfdXNlci1hZ2VudFxyXG4gICAgcmV0dXJuIHVzZXJBZ2VudC5zZWFyY2goL1dPVzY0LykgIT09IC0xO1xyXG59XHJcblxyXG5mdW5jdGlvbiBmaW5kVXNlckFnZW50KCk6IE1heWJlPHN0cmluZz4ge1xyXG4gICAgcmV0dXJuIHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZmluZEVkZ2VNYWpvclZlcnNpb24oKTogTWF5YmU8bnVtYmVyPiB7XHJcbiAgICBjb25zdCB1c2VyQWdlbnQgPSBmaW5kVXNlckFnZW50KCk7XHJcbiAgICBpZiAobm9uZSh1c2VyQWdlbnQpKSB7XHJcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgIH1cclxuICAgIGNvbnN0IHByb2R1Y3RzID0gcGFyc2VVc2VyQWdlbnQodXNlckFnZW50KTtcclxuICAgIGlmIChub25lKHByb2R1Y3RzKSkge1xyXG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICB9XHJcbiAgICBjb25zdCBlZGdlUHJvZHVjdCA9IGZpbmRVbmlxdWUocHJvZHVjdHMsIChwcm9kdWN0KSA9PiBjb21wYXJlU3RyaW5ncyhwcm9kdWN0Lm5hbWUsIFwiRWRnZVwiKSk7XHJcbiAgICBpZiAobm9uZShlZGdlUHJvZHVjdCkpIHtcclxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgfVxyXG4gICAgY29uc3QgZWRnZVByb2R1Y3RWZXJpc29uU3RyID0gZWRnZVByb2R1Y3QudmVyc2lvbjtcclxuICAgIGlmIChub25lKGVkZ2VQcm9kdWN0VmVyaXNvblN0cikpIHtcclxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgfVxyXG4gICAgY29uc3QgZWRnZVByb2R1Y3RWZXJzaW9uID0gcGFyc2VQcm9kdWN0VmVyc2lvbihlZGdlUHJvZHVjdFZlcmlzb25TdHIpO1xyXG4gICAgY29uc3QgZWRnZU1ham9yVmVyc2lvbiA9IG1heWJlRmlyc3QoZWRnZVByb2R1Y3RWZXJzaW9uKTtcclxuICAgIHJldHVybiBlZGdlTWFqb3JWZXJzaW9uO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gYnJvd3NlclRvU3RyaW5nKGJyb3dzZXI6IE1heWJlPEJyb3dzZXI+KTogc3RyaW5nIHtcclxuICAgIGlmIChub25lKGJyb3dzZXIpKSB7XHJcbiAgICAgICAgcmV0dXJuIFwiXCI7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gQnJvd3Nlclticm93c2VyXTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGJyb3dzZXJUb0Rpc3BsYXlTdHJpbmcoYnJvd3NlcjogQnJvd3Nlcik6IHN0cmluZyB7XHJcbiAgICBzd2l0Y2goYnJvd3Nlcikge1xyXG4gICAgICAgIGNhc2UgQnJvd3Nlci5jaHJvbWU6XHJcbiAgICAgICAgICAgIHJldHVybiBcIkdvb2dsZSBDaHJvbWVcIjtcclxuICAgICAgICBjYXNlIEJyb3dzZXIuZmlyZWZveDpcclxuICAgICAgICAgICAgcmV0dXJuIFwiTW96aWxsYSBGaXJlZm94XCI7XHJcbiAgICAgICAgY2FzZSBCcm93c2VyLmVkZ2U6XHJcbiAgICAgICAgICAgIHJldHVybiBcIk1pY3Jvc29mdCBFZGdlXCI7XHJcbiAgICAgICAgY2FzZSBCcm93c2VyLmVkZ2VDaHJvbWl1bTpcclxuICAgICAgICAgICAgcmV0dXJuIFwiTWljcm9zb2Z0IEVkZ2VcIjtcclxuICAgIH1cclxufVxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuLi9saWIvY29tbW9uL2Jyb3dzZXIudHMiLCIvLyBDb3B5cmlnaHQgKGMpIDIwMTggQnJvbWl1bSwgSW5jLlxyXG4vLyBVc2Ugb2YgdGhlIEJyb21pdW0sIEluYy4gc29mdHdhcmUgcmVxdWlyZXMgYSBsaWNlbnNlIGFncmVlbWVudCB3aXRoIEJyb21pdW0sIEluYy4gb3IgYW4gYXV0aG9yaXplZCByZXNlbGxlci5cclxuXHJcbmV4cG9ydCBlbnVtIENvbmZpZ0tleSB7XHJcbiAgICBpc0VuYWJsZWQsXHJcbiAgICB0cnVzdGVkVXJscyxcclxuICAgIHVudHJ1c3RlZFVybHMsXHJcbiAgICBwaGlzaGluZ1NvdXJjZVNpdGVzLFxyXG4gICAgcGhpc2hpbmdOYXZpZ2F0aW9uU2VxdWVuY2VzLFxyXG4gICAgdXNlclRydXN0ZWRPcmlnaW5zLFxyXG4gICAgdXNlclVudHJ1c3RlZE9yaWdpbnMsXHJcbiAgICBvcGVuUGhpc2hpbmdMaW5rc0luU2VjdXJlQnJvd3NlcixcclxuICAgIHByaW9yaXRpc2VUcnVzdGVkU2l0ZXMsXHJcbiAgICBwcm9tcHRGb3JVbmNhdGVnb3JpemVkLFxyXG4gICAgcmVwdXRhYmxlVXJscyxcclxuICAgIGlzRW50ZXJwcmlzZVByb2R1Y3QsXHJcbiAgICBpc0NvbnN1bWVyUHJvZHVjdCxcclxuICAgIG5ld1RhYlBhZ2VVcmxzLFxyXG4gICAgYmxvY2tlZFBhZ2VMZWFybk1vcmVVUkwsXHJcbiAgICBkb250QXNrQWdhaW4sXHJcbiAgICBzZWN1cmVCcm93c2VyUmVkaXJlY3RUcnVzdGVkU2l0ZXMsXHJcbiAgICBwcm9kdWN0U3RhdHVzLFxyXG59XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2NvbmZpZy1rZXlzLnRzIiwiLy8gQ29weXJpZ2h0IChjKSAyMDE4IEJyb21pdW0sIEluYy5cclxuLy8gVXNlIG9mIHRoZSBCcm9taXVtLCBJbmMuIHNvZnR3YXJlIHJlcXVpcmVzIGEgbGljZW5zZSBhZ3JlZW1lbnQgd2l0aCBCcm9taXVtLCBJbmMuIG9yIGFuIGF1dGhvcml6ZWQgcmVzZWxsZXIuXHJcblxyXG5pbXBvcnQgeyBNYXliZSwgc29tZSwgaXNFcXVhbCwgbm9uZSB9IGZyb20gXCIuL21heWJlXCI7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaXNFbXB0eTxUPihhcnJheTogVFtdKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gYXJyYXkubGVuZ3RoID09PSAwO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZmlyc3Q8VD4oYXJyYXk6IFRbXSk6IFQge1xyXG4gICAgcmV0dXJuIGFycmF5WzBdO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gc2Vjb25kPFQ+KGFycmF5OiBUW10pOiBUIHtcclxuICAgIHJldHVybiBhcnJheVsxXTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGxhc3Q8VD4oYXJyYXk6IFRbXSk6IFQge1xyXG4gICAgcmV0dXJuIGFycmF5W2FycmF5Lmxlbmd0aCAtIDFdO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcmVzdDxUPihhcnJheTogVFtdKTogVFtdIHtcclxuICAgIHJldHVybiBhcnJheS5zbGljZSgxKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNvbnRhaW5zPFQ+KGFycmF5OiBUW10sIGVsZW1lbnQ6IFQpIHtcclxuICAgIHJldHVybiBhcnJheS5pbmRleE9mKGVsZW1lbnQpICE9PSAtMTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNvcHlBcnJheTxUPihhcnJheTogVFtdKTogVFtdIHtcclxuICAgIGNvbnN0IGlkZW50aXR5ID0gKHZhbHVlOiBUKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBhcnJheS5tYXAoaWRlbnRpdHkpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaXNBcnJheSh2YWx1ZTogYW55KTogdmFsdWUgaXMgQXJyYXk8YW55PiB7XHJcbiAgICByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBBcnJheTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIG5ld0FycmF5PFQ+KGxlbmd0aDogbnVtYmVyLCB2YWx1ZTogVCk6IEFycmF5PFQ+IHtcclxuICAgIGNvbnN0IGFycmF5ID0gbmV3IEFycmF5PFQ+KCk7XHJcbiAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCArPSAxKSB7XHJcbiAgICAgICAgYXJyYXkucHVzaCh2YWx1ZSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYXJyYXk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBmaW5kSW5kZXg8VD4oYXJyYXk6IFRbXSwgdmFsdWU6IFQpOiBNYXliZTxudW1iZXI+IHtcclxuICAgIGNvbnN0IG5vdEZvdW5kID0gLTE7XHJcbiAgICBjb25zdCBpbmRleCA9IGFycmF5LmluZGV4T2YodmFsdWUpO1xyXG4gICAgaWYgKGluZGV4ID09PSBub3RGb3VuZCkge1xyXG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gaW5kZXg7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBmaW5kQWxsSW5kaWNlczxUPihhcnJheTogVFtdLCBwcmVkaWNhdGU6IChlbGVtZW50OiBUKSA9PiBib29sZWFuKTogbnVtYmVyW10ge1xyXG4gICAgY29uc3QgcmVzdWx0cyA9IG5ldyBBcnJheTxudW1iZXI+KCk7XHJcbiAgICBhcnJheS5mb3JFYWNoKChlbGVtZW50OiBULCBpbmRleDogbnVtYmVyKSA9PiB7XHJcbiAgICAgICAgaWYgKHByZWRpY2F0ZShlbGVtZW50KSkge1xyXG4gICAgICAgICAgICByZXN1bHRzLnB1c2goaW5kZXgpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHJlc3VsdHM7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjb21wYXJlQXJyYXlzPFQ+KGE6IFRbXSwgYjogVFtdLCBjb21wYXJlOiAoYTogVCwgYjogVCkgPT4gYm9vbGVhbiA9IGlzRXF1YWwpOiBib29sZWFuIHtcclxuICAgIGlmIChhLmxlbmd0aCAhPT0gYi5sZW5ndGgpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBjb25zdCBsZW5ndGggPSBhLmxlbmd0aDtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpICs9IDEpIHtcclxuICAgICAgICBpZiAoIWNvbXBhcmUoYVtpXSwgYltpXSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiB0cnVlO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaGFzPFQ+KGFycmF5OiBUW10sIHZhbHVlOiBUKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gc29tZShmaW5kSW5kZXgoYXJyYXksIHZhbHVlKSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBmaW5kVW5pcXVlPFQ+KGFycmF5OiBUW10sIHByZWRpY2F0ZTogKGVsZW1lbnQ6IFQpID0+IGJvb2xlYW4pOiBNYXliZTxUPiB7XHJcbiAgICBjb25zdCBtYXRjaGluZ0VsZW1lbnRzID0gYXJyYXkuZmlsdGVyKHByZWRpY2F0ZSk7XHJcbiAgICBpZiAobWF0Y2hpbmdFbGVtZW50cy5sZW5ndGggIT09IDEpIHtcclxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZpcnN0KG1hdGNoaW5nRWxlbWVudHMpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gbWF5YmVGaXJzdDxUPihhcnJheTogTWF5YmU8VFtdPik6IE1heWJlPFQ+IHtcclxuICAgIGlmIChub25lKGFycmF5KSkge1xyXG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZmlyc3QoYXJyYXkpO1xyXG59XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4uL2xpYi9jb21tb24vYXJyYXktdXRpbHMudHMiLCIvLyBDb3B5cmlnaHQgKGMpIDIwMTggQnJvbWl1bSwgSW5jLlxyXG4vLyBVc2Ugb2YgdGhlIEJyb21pdW0sIEluYy4gc29mdHdhcmUgcmVxdWlyZXMgYSBsaWNlbnNlIGFncmVlbWVudCB3aXRoIEJyb21pdW0sIEluYy4gb3IgYW4gYXV0aG9yaXplZCByZXNlbGxlci5cclxuXHJcbmltcG9ydCB7IE1heWJlLCBzb21lLCBub25lIH0gZnJvbSBcIi4vbWF5YmVcIjtcclxuaW1wb3J0IHsgSGFzaCB9IGZyb20gXCIuL2hhc2hcIjtcclxuaW1wb3J0IHsgbXVybXVySGFzaCB9IGZyb20gXCIuL211cm11ci1oYXNoXCI7XHJcbmltcG9ydCB7IFVSTCwgVVJMT3JTcGVjLCBwYXJzZVVybCB9IGZyb20gXCIuL3VybC11dGlsc1wiO1xyXG5pbXBvcnQgeyBIYXNoU2V0IH0gZnJvbSBcIi4vaGFzaC1tYXBcIjtcclxuaW1wb3J0IHsgbG9nLCBsb2dFcnJvciB9IGZyb20gXCIuL2xvZ1wiO1xyXG5pbXBvcnQgeyBRbG9iYmVyVHJ1ZSwgUWxvYmJlciB9IGZyb20gXCJxbG9iYmVyXCI7XHJcbmltcG9ydCB7IFNpdGVBbmRFeHBpcnkgfSBmcm9tIFwiLi9tZXNzYWdlc1wiO1xyXG5cclxuY29uc3QgZXhjbHVzaW9uUHJlZml4ID0gXCJeXCI7XHJcblxyXG4vLyBSZWd1bGFyIGV4cHJlc3Npb24gZnJvbSBodHRwOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzOTg2I3BhZ2UtNTBcclxuY29uc3Qgd2lsZGNhcmRTcGVjUmVnZXggPSBuZXcgUmVnRXhwKFwiXigoW146Lz8jXSspOik/KC8vKFteLz8jXSopKT8oW14/I10qKShcXFxcPyhbXiNdKikpPygjKC4qKSk/XCIpO1xyXG5cclxuZW51bSBXaWxkY2FyZFNwZWNHcm91cCB7XHJcbiAgICBTY2hlbWUgPSAxLFxyXG4gICAgSG9zdEFuZFBvcnQgPSA0XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBPcmlnaW5QYXJzZU9wdGlvbnMge1xyXG4gICAgcmVhZG9ubHkgYWxsb3dOb25XZWJTYWZlU2NoZW1lcyA6IGJvb2xlYW4gPSBmYWxzZTtcclxuICAgIHJlYWRvbmx5IGFsbG93RmlsZVNjaGVtZTogYm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgcmVhZG9ubHkgYWxsb3dDaHJvbWVTY2hlbWUgOiBib29sZWFuID0gZmFsc2U7XHJcbiAgICByZWFkb25seSBhbGxvd0VkZ2VTY2hlbWUgOiBib29sZWFuID0gZmFsc2U7XHJcbiAgICByZWFkb25seSBhbGxvd0Fib3V0U2NoZW1lIDogYm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgcmVhZG9ubHkgYWxsb3dDaHJvbWVFeHRlbnNpb25TY2hlbWUgOiBib29sZWFuID0gZmFsc2U7XHJcbiAgICByZWFkb25seSBhbGxvd0ZpcmVmb3hFeHRlbnNpb25TY2hlbWUgOiBib29sZWFuID0gZmFsc2U7XHJcbiAgICByZWFkb25seSBhbGxvd0VkZ2VFeHRlbnNpb25TY2hlbWUgOiBib29sZWFuID0gZmFsc2U7XHJcbiAgICByZWFkb25seSBhbGxvd1dpbGRjYXJkcyA6IGJvb2xlYW4gPSBmYWxzZTtcclxuICAgIHJlYWRvbmx5IGFsbG93TWlzc2luZ1dpbGRjYXJkU2NoZW1lIDogYm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgcmVhZG9ubHkgYWxsb3dUcmFpbGluZ1dpbGRjYXJkcyA6IGJvb2xlYW4gPSBmYWxzZTtcclxuXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3Iob3B0aW9ucz8gOiBQYXJ0aWFsPE9yaWdpblBhcnNlT3B0aW9ucz4pIHtcclxuICAgICAgICBPYmplY3QuYXNzaWduKHRoaXMsIG9wdGlvbnMpO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgT3JpZ2luSGFzaE9wdGlvbnMge1xyXG4gICAgcmVhZG9ubHkgc2VlZCA6IEhhc2ggPSAwO1xyXG4gICAgcmVhZG9ubHkgaWdub3JlSHR0cEh0dHBzRGlmZmVyZW5jZTogYm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgcmVhZG9ubHkgaWdub3JlUG9ydCA6IGJvb2xlYW4gPSBmYWxzZTtcclxuXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3Iob3B0aW9ucz8gOiBQYXJ0aWFsPE9yaWdpbkhhc2hPcHRpb25zPikge1xyXG4gICAgICAgIE9iamVjdC5hc3NpZ24odGhpcywgb3B0aW9ucyk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBlbnVtIFNjaGVtZSB7XHJcbiAgICBIVFRQID0gXCJodHRwOlwiLFxyXG4gICAgSFRUUFMgPSBcImh0dHBzOlwiLFxyXG4gICAgRlRQID0gXCJmdHA6XCIsXHJcbiAgICBGVFBTID0gXCJmdHBzOlwiLFxyXG4gICAgV1MgPSBcIndzOlwiLFxyXG4gICAgV1NTID0gXCJ3c3M6XCIsXHJcbiAgICBGSUxFID0gXCJmaWxlOlwiLFxyXG4gICAgQ0hST01FID0gXCJjaHJvbWU6XCIsXHJcbiAgICBFREdFID0gXCJlZGdlOlwiLFxyXG4gICAgQUJPVVQgPSBcImFib3V0OlwiLFxyXG4gICAgSkFWQVNDUklQVCA9IFwiamF2YXNjcmlwdDpcIixcclxuICAgIENIUk9NRV9FWFRFTlNJT04gPSBcImNocm9tZS1leHRlbnNpb246XCIsXHJcbiAgICBGSVJFRk9YX0VYVEVOU0lPTiA9IFwibW96LWV4dGVuc2lvbjpcIixcclxuICAgIEVER0VfRVhURU5TSU9OID0gXCJtcy1icm93c2VyLWV4dGVuc2lvbjpcIixcclxuICAgIFdJTERDQVJEX09ORSA9IFwiKzpcIixcclxuICAgIFdJTERDQVJEX1NPTUUgPSBcIio6XCJcclxufVxyXG5cclxuY29uc3QgbWF0Y2hlck9wdGlvbnMgPSB7XHJcbiAgICBzZXBhcmF0b3I6IFwiLlwiLFxyXG4gICAgd2lsZGNhcmRfb25lOiBTY2hlbWUuV0lMRENBUkRfT05FWzBdLFxyXG4gICAgd2lsZGNhcmRfc29tZTogU2NoZW1lLldJTERDQVJEX1NPTUVbMF0sXHJcbiAgICBjYWNoZV9hZGRzOiBmYWxzZVxyXG59O1xyXG5cclxuY29uc3QgdHJhaWxpbmdXaWxkY2FyZHMgPSBbXHJcbiAgICBtYXRjaGVyT3B0aW9ucy5zZXBhcmF0b3IgKyBtYXRjaGVyT3B0aW9ucy53aWxkY2FyZF9vbmUsXHJcbiAgICBtYXRjaGVyT3B0aW9ucy5zZXBhcmF0b3IgKyBtYXRjaGVyT3B0aW9ucy53aWxkY2FyZF9zb21lXHJcbl07XHJcblxyXG5mdW5jdGlvbiBpc1dlYlNhZmVTY2hlbWUoc2NoZW1lOiBNYXliZTxTY2hlbWU+KTogYm9vbGVhbiB7XHJcbiAgICBzd2l0Y2ggKHNjaGVtZSkge1xyXG4gICAgICAgIGNhc2UgU2NoZW1lLkhUVFA6XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIGNhc2UgU2NoZW1lLkhUVFBTOlxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCB0eXBlIFBvcnQgPSBudW1iZXI7XHJcbmNvbnN0IHN0YW5kYXJkUG9ydHMgPSBuZXcgTWFwPFNjaGVtZSwgUG9ydD4oW1xyXG4gICAgW1NjaGVtZS5IVFRQLCA4MF0sIFtTY2hlbWUuSFRUUFMsIDQ0M11dKTtcclxuXHJcbmV4cG9ydCBjbGFzcyBPcmlnaW4ge1xyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAgICAgcHVibGljIHJlYWRvbmx5IHNjaGVtZTogU2NoZW1lLFxyXG4gICAgICAgIHB1YmxpYyByZWFkb25seSBob3N0OiBzdHJpbmcsXHJcbiAgICAgICAgcHVibGljIHJlYWRvbmx5IHBvcnQ6IE1heWJlPFBvcnQ+KSB7IH1cclxuXHJcbiAgICB0b1N0cmluZygpIHtcclxuICAgICAgICBpZiAodGhpcy5wb3J0ID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGAke3RoaXMuc2NoZW1lfS8vJHt0aGlzLmhvc3R9YDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gYCR7dGhpcy5zY2hlbWV9Ly8ke3RoaXMuaG9zdH06JHt0aGlzLnBvcnR9YDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdG9EaXNwbGF5U3RyaW5nKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmhvc3Q7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBpc1NhbWVPcmlnaW4oYTogTWF5YmU8T3JpZ2luPiwgYjogTWF5YmU8T3JpZ2luPiwgb3B0aW9ucyA9IG5ldyBPcmlnaW5IYXNoT3B0aW9ucygpKSB7XHJcbiAgICBpZiAobm9uZShhKSB8fCBub25lKGIpKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBzY2hlbWVBID0gYS5zY2hlbWU7XHJcbiAgICBsZXQgc2NoZW1lQiA9IGIuc2NoZW1lO1xyXG4gICAgaWYgKG9wdGlvbnMuaWdub3JlSHR0cEh0dHBzRGlmZmVyZW5jZSkge1xyXG4gICAgICAgIGlmIChzY2hlbWVBID09PSBTY2hlbWUuSFRUUCkge1xyXG4gICAgICAgICAgICBzY2hlbWVBID0gU2NoZW1lLkhUVFBTO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoc2NoZW1lQiA9PT0gU2NoZW1lLkhUVFApIHtcclxuICAgICAgICAgICAgc2NoZW1lQiA9IFNjaGVtZS5IVFRQUztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAoc2NoZW1lQSAhPT0gc2NoZW1lQikge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIGlmIChhLmhvc3QgIT09IGIuaG9zdCkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIGlmIChvcHRpb25zLmlnbm9yZVBvcnQpIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuICAgIGlmIChhLnBvcnQgPT09IHVuZGVmaW5lZCAmJiBiLnBvcnQgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIGlmIChhLnBvcnQgIT09IHVuZGVmaW5lZCAmJiBiLnBvcnQgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIGlmIChhLnBvcnQgPT09IHVuZGVmaW5lZCAmJiBiLnBvcnQgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGEucG9ydCA9PT0gYi5wb3J0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaGFzaE9yaWdpbihvcmlnaW46IE9yaWdpbiwgb3B0aW9ucyA9IG5ldyBPcmlnaW5IYXNoT3B0aW9ucygpKTogSGFzaCB7XHJcbiAgICBsZXQgaGFzaCA9IG9wdGlvbnMuc2VlZDtcclxuICAgIGxldCBzY2hlbWUgPSBvcmlnaW4uc2NoZW1lO1xyXG4gICAgaWYgKG9wdGlvbnMuaWdub3JlSHR0cEh0dHBzRGlmZmVyZW5jZSAmJiAoc2NoZW1lID09PSBTY2hlbWUuSFRUUCkpIHtcclxuICAgICAgICBzY2hlbWUgPSBTY2hlbWUuSFRUUFM7XHJcbiAgICB9XHJcbiAgICBoYXNoID0gbXVybXVySGFzaChzY2hlbWUsIGhhc2gpO1xyXG4gICAgaGFzaCA9IG11cm11ckhhc2gob3JpZ2luLmhvc3QsIGhhc2gpO1xyXG4gICAgaWYgKCFvcHRpb25zLmlnbm9yZVBvcnQgJiYgKG9yaWdpbi5wb3J0ICE9PSB1bmRlZmluZWQpKSB7XHJcbiAgICAgICAgaGFzaCA9IG11cm11ckhhc2gob3JpZ2luLnBvcnQsIGhhc2gpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGhhc2g7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHBhcnNlU2NoZW1lKHByb3RvY29sOiBzdHJpbmcsIG9wdGlvbnM6IE9yaWdpblBhcnNlT3B0aW9ucyk6IE1heWJlPFNjaGVtZT4ge1xyXG4gICAgbGV0IHNjaGVtZTogTWF5YmU8U2NoZW1lPiA9IHVuZGVmaW5lZDtcclxuICAgIHN3aXRjaCAocHJvdG9jb2wudG9Mb3dlckNhc2UoKSkge1xyXG4gICAgICAgIGNhc2UgU2NoZW1lLkhUVFA6XHJcbiAgICAgICAgICAgIHNjaGVtZSA9IFNjaGVtZS5IVFRQO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIFNjaGVtZS5IVFRQUzpcclxuICAgICAgICAgICAgc2NoZW1lID0gU2NoZW1lLkhUVFBTO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIFNjaGVtZS5GSUxFOlxyXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5hbGxvd0ZpbGVTY2hlbWUpIHtcclxuICAgICAgICAgICAgICAgIHNjaGVtZSA9IFNjaGVtZS5GSUxFO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgU2NoZW1lLkNIUk9NRTpcclxuICAgICAgICAgICAgaWYgKG9wdGlvbnMuYWxsb3dDaHJvbWVTY2hlbWUpIHtcclxuICAgICAgICAgICAgICAgIHNjaGVtZSA9IFNjaGVtZS5DSFJPTUU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBTY2hlbWUuRURHRTpcclxuICAgICAgICAgICAgaWYgKG9wdGlvbnMuYWxsb3dFZGdlU2NoZW1lKSB7XHJcbiAgICAgICAgICAgICAgICBzY2hlbWUgPSBTY2hlbWUuRURHRTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIFNjaGVtZS5BQk9VVDpcclxuICAgICAgICAgICAgaWYgKG9wdGlvbnMuYWxsb3dBYm91dFNjaGVtZSkge1xyXG4gICAgICAgICAgICAgICAgc2NoZW1lID0gU2NoZW1lLkFCT1VUO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgU2NoZW1lLkNIUk9NRV9FWFRFTlNJT046XHJcbiAgICAgICAgICAgIGlmIChvcHRpb25zLmFsbG93Q2hyb21lRXh0ZW5zaW9uU2NoZW1lKSB7XHJcbiAgICAgICAgICAgICAgICBzY2hlbWUgPSBTY2hlbWUuQ0hST01FX0VYVEVOU0lPTjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIFNjaGVtZS5GSVJFRk9YX0VYVEVOU0lPTjpcclxuICAgICAgICAgICAgaWYgKG9wdGlvbnMuYWxsb3dGaXJlZm94RXh0ZW5zaW9uU2NoZW1lKSB7XHJcbiAgICAgICAgICAgICAgICBzY2hlbWUgPSBTY2hlbWUuRklSRUZPWF9FWFRFTlNJT047XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBTY2hlbWUuRURHRV9FWFRFTlNJT046XHJcbiAgICAgICAgICAgIGlmIChvcHRpb25zLmFsbG93RWRnZUV4dGVuc2lvblNjaGVtZSkge1xyXG4gICAgICAgICAgICAgICAgc2NoZW1lID0gU2NoZW1lLkVER0VfRVhURU5TSU9OO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgU2NoZW1lLldJTERDQVJEX09ORTpcclxuICAgICAgICAgICAgaWYgKG9wdGlvbnMuYWxsb3dXaWxkY2FyZHMpIHtcclxuICAgICAgICAgICAgICAgIHNjaGVtZSA9IFNjaGVtZS5XSUxEQ0FSRF9PTkU7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgICAgIGNhc2UgU2NoZW1lLldJTERDQVJEX1NPTUU6XHJcbiAgICAgICAgICAgIGlmIChvcHRpb25zLmFsbG93V2lsZGNhcmRzKSB7XHJcbiAgICAgICAgICAgICAgICBzY2hlbWUgPSBTY2hlbWUuV0lMRENBUkRfU09NRTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgIH1cclxuICAgIGlmIChpc1dlYlNhZmVTY2hlbWUoc2NoZW1lKSkge1xyXG4gICAgICAgIHJldHVybiBzY2hlbWU7XHJcbiAgICB9XHJcbiAgICBpZiAoKChzY2hlbWUgPT09IFNjaGVtZS5XSUxEQ0FSRF9PTkUpIHx8XHJcbiAgICAgICAgIChzY2hlbWUgPT09IFNjaGVtZS5XSUxEQ0FSRF9TT01FKSkgJiZcclxuICAgICAgICBvcHRpb25zLmFsbG93V2lsZGNhcmRzKSB7XHJcbiAgICAgICAgcmV0dXJuIHNjaGVtZTtcclxuICAgIH0gZWxzZSBpZiAoKHNjaGVtZSA9PT0gU2NoZW1lLkZJTEUpICYmXHJcbiAgICAgICAgICAgICAgICBvcHRpb25zLmFsbG93RmlsZVNjaGVtZSkge1xyXG4gICAgICAgIHJldHVybiBzY2hlbWU7XHJcbiAgICB9IGVsc2UgaWYgKChzY2hlbWUgPT09IFNjaGVtZS5DSFJPTUVfRVhURU5TSU9OKSAmJlxyXG4gICAgICAgICAgICAgICAgb3B0aW9ucy5hbGxvd0Nocm9tZUV4dGVuc2lvblNjaGVtZSkge1xyXG4gICAgICAgIHJldHVybiBzY2hlbWU7XHJcbiAgICB9IGVsc2UgaWYgKChzY2hlbWUgPT09IFNjaGVtZS5GSVJFRk9YX0VYVEVOU0lPTikgJiZcclxuICAgICAgICAgICAgICAgIG9wdGlvbnMuYWxsb3dGaXJlZm94RXh0ZW5zaW9uU2NoZW1lKSB7XHJcbiAgICAgICAgcmV0dXJuIHNjaGVtZTtcclxuICAgIH0gZWxzZSBpZiAoKHNjaGVtZSA9PT0gU2NoZW1lLkVER0VfRVhURU5TSU9OKSAmJlxyXG4gICAgICAgICAgICAgICAgb3B0aW9ucy5hbGxvd0VkZ2VFeHRlbnNpb25TY2hlbWUpIHtcclxuICAgICAgICByZXR1cm4gc2NoZW1lO1xyXG4gICAgfSBlbHNlIGlmICgoc2NoZW1lID09PSBTY2hlbWUuQ0hST01FKSAmJlxyXG4gICAgICAgICAgICAgICAgb3B0aW9ucy5hbGxvd0Nocm9tZVNjaGVtZSkge1xyXG4gICAgICAgIHJldHVybiBzY2hlbWU7XHJcbiAgICB9IGVsc2UgaWYgKChzY2hlbWUgPT09IFNjaGVtZS5FREdFKSAmJlxyXG4gICAgICAgICAgICAgICAgb3B0aW9ucy5hbGxvd0VkZ2VTY2hlbWUpIHtcclxuICAgICAgICByZXR1cm4gc2NoZW1lO1xyXG4gICAgfSBlbHNlIGlmICgoc2NoZW1lID09PSBTY2hlbWUuQUJPVVQpICYmXHJcbiAgICAgICAgICAgICAgICBvcHRpb25zLmFsbG93QWJvdXRTY2hlbWUpIHtcclxuICAgICAgICByZXR1cm4gc2NoZW1lO1xyXG4gICAgfSBlbHNlIGlmIChvcHRpb25zLmFsbG93Tm9uV2ViU2FmZVNjaGVtZXMpIHtcclxuICAgICAgICByZXR1cm4gc2NoZW1lO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBpc0VtcHR5KHZhbHVlOiBzdHJpbmcpOiBib29sZWFuIHtcclxuICAgIHJldHVybiB2YWx1ZS5sZW5ndGggPT09IDA7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGlzSW5SYW5nZSh2YWx1ZTogbnVtYmVyLCBtaW46IG51bWJlciwgbWF4OiBudW1iZXIpOiBib29sZWFuIHtcclxuICAgIHJldHVybiAodmFsdWUgPj0gbWluKSAmJiAodmFsdWUgPD0gbWF4KTtcclxufVxyXG5cclxuZnVuY3Rpb24gcGFyc2VQb3J0KHBvcnRTdHJpbmc6IHN0cmluZywgc2NoZW1lOiBTY2hlbWUpOiBNYXliZTxQb3J0PiB7XHJcbiAgICBjb25zdCBtaW5Qb3J0ID0gMDtcclxuICAgIGNvbnN0IG1heFBvcnQgPSAoMiA8PCAxNikgLSAxO1xyXG5cclxuICAgIGlmIChpc0VtcHR5KHBvcnRTdHJpbmcpKSB7XHJcbiAgICAgICAgcmV0dXJuIHN0YW5kYXJkUG9ydHMuZ2V0KHNjaGVtZSk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgcmFkaXggPSAxMDtcclxuICAgIGNvbnN0IHBvcnQgPSBwYXJzZUludChwb3J0U3RyaW5nLCByYWRpeCk7XHJcblxyXG4gICAgaWYgKCFpc0luUmFuZ2UocG9ydCwgbWluUG9ydCwgbWF4UG9ydCkpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgcG9ydCAke3BvcnR9YCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcG9ydDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlT3JpZ2luKHVybE9yU3BlYzogVVJMT3JTcGVjLCBvcHRpb25zID0gbmV3IE9yaWdpblBhcnNlT3B0aW9ucygpKTogTWF5YmU8T3JpZ2luPiB7XHJcbiAgICBpZiAodXJsT3JTcGVjIGluc3RhbmNlb2YgVVJMKSB7XHJcbiAgICAgICAgcmV0dXJuIHBhcnNlT3JpZ2luRnJvbVVSTCh1cmxPclNwZWMsIG9wdGlvbnMpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gcGFyc2VPcmlnaW5Gcm9tU3BlYyh1cmxPclNwZWMsIG9wdGlvbnMpO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBwYXJzZU9yaWdpbkZyb21VUkwodXJsOiBVUkwsIG9wdGlvbnM6IE9yaWdpblBhcnNlT3B0aW9ucyk6IE1heWJlPE9yaWdpbj4ge1xyXG4gICAgY29uc3Qgc2NoZW1lID0gcGFyc2VTY2hlbWUodXJsLnByb3RvY29sLCBvcHRpb25zKTtcclxuICAgIGlmIChzY2hlbWUgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICB9XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHBvcnQgPSBwYXJzZVBvcnQodXJsLnBvcnQsIHNjaGVtZSk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBPcmlnaW4oc2NoZW1lLCB1cmwuaG9zdG5hbWUsIHBvcnQpO1xyXG4gICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHBhcnNlT3JpZ2luRnJvbVNwZWMoc3BlYzogc3RyaW5nLCBvcHRpb25zOiBPcmlnaW5QYXJzZU9wdGlvbnMpOiBNYXliZTxPcmlnaW4+IHtcclxuICAgIGlmIChvcHRpb25zLmFsbG93V2lsZGNhcmRzKSB7XHJcbiAgICAgICAgaWYgKCFzcGVjLmluY2x1ZGVzKFwiOi8vXCIpICYmIG9wdGlvbnMuYWxsb3dNaXNzaW5nV2lsZGNhcmRTY2hlbWUpIHtcclxuICAgICAgICAgICAgc3BlYyA9IFNjaGVtZS5XSUxEQ0FSRF9PTkUgKyBcIi8vXCIgKyBzcGVjO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgbWF0Y2ggPSB3aWxkY2FyZFNwZWNSZWdleC5leGVjKHNwZWMpO1xyXG4gICAgICAgIGlmIChtYXRjaCA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gUmVnRXhwRXhlY0FycmF5IGlzIGRlZmluZWQgaW5jb3JyZWN0bHkgc28gd2UgaGF2ZSB0byBjaGVjayBmb3IgdW5kZWZpbmVkIG91cnNlbHZlczpcclxuICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vTWljcm9zb2Z0L1R5cGVTY3JpcHQvaXNzdWVzLzE3OTYzXHJcbiAgICAgICAgY29uc3QgbWF5YmVTY2hlbWUgPSBtYXRjaFtXaWxkY2FyZFNwZWNHcm91cC5TY2hlbWVdO1xyXG4gICAgICAgIGlmIChtYXliZVNjaGVtZSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHNjaGVtZSA9IHBhcnNlU2NoZW1lKG1heWJlU2NoZW1lLCBvcHRpb25zKTtcclxuICAgICAgICBpZiAoc2NoZW1lID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IG1heWJlSG9zdEFuZFBvcnQgPSBtYXRjaFtXaWxkY2FyZFNwZWNHcm91cC5Ib3N0QW5kUG9ydF07XHJcbiAgICAgICAgaWYgKG1heWJlSG9zdEFuZFBvcnQgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBob3N0QW5kUG9ydCA9IG1heWJlSG9zdEFuZFBvcnQuc3BsaXQoJzonKTtcclxuICAgICAgICBjb25zdCBob3N0ID0gaG9zdEFuZFBvcnRbMF07XHJcbiAgICAgICAgaWYgKGlzRW1wdHkoaG9zdCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgcG9ydCA9IHBhcnNlUG9ydChob3N0QW5kUG9ydC5sZW5ndGggPiAxID8gaG9zdEFuZFBvcnRbMV0gOiAnJywgc2NoZW1lKTtcclxuXHJcbiAgICAgICAgaWYgKCFvcHRpb25zLmFsbG93VHJhaWxpbmdXaWxkY2FyZHMpIHtcclxuICAgICAgICAgICAgLy8gVHJhaWxpbmcgd2lsZGNhcmRzIHJpc2sgbWF0Y2hpbmcgc29tZXRoaW5nIGxpa2UgZ29vZ2xlLmNvbS5ldmlsIGJ5IG1pc3Rha2VcclxuICAgICAgICAgICAgaWYgKHRyYWlsaW5nV2lsZGNhcmRzLnNvbWUodHJhaWxpbmdXaWxkY2FyZCA9PiBob3N0Lmxlbmd0aCA+PSB0cmFpbGluZ1dpbGRjYXJkLmxlbmd0aCAmJiBob3N0LmVuZHNXaXRoKHRyYWlsaW5nV2lsZGNhcmQpKSkge1xyXG4gICAgICAgICAgICAgICAgbG9nRXJyb3IobmV3IEVycm9yKGBSdWxlIFVSTCBob3N0bmFtZSBlbmRzIGluIHRyYWlsaW5nIHdpbGRjYXJkOiAke3NwZWN9YCkpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIG5ldyBPcmlnaW4oc2NoZW1lLCBob3N0LCBwb3J0KTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCB1cmwgPSBwYXJzZVVybChzcGVjKTtcclxuICAgIGlmICh1cmwgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcGFyc2VPcmlnaW5Gcm9tVVJMKHVybCwgb3B0aW9ucyk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBtYWtlT3JpZ2luU2V0KG9wdGlvbnMgPSBuZXcgT3JpZ2luSGFzaE9wdGlvbnMoKSk6IEhhc2hTZXQ8T3JpZ2luPiB7XHJcbiAgICByZXR1cm4gbmV3IEhhc2hTZXQ8T3JpZ2luPihcclxuICAgICAgICAob3JpZ2luIDogT3JpZ2luKSA9PiBoYXNoT3JpZ2luKG9yaWdpbiwgb3B0aW9ucyksXHJcbiAgICAgICAgKGEgOiBPcmlnaW4sIGIgOiBPcmlnaW4pID0+IGlzU2FtZU9yaWdpbihhLCBiLCBvcHRpb25zKSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZU9yaWdpblNldChzcGVjTGlzdDogc3RyaW5nW10sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRPcHRpb25zID0gbmV3IE9yaWdpbkhhc2hPcHRpb25zKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zID0gbmV3IE9yaWdpblBhcnNlT3B0aW9ucygpKTogSGFzaFNldDxPcmlnaW4+IHtcclxuICAgIGNvbnN0IHNwZWNTZXQgPSBtYWtlT3JpZ2luU2V0KHNldE9wdGlvbnMpO1xyXG4gICAgZm9yIChjb25zdCBzcGVjIG9mIHNwZWNMaXN0KSB7XHJcbiAgICAgICAgY29uc3Qgb3JpZ2luID0gcGFyc2VPcmlnaW4oc3BlYywgb3B0aW9ucyk7XHJcbiAgICAgICAgaWYgKG9yaWdpbiAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHNwZWNTZXQuYWRkKG9yaWdpbik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHNwZWNTZXQ7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHRvcGljRm9yT3JpZ2luKG9yaWdpbiA6IE9yaWdpbikgOiBzdHJpbmcge1xyXG4gICAgbGV0IHNjaGVtZSA9IG9yaWdpbi5zY2hlbWU7XHJcbiAgICBpZiAoc2NoZW1lID09PSBTY2hlbWUuV0lMRENBUkRfU09NRSkge1xyXG4gICAgICAgIHNjaGVtZSA9IFNjaGVtZS5XSUxEQ0FSRF9PTkU7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gc2NoZW1lLnNsaWNlKDAsIC0xKSArIG1hdGNoZXJPcHRpb25zLnNlcGFyYXRvciArIG9yaWdpbi5ob3N0O1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgT3JpZ2luTWF0Y2hlciB7XHJcbiAgICBhZGQob3JpZ2luIDogT3JpZ2luKSA6IE9yaWdpbk1hdGNoZXIge1xyXG4gICAgICAgIGNvbnN0IHRvcGljID0gdG9waWNGb3JPcmlnaW4ob3JpZ2luKTtcclxuICAgICAgICB0aGlzLm1hdGNoZXIuYWRkKHRvcGljKTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICBleGNsdWRlKG9yaWdpbiA6IE9yaWdpbikgOiBPcmlnaW5NYXRjaGVyIHtcclxuICAgICAgICBjb25zdCB0b3BpYyA9IHRvcGljRm9yT3JpZ2luKG9yaWdpbik7XHJcbiAgICAgICAgdGhpcy5leGNsdWRlX21hdGNoZXIuYWRkKHRvcGljKTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICBoYXMob3JpZ2luIDogT3JpZ2luKSA6IGJvb2xlYW4ge1xyXG4gICAgICAgIGNvbnN0IHRvcGljID0gdG9waWNGb3JPcmlnaW4ob3JpZ2luKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5tYXRjaGVyLnRlc3QodG9waWMpICYmICF0aGlzLmV4Y2x1ZGVfbWF0Y2hlci50ZXN0KHRvcGljKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIG1hdGNoZXIgOiBRbG9iYmVyVHJ1ZSA9IG5ldyBRbG9iYmVyVHJ1ZShtYXRjaGVyT3B0aW9ucyk7XHJcbiAgICBwcml2YXRlIGV4Y2x1ZGVfbWF0Y2hlciA6IFFsb2JiZXJUcnVlID0gbmV3IFFsb2JiZXJUcnVlKG1hdGNoZXJPcHRpb25zKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlT3JpZ2luTWF0Y2hlcihzcGVjTGlzdCA6IHN0cmluZ1tdLCBvcHRpb25zID0gbmV3IE9yaWdpblBhcnNlT3B0aW9ucygpKSA6IE9yaWdpbk1hdGNoZXIge1xyXG4gICAgaWYgKHNwZWNMaXN0Lmxlbmd0aCA+IDApIHtcclxuICAgICAgICBsb2coYG1ha2luZyBtYXRjaGVyIGZyb20gJHtzcGVjTGlzdC5sZW5ndGh9IGVudHJpZXNgKTtcclxuICAgIH1cclxuICAgIGNvbnN0IG1hdGNoZXIgPSBuZXcgT3JpZ2luTWF0Y2hlcigpO1xyXG4gICAgZm9yIChjb25zdCBzcGVjIG9mIHNwZWNMaXN0KSB7XHJcbiAgICAgICAgaWYgKHNwZWMuc3RhcnRzV2l0aChleGNsdXNpb25QcmVmaXgpKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG9yaWdpbiA9IHBhcnNlT3JpZ2luKHNwZWMuc3Vic3RyKGV4Y2x1c2lvblByZWZpeC5sZW5ndGgpLCBvcHRpb25zKTtcclxuICAgICAgICAgICAgaWYgKG9yaWdpbiAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICBtYXRjaGVyLmV4Y2x1ZGUob3JpZ2luKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG9yaWdpbiA9IHBhcnNlT3JpZ2luKHNwZWMsIG9wdGlvbnMpO1xyXG4gICAgICAgICAgICBpZiAob3JpZ2luICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIG1hdGNoZXIuYWRkKG9yaWdpbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAoc3BlY0xpc3QubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIGxvZygnZmluaXNoZWQgbWFraW5nIG1hdGNoZXInKTtcclxuICAgIH1cclxuICAgIHJldHVybiBtYXRjaGVyO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgT3JpZ2luRXhwaXJ5TWF0Y2hlciB7XHJcbiAgICBhZGQob3JpZ2luIDogT3JpZ2luLCBleHBpcnkgOiBudW1iZXIpIDogT3JpZ2luRXhwaXJ5TWF0Y2hlciB7XHJcbiAgICAgICAgY29uc3QgdG9waWMgPSB0b3BpY0Zvck9yaWdpbihvcmlnaW4pO1xyXG4gICAgICAgIHRoaXMubWF0Y2hlci5hZGQodG9waWMsIGV4cGlyeSk7XHJcbiAgICAgICAgLy8gTm90ZTogbG9nZ2luZyBoZXJlIGZvciBlYWNoIGVudHJ5IHNsb3dzIGRvd24gYWRkaW5nIDUwMDAgb3JpZ2lucyBmcm9tIDEwMG1zIHRvIDdzIVxyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIGhhcyhvcmlnaW4gOiBPcmlnaW4pIDogYm9vbGVhbiB7XHJcbiAgICAgICAgY29uc3QgdG9waWMgPSB0b3BpY0Zvck9yaWdpbihvcmlnaW4pO1xyXG4gICAgICAgIGNvbnN0IGV4cGlyaWVzID0gdGhpcy5tYXRjaGVyLm1hdGNoKHRvcGljKTtcclxuICAgICAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpIC8gMTAwMDsgLy8gZXhwaXJpZXMgYXJlIHNlY29uZHNcclxuICAgICAgICAvLyBMb29rIGZvciBhbnkgbWF0Y2hpbmcgcmVwdXRhdGlvbiBlbnRyaWVzIGZvciB0aGUgb3JpZ2luIHdoaWNoIGhhdmVuJ3QgZXhwaXJlZFxyXG4gICAgICAgIGZvciAoY29uc3QgZXhwaXJ5IG9mIGV4cGlyaWVzKSB7XHJcbiAgICAgICAgICAgIGlmIChleHBpcnkgPiBub3cpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIG1hdGNoZXIgOiBRbG9iYmVyPG51bWJlcj4gPSBuZXcgUWxvYmJlcjxudW1iZXI+KG1hdGNoZXJPcHRpb25zKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlT3JpZ2luRXhwaXJ5TWF0Y2hlcihzcGVjTGlzdCA6IFNpdGVBbmRFeHBpcnlbXSwgb3B0aW9ucyA9IG5ldyBPcmlnaW5QYXJzZU9wdGlvbnMoKSkgOiBPcmlnaW5FeHBpcnlNYXRjaGVyIHtcclxuICAgIGlmIChzcGVjTGlzdC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgbG9nKGBtYWtpbmcgZXhwaXJ5IG1hdGNoZXIgZnJvbSAke3NwZWNMaXN0Lmxlbmd0aH0gZW50cmllc2ApO1xyXG4gICAgfVxyXG4gICAgY29uc3QgbWF0Y2hlciA9IG5ldyBPcmlnaW5FeHBpcnlNYXRjaGVyKCk7XHJcbiAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpIC8gMTAwMDsgLy8gZXhwaXJpZXMgYXJlIHNlY29uZHNcclxuICAgIGZvciAoY29uc3QgW3NwZWMsIGV4cGlyeV0gb2Ygc3BlY0xpc3QpIHtcclxuICAgICAgICBpZiAoZXhwaXJ5ID4gbm93KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG9yaWdpbiA9IHBhcnNlT3JpZ2luKHNwZWMsIG9wdGlvbnMpO1xyXG4gICAgICAgICAgICBpZiAob3JpZ2luICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIG1hdGNoZXIuYWRkKG9yaWdpbiwgZXhwaXJ5KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGlmIChzcGVjTGlzdC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgbG9nKCdmaW5pc2hlZCBtYWtpbmcgZXhwaXJ5IG1hdGNoZXInKTtcclxuICAgIH1cclxuICAgIHJldHVybiBtYXRjaGVyO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgT3JpZ2luR3JvdXBlciB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHt9XHJcblxyXG4gICAgYWRkRnJvbVNwZWNMaXN0KHNwZWNMaXN0IDogc3RyaW5nW10sIGdyb3VwIDogc3RyaW5nLCBvcHRpb25zID0gbmV3IE9yaWdpblBhcnNlT3B0aW9ucygpKSA6IE9yaWdpbkdyb3VwZXIge1xyXG4gICAgICAgIGZvciAoY29uc3Qgc3BlYyBvZiBzcGVjTGlzdCkge1xyXG4gICAgICAgICAgICB0aGlzLmFkZEZyb21TcGVjKHNwZWMsIGdyb3VwLCBvcHRpb25zKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgYWRkRnJvbVNwZWMoc3BlYyA6IHN0cmluZywgZ3JvdXAgOiBzdHJpbmcsIG9wdGlvbnMgPSBuZXcgT3JpZ2luUGFyc2VPcHRpb25zKCkpIDogT3JpZ2luR3JvdXBlciB7XHJcbiAgICAgICAgY29uc3Qgb3JpZ2luID0gcGFyc2VPcmlnaW4oc3BlYywgb3B0aW9ucyk7XHJcbiAgICAgICAgaWYgKHNvbWUob3JpZ2luKSkge1xyXG4gICAgICAgICAgICB0aGlzLmFkZChvcmlnaW4sIGdyb3VwKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgYWRkKG9yaWdpbiA6IE9yaWdpbiwgZ3JvdXAgOiBzdHJpbmcpIDogT3JpZ2luR3JvdXBlciB7XHJcbiAgICAgICAgY29uc3QgdG9waWMgPSB0b3BpY0Zvck9yaWdpbihvcmlnaW4pO1xyXG4gICAgICAgIHRoaXMuZ3JvdXBlci5hZGQodG9waWMsIGdyb3VwKTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICBtYXRjaChvcmlnaW4gOiBPcmlnaW4pIDogc3RyaW5nW10ge1xyXG4gICAgICAgIGNvbnN0IHRvcGljID0gdG9waWNGb3JPcmlnaW4ob3JpZ2luKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5ncm91cGVyLm1hdGNoKHRvcGljKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGdyb3VwZXIgPSBuZXcgUWxvYmJlcjxzdHJpbmc+KG1hdGNoZXJPcHRpb25zKTtcclxufVxyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi4vbGliL2NvbW1vbi9vcmlnaW4udHMiLCIvLyBDb3B5cmlnaHQgKGMpIDIwMTggQnJvbWl1bSwgSW5jLlxyXG4vLyBVc2Ugb2YgdGhlIEJyb21pdW0sIEluYy4gc29mdHdhcmUgcmVxdWlyZXMgYSBsaWNlbnNlIGFncmVlbWVudCB3aXRoIEJyb21pdW0sIEluYy4gb3IgYW4gYXV0aG9yaXplZCByZXNlbGxlci5cclxuXHJcbmltcG9ydCB7IE5vbmUsIFNvbWUsIE1heWJlIH0gZnJvbSBcIi4vbWF5YmVcIlxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGlzSW5SYW5nZSh2YWx1ZTogbnVtYmVyLCBtaW46IG51bWJlciwgbWF4OiBudW1iZXIpOiBib29sZWFuIHtcclxuICAgIHJldHVybiAodmFsdWUgPj0gbWluKSAmJiAodmFsdWUgPD0gbWF4KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGlzTnVtYmVyKHZhbHVlOiBhbnkpOiB2YWx1ZSBpcyBudW1iZXIge1xyXG4gICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gXCJudW1iZXJcIjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlTnVtYmVyKHZhbHVlOiBzdHJpbmcpOiBNYXliZTxudW1iZXI+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgYmFzZSA9IDEwO1xyXG4gICAgICAgIHJldHVybiBwYXJzZUludCh2YWx1ZSwgYmFzZSk7XHJcbiAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgIH1cclxufVxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuLi9saWIvY29tbW9uL251bWJlci11dGlscy50cyIsIi8vIENvcHlyaWdodCAoYykgMjAxOCBCcm9taXVtLCBJbmMuXHJcbi8vIFVzZSBvZiB0aGUgQnJvbWl1bSwgSW5jLiBzb2Z0d2FyZSByZXF1aXJlcyBhIGxpY2Vuc2UgYWdyZWVtZW50IHdpdGggQnJvbWl1bSwgSW5jLiBvciBhbiBhdXRob3JpemVkIHJlc2VsbGVyLlxyXG5cclxuLy8gQWRhcHRlZCBmcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS9hYXBwbGVieS9zbWhhc2hlci9ibG9iL21hc3Rlci9zcmMvTXVybXVySGFzaDEuY3BwXHJcbi8vIE11cm11ckhhc2ggaXMgcmVsZWFzZWQgdW5kZXIgYW4gTUlUIGxpY2Vuc2UuXHJcbi8vIFRPRE8gQWNrbm9sd2VkZ2UgdGhlIGxpY2Vuc2UuXHJcblxyXG5pbXBvcnQgeyBIYXNoIH0gZnJvbSBcIi4vaGFzaFwiO1xyXG5cclxuZnVuY3Rpb24gbXVybXVySGFzaFN0cmluZyhrZXk6IHN0cmluZywgc2VlZDogSGFzaCk6IEhhc2gge1xyXG4gICAgbGV0IGxlbiA9IGtleS5sZW5ndGggKiAyO1xyXG4gICAgY29uc3QgbSA9IDB4YzZhNGE3OTM7XHJcbiAgICBjb25zdCByID0gMTY7XHJcbiAgICBsZXQgaCA9IHNlZWQgXiAobGVuICogbSk7XHJcblxyXG4gICAgZm9yIChsZXQgaSA9IDA7IChpIDwga2V5Lmxlbmd0aCkgJiYgKGxlbiA+PSA0KTsgaSArPSAyKSB7XHJcbiAgICAgICAgY29uc3QgZGF0YSA9IChrZXkuY2hhckNvZGVBdChpKSArIChrZXkuY2hhckNvZGVBdChpICsgMSkgPDwgMTYpKTtcclxuICAgICAgICBjb25zdCBrID0gZGF0YTtcclxuICAgICAgICBoICs9IGs7XHJcbiAgICAgICAgaCAqPSBtO1xyXG4gICAgICAgIGggXj0gKGggPj4gMTYpO1xyXG4gICAgICAgIGxlbiAtPSA0O1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChsZW4gPT09IDIpIHtcclxuICAgICAgICBsZXQgZGF0YSA9IGtleS5jaGFyQ29kZUF0KGtleS5sZW5ndGggLSAxKTtcclxuICAgICAgICBoICs9IGRhdGE7XHJcbiAgICAgICAgaCAqPSBtO1xyXG4gICAgICAgIGggXj0gKGggPj4gcik7XHJcbiAgICB9XHJcblxyXG4gICAgaCAqPSBtO1xyXG4gICAgaCBePSAoaCA+PiAxMCk7XHJcbiAgICBoICo9IG07XHJcbiAgICBoIF49IChoID4+IDE3KTtcclxuXHJcbiAgICByZXR1cm4gaDtcclxufVxyXG5cclxuZnVuY3Rpb24gbXVybXVySGFzaE51bWJlcihrZXk6IG51bWJlciwgc2VlZDogSGFzaCk6IEhhc2gge1xyXG4gICAgbGV0IGxlbiA9IDQ7XHJcbiAgICBjb25zdCBtID0gMHhjNmE0YTc5MztcclxuICAgIGNvbnN0IHIgPSAxNjtcclxuICAgIGxldCBoID0gc2VlZCBeIChsZW4gKiBtKTtcclxuXHJcbiAgICBjb25zdCBkYXRhID0ga2V5ICYgMHhmZmZmZmZmZjtcclxuICAgIGNvbnN0IGsgPSBkYXRhO1xyXG4gICAgaCArPSBrO1xyXG4gICAgaCAqPSBtO1xyXG4gICAgaCBePSAoaCA+PiAxNik7XHJcblxyXG4gICAgaCAqPSBtO1xyXG4gICAgaCBePSAoaCA+PiAxMCk7XHJcbiAgICBoICo9IG07XHJcbiAgICBoIF49IChoID4+IDE3KTtcclxuXHJcbiAgICByZXR1cm4gaDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIG11cm11ckhhc2goa2V5OiBzdHJpbmcgfCBudW1iZXIgfCBib29sZWFuLCBzZWVkOiBIYXNoKTogSGFzaCB7XHJcbiAgICBpZiAodHlwZW9mIGtleSA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICByZXR1cm4gbXVybXVySGFzaFN0cmluZyhrZXksIHNlZWQpO1xyXG4gICAgfSBlbHNlIGlmICh0eXBlb2Yga2V5ID09PSAnYm9vbGVhbicpIHtcclxuICAgICAgICByZXR1cm4gbXVybXVySGFzaE51bWJlcihrZXkgPyAxIDogMCwgc2VlZCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBtdXJtdXJIYXNoTnVtYmVyKGtleSwgc2VlZCk7XHJcbiAgICB9XHJcbn1cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi4vbGliL2NvbW1vbi9tdXJtdXItaGFzaC50cyIsIi8vIENvcHlyaWdodCAoYykgMjAxOCBCcm9taXVtLCBJbmMuXHJcbi8vIFVzZSBvZiB0aGUgQnJvbWl1bSwgSW5jLiBzb2Z0d2FyZSByZXF1aXJlcyBhIGxpY2Vuc2UgYWdyZWVtZW50IHdpdGggQnJvbWl1bSwgSW5jLiBvciBhbiBhdXRob3JpemVkIHJlc2VsbGVyLlxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJSG9zdENvbnN0YW50cyB7XHJcbiAgICBob3N0SGVscGVySWQ6IHN0cmluZztcclxuICAgIGJsb2NrZWRQYWdlOiBzdHJpbmc7XHJcbiAgICBleHRlcm5hbEFwcExpbmtQYWdlOiBzdHJpbmc7XHJcbiAgICBob2xkaW5nUGFnZTogc3RyaW5nLFxyXG4gICAgYmxvY2tlZEZpbGVQYWdlOiBzdHJpbmc7XHJcbiAgICBwYWdlVHJhY2tlclBvcnROYW1lOiBzdHJpbmc7XHJcbiAgICBleHRlcm5hbEFwcExpbmtQYWdlUG9ydE5hbWU6IHN0cmluZztcclxuICAgIGVkZ2VFeHRlcm5hbEFwcExpbmtRdWVyeUtleTogc3RyaW5nO1xyXG4gICAgZWRnZUV4dGVybmFsQXBwTGlua1F1ZXJ5VmFsdWU6IHN0cmluZztcclxuICAgIGJsb2NrZWRQYWdlUG9ydE5hbWU6IHN0cmluZztcclxuICAgIGJsb2NrZWRGaWxlUGFnZVBvcnROYW1lOiBzdHJpbmc7XHJcbiAgICBwb3B1cFBvcnROYW1lOiBzdHJpbmc7XHJcbiAgICBvcHRpb25zUG9ydE5hbWU6IHN0cmluZztcclxuICAgIG1heEFnZVBhZ2VFdmVudDogbnVtYmVyO1xyXG4gICAgcG9zdHBvbmVtZW50VGltZW91dDogbnVtYmVyO1xyXG59XHJcblxyXG5leHBvcnQgY29uc3QgaG9zdENvbnN0YW50czogSUhvc3RDb25zdGFudHMgPSB7XHJcbiAgICBob3N0SGVscGVySWQ6IFwiY29tLmJyb21pdW0uaG9zdGhlbHBlclwiLFxyXG4gICAgYmxvY2tlZFBhZ2U6IFwiYmxvY2tlZC1wYWdlLmh0bWxcIixcclxuICAgIGV4dGVybmFsQXBwTGlua1BhZ2U6IFwiZXh0ZXJuYWwtYXBwLWxpbmstcGFnZS12MS5odG1sXCIsXHJcbiAgICBob2xkaW5nUGFnZTogXCJob2xkaW5nLXBhZ2UuaHRtbFwiLFxyXG4gICAgZWRnZUV4dGVybmFsQXBwTGlua1F1ZXJ5S2V5OiBcImQxYjMwZTY4LTgzYmUtNGI2ZS05YzJhLWMxYzRjYTUwMmU4YlwiLFxyXG4gICAgZWRnZUV4dGVybmFsQXBwTGlua1F1ZXJ5VmFsdWU6IFwiMFwiLFxyXG4gICAgYmxvY2tlZEZpbGVQYWdlOiBcImJsb2NrZWQtZmlsZS1wYWdlLmh0bWxcIixcclxuICAgIHBhZ2VUcmFja2VyUG9ydE5hbWU6IFwiY29tLmJyb21pdW0ucGFnZS50cmFja2VyXCIsXHJcbiAgICBleHRlcm5hbEFwcExpbmtQYWdlUG9ydE5hbWU6IFwiY29tLmJyb21pdW0uZXh0ZXJuYWwuYXBwLmxpbmsucGFnZVwiLFxyXG4gICAgYmxvY2tlZFBhZ2VQb3J0TmFtZTogXCJjb20uYnJvbWl1bS5ibG9ja2VkLnBhZ2VcIixcclxuICAgIGJsb2NrZWRGaWxlUGFnZVBvcnROYW1lOiBcImNvbS5icm9taXVtLmJsb2NrZWQuZmlsZS5wYWdlXCIsXHJcbiAgICBwb3B1cFBvcnROYW1lOiBcImNvbS5icm9taXVtLnBvcHVwXCIsXHJcbiAgICBvcHRpb25zUG9ydE5hbWU6IFwiY29tLmJyb21pdW0ub3B0aW9uc1wiLFxyXG4gICAgbWF4QWdlUGFnZUV2ZW50OiAxMDAwLFxyXG4gICAgcG9zdHBvbmVtZW50VGltZW91dDogNTAwMFxyXG59O1xyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi4vbGliL2hvc3QvaG9zdC1jb25zdGFudHMudHMiLCIvLyBDb3B5cmlnaHQgKGMpIDIwMTggQnJvbWl1bSwgSW5jLlxyXG4vLyBVc2Ugb2YgdGhlIEJyb21pdW0sIEluYy4gc29mdHdhcmUgcmVxdWlyZXMgYSBsaWNlbnNlIGFncmVlbWVudCB3aXRoIEJyb21pdW0sIEluYy4gb3IgYW4gYXV0aG9yaXplZCByZXNlbGxlci5cclxuXHJcbmV4cG9ydCB0eXBlIEZhY3Rvcnk8VD4gPSAoKSA9PiBUO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIG1ha2VQcm9taXNlPFQ+KGZhY3Rvcnk6IEZhY3Rvcnk8VD4pOiBQcm9taXNlPFQ+IHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZTxUPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgcmVzb2x2ZShmYWN0b3J5KCkpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmV4cG9ydCB0eXBlIFJlc29sdmVyPFQ+ID0gKHZhbHVlOiBUKSA9PiB2b2lkO1xyXG5leHBvcnQgdHlwZSBBc3luY0ZhY3Rvcnk8VD4gPSAocmVzb2x2ZTogUmVzb2x2ZXI8VD4pID0+IHZvaWQ7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gbWFrZVByb21pc2VBc3luYzxUPihmYWN0b3J5OiBBc3luY0ZhY3Rvcnk8VD4pOiBQcm9taXNlPFQ+IHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZTxUPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgZmFjdG9yeShyZXNvbHZlKTtcclxuICAgIH0pO1xyXG59XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4uL2xpYi9jb21tb24vcHJvbWlzZS11dGlscy50cyIsIi8vIENvcHlyaWdodCAoYykgMjAxOCBCcm9taXVtLCBJbmMuXHJcbi8vIFVzZSBvZiB0aGUgQnJvbWl1bSwgSW5jLiBzb2Z0d2FyZSByZXF1aXJlcyBhIGxpY2Vuc2UgYWdyZWVtZW50IHdpdGggQnJvbWl1bSwgSW5jLiBvciBhbiBhdXRob3JpemVkIHJlc2VsbGVyLlxyXG5cclxuaW1wb3J0IHsgbWFrZVN0cmluZ0hhc2hNYXAgfSBmcm9tIFwiLi9zdHJpbmctdXRpbHNcIjtcclxuaW1wb3J0IHsgUmFuZ2UgfSBmcm9tIFwiLi9yYW5nZVwiO1xyXG5pbXBvcnQgeyBNZXNzYWdlVHlwZSB9IGZyb20gXCIuL21lc3NhZ2UtdHlwZXNcIjtcclxuaW1wb3J0IHsgbm9uZSwgc29tZSwgTWF5YmUgfSBmcm9tIFwiLi9tYXliZVwiO1xyXG5pbXBvcnQgeyBDaHJhZ0Vycm9yIH0gZnJvbSBcIi4vZXJyb3JzXCI7XHJcblxyXG5leHBvcnQgZW51bSBQcm90b2NvbFZlcnNpb24ge1xyXG4gICAgdjEgPSBcInRhZzpicm9taXVtLmNvbSwyMDE4LTAyOnByb3RvY29sczpnb29nbGUtY2hyb21lLWV4dGVuc2lvbjppbml0aWFsXCIsXHJcbiAgICB2MiA9IFwidGFnOmJyb21pdW0uY29tLDIwMTgtMDY6cHJvdG9jb2xzOmdvb2dsZS1jaHJvbWUtZXh0ZW5zaW9uOnYyXCIsXHJcbiAgICB2MyA9IFwidGFnOmJyb21pdW0uY29tLDIwMTgtMDc6cHJvdG9jb2xzOmdvb2dsZS1jaHJvbWUtZXh0ZW5zaW9uOnYzXCIsXHJcbiAgICB2NCA9IFwidGFnOmJyb21pdW0uY29tLDIwMTgtMDg6cHJvdG9jb2xzOmdvb2dsZS1jaHJvbWUtZXh0ZW5zaW9uOnY0XCIsXHJcbiAgICB2NSA9IFwidGFnOmJyb21pdW0uY29tLDIwMTgtMTE6cHJvdG9jb2xzOmdvb2dsZS1jaHJvbWUtZXh0ZW5zaW9uOnY1XCIsXHJcbiAgICB2NiA9IFwidGFnOmJyb21pdW0uY29tLDIwMTgtMTI6cHJvdG9jb2xzOmdvb2dsZS1jaHJvbWUtZXh0ZW5zaW9uOnY2XCIsXHJcbiAgICB2NyA9IFwidGFnOmJyb21pdW0uY29tLDIwMTktMDE6cHJvdG9jb2xzOmdvb2dsZS1jaHJvbWUtZXh0ZW5zaW9uOnY3XCIsXHJcbiAgICB2OCA9IFwidGFnOmJyb21pdW0uY29tLDIwMTktMDY6cHJvdG9jb2xzOmdvb2dsZS1jaHJvbWUtZXh0ZW5zaW9uOnY4XCIsXHJcbiAgICB2OSA9IFwidGFnOmJyb21pdW0uY29tLDIwMTktMDc6cHJvdG9jb2xzOmdvb2dsZS1jaHJvbWUtZXh0ZW5zaW9uOnY5XCIsXHJcbiAgICB2MTAgPSBcInRhZzpicm9taXVtLmNvbSwyMDE5LTA5OnByb3RvY29sczpnb29nbGUtY2hyb21lLWV4dGVuc2lvbjp2MTBcIixcclxuICAgIHYxMSA9IFwidGFnOmJyb21pdW0uY29tLDIwMTktMTA6cHJvdG9jb2xzOmdvb2dsZS1jaHJvbWUtZXh0ZW5zaW9uOnYxMVwiLFxyXG4gICAgdjEyID0gXCJ0YWc6YnJvbWl1bS5jb20sMjAxOS0xMTpwcm90b2NvbHM6Z29vZ2xlLWNocm9tZS1leHRlbnNpb246djEyXCIsXHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBzdXBwb3J0ZWRQcm90b2NvbFZlcnNpb25zID0gW1xyXG4gICAgUHJvdG9jb2xWZXJzaW9uLnYxMixcclxuICAgIFByb3RvY29sVmVyc2lvbi52MTEsXHJcbiAgICBQcm90b2NvbFZlcnNpb24udjEwLFxyXG4gICAgUHJvdG9jb2xWZXJzaW9uLnY5LFxyXG4gICAgUHJvdG9jb2xWZXJzaW9uLnY4LFxyXG4gICAgUHJvdG9jb2xWZXJzaW9uLnY3LFxyXG4gICAgUHJvdG9jb2xWZXJzaW9uLnY2LFxyXG4gICAgUHJvdG9jb2xWZXJzaW9uLnY1LFxyXG4gICAgUHJvdG9jb2xWZXJzaW9uLnY0LFxyXG4gICAgUHJvdG9jb2xWZXJzaW9uLnYzLFxyXG4gICAgUHJvdG9jb2xWZXJzaW9uLnYyLFxyXG4gICAgUHJvdG9jb2xWZXJzaW9uLnYxXHJcbl07XHJcblxyXG5jb25zdCBzdXBwb3J0ZWRNZXNzYWdlVHlwZXMgPSAoKCkgPT4ge1xyXG4gICAgY29uc3Qgc3VwcG9ydGVkTWVzc2FnZVJhbmdlcyA9IG1ha2VTdHJpbmdIYXNoTWFwPFJhbmdlPigpO1xyXG4gICAgc3VwcG9ydGVkTWVzc2FnZVJhbmdlcy5wdXRNYW55KFtcclxuICAgICAgICBbUHJvdG9jb2xWZXJzaW9uLnYxLCBuZXcgUmFuZ2UoTWVzc2FnZVR5cGUuaGFuZHNoYWtlVjEsIE1lc3NhZ2VUeXBlLmhlYXJ0YmVhdFYxKV0sXHJcbiAgICAgICAgW1Byb3RvY29sVmVyc2lvbi52MiwgbmV3IFJhbmdlKE1lc3NhZ2VUeXBlLmhhbmRzaGFrZVYxLCBNZXNzYWdlVHlwZS5lbmFibGVkRmVhdHVyZXNSZXNwb25zZVYyKV0sXHJcbiAgICAgICAgW1Byb3RvY29sVmVyc2lvbi52MywgbmV3IFJhbmdlKE1lc3NhZ2VUeXBlLmhhbmRzaGFrZVYxLCBNZXNzYWdlVHlwZS5yZXB1dGF0aW9uQ2hhbmdlZFYzKV0sXHJcbiAgICAgICAgW1Byb3RvY29sVmVyc2lvbi52NCwgbmV3IFJhbmdlKE1lc3NhZ2VUeXBlLmhhbmRzaGFrZVYxLCBNZXNzYWdlVHlwZS5ibG9ja2VkUGFnZURhdGFSZXNwb25zZVY0KV0sXHJcbiAgICAgICAgW1Byb3RvY29sVmVyc2lvbi52NSwgbmV3IFJhbmdlKE1lc3NhZ2VUeXBlLmhhbmRzaGFrZVYxLCBNZXNzYWdlVHlwZS5wb3B1cERhdGFSZXNwb25zZVY1KV0sXHJcbiAgICAgICAgW1Byb3RvY29sVmVyc2lvbi52NiwgbmV3IFJhbmdlKE1lc3NhZ2VUeXBlLmhhbmRzaGFrZVYxLCBNZXNzYWdlVHlwZS50cnVzdFVybFY2KV0sXHJcbiAgICAgICAgW1Byb3RvY29sVmVyc2lvbi52NywgbmV3IFJhbmdlKE1lc3NhZ2VUeXBlLmhhbmRzaGFrZVYxLCBNZXNzYWdlVHlwZS5jb25maWdDaGFuZ2VkVjcpXSxcclxuICAgICAgICBbUHJvdG9jb2xWZXJzaW9uLnY4LCBuZXcgUmFuZ2UoTWVzc2FnZVR5cGUuaGFuZHNoYWtlVjEsIE1lc3NhZ2VUeXBlLmNvbmZpZ0NoYW5nZWRWOCldLFxyXG4gICAgICAgIFtQcm90b2NvbFZlcnNpb24udjksIG5ldyBSYW5nZShNZXNzYWdlVHlwZS5oYW5kc2hha2VWMSwgTWVzc2FnZVR5cGUuY29uZmlnQ2hhbmdlZFY5KV0sXHJcbiAgICAgICAgW1Byb3RvY29sVmVyc2lvbi52MTAsIG5ldyBSYW5nZShNZXNzYWdlVHlwZS5oYW5kc2hha2VWMSwgTWVzc2FnZVR5cGUuaGVhcnRiZWF0VjEwKV0sXHJcbiAgICAgICAgW1Byb3RvY29sVmVyc2lvbi52MTEsIG5ldyBSYW5nZShNZXNzYWdlVHlwZS5oYW5kc2hha2VWMSwgTWVzc2FnZVR5cGUuY29uZmlnQ2hhbmdlZFYxMSldLFxyXG4gICAgICAgIFtQcm90b2NvbFZlcnNpb24udjEyLCBuZXcgUmFuZ2UoTWVzc2FnZVR5cGUuaGFuZHNoYWtlVjEsIE1lc3NhZ2VUeXBlLmNvbmZpZ0NoYW5nZWRWMTIpXSxcclxuICAgIF0pO1xyXG4gICAgcmV0dXJuIHN1cHBvcnRlZE1lc3NhZ2VSYW5nZXM7XHJcbn0pKCk7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaXNNZXNzYWdlVHlwZVN1cHBvcnRlZChtZXNzYWdlVHlwZTogTWVzc2FnZVR5cGUsIHByb3RvY29sVmVyc2lvbjogUHJvdG9jb2xWZXJzaW9uKSB7XHJcbiAgICBjb25zdCByYW5nZSA9IHN1cHBvcnRlZE1lc3NhZ2VUeXBlcy5nZXQocHJvdG9jb2xWZXJzaW9uKTtcclxuICAgIGlmIChub25lKHJhbmdlKSkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIHJldHVybiByYW5nZS5jb250YWlucyhtZXNzYWdlVHlwZSk7XHJcbn1cclxuXHJcbmV4cG9ydCBlbnVtIFZlcnNpb25TdXBwb3J0U3RhdHVzIHtcclxuICAgIG5vdEhhbmRzaGFrZW4sXHJcbiAgICBzdXBwb3J0ZWQsXHJcbiAgICB1bnN1cHBvcnRlZFxyXG59XHJcblxyXG5jb25zdCBzdXBwb3J0ZWRFcnJvcnMgPSAoKCkgPT4ge1xyXG4gICAgY29uc3Qgc3VwcG9ydGVkRXJyb3JzID0gbWFrZVN0cmluZ0hhc2hNYXA8UmFuZ2U+KCk7XHJcbiAgICBzdXBwb3J0ZWRFcnJvcnMucHV0TWFueShbXHJcbiAgICAgICAgW1Byb3RvY29sVmVyc2lvbi52MSwgbmV3IFJhbmdlKENocmFnRXJyb3Iubm90RW5hYmxlZCwgQ2hyYWdFcnJvci5yZWNvdmVyZWRGcm9tRXJyb3IpXSxcclxuICAgICAgICBbUHJvdG9jb2xWZXJzaW9uLnYyLCBuZXcgUmFuZ2UoQ2hyYWdFcnJvci5ub3RFbmFibGVkLCBDaHJhZ0Vycm9yLnJlY292ZXJlZEZyb21FcnJvcildLFxyXG4gICAgICAgIFtQcm90b2NvbFZlcnNpb24udjMsIG5ldyBSYW5nZShDaHJhZ0Vycm9yLm5vdEVuYWJsZWQsIENocmFnRXJyb3IucmVjb3ZlcmVkRnJvbUVycm9yKV0sXHJcbiAgICAgICAgW1Byb3RvY29sVmVyc2lvbi52NCwgbmV3IFJhbmdlKENocmFnRXJyb3Iubm90RW5hYmxlZCwgQ2hyYWdFcnJvci5yZWNvdmVyZWRGcm9tRXJyb3IpXSxcclxuICAgICAgICBbUHJvdG9jb2xWZXJzaW9uLnY1LCBuZXcgUmFuZ2UoQ2hyYWdFcnJvci5ub3RFbmFibGVkLCBDaHJhZ0Vycm9yLnJlY292ZXJlZEZyb21FcnJvcildLFxyXG4gICAgICAgIFtQcm90b2NvbFZlcnNpb24udjYsIG5ldyBSYW5nZShDaHJhZ0Vycm9yLm5vdEVuYWJsZWQsIENocmFnRXJyb3IucmVjb3ZlcmVkRnJvbUVycm9yKV0sXHJcbiAgICAgICAgW1Byb3RvY29sVmVyc2lvbi52NywgbmV3IFJhbmdlKENocmFnRXJyb3Iubm90RW5hYmxlZCwgQ2hyYWdFcnJvci5pczMyYml0RmlyZWZveCldLFxyXG4gICAgICAgIFtQcm90b2NvbFZlcnNpb24udjgsIG5ldyBSYW5nZShDaHJhZ0Vycm9yLm5vdEVuYWJsZWQsIENocmFnRXJyb3IuaXMzMmJpdEZpcmVmb3gpXSxcclxuICAgICAgICBbUHJvdG9jb2xWZXJzaW9uLnY5LCBuZXcgUmFuZ2UoQ2hyYWdFcnJvci5ub3RFbmFibGVkLCBDaHJhZ0Vycm9yLmlzMzJiaXRGaXJlZm94KV0sXHJcbiAgICAgICAgW1Byb3RvY29sVmVyc2lvbi52MTAsIG5ldyBSYW5nZShDaHJhZ0Vycm9yLm5vdEVuYWJsZWQsIENocmFnRXJyb3IuaGVscGVyVW5yZXNwb25zaXZlKV0sXHJcbiAgICAgICAgW1Byb3RvY29sVmVyc2lvbi52MTEsIG5ldyBSYW5nZShDaHJhZ0Vycm9yLm5vdEVuYWJsZWQsIENocmFnRXJyb3IuaGVscGVyVW5yZXNwb25zaXZlKV0sXHJcbiAgICAgICAgW1Byb3RvY29sVmVyc2lvbi52MTIsIG5ldyBSYW5nZShDaHJhZ0Vycm9yLm5vdEVuYWJsZWQsIENocmFnRXJyb3IuaGVscGVyVW5yZXNwb25zaXZlKV0sXHJcbiAgICBdKTtcclxuICAgIHJldHVybiBzdXBwb3J0ZWRFcnJvcnM7XHJcbn0pKCk7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaXNFcnJvclN1cHBvcnRlZChlcnJvcjogQ2hyYWdFcnJvciwgcHJvdG9jb2xWZXJzaW9uOiBQcm90b2NvbFZlcnNpb24pIHtcclxuICAgIGNvbnN0IHJhbmdlID0gc3VwcG9ydGVkRXJyb3JzLmdldChwcm90b2NvbFZlcnNpb24pO1xyXG4gICAgaWYgKG5vbmUocmFuZ2UpKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJhbmdlLmNvbnRhaW5zKGVycm9yKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHNob3VsZExvZ01lc3NhZ2UocHJvdG9jb2xWZXJzaW9uOiBQcm90b2NvbFZlcnNpb24pIHtcclxuICAgIHJldHVybiAhaXNNZXNzYWdlVHlwZVN1cHBvcnRlZChNZXNzYWdlVHlwZS5zdG9wSGVscGVyVjEwLCBwcm90b2NvbFZlcnNpb24pO1xyXG59XHJcblxyXG5lbnVtIEhlbHBQYWdlVmVyc2lvbiB7XHJcbiAgICB2NDE1ID0gXCJ2NC4xLjVcIixcclxuICAgIHY0MTgxID0gXCJ2NC4xLjguMVwiLFxyXG4gICAgbWF4SGVscFBhZ2VWZXJzaW9uID0gdjQxODFcclxufTtcclxuXHJcbmNvbnN0IHN1cHBvcnRlZEhlbHBQYWdlVmVyc2lvbnMgPSAoKCkgPT4ge1xyXG4gICAgY29uc3Qgc3VwcG9ydGVkSGVscFBhZ2VWZXJzaW9ucyA9IG1ha2VTdHJpbmdIYXNoTWFwPHN0cmluZz4oKTtcclxuICAgIHN1cHBvcnRlZEhlbHBQYWdlVmVyc2lvbnMucHV0TWFueShbXHJcbiAgICAgICBbUHJvdG9jb2xWZXJzaW9uLnYxLCBIZWxwUGFnZVZlcnNpb24udjQxNV0sXHJcbiAgICAgICBbUHJvdG9jb2xWZXJzaW9uLnYyLCBIZWxwUGFnZVZlcnNpb24udjQxNV0sXHJcbiAgICAgICBbUHJvdG9jb2xWZXJzaW9uLnYzLCBIZWxwUGFnZVZlcnNpb24udjQxNV0sXHJcbiAgICAgICBbUHJvdG9jb2xWZXJzaW9uLnY0LCBIZWxwUGFnZVZlcnNpb24udjQxNV0sXHJcbiAgICAgICBbUHJvdG9jb2xWZXJzaW9uLnY1LCBIZWxwUGFnZVZlcnNpb24udjQxNV0sXHJcbiAgICAgICBbUHJvdG9jb2xWZXJzaW9uLnY2LCBIZWxwUGFnZVZlcnNpb24udjQxNV0sXHJcbiAgICAgICBbUHJvdG9jb2xWZXJzaW9uLnY3LCBIZWxwUGFnZVZlcnNpb24udjQxNV0sXHJcbiAgICAgICBbUHJvdG9jb2xWZXJzaW9uLnY4LCBIZWxwUGFnZVZlcnNpb24udjQxNV0sXHJcbiAgICAgICBbUHJvdG9jb2xWZXJzaW9uLnY5LCBIZWxwUGFnZVZlcnNpb24udjQxNV0sXHJcbiAgICAgICBbUHJvdG9jb2xWZXJzaW9uLnYxMCwgSGVscFBhZ2VWZXJzaW9uLnY0MTVdLFxyXG4gICAgICAgW1Byb3RvY29sVmVyc2lvbi52MTEsIEhlbHBQYWdlVmVyc2lvbi52NDE4MV0sXHJcbiAgICAgICBbUHJvdG9jb2xWZXJzaW9uLnYxMiwgSGVscFBhZ2VWZXJzaW9uLnY0MTgxXSxcclxuICAgIF0pO1xyXG4gICAgcmV0dXJuIHN1cHBvcnRlZEhlbHBQYWdlVmVyc2lvbnM7XHJcbn0pKCk7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0SGVscFBhZ2VWZXJzaW9uKHByb3RvY29sVmVyc2lvbjogTWF5YmU8UHJvdG9jb2xWZXJzaW9uPikge1xyXG4gICAgaWYgKHNvbWUocHJvdG9jb2xWZXJzaW9uKSkge1xyXG4gICAgICAgIGNvbnN0IHN1cHBvcnRlZFZlcnNpb24gPSBzdXBwb3J0ZWRIZWxwUGFnZVZlcnNpb25zLmdldChwcm90b2NvbFZlcnNpb24pO1xyXG4gICAgICAgIGlmIChzb21lKHN1cHBvcnRlZFZlcnNpb24pKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBzdXBwb3J0ZWRWZXJzaW9uO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIFdlIG5lZWQgYSB2ZXJzaW9uIHN0cmluZyB0byBtYWtlIGEgdmFsaWQgaGVscCBsaW5rIFVSTCBzbyB3ZSBjYW4ndCBqdXN0IHJldHVybiB8dW5kZWZpbmVkfCBoZXJlXHJcbiAgICByZXR1cm4gSGVscFBhZ2VWZXJzaW9uLm1heEhlbHBQYWdlVmVyc2lvbjtcclxufVxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuLi9saWIvaG9zdC9wcm90b2NvbC12ZXJzaW9ucy50cyIsIi8vIENvcHlyaWdodCBKb3llbnQsIEluYy4gYW5kIG90aGVyIE5vZGUgY29udHJpYnV0b3JzLlxuLy9cbi8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhXG4vLyBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlXG4vLyBcIlNvZnR3YXJlXCIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmdcbi8vIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCxcbi8vIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXRcbi8vIHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZVxuLy8gZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4vL1xuLy8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWRcbi8vIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuLy9cbi8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1Ncbi8vIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0Zcbi8vIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU5cbi8vIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLFxuLy8gREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SXG4vLyBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFXG4vLyBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuXG4vLyBhIGR1cGxleCBzdHJlYW0gaXMganVzdCBhIHN0cmVhbSB0aGF0IGlzIGJvdGggcmVhZGFibGUgYW5kIHdyaXRhYmxlLlxuLy8gU2luY2UgSlMgZG9lc24ndCBoYXZlIG11bHRpcGxlIHByb3RvdHlwYWwgaW5oZXJpdGFuY2UsIHRoaXMgY2xhc3Ncbi8vIHByb3RvdHlwYWxseSBpbmhlcml0cyBmcm9tIFJlYWRhYmxlLCBhbmQgdGhlbiBwYXJhc2l0aWNhbGx5IGZyb21cbi8vIFdyaXRhYmxlLlxuXG4ndXNlIHN0cmljdCc7XG5cbi8qPHJlcGxhY2VtZW50PiovXG5cbnZhciBwcm9jZXNzTmV4dFRpY2sgPSByZXF1aXJlKCdwcm9jZXNzLW5leHRpY2stYXJncycpO1xuLyo8L3JlcGxhY2VtZW50PiovXG5cbi8qPHJlcGxhY2VtZW50PiovXG52YXIgb2JqZWN0S2V5cyA9IE9iamVjdC5rZXlzIHx8IGZ1bmN0aW9uIChvYmopIHtcbiAgdmFyIGtleXMgPSBbXTtcbiAgZm9yICh2YXIga2V5IGluIG9iaikge1xuICAgIGtleXMucHVzaChrZXkpO1xuICB9cmV0dXJuIGtleXM7XG59O1xuLyo8L3JlcGxhY2VtZW50PiovXG5cbm1vZHVsZS5leHBvcnRzID0gRHVwbGV4O1xuXG4vKjxyZXBsYWNlbWVudD4qL1xudmFyIHV0aWwgPSByZXF1aXJlKCdjb3JlLXV0aWwtaXMnKTtcbnV0aWwuaW5oZXJpdHMgPSByZXF1aXJlKCdpbmhlcml0cycpO1xuLyo8L3JlcGxhY2VtZW50PiovXG5cbnZhciBSZWFkYWJsZSA9IHJlcXVpcmUoJy4vX3N0cmVhbV9yZWFkYWJsZScpO1xudmFyIFdyaXRhYmxlID0gcmVxdWlyZSgnLi9fc3RyZWFtX3dyaXRhYmxlJyk7XG5cbnV0aWwuaW5oZXJpdHMoRHVwbGV4LCBSZWFkYWJsZSk7XG5cbnZhciBrZXlzID0gb2JqZWN0S2V5cyhXcml0YWJsZS5wcm90b3R5cGUpO1xuZm9yICh2YXIgdiA9IDA7IHYgPCBrZXlzLmxlbmd0aDsgdisrKSB7XG4gIHZhciBtZXRob2QgPSBrZXlzW3ZdO1xuICBpZiAoIUR1cGxleC5wcm90b3R5cGVbbWV0aG9kXSkgRHVwbGV4LnByb3RvdHlwZVttZXRob2RdID0gV3JpdGFibGUucHJvdG90eXBlW21ldGhvZF07XG59XG5cbmZ1bmN0aW9uIER1cGxleChvcHRpb25zKSB7XG4gIGlmICghKHRoaXMgaW5zdGFuY2VvZiBEdXBsZXgpKSByZXR1cm4gbmV3IER1cGxleChvcHRpb25zKTtcblxuICBSZWFkYWJsZS5jYWxsKHRoaXMsIG9wdGlvbnMpO1xuICBXcml0YWJsZS5jYWxsKHRoaXMsIG9wdGlvbnMpO1xuXG4gIGlmIChvcHRpb25zICYmIG9wdGlvbnMucmVhZGFibGUgPT09IGZhbHNlKSB0aGlzLnJlYWRhYmxlID0gZmFsc2U7XG5cbiAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy53cml0YWJsZSA9PT0gZmFsc2UpIHRoaXMud3JpdGFibGUgPSBmYWxzZTtcblxuICB0aGlzLmFsbG93SGFsZk9wZW4gPSB0cnVlO1xuICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLmFsbG93SGFsZk9wZW4gPT09IGZhbHNlKSB0aGlzLmFsbG93SGFsZk9wZW4gPSBmYWxzZTtcblxuICB0aGlzLm9uY2UoJ2VuZCcsIG9uZW5kKTtcbn1cblxuLy8gdGhlIG5vLWhhbGYtb3BlbiBlbmZvcmNlclxuZnVuY3Rpb24gb25lbmQoKSB7XG4gIC8vIGlmIHdlIGFsbG93IGhhbGYtb3BlbiBzdGF0ZSwgb3IgaWYgdGhlIHdyaXRhYmxlIHNpZGUgZW5kZWQsXG4gIC8vIHRoZW4gd2UncmUgb2suXG4gIGlmICh0aGlzLmFsbG93SGFsZk9wZW4gfHwgdGhpcy5fd3JpdGFibGVTdGF0ZS5lbmRlZCkgcmV0dXJuO1xuXG4gIC8vIG5vIG1vcmUgZGF0YSBjYW4gYmUgd3JpdHRlbi5cbiAgLy8gQnV0IGFsbG93IG1vcmUgd3JpdGVzIHRvIGhhcHBlbiBpbiB0aGlzIHRpY2suXG4gIHByb2Nlc3NOZXh0VGljayhvbkVuZE5ULCB0aGlzKTtcbn1cblxuZnVuY3Rpb24gb25FbmROVChzZWxmKSB7XG4gIHNlbGYuZW5kKCk7XG59XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShEdXBsZXgucHJvdG90eXBlLCAnZGVzdHJveWVkJywge1xuICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAodGhpcy5fcmVhZGFibGVTdGF0ZSA9PT0gdW5kZWZpbmVkIHx8IHRoaXMuX3dyaXRhYmxlU3RhdGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fcmVhZGFibGVTdGF0ZS5kZXN0cm95ZWQgJiYgdGhpcy5fd3JpdGFibGVTdGF0ZS5kZXN0cm95ZWQ7XG4gIH0sXG4gIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgLy8gd2UgaWdub3JlIHRoZSB2YWx1ZSBpZiB0aGUgc3RyZWFtXG4gICAgLy8gaGFzIG5vdCBiZWVuIGluaXRpYWxpemVkIHlldFxuICAgIGlmICh0aGlzLl9yZWFkYWJsZVN0YXRlID09PSB1bmRlZmluZWQgfHwgdGhpcy5fd3JpdGFibGVTdGF0ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gYmFja3dhcmQgY29tcGF0aWJpbGl0eSwgdGhlIHVzZXIgaXMgZXhwbGljaXRseVxuICAgIC8vIG1hbmFnaW5nIGRlc3Ryb3llZFxuICAgIHRoaXMuX3JlYWRhYmxlU3RhdGUuZGVzdHJveWVkID0gdmFsdWU7XG4gICAgdGhpcy5fd3JpdGFibGVTdGF0ZS5kZXN0cm95ZWQgPSB2YWx1ZTtcbiAgfVxufSk7XG5cbkR1cGxleC5wcm90b3R5cGUuX2Rlc3Ryb3kgPSBmdW5jdGlvbiAoZXJyLCBjYikge1xuICB0aGlzLnB1c2gobnVsbCk7XG4gIHRoaXMuZW5kKCk7XG5cbiAgcHJvY2Vzc05leHRUaWNrKGNiLCBlcnIpO1xufTtcblxuZnVuY3Rpb24gZm9yRWFjaCh4cywgZikge1xuICBmb3IgKHZhciBpID0gMCwgbCA9IHhzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIGYoeHNbaV0sIGkpO1xuICB9XG59XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gYzovamVua2lucy93b3Jrc3BhY2UvY2FtX3NieF9hbGxfbWFzdGVyX3NpZ25lZC9zYngtYWxsLXNpZ25lZC9ub2RlX21vZHVsZXMvc3RyZWFtLWJyb3dzZXJpZnkvbm9kZV9tb2R1bGVzL3JlYWRhYmxlLXN0cmVhbS9saWIvX3N0cmVhbV9kdXBsZXguanNcbi8vIG1vZHVsZSBpZCA9IDE1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8vIENvcHlyaWdodCAoYykgMjAxOCBCcm9taXVtLCBJbmMuXHJcbi8vIFVzZSBvZiB0aGUgQnJvbWl1bSwgSW5jLiBzb2Z0d2FyZSByZXF1aXJlcyBhIGxpY2Vuc2UgYWdyZWVtZW50IHdpdGggQnJvbWl1bSwgSW5jLiBvciBhbiBhdXRob3JpemVkIHJlc2VsbGVyLlxyXG5cclxuaW1wb3J0IHsgSGFzaCB9IGZyb20gXCIuL2hhc2hcIjtcclxuaW1wb3J0IHsgTWF5YmUgfSBmcm9tIFwiLi9tYXliZVwiO1xyXG5cclxuZnVuY3Rpb24gaXNQb3dlck9mMih2YWx1ZTogbnVtYmVyKTogYm9vbGVhbiB7XHJcbiAgICBjb25zdCBtYXNrID0gdmFsdWUgLSAxO1xyXG4gICAgcmV0dXJuICh2YWx1ZSAmIG1hc2spID09PSAwO1xyXG59XHJcblxyXG5mdW5jdGlvbiBtb2QobjogbnVtYmVyLCBkOiBudW1iZXIpOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIG4gJiAoZCAtIDEpO1xyXG59XHJcblxyXG50eXBlIEhvbGUgPSB1bmRlZmluZWQ7XHJcbnR5cGUgRGVsZXRlZCA9IG51bGw7XHJcblxyXG50eXBlIEhhc2hFbGVtZW50PEssIFY+ID0gW0hhc2gsIEssIFZdIHwgRGVsZXRlZCB8IEhvbGU7XHJcblxyXG5lbnVtIFRyeVB1dFN0YXR1cyB7XHJcbiAgICBWYWx1ZUluc2VydGVkLFxyXG4gICAgVmFsdWVVcGRhdGVkLFxyXG4gICAgRmFpbHVyZVxyXG59XHJcblxyXG5mdW5jdGlvbiBjb252ZXJ0VG9BcnJheTxLLCBWLCBVPihlbGVtZW50czogSGFzaEVsZW1lbnQ8SywgVj5bXSwgc2VsZWN0b3I6IChlbGVtZW50OiBbSGFzaCwgSywgVl0pID0+IFUpOiBVW10ge1xyXG4gICAgY29uc3QgZmlsdGVyZWRFbGVtZW50cyA9IGVsZW1lbnRzLmZpbHRlcigoZWxlbWVudCkgPT4ge1xyXG4gICAgICAgIHJldHVybiBlbGVtZW50ICE9PSB1bmRlZmluZWQgJiYgZWxlbWVudCAhPT0gbnVsbDtcclxuICAgIH0pIGFzIFtIYXNoLCBLLCBWXVtdO1xyXG4gICAgY29uc3QgbWFwcGVkRWxlbWVudHMgPSBmaWx0ZXJlZEVsZW1lbnRzLm1hcChzZWxlY3Rvcik7XHJcbiAgICByZXR1cm4gbWFwcGVkRWxlbWVudHM7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBIYXNoTWFwPEssIFY+IHtcclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgIHByaXZhdGUgaGFzaDogKGtleTogSykgPT4gSGFzaCxcclxuICAgICAgICBwcml2YXRlIGNvbXBhcmU6IChhOiBLLCBiOiBLKSA9PiBib29sZWFuLFxyXG4gICAgICAgIGluaXRpYWxDYXBhY2l0eSA9IDAsXHJcbiAgICAgICAgcHJpdmF0ZSBmaWxsRmFjdG9yID0gMC43NSkge1xyXG4gICAgICAgIGlmIChpbml0aWFsQ2FwYWNpdHkgIT09IDApIHtcclxuICAgICAgICAgICAgdGhpcy5yZXNpemUoaW5pdGlhbENhcGFjaXR5KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzaG91bGRSZXNpemUoc2l6ZTogbnVtYmVyKTogYm9vbGVhbiB7XHJcbiAgICAgICAgaWYgKHRoaXMuZWxlbWVudHMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gKHNpemUgLyB0aGlzLmVsZW1lbnRzLmxlbmd0aCkgPj0gdGhpcy5maWxsRmFjdG9yO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZmluZE5leHRDYXBhY2l0eSgpOiBudW1iZXIge1xyXG4gICAgICAgIGlmICh0aGlzLmVsZW1lbnRzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gMjtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZWxlbWVudHMubGVuZ3RoICogMjtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGZpbmRJbmRleChoYXNoOiBIYXNoLCBlbGVtZW50cyA9IHRoaXMuZWxlbWVudHMpOiBudW1iZXIge1xyXG4gICAgICAgIGNvbnN0IGluZGV4ID0gbW9kKGhhc2gsIGVsZW1lbnRzLmxlbmd0aCk7XHJcbiAgICAgICAgaWYgKGluZGV4IDwgMCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEhhc2hNYXAuZmluZEluZGV4OiBpbmRleCA8IDA6ICR7aW5kZXh9IDwgMGApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoaW5kZXggPj0gZWxlbWVudHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSGFzaE1hcC5maW5kSW5kZXg6IGluZGV4ID49IGVsZW1lbnRzLmxlbmd0aDogJHtpbmRleH0gPj0gJHtlbGVtZW50cy5sZW5ndGh9YCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBpbmRleDtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGNvbXBhcmVLZXlzKGhhOiBIYXNoLCBrYTogSywgaGI6IEhhc2gsIGtiOiBLKSB7XHJcbiAgICAgICAgcmV0dXJuIChoYSA9PT0gaGIpICYmIHRoaXMuY29tcGFyZShrYSwga2IpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgdHJ5UHV0KGhhc2g6IEhhc2gsIGtleTogSywgdmFsdWU6IFYsIHN0YXJ0OiBudW1iZXIsIGVuZDogbnVtYmVyLCBlbGVtZW50cyA9IHRoaXMuZWxlbWVudHMpOiBUcnlQdXRTdGF0dXMge1xyXG4gICAgICAgIGZvciAobGV0IGkgPSBzdGFydDsgaSA8IGVuZDsgaSArPSAxKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGVsZW1lbnQgPSBlbGVtZW50c1tpXTtcclxuICAgICAgICAgICAgaWYgKGVsZW1lbnQgIT09IHVuZGVmaW5lZCAmJiBlbGVtZW50ICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBbY3VycmVudEhhc2gsIGN1cnJlbnRLZXksIGN1cnJlbnRWYWx1ZV0gPSBlbGVtZW50O1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuY29tcGFyZUtleXMoaGFzaCwga2V5LCBjdXJyZW50SGFzaCwgY3VycmVudEtleSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50c1tpXSA9IFtoYXNoLCBrZXksIHZhbHVlXTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gVHJ5UHV0U3RhdHVzLlZhbHVlVXBkYXRlZDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnRzW2ldID0gW2hhc2gsIGtleSwgdmFsdWVdO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFRyeVB1dFN0YXR1cy5WYWx1ZUluc2VydGVkO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBUcnlQdXRTdGF0dXMuRmFpbHVyZTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHJlc2l6ZShjYXBhY2l0eTogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKGNhcGFjaXR5IDw9IHRoaXMuZWxlbWVudHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSGFzaE1hcC5yZXNpemU6IGNhcGFjaXR5IDw9IHRoaXMuZWxlbWVudHMubGVuZ3RoOiAke2NhcGFjaXR5fSA8PSAke3RoaXMuZWxlbWVudHMubGVuZ3RofWApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoY2FwYWNpdHkgPD0gdGhpcy5zaXplKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSGFzaE1hcC5yZXNpemU6IGNhcGFjaXR5IDw9IHRoaXMuc2l6ZTogJHtjYXBhY2l0eX0gPD0gJHt0aGlzLnNpemV9YCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghaXNQb3dlck9mMihjYXBhY2l0eSkpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBIYXNoTWFwLnJlc2l6ZTogIWlzUG93ZXJPZjIoJHtjYXBhY2l0eX0pYCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGVsZW1lbnRzID0gbmV3IEFycmF5PEhhc2hFbGVtZW50PEssIFY+PihjYXBhY2l0eSk7XHJcbiAgICAgICAgZm9yIChsZXQgZWxlbWVudCBvZiB0aGlzLmVsZW1lbnRzKSB7XHJcbiAgICAgICAgICAgIGlmIChlbGVtZW50ICE9PSB1bmRlZmluZWQgJiYgZWxlbWVudCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgW2hhc2gsIGtleSwgdmFsdWVdID0gZWxlbWVudDtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5maW5kSW5kZXgoaGFzaCwgZWxlbWVudHMpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMudHJ5UHV0KGhhc2gsIGtleSwgdmFsdWUsIGluZGV4LCBlbGVtZW50cy5sZW5ndGgsIGVsZW1lbnRzKSAhPT0gVHJ5UHV0U3RhdHVzLkZhaWx1cmUpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnRyeVB1dChoYXNoLCBrZXksIHZhbHVlLCAwLCBpbmRleCwgZWxlbWVudHMpICE9PSBUcnlQdXRTdGF0dXMuRmFpbHVyZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBIYXNoTWFwLnJlc2l6ZTogIXRyeVB1dGApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZWxlbWVudHMgPSBlbGVtZW50cztcclxuICAgIH1cclxuXHJcbiAgICBoYXMoa2V5OiBLKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0KGtleSkgIT09IHVuZGVmaW5lZDtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGlzSG9sZShlbGVtZW50OiBIYXNoRWxlbWVudDxLLCBWPik6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiBlbGVtZW50ID09PSB1bmRlZmluZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSB0cnlHZXQoaGFzaDogSGFzaCwga2V5OiBLLCBzdGFydDogbnVtYmVyLCBlbmQ6IG51bWJlcik6IFtib29sZWFuLCBNYXliZTxWPl0ge1xyXG4gICAgICAgIGNvbnN0IGZvdW5kSG9sZSA9IHRydWU7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IHN0YXJ0OyBpIDwgZW5kOyBpICs9IDEpIHtcclxuICAgICAgICAgICAgY29uc3QgZWxlbWVudCA9IHRoaXMuZWxlbWVudHNbaV07XHJcbiAgICAgICAgICAgIGlmIChlbGVtZW50ICE9PSB1bmRlZmluZWQgJiYgZWxlbWVudCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgW2N1cnJlbnRIYXNoLCBjdXJyZW50S2V5LCBjdXJyZW50VmFsdWVdID0gZWxlbWVudDtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmNvbXBhcmVLZXlzKGhhc2gsIGtleSwgY3VycmVudEhhc2gsIGN1cnJlbnRLZXkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFshZm91bmRIb2xlLCBjdXJyZW50VmFsdWVdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuaXNIb2xlKGVsZW1lbnQpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gW2ZvdW5kSG9sZSwgdW5kZWZpbmVkXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gWyFmb3VuZEhvbGUsIHVuZGVmaW5lZF07XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0KGtleTogSyk6IE1heWJlPFY+IHtcclxuICAgICAgICBpZiAodGhpcy5zaXplID09PSAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGhhc2ggPSB0aGlzLmhhc2goa2V5KTtcclxuICAgICAgICBjb25zdCBpbmRleCA9IHRoaXMuZmluZEluZGV4KGhhc2gpO1xyXG4gICAgICAgIGxldCBbZm91bmRIb2xlLCB2YWx1ZV0gPSB0aGlzLnRyeUdldChoYXNoLCBrZXksIGluZGV4LCB0aGlzLmVsZW1lbnRzLmxlbmd0aCk7XHJcbiAgICAgICAgaWYgKHZhbHVlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGZvdW5kSG9sZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgICAgIH1cclxuICAgICAgICBbZm91bmRIb2xlLCB2YWx1ZV0gPSB0aGlzLnRyeUdldChoYXNoLCBrZXksIDAsIGluZGV4KTtcclxuICAgICAgICByZXR1cm4gdmFsdWU7XHJcbiAgICB9XHJcblxyXG4gICAgcHV0KGtleTogSywgdmFsdWU6IFYpOiB2b2lkIHtcclxuICAgICAgICBpZiAodGhpcy5zaG91bGRSZXNpemUodGhpcy5zaXplICsgMSkpIHtcclxuICAgICAgICAgICAgdGhpcy5yZXNpemUodGhpcy5maW5kTmV4dENhcGFjaXR5KCkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBoYXNoID0gdGhpcy5oYXNoKGtleSk7XHJcbiAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLmZpbmRJbmRleChoYXNoKTtcclxuICAgICAgICBzd2l0Y2ggKHRoaXMudHJ5UHV0KGhhc2gsIGtleSwgdmFsdWUsIGluZGV4LCB0aGlzLmVsZW1lbnRzLmxlbmd0aCkpIHtcclxuICAgICAgICAgICAgY2FzZSBUcnlQdXRTdGF0dXMuVmFsdWVJbnNlcnRlZDpcclxuICAgICAgICAgICAgICAgIHRoaXMuc2l6ZSArPSAxO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICBjYXNlIFRyeVB1dFN0YXR1cy5WYWx1ZVVwZGF0ZWQ6XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHN3aXRjaCAodGhpcy50cnlQdXQoaGFzaCwga2V5LCB2YWx1ZSwgMCwgaW5kZXgpKSB7XHJcbiAgICAgICAgICAgIGNhc2UgVHJ5UHV0U3RhdHVzLlZhbHVlSW5zZXJ0ZWQ6XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNpemUgKz0gMTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgY2FzZSBUcnlQdXRTdGF0dXMuVmFsdWVVcGRhdGVkOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0hhc2hNYXAucHV0OiAhdHJ5UHV0Jyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHV0TWFueShrZXlWYWx1ZXM6IEl0ZXJhYmxlPFtLLCBWXT4pOiB2b2lkIHtcclxuICAgICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBrZXlWYWx1ZXMpIHtcclxuICAgICAgICAgICAgdGhpcy5wdXQoa2V5LCB2YWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgdHJ5UmVtb3ZlKGhhc2g6IEhhc2gsIGtleTogSywgc3RhcnQ6IG51bWJlciwgZW5kOiBudW1iZXIpOiBbYm9vbGVhbiwgYm9vbGVhbl0ge1xyXG4gICAgICAgIGNvbnN0IGZvdW5kSG9sZSA9IHRydWU7XHJcbiAgICAgICAgY29uc3QgcmVtb3ZlZCA9IHRydWU7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IHN0YXJ0OyBpIDwgZW5kOyBpICs9IDEpIHtcclxuICAgICAgICAgICAgY29uc3QgZWxlbWVudCA9IHRoaXMuZWxlbWVudHNbaV07XHJcbiAgICAgICAgICAgIGlmIChlbGVtZW50ICE9PSB1bmRlZmluZWQgJiYgZWxlbWVudCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgW2N1cnJlbnRIYXNoLCBjdXJyZW50S2V5LCBjdXJyZW50VmFsdWVdID0gZWxlbWVudDtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmNvbXBhcmVLZXlzKGhhc2gsIGtleSwgY3VycmVudEhhc2gsIGN1cnJlbnRLZXkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50c1tpXSA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFshZm91bmRIb2xlLCByZW1vdmVkXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmlzSG9sZShlbGVtZW50KSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFtmb3VuZEhvbGUsICFyZW1vdmVkXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gWyFmb3VuZEhvbGUsICFyZW1vdmVkXTtcclxuICAgIH1cclxuXHJcbiAgICByZW1vdmUoa2V5OiBLKTogYm9vbGVhbiB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNFbXB0eSgpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgaGFzaCA9IHRoaXMuaGFzaChrZXkpO1xyXG4gICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5maW5kSW5kZXgoaGFzaCk7XHJcbiAgICAgICAgbGV0IFtmb3VuZEhvbGUsIHJlbW92ZWRdID0gdGhpcy50cnlSZW1vdmUoaGFzaCwga2V5LCBpbmRleCwgdGhpcy5lbGVtZW50cy5sZW5ndGgpO1xyXG4gICAgICAgIGlmIChyZW1vdmVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2l6ZSAtPSAxO1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGZvdW5kSG9sZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFtmb3VuZEhvbGUsIHJlbW92ZWRdID0gdGhpcy50cnlSZW1vdmUoaGFzaCwga2V5LCAwLCBpbmRleCk7XHJcbiAgICAgICAgaWYgKHJlbW92ZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5zaXplIC09IDE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZW1vdmVkO1xyXG4gICAgfVxyXG5cclxuICAgIGlzRW1wdHkoKSA6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNpemUgPT09IDA7XHJcbiAgICB9XHJcblxyXG4gICAgdG9BcnJheSgpOiBbSywgVl1bXSB7XHJcbiAgICAgICAgY29uc3Qgc2VsZWN0S2V5VmFsdWU6IChlbGVtZW50OiBbSGFzaCwgSywgVl0pID0+IFtLLCBWXSA9IChbaGFzaCwga2V5LCB2YWx1ZV0pID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIFtrZXksIHZhbHVlXTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiBjb252ZXJ0VG9BcnJheSh0aGlzLmVsZW1lbnRzLCBzZWxlY3RLZXlWYWx1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgKltTeW1ib2wuaXRlcmF0b3JdKCk6IEl0ZXJhYmxlSXRlcmF0b3I8W0ssIFZdPiB7XHJcbiAgICAgICAgZm9yIChjb25zdCBlbGVtZW50IG9mIHRoaXMuZWxlbWVudHMpIHtcclxuICAgICAgICAgICAgaWYgKGVsZW1lbnQgIT09IHVuZGVmaW5lZCAmJiBlbGVtZW50ICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBbaGFzaCwga2V5LCB2YWx1ZV0gPSBlbGVtZW50O1xyXG4gICAgICAgICAgICAgICAgeWllbGQgW2tleSwgdmFsdWVdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHNpemUgPSAwO1xyXG4gICAgZWxlbWVudHM6IEhhc2hFbGVtZW50PEssIFY+W10gPSBbXTtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEhhc2hTZXQ8Sz4ge1xyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAgICAgaGFzaDogKGtleTogSykgPT4gSGFzaCxcclxuICAgICAgICBjb21wYXJlOiAoYTogSywgYjogSykgPT4gYm9vbGVhbixcclxuICAgICAgICBpbml0aWFsQ2FwYWNpdHkgPSAwLFxyXG4gICAgICAgIGZpbGxGYWN0b3IgPSAwLjc1KSB7XHJcbiAgICAgICAgdGhpcy5tYXAgPSBuZXcgSGFzaE1hcDxLLCBLPihoYXNoLCBjb21wYXJlLCBpbml0aWFsQ2FwYWNpdHksIGZpbGxGYWN0b3IpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBzaXplKCk6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubWFwLnNpemU7XHJcbiAgICB9XHJcblxyXG4gICAgYWRkTWFueShrZXlzOiBJdGVyYWJsZTxLPik6IG51bWJlciB7XHJcbiAgICAgICAgbGV0IG5LZXlzQWRkZWQgPSAwO1xyXG4gICAgICAgIGZvciAoY29uc3Qga2V5IG9mIGtleXMpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuYWRkKGtleSkpIHtcclxuICAgICAgICAgICAgICAgIG5LZXlzQWRkZWQgKz0gMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbktleXNBZGRlZDtcclxuICAgIH1cclxuXHJcbiAgICBhZGQoa2V5OiBLKTogYm9vbGVhbiB7XHJcbiAgICAgICAgY29uc3Qgc2l6ZUJlZm9yZSA9IHRoaXMubWFwLnNpemU7XHJcbiAgICAgICAgdGhpcy5tYXAucHV0KGtleSwga2V5KTtcclxuICAgICAgICBjb25zdCBzaXplQWZ0ZXIgPSB0aGlzLm1hcC5zaXplO1xyXG4gICAgICAgIHJldHVybiAoc2l6ZUFmdGVyIC0gc2l6ZUJlZm9yZSkgPT09IDE7XHJcbiAgICB9XHJcblxyXG4gICAgaGFzKGtleTogSyk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm1hcC5oYXMoa2V5KTtcclxuICAgIH1cclxuXHJcbiAgICByZW1vdmUoa2V5OiBLKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubWFwLnJlbW92ZShrZXkpO1xyXG4gICAgfVxyXG5cclxuICAgIGlzRW1wdHkoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubWFwLmlzRW1wdHkoKTtcclxuICAgIH1cclxuXHJcbiAgICB0b0FycmF5KCk6IEtbXSB7XHJcbiAgICAgICAgY29uc3Qgc2VsZWN0S2V5OiAoZWxlbWVudDogW0hhc2gsIEssIEtdKSA9PiBLID0gKFtoYXNoLCBrZXksIHZhbHVlXSkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4ga2V5O1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIGNvbnZlcnRUb0FycmF5KHRoaXMubWFwLmVsZW1lbnRzLCBzZWxlY3RLZXkpO1xyXG4gICAgfVxyXG5cclxuICAgICpbU3ltYm9sLml0ZXJhdG9yXSgpOiBJdGVyYWJsZUl0ZXJhdG9yPEs+IHtcclxuICAgICAgICBmb3IgKGNvbnN0IGVsZW1lbnQgb2YgdGhpcy5tYXAuZWxlbWVudHMpIHtcclxuICAgICAgICAgICAgaWYgKGVsZW1lbnQgIT09IHVuZGVmaW5lZCAmJiBlbGVtZW50ICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBbaGFzaCwga2V5LCB2YWx1ZV0gPSBlbGVtZW50O1xyXG4gICAgICAgICAgICAgICAgeWllbGQga2V5O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgbWFwOiBIYXNoTWFwPEssIEs+O1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEhhc2hhYmxlPEs+IHtcclxuICAgIGhhc2hXaXRoU2VlZChzZWVkOiBIYXNoKTogSGFzaDtcclxuICAgIGhhc2goKTogSGFzaDtcclxuICAgIGNvbXBhcmUob3RoZXI6IEspOiBib29sZWFuO1xyXG59XHJcblxyXG5mdW5jdGlvbiBkZWZhdWx0SGFzaDxLPihpbnN0YW5jZTogSGFzaGFibGU8Sz4pIHtcclxuICAgIHJldHVybiBpbnN0YW5jZS5oYXNoKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGRlZmF1bHRDb21wYXJlPEsgZXh0ZW5kcyBIYXNoYWJsZTxLPj4oYTogSywgYjogSyk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIGEuY29tcGFyZShiKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIG1ha2VEZWZhdWx0SGFzaE1hcDxLIGV4dGVuZHMgSGFzaGFibGU8Sz4sIFY+KCkge1xyXG4gICAgcmV0dXJuIG5ldyBIYXNoTWFwPEssIFY+KGRlZmF1bHRIYXNoLCBkZWZhdWx0Q29tcGFyZSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBtYWtlRGVmYXVsdEhhc2hTZXQ8SyBleHRlbmRzIEhhc2hhYmxlPEs+PigpIHtcclxuICAgIHJldHVybiBuZXcgSGFzaFNldDxLPihkZWZhdWx0SGFzaCwgZGVmYXVsdENvbXBhcmUpO1xyXG59XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4uL2xpYi9jb21tb24vaGFzaC1tYXAudHMiLCJ2YXIgZztcblxuLy8gVGhpcyB3b3JrcyBpbiBub24tc3RyaWN0IG1vZGVcbmcgPSAoZnVuY3Rpb24oKSB7XG5cdHJldHVybiB0aGlzO1xufSkoKTtcblxudHJ5IHtcblx0Ly8gVGhpcyB3b3JrcyBpZiBldmFsIGlzIGFsbG93ZWQgKHNlZSBDU1ApXG5cdGcgPSBnIHx8IEZ1bmN0aW9uKFwicmV0dXJuIHRoaXNcIikoKSB8fCAoMSxldmFsKShcInRoaXNcIik7XG59IGNhdGNoKGUpIHtcblx0Ly8gVGhpcyB3b3JrcyBpZiB0aGUgd2luZG93IHJlZmVyZW5jZSBpcyBhdmFpbGFibGVcblx0aWYodHlwZW9mIHdpbmRvdyA9PT0gXCJvYmplY3RcIilcblx0XHRnID0gd2luZG93O1xufVxuXG4vLyBnIGNhbiBzdGlsbCBiZSB1bmRlZmluZWQsIGJ1dCBub3RoaW5nIHRvIGRvIGFib3V0IGl0Li4uXG4vLyBXZSByZXR1cm4gdW5kZWZpbmVkLCBpbnN0ZWFkIG9mIG5vdGhpbmcgaGVyZSwgc28gaXQnc1xuLy8gZWFzaWVyIHRvIGhhbmRsZSB0aGlzIGNhc2UuIGlmKCFnbG9iYWwpIHsgLi4ufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGc7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAod2VicGFjaykvYnVpbGRpbi9nbG9iYWwuanNcbi8vIG1vZHVsZSBpZCA9IDE3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImlmICh0eXBlb2YgT2JqZWN0LmNyZWF0ZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAvLyBpbXBsZW1lbnRhdGlvbiBmcm9tIHN0YW5kYXJkIG5vZGUuanMgJ3V0aWwnIG1vZHVsZVxuICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGluaGVyaXRzKGN0b3IsIHN1cGVyQ3Rvcikge1xuICAgIGN0b3Iuc3VwZXJfID0gc3VwZXJDdG9yXG4gICAgY3Rvci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ3Rvci5wcm90b3R5cGUsIHtcbiAgICAgIGNvbnN0cnVjdG9yOiB7XG4gICAgICAgIHZhbHVlOiBjdG9yLFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgfVxuICAgIH0pO1xuICB9O1xufSBlbHNlIHtcbiAgLy8gb2xkIHNjaG9vbCBzaGltIGZvciBvbGQgYnJvd3NlcnNcbiAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBpbmhlcml0cyhjdG9yLCBzdXBlckN0b3IpIHtcbiAgICBjdG9yLnN1cGVyXyA9IHN1cGVyQ3RvclxuICAgIHZhciBUZW1wQ3RvciA9IGZ1bmN0aW9uICgpIHt9XG4gICAgVGVtcEN0b3IucHJvdG90eXBlID0gc3VwZXJDdG9yLnByb3RvdHlwZVxuICAgIGN0b3IucHJvdG90eXBlID0gbmV3IFRlbXBDdG9yKClcbiAgICBjdG9yLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IGN0b3JcbiAgfVxufVxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gYzovamVua2lucy93b3Jrc3BhY2UvY2FtX3NieF9hbGxfbWFzdGVyX3NpZ25lZC9zYngtYWxsLXNpZ25lZC9ub2RlX21vZHVsZXMvaW5oZXJpdHMvaW5oZXJpdHNfYnJvd3Nlci5qc1xuLy8gbW9kdWxlIGlkID0gMThcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLy8gQ29weXJpZ2h0IChjKSAyMDE4IEJyb21pdW0sIEluYy5cclxuLy8gVXNlIG9mIHRoZSBCcm9taXVtLCBJbmMuIHNvZnR3YXJlIHJlcXVpcmVzIGEgbGljZW5zZSBhZ3JlZW1lbnQgd2l0aCBCcm9taXVtLCBJbmMuIG9yIGFuIGF1dGhvcml6ZWQgcmVzZWxsZXIuXHJcblxyXG5pbXBvcnQgeyBIYXNoU2V0LCBIYXNoTWFwIH0gZnJvbSBcIi4vaGFzaC1tYXBcIjtcclxuaW1wb3J0IHsgbXVybXVySGFzaCB9IGZyb20gXCIuL211cm11ci1oYXNoXCI7XHJcbmltcG9ydCB7IEhhc2ggfSBmcm9tIFwiLi9oYXNoXCI7XHJcblxyXG5leHBvcnQgdHlwZSBJZCA9IG51bWJlcjtcclxuXHJcbmV4cG9ydCBjbGFzcyBJZEdlbmVyYXRvciB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHsgfVxyXG5cclxuICAgIGdlbmVyYXRlSWQoKTogSWQge1xyXG4gICAgICAgIGNvbnN0IGlkID0gdGhpcy5uZXh0SWQ7XHJcbiAgICAgICAgdGhpcy5uZXh0SWQgKz0gMTtcclxuICAgICAgICByZXR1cm4gaWQ7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBuZXh0SWQgPSAwO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaGFzaElkKGlkOiBJZCwgc2VlZDogSGFzaCA9IDApOiBIYXNoIHtcclxuICAgIHJldHVybiBtdXJtdXJIYXNoKGlkLCBzZWVkKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGlzU2FtZUlkKGE6IElkLCBiOiBJZCk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIGEgPT09IGI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBtYWtlSWRIYXNoU2V0KCk6IEhhc2hTZXQ8SWQ+IHtcclxuICAgIHJldHVybiBuZXcgSGFzaFNldDxJZD4oaGFzaElkLCBpc1NhbWVJZCk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBtYWtlSWRIYXNoTWFwPFY+KCk6IEhhc2hNYXA8SWQsIFY+IHtcclxuICAgIHJldHVybiBuZXcgSGFzaE1hcDxJZCwgVj4oaGFzaElkLCBpc1NhbWVJZCk7XHJcbn1cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi4vbGliL2NvbW1vbi9pZC1nZW5lcmF0b3IudHMiLCIvLyBDb3B5cmlnaHQgKGMpIDIwMTggQnJvbWl1bSwgSW5jLlxyXG4vLyBVc2Ugb2YgdGhlIEJyb21pdW0sIEluYy4gc29mdHdhcmUgcmVxdWlyZXMgYSBsaWNlbnNlIGFncmVlbWVudCB3aXRoIEJyb21pdW0sIEluYy4gb3IgYW4gYXV0aG9yaXplZCByZXNlbGxlci5cclxuXHJcbmltcG9ydCB7IGRvT25jZSB9IGZyb20gXCIuL29uY2VcIjtcclxuXHJcblxyXG5leHBvcnQgdHlwZSBIYW5kbGVFdmVudDxFdmVudD4gPSAoZXZlbnQ6IEV2ZW50KSA9PiB2b2lkO1xyXG5cclxuZXhwb3J0IGNsYXNzIEV2ZW50RGlzcGF0Y2hlcjxFdmVudD4ge1xyXG4gICAgY29uc3RydWN0b3IoKSB7IH1cclxuXHJcbiAgICByZWdpc3RlckV2ZW50SGFuZGxlcihldmVudEhhbmRsZXI6IEhhbmRsZUV2ZW50PEV2ZW50Pik6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuZXZlbnRIYW5kbGVycy5wdXNoKGV2ZW50SGFuZGxlcik7XHJcbiAgICB9XHJcblxyXG4gICAgcmVnaXN0ZXJPbmVTaG90RXZlbnRIYW5kbGVyKGV2ZW50SGFuZGxlcjogSGFuZGxlRXZlbnQ8RXZlbnQ+KTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5vbmVTaG90RXZlbnRIYW5kbGVycy5wdXNoKGV2ZW50SGFuZGxlcik7XHJcbiAgICB9XHJcblxyXG4gICAgZGlzcGF0Y2hFdmVudChldmVudDogRXZlbnQpOiB2b2lkIHtcclxuICAgICAgICBmb3IgKGNvbnN0IGhhbmRsZUV2ZW50IG9mIHRoaXMuZXZlbnRIYW5kbGVycykge1xyXG4gICAgICAgICAgICBoYW5kbGVFdmVudChldmVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZvciAoY29uc3QgaGFuZGxlRXZlbnQgb2YgdGhpcy5vbmVTaG90RXZlbnRIYW5kbGVycykge1xyXG4gICAgICAgICAgICBoYW5kbGVFdmVudChldmVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMub25lU2hvdEV2ZW50SGFuZGxlcnMgPSBbXTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGV2ZW50SGFuZGxlcnMgPSBuZXcgQXJyYXk8SGFuZGxlRXZlbnQ8RXZlbnQ+PigpO1xyXG4gICAgcHJpdmF0ZSBvbmVTaG90RXZlbnRIYW5kbGVycyA9IG5ldyBBcnJheTxIYW5kbGVFdmVudDxFdmVudD4+KCk7XHJcbn1cclxuXHJcbi8vIENvbmRpdGlvbkRpc3BhdGNoZXIgaXMgYSBzcGVjaWFsaXNlZCBFdmVudERpc3BhdGNoZXIgZGVzaWduZWQgdG8gbm90aWZ5XHJcbi8vIGxpc3RlbmVycyBhIHNpbmdsZSB0aW1lIHdoZW4gYSBjb25kaXRpb24gaXMgc2V0LiBVbmxpa2UgRXZlbnREaXNwYXRjaGVyLFxyXG4vLyBhIGxpc3RlbmVyIHdoaWNoIHJlZ2lzdGVycyBsYXRlIGRvZXNuJ3QgbWlzcyBhbnl0aGluZyBhbmQgaXMgaW1tZWRpYXRlbHlcclxuLy8gbm90aWZpZWQgdGhhdCB0aGUgY29uZGl0aW9uIGlzIGFscmVhZHkgc2F0aXNpZmVkLlxyXG5leHBvcnQgdHlwZSBIYW5kbGVDb25kaXRpb24gPSAoKSA9PiB2b2lkO1xyXG5cclxuZXhwb3J0IGNsYXNzIENvbmRpdGlvbkRpc3BhdGNoZXIge1xyXG4gICAgY29uc3RydWN0b3IoKSB7IH1cclxuXHJcbiAgICByZWdpc3RlckNvbmRpdGlvbkxpc3RlbmVyKGNvbmRpdGlvbkhhbmRsZXI6IEhhbmRsZUNvbmRpdGlvbik6IHZvaWQge1xyXG4gICAgICAgIGlmICh0aGlzLmNvbmRpdGlvbikge1xyXG4gICAgICAgICAgICBjb25kaXRpb25IYW5kbGVyKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5jb25kaXRpb25IYW5kbGVycy5wdXNoKGNvbmRpdGlvbkhhbmRsZXIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzZXRDb25kaXRpb24gPSBkb09uY2UoKCkgPT4ge3RoaXMuc2V0Q29uZGl0aW9uSW1wbCgpfSk7XHJcblxyXG4gICAgcHJpdmF0ZSBzZXRDb25kaXRpb25JbXBsKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuY29uZGl0aW9uID0gdHJ1ZTtcclxuICAgICAgICBmb3IgKGNvbnN0IGhhbmRsZUNvbmRpdGlvbiBvZiB0aGlzLmNvbmRpdGlvbkhhbmRsZXJzKSB7XHJcbiAgICAgICAgICAgIGhhbmRsZUNvbmRpdGlvbigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmNvbmRpdGlvbkhhbmRsZXJzID0gW107XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjb25kaXRpb24gPSBmYWxzZTtcclxuICAgIHByaXZhdGUgY29uZGl0aW9uSGFuZGxlcnMgPSBuZXcgQXJyYXk8SGFuZGxlQ29uZGl0aW9uPigpO1xyXG59XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4uL2xpYi9jb21tb24vZXZlbnQtZGlzcGF0Y2hlci50cyIsIi8vIENvcHlyaWdodCAoYykgMjAxOCBCcm9taXVtLCBJbmMuXHJcbi8vIFVzZSBvZiB0aGUgQnJvbWl1bSwgSW5jLiBzb2Z0d2FyZSByZXF1aXJlcyBhIGxpY2Vuc2UgYWdyZWVtZW50IHdpdGggQnJvbWl1bSwgSW5jLiBvciBhbiBhdXRob3JpemVkIHJlc2VsbGVyLlxyXG5cclxuaW1wb3J0IHsgaXNJblJhbmdlIH0gZnJvbSBcIi4vbnVtYmVyLXV0aWxzXCI7XHJcblxyXG5leHBvcnQgZW51bSBDaHJhZ0Vycm9yIHtcclxuICAgIG5vdEVuYWJsZWQsXHJcbiAgICBoZWxwZXJQb3J0RXJyb3IsXHJcbiAgICBsYXVuY2hCcm93c2VyRmFpbGVkLFxyXG4gICAgdHJ1c3REb3dubG9hZEZhaWxlZCxcclxuICAgIGhhbmRzaGFrZUVycm9yLFxyXG4gICAgdW5rbm93bkVycm9yLFxyXG4gICAgcmVjb3ZlcmVkRnJvbUVycm9yLFxyXG4gICAgaXMzMmJpdEZpcmVmb3gsXHJcbiAgICBoZWxwZXJVbnJlc3BvbnNpdmVcclxufVxyXG5cclxuLy8gSGF2ZSBzZXBlcmF0ZSBlbnVtIGZvciBtaW4gYW5kIG1heCBzbyB0aGF0IGVhY2ggQ2hyYWdFcnJvciB2YWx1ZSBjb3JyZXNwb25kc1xyXG4vLyB0byBhIHVuaXF1ZSBuYW1lLiBPdGhlcndpc2UgXCJDaHJhZ0Vycm9yLm5vdEVuYWJsZWRcIiBtYXkgYmUgbG9nZ2VkIGFzXHJcbi8vIFwiQ2hyYWdFcnJvci5taW5cIi5cclxuZW51bSBDaHJhZ0Vycm9yTGltaXRzIHtcclxuICAgIG1pbiA9IENocmFnRXJyb3Iubm90RW5hYmxlZCxcclxuICAgIG1heCA9IENocmFnRXJyb3IuaGVscGVyVW5yZXNwb25zaXZlXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBpc0NocmFnRXJyb3IodHlwZTogQ2hyYWdFcnJvcik6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIGlzSW5SYW5nZSh0eXBlLCBDaHJhZ0Vycm9yTGltaXRzLm1pbiwgQ2hyYWdFcnJvckxpbWl0cy5tYXgpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaXNFcnJvcih2YWx1ZTogYW55KTogdmFsdWUgaXMgRXJyb3Ige1xyXG4gICAgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgRXJyb3I7XHJcbn1cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi4vbGliL2NvbW1vbi9lcnJvcnMudHMiLCIvLyBzaGltIGZvciB1c2luZyBwcm9jZXNzIGluIGJyb3dzZXJcbnZhciBwcm9jZXNzID0gbW9kdWxlLmV4cG9ydHMgPSB7fTtcblxuLy8gY2FjaGVkIGZyb20gd2hhdGV2ZXIgZ2xvYmFsIGlzIHByZXNlbnQgc28gdGhhdCB0ZXN0IHJ1bm5lcnMgdGhhdCBzdHViIGl0XG4vLyBkb24ndCBicmVhayB0aGluZ3MuICBCdXQgd2UgbmVlZCB0byB3cmFwIGl0IGluIGEgdHJ5IGNhdGNoIGluIGNhc2UgaXQgaXNcbi8vIHdyYXBwZWQgaW4gc3RyaWN0IG1vZGUgY29kZSB3aGljaCBkb2Vzbid0IGRlZmluZSBhbnkgZ2xvYmFscy4gIEl0J3MgaW5zaWRlIGFcbi8vIGZ1bmN0aW9uIGJlY2F1c2UgdHJ5L2NhdGNoZXMgZGVvcHRpbWl6ZSBpbiBjZXJ0YWluIGVuZ2luZXMuXG5cbnZhciBjYWNoZWRTZXRUaW1lb3V0O1xudmFyIGNhY2hlZENsZWFyVGltZW91dDtcblxuZnVuY3Rpb24gZGVmYXVsdFNldFRpbW91dCgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3NldFRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQnKTtcbn1cbmZ1bmN0aW9uIGRlZmF1bHRDbGVhclRpbWVvdXQgKCkge1xuICAgIHRocm93IG5ldyBFcnJvcignY2xlYXJUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7XG59XG4oZnVuY3Rpb24gKCkge1xuICAgIHRyeSB7XG4gICAgICAgIGlmICh0eXBlb2Ygc2V0VGltZW91dCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IGRlZmF1bHRTZXRUaW1vdXQ7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIGlmICh0eXBlb2YgY2xlYXJUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBjbGVhclRpbWVvdXQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBkZWZhdWx0Q2xlYXJUaW1lb3V0O1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBkZWZhdWx0Q2xlYXJUaW1lb3V0O1xuICAgIH1cbn0gKCkpXG5mdW5jdGlvbiBydW5UaW1lb3V0KGZ1bikge1xuICAgIGlmIChjYWNoZWRTZXRUaW1lb3V0ID09PSBzZXRUaW1lb3V0KSB7XG4gICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9uc1xuICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApO1xuICAgIH1cbiAgICAvLyBpZiBzZXRUaW1lb3V0IHdhc24ndCBhdmFpbGFibGUgYnV0IHdhcyBsYXR0ZXIgZGVmaW5lZFxuICAgIGlmICgoY2FjaGVkU2V0VGltZW91dCA9PT0gZGVmYXVsdFNldFRpbW91dCB8fCAhY2FjaGVkU2V0VGltZW91dCkgJiYgc2V0VGltZW91dCkge1xuICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcbiAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gd2hlbiB3aGVuIHNvbWVib2R5IGhhcyBzY3Jld2VkIHdpdGggc2V0VGltZW91dCBidXQgbm8gSS5FLiBtYWRkbmVzc1xuICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dChmdW4sIDApO1xuICAgIH0gY2F0Y2goZSl7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgdHJ1c3QgdGhlIGdsb2JhbCBvYmplY3Qgd2hlbiBjYWxsZWQgbm9ybWFsbHlcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwobnVsbCwgZnVuLCAwKTtcbiAgICAgICAgfSBjYXRjaChlKXtcbiAgICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmUgYnV0IHdoZW4gaXQncyBhIHZlcnNpb24gb2YgSS5FLiB0aGF0IG11c3QgaGF2ZSB0aGUgZ2xvYmFsIG9iamVjdCBmb3IgJ3RoaXMnLCBob3BmdWxseSBvdXIgY29udGV4dCBjb3JyZWN0IG90aGVyd2lzZSBpdCB3aWxsIHRocm93IGEgZ2xvYmFsIGVycm9yXG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dC5jYWxsKHRoaXMsIGZ1biwgMCk7XG4gICAgICAgIH1cbiAgICB9XG5cblxufVxuZnVuY3Rpb24gcnVuQ2xlYXJUaW1lb3V0KG1hcmtlcikge1xuICAgIGlmIChjYWNoZWRDbGVhclRpbWVvdXQgPT09IGNsZWFyVGltZW91dCkge1xuICAgICAgICAvL25vcm1hbCBlbnZpcm9tZW50cyBpbiBzYW5lIHNpdHVhdGlvbnNcbiAgICAgICAgcmV0dXJuIGNsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH1cbiAgICAvLyBpZiBjbGVhclRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkXG4gICAgaWYgKChjYWNoZWRDbGVhclRpbWVvdXQgPT09IGRlZmF1bHRDbGVhclRpbWVvdXQgfHwgIWNhY2hlZENsZWFyVGltZW91dCkgJiYgY2xlYXJUaW1lb3V0KSB7XG4gICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcbiAgICAgICAgcmV0dXJuIGNsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzXG4gICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9IGNhdGNoIChlKXtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFdoZW4gd2UgYXJlIGluIEkuRS4gYnV0IHRoZSBzY3JpcHQgaGFzIGJlZW4gZXZhbGVkIHNvIEkuRS4gZG9lc24ndCAgdHJ1c3QgdGhlIGdsb2JhbCBvYmplY3Qgd2hlbiBjYWxsZWQgbm9ybWFsbHlcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQuY2FsbChudWxsLCBtYXJrZXIpO1xuICAgICAgICB9IGNhdGNoIChlKXtcbiAgICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmUgYnV0IHdoZW4gaXQncyBhIHZlcnNpb24gb2YgSS5FLiB0aGF0IG11c3QgaGF2ZSB0aGUgZ2xvYmFsIG9iamVjdCBmb3IgJ3RoaXMnLCBob3BmdWxseSBvdXIgY29udGV4dCBjb3JyZWN0IG90aGVyd2lzZSBpdCB3aWxsIHRocm93IGEgZ2xvYmFsIGVycm9yLlxuICAgICAgICAgICAgLy8gU29tZSB2ZXJzaW9ucyBvZiBJLkUuIGhhdmUgZGlmZmVyZW50IHJ1bGVzIGZvciBjbGVhclRpbWVvdXQgdnMgc2V0VGltZW91dFxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKHRoaXMsIG1hcmtlcik7XG4gICAgICAgIH1cbiAgICB9XG5cblxuXG59XG52YXIgcXVldWUgPSBbXTtcbnZhciBkcmFpbmluZyA9IGZhbHNlO1xudmFyIGN1cnJlbnRRdWV1ZTtcbnZhciBxdWV1ZUluZGV4ID0gLTE7XG5cbmZ1bmN0aW9uIGNsZWFuVXBOZXh0VGljaygpIHtcbiAgICBpZiAoIWRyYWluaW5nIHx8ICFjdXJyZW50UXVldWUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIGlmIChjdXJyZW50UXVldWUubGVuZ3RoKSB7XG4gICAgICAgIHF1ZXVlID0gY3VycmVudFF1ZXVlLmNvbmNhdChxdWV1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuICAgIH1cbiAgICBpZiAocXVldWUubGVuZ3RoKSB7XG4gICAgICAgIGRyYWluUXVldWUoKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGRyYWluUXVldWUoKSB7XG4gICAgaWYgKGRyYWluaW5nKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIHRpbWVvdXQgPSBydW5UaW1lb3V0KGNsZWFuVXBOZXh0VGljayk7XG4gICAgZHJhaW5pbmcgPSB0cnVlO1xuXG4gICAgdmFyIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB3aGlsZShsZW4pIHtcbiAgICAgICAgY3VycmVudFF1ZXVlID0gcXVldWU7XG4gICAgICAgIHF1ZXVlID0gW107XG4gICAgICAgIHdoaWxlICgrK3F1ZXVlSW5kZXggPCBsZW4pIHtcbiAgICAgICAgICAgIGlmIChjdXJyZW50UXVldWUpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50UXVldWVbcXVldWVJbmRleF0ucnVuKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuICAgICAgICBsZW4gPSBxdWV1ZS5sZW5ndGg7XG4gICAgfVxuICAgIGN1cnJlbnRRdWV1ZSA9IG51bGw7XG4gICAgZHJhaW5pbmcgPSBmYWxzZTtcbiAgICBydW5DbGVhclRpbWVvdXQodGltZW91dCk7XG59XG5cbnByb2Nlc3MubmV4dFRpY2sgPSBmdW5jdGlvbiAoZnVuKSB7XG4gICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCAtIDEpO1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkge1xuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgYXJnc1tpIC0gMV0gPSBhcmd1bWVudHNbaV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcXVldWUucHVzaChuZXcgSXRlbShmdW4sIGFyZ3MpKTtcbiAgICBpZiAocXVldWUubGVuZ3RoID09PSAxICYmICFkcmFpbmluZykge1xuICAgICAgICBydW5UaW1lb3V0KGRyYWluUXVldWUpO1xuICAgIH1cbn07XG5cbi8vIHY4IGxpa2VzIHByZWRpY3RpYmxlIG9iamVjdHNcbmZ1bmN0aW9uIEl0ZW0oZnVuLCBhcnJheSkge1xuICAgIHRoaXMuZnVuID0gZnVuO1xuICAgIHRoaXMuYXJyYXkgPSBhcnJheTtcbn1cbkl0ZW0ucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmZ1bi5hcHBseShudWxsLCB0aGlzLmFycmF5KTtcbn07XG5wcm9jZXNzLnRpdGxlID0gJ2Jyb3dzZXInO1xucHJvY2Vzcy5icm93c2VyID0gdHJ1ZTtcbnByb2Nlc3MuZW52ID0ge307XG5wcm9jZXNzLmFyZ3YgPSBbXTtcbnByb2Nlc3MudmVyc2lvbiA9ICcnOyAvLyBlbXB0eSBzdHJpbmcgdG8gYXZvaWQgcmVnZXhwIGlzc3Vlc1xucHJvY2Vzcy52ZXJzaW9ucyA9IHt9O1xuXG5mdW5jdGlvbiBub29wKCkge31cblxucHJvY2Vzcy5vbiA9IG5vb3A7XG5wcm9jZXNzLmFkZExpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3Mub25jZSA9IG5vb3A7XG5wcm9jZXNzLm9mZiA9IG5vb3A7XG5wcm9jZXNzLnJlbW92ZUxpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlQWxsTGlzdGVuZXJzID0gbm9vcDtcbnByb2Nlc3MuZW1pdCA9IG5vb3A7XG5wcm9jZXNzLnByZXBlbmRMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLnByZXBlbmRPbmNlTGlzdGVuZXIgPSBub29wO1xuXG5wcm9jZXNzLmxpc3RlbmVycyA9IGZ1bmN0aW9uIChuYW1lKSB7IHJldHVybiBbXSB9XG5cbnByb2Nlc3MuYmluZGluZyA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmJpbmRpbmcgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcblxucHJvY2Vzcy5jd2QgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAnLycgfTtcbnByb2Nlc3MuY2hkaXIgPSBmdW5jdGlvbiAoZGlyKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmNoZGlyIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn07XG5wcm9jZXNzLnVtYXNrID0gZnVuY3Rpb24oKSB7IHJldHVybiAwOyB9O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gYzovamVua2lucy93b3Jrc3BhY2UvY2FtX3NieF9hbGxfbWFzdGVyX3NpZ25lZC9zYngtYWxsLXNpZ25lZC9ub2RlX21vZHVsZXMvcHJvY2Vzcy9icm93c2VyLmpzXG4vLyBtb2R1bGUgaWQgPSAyMlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvLyBDb3B5cmlnaHQgSm95ZW50LCBJbmMuIGFuZCBvdGhlciBOb2RlIGNvbnRyaWJ1dG9ycy5cbi8vXG4vLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYVxuLy8gY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZVxuLy8gXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nXG4vLyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsXG4vLyBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0XG4vLyBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGVcbi8vIGZvbGxvd2luZyBjb25kaXRpb25zOlxuLy9cbi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkXG4vLyBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbi8vXG4vLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTXG4vLyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GXG4vLyBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOXG4vLyBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSxcbi8vIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUlxuLy8gT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRVxuLy8gVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cblxuLy8gTk9URTogVGhlc2UgdHlwZSBjaGVja2luZyBmdW5jdGlvbnMgaW50ZW50aW9uYWxseSBkb24ndCB1c2UgYGluc3RhbmNlb2ZgXG4vLyBiZWNhdXNlIGl0IGlzIGZyYWdpbGUgYW5kIGNhbiBiZSBlYXNpbHkgZmFrZWQgd2l0aCBgT2JqZWN0LmNyZWF0ZSgpYC5cblxuZnVuY3Rpb24gaXNBcnJheShhcmcpIHtcbiAgaWYgKEFycmF5LmlzQXJyYXkpIHtcbiAgICByZXR1cm4gQXJyYXkuaXNBcnJheShhcmcpO1xuICB9XG4gIHJldHVybiBvYmplY3RUb1N0cmluZyhhcmcpID09PSAnW29iamVjdCBBcnJheV0nO1xufVxuZXhwb3J0cy5pc0FycmF5ID0gaXNBcnJheTtcblxuZnVuY3Rpb24gaXNCb29sZWFuKGFyZykge1xuICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ2Jvb2xlYW4nO1xufVxuZXhwb3J0cy5pc0Jvb2xlYW4gPSBpc0Jvb2xlYW47XG5cbmZ1bmN0aW9uIGlzTnVsbChhcmcpIHtcbiAgcmV0dXJuIGFyZyA9PT0gbnVsbDtcbn1cbmV4cG9ydHMuaXNOdWxsID0gaXNOdWxsO1xuXG5mdW5jdGlvbiBpc051bGxPclVuZGVmaW5lZChhcmcpIHtcbiAgcmV0dXJuIGFyZyA9PSBudWxsO1xufVxuZXhwb3J0cy5pc051bGxPclVuZGVmaW5lZCA9IGlzTnVsbE9yVW5kZWZpbmVkO1xuXG5mdW5jdGlvbiBpc051bWJlcihhcmcpIHtcbiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdudW1iZXInO1xufVxuZXhwb3J0cy5pc051bWJlciA9IGlzTnVtYmVyO1xuXG5mdW5jdGlvbiBpc1N0cmluZyhhcmcpIHtcbiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdzdHJpbmcnO1xufVxuZXhwb3J0cy5pc1N0cmluZyA9IGlzU3RyaW5nO1xuXG5mdW5jdGlvbiBpc1N5bWJvbChhcmcpIHtcbiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdzeW1ib2wnO1xufVxuZXhwb3J0cy5pc1N5bWJvbCA9IGlzU3ltYm9sO1xuXG5mdW5jdGlvbiBpc1VuZGVmaW5lZChhcmcpIHtcbiAgcmV0dXJuIGFyZyA9PT0gdm9pZCAwO1xufVxuZXhwb3J0cy5pc1VuZGVmaW5lZCA9IGlzVW5kZWZpbmVkO1xuXG5mdW5jdGlvbiBpc1JlZ0V4cChyZSkge1xuICByZXR1cm4gb2JqZWN0VG9TdHJpbmcocmUpID09PSAnW29iamVjdCBSZWdFeHBdJztcbn1cbmV4cG9ydHMuaXNSZWdFeHAgPSBpc1JlZ0V4cDtcblxuZnVuY3Rpb24gaXNPYmplY3QoYXJnKSB7XG4gIHJldHVybiB0eXBlb2YgYXJnID09PSAnb2JqZWN0JyAmJiBhcmcgIT09IG51bGw7XG59XG5leHBvcnRzLmlzT2JqZWN0ID0gaXNPYmplY3Q7XG5cbmZ1bmN0aW9uIGlzRGF0ZShkKSB7XG4gIHJldHVybiBvYmplY3RUb1N0cmluZyhkKSA9PT0gJ1tvYmplY3QgRGF0ZV0nO1xufVxuZXhwb3J0cy5pc0RhdGUgPSBpc0RhdGU7XG5cbmZ1bmN0aW9uIGlzRXJyb3IoZSkge1xuICByZXR1cm4gKG9iamVjdFRvU3RyaW5nKGUpID09PSAnW29iamVjdCBFcnJvcl0nIHx8IGUgaW5zdGFuY2VvZiBFcnJvcik7XG59XG5leHBvcnRzLmlzRXJyb3IgPSBpc0Vycm9yO1xuXG5mdW5jdGlvbiBpc0Z1bmN0aW9uKGFyZykge1xuICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ2Z1bmN0aW9uJztcbn1cbmV4cG9ydHMuaXNGdW5jdGlvbiA9IGlzRnVuY3Rpb247XG5cbmZ1bmN0aW9uIGlzUHJpbWl0aXZlKGFyZykge1xuICByZXR1cm4gYXJnID09PSBudWxsIHx8XG4gICAgICAgICB0eXBlb2YgYXJnID09PSAnYm9vbGVhbicgfHxcbiAgICAgICAgIHR5cGVvZiBhcmcgPT09ICdudW1iZXInIHx8XG4gICAgICAgICB0eXBlb2YgYXJnID09PSAnc3RyaW5nJyB8fFxuICAgICAgICAgdHlwZW9mIGFyZyA9PT0gJ3N5bWJvbCcgfHwgIC8vIEVTNiBzeW1ib2xcbiAgICAgICAgIHR5cGVvZiBhcmcgPT09ICd1bmRlZmluZWQnO1xufVxuZXhwb3J0cy5pc1ByaW1pdGl2ZSA9IGlzUHJpbWl0aXZlO1xuXG5leHBvcnRzLmlzQnVmZmVyID0gQnVmZmVyLmlzQnVmZmVyO1xuXG5mdW5jdGlvbiBvYmplY3RUb1N0cmluZyhvKSB7XG4gIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobyk7XG59XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBjOi9qZW5raW5zL3dvcmtzcGFjZS9jYW1fc2J4X2FsbF9tYXN0ZXJfc2lnbmVkL3NieC1hbGwtc2lnbmVkL25vZGVfbW9kdWxlcy9jb3JlLXV0aWwtaXMvbGliL3V0aWwuanNcbi8vIG1vZHVsZSBpZCA9IDIzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8vIENvcHlyaWdodCAoYykgMjAxOCBCcm9taXVtLCBJbmMuXHJcbi8vIFVzZSBvZiB0aGUgQnJvbWl1bSwgSW5jLiBzb2Z0d2FyZSByZXF1aXJlcyBhIGxpY2Vuc2UgYWdyZWVtZW50IHdpdGggQnJvbWl1bSwgSW5jLiBvciBhbiBhdXRob3JpemVkIHJlc2VsbGVyLlxyXG5cclxuLy8vIDxyZWZlcmVuY2UgdHlwZXM9XCJjaHJvbWVcIi8+XHJcbmltcG9ydCB7IEdlbmVyaWNNZXNzYWdlUG9ydENoYW5uZWwsIE5lZ290aWF0aW9uIH0gZnJvbSBcIi4vbWVzc2FnZS1wb3J0LWNoYW5uZWxcIjtcclxuaW1wb3J0IHsgVGFiSWQgfSBmcm9tIFwiLi9jb21tb24tdHlwZXNcIjtcclxuaW1wb3J0IHsgTWVzc2FnZVR5cGUgfSBmcm9tIFwiLi9tZXNzYWdlLXR5cGVzXCI7XHJcbmltcG9ydCB7IEV4dGVuc2lvblJlYWR5VjEsIE1lc3NhZ2VQYXlsb2FkIH0gZnJvbSBcIi4vbWVzc2FnZXNcIjtcclxuaW1wb3J0IHsgbG9nIH0gZnJvbSBcIi4vbG9nXCI7XHJcbmltcG9ydCB7IEdlbmVyaWNNZXNzYWdlUm91dGVyLCBIYW5kbGVNZXNzYWdlIH0gZnJvbSBcIi4vbWVzc2FnZS1yb3V0ZXJcIjtcclxuaW1wb3J0IHsgSU9uQ29uZmlndXJlZCwgRHVtbXlPbkNvbmZpZ3VyZWQgfSBmcm9tIFwiLi9vbi1jb25maWd1cmVkXCI7XHJcblxyXG5leHBvcnQgdHlwZSBPblBhZ2VDb25uZWN0ZWQgPSAocG9ydDogY2hyb21lLnJ1bnRpbWUuUG9ydCkgPT4gdm9pZDtcclxuZXhwb3J0IHR5cGUgT25QYWdlRGlzY29ubmVjdGVkID0gKHBvcnQ6IGNocm9tZS5ydW50aW1lLlBvcnQpID0+IHZvaWQ7XHJcblxyXG5lbnVtIENvbm5lY3Rpb25TdGF0ZSB7XHJcbiAgICBkaXNjb25uZWN0ZWQsXHJcbiAgICBjb25uZWN0aW5nLFxyXG4gICAgY29ubmVjdGVkXHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBQYWdlUG9ydENvbnRyb2xsZXIge1xyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAgICAgICAgIHJlYWRvbmx5IHRhYklkOiBUYWJJZCxcclxuICAgICAgICAgICAgcHJpdmF0ZSBwb3J0OiBQcm9taXNlPGNocm9tZS5ydW50aW1lLlBvcnQ+LFxyXG4gICAgICAgICAgICBwcml2YXRlIG9uQ29ubmVjdDogT25QYWdlQ29ubmVjdGVkLFxyXG4gICAgICAgICAgICBwcml2YXRlIG9uRGlzY29ubmVjdDogT25QYWdlRGlzY29ubmVjdGVkLFxyXG4gICAgICAgICAgICAvLyBIYXZlIGEgZGVmYXVsdCBkdW1teSBvbkNvbmZpZ3VyZWQgd2hpY2ggaW1tZWRpYXRlbHkgY2FsbHMgYW55XHJcbiAgICAgICAgICAgIC8vIHJlZ2lzdGVyZWQgbGlzdGVuZXJzIGZvciBjYXNlcyB3aGVyZSB3ZSBkb24ndCB3YW50IHRvIHdhaXQgZm9yXHJcbiAgICAgICAgICAgIC8vIFNCWCB0byBiZSBmdWxseSBjb25maWd1cmVkIGJlZm9yZSBjb25uZWN0aW5nLCBzdWNoIGFzIHRoZSBwb3B1cC5cclxuICAgICAgICAgICAgcHJpdmF0ZSBvbkNvbmZpZ3VyZWQ6IElPbkNvbmZpZ3VyZWQgPSBuZXcgRHVtbXlPbkNvbmZpZ3VyZWQoKSkge1xyXG4gICAgICAgIHRoaXMucGFnZUNoYW5uZWwgPSBuZXcgR2VuZXJpY01lc3NhZ2VQb3J0Q2hhbm5lbChcclxuICAgICAgICAgICAgICAgIHBvcnQsXHJcbiAgICAgICAgICAgICAgICAocG9ydCkgPT4geyB0aGlzLm9uUGFnZUNvbm5lY3RlZChwb3J0KTsgfSxcclxuICAgICAgICAgICAgICAgIChwb3J0KSA9PiB7IHRoaXMub25QYWdlRGlzY29ubmVjdGVkKHBvcnQpOyB9LFxyXG4gICAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlUm91dGVyLFxyXG4gICAgICAgICAgICAgICAgTmVnb3RpYXRpb24uTm9uZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVnaXN0ZXJNZXNzYWdlSGFuZGxlcih0eXBlOiBNZXNzYWdlVHlwZSwgaGFuZGxlcjogSGFuZGxlTWVzc2FnZSkge1xyXG4gICAgICAgIHRoaXMubWVzc2FnZVJvdXRlci5yZWdpc3Rlck1lc3NhZ2VIYW5kbGVyKHR5cGUsIGhhbmRsZXIpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbm5lY3QoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuY29ubmVjdGlvblN0YXRlID09PSBDb25uZWN0aW9uU3RhdGUuZGlzY29ubmVjdGVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29ubmVjdGlvblN0YXRlID0gQ29ubmVjdGlvblN0YXRlLmNvbm5lY3Rpbmc7XHJcbiAgICAgICAgICAgIHRoaXMucGFnZUNoYW5uZWwuY29ubmVjdCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzZW5kTWVzc2FnZSh0eXBlOiBNZXNzYWdlVHlwZSwgcGF5bG9hZDogTWVzc2FnZVBheWxvYWQpIHtcclxuICAgICAgICBjb25zdCBtZXNzYWdlU2VuZGVyID0gdGhpcy5wYWdlQ2hhbm5lbC5tZXNzYWdlU2VuZGVyO1xyXG4gICAgICAgIG1lc3NhZ2VTZW5kZXIuc2VuZE1lc3NhZ2UodHlwZSwgcGF5bG9hZCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzZW5kRXh0ZW5zaW9uUmVhZHkoKSB7XHJcbiAgICAgICAgdGhpcy5zZW5kTWVzc2FnZShcclxuICAgICAgICAgICAgTWVzc2FnZVR5cGUuZXh0ZW5zaW9uUmVhZHlWMSxcclxuICAgICAgICAgICAgbmV3IEV4dGVuc2lvblJlYWR5VjEodGhpcy50YWJJZCkpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgb25QYWdlQ29ubmVjdGVkKHBvcnQ6IGNocm9tZS5ydW50aW1lLlBvcnQpIHtcclxuICAgICAgICBsb2coYFBhZ2VQb3J0Q29udHJvbGxlci5vblBhZ2VDb25uZWN0ZWQ6IHRhYklkOiAke3RoaXMudGFiSWR9YCk7XHJcbiAgICAgICAgdGhpcy5jb25uZWN0aW9uU3RhdGUgPSBDb25uZWN0aW9uU3RhdGUuY29ubmVjdGVkO1xyXG4gICAgICAgIHRoaXMub25Db25maWd1cmVkLnJlZ2lzdGVyTGlzdGVuZXIoKCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5jb25uZWN0aW9uU3RhdGUgPT09IENvbm5lY3Rpb25TdGF0ZS5jb25uZWN0ZWQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VuZEV4dGVuc2lvblJlYWR5KCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uQ29ubmVjdChwb3J0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgb25QYWdlRGlzY29ubmVjdGVkKHBvcnQ6IGNocm9tZS5ydW50aW1lLlBvcnQpIHtcclxuICAgICAgICBsb2coYFBhZ2VQb3J0Q29udHJvbGxlci5vblBhZ2VEaXNjb25uZWN0ZWQ6IHRhYklkOiAke3RoaXMudGFiSWR9YCk7XHJcbiAgICAgICAgdGhpcy5jb25uZWN0aW9uU3RhdGUgPSBDb25uZWN0aW9uU3RhdGUuZGlzY29ubmVjdGVkO1xyXG4gICAgICAgIHRoaXMub25EaXNjb25uZWN0KHBvcnQpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgbWVzc2FnZVJvdXRlciA9IG5ldyBHZW5lcmljTWVzc2FnZVJvdXRlcigpO1xyXG4gICAgcHJpdmF0ZSBwYWdlQ2hhbm5lbDogR2VuZXJpY01lc3NhZ2VQb3J0Q2hhbm5lbDtcclxuICAgIHByaXZhdGUgY29ubmVjdGlvblN0YXRlID0gQ29ubmVjdGlvblN0YXRlLmRpc2Nvbm5lY3RlZDtcclxufVxyXG5cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4uL2xpYi9jb21tb24vcGFnZS1wb3J0LWNvbnRyb2xsZXIudHMiLCIvLyBDb3B5cmlnaHQgKGMpIDIwMTggQnJvbWl1bSwgSW5jLlxyXG4vLyBVc2Ugb2YgdGhlIEJyb21pdW0sIEluYy4gc29mdHdhcmUgcmVxdWlyZXMgYSBsaWNlbnNlIGFncmVlbWVudCB3aXRoIEJyb21pdW0sIEluYy4gb3IgYW4gYXV0aG9yaXplZCByZXNlbGxlci5cclxuXHJcbmltcG9ydCB7IE1heWJlIH0gZnJvbSBcIi4vbWF5YmVcIjtcclxuaW1wb3J0IHsgQ29uZmlnUmVhZGVyLCBSZXB1dGFibGVTaXRlcyB9IGZyb20gXCIuL2NvbmZpZy1yZWFkZXJcIjtcclxuaW1wb3J0IHsgU2VyaWFsaXplZFBoaXNoaW5nTmF2U2VxRGF0YSwgU2VyaWFsaXplZElzRW5hYmxlZERhdGFWMTIsIFNlcmlhbGl6ZWROZXdUYWJQYWdlVXJsc1YxMiwgUHJvZHVjdFN0YXR1c2VzIH0gZnJvbSBcIi4vbWVzc2FnZXNcIjtcclxuaW1wb3J0IHsgU2VyaWFsaXplZFBoaXNoaW5nU291cmNlU2l0ZXMgfSBmcm9tIFwiLi9zZXJpYWxpemVkLXBoaXNoaW5nLXNvdXJjZS1zaXRlc1wiO1xyXG5pbXBvcnQgeyBjaHJvbWVOZXdUYWJQYWdlVXJscyB9IGZyb20gXCIuL2Nocm9tZS1uZXctdGFiLXVybHNcIjtcclxuXHJcbmV4cG9ydCB0eXBlIENvbmZpZ1ZlcnNpb24gPSBudW1iZXI7XHJcblxyXG5leHBvcnQgY2xhc3MgQ29uZmlnIGltcGxlbWVudHMgQ29uZmlnUmVhZGVyIHtcclxuICAgIHN0YXRpYyBwaGlzaGluZ1NvdXJjZVNpdGVzVmVyc2lvbigpIDogQ29uZmlnVmVyc2lvbiB7XHJcbiAgICAgICAgcmV0dXJuIDE7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIHBoaXNoaW5nTmF2aWdhdGlvblNlcXVlbmNlc1ZlcnNpb24oKSA6IENvbmZpZ1ZlcnNpb24ge1xyXG4gICAgICAgIHJldHVybiAxO1xyXG4gICAgfVxyXG5cclxuICAgIHRydXN0ZWRVcmxzIDogc3RyaW5nW10gPSBbXTtcclxuICAgIHVudHJ1c3RlZFVybHMgOiBzdHJpbmdbXSA9IFtdO1xyXG4gICAgdXNlclRydXN0ZWRPcmlnaW5zIDogc3RyaW5nW10gPSBbXTtcclxuICAgIHVzZXJVbnRydXN0ZWRPcmlnaW5zIDogc3RyaW5nW10gPSBbXTtcclxuICAgIHJlcHV0YWJsZVNpdGVzIDogUmVwdXRhYmxlU2l0ZXMgPSB7XHJcbiAgICAgICAgaW5kZXg6IDAsXHJcbiAgICAgICAgdG90YWw6IDAsXHJcbiAgICAgICAgcmVwdXRhYmxlU2l0ZXM6IFtdXHJcbiAgICB9O1xyXG5cclxuICAgIC8vIE11c3Qgc2V0IHRoaXMgaW5pdGlhbGx5IHRydWUgb3IgQ2hyYWcgd2lsbCBlcnJvciB3aGlsZSBpdCBzdGFydHMgdXAuXHJcbiAgICBpc0VuYWJsZWQ6IE1heWJlPFNlcmlhbGl6ZWRJc0VuYWJsZWREYXRhVjEyPiA9IHtcclxuICAgICAgICBjaHJvbWU6IHRydWUsXHJcbiAgICAgICAgZmlyZWZveDogdHJ1ZSxcclxuICAgICAgICBlZGdlOiB0cnVlLFxyXG4gICAgICAgIGVkZ2VDaHJvbWl1bTogdHJ1ZVxyXG4gICAgfTtcclxuICAgIG9wZW5QaGlzaGluZ0xpbmtzSW5TZWN1cmVCcm93c2VyID0gZmFsc2U7XHJcbiAgICBwcmlvcml0aXNlVHJ1c3RlZFNpdGVzID0gZmFsc2U7XHJcbiAgICBwcm9tcHRGb3JVbmNhdGVnb3JpemVkID0gZmFsc2U7XHJcbiAgICBpc0VudGVycHJpc2VQcm9kdWN0ID0gZmFsc2U7XHJcbiAgICBpc0NvbnN1bWVyUHJvZHVjdCA9IGZhbHNlO1xyXG4gICAgZG9udEFza0FnYWluID0gZmFsc2U7XHJcbiAgICBzZWN1cmVCcm93c2VyUmVkaXJlY3RUcnVzdGVkU2l0ZXMgPSBmYWxzZTtcclxuXHJcbiAgICAvLyBEZWZhdWx0IHRvIGEgcHJvYmxlbSBmcmVlIHN0YXRlIGluIGNhc2Ugd2UncmUgdGFsa2luZyBhbiBvbGQgcHJvdG9jb2wgdmVyc2lvbiB3aGljaCB3b24ndCBzZXQgdGhpc1xyXG4gICAgcHJvZHVjdFN0YXR1cyA9IFByb2R1Y3RTdGF0dXNlcy5FbmFibGVkO1xyXG5cclxuICAgIHBoaXNoaW5nU291cmNlU2l0ZXM6IE1heWJlPFNlcmlhbGl6ZWRQaGlzaGluZ1NvdXJjZVNpdGVzPiA9IHVuZGVmaW5lZDtcclxuICAgIHBoaXNoaW5nTmF2aWdhdGlvblNlcXVlbmNlczogTWF5YmU8U2VyaWFsaXplZFBoaXNoaW5nTmF2U2VxRGF0YT4gPSB1bmRlZmluZWQ7XHJcbiAgICBuZXdUYWJQYWdlVXJsczogU2VyaWFsaXplZE5ld1RhYlBhZ2VVcmxzVjEyID0ge1xyXG4gICAgICAgIGNocm9tZTogY2hyb21lTmV3VGFiUGFnZVVybHMsXHJcbiAgICAgICAgZmlyZWZveDogW10sXHJcbiAgICAgICAgZWRnZTogW10sXHJcbiAgICAgICAgZWRnZUNocm9taXVtOiBbXVxyXG4gICAgfTtcclxuXHJcbiAgICBibG9ja2VkUGFnZUxlYXJuTW9yZVVSTDogTWF5YmU8c3RyaW5nPjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGxvYWRDb25maWcoKTogQ29uZmlnIHtcclxuICAgIHJldHVybiBuZXcgQ29uZmlnKCk7XHJcbn1cclxuXHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2NvbmZpZy50cyIsIid1c2Ugc3RyaWN0JztcblxuaWYgKCFwcm9jZXNzLnZlcnNpb24gfHxcbiAgICBwcm9jZXNzLnZlcnNpb24uaW5kZXhPZigndjAuJykgPT09IDAgfHxcbiAgICBwcm9jZXNzLnZlcnNpb24uaW5kZXhPZigndjEuJykgPT09IDAgJiYgcHJvY2Vzcy52ZXJzaW9uLmluZGV4T2YoJ3YxLjguJykgIT09IDApIHtcbiAgbW9kdWxlLmV4cG9ydHMgPSBuZXh0VGljaztcbn0gZWxzZSB7XG4gIG1vZHVsZS5leHBvcnRzID0gcHJvY2Vzcy5uZXh0VGljaztcbn1cblxuZnVuY3Rpb24gbmV4dFRpY2soZm4sIGFyZzEsIGFyZzIsIGFyZzMpIHtcbiAgaWYgKHR5cGVvZiBmbiAhPT0gJ2Z1bmN0aW9uJykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1wiY2FsbGJhY2tcIiBhcmd1bWVudCBtdXN0IGJlIGEgZnVuY3Rpb24nKTtcbiAgfVxuICB2YXIgbGVuID0gYXJndW1lbnRzLmxlbmd0aDtcbiAgdmFyIGFyZ3MsIGk7XG4gIHN3aXRjaCAobGVuKSB7XG4gIGNhc2UgMDpcbiAgY2FzZSAxOlxuICAgIHJldHVybiBwcm9jZXNzLm5leHRUaWNrKGZuKTtcbiAgY2FzZSAyOlxuICAgIHJldHVybiBwcm9jZXNzLm5leHRUaWNrKGZ1bmN0aW9uIGFmdGVyVGlja09uZSgpIHtcbiAgICAgIGZuLmNhbGwobnVsbCwgYXJnMSk7XG4gICAgfSk7XG4gIGNhc2UgMzpcbiAgICByZXR1cm4gcHJvY2Vzcy5uZXh0VGljayhmdW5jdGlvbiBhZnRlclRpY2tUd28oKSB7XG4gICAgICBmbi5jYWxsKG51bGwsIGFyZzEsIGFyZzIpO1xuICAgIH0pO1xuICBjYXNlIDQ6XG4gICAgcmV0dXJuIHByb2Nlc3MubmV4dFRpY2soZnVuY3Rpb24gYWZ0ZXJUaWNrVGhyZWUoKSB7XG4gICAgICBmbi5jYWxsKG51bGwsIGFyZzEsIGFyZzIsIGFyZzMpO1xuICAgIH0pO1xuICBkZWZhdWx0OlxuICAgIGFyZ3MgPSBuZXcgQXJyYXkobGVuIC0gMSk7XG4gICAgaSA9IDA7XG4gICAgd2hpbGUgKGkgPCBhcmdzLmxlbmd0aCkge1xuICAgICAgYXJnc1tpKytdID0gYXJndW1lbnRzW2ldO1xuICAgIH1cbiAgICByZXR1cm4gcHJvY2Vzcy5uZXh0VGljayhmdW5jdGlvbiBhZnRlclRpY2soKSB7XG4gICAgICBmbi5hcHBseShudWxsLCBhcmdzKTtcbiAgICB9KTtcbiAgfVxufVxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gYzovamVua2lucy93b3Jrc3BhY2UvY2FtX3NieF9hbGxfbWFzdGVyX3NpZ25lZC9zYngtYWxsLXNpZ25lZC9ub2RlX21vZHVsZXMvcHJvY2Vzcy1uZXh0aWNrLWFyZ3MvaW5kZXguanNcbi8vIG1vZHVsZSBpZCA9IDI2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qIGVzbGludC1kaXNhYmxlIG5vZGUvbm8tZGVwcmVjYXRlZC1hcGkgKi9cbnZhciBidWZmZXIgPSByZXF1aXJlKCdidWZmZXInKVxudmFyIEJ1ZmZlciA9IGJ1ZmZlci5CdWZmZXJcblxuLy8gYWx0ZXJuYXRpdmUgdG8gdXNpbmcgT2JqZWN0LmtleXMgZm9yIG9sZCBicm93c2Vyc1xuZnVuY3Rpb24gY29weVByb3BzIChzcmMsIGRzdCkge1xuICBmb3IgKHZhciBrZXkgaW4gc3JjKSB7XG4gICAgZHN0W2tleV0gPSBzcmNba2V5XVxuICB9XG59XG5pZiAoQnVmZmVyLmZyb20gJiYgQnVmZmVyLmFsbG9jICYmIEJ1ZmZlci5hbGxvY1Vuc2FmZSAmJiBCdWZmZXIuYWxsb2NVbnNhZmVTbG93KSB7XG4gIG1vZHVsZS5leHBvcnRzID0gYnVmZmVyXG59IGVsc2Uge1xuICAvLyBDb3B5IHByb3BlcnRpZXMgZnJvbSByZXF1aXJlKCdidWZmZXInKVxuICBjb3B5UHJvcHMoYnVmZmVyLCBleHBvcnRzKVxuICBleHBvcnRzLkJ1ZmZlciA9IFNhZmVCdWZmZXJcbn1cblxuZnVuY3Rpb24gU2FmZUJ1ZmZlciAoYXJnLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpIHtcbiAgcmV0dXJuIEJ1ZmZlcihhcmcsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aClcbn1cblxuLy8gQ29weSBzdGF0aWMgbWV0aG9kcyBmcm9tIEJ1ZmZlclxuY29weVByb3BzKEJ1ZmZlciwgU2FmZUJ1ZmZlcilcblxuU2FmZUJ1ZmZlci5mcm9tID0gZnVuY3Rpb24gKGFyZywgZW5jb2RpbmdPck9mZnNldCwgbGVuZ3RoKSB7XG4gIGlmICh0eXBlb2YgYXJnID09PSAnbnVtYmVyJykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0FyZ3VtZW50IG11c3Qgbm90IGJlIGEgbnVtYmVyJylcbiAgfVxuICByZXR1cm4gQnVmZmVyKGFyZywgZW5jb2RpbmdPck9mZnNldCwgbGVuZ3RoKVxufVxuXG5TYWZlQnVmZmVyLmFsbG9jID0gZnVuY3Rpb24gKHNpemUsIGZpbGwsIGVuY29kaW5nKSB7XG4gIGlmICh0eXBlb2Ygc2l6ZSAhPT0gJ251bWJlcicpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdBcmd1bWVudCBtdXN0IGJlIGEgbnVtYmVyJylcbiAgfVxuICB2YXIgYnVmID0gQnVmZmVyKHNpemUpXG4gIGlmIChmaWxsICE9PSB1bmRlZmluZWQpIHtcbiAgICBpZiAodHlwZW9mIGVuY29kaW5nID09PSAnc3RyaW5nJykge1xuICAgICAgYnVmLmZpbGwoZmlsbCwgZW5jb2RpbmcpXG4gICAgfSBlbHNlIHtcbiAgICAgIGJ1Zi5maWxsKGZpbGwpXG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGJ1Zi5maWxsKDApXG4gIH1cbiAgcmV0dXJuIGJ1ZlxufVxuXG5TYWZlQnVmZmVyLmFsbG9jVW5zYWZlID0gZnVuY3Rpb24gKHNpemUpIHtcbiAgaWYgKHR5cGVvZiBzaXplICE9PSAnbnVtYmVyJykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0FyZ3VtZW50IG11c3QgYmUgYSBudW1iZXInKVxuICB9XG4gIHJldHVybiBCdWZmZXIoc2l6ZSlcbn1cblxuU2FmZUJ1ZmZlci5hbGxvY1Vuc2FmZVNsb3cgPSBmdW5jdGlvbiAoc2l6ZSkge1xuICBpZiAodHlwZW9mIHNpemUgIT09ICdudW1iZXInKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQXJndW1lbnQgbXVzdCBiZSBhIG51bWJlcicpXG4gIH1cbiAgcmV0dXJuIGJ1ZmZlci5TbG93QnVmZmVyKHNpemUpXG59XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBjOi9qZW5raW5zL3dvcmtzcGFjZS9jYW1fc2J4X2FsbF9tYXN0ZXJfc2lnbmVkL3NieC1hbGwtc2lnbmVkL25vZGVfbW9kdWxlcy9zYWZlLWJ1ZmZlci9pbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gMjdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLy8gQ29weXJpZ2h0IChjKSAyMDE4IEJyb21pdW0sIEluYy5cclxuLy8gVXNlIG9mIHRoZSBCcm9taXVtLCBJbmMuIHNvZnR3YXJlIHJlcXVpcmVzIGEgbGljZW5zZSBhZ3JlZW1lbnQgd2l0aCBCcm9taXVtLCBJbmMuIG9yIGFuIGF1dGhvcml6ZWQgcmVzZWxsZXIuXHJcblxyXG4vLy8gPHJlZmVyZW5jZSB0eXBlcz1cImNocm9tZVwiLz5cclxuaW1wb3J0IHsgVVJMIH0gZnJvbSBcIi4vdXJsLXV0aWxzXCI7XHJcbmltcG9ydCB7IGlzU2FtZU9yaWdpbiwgcGFyc2VPcmlnaW4sIE9yaWdpblBhcnNlT3B0aW9ucyB9IGZyb20gXCIuL29yaWdpblwiO1xyXG5pbXBvcnQgeyBsb2cgfSBmcm9tIFwiLi9sb2dcIjtcclxuaW1wb3J0IHsgc29tZSwgTWF5YmUgfSBmcm9tIFwiLi9tYXliZVwiO1xyXG5pbXBvcnQgeyByZWFkUG9ydFBhZ2VVcmwgfSBmcm9tIFwiLi9wb3J0LXV0aWxzXCI7XHJcbmltcG9ydCB7IEJyb3dzZXIgfSBmcm9tIFwiLi9icm93c2VyXCI7XHJcblxyXG5jb25zdCBleHRlbnNpb25VcmxPcmlnaW5QYXJzZU9wdGlvbnMgPSBuZXcgT3JpZ2luUGFyc2VPcHRpb25zKHtcclxuICAgIGFsbG93Q2hyb21lRXh0ZW5zaW9uU2NoZW1lOiB0cnVlLFxyXG4gICAgYWxsb3dGaXJlZm94RXh0ZW5zaW9uU2NoZW1lOiB0cnVlLFxyXG4gICAgYWxsb3dFZGdlRXh0ZW5zaW9uU2NoZW1lOiB0cnVlXHJcbn0pO1xyXG5cclxuY29uc3Qgb3duT3JpZ2luID0gcGFyc2VPcmlnaW4oY2hyb21lLnJ1bnRpbWUuZ2V0VVJMKFwibWFuaWZlc3QuanNvblwiKSwgZXh0ZW5zaW9uVXJsT3JpZ2luUGFyc2VPcHRpb25zKTtcclxuXHJcbmZ1bmN0aW9uIGlzT3duRXh0ZW5zaW9uVXJsKHVybDogVVJMKSB7XHJcbiAgICByZXR1cm4gaXNTYW1lT3JpZ2luKG93bk9yaWdpbiwgcGFyc2VPcmlnaW4odXJsLCBleHRlbnNpb25VcmxPcmlnaW5QYXJzZU9wdGlvbnMpKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZVVybEZyb21IaXN0b3J5KGJyb3dzZXI6IE1heWJlPEJyb3dzZXI+LCB1cmw6IHN0cmluZykge1xyXG4gICAgLy8gRWRnZSBkb2Vzbid0IHN1cHBvcnQgdGhlIGhpc3RvcnkgQVBJLlxyXG4gICAgaWYgKHNvbWUoYnJvd3NlcikgJiYgYnJvd3NlciAhPT0gQnJvd3Nlci5lZGdlKSB7XHJcbiAgICAgICAgbG9nKGBSZW1vdmluZyBoaXN0b3J5IGVudHJ5IGZvciBcIiR7dXJsfVwiYClcclxuICAgICAgICBjaHJvbWUuaGlzdG9yeS5kZWxldGVVcmwoe3VybDogdXJsfSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVFeHRlbnNpb25QYWdlRnJvbUhpc3RvcnlBZnRlckNsb3NpbmcoYnJvd3NlcjogTWF5YmU8QnJvd3Nlcj4sIHBvcnQ6IGNocm9tZS5ydW50aW1lLlBvcnQpIHtcclxuICAgIGNvbnN0IHBhZ2VVcmwgPSByZWFkUG9ydFBhZ2VVcmwocG9ydCk7XHJcbiAgICBpZiAoc29tZShwYWdlVXJsKSAmJiBpc093bkV4dGVuc2lvblVybChwYWdlVXJsKSkge1xyXG4gICAgICAgIHJlbW92ZVVybEZyb21IaXN0b3J5KGJyb3dzZXIsIHBhZ2VVcmwudG9TdHJpbmcoKSk7XHJcbiAgICB9XHJcbn1cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9oaXN0b3J5LnRzIiwiLy8gQ29weXJpZ2h0IChjKSAyMDE4IEJyb21pdW0sIEluYy5cclxuLy8gVXNlIG9mIHRoZSBCcm9taXVtLCBJbmMuIHNvZnR3YXJlIHJlcXVpcmVzIGEgbGljZW5zZSBhZ3JlZW1lbnQgd2l0aCBCcm9taXVtLCBJbmMuIG9yIGFuIGF1dGhvcml6ZWQgcmVzZWxsZXIuXHJcblxyXG4vLy8gPHJlZmVyZW5jZSB0eXBlcz1cImNocm9tZVwiLz5cclxuaW1wb3J0IHsgTWF5YmUsIG5vbmUgfSBmcm9tIFwiLi9tYXliZVwiO1xyXG5pbXBvcnQgeyBpc1ZhbGlkVGFiSWQgfSBmcm9tIFwiLi90YWItdXRpbHNcIjtcclxuaW1wb3J0IHsgVGFiSWQsIEZyYW1lSWQgfSBmcm9tIFwiLi9jb21tb24tdHlwZXNcIjtcclxuaW1wb3J0IHsgVVJMLCBwYXJzZVVybCB9IGZyb20gXCIuL3VybC11dGlsc1wiO1xyXG5pbXBvcnQgeyB0b1N0cmluZyB9IGZyb20gXCIuL3N0cmluZy11dGlsc1wiO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHJlYWRQb3J0VGFiSWQocG9ydDogY2hyb21lLnJ1bnRpbWUuUG9ydCk6IE1heWJlPFRhYklkPiB7XHJcbiAgICBjb25zdCBzZW5kZXIgPSBwb3J0LnNlbmRlcjtcclxuICAgIGlmIChub25lKHNlbmRlcikpIHtcclxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgfVxyXG4gICAgY29uc3QgdGFiID0gc2VuZGVyLnRhYjtcclxuICAgIGlmIChub25lKHRhYikpIHtcclxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgfVxyXG4gICAgY29uc3QgdGFiSWQgPSB0YWIuaWQ7XHJcbiAgICBpZiAobm9uZSh0YWJJZCkpIHtcclxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgfVxyXG4gICAgaWYgKCFpc1ZhbGlkVGFiSWQodGFiSWQpKSB7XHJcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgIH1cclxuICAgIHJldHVybiB0YWJJZDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHJlYWRQb3J0UGFnZVVybChwb3J0OiBjaHJvbWUucnVudGltZS5Qb3J0KTogTWF5YmU8VVJMPiB7XHJcbiAgICBjb25zdCBzZW5kZXIgPSBwb3J0LnNlbmRlcjtcclxuICAgIGlmIChub25lKHNlbmRlcikpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBjb25zdCB1cmxTcGVjID0gc2VuZGVyLnVybDtcclxuICAgIGlmIChub25lKHVybFNwZWMpKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgY29uc3QgdXJsID0gcGFyc2VVcmwodXJsU3BlYyk7XHJcbiAgICByZXR1cm4gdXJsO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcmVhZFBvcnRUYWJVcmwocG9ydDogY2hyb21lLnJ1bnRpbWUuUG9ydCk6IE1heWJlPFVSTD4ge1xyXG4gICAgY29uc3Qgc2VuZGVyID0gcG9ydC5zZW5kZXI7XHJcbiAgICBpZiAobm9uZShzZW5kZXIpKSB7XHJcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgIH1cclxuICAgIGNvbnN0IHRhYiA9IHNlbmRlci50YWI7XHJcbiAgICBpZiAobm9uZSh0YWIpKSB7XHJcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgIH1cclxuICAgIGNvbnN0IHVybFNwZWMgPSB0YWIudXJsO1xyXG4gICAgaWYgKG5vbmUodXJsU3BlYykpIHtcclxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgfVxyXG4gICAgY29uc3QgdXJsID0gcGFyc2VVcmwodXJsU3BlYyk7XHJcbiAgICByZXR1cm4gdXJsO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcmVhZFBvcnRGcmFtZUlkKHBvcnQ6IGNocm9tZS5ydW50aW1lLlBvcnQpOiBNYXliZTxGcmFtZUlkPiB7XHJcbiAgICBjb25zdCBzZW5kZXIgPSBwb3J0LnNlbmRlcjtcclxuICAgIGlmIChub25lKHNlbmRlcikpIHtcclxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHNlbmRlci5mcmFtZUlkO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcG9ydFRvU3RyaW5nKHBvcnQ6IGNocm9tZS5ydW50aW1lLlBvcnQpOiBzdHJpbmcge1xyXG4gICAgLy8gVGhlIHBvcnQgY2FuIGJlIHVuZGVmaW5lZCBpbiBNZXNzYWdlUG9ydENoYW5uZWwuaGFuZGxlRGlzY29ubmVjdCBpbiBFZGdlLlxyXG4gICAgaWYgKHBvcnQgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIHJldHVybiBcInVuZGVmaW5lZFwiO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRvU3RyaW5nKHtcclxuICAgICAgICBuYW1lOiBwb3J0Lm5hbWUsXHJcbiAgICAgICAgdGFiSWQ6IHJlYWRQb3J0VGFiSWQocG9ydCksXHJcbiAgICAgICAgZnJhbWVJZDogcmVhZFBvcnRGcmFtZUlkKHBvcnQpLFxyXG4gICAgICAgIHBhZ2VVcmw6IHJlYWRQb3J0UGFnZVVybChwb3J0KVxyXG4gICAgfSk7XHJcbn1cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi4vbGliL2NvbW1vbi9wb3J0LXV0aWxzLnRzIiwiLy8gQ29weXJpZ2h0IChjKSAyMDE4IEJyb21pdW0sIEluYy5cclxuLy8gVXNlIG9mIHRoZSBCcm9taXVtLCBJbmMuIHNvZnR3YXJlIHJlcXVpcmVzIGEgbGljZW5zZSBhZ3JlZW1lbnQgd2l0aCBCcm9taXVtLCBJbmMuIG9yIGFuIGF1dGhvcml6ZWQgcmVzZWxsZXIuXHJcblxyXG5leHBvcnQgdHlwZSBBY3Rpb24gPSAoKSA9PiB2b2lkO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGRvT25jZShhY3Rpb246IEFjdGlvbik6IEFjdGlvbiB7XHJcbiAgICBsZXQgZG9uZSA9IGZhbHNlO1xyXG4gICAgcmV0dXJuICgpID0+IHtcclxuICAgICAgICBpZiAoIWRvbmUpIHtcclxuICAgICAgICAgICAgZG9uZSA9IHRydWU7XHJcbiAgICAgICAgICAgIGFjdGlvbigpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbn1cclxuXHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuLi9saWIvY29tbW9uL29uY2UudHMiLCIvLyBDb3B5cmlnaHQgKGMpIDIwMTggQnJvbWl1bSwgSW5jLlxyXG4vLyBVc2Ugb2YgdGhlIEJyb21pdW0sIEluYy4gc29mdHdhcmUgcmVxdWlyZXMgYSBsaWNlbnNlIGFncmVlbWVudCB3aXRoIEJyb21pdW0sIEluYy4gb3IgYW4gYXV0aG9yaXplZCByZXNlbGxlci5cclxuXHJcbmltcG9ydCB7IGlzRW1wdHkgfSBmcm9tIFwiLi9hcnJheS11dGlsc1wiO1xyXG5cclxuZXhwb3J0IGVudW0gSTE4bk1lc3NhZ2VzIHtcclxuICAgIG5hbWUgPSBcImV4dE5hbWVcIixcclxuICAgIGxvY2FsZSA9IFwibG9jYWxlXCIsXHJcbiAgICBwcm9kdWN0TmFtZSA9IFwicHJvZHVjdE5hbWVcIixcclxuICAgIGJsb2NrZWRMaW5rUGFnZVRpdGxlID0gXCJibG9ja2VkTGlua1BhZ2VUaXRsZVwiLFxyXG4gICAgYmxvY2tlZExpbmtQYWdlT3BlbmVkU2VjdXJlRXhwbGFuYXRpb24gPSBcImJsb2NrZWRMaW5rUGFnZU9wZW5lZFNlY3VyZUV4cGxhbmF0aW9uXCIsXHJcbiAgICBibG9ja2VkUERGUGFnZVRpdGxlID0gXCJibG9ja2VkUERGUGFnZVRpdGxlXCIsXHJcbiAgICBibG9ja2VkUERGUGFnZU9wZW5lZFNlY3VyZUV4cGxhbmF0aW9uID0gXCJibG9ja2VkUERGUGFnZU9wZW5lZFNlY3VyZUV4cGxhbmF0aW9uXCIsXHJcbiAgICBibG9ja2VkUGFnZUhlbHBMaW5rID0gXCJibG9ja2VkUGFnZUhlbHBMaW5rXCIsXHJcbiAgICBibG9ja2VkUGFnZVdhcm5pbmdUb29sdGlwID0gXCJibG9ja2VkUGFnZVdhcm5pbmdUb29sdGlwXCIsXHJcbiAgICBibG9ja2VkUGFnZUJyb3dzZXJFeHBsYW5hdGlvbiA9IFwiYmxvY2tlZFBhZ2VTZWN1cmVCcm93c2VyRXhwbGFuYXRpb25cIixcclxuICAgIGJsb2NrZWRQYWdlU0JYT3BlbmVkU2VjdXJlRXhwbGFuYXRpb24gPSBcImJsb2NrZWRQYWdlU0JYT3BlbmVkU2VjdXJlRXhwbGFuYXRpb25cIixcclxuICAgIHRydXN0VXJsQnV0dG9uID0gXCJibG9ja2VkUGFnZUNvbnRpbnVlXCIsXHJcbiAgICB0cnVzdFVybEJ1dHRvbldpdGhTdWJzdGl0dXRpb24gPSBcImJsb2NrZWRQYWdlQ29udGludWVWMlwiLFxyXG4gICAgdW50cnVzdFVybEJ1dHRvbiA9IFwiYmxvY2tlZFBhZ2VTZWN1cmVcIixcclxuICAgIHVudHJ1c3RVcmxCdXR0b25XaXRoU3Vic3RpdHV0aW9uID0gXCJibG9ja2VkUGFnZVNlY3VyZVYyXCIsXHJcbiAgICBkb250QXNrQWdhaW5UZXh0ID0gXCJibG9ja2VkUGFnZURvbnRBc2tBZ2FpblwiLFxyXG4gICAgcmVtZW1iZXJUcnVzdERlY2lzaW9uVGV4dCA9IFwiYmxvY2tlZFBhZ2VSZW1lbWJlclwiLFxyXG4gICAgb3BlbkxpbmtJblNlY3VyZUJyb3dzZXIgPSBcImNvbnRleHRNZW51T3BlblNlY3VyZVwiLFxyXG4gICAgcG9wdXBOb0Vycm9yID0gXCJwb3B1cE5vRXJyb3JcIixcclxuICAgIHBvcHVwU0JYRGlzYWJsZWQgPSBcInBvcHVwU0JYRGlzYWJsZWRcIixcclxuICAgIHBvcHVwR2VuZXJpY0Vycm9yID0gXCJwb3B1cEdlbmVyaWNFcnJvclwiLFxyXG4gICAgcG9wdXBNaXNzaW5nSGVscGVyID0gXCJwb3B1cE1pc3NpbmdIZWxwZXJcIixcclxuICAgIHBvcHVwSXMzMmJpdEZpcmVmb3ggPSBcInBvcHVwSXMzMmJpdEZpcmVmb3hcIixcclxuICAgIHBvcHVwRG9udEFza0FnYWluID0gXCJwb3B1cERvbnRBc2tBZ2FpblwiLFxyXG4gICAgcG9wdXBJbml0UmVxdWlyZWQgPSBcInBvcHVwSW5pdFJlcXVpcmVkXCIsXHJcbiAgICBwb3B1cFByb2R1Y3REaXNhYmxlZCA9IFwicG9wdXBQcm9kdWN0RGlzYWJsZWRcIixcclxuICAgIHBvcHVwVW5saWNlbnNlZCA9IFwicG9wdXBVbmxpY2Vuc2VkXCIsXHJcbiAgICBwb3B1cFVuY29uZmlndXJlZCA9IFwicG9wdXBVbmNvbmZpZ3VyZWRcIixcclxuICAgIHBvcHVwQ2xlYXJSZW1lbWJlcmVkRGVjaXNpb25zVGV4dCA9IFwicG9wdXBDbGVhclJlbWVtYmVyZWREZWNpc2lvbnNUZXh0XCIsXHJcbiAgICBwb3B1cENsZWFyUmVtZW1iZXJlZERlY2lzaW9uc0J1dHRvbiA9IFwicG9wdXBDbGVhclJlbWVtYmVyZWREZWNpc2lvbnNCdXR0b25cIixcclxuICAgIG9wZW5PcHRpb25zUGFnZVRleHQgPSBcInBvcHVwT3Blbk9wdGlvbnNQYWdlVGV4dFwiLFxyXG4gICAgb3Blbk9wdGlvbnNQYWdlQnV0dG9uID0gXCJwb3B1cE9wZW5PcHRpb25zUGFnZUJ1dHRvblwiLFxyXG4gICAgaGVscExpbmtUZXh0ID0gXCJwb3B1cEhlbHBMaW5rVGV4dFwiLFxyXG4gICAgaGVscExpbmtGaWxlID0gXCJwb3B1cEhlbHBMaW5rRmlsZVwiLFxyXG4gICAgY2xlYXJBbGxSZW1lbWJlcmVkRGVjaXNpb25zQnV0dG9uID0gXCJvcHRpb25zQ2xlYXJBbGxSZW1lbWJlcmVkRGVjaXNpb25CdXR0b25cIixcclxuICAgIGNsZWFyUmVtZW1iZXJlZERlY2lzaW9uQnV0dG9uID0gXCJvcHRpb25zQ2xlYXJSZW1lbWJlcmVkRGVjaXNpb25zQnV0dG9uXCIsXHJcbiAgICB0cnVzdGVkT3JpZ2luc1RpdGxlID0gXCJvcHRpb25zVHJ1c3RlZE9yaWdpbnNUaXRsZVwiLFxyXG4gICAgdW50cnVzdGVkT3JpZ2luc1RpdGxlID0gXCJvcHRpb25zVW50cnVzdGVkT3JpZ2luc1RpdGxlXCIsXHJcbiAgICBvcHRpb25zTm9SZW1lbWJlcmVkRGVjaXNpb25zID0gXCJvcHRpb25zTm9SZW1lbWJlcmVkRGVjaXNpb25zXCIsXHJcbiAgICBvcHRpb25zUHJvbXB0RGlzYWJsZWQgPSBcIm9wdGlvbnNQcm9tcHREaXNhYmxlZFwiXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRJMThuKGkxOG5NZXNzYWdlOiBJMThuTWVzc2FnZXMsIC4uLnN1YnNpdHV0aW9uczogc3RyaW5nW10pOiBzdHJpbmcge1xyXG4gICAgaWYgKGlzRW1wdHkoc3Vic2l0dXRpb25zKSkge1xyXG4gICAgICAgIHJldHVybiBjaHJvbWUuaTE4bi5nZXRNZXNzYWdlKGkxOG5NZXNzYWdlKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIGNocm9tZS5pMThuLmdldE1lc3NhZ2UoaTE4bk1lc3NhZ2UsIHN1YnNpdHV0aW9ucyk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBpc1BvcHVwRXJyb3IoaTE4bk1lc3NhZ2U6IEkxOG5NZXNzYWdlcyk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIChpMThuTWVzc2FnZSA9PT0gSTE4bk1lc3NhZ2VzLnBvcHVwR2VuZXJpY0Vycm9yIHx8XHJcbiAgICAgICAgaTE4bk1lc3NhZ2UgPT09IEkxOG5NZXNzYWdlcy5wb3B1cE1pc3NpbmdIZWxwZXIgfHxcclxuICAgICAgICBpMThuTWVzc2FnZSA9PT0gSTE4bk1lc3NhZ2VzLnBvcHVwSXMzMmJpdEZpcmVmb3gpO1xyXG59XHJcblxyXG4vL0tSWS00NTY5Mi8vIEhpZGUgb3B0aW9ucyBwYWdlXHJcbmV4cG9ydCBlbnVtIFBvcHVwVHlwZSB7XHJcbiAgICBjbGVhclJlbWVtYmVyZWREZWNpc2lvbnMsXHJcbiAgICBvcHRpb25zUGFnZVxyXG59XHJcbmV4cG9ydCBjb25zdCBwb3B1cFR5cGUgPSBQb3B1cFR5cGUuY2xlYXJSZW1lbWJlcmVkRGVjaXNpb25zO1xyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi4vbGliL2NvbW1vbi9pMThuLnRzIiwiLy8gQ29weXJpZ2h0IEpveWVudCwgSW5jLiBhbmQgb3RoZXIgTm9kZSBjb250cmlidXRvcnMuXG4vL1xuLy8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGFcbi8vIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGVcbi8vIFwiU29mdHdhcmVcIiksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZ1xuLy8gd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLFxuLy8gZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdFxuLy8gcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlXG4vLyBmb2xsb3dpbmcgY29uZGl0aW9uczpcbi8vXG4vLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZFxuLy8gaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4vL1xuLy8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTU1xuLy8gT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRlxuLy8gTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTlxuLy8gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sXG4vLyBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1Jcbi8vIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEVcbi8vIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG5cbmZ1bmN0aW9uIEV2ZW50RW1pdHRlcigpIHtcbiAgdGhpcy5fZXZlbnRzID0gdGhpcy5fZXZlbnRzIHx8IHt9O1xuICB0aGlzLl9tYXhMaXN0ZW5lcnMgPSB0aGlzLl9tYXhMaXN0ZW5lcnMgfHwgdW5kZWZpbmVkO1xufVxubW9kdWxlLmV4cG9ydHMgPSBFdmVudEVtaXR0ZXI7XG5cbi8vIEJhY2t3YXJkcy1jb21wYXQgd2l0aCBub2RlIDAuMTAueFxuRXZlbnRFbWl0dGVyLkV2ZW50RW1pdHRlciA9IEV2ZW50RW1pdHRlcjtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5fZXZlbnRzID0gdW5kZWZpbmVkO1xuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5fbWF4TGlzdGVuZXJzID0gdW5kZWZpbmVkO1xuXG4vLyBCeSBkZWZhdWx0IEV2ZW50RW1pdHRlcnMgd2lsbCBwcmludCBhIHdhcm5pbmcgaWYgbW9yZSB0aGFuIDEwIGxpc3RlbmVycyBhcmVcbi8vIGFkZGVkIHRvIGl0LiBUaGlzIGlzIGEgdXNlZnVsIGRlZmF1bHQgd2hpY2ggaGVscHMgZmluZGluZyBtZW1vcnkgbGVha3MuXG5FdmVudEVtaXR0ZXIuZGVmYXVsdE1heExpc3RlbmVycyA9IDEwO1xuXG4vLyBPYnZpb3VzbHkgbm90IGFsbCBFbWl0dGVycyBzaG91bGQgYmUgbGltaXRlZCB0byAxMC4gVGhpcyBmdW5jdGlvbiBhbGxvd3Ncbi8vIHRoYXQgdG8gYmUgaW5jcmVhc2VkLiBTZXQgdG8gemVybyBmb3IgdW5saW1pdGVkLlxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5zZXRNYXhMaXN0ZW5lcnMgPSBmdW5jdGlvbihuKSB7XG4gIGlmICghaXNOdW1iZXIobikgfHwgbiA8IDAgfHwgaXNOYU4obikpXG4gICAgdGhyb3cgVHlwZUVycm9yKCduIG11c3QgYmUgYSBwb3NpdGl2ZSBudW1iZXInKTtcbiAgdGhpcy5fbWF4TGlzdGVuZXJzID0gbjtcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmVtaXQgPSBmdW5jdGlvbih0eXBlKSB7XG4gIHZhciBlciwgaGFuZGxlciwgbGVuLCBhcmdzLCBpLCBsaXN0ZW5lcnM7XG5cbiAgaWYgKCF0aGlzLl9ldmVudHMpXG4gICAgdGhpcy5fZXZlbnRzID0ge307XG5cbiAgLy8gSWYgdGhlcmUgaXMgbm8gJ2Vycm9yJyBldmVudCBsaXN0ZW5lciB0aGVuIHRocm93LlxuICBpZiAodHlwZSA9PT0gJ2Vycm9yJykge1xuICAgIGlmICghdGhpcy5fZXZlbnRzLmVycm9yIHx8XG4gICAgICAgIChpc09iamVjdCh0aGlzLl9ldmVudHMuZXJyb3IpICYmICF0aGlzLl9ldmVudHMuZXJyb3IubGVuZ3RoKSkge1xuICAgICAgZXIgPSBhcmd1bWVudHNbMV07XG4gICAgICBpZiAoZXIgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICB0aHJvdyBlcjsgLy8gVW5oYW5kbGVkICdlcnJvcicgZXZlbnRcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEF0IGxlYXN0IGdpdmUgc29tZSBraW5kIG9mIGNvbnRleHQgdG8gdGhlIHVzZXJcbiAgICAgICAgdmFyIGVyciA9IG5ldyBFcnJvcignVW5jYXVnaHQsIHVuc3BlY2lmaWVkIFwiZXJyb3JcIiBldmVudC4gKCcgKyBlciArICcpJyk7XG4gICAgICAgIGVyci5jb250ZXh0ID0gZXI7XG4gICAgICAgIHRocm93IGVycjtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBoYW5kbGVyID0gdGhpcy5fZXZlbnRzW3R5cGVdO1xuXG4gIGlmIChpc1VuZGVmaW5lZChoYW5kbGVyKSlcbiAgICByZXR1cm4gZmFsc2U7XG5cbiAgaWYgKGlzRnVuY3Rpb24oaGFuZGxlcikpIHtcbiAgICBzd2l0Y2ggKGFyZ3VtZW50cy5sZW5ndGgpIHtcbiAgICAgIC8vIGZhc3QgY2FzZXNcbiAgICAgIGNhc2UgMTpcbiAgICAgICAgaGFuZGxlci5jYWxsKHRoaXMpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMjpcbiAgICAgICAgaGFuZGxlci5jYWxsKHRoaXMsIGFyZ3VtZW50c1sxXSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAzOlxuICAgICAgICBoYW5kbGVyLmNhbGwodGhpcywgYXJndW1lbnRzWzFdLCBhcmd1bWVudHNbMl0pO1xuICAgICAgICBicmVhaztcbiAgICAgIC8vIHNsb3dlclxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7XG4gICAgICAgIGhhbmRsZXIuYXBwbHkodGhpcywgYXJncyk7XG4gICAgfVxuICB9IGVsc2UgaWYgKGlzT2JqZWN0KGhhbmRsZXIpKSB7XG4gICAgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7XG4gICAgbGlzdGVuZXJzID0gaGFuZGxlci5zbGljZSgpO1xuICAgIGxlbiA9IGxpc3RlbmVycy5sZW5ndGg7XG4gICAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKVxuICAgICAgbGlzdGVuZXJzW2ldLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICB9XG5cbiAgcmV0dXJuIHRydWU7XG59O1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmFkZExpc3RlbmVyID0gZnVuY3Rpb24odHlwZSwgbGlzdGVuZXIpIHtcbiAgdmFyIG07XG5cbiAgaWYgKCFpc0Z1bmN0aW9uKGxpc3RlbmVyKSlcbiAgICB0aHJvdyBUeXBlRXJyb3IoJ2xpc3RlbmVyIG11c3QgYmUgYSBmdW5jdGlvbicpO1xuXG4gIGlmICghdGhpcy5fZXZlbnRzKVxuICAgIHRoaXMuX2V2ZW50cyA9IHt9O1xuXG4gIC8vIFRvIGF2b2lkIHJlY3Vyc2lvbiBpbiB0aGUgY2FzZSB0aGF0IHR5cGUgPT09IFwibmV3TGlzdGVuZXJcIiEgQmVmb3JlXG4gIC8vIGFkZGluZyBpdCB0byB0aGUgbGlzdGVuZXJzLCBmaXJzdCBlbWl0IFwibmV3TGlzdGVuZXJcIi5cbiAgaWYgKHRoaXMuX2V2ZW50cy5uZXdMaXN0ZW5lcilcbiAgICB0aGlzLmVtaXQoJ25ld0xpc3RlbmVyJywgdHlwZSxcbiAgICAgICAgICAgICAgaXNGdW5jdGlvbihsaXN0ZW5lci5saXN0ZW5lcikgP1xuICAgICAgICAgICAgICBsaXN0ZW5lci5saXN0ZW5lciA6IGxpc3RlbmVyKTtcblxuICBpZiAoIXRoaXMuX2V2ZW50c1t0eXBlXSlcbiAgICAvLyBPcHRpbWl6ZSB0aGUgY2FzZSBvZiBvbmUgbGlzdGVuZXIuIERvbid0IG5lZWQgdGhlIGV4dHJhIGFycmF5IG9iamVjdC5cbiAgICB0aGlzLl9ldmVudHNbdHlwZV0gPSBsaXN0ZW5lcjtcbiAgZWxzZSBpZiAoaXNPYmplY3QodGhpcy5fZXZlbnRzW3R5cGVdKSlcbiAgICAvLyBJZiB3ZSd2ZSBhbHJlYWR5IGdvdCBhbiBhcnJheSwganVzdCBhcHBlbmQuXG4gICAgdGhpcy5fZXZlbnRzW3R5cGVdLnB1c2gobGlzdGVuZXIpO1xuICBlbHNlXG4gICAgLy8gQWRkaW5nIHRoZSBzZWNvbmQgZWxlbWVudCwgbmVlZCB0byBjaGFuZ2UgdG8gYXJyYXkuXG4gICAgdGhpcy5fZXZlbnRzW3R5cGVdID0gW3RoaXMuX2V2ZW50c1t0eXBlXSwgbGlzdGVuZXJdO1xuXG4gIC8vIENoZWNrIGZvciBsaXN0ZW5lciBsZWFrXG4gIGlmIChpc09iamVjdCh0aGlzLl9ldmVudHNbdHlwZV0pICYmICF0aGlzLl9ldmVudHNbdHlwZV0ud2FybmVkKSB7XG4gICAgaWYgKCFpc1VuZGVmaW5lZCh0aGlzLl9tYXhMaXN0ZW5lcnMpKSB7XG4gICAgICBtID0gdGhpcy5fbWF4TGlzdGVuZXJzO1xuICAgIH0gZWxzZSB7XG4gICAgICBtID0gRXZlbnRFbWl0dGVyLmRlZmF1bHRNYXhMaXN0ZW5lcnM7XG4gICAgfVxuXG4gICAgaWYgKG0gJiYgbSA+IDAgJiYgdGhpcy5fZXZlbnRzW3R5cGVdLmxlbmd0aCA+IG0pIHtcbiAgICAgIHRoaXMuX2V2ZW50c1t0eXBlXS53YXJuZWQgPSB0cnVlO1xuICAgICAgY29uc29sZS5lcnJvcignKG5vZGUpIHdhcm5pbmc6IHBvc3NpYmxlIEV2ZW50RW1pdHRlciBtZW1vcnkgJyArXG4gICAgICAgICAgICAgICAgICAgICdsZWFrIGRldGVjdGVkLiAlZCBsaXN0ZW5lcnMgYWRkZWQuICcgK1xuICAgICAgICAgICAgICAgICAgICAnVXNlIGVtaXR0ZXIuc2V0TWF4TGlzdGVuZXJzKCkgdG8gaW5jcmVhc2UgbGltaXQuJyxcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fZXZlbnRzW3R5cGVdLmxlbmd0aCk7XG4gICAgICBpZiAodHlwZW9mIGNvbnNvbGUudHJhY2UgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgLy8gbm90IHN1cHBvcnRlZCBpbiBJRSAxMFxuICAgICAgICBjb25zb2xlLnRyYWNlKCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHRoaXM7XG59O1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLm9uID0gRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5hZGRMaXN0ZW5lcjtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5vbmNlID0gZnVuY3Rpb24odHlwZSwgbGlzdGVuZXIpIHtcbiAgaWYgKCFpc0Z1bmN0aW9uKGxpc3RlbmVyKSlcbiAgICB0aHJvdyBUeXBlRXJyb3IoJ2xpc3RlbmVyIG11c3QgYmUgYSBmdW5jdGlvbicpO1xuXG4gIHZhciBmaXJlZCA9IGZhbHNlO1xuXG4gIGZ1bmN0aW9uIGcoKSB7XG4gICAgdGhpcy5yZW1vdmVMaXN0ZW5lcih0eXBlLCBnKTtcblxuICAgIGlmICghZmlyZWQpIHtcbiAgICAgIGZpcmVkID0gdHJ1ZTtcbiAgICAgIGxpc3RlbmVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfVxuICB9XG5cbiAgZy5saXN0ZW5lciA9IGxpc3RlbmVyO1xuICB0aGlzLm9uKHR5cGUsIGcpO1xuXG4gIHJldHVybiB0aGlzO1xufTtcblxuLy8gZW1pdHMgYSAncmVtb3ZlTGlzdGVuZXInIGV2ZW50IGlmZiB0aGUgbGlzdGVuZXIgd2FzIHJlbW92ZWRcbkV2ZW50RW1pdHRlci5wcm90b3R5cGUucmVtb3ZlTGlzdGVuZXIgPSBmdW5jdGlvbih0eXBlLCBsaXN0ZW5lcikge1xuICB2YXIgbGlzdCwgcG9zaXRpb24sIGxlbmd0aCwgaTtcblxuICBpZiAoIWlzRnVuY3Rpb24obGlzdGVuZXIpKVxuICAgIHRocm93IFR5cGVFcnJvcignbGlzdGVuZXIgbXVzdCBiZSBhIGZ1bmN0aW9uJyk7XG5cbiAgaWYgKCF0aGlzLl9ldmVudHMgfHwgIXRoaXMuX2V2ZW50c1t0eXBlXSlcbiAgICByZXR1cm4gdGhpcztcblxuICBsaXN0ID0gdGhpcy5fZXZlbnRzW3R5cGVdO1xuICBsZW5ndGggPSBsaXN0Lmxlbmd0aDtcbiAgcG9zaXRpb24gPSAtMTtcblxuICBpZiAobGlzdCA9PT0gbGlzdGVuZXIgfHxcbiAgICAgIChpc0Z1bmN0aW9uKGxpc3QubGlzdGVuZXIpICYmIGxpc3QubGlzdGVuZXIgPT09IGxpc3RlbmVyKSkge1xuICAgIGRlbGV0ZSB0aGlzLl9ldmVudHNbdHlwZV07XG4gICAgaWYgKHRoaXMuX2V2ZW50cy5yZW1vdmVMaXN0ZW5lcilcbiAgICAgIHRoaXMuZW1pdCgncmVtb3ZlTGlzdGVuZXInLCB0eXBlLCBsaXN0ZW5lcik7XG5cbiAgfSBlbHNlIGlmIChpc09iamVjdChsaXN0KSkge1xuICAgIGZvciAoaSA9IGxlbmd0aDsgaS0tID4gMDspIHtcbiAgICAgIGlmIChsaXN0W2ldID09PSBsaXN0ZW5lciB8fFxuICAgICAgICAgIChsaXN0W2ldLmxpc3RlbmVyICYmIGxpc3RbaV0ubGlzdGVuZXIgPT09IGxpc3RlbmVyKSkge1xuICAgICAgICBwb3NpdGlvbiA9IGk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChwb3NpdGlvbiA8IDApXG4gICAgICByZXR1cm4gdGhpcztcblxuICAgIGlmIChsaXN0Lmxlbmd0aCA9PT0gMSkge1xuICAgICAgbGlzdC5sZW5ndGggPSAwO1xuICAgICAgZGVsZXRlIHRoaXMuX2V2ZW50c1t0eXBlXTtcbiAgICB9IGVsc2Uge1xuICAgICAgbGlzdC5zcGxpY2UocG9zaXRpb24sIDEpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9ldmVudHMucmVtb3ZlTGlzdGVuZXIpXG4gICAgICB0aGlzLmVtaXQoJ3JlbW92ZUxpc3RlbmVyJywgdHlwZSwgbGlzdGVuZXIpO1xuICB9XG5cbiAgcmV0dXJuIHRoaXM7XG59O1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLnJlbW92ZUFsbExpc3RlbmVycyA9IGZ1bmN0aW9uKHR5cGUpIHtcbiAgdmFyIGtleSwgbGlzdGVuZXJzO1xuXG4gIGlmICghdGhpcy5fZXZlbnRzKVxuICAgIHJldHVybiB0aGlzO1xuXG4gIC8vIG5vdCBsaXN0ZW5pbmcgZm9yIHJlbW92ZUxpc3RlbmVyLCBubyBuZWVkIHRvIGVtaXRcbiAgaWYgKCF0aGlzLl9ldmVudHMucmVtb3ZlTGlzdGVuZXIpIHtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMClcbiAgICAgIHRoaXMuX2V2ZW50cyA9IHt9O1xuICAgIGVsc2UgaWYgKHRoaXMuX2V2ZW50c1t0eXBlXSlcbiAgICAgIGRlbGV0ZSB0aGlzLl9ldmVudHNbdHlwZV07XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvLyBlbWl0IHJlbW92ZUxpc3RlbmVyIGZvciBhbGwgbGlzdGVuZXJzIG9uIGFsbCBldmVudHNcbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApIHtcbiAgICBmb3IgKGtleSBpbiB0aGlzLl9ldmVudHMpIHtcbiAgICAgIGlmIChrZXkgPT09ICdyZW1vdmVMaXN0ZW5lcicpIGNvbnRpbnVlO1xuICAgICAgdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoa2V5KTtcbiAgICB9XG4gICAgdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoJ3JlbW92ZUxpc3RlbmVyJyk7XG4gICAgdGhpcy5fZXZlbnRzID0ge307XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBsaXN0ZW5lcnMgPSB0aGlzLl9ldmVudHNbdHlwZV07XG5cbiAgaWYgKGlzRnVuY3Rpb24obGlzdGVuZXJzKSkge1xuICAgIHRoaXMucmVtb3ZlTGlzdGVuZXIodHlwZSwgbGlzdGVuZXJzKTtcbiAgfSBlbHNlIGlmIChsaXN0ZW5lcnMpIHtcbiAgICAvLyBMSUZPIG9yZGVyXG4gICAgd2hpbGUgKGxpc3RlbmVycy5sZW5ndGgpXG4gICAgICB0aGlzLnJlbW92ZUxpc3RlbmVyKHR5cGUsIGxpc3RlbmVyc1tsaXN0ZW5lcnMubGVuZ3RoIC0gMV0pO1xuICB9XG4gIGRlbGV0ZSB0aGlzLl9ldmVudHNbdHlwZV07XG5cbiAgcmV0dXJuIHRoaXM7XG59O1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmxpc3RlbmVycyA9IGZ1bmN0aW9uKHR5cGUpIHtcbiAgdmFyIHJldDtcbiAgaWYgKCF0aGlzLl9ldmVudHMgfHwgIXRoaXMuX2V2ZW50c1t0eXBlXSlcbiAgICByZXQgPSBbXTtcbiAgZWxzZSBpZiAoaXNGdW5jdGlvbih0aGlzLl9ldmVudHNbdHlwZV0pKVxuICAgIHJldCA9IFt0aGlzLl9ldmVudHNbdHlwZV1dO1xuICBlbHNlXG4gICAgcmV0ID0gdGhpcy5fZXZlbnRzW3R5cGVdLnNsaWNlKCk7XG4gIHJldHVybiByZXQ7XG59O1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmxpc3RlbmVyQ291bnQgPSBmdW5jdGlvbih0eXBlKSB7XG4gIGlmICh0aGlzLl9ldmVudHMpIHtcbiAgICB2YXIgZXZsaXN0ZW5lciA9IHRoaXMuX2V2ZW50c1t0eXBlXTtcblxuICAgIGlmIChpc0Z1bmN0aW9uKGV2bGlzdGVuZXIpKVxuICAgICAgcmV0dXJuIDE7XG4gICAgZWxzZSBpZiAoZXZsaXN0ZW5lcilcbiAgICAgIHJldHVybiBldmxpc3RlbmVyLmxlbmd0aDtcbiAgfVxuICByZXR1cm4gMDtcbn07XG5cbkV2ZW50RW1pdHRlci5saXN0ZW5lckNvdW50ID0gZnVuY3Rpb24oZW1pdHRlciwgdHlwZSkge1xuICByZXR1cm4gZW1pdHRlci5saXN0ZW5lckNvdW50KHR5cGUpO1xufTtcblxuZnVuY3Rpb24gaXNGdW5jdGlvbihhcmcpIHtcbiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdmdW5jdGlvbic7XG59XG5cbmZ1bmN0aW9uIGlzTnVtYmVyKGFyZykge1xuICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ251bWJlcic7XG59XG5cbmZ1bmN0aW9uIGlzT2JqZWN0KGFyZykge1xuICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ29iamVjdCcgJiYgYXJnICE9PSBudWxsO1xufVxuXG5mdW5jdGlvbiBpc1VuZGVmaW5lZChhcmcpIHtcbiAgcmV0dXJuIGFyZyA9PT0gdm9pZCAwO1xufVxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gYzovamVua2lucy93b3Jrc3BhY2UvY2FtX3NieF9hbGxfbWFzdGVyX3NpZ25lZC9zYngtYWxsLXNpZ25lZC9ub2RlX21vZHVsZXMvZXZlbnRzL2V2ZW50cy5qc1xuLy8gbW9kdWxlIGlkID0gMzJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi9saWIvX3N0cmVhbV9yZWFkYWJsZS5qcycpO1xuZXhwb3J0cy5TdHJlYW0gPSBleHBvcnRzO1xuZXhwb3J0cy5SZWFkYWJsZSA9IGV4cG9ydHM7XG5leHBvcnRzLldyaXRhYmxlID0gcmVxdWlyZSgnLi9saWIvX3N0cmVhbV93cml0YWJsZS5qcycpO1xuZXhwb3J0cy5EdXBsZXggPSByZXF1aXJlKCcuL2xpYi9fc3RyZWFtX2R1cGxleC5qcycpO1xuZXhwb3J0cy5UcmFuc2Zvcm0gPSByZXF1aXJlKCcuL2xpYi9fc3RyZWFtX3RyYW5zZm9ybS5qcycpO1xuZXhwb3J0cy5QYXNzVGhyb3VnaCA9IHJlcXVpcmUoJy4vbGliL19zdHJlYW1fcGFzc3Rocm91Z2guanMnKTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGM6L2plbmtpbnMvd29ya3NwYWNlL2NhbV9zYnhfYWxsX21hc3Rlcl9zaWduZWQvc2J4LWFsbC1zaWduZWQvbm9kZV9tb2R1bGVzL3N0cmVhbS1icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9yZWFkYWJsZS1zdHJlYW0vcmVhZGFibGUtYnJvd3Nlci5qc1xuLy8gbW9kdWxlIGlkID0gMzNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLy8gQ29weXJpZ2h0IEpveWVudCwgSW5jLiBhbmQgb3RoZXIgTm9kZSBjb250cmlidXRvcnMuXG4vL1xuLy8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGFcbi8vIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGVcbi8vIFwiU29mdHdhcmVcIiksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZ1xuLy8gd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLFxuLy8gZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdFxuLy8gcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlXG4vLyBmb2xsb3dpbmcgY29uZGl0aW9uczpcbi8vXG4vLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZFxuLy8gaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4vL1xuLy8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTU1xuLy8gT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRlxuLy8gTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTlxuLy8gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sXG4vLyBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1Jcbi8vIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEVcbi8vIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG5cbi8vIEEgYml0IHNpbXBsZXIgdGhhbiByZWFkYWJsZSBzdHJlYW1zLlxuLy8gSW1wbGVtZW50IGFuIGFzeW5jIC5fd3JpdGUoY2h1bmssIGVuY29kaW5nLCBjYiksIGFuZCBpdCdsbCBoYW5kbGUgYWxsXG4vLyB0aGUgZHJhaW4gZXZlbnQgZW1pc3Npb24gYW5kIGJ1ZmZlcmluZy5cblxuJ3VzZSBzdHJpY3QnO1xuXG4vKjxyZXBsYWNlbWVudD4qL1xuXG52YXIgcHJvY2Vzc05leHRUaWNrID0gcmVxdWlyZSgncHJvY2Vzcy1uZXh0aWNrLWFyZ3MnKTtcbi8qPC9yZXBsYWNlbWVudD4qL1xuXG5tb2R1bGUuZXhwb3J0cyA9IFdyaXRhYmxlO1xuXG4vKiA8cmVwbGFjZW1lbnQ+ICovXG5mdW5jdGlvbiBXcml0ZVJlcShjaHVuaywgZW5jb2RpbmcsIGNiKSB7XG4gIHRoaXMuY2h1bmsgPSBjaHVuaztcbiAgdGhpcy5lbmNvZGluZyA9IGVuY29kaW5nO1xuICB0aGlzLmNhbGxiYWNrID0gY2I7XG4gIHRoaXMubmV4dCA9IG51bGw7XG59XG5cbi8vIEl0IHNlZW1zIGEgbGlua2VkIGxpc3QgYnV0IGl0IGlzIG5vdFxuLy8gdGhlcmUgd2lsbCBiZSBvbmx5IDIgb2YgdGhlc2UgZm9yIGVhY2ggc3RyZWFtXG5mdW5jdGlvbiBDb3JrZWRSZXF1ZXN0KHN0YXRlKSB7XG4gIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgdGhpcy5uZXh0ID0gbnVsbDtcbiAgdGhpcy5lbnRyeSA9IG51bGw7XG4gIHRoaXMuZmluaXNoID0gZnVuY3Rpb24gKCkge1xuICAgIG9uQ29ya2VkRmluaXNoKF90aGlzLCBzdGF0ZSk7XG4gIH07XG59XG4vKiA8L3JlcGxhY2VtZW50PiAqL1xuXG4vKjxyZXBsYWNlbWVudD4qL1xudmFyIGFzeW5jV3JpdGUgPSAhcHJvY2Vzcy5icm93c2VyICYmIFsndjAuMTAnLCAndjAuOS4nXS5pbmRleE9mKHByb2Nlc3MudmVyc2lvbi5zbGljZSgwLCA1KSkgPiAtMSA/IHNldEltbWVkaWF0ZSA6IHByb2Nlc3NOZXh0VGljaztcbi8qPC9yZXBsYWNlbWVudD4qL1xuXG4vKjxyZXBsYWNlbWVudD4qL1xudmFyIER1cGxleDtcbi8qPC9yZXBsYWNlbWVudD4qL1xuXG5Xcml0YWJsZS5Xcml0YWJsZVN0YXRlID0gV3JpdGFibGVTdGF0ZTtcblxuLyo8cmVwbGFjZW1lbnQ+Ki9cbnZhciB1dGlsID0gcmVxdWlyZSgnY29yZS11dGlsLWlzJyk7XG51dGlsLmluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKTtcbi8qPC9yZXBsYWNlbWVudD4qL1xuXG4vKjxyZXBsYWNlbWVudD4qL1xudmFyIGludGVybmFsVXRpbCA9IHtcbiAgZGVwcmVjYXRlOiByZXF1aXJlKCd1dGlsLWRlcHJlY2F0ZScpXG59O1xuLyo8L3JlcGxhY2VtZW50PiovXG5cbi8qPHJlcGxhY2VtZW50PiovXG52YXIgU3RyZWFtID0gcmVxdWlyZSgnLi9pbnRlcm5hbC9zdHJlYW1zL3N0cmVhbScpO1xuLyo8L3JlcGxhY2VtZW50PiovXG5cbi8qPHJlcGxhY2VtZW50PiovXG52YXIgQnVmZmVyID0gcmVxdWlyZSgnc2FmZS1idWZmZXInKS5CdWZmZXI7XG52YXIgT3VyVWludDhBcnJheSA9IGdsb2JhbC5VaW50OEFycmF5IHx8IGZ1bmN0aW9uICgpIHt9O1xuZnVuY3Rpb24gX3VpbnQ4QXJyYXlUb0J1ZmZlcihjaHVuaykge1xuICByZXR1cm4gQnVmZmVyLmZyb20oY2h1bmspO1xufVxuZnVuY3Rpb24gX2lzVWludDhBcnJheShvYmopIHtcbiAgcmV0dXJuIEJ1ZmZlci5pc0J1ZmZlcihvYmopIHx8IG9iaiBpbnN0YW5jZW9mIE91clVpbnQ4QXJyYXk7XG59XG4vKjwvcmVwbGFjZW1lbnQ+Ki9cblxudmFyIGRlc3Ryb3lJbXBsID0gcmVxdWlyZSgnLi9pbnRlcm5hbC9zdHJlYW1zL2Rlc3Ryb3knKTtcblxudXRpbC5pbmhlcml0cyhXcml0YWJsZSwgU3RyZWFtKTtcblxuZnVuY3Rpb24gbm9wKCkge31cblxuZnVuY3Rpb24gV3JpdGFibGVTdGF0ZShvcHRpb25zLCBzdHJlYW0pIHtcbiAgRHVwbGV4ID0gRHVwbGV4IHx8IHJlcXVpcmUoJy4vX3N0cmVhbV9kdXBsZXgnKTtcblxuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblxuICAvLyBvYmplY3Qgc3RyZWFtIGZsYWcgdG8gaW5kaWNhdGUgd2hldGhlciBvciBub3QgdGhpcyBzdHJlYW1cbiAgLy8gY29udGFpbnMgYnVmZmVycyBvciBvYmplY3RzLlxuICB0aGlzLm9iamVjdE1vZGUgPSAhIW9wdGlvbnMub2JqZWN0TW9kZTtcblxuICBpZiAoc3RyZWFtIGluc3RhbmNlb2YgRHVwbGV4KSB0aGlzLm9iamVjdE1vZGUgPSB0aGlzLm9iamVjdE1vZGUgfHwgISFvcHRpb25zLndyaXRhYmxlT2JqZWN0TW9kZTtcblxuICAvLyB0aGUgcG9pbnQgYXQgd2hpY2ggd3JpdGUoKSBzdGFydHMgcmV0dXJuaW5nIGZhbHNlXG4gIC8vIE5vdGU6IDAgaXMgYSB2YWxpZCB2YWx1ZSwgbWVhbnMgdGhhdCB3ZSBhbHdheXMgcmV0dXJuIGZhbHNlIGlmXG4gIC8vIHRoZSBlbnRpcmUgYnVmZmVyIGlzIG5vdCBmbHVzaGVkIGltbWVkaWF0ZWx5IG9uIHdyaXRlKClcbiAgdmFyIGh3bSA9IG9wdGlvbnMuaGlnaFdhdGVyTWFyaztcbiAgdmFyIGRlZmF1bHRId20gPSB0aGlzLm9iamVjdE1vZGUgPyAxNiA6IDE2ICogMTAyNDtcbiAgdGhpcy5oaWdoV2F0ZXJNYXJrID0gaHdtIHx8IGh3bSA9PT0gMCA/IGh3bSA6IGRlZmF1bHRId207XG5cbiAgLy8gY2FzdCB0byBpbnRzLlxuICB0aGlzLmhpZ2hXYXRlck1hcmsgPSBNYXRoLmZsb29yKHRoaXMuaGlnaFdhdGVyTWFyayk7XG5cbiAgLy8gaWYgX2ZpbmFsIGhhcyBiZWVuIGNhbGxlZFxuICB0aGlzLmZpbmFsQ2FsbGVkID0gZmFsc2U7XG5cbiAgLy8gZHJhaW4gZXZlbnQgZmxhZy5cbiAgdGhpcy5uZWVkRHJhaW4gPSBmYWxzZTtcbiAgLy8gYXQgdGhlIHN0YXJ0IG9mIGNhbGxpbmcgZW5kKClcbiAgdGhpcy5lbmRpbmcgPSBmYWxzZTtcbiAgLy8gd2hlbiBlbmQoKSBoYXMgYmVlbiBjYWxsZWQsIGFuZCByZXR1cm5lZFxuICB0aGlzLmVuZGVkID0gZmFsc2U7XG4gIC8vIHdoZW4gJ2ZpbmlzaCcgaXMgZW1pdHRlZFxuICB0aGlzLmZpbmlzaGVkID0gZmFsc2U7XG5cbiAgLy8gaGFzIGl0IGJlZW4gZGVzdHJveWVkXG4gIHRoaXMuZGVzdHJveWVkID0gZmFsc2U7XG5cbiAgLy8gc2hvdWxkIHdlIGRlY29kZSBzdHJpbmdzIGludG8gYnVmZmVycyBiZWZvcmUgcGFzc2luZyB0byBfd3JpdGU/XG4gIC8vIHRoaXMgaXMgaGVyZSBzbyB0aGF0IHNvbWUgbm9kZS1jb3JlIHN0cmVhbXMgY2FuIG9wdGltaXplIHN0cmluZ1xuICAvLyBoYW5kbGluZyBhdCBhIGxvd2VyIGxldmVsLlxuICB2YXIgbm9EZWNvZGUgPSBvcHRpb25zLmRlY29kZVN0cmluZ3MgPT09IGZhbHNlO1xuICB0aGlzLmRlY29kZVN0cmluZ3MgPSAhbm9EZWNvZGU7XG5cbiAgLy8gQ3J5cHRvIGlzIGtpbmQgb2Ygb2xkIGFuZCBjcnVzdHkuICBIaXN0b3JpY2FsbHksIGl0cyBkZWZhdWx0IHN0cmluZ1xuICAvLyBlbmNvZGluZyBpcyAnYmluYXJ5JyBzbyB3ZSBoYXZlIHRvIG1ha2UgdGhpcyBjb25maWd1cmFibGUuXG4gIC8vIEV2ZXJ5dGhpbmcgZWxzZSBpbiB0aGUgdW5pdmVyc2UgdXNlcyAndXRmOCcsIHRob3VnaC5cbiAgdGhpcy5kZWZhdWx0RW5jb2RpbmcgPSBvcHRpb25zLmRlZmF1bHRFbmNvZGluZyB8fCAndXRmOCc7XG5cbiAgLy8gbm90IGFuIGFjdHVhbCBidWZmZXIgd2Uga2VlcCB0cmFjayBvZiwgYnV0IGEgbWVhc3VyZW1lbnRcbiAgLy8gb2YgaG93IG11Y2ggd2UncmUgd2FpdGluZyB0byBnZXQgcHVzaGVkIHRvIHNvbWUgdW5kZXJseWluZ1xuICAvLyBzb2NrZXQgb3IgZmlsZS5cbiAgdGhpcy5sZW5ndGggPSAwO1xuXG4gIC8vIGEgZmxhZyB0byBzZWUgd2hlbiB3ZSdyZSBpbiB0aGUgbWlkZGxlIG9mIGEgd3JpdGUuXG4gIHRoaXMud3JpdGluZyA9IGZhbHNlO1xuXG4gIC8vIHdoZW4gdHJ1ZSBhbGwgd3JpdGVzIHdpbGwgYmUgYnVmZmVyZWQgdW50aWwgLnVuY29yaygpIGNhbGxcbiAgdGhpcy5jb3JrZWQgPSAwO1xuXG4gIC8vIGEgZmxhZyB0byBiZSBhYmxlIHRvIHRlbGwgaWYgdGhlIG9ud3JpdGUgY2IgaXMgY2FsbGVkIGltbWVkaWF0ZWx5LFxuICAvLyBvciBvbiBhIGxhdGVyIHRpY2suICBXZSBzZXQgdGhpcyB0byB0cnVlIGF0IGZpcnN0LCBiZWNhdXNlIGFueVxuICAvLyBhY3Rpb25zIHRoYXQgc2hvdWxkbid0IGhhcHBlbiB1bnRpbCBcImxhdGVyXCIgc2hvdWxkIGdlbmVyYWxseSBhbHNvXG4gIC8vIG5vdCBoYXBwZW4gYmVmb3JlIHRoZSBmaXJzdCB3cml0ZSBjYWxsLlxuICB0aGlzLnN5bmMgPSB0cnVlO1xuXG4gIC8vIGEgZmxhZyB0byBrbm93IGlmIHdlJ3JlIHByb2Nlc3NpbmcgcHJldmlvdXNseSBidWZmZXJlZCBpdGVtcywgd2hpY2hcbiAgLy8gbWF5IGNhbGwgdGhlIF93cml0ZSgpIGNhbGxiYWNrIGluIHRoZSBzYW1lIHRpY2ssIHNvIHRoYXQgd2UgZG9uJ3RcbiAgLy8gZW5kIHVwIGluIGFuIG92ZXJsYXBwZWQgb253cml0ZSBzaXR1YXRpb24uXG4gIHRoaXMuYnVmZmVyUHJvY2Vzc2luZyA9IGZhbHNlO1xuXG4gIC8vIHRoZSBjYWxsYmFjayB0aGF0J3MgcGFzc2VkIHRvIF93cml0ZShjaHVuayxjYilcbiAgdGhpcy5vbndyaXRlID0gZnVuY3Rpb24gKGVyKSB7XG4gICAgb253cml0ZShzdHJlYW0sIGVyKTtcbiAgfTtcblxuICAvLyB0aGUgY2FsbGJhY2sgdGhhdCB0aGUgdXNlciBzdXBwbGllcyB0byB3cml0ZShjaHVuayxlbmNvZGluZyxjYilcbiAgdGhpcy53cml0ZWNiID0gbnVsbDtcblxuICAvLyB0aGUgYW1vdW50IHRoYXQgaXMgYmVpbmcgd3JpdHRlbiB3aGVuIF93cml0ZSBpcyBjYWxsZWQuXG4gIHRoaXMud3JpdGVsZW4gPSAwO1xuXG4gIHRoaXMuYnVmZmVyZWRSZXF1ZXN0ID0gbnVsbDtcbiAgdGhpcy5sYXN0QnVmZmVyZWRSZXF1ZXN0ID0gbnVsbDtcblxuICAvLyBudW1iZXIgb2YgcGVuZGluZyB1c2VyLXN1cHBsaWVkIHdyaXRlIGNhbGxiYWNrc1xuICAvLyB0aGlzIG11c3QgYmUgMCBiZWZvcmUgJ2ZpbmlzaCcgY2FuIGJlIGVtaXR0ZWRcbiAgdGhpcy5wZW5kaW5nY2IgPSAwO1xuXG4gIC8vIGVtaXQgcHJlZmluaXNoIGlmIHRoZSBvbmx5IHRoaW5nIHdlJ3JlIHdhaXRpbmcgZm9yIGlzIF93cml0ZSBjYnNcbiAgLy8gVGhpcyBpcyByZWxldmFudCBmb3Igc3luY2hyb25vdXMgVHJhbnNmb3JtIHN0cmVhbXNcbiAgdGhpcy5wcmVmaW5pc2hlZCA9IGZhbHNlO1xuXG4gIC8vIFRydWUgaWYgdGhlIGVycm9yIHdhcyBhbHJlYWR5IGVtaXR0ZWQgYW5kIHNob3VsZCBub3QgYmUgdGhyb3duIGFnYWluXG4gIHRoaXMuZXJyb3JFbWl0dGVkID0gZmFsc2U7XG5cbiAgLy8gY291bnQgYnVmZmVyZWQgcmVxdWVzdHNcbiAgdGhpcy5idWZmZXJlZFJlcXVlc3RDb3VudCA9IDA7XG5cbiAgLy8gYWxsb2NhdGUgdGhlIGZpcnN0IENvcmtlZFJlcXVlc3QsIHRoZXJlIGlzIGFsd2F5c1xuICAvLyBvbmUgYWxsb2NhdGVkIGFuZCBmcmVlIHRvIHVzZSwgYW5kIHdlIG1haW50YWluIGF0IG1vc3QgdHdvXG4gIHRoaXMuY29ya2VkUmVxdWVzdHNGcmVlID0gbmV3IENvcmtlZFJlcXVlc3QodGhpcyk7XG59XG5cbldyaXRhYmxlU3RhdGUucHJvdG90eXBlLmdldEJ1ZmZlciA9IGZ1bmN0aW9uIGdldEJ1ZmZlcigpIHtcbiAgdmFyIGN1cnJlbnQgPSB0aGlzLmJ1ZmZlcmVkUmVxdWVzdDtcbiAgdmFyIG91dCA9IFtdO1xuICB3aGlsZSAoY3VycmVudCkge1xuICAgIG91dC5wdXNoKGN1cnJlbnQpO1xuICAgIGN1cnJlbnQgPSBjdXJyZW50Lm5leHQ7XG4gIH1cbiAgcmV0dXJuIG91dDtcbn07XG5cbihmdW5jdGlvbiAoKSB7XG4gIHRyeSB7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFdyaXRhYmxlU3RhdGUucHJvdG90eXBlLCAnYnVmZmVyJywge1xuICAgICAgZ2V0OiBpbnRlcm5hbFV0aWwuZGVwcmVjYXRlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QnVmZmVyKCk7XG4gICAgICB9LCAnX3dyaXRhYmxlU3RhdGUuYnVmZmVyIGlzIGRlcHJlY2F0ZWQuIFVzZSBfd3JpdGFibGVTdGF0ZS5nZXRCdWZmZXIgJyArICdpbnN0ZWFkLicsICdERVAwMDAzJylcbiAgICB9KTtcbiAgfSBjYXRjaCAoXykge31cbn0pKCk7XG5cbi8vIFRlc3QgX3dyaXRhYmxlU3RhdGUgZm9yIGluaGVyaXRhbmNlIHRvIGFjY291bnQgZm9yIER1cGxleCBzdHJlYW1zLFxuLy8gd2hvc2UgcHJvdG90eXBlIGNoYWluIG9ubHkgcG9pbnRzIHRvIFJlYWRhYmxlLlxudmFyIHJlYWxIYXNJbnN0YW5jZTtcbmlmICh0eXBlb2YgU3ltYm9sID09PSAnZnVuY3Rpb24nICYmIFN5bWJvbC5oYXNJbnN0YW5jZSAmJiB0eXBlb2YgRnVuY3Rpb24ucHJvdG90eXBlW1N5bWJvbC5oYXNJbnN0YW5jZV0gPT09ICdmdW5jdGlvbicpIHtcbiAgcmVhbEhhc0luc3RhbmNlID0gRnVuY3Rpb24ucHJvdG90eXBlW1N5bWJvbC5oYXNJbnN0YW5jZV07XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShXcml0YWJsZSwgU3ltYm9sLmhhc0luc3RhbmNlLCB7XG4gICAgdmFsdWU6IGZ1bmN0aW9uIChvYmplY3QpIHtcbiAgICAgIGlmIChyZWFsSGFzSW5zdGFuY2UuY2FsbCh0aGlzLCBvYmplY3QpKSByZXR1cm4gdHJ1ZTtcblxuICAgICAgcmV0dXJuIG9iamVjdCAmJiBvYmplY3QuX3dyaXRhYmxlU3RhdGUgaW5zdGFuY2VvZiBXcml0YWJsZVN0YXRlO1xuICAgIH1cbiAgfSk7XG59IGVsc2Uge1xuICByZWFsSGFzSW5zdGFuY2UgPSBmdW5jdGlvbiAob2JqZWN0KSB7XG4gICAgcmV0dXJuIG9iamVjdCBpbnN0YW5jZW9mIHRoaXM7XG4gIH07XG59XG5cbmZ1bmN0aW9uIFdyaXRhYmxlKG9wdGlvbnMpIHtcbiAgRHVwbGV4ID0gRHVwbGV4IHx8IHJlcXVpcmUoJy4vX3N0cmVhbV9kdXBsZXgnKTtcblxuICAvLyBXcml0YWJsZSBjdG9yIGlzIGFwcGxpZWQgdG8gRHVwbGV4ZXMsIHRvby5cbiAgLy8gYHJlYWxIYXNJbnN0YW5jZWAgaXMgbmVjZXNzYXJ5IGJlY2F1c2UgdXNpbmcgcGxhaW4gYGluc3RhbmNlb2ZgXG4gIC8vIHdvdWxkIHJldHVybiBmYWxzZSwgYXMgbm8gYF93cml0YWJsZVN0YXRlYCBwcm9wZXJ0eSBpcyBhdHRhY2hlZC5cblxuICAvLyBUcnlpbmcgdG8gdXNlIHRoZSBjdXN0b20gYGluc3RhbmNlb2ZgIGZvciBXcml0YWJsZSBoZXJlIHdpbGwgYWxzbyBicmVhayB0aGVcbiAgLy8gTm9kZS5qcyBMYXp5VHJhbnNmb3JtIGltcGxlbWVudGF0aW9uLCB3aGljaCBoYXMgYSBub24tdHJpdmlhbCBnZXR0ZXIgZm9yXG4gIC8vIGBfd3JpdGFibGVTdGF0ZWAgdGhhdCB3b3VsZCBsZWFkIHRvIGluZmluaXRlIHJlY3Vyc2lvbi5cbiAgaWYgKCFyZWFsSGFzSW5zdGFuY2UuY2FsbChXcml0YWJsZSwgdGhpcykgJiYgISh0aGlzIGluc3RhbmNlb2YgRHVwbGV4KSkge1xuICAgIHJldHVybiBuZXcgV3JpdGFibGUob3B0aW9ucyk7XG4gIH1cblxuICB0aGlzLl93cml0YWJsZVN0YXRlID0gbmV3IFdyaXRhYmxlU3RhdGUob3B0aW9ucywgdGhpcyk7XG5cbiAgLy8gbGVnYWN5LlxuICB0aGlzLndyaXRhYmxlID0gdHJ1ZTtcblxuICBpZiAob3B0aW9ucykge1xuICAgIGlmICh0eXBlb2Ygb3B0aW9ucy53cml0ZSA9PT0gJ2Z1bmN0aW9uJykgdGhpcy5fd3JpdGUgPSBvcHRpb25zLndyaXRlO1xuXG4gICAgaWYgKHR5cGVvZiBvcHRpb25zLndyaXRldiA9PT0gJ2Z1bmN0aW9uJykgdGhpcy5fd3JpdGV2ID0gb3B0aW9ucy53cml0ZXY7XG5cbiAgICBpZiAodHlwZW9mIG9wdGlvbnMuZGVzdHJveSA9PT0gJ2Z1bmN0aW9uJykgdGhpcy5fZGVzdHJveSA9IG9wdGlvbnMuZGVzdHJveTtcblxuICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5maW5hbCA9PT0gJ2Z1bmN0aW9uJykgdGhpcy5fZmluYWwgPSBvcHRpb25zLmZpbmFsO1xuICB9XG5cbiAgU3RyZWFtLmNhbGwodGhpcyk7XG59XG5cbi8vIE90aGVyd2lzZSBwZW9wbGUgY2FuIHBpcGUgV3JpdGFibGUgc3RyZWFtcywgd2hpY2ggaXMganVzdCB3cm9uZy5cbldyaXRhYmxlLnByb3RvdHlwZS5waXBlID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLmVtaXQoJ2Vycm9yJywgbmV3IEVycm9yKCdDYW5ub3QgcGlwZSwgbm90IHJlYWRhYmxlJykpO1xufTtcblxuZnVuY3Rpb24gd3JpdGVBZnRlckVuZChzdHJlYW0sIGNiKSB7XG4gIHZhciBlciA9IG5ldyBFcnJvcignd3JpdGUgYWZ0ZXIgZW5kJyk7XG4gIC8vIFRPRE86IGRlZmVyIGVycm9yIGV2ZW50cyBjb25zaXN0ZW50bHkgZXZlcnl3aGVyZSwgbm90IGp1c3QgdGhlIGNiXG4gIHN0cmVhbS5lbWl0KCdlcnJvcicsIGVyKTtcbiAgcHJvY2Vzc05leHRUaWNrKGNiLCBlcik7XG59XG5cbi8vIENoZWNrcyB0aGF0IGEgdXNlci1zdXBwbGllZCBjaHVuayBpcyB2YWxpZCwgZXNwZWNpYWxseSBmb3IgdGhlIHBhcnRpY3VsYXJcbi8vIG1vZGUgdGhlIHN0cmVhbSBpcyBpbi4gQ3VycmVudGx5IHRoaXMgbWVhbnMgdGhhdCBgbnVsbGAgaXMgbmV2ZXIgYWNjZXB0ZWRcbi8vIGFuZCB1bmRlZmluZWQvbm9uLXN0cmluZyB2YWx1ZXMgYXJlIG9ubHkgYWxsb3dlZCBpbiBvYmplY3QgbW9kZS5cbmZ1bmN0aW9uIHZhbGlkQ2h1bmsoc3RyZWFtLCBzdGF0ZSwgY2h1bmssIGNiKSB7XG4gIHZhciB2YWxpZCA9IHRydWU7XG4gIHZhciBlciA9IGZhbHNlO1xuXG4gIGlmIChjaHVuayA9PT0gbnVsbCkge1xuICAgIGVyID0gbmV3IFR5cGVFcnJvcignTWF5IG5vdCB3cml0ZSBudWxsIHZhbHVlcyB0byBzdHJlYW0nKTtcbiAgfSBlbHNlIGlmICh0eXBlb2YgY2h1bmsgIT09ICdzdHJpbmcnICYmIGNodW5rICE9PSB1bmRlZmluZWQgJiYgIXN0YXRlLm9iamVjdE1vZGUpIHtcbiAgICBlciA9IG5ldyBUeXBlRXJyb3IoJ0ludmFsaWQgbm9uLXN0cmluZy9idWZmZXIgY2h1bmsnKTtcbiAgfVxuICBpZiAoZXIpIHtcbiAgICBzdHJlYW0uZW1pdCgnZXJyb3InLCBlcik7XG4gICAgcHJvY2Vzc05leHRUaWNrKGNiLCBlcik7XG4gICAgdmFsaWQgPSBmYWxzZTtcbiAgfVxuICByZXR1cm4gdmFsaWQ7XG59XG5cbldyaXRhYmxlLnByb3RvdHlwZS53cml0ZSA9IGZ1bmN0aW9uIChjaHVuaywgZW5jb2RpbmcsIGNiKSB7XG4gIHZhciBzdGF0ZSA9IHRoaXMuX3dyaXRhYmxlU3RhdGU7XG4gIHZhciByZXQgPSBmYWxzZTtcbiAgdmFyIGlzQnVmID0gX2lzVWludDhBcnJheShjaHVuaykgJiYgIXN0YXRlLm9iamVjdE1vZGU7XG5cbiAgaWYgKGlzQnVmICYmICFCdWZmZXIuaXNCdWZmZXIoY2h1bmspKSB7XG4gICAgY2h1bmsgPSBfdWludDhBcnJheVRvQnVmZmVyKGNodW5rKTtcbiAgfVxuXG4gIGlmICh0eXBlb2YgZW5jb2RpbmcgPT09ICdmdW5jdGlvbicpIHtcbiAgICBjYiA9IGVuY29kaW5nO1xuICAgIGVuY29kaW5nID0gbnVsbDtcbiAgfVxuXG4gIGlmIChpc0J1ZikgZW5jb2RpbmcgPSAnYnVmZmVyJztlbHNlIGlmICghZW5jb2RpbmcpIGVuY29kaW5nID0gc3RhdGUuZGVmYXVsdEVuY29kaW5nO1xuXG4gIGlmICh0eXBlb2YgY2IgIT09ICdmdW5jdGlvbicpIGNiID0gbm9wO1xuXG4gIGlmIChzdGF0ZS5lbmRlZCkgd3JpdGVBZnRlckVuZCh0aGlzLCBjYik7ZWxzZSBpZiAoaXNCdWYgfHwgdmFsaWRDaHVuayh0aGlzLCBzdGF0ZSwgY2h1bmssIGNiKSkge1xuICAgIHN0YXRlLnBlbmRpbmdjYisrO1xuICAgIHJldCA9IHdyaXRlT3JCdWZmZXIodGhpcywgc3RhdGUsIGlzQnVmLCBjaHVuaywgZW5jb2RpbmcsIGNiKTtcbiAgfVxuXG4gIHJldHVybiByZXQ7XG59O1xuXG5Xcml0YWJsZS5wcm90b3R5cGUuY29yayA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIHN0YXRlID0gdGhpcy5fd3JpdGFibGVTdGF0ZTtcblxuICBzdGF0ZS5jb3JrZWQrKztcbn07XG5cbldyaXRhYmxlLnByb3RvdHlwZS51bmNvcmsgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBzdGF0ZSA9IHRoaXMuX3dyaXRhYmxlU3RhdGU7XG5cbiAgaWYgKHN0YXRlLmNvcmtlZCkge1xuICAgIHN0YXRlLmNvcmtlZC0tO1xuXG4gICAgaWYgKCFzdGF0ZS53cml0aW5nICYmICFzdGF0ZS5jb3JrZWQgJiYgIXN0YXRlLmZpbmlzaGVkICYmICFzdGF0ZS5idWZmZXJQcm9jZXNzaW5nICYmIHN0YXRlLmJ1ZmZlcmVkUmVxdWVzdCkgY2xlYXJCdWZmZXIodGhpcywgc3RhdGUpO1xuICB9XG59O1xuXG5Xcml0YWJsZS5wcm90b3R5cGUuc2V0RGVmYXVsdEVuY29kaW5nID0gZnVuY3Rpb24gc2V0RGVmYXVsdEVuY29kaW5nKGVuY29kaW5nKSB7XG4gIC8vIG5vZGU6OlBhcnNlRW5jb2RpbmcoKSByZXF1aXJlcyBsb3dlciBjYXNlLlxuICBpZiAodHlwZW9mIGVuY29kaW5nID09PSAnc3RyaW5nJykgZW5jb2RpbmcgPSBlbmNvZGluZy50b0xvd2VyQ2FzZSgpO1xuICBpZiAoIShbJ2hleCcsICd1dGY4JywgJ3V0Zi04JywgJ2FzY2lpJywgJ2JpbmFyeScsICdiYXNlNjQnLCAndWNzMicsICd1Y3MtMicsICd1dGYxNmxlJywgJ3V0Zi0xNmxlJywgJ3JhdyddLmluZGV4T2YoKGVuY29kaW5nICsgJycpLnRvTG93ZXJDYXNlKCkpID4gLTEpKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdVbmtub3duIGVuY29kaW5nOiAnICsgZW5jb2RpbmcpO1xuICB0aGlzLl93cml0YWJsZVN0YXRlLmRlZmF1bHRFbmNvZGluZyA9IGVuY29kaW5nO1xuICByZXR1cm4gdGhpcztcbn07XG5cbmZ1bmN0aW9uIGRlY29kZUNodW5rKHN0YXRlLCBjaHVuaywgZW5jb2RpbmcpIHtcbiAgaWYgKCFzdGF0ZS5vYmplY3RNb2RlICYmIHN0YXRlLmRlY29kZVN0cmluZ3MgIT09IGZhbHNlICYmIHR5cGVvZiBjaHVuayA9PT0gJ3N0cmluZycpIHtcbiAgICBjaHVuayA9IEJ1ZmZlci5mcm9tKGNodW5rLCBlbmNvZGluZyk7XG4gIH1cbiAgcmV0dXJuIGNodW5rO1xufVxuXG4vLyBpZiB3ZSdyZSBhbHJlYWR5IHdyaXRpbmcgc29tZXRoaW5nLCB0aGVuIGp1c3QgcHV0IHRoaXNcbi8vIGluIHRoZSBxdWV1ZSwgYW5kIHdhaXQgb3VyIHR1cm4uICBPdGhlcndpc2UsIGNhbGwgX3dyaXRlXG4vLyBJZiB3ZSByZXR1cm4gZmFsc2UsIHRoZW4gd2UgbmVlZCBhIGRyYWluIGV2ZW50LCBzbyBzZXQgdGhhdCBmbGFnLlxuZnVuY3Rpb24gd3JpdGVPckJ1ZmZlcihzdHJlYW0sIHN0YXRlLCBpc0J1ZiwgY2h1bmssIGVuY29kaW5nLCBjYikge1xuICBpZiAoIWlzQnVmKSB7XG4gICAgdmFyIG5ld0NodW5rID0gZGVjb2RlQ2h1bmsoc3RhdGUsIGNodW5rLCBlbmNvZGluZyk7XG4gICAgaWYgKGNodW5rICE9PSBuZXdDaHVuaykge1xuICAgICAgaXNCdWYgPSB0cnVlO1xuICAgICAgZW5jb2RpbmcgPSAnYnVmZmVyJztcbiAgICAgIGNodW5rID0gbmV3Q2h1bms7XG4gICAgfVxuICB9XG4gIHZhciBsZW4gPSBzdGF0ZS5vYmplY3RNb2RlID8gMSA6IGNodW5rLmxlbmd0aDtcblxuICBzdGF0ZS5sZW5ndGggKz0gbGVuO1xuXG4gIHZhciByZXQgPSBzdGF0ZS5sZW5ndGggPCBzdGF0ZS5oaWdoV2F0ZXJNYXJrO1xuICAvLyB3ZSBtdXN0IGVuc3VyZSB0aGF0IHByZXZpb3VzIG5lZWREcmFpbiB3aWxsIG5vdCBiZSByZXNldCB0byBmYWxzZS5cbiAgaWYgKCFyZXQpIHN0YXRlLm5lZWREcmFpbiA9IHRydWU7XG5cbiAgaWYgKHN0YXRlLndyaXRpbmcgfHwgc3RhdGUuY29ya2VkKSB7XG4gICAgdmFyIGxhc3QgPSBzdGF0ZS5sYXN0QnVmZmVyZWRSZXF1ZXN0O1xuICAgIHN0YXRlLmxhc3RCdWZmZXJlZFJlcXVlc3QgPSB7XG4gICAgICBjaHVuazogY2h1bmssXG4gICAgICBlbmNvZGluZzogZW5jb2RpbmcsXG4gICAgICBpc0J1ZjogaXNCdWYsXG4gICAgICBjYWxsYmFjazogY2IsXG4gICAgICBuZXh0OiBudWxsXG4gICAgfTtcbiAgICBpZiAobGFzdCkge1xuICAgICAgbGFzdC5uZXh0ID0gc3RhdGUubGFzdEJ1ZmZlcmVkUmVxdWVzdDtcbiAgICB9IGVsc2Uge1xuICAgICAgc3RhdGUuYnVmZmVyZWRSZXF1ZXN0ID0gc3RhdGUubGFzdEJ1ZmZlcmVkUmVxdWVzdDtcbiAgICB9XG4gICAgc3RhdGUuYnVmZmVyZWRSZXF1ZXN0Q291bnQgKz0gMTtcbiAgfSBlbHNlIHtcbiAgICBkb1dyaXRlKHN0cmVhbSwgc3RhdGUsIGZhbHNlLCBsZW4sIGNodW5rLCBlbmNvZGluZywgY2IpO1xuICB9XG5cbiAgcmV0dXJuIHJldDtcbn1cblxuZnVuY3Rpb24gZG9Xcml0ZShzdHJlYW0sIHN0YXRlLCB3cml0ZXYsIGxlbiwgY2h1bmssIGVuY29kaW5nLCBjYikge1xuICBzdGF0ZS53cml0ZWxlbiA9IGxlbjtcbiAgc3RhdGUud3JpdGVjYiA9IGNiO1xuICBzdGF0ZS53cml0aW5nID0gdHJ1ZTtcbiAgc3RhdGUuc3luYyA9IHRydWU7XG4gIGlmICh3cml0ZXYpIHN0cmVhbS5fd3JpdGV2KGNodW5rLCBzdGF0ZS5vbndyaXRlKTtlbHNlIHN0cmVhbS5fd3JpdGUoY2h1bmssIGVuY29kaW5nLCBzdGF0ZS5vbndyaXRlKTtcbiAgc3RhdGUuc3luYyA9IGZhbHNlO1xufVxuXG5mdW5jdGlvbiBvbndyaXRlRXJyb3Ioc3RyZWFtLCBzdGF0ZSwgc3luYywgZXIsIGNiKSB7XG4gIC0tc3RhdGUucGVuZGluZ2NiO1xuXG4gIGlmIChzeW5jKSB7XG4gICAgLy8gZGVmZXIgdGhlIGNhbGxiYWNrIGlmIHdlIGFyZSBiZWluZyBjYWxsZWQgc3luY2hyb25vdXNseVxuICAgIC8vIHRvIGF2b2lkIHBpbGluZyB1cCB0aGluZ3Mgb24gdGhlIHN0YWNrXG4gICAgcHJvY2Vzc05leHRUaWNrKGNiLCBlcik7XG4gICAgLy8gdGhpcyBjYW4gZW1pdCBmaW5pc2gsIGFuZCBpdCB3aWxsIGFsd2F5cyBoYXBwZW5cbiAgICAvLyBhZnRlciBlcnJvclxuICAgIHByb2Nlc3NOZXh0VGljayhmaW5pc2hNYXliZSwgc3RyZWFtLCBzdGF0ZSk7XG4gICAgc3RyZWFtLl93cml0YWJsZVN0YXRlLmVycm9yRW1pdHRlZCA9IHRydWU7XG4gICAgc3RyZWFtLmVtaXQoJ2Vycm9yJywgZXIpO1xuICB9IGVsc2Uge1xuICAgIC8vIHRoZSBjYWxsZXIgZXhwZWN0IHRoaXMgdG8gaGFwcGVuIGJlZm9yZSBpZlxuICAgIC8vIGl0IGlzIGFzeW5jXG4gICAgY2IoZXIpO1xuICAgIHN0cmVhbS5fd3JpdGFibGVTdGF0ZS5lcnJvckVtaXR0ZWQgPSB0cnVlO1xuICAgIHN0cmVhbS5lbWl0KCdlcnJvcicsIGVyKTtcbiAgICAvLyB0aGlzIGNhbiBlbWl0IGZpbmlzaCwgYnV0IGZpbmlzaCBtdXN0XG4gICAgLy8gYWx3YXlzIGZvbGxvdyBlcnJvclxuICAgIGZpbmlzaE1heWJlKHN0cmVhbSwgc3RhdGUpO1xuICB9XG59XG5cbmZ1bmN0aW9uIG9ud3JpdGVTdGF0ZVVwZGF0ZShzdGF0ZSkge1xuICBzdGF0ZS53cml0aW5nID0gZmFsc2U7XG4gIHN0YXRlLndyaXRlY2IgPSBudWxsO1xuICBzdGF0ZS5sZW5ndGggLT0gc3RhdGUud3JpdGVsZW47XG4gIHN0YXRlLndyaXRlbGVuID0gMDtcbn1cblxuZnVuY3Rpb24gb253cml0ZShzdHJlYW0sIGVyKSB7XG4gIHZhciBzdGF0ZSA9IHN0cmVhbS5fd3JpdGFibGVTdGF0ZTtcbiAgdmFyIHN5bmMgPSBzdGF0ZS5zeW5jO1xuICB2YXIgY2IgPSBzdGF0ZS53cml0ZWNiO1xuXG4gIG9ud3JpdGVTdGF0ZVVwZGF0ZShzdGF0ZSk7XG5cbiAgaWYgKGVyKSBvbndyaXRlRXJyb3Ioc3RyZWFtLCBzdGF0ZSwgc3luYywgZXIsIGNiKTtlbHNlIHtcbiAgICAvLyBDaGVjayBpZiB3ZSdyZSBhY3R1YWxseSByZWFkeSB0byBmaW5pc2gsIGJ1dCBkb24ndCBlbWl0IHlldFxuICAgIHZhciBmaW5pc2hlZCA9IG5lZWRGaW5pc2goc3RhdGUpO1xuXG4gICAgaWYgKCFmaW5pc2hlZCAmJiAhc3RhdGUuY29ya2VkICYmICFzdGF0ZS5idWZmZXJQcm9jZXNzaW5nICYmIHN0YXRlLmJ1ZmZlcmVkUmVxdWVzdCkge1xuICAgICAgY2xlYXJCdWZmZXIoc3RyZWFtLCBzdGF0ZSk7XG4gICAgfVxuXG4gICAgaWYgKHN5bmMpIHtcbiAgICAgIC8qPHJlcGxhY2VtZW50PiovXG4gICAgICBhc3luY1dyaXRlKGFmdGVyV3JpdGUsIHN0cmVhbSwgc3RhdGUsIGZpbmlzaGVkLCBjYik7XG4gICAgICAvKjwvcmVwbGFjZW1lbnQ+Ki9cbiAgICB9IGVsc2Uge1xuICAgICAgYWZ0ZXJXcml0ZShzdHJlYW0sIHN0YXRlLCBmaW5pc2hlZCwgY2IpO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBhZnRlcldyaXRlKHN0cmVhbSwgc3RhdGUsIGZpbmlzaGVkLCBjYikge1xuICBpZiAoIWZpbmlzaGVkKSBvbndyaXRlRHJhaW4oc3RyZWFtLCBzdGF0ZSk7XG4gIHN0YXRlLnBlbmRpbmdjYi0tO1xuICBjYigpO1xuICBmaW5pc2hNYXliZShzdHJlYW0sIHN0YXRlKTtcbn1cblxuLy8gTXVzdCBmb3JjZSBjYWxsYmFjayB0byBiZSBjYWxsZWQgb24gbmV4dFRpY2ssIHNvIHRoYXQgd2UgZG9uJ3Rcbi8vIGVtaXQgJ2RyYWluJyBiZWZvcmUgdGhlIHdyaXRlKCkgY29uc3VtZXIgZ2V0cyB0aGUgJ2ZhbHNlJyByZXR1cm5cbi8vIHZhbHVlLCBhbmQgaGFzIGEgY2hhbmNlIHRvIGF0dGFjaCBhICdkcmFpbicgbGlzdGVuZXIuXG5mdW5jdGlvbiBvbndyaXRlRHJhaW4oc3RyZWFtLCBzdGF0ZSkge1xuICBpZiAoc3RhdGUubGVuZ3RoID09PSAwICYmIHN0YXRlLm5lZWREcmFpbikge1xuICAgIHN0YXRlLm5lZWREcmFpbiA9IGZhbHNlO1xuICAgIHN0cmVhbS5lbWl0KCdkcmFpbicpO1xuICB9XG59XG5cbi8vIGlmIHRoZXJlJ3Mgc29tZXRoaW5nIGluIHRoZSBidWZmZXIgd2FpdGluZywgdGhlbiBwcm9jZXNzIGl0XG5mdW5jdGlvbiBjbGVhckJ1ZmZlcihzdHJlYW0sIHN0YXRlKSB7XG4gIHN0YXRlLmJ1ZmZlclByb2Nlc3NpbmcgPSB0cnVlO1xuICB2YXIgZW50cnkgPSBzdGF0ZS5idWZmZXJlZFJlcXVlc3Q7XG5cbiAgaWYgKHN0cmVhbS5fd3JpdGV2ICYmIGVudHJ5ICYmIGVudHJ5Lm5leHQpIHtcbiAgICAvLyBGYXN0IGNhc2UsIHdyaXRlIGV2ZXJ5dGhpbmcgdXNpbmcgX3dyaXRldigpXG4gICAgdmFyIGwgPSBzdGF0ZS5idWZmZXJlZFJlcXVlc3RDb3VudDtcbiAgICB2YXIgYnVmZmVyID0gbmV3IEFycmF5KGwpO1xuICAgIHZhciBob2xkZXIgPSBzdGF0ZS5jb3JrZWRSZXF1ZXN0c0ZyZWU7XG4gICAgaG9sZGVyLmVudHJ5ID0gZW50cnk7XG5cbiAgICB2YXIgY291bnQgPSAwO1xuICAgIHZhciBhbGxCdWZmZXJzID0gdHJ1ZTtcbiAgICB3aGlsZSAoZW50cnkpIHtcbiAgICAgIGJ1ZmZlcltjb3VudF0gPSBlbnRyeTtcbiAgICAgIGlmICghZW50cnkuaXNCdWYpIGFsbEJ1ZmZlcnMgPSBmYWxzZTtcbiAgICAgIGVudHJ5ID0gZW50cnkubmV4dDtcbiAgICAgIGNvdW50ICs9IDE7XG4gICAgfVxuICAgIGJ1ZmZlci5hbGxCdWZmZXJzID0gYWxsQnVmZmVycztcblxuICAgIGRvV3JpdGUoc3RyZWFtLCBzdGF0ZSwgdHJ1ZSwgc3RhdGUubGVuZ3RoLCBidWZmZXIsICcnLCBob2xkZXIuZmluaXNoKTtcblxuICAgIC8vIGRvV3JpdGUgaXMgYWxtb3N0IGFsd2F5cyBhc3luYywgZGVmZXIgdGhlc2UgdG8gc2F2ZSBhIGJpdCBvZiB0aW1lXG4gICAgLy8gYXMgdGhlIGhvdCBwYXRoIGVuZHMgd2l0aCBkb1dyaXRlXG4gICAgc3RhdGUucGVuZGluZ2NiKys7XG4gICAgc3RhdGUubGFzdEJ1ZmZlcmVkUmVxdWVzdCA9IG51bGw7XG4gICAgaWYgKGhvbGRlci5uZXh0KSB7XG4gICAgICBzdGF0ZS5jb3JrZWRSZXF1ZXN0c0ZyZWUgPSBob2xkZXIubmV4dDtcbiAgICAgIGhvbGRlci5uZXh0ID0gbnVsbDtcbiAgICB9IGVsc2Uge1xuICAgICAgc3RhdGUuY29ya2VkUmVxdWVzdHNGcmVlID0gbmV3IENvcmtlZFJlcXVlc3Qoc3RhdGUpO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICAvLyBTbG93IGNhc2UsIHdyaXRlIGNodW5rcyBvbmUtYnktb25lXG4gICAgd2hpbGUgKGVudHJ5KSB7XG4gICAgICB2YXIgY2h1bmsgPSBlbnRyeS5jaHVuaztcbiAgICAgIHZhciBlbmNvZGluZyA9IGVudHJ5LmVuY29kaW5nO1xuICAgICAgdmFyIGNiID0gZW50cnkuY2FsbGJhY2s7XG4gICAgICB2YXIgbGVuID0gc3RhdGUub2JqZWN0TW9kZSA/IDEgOiBjaHVuay5sZW5ndGg7XG5cbiAgICAgIGRvV3JpdGUoc3RyZWFtLCBzdGF0ZSwgZmFsc2UsIGxlbiwgY2h1bmssIGVuY29kaW5nLCBjYik7XG4gICAgICBlbnRyeSA9IGVudHJ5Lm5leHQ7XG4gICAgICAvLyBpZiB3ZSBkaWRuJ3QgY2FsbCB0aGUgb253cml0ZSBpbW1lZGlhdGVseSwgdGhlblxuICAgICAgLy8gaXQgbWVhbnMgdGhhdCB3ZSBuZWVkIHRvIHdhaXQgdW50aWwgaXQgZG9lcy5cbiAgICAgIC8vIGFsc28sIHRoYXQgbWVhbnMgdGhhdCB0aGUgY2h1bmsgYW5kIGNiIGFyZSBjdXJyZW50bHlcbiAgICAgIC8vIGJlaW5nIHByb2Nlc3NlZCwgc28gbW92ZSB0aGUgYnVmZmVyIGNvdW50ZXIgcGFzdCB0aGVtLlxuICAgICAgaWYgKHN0YXRlLndyaXRpbmcpIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGVudHJ5ID09PSBudWxsKSBzdGF0ZS5sYXN0QnVmZmVyZWRSZXF1ZXN0ID0gbnVsbDtcbiAgfVxuXG4gIHN0YXRlLmJ1ZmZlcmVkUmVxdWVzdENvdW50ID0gMDtcbiAgc3RhdGUuYnVmZmVyZWRSZXF1ZXN0ID0gZW50cnk7XG4gIHN0YXRlLmJ1ZmZlclByb2Nlc3NpbmcgPSBmYWxzZTtcbn1cblxuV3JpdGFibGUucHJvdG90eXBlLl93cml0ZSA9IGZ1bmN0aW9uIChjaHVuaywgZW5jb2RpbmcsIGNiKSB7XG4gIGNiKG5ldyBFcnJvcignX3dyaXRlKCkgaXMgbm90IGltcGxlbWVudGVkJykpO1xufTtcblxuV3JpdGFibGUucHJvdG90eXBlLl93cml0ZXYgPSBudWxsO1xuXG5Xcml0YWJsZS5wcm90b3R5cGUuZW5kID0gZnVuY3Rpb24gKGNodW5rLCBlbmNvZGluZywgY2IpIHtcbiAgdmFyIHN0YXRlID0gdGhpcy5fd3JpdGFibGVTdGF0ZTtcblxuICBpZiAodHlwZW9mIGNodW5rID09PSAnZnVuY3Rpb24nKSB7XG4gICAgY2IgPSBjaHVuaztcbiAgICBjaHVuayA9IG51bGw7XG4gICAgZW5jb2RpbmcgPSBudWxsO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBlbmNvZGluZyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIGNiID0gZW5jb2Rpbmc7XG4gICAgZW5jb2RpbmcgPSBudWxsO1xuICB9XG5cbiAgaWYgKGNodW5rICE9PSBudWxsICYmIGNodW5rICE9PSB1bmRlZmluZWQpIHRoaXMud3JpdGUoY2h1bmssIGVuY29kaW5nKTtcblxuICAvLyAuZW5kKCkgZnVsbHkgdW5jb3Jrc1xuICBpZiAoc3RhdGUuY29ya2VkKSB7XG4gICAgc3RhdGUuY29ya2VkID0gMTtcbiAgICB0aGlzLnVuY29yaygpO1xuICB9XG5cbiAgLy8gaWdub3JlIHVubmVjZXNzYXJ5IGVuZCgpIGNhbGxzLlxuICBpZiAoIXN0YXRlLmVuZGluZyAmJiAhc3RhdGUuZmluaXNoZWQpIGVuZFdyaXRhYmxlKHRoaXMsIHN0YXRlLCBjYik7XG59O1xuXG5mdW5jdGlvbiBuZWVkRmluaXNoKHN0YXRlKSB7XG4gIHJldHVybiBzdGF0ZS5lbmRpbmcgJiYgc3RhdGUubGVuZ3RoID09PSAwICYmIHN0YXRlLmJ1ZmZlcmVkUmVxdWVzdCA9PT0gbnVsbCAmJiAhc3RhdGUuZmluaXNoZWQgJiYgIXN0YXRlLndyaXRpbmc7XG59XG5mdW5jdGlvbiBjYWxsRmluYWwoc3RyZWFtLCBzdGF0ZSkge1xuICBzdHJlYW0uX2ZpbmFsKGZ1bmN0aW9uIChlcnIpIHtcbiAgICBzdGF0ZS5wZW5kaW5nY2ItLTtcbiAgICBpZiAoZXJyKSB7XG4gICAgICBzdHJlYW0uZW1pdCgnZXJyb3InLCBlcnIpO1xuICAgIH1cbiAgICBzdGF0ZS5wcmVmaW5pc2hlZCA9IHRydWU7XG4gICAgc3RyZWFtLmVtaXQoJ3ByZWZpbmlzaCcpO1xuICAgIGZpbmlzaE1heWJlKHN0cmVhbSwgc3RhdGUpO1xuICB9KTtcbn1cbmZ1bmN0aW9uIHByZWZpbmlzaChzdHJlYW0sIHN0YXRlKSB7XG4gIGlmICghc3RhdGUucHJlZmluaXNoZWQgJiYgIXN0YXRlLmZpbmFsQ2FsbGVkKSB7XG4gICAgaWYgKHR5cGVvZiBzdHJlYW0uX2ZpbmFsID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBzdGF0ZS5wZW5kaW5nY2IrKztcbiAgICAgIHN0YXRlLmZpbmFsQ2FsbGVkID0gdHJ1ZTtcbiAgICAgIHByb2Nlc3NOZXh0VGljayhjYWxsRmluYWwsIHN0cmVhbSwgc3RhdGUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdGF0ZS5wcmVmaW5pc2hlZCA9IHRydWU7XG4gICAgICBzdHJlYW0uZW1pdCgncHJlZmluaXNoJyk7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGZpbmlzaE1heWJlKHN0cmVhbSwgc3RhdGUpIHtcbiAgdmFyIG5lZWQgPSBuZWVkRmluaXNoKHN0YXRlKTtcbiAgaWYgKG5lZWQpIHtcbiAgICBwcmVmaW5pc2goc3RyZWFtLCBzdGF0ZSk7XG4gICAgaWYgKHN0YXRlLnBlbmRpbmdjYiA9PT0gMCkge1xuICAgICAgc3RhdGUuZmluaXNoZWQgPSB0cnVlO1xuICAgICAgc3RyZWFtLmVtaXQoJ2ZpbmlzaCcpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gbmVlZDtcbn1cblxuZnVuY3Rpb24gZW5kV3JpdGFibGUoc3RyZWFtLCBzdGF0ZSwgY2IpIHtcbiAgc3RhdGUuZW5kaW5nID0gdHJ1ZTtcbiAgZmluaXNoTWF5YmUoc3RyZWFtLCBzdGF0ZSk7XG4gIGlmIChjYikge1xuICAgIGlmIChzdGF0ZS5maW5pc2hlZCkgcHJvY2Vzc05leHRUaWNrKGNiKTtlbHNlIHN0cmVhbS5vbmNlKCdmaW5pc2gnLCBjYik7XG4gIH1cbiAgc3RhdGUuZW5kZWQgPSB0cnVlO1xuICBzdHJlYW0ud3JpdGFibGUgPSBmYWxzZTtcbn1cblxuZnVuY3Rpb24gb25Db3JrZWRGaW5pc2goY29ya1JlcSwgc3RhdGUsIGVycikge1xuICB2YXIgZW50cnkgPSBjb3JrUmVxLmVudHJ5O1xuICBjb3JrUmVxLmVudHJ5ID0gbnVsbDtcbiAgd2hpbGUgKGVudHJ5KSB7XG4gICAgdmFyIGNiID0gZW50cnkuY2FsbGJhY2s7XG4gICAgc3RhdGUucGVuZGluZ2NiLS07XG4gICAgY2IoZXJyKTtcbiAgICBlbnRyeSA9IGVudHJ5Lm5leHQ7XG4gIH1cbiAgaWYgKHN0YXRlLmNvcmtlZFJlcXVlc3RzRnJlZSkge1xuICAgIHN0YXRlLmNvcmtlZFJlcXVlc3RzRnJlZS5uZXh0ID0gY29ya1JlcTtcbiAgfSBlbHNlIHtcbiAgICBzdGF0ZS5jb3JrZWRSZXF1ZXN0c0ZyZWUgPSBjb3JrUmVxO1xuICB9XG59XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShXcml0YWJsZS5wcm90b3R5cGUsICdkZXN0cm95ZWQnLCB7XG4gIGdldDogZnVuY3Rpb24gKCkge1xuICAgIGlmICh0aGlzLl93cml0YWJsZVN0YXRlID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX3dyaXRhYmxlU3RhdGUuZGVzdHJveWVkO1xuICB9LFxuICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgIC8vIHdlIGlnbm9yZSB0aGUgdmFsdWUgaWYgdGhlIHN0cmVhbVxuICAgIC8vIGhhcyBub3QgYmVlbiBpbml0aWFsaXplZCB5ZXRcbiAgICBpZiAoIXRoaXMuX3dyaXRhYmxlU3RhdGUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBiYWNrd2FyZCBjb21wYXRpYmlsaXR5LCB0aGUgdXNlciBpcyBleHBsaWNpdGx5XG4gICAgLy8gbWFuYWdpbmcgZGVzdHJveWVkXG4gICAgdGhpcy5fd3JpdGFibGVTdGF0ZS5kZXN0cm95ZWQgPSB2YWx1ZTtcbiAgfVxufSk7XG5cbldyaXRhYmxlLnByb3RvdHlwZS5kZXN0cm95ID0gZGVzdHJveUltcGwuZGVzdHJveTtcbldyaXRhYmxlLnByb3RvdHlwZS5fdW5kZXN0cm95ID0gZGVzdHJveUltcGwudW5kZXN0cm95O1xuV3JpdGFibGUucHJvdG90eXBlLl9kZXN0cm95ID0gZnVuY3Rpb24gKGVyciwgY2IpIHtcbiAgdGhpcy5lbmQoKTtcbiAgY2IoZXJyKTtcbn07XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gYzovamVua2lucy93b3Jrc3BhY2UvY2FtX3NieF9hbGxfbWFzdGVyX3NpZ25lZC9zYngtYWxsLXNpZ25lZC9ub2RlX21vZHVsZXMvc3RyZWFtLWJyb3dzZXJpZnkvbm9kZV9tb2R1bGVzL3JlYWRhYmxlLXN0cmVhbS9saWIvX3N0cmVhbV93cml0YWJsZS5qc1xuLy8gbW9kdWxlIGlkID0gMzRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLy8gQ29weXJpZ2h0IChjKSAyMDE4IEJyb21pdW0sIEluYy5cclxuLy8gVXNlIG9mIHRoZSBCcm9taXVtLCBJbmMuIHNvZnR3YXJlIHJlcXVpcmVzIGEgbGljZW5zZSBhZ3JlZW1lbnQgd2l0aCBCcm9taXVtLCBJbmMuIG9yIGFuIGF1dGhvcml6ZWQgcmVzZWxsZXIuXHJcblxyXG5pbXBvcnQgeyBOb25lLCBTb21lLCBNYXliZSwgbm9uZSwgc29tZSB9IGZyb20gXCIuL21heWJlXCI7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZmlyc3Q8VD4oZWxlbWVudHM6IEl0ZXJhYmxlPFQ+KTogTWF5YmU8VD4ge1xyXG4gICAgZm9yIChjb25zdCBlbGVtZW50IG9mIGVsZW1lbnRzKSB7XHJcbiAgICAgICAgcmV0dXJuIGVsZW1lbnQ7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gbGFzdDxUPihlbGVtZW50czogSXRlcmFibGU8VD4pOiBNYXliZTxUPiB7XHJcbiAgICBsZXQgbGFzdEVsZW1lbnQ6IE1heWJlPFQ+ID0gdW5kZWZpbmVkO1xyXG4gICAgZm9yIChjb25zdCBlbGVtZW50IG9mIGVsZW1lbnRzKSB7XHJcbiAgICAgICAgbGFzdEVsZW1lbnQgPSBlbGVtZW50O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGxhc3RFbGVtZW50O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY291bnQ8VD4oZWxlbWVudHM6IEl0ZXJhYmxlPFQ+KTogbnVtYmVyIHtcclxuICAgIGxldCBjb3VudCA9IDA7XHJcbiAgICBmb3IgKGNvbnN0IGVsZW1lbnQgb2YgZWxlbWVudHMpIHtcclxuICAgICAgICBjb3VudCArPSAxO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGNvdW50O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gdG9BcnJheTxUPihlbGVtZW50czogSXRlcmFibGU8VD4pOiBUW10ge1xyXG4gICAgbGV0IGFycmF5ID0gW107XHJcbiAgICBmb3IgKGNvbnN0IGVsZW1lbnQgb2YgZWxlbWVudHMpIHtcclxuICAgICAgICBhcnJheS5wdXNoKGVsZW1lbnQpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGFycmF5O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24qIGZpbHRlcjxUPihlbGVtZW50czogSXRlcmFibGU8VD4sIHByZWRpY2F0ZTogKGVsZW1lbnQ6IFQpID0+IGJvb2xlYW4pOiBJdGVyYWJsZTxUPiB7XHJcbiAgICBmb3IgKGNvbnN0IGVsZW1lbnQgb2YgZWxlbWVudHMpIHtcclxuICAgICAgICBpZiAocHJlZGljYXRlKGVsZW1lbnQpKSB7XHJcbiAgICAgICAgICAgIHlpZWxkIGVsZW1lbnQ7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24qIG1hcDxULCBVPihlbGVtZW50czogSXRlcmFibGU8VD4sIHRyYW5zZm9ybTogKGVsZW1lbnQ6IFQpID0+IFUpOiBJdGVyYWJsZTxVPiB7XHJcbiAgICBmb3IgKGNvbnN0IGVsZW1lbnQgb2YgZWxlbWVudHMpIHtcclxuICAgICAgICB5aWVsZCB0cmFuc2Zvcm0oZWxlbWVudCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBpc0VtcHR5PFQ+KGVsZW1lbnRzOiBJdGVyYWJsZTxUPik6IGJvb2xlYW4ge1xyXG4gICAgZm9yIChjb25zdCBlbGVtZW50IG9mIGVsZW1lbnRzKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRydWU7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBoYXM8VD4oZWxlbWVudHM6IEl0ZXJhYmxlPFQ+LCBwcmVkaWNhdGU6IChlbGVtZW50OiBUKSA9PiBib29sZWFuKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gIWlzRW1wdHkoZmlsdGVyKGVsZW1lbnRzLCBwcmVkaWNhdGUpKTtcclxufVxyXG5cclxudHlwZSBDb21wYXJhdG9yPFQ+ID0gKGE6IFQsIGI6IFQpID0+IGJvb2xlYW47XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaXNFcXVhbDxUPihhOiBULCBiOiBUKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gYSA9PT0gYjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNvbnRhaW5zPFQ+KGVsZW1lbnRzOiBJdGVyYWJsZTxUPiwgdmFsdWU6IFQsIGNvbXBhcmU6IENvbXBhcmF0b3I8VD4gPSBpc0VxdWFsKSA6IGJvb2xlYW4ge1xyXG4gICAgZm9yIChjb25zdCBlbGVtZW50IG9mIGVsZW1lbnRzKSB7XHJcbiAgICAgICAgaWYgKGNvbXBhcmUoZWxlbWVudCwgdmFsdWUpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBmYWxzZTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uKiBpbnRlcnNlY3Q8VD4oYXM6IEl0ZXJhYmxlPFQ+LCBiczogSXRlcmFibGU8VD4sIGNvbXBhcmU6IENvbXBhcmF0b3I8VD4gPSBpc0VxdWFsKTogSXRlcmFibGU8VD4ge1xyXG4gICAgZm9yIChjb25zdCBhIG9mIGFzKSB7XHJcbiAgICAgICAgaWYgKGNvbnRhaW5zKGJzLCBhLCBjb21wYXJlKSkge1xyXG4gICAgICAgICAgICB5aWVsZCBhO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uKiBzZXREaWZmZXJlbmNlPFQ+KGFzOiBJdGVyYWJsZTxUPiwgYnM6IEl0ZXJhYmxlPFQ+LCBjb21wYXJlOiBDb21wYXJhdG9yPFQ+ID0gaXNFcXVhbCk6IEl0ZXJhYmxlPFQ+IHtcclxuICAgIGZvciAoY29uc3QgYSBvZiBhcykge1xyXG4gICAgICAgIGlmICghY29udGFpbnMoYnMsIGEsIGNvbXBhcmUpKSB7XHJcbiAgICAgICAgICAgIHlpZWxkIGE7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gbWF4PFQ+KGVsZW1lbnRzOiBJdGVyYWJsZTxUPiwgY2hvb3NlOiAoYTogVCwgYjogVCkgPT4gVCk6IE1heWJlPFQ+IHtcclxuICAgIGxldCBjaG9zZW46IE1heWJlPFQ+ID0gdW5kZWZpbmVkO1xyXG4gICAgZm9yIChjb25zdCBlbGVtZW50IG9mIGVsZW1lbnRzKSB7XHJcbiAgICAgICAgaWYgKHNvbWUoY2hvc2VuKSkge1xyXG4gICAgICAgICAgICBjaG9zZW4gPSBjaG9vc2UoY2hvc2VuLCBlbGVtZW50KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjaG9zZW4gPSBlbGVtZW50O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBjaG9zZW5cclxufVxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuLi9saWIvY29tbW9uL2l0ZXItdXRpbHMudHMiLCIvLyBDb3B5cmlnaHQgKGMpIDIwMTggQnJvbWl1bSwgSW5jLlxyXG4vLyBVc2Ugb2YgdGhlIEJyb21pdW0sIEluYy4gc29mdHdhcmUgcmVxdWlyZXMgYSBsaWNlbnNlIGFncmVlbWVudCB3aXRoIEJyb21pdW0sIEluYy4gb3IgYW4gYXV0aG9yaXplZCByZXNlbGxlci5cclxuXHJcbmltcG9ydCB7IFVSTCB9IGZyb20gXCIuL3VybC11dGlsc1wiO1xyXG5pbXBvcnQgeyBIYXNoIH0gZnJvbSBcIi4vaGFzaFwiO1xyXG5pbXBvcnQgeyBtdXJtdXJIYXNoIH0gZnJvbSBcIi4vbXVybXVyLWhhc2hcIjtcclxuaW1wb3J0IHsgT3JpZ2luLCBoYXNoT3JpZ2luLCBpc1NhbWVPcmlnaW4sIHBhcnNlT3JpZ2luLCBPcmlnaW5IYXNoT3B0aW9ucyB9IGZyb20gXCIuL29yaWdpblwiO1xyXG5pbXBvcnQgeyBNYXliZSwgc29tZSwgbm9uZSB9IGZyb20gXCIuL21heWJlXCI7XHJcbmltcG9ydCB7IEhhc2hhYmxlIH0gZnJvbSBcIi4vaGFzaC1tYXBcIjtcclxuaW1wb3J0IHsgSWQgfSBmcm9tIFwiLi9pZC1nZW5lcmF0b3JcIjtcclxuaW1wb3J0IHsgbG9nRXJyb3IgfSBmcm9tIFwiLi9sb2dcIjtcclxuaW1wb3J0IHsgdG9TdHJpbmcsIGlzU3RyaW5nLCBjb21wYXJlU3RyaW5ncyB9IGZyb20gXCIuL3N0cmluZy11dGlsc1wiO1xyXG5pbXBvcnQge1xyXG4gICAgU2VyaWFsaXplZE5hdmlnYXRpb24sXHJcbiAgICBTZXJpYWxpemVkTmF2TWV0YWRhdGEsXHJcbiAgICBTZXJpYWxpemVkTmF2U2VxRGF0YSxcclxuICAgIFNlcmlhbGl6ZWRQaGlzaGluZ05hdlNlcURhdGFcclxufSBmcm9tIFwiLi9tZXNzYWdlc1wiO1xyXG5pbXBvcnQgeyBpc0VtcHR5LCBmaXJzdCwgcmVzdCwgaXNBcnJheSB9IGZyb20gXCIuL2FycmF5LXV0aWxzXCI7XHJcbmltcG9ydCB7IGlzTnVtYmVyIH0gZnJvbSBcIi4vbnVtYmVyLXV0aWxzXCI7XHJcbmltcG9ydCB7IHVudXNlZCB9IGZyb20gXCIuL3VudXNlZFwiO1xyXG5pbXBvcnQgeyBDb250ZW50VHlwZSwgcGFyc2VDb250ZW50VHlwZSB9IGZyb20gXCIuL2NvbnRlbnQtdHlwZVwiO1xyXG5cclxuZXhwb3J0IHR5cGUgVmVyc2lvbiA9IG51bWJlcjtcclxuXHJcbmV4cG9ydCBlbnVtIE5hdlR5cGUge1xyXG4gICAgbm9UeXBlID0gMHgwLFxyXG4gICAgbmF2aWdhdGlvbiA9IDB4MSxcclxuICAgIHJlZGlyZWN0ID0gMHgyLFxyXG4gICAgcGFyZW50VGFiID0gMHg0LFxyXG4gICAgY29udGVudFR5cGUgPSAweDgsXHJcbiAgICBuYXZPclJlZGlyZWN0ID0gbmF2aWdhdGlvbiB8IHJlZGlyZWN0XHJcbn1cclxuXHJcbmV4cG9ydCBlbnVtIFVybENhdGVnb3J5IHtcclxuICAgIHVuY2F0ZWdvcml6ZWRVcmwgPSAweDEsXHJcbiAgICB0cnVzdGVkVXJsID0gMHgyLFxyXG4gICAgdW50cnVzdGVkVXJsID0gMHg0LFxyXG4gICAgcGhpc2hpbmdTb3VyY2VTaXRlVXJsID0gMHg4LFxyXG4gICAgd2ViTWFpbFNpdGVVcmwgPSAweDEwLFxyXG4gICAgYXV0aFNpdGVVcmwgPSAweDIwLFxyXG4gICAgc2l0ZVJlcXVpcmVzQXV0aFVybCA9IDB4NDAsXHJcbiAgICBleHRlcm5hbEFwcExpbmsgPSAweDgwLFxyXG4gICAgYW55VXJsID0gdW5jYXRlZ29yaXplZFVybCB8IHRydXN0ZWRVcmwgfCB1bnRydXN0ZWRVcmwgfCBwaGlzaGluZ1NvdXJjZVNpdGVVcmwgfCB3ZWJNYWlsU2l0ZVVybCB8IGF1dGhTaXRlVXJsIHwgc2l0ZVJlcXVpcmVzQXV0aFVybCB8IGV4dGVybmFsQXBwTGlua1xyXG59XHJcblxyXG5mdW5jdGlvbiBub3RVcmxDYXRlZ29yeShjYXRlZ29yeTogVXJsQ2F0ZWdvcnkpOiBVcmxDYXRlZ29yeSB7XHJcbiAgICByZXR1cm4gKH5jYXRlZ29yeSkgJiBVcmxDYXRlZ29yeS5hbnlVcmw7XHJcbn1cclxuXHJcbmZ1bmN0aW9uKiBvclVybENhdGVnb3JpZXMobWFzazogVXJsQ2F0ZWdvcnkpOiBJdGVyYWJsZUl0ZXJhdG9yPFVybENhdGVnb3J5PiB7XHJcbiAgICBjb25zdCBjYXRlZ29yaWVzID0gW1xyXG4gICAgICAgIFVybENhdGVnb3J5LnVuY2F0ZWdvcml6ZWRVcmwsXHJcbiAgICAgICAgVXJsQ2F0ZWdvcnkudHJ1c3RlZFVybCxcclxuICAgICAgICBVcmxDYXRlZ29yeS51bnRydXN0ZWRVcmwsXHJcbiAgICAgICAgVXJsQ2F0ZWdvcnkucGhpc2hpbmdTb3VyY2VTaXRlVXJsLFxyXG4gICAgICAgIFVybENhdGVnb3J5LndlYk1haWxTaXRlVXJsXHJcbiAgICBdO1xyXG4gICAgZm9yIChjb25zdCBjYXRlZ29yeSBvZiBjYXRlZ29yaWVzKSB7XHJcbiAgICAgICAgaWYgKChtYXNrICYgY2F0ZWdvcnkpICE9PSAweDApIHtcclxuICAgICAgICAgICAgeWllbGQgY2F0ZWdvcnk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZW51bSBOYXZNb2RpZmVyIHtcclxuICAgIG5vTW9kaWZpZXIgPSAweDAsXHJcbiAgICByZXBlYXRlZCA9IDB4MSxcclxuICAgIG5vdCA9IDB4MixcclxuICAgIG9yID0gMHg0XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjYXRlZ29yaXplVXJsKGlzVHJ1c3RlZFVybDogYm9vbGVhbiwgXHJcbiAgICAgICAgaXNVbnRydXN0ZWRVcmw6IGJvb2xlYW4sIFxyXG4gICAgICAgIGlzUGhpc2hpbmdTb3VyY2VTaXRlOiBib29sZWFuLFxyXG4gICAgICAgIGlzV2ViTWFpbFNpdGU6IGJvb2xlYW4sXHJcbiAgICAgICAgaXNFeHRlcm5hbEFwcExpbms6IGJvb2xlYW4pOiBVcmxDYXRlZ29yeSB7XHJcbiAgICBpZiAoaXNQaGlzaGluZ1NvdXJjZVNpdGUpIHtcclxuICAgICAgICByZXR1cm4gVXJsQ2F0ZWdvcnkucGhpc2hpbmdTb3VyY2VTaXRlVXJsO1xyXG4gICAgfSBlbHNlIGlmIChpc1dlYk1haWxTaXRlKSB7XHJcbiAgICAgICAgcmV0dXJuIFVybENhdGVnb3J5LndlYk1haWxTaXRlVXJsO1xyXG4gICAgfSBlbHNlIGlmIChpc0V4dGVybmFsQXBwTGluaykge1xyXG4gICAgICAgIHJldHVybiBVcmxDYXRlZ29yeS5leHRlcm5hbEFwcExpbms7XHJcbiAgICB9IGVsc2UgaWYgKGlzVHJ1c3RlZFVybCkge1xyXG4gICAgICAgIHJldHVybiBVcmxDYXRlZ29yeS50cnVzdGVkVXJsO1xyXG4gICAgfSBlbHNlIGlmIChpc1VudHJ1c3RlZFVybCkge1xyXG4gICAgICAgIHJldHVybiBVcmxDYXRlZ29yeS51bnRydXN0ZWRVcmw7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBVcmxDYXRlZ29yeS51bmNhdGVnb3JpemVkVXJsO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgTmF2UGF0dGVybiB7XHJcbiAgICBjb25zdHJ1Y3RvcihyZWFkb25seSBtb2RpZmllcnM6IE5hdk1vZGlmZXIsIHJlYWRvbmx5IHR5cGU6IE5hdlR5cGUsIHJlYWRvbmx5IGlkOiBJZCkge1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGhhc01vZGlmaWVyKG1vZGlmaWVyOiBOYXZNb2RpZmVyKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuICh0aGlzLm1vZGlmaWVycyAmIG1vZGlmaWVyKSAhPT0gTmF2TW9kaWZlci5ub01vZGlmaWVyO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBoYXNSZXBlYXRlZE1vZGlmaWVyKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmhhc01vZGlmaWVyKE5hdk1vZGlmZXIucmVwZWF0ZWQpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBoYXNOb3RNb2RpZmVyKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmhhc01vZGlmaWVyKE5hdk1vZGlmZXIubm90KTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgaGFzT3JNb2RpZmllcigpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5oYXNNb2RpZmllcihOYXZNb2RpZmVyLm9yKTtcclxuICAgIH1cclxuXHJcbiAgICAqYnVpbGROYXZpZ2F0aW9ucygpOiBJdGVyYWJsZUl0ZXJhdG9yPE5hdmlnYXRpb24+IHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGFzQmFja1JlZmVyZW5jZSgpOiBNYXliZTxCYWNrUmVmTmF2UGF0dGVybj4ge1xyXG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGFzQ29udGVudFR5cGUoKTogTWF5YmU8Q29udGVudFR5cGVOYXZQYXR0ZXJuPiB7XHJcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgIH1cclxuXHJcbiAgICAqbmF2VHlwZXMoKTogSXRlcmFibGVJdGVyYXRvcjxOYXZUeXBlPiB7XHJcbiAgICAgICAgY29uc3QgbmF2VHlwZXMgPSBbXHJcbiAgICAgICAgICAgIE5hdlR5cGUubmF2aWdhdGlvbixcclxuICAgICAgICAgICAgTmF2VHlwZS5yZWRpcmVjdCxcclxuICAgICAgICAgICAgTmF2VHlwZS5wYXJlbnRUYWJcclxuICAgICAgICBdO1xyXG4gICAgICAgIGNvbnN0IG1hc2sgPSB0aGlzLnR5cGU7XHJcbiAgICAgICAgZm9yIChjb25zdCBuYXZUeXBlIG9mIG5hdlR5cGVzKSB7XHJcbiAgICAgICAgICAgIGlmICgobWFzayAmIG5hdlR5cGUpICE9PSAweDApIHtcclxuICAgICAgICAgICAgICAgIHlpZWxkIG5hdlR5cGU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCB0eXBlIE5hdlBhdHRlcm5TZXF1ZW5jZSA9IE5hdlBhdHRlcm5bXTtcclxuXHJcbmV4cG9ydCBjbGFzcyBPcmlnaW5OYXZQYXR0ZXJuIGV4dGVuZHMgTmF2UGF0dGVybiB7XHJcbiAgICBjb25zdHJ1Y3Rvcihtb2RpZmllcnM6IE5hdk1vZGlmZXIsIHR5cGU6IE5hdlR5cGUsIHJlYWRvbmx5IG9yaWdpbjogT3JpZ2luLCBpZDogSWQpIHtcclxuICAgICAgICBzdXBlcihtb2RpZmllcnMsIHR5cGUsIGlkKTtcclxuICAgIH1cclxuXHJcbiAgICAqYnVpbGROYXZpZ2F0aW9ucygpOiBJdGVyYWJsZUl0ZXJhdG9yPE5hdmlnYXRpb24+IHtcclxuICAgICAgICBmb3IgKGNvbnN0IG5hdlR5cGUgb2YgdGhpcy5uYXZUeXBlcygpKSB7XHJcbiAgICAgICAgICAgIHlpZWxkIG5ldyBPcmlnaW5OYXYobmF2VHlwZSwgdGhpcy5vcmlnaW4pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIENhdGVnb3JpemVkTmF2UGF0dGVybiBleHRlbmRzIE5hdlBhdHRlcm4ge1xyXG4gICAgY29uc3RydWN0b3IobW9kaWZpZXJzOiBOYXZNb2RpZmVyLCB0eXBlOiBOYXZUeXBlLCByZWFkb25seSBjYXRlZ29yeTogVXJsQ2F0ZWdvcnksIGlkOiBJZCkge1xyXG4gICAgICAgIHN1cGVyKG1vZGlmaWVycywgdHlwZSwgaWQpO1xyXG4gICAgfVxyXG5cclxuICAgICpidWlsZE5hdmlnYXRpb25zKCk6IEl0ZXJhYmxlSXRlcmF0b3I8TmF2aWdhdGlvbj4ge1xyXG4gICAgICAgIGZvciAoY29uc3QgbmF2VHlwZSBvZiB0aGlzLm5hdlR5cGVzKCkpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuaGFzTm90TW9kaWZlcikge1xyXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBjYXRlZ29yeSBvZiBvclVybENhdGVnb3JpZXMobm90VXJsQ2F0ZWdvcnkodGhpcy5jYXRlZ29yeSkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgeWllbGQgbmV3IENhdGVnb3JpemVkTmF2KG5hdlR5cGUsIGNhdGVnb3J5KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmhhc09yTW9kaWZpZXIpIHtcclxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgY2F0ZWdvcnkgb2Ygb3JVcmxDYXRlZ29yaWVzKHRoaXMuY2F0ZWdvcnkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgeWllbGQgbmV3IENhdGVnb3JpemVkTmF2KG5hdlR5cGUsIGNhdGVnb3J5KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmNhdGVnb3J5ID09PSBVcmxDYXRlZ29yeS5hbnlVcmwpIHtcclxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgY2F0ZWdvcnkgb2Ygb3JVcmxDYXRlZ29yaWVzKHRoaXMuY2F0ZWdvcnkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgeWllbGQgbmV3IENhdGVnb3JpemVkTmF2KG5hdlR5cGUsIGNhdGVnb3J5KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHlpZWxkIG5ldyBDYXRlZ29yaXplZE5hdihuYXZUeXBlLCB0aGlzLmNhdGVnb3J5KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IHR5cGUgR3JvdXBOYW1lID0gc3RyaW5nO1xyXG5cclxuZXhwb3J0IGNsYXNzIEdyb3VwTmF2UGF0dGVybiBleHRlbmRzIE5hdlBhdHRlcm4ge1xyXG4gICAgY29uc3RydWN0b3IobW9kaWZpZXJzOiBOYXZNb2RpZmVyLCB0eXBlOiBOYXZUeXBlLCByZWFkb25seSBncm91cE5hbWU6IEdyb3VwTmFtZSwgaWQ6IElkKSB7XHJcbiAgICAgICAgc3VwZXIobW9kaWZpZXJzLCB0eXBlLCBpZCk7XHJcbiAgICB9XHJcblxyXG4gICAgKmJ1aWxkTmF2aWdhdGlvbnMoKTogSXRlcmFibGVJdGVyYXRvcjxOYXZpZ2F0aW9uPiB7XHJcbiAgICAgICAgZm9yIChjb25zdCBuYXZUeXBlIG9mIHRoaXMubmF2VHlwZXMoKSkge1xyXG4gICAgICAgICAgICB5aWVsZCBuZXcgR3JvdXBOYXYobmF2VHlwZSwgdGhpcy5ncm91cE5hbWUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEJhY2tSZWZOYXZQYXR0ZXJuIGV4dGVuZHMgTmF2UGF0dGVybiB7XHJcbiAgICBjb25zdHJ1Y3RvcihyZWFkb25seSBtb2RpZmllcnM6IE5hdk1vZGlmZXIsIHJlYWRvbmx5IHR5cGU6IE5hdlR5cGUsIHJlYWRvbmx5IGJhY2tSZWY6IEJhY2tSZWYsIGlkOiBJZCkge1xyXG4gICAgICAgIHN1cGVyKG1vZGlmaWVycywgdHlwZSwgaWQpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBhc0JhY2tSZWZlcmVuY2UoKTogTWF5YmU8QmFja1JlZk5hdlBhdHRlcm4+IHtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIENvbnRlbnRUeXBlTmF2UGF0dGVybiBleHRlbmRzIE5hdlBhdHRlcm4ge1xyXG4gICAgY29uc3RydWN0b3IocmVhZG9ubHkgY29udGVudFR5cGU6IENvbnRlbnRUeXBlLCBpZDogSWQpIHsgXHJcbiAgICAgICAgc3VwZXIoTmF2TW9kaWZlci5ub01vZGlmaWVyLCBOYXZUeXBlLm5vVHlwZSwgaWQpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBhc0NvbnRlbnRUeXBlKCk6IE1heWJlPENvbnRlbnRUeXBlTmF2UGF0dGVybj4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElOYXZpZ2F0aW9uIHtcclxuICAgIHJlYWRvbmx5IHR5cGU6IE5hdlR5cGU7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBPcmlnaW5OYXYgaW1wbGVtZW50cyBIYXNoYWJsZTxPcmlnaW5OYXY+LCBJTmF2aWdhdGlvbiB7XHJcbiAgICBjb25zdHJ1Y3RvcihyZWFkb25seSB0eXBlOiBOYXZUeXBlLCByZWFkb25seSBvcmlnaW46IE9yaWdpbikgeyB9XHJcblxyXG4gICAgaGFzaFdpdGhTZWVkKHNlZWQ6IEhhc2gpOiBIYXNoIHtcclxuICAgICAgICBsZXQgaGFzaCA9IHNlZWQ7XHJcbiAgICAgICAgaGFzaCA9IG11cm11ckhhc2godGhpcy50eXBlLCBoYXNoKTtcclxuICAgICAgICBoYXNoID0gaGFzaE9yaWdpbih0aGlzLm9yaWdpbiwgbmV3IE9yaWdpbkhhc2hPcHRpb25zKHsgc2VlZDogaGFzaCB9KSk7XHJcbiAgICAgICAgcmV0dXJuIGhhc2g7XHJcbiAgICB9XHJcblxyXG4gICAgaGFzaCgpOiBIYXNoIHtcclxuICAgICAgICBjb25zdCBzZWVkID0gMDtcclxuICAgICAgICByZXR1cm4gdGhpcy5oYXNoV2l0aFNlZWQoc2VlZCk7XHJcbiAgICB9XHJcblxyXG4gICAgY29tcGFyZShvdGhlcjogT3JpZ2luTmF2KTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuICh0aGlzLnR5cGUgPT09IG90aGVyLnR5cGUpICYmIGlzU2FtZU9yaWdpbih0aGlzLm9yaWdpbiwgb3RoZXIub3JpZ2luKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIENhdGVnb3JpemVkTmF2IGltcGxlbWVudHMgSGFzaGFibGU8Q2F0ZWdvcml6ZWROYXY+LCBJTmF2aWdhdGlvbiB7XHJcbiAgICBjb25zdHJ1Y3RvcihyZWFkb25seSB0eXBlOiBOYXZUeXBlLCByZWFkb25seSBjYXRlZ29yeTogVXJsQ2F0ZWdvcnkpIHsgfVxyXG5cclxuICAgIGhhc2hXaXRoU2VlZChzZWVkOiBIYXNoKTogSGFzaCB7XHJcbiAgICAgICAgbGV0IGhhc2ggPSBzZWVkO1xyXG4gICAgICAgIGhhc2ggPSBtdXJtdXJIYXNoKHRoaXMudHlwZSwgaGFzaCk7XHJcbiAgICAgICAgaGFzaCA9IG11cm11ckhhc2godGhpcy5jYXRlZ29yeSwgaGFzaCk7XHJcbiAgICAgICAgcmV0dXJuIGhhc2g7XHJcbiAgICB9XHJcblxyXG4gICAgaGFzaCgpOiBIYXNoIHtcclxuICAgICAgICBjb25zdCBzZWVkID0gMDtcclxuICAgICAgICByZXR1cm4gdGhpcy5oYXNoV2l0aFNlZWQoc2VlZCk7XHJcbiAgICB9XHJcblxyXG4gICAgY29tcGFyZShvdGhlcjogQ2F0ZWdvcml6ZWROYXYpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gKHRoaXMudHlwZSA9PT0gb3RoZXIudHlwZSkgJiYgKHRoaXMuY2F0ZWdvcnkgPT09IG90aGVyLmNhdGVnb3J5KTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEdyb3VwTmF2IGltcGxlbWVudHMgSGFzaGFibGU8R3JvdXBOYXY+LCBJTmF2aWdhdGlvbiB7XHJcbiAgICBjb25zdHJ1Y3RvcihyZWFkb25seSB0eXBlOiBOYXZUeXBlLCByZWFkb25seSBncm91cE5hbWU6IEdyb3VwTmFtZSkgeyB9XHJcblxyXG4gICAgaGFzaFdpdGhTZWVkKHNlZWQ6IEhhc2gpOiBIYXNoIHtcclxuICAgICAgICBsZXQgaGFzaCA9IHNlZWQ7XHJcbiAgICAgICAgaGFzaCA9IG11cm11ckhhc2godGhpcy50eXBlLCBoYXNoKTtcclxuICAgICAgICBoYXNoID0gbXVybXVySGFzaCh0aGlzLmdyb3VwTmFtZSwgaGFzaCk7XHJcbiAgICAgICAgcmV0dXJuIGhhc2g7XHJcbiAgICB9XHJcblxyXG4gICAgaGFzaCgpOiBudW1iZXIge1xyXG4gICAgICAgIGNvbnN0IHNlZWQgPSAwO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmhhc2hXaXRoU2VlZChzZWVkKTtcclxuICAgIH1cclxuXHJcbiAgICBjb21wYXJlKG90aGVyOiBHcm91cE5hdik6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiAodGhpcy50eXBlID09PSBvdGhlci50eXBlKSAmJiBcclxuICAgICAgICAgICAgICAgIGNvbXBhcmVTdHJpbmdzKHRoaXMuZ3JvdXBOYW1lLCBvdGhlci5ncm91cE5hbWUpO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gbWFrZU9yaWdpbk5hdih0eXBlOiBOYXZUeXBlLCB1cmw6IE1heWJlPFVSTD4pOiBNYXliZTxPcmlnaW5OYXY+IHtcclxuICAgIGlmIChub25lKHVybCkpIHtcclxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgfVxyXG4gICAgY29uc3Qgb3JpZ2luID0gcGFyc2VPcmlnaW4odXJsKTtcclxuICAgIGlmIChub25lKG9yaWdpbikpIHtcclxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG5ldyBPcmlnaW5OYXYodHlwZSwgb3JpZ2luKTtcclxufVxyXG5cclxuZXhwb3J0IHR5cGUgTmF2aWdhdGlvbiA9IE9yaWdpbk5hdnxDYXRlZ29yaXplZE5hdnxHcm91cE5hdjtcclxuZXhwb3J0IHR5cGUgTmF2U2VxdWVuY2UgPSBOYXZpZ2F0aW9uW107XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaXNPcmlnaW5OYXYobmF2aWdhdGlvbjogTmF2aWdhdGlvbik6IG5hdmlnYXRpb24gaXMgT3JpZ2luTmF2IHtcclxuICAgIHJldHVybiBuYXZpZ2F0aW9uIGluc3RhbmNlb2YgT3JpZ2luTmF2O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaXNDYXRlZ29yaXplZE5hdihuYXZpZ2F0aW9uOiBOYXZpZ2F0aW9uKTogbmF2aWdhdGlvbiBpcyBDYXRlZ29yaXplZE5hdiB7XHJcbiAgICByZXR1cm4gbmF2aWdhdGlvbiBpbnN0YW5jZW9mIENhdGVnb3JpemVkTmF2O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaXNHcm91cE5hdihuYXZpZ2F0aW9uOiBOYXZpZ2F0aW9uKTogbmF2aWdhdGlvbiBpcyBHcm91cE5hdiB7XHJcbiAgICByZXR1cm4gbmF2aWdhdGlvbiBpbnN0YW5jZW9mIEdyb3VwTmF2O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaGFzaE5hdmlnYXRpb24obmF2aWdhdGlvbjogTmF2aWdhdGlvbik6IEhhc2gge1xyXG4gICAgcmV0dXJuIG5hdmlnYXRpb24uaGFzaCgpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaXNTYW1lTmF2aWdhdGlvbihhOiBOYXZpZ2F0aW9uLCBiOiBOYXZpZ2F0aW9uKTogYm9vbGVhbiB7XHJcbiAgICBpZiAoaXNPcmlnaW5OYXYoYSkgJiYgaXNPcmlnaW5OYXYoYikpIHtcclxuICAgICAgICByZXR1cm4gYS5jb21wYXJlKGIpO1xyXG4gICAgfSBlbHNlIGlmIChpc0NhdGVnb3JpemVkTmF2KGEpICYmIGlzQ2F0ZWdvcml6ZWROYXYoYikpIHtcclxuICAgICAgICByZXR1cm4gYS5jb21wYXJlKGIpO1xyXG4gICAgfSBlbHNlIGlmIChpc0dyb3VwTmF2KGEpICYmIGlzR3JvdXBOYXYoYikpIHtcclxuICAgICAgICByZXR1cm4gYS5jb21wYXJlKGIpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBlbnVtIE5hdlR5cGVLZXkge1xyXG4gICAgbmF2aWdhdGlvbiA9IFwibmF2aWdhdGVUb1wiLFxyXG4gICAgcmVkaXJlY3QgPSBcInJlZGlyZWN0VG9cIixcclxuICAgIHBhcmVudFRhYiA9IFwicGFyZW50VGFiXCIsXHJcbiAgICBjb250ZW50VHlwZSA9IFwiY29udGVudFR5cGVcIixcclxuICAgIG5hdk9yUmVkaXJlY3QgPSBcIm5hdk9yUmVkaXJlY3RUb1wiXHJcbn1cclxuXHJcbmV4cG9ydCBlbnVtIFVybENhdGVnb3J5S2V5IHtcclxuICAgIGFueVVybCA9IFwiPGFueVVybD5cIixcclxuICAgIHVuY2F0ZWdvcml6ZWRVcmwgPSBcIjx1bmNhdGVnb3JpemVkVXJsPlwiLFxyXG4gICAgdHJ1c3RlZFVybCA9IFwiPHRydXN0ZWRVcmw+XCIsXHJcbiAgICB1bnRydXN0ZWRVcmwgPSBcIjx1bnRydXN0ZWRVcmw+XCIsXHJcbiAgICBwaGlzaGluZ1NvdXJjZVNpdGVVcmwgPSBcIjxwaGlzaGluZ1NvdXJjZVNpdGVVcmw+XCIsXHJcbiAgICB3ZWJNYWlsU2l0ZVVybCA9IFwiPHdlYk1haWxTaXRlVXJsPlwiLFxyXG4gICAgYXV0aFNpdGVVcmwgPSBcIjxhdXRoU2l0ZVVybD5cIixcclxuICAgIHNpdGVSZXF1aXJlc0F1dGhVcmwgPSBcIjxzaXRlUmVxdWlyZXNBdXRoVXJsPlwiLFxyXG4gICAgZXh0ZXJuYWxBcHBMaW5rID0gXCI8ZXh0ZXJuYWxBcHBMaW5rPlwiXHJcbn1cclxuXHJcbmV4cG9ydCBlbnVtIE5hdk1vZGlmZXJLZXkge1xyXG4gICAgcmVwZWF0ZWQgPSBcInJlcGVhdFwiLFxyXG4gICAgbm90ID0gXCJub3RcIixcclxuICAgIG9yID0gXCJvclwiXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiB1cmxDYXRlZ29yeVRvU3RyaW5nKHVybENhdGVnb3J5OiBVcmxDYXRlZ29yeSk6IHN0cmluZyB7XHJcbiAgICBzd2l0Y2ggKHVybENhdGVnb3J5KSB7XHJcbiAgICAgICAgY2FzZSBVcmxDYXRlZ29yeS5hbnlVcmw6XHJcbiAgICAgICAgICAgIHJldHVybiBVcmxDYXRlZ29yeUtleS5hbnlVcmw7XHJcbiAgICAgICAgY2FzZSBVcmxDYXRlZ29yeS51bmNhdGVnb3JpemVkVXJsOlxyXG4gICAgICAgICAgICByZXR1cm4gVXJsQ2F0ZWdvcnlLZXkudW5jYXRlZ29yaXplZFVybDtcclxuICAgICAgICBjYXNlIFVybENhdGVnb3J5LnRydXN0ZWRVcmw6XHJcbiAgICAgICAgICAgIHJldHVybiBVcmxDYXRlZ29yeUtleS50cnVzdGVkVXJsO1xyXG4gICAgICAgIGNhc2UgVXJsQ2F0ZWdvcnkudW50cnVzdGVkVXJsOlxyXG4gICAgICAgICAgICByZXR1cm4gVXJsQ2F0ZWdvcnlLZXkudW50cnVzdGVkVXJsO1xyXG4gICAgICAgIGNhc2UgVXJsQ2F0ZWdvcnkucGhpc2hpbmdTb3VyY2VTaXRlVXJsOlxyXG4gICAgICAgICAgICByZXR1cm4gVXJsQ2F0ZWdvcnlLZXkucGhpc2hpbmdTb3VyY2VTaXRlVXJsO1xyXG4gICAgICAgIGNhc2UgVXJsQ2F0ZWdvcnkud2ViTWFpbFNpdGVVcmw6XHJcbiAgICAgICAgICAgIHJldHVybiBVcmxDYXRlZ29yeUtleS53ZWJNYWlsU2l0ZVVybDtcclxuICAgICAgICBjYXNlIFVybENhdGVnb3J5LmF1dGhTaXRlVXJsOlxyXG4gICAgICAgICAgICByZXR1cm4gVXJsQ2F0ZWdvcnlLZXkuYXV0aFNpdGVVcmw7XHJcbiAgICAgICAgY2FzZSBVcmxDYXRlZ29yeS5zaXRlUmVxdWlyZXNBdXRoVXJsOlxyXG4gICAgICAgICAgICByZXR1cm4gVXJsQ2F0ZWdvcnlLZXkuc2l0ZVJlcXVpcmVzQXV0aFVybDtcclxuICAgICAgICBjYXNlIFVybENhdGVnb3J5LmV4dGVybmFsQXBwTGluazpcclxuICAgICAgICAgICAgcmV0dXJuIFVybENhdGVnb3J5S2V5LmV4dGVybmFsQXBwTGluaztcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICByZXR1cm4gYDxJbnZhbGlkIFVybENhdGVnb3J5OiAke3VybENhdGVnb3J5fT5gO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBwYXJzZU5hdlR5cGUobmF2VHlwZUtleTogc3RyaW5nKTogTWF5YmU8TmF2VHlwZT4ge1xyXG4gICAgc3dpdGNoIChuYXZUeXBlS2V5KSB7XHJcbiAgICAgICAgY2FzZSBOYXZUeXBlS2V5Lm5hdmlnYXRpb246XHJcbiAgICAgICAgICAgIHJldHVybiBOYXZUeXBlLm5hdmlnYXRpb247XHJcbiAgICAgICAgY2FzZSBOYXZUeXBlS2V5LnJlZGlyZWN0OlxyXG4gICAgICAgICAgICByZXR1cm4gTmF2VHlwZS5yZWRpcmVjdDtcclxuICAgICAgICBjYXNlIE5hdlR5cGVLZXkucGFyZW50VGFiOlxyXG4gICAgICAgICAgICByZXR1cm4gTmF2VHlwZS5wYXJlbnRUYWI7XHJcbiAgICAgICAgY2FzZSBOYXZUeXBlS2V5LmNvbnRlbnRUeXBlOlxyXG4gICAgICAgICAgICByZXR1cm4gTmF2VHlwZS5jb250ZW50VHlwZTtcclxuICAgICAgICBjYXNlIE5hdlR5cGVLZXkubmF2T3JSZWRpcmVjdDpcclxuICAgICAgICAgICAgcmV0dXJuIE5hdlR5cGUubmF2T3JSZWRpcmVjdDtcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBwYXJzZVVybENhdGVnb3J5KHVybENhdGVnb3J5S2V5OiBzdHJpbmcpOiBNYXliZTxVcmxDYXRlZ29yeT4ge1xyXG4gICAgc3dpdGNoICh1cmxDYXRlZ29yeUtleSkge1xyXG4gICAgICAgIGNhc2UgVXJsQ2F0ZWdvcnlLZXkuYW55VXJsOlxyXG4gICAgICAgICAgICByZXR1cm4gVXJsQ2F0ZWdvcnkuYW55VXJsOyBcclxuICAgICAgICBjYXNlIFVybENhdGVnb3J5S2V5LnVuY2F0ZWdvcml6ZWRVcmw6XHJcbiAgICAgICAgICAgIHJldHVybiBVcmxDYXRlZ29yeS51bmNhdGVnb3JpemVkVXJsO1xyXG4gICAgICAgIGNhc2UgVXJsQ2F0ZWdvcnlLZXkudHJ1c3RlZFVybDpcclxuICAgICAgICAgICAgcmV0dXJuIFVybENhdGVnb3J5LnRydXN0ZWRVcmw7XHJcbiAgICAgICAgY2FzZSBVcmxDYXRlZ29yeUtleS51bnRydXN0ZWRVcmw6XHJcbiAgICAgICAgICAgIHJldHVybiBVcmxDYXRlZ29yeS51bnRydXN0ZWRVcmw7XHJcbiAgICAgICAgY2FzZSBVcmxDYXRlZ29yeUtleS5waGlzaGluZ1NvdXJjZVNpdGVVcmw6XHJcbiAgICAgICAgICAgIHJldHVybiBVcmxDYXRlZ29yeS5waGlzaGluZ1NvdXJjZVNpdGVVcmw7XHJcbiAgICAgICAgY2FzZSBVcmxDYXRlZ29yeUtleS53ZWJNYWlsU2l0ZVVybDpcclxuICAgICAgICAgICAgcmV0dXJuIFVybENhdGVnb3J5LndlYk1haWxTaXRlVXJsO1xyXG4gICAgICAgIGNhc2UgVXJsQ2F0ZWdvcnlLZXkuYXV0aFNpdGVVcmw6XHJcbiAgICAgICAgICAgIHJldHVybiBVcmxDYXRlZ29yeS5hdXRoU2l0ZVVybDtcclxuICAgICAgICBjYXNlIFVybENhdGVnb3J5S2V5LnNpdGVSZXF1aXJlc0F1dGhVcmw6XHJcbiAgICAgICAgICAgIHJldHVybiBVcmxDYXRlZ29yeS5zaXRlUmVxdWlyZXNBdXRoVXJsO1xyXG4gICAgICAgIGNhc2UgVXJsQ2F0ZWdvcnlLZXkuZXh0ZXJuYWxBcHBMaW5rOlxyXG4gICAgICAgICAgICByZXR1cm4gVXJsQ2F0ZWdvcnkuZXh0ZXJuYWxBcHBMaW5rO1xyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHBhcnNlTmF2TW9kaWZlcktleShuYXZNb2RpZmllcktleTogc3RyaW5nKTogTWF5YmU8TmF2TW9kaWZlcj4ge1xyXG4gICAgc3dpdGNoIChuYXZNb2RpZmllcktleSkge1xyXG4gICAgICAgIGNhc2UgTmF2TW9kaWZlcktleS5yZXBlYXRlZDpcclxuICAgICAgICAgICAgcmV0dXJuIE5hdk1vZGlmZXIucmVwZWF0ZWQ7XHJcbiAgICAgICAgY2FzZSBOYXZNb2RpZmVyS2V5Lm5vdDpcclxuICAgICAgICAgICAgcmV0dXJuIE5hdk1vZGlmZXIubm90O1xyXG4gICAgICAgIGNhc2UgTmF2TW9kaWZlcktleS5vcjpcclxuICAgICAgICAgICAgcmV0dXJuIE5hdk1vZGlmZXIub3I7XHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IHR5cGUgQmFja1JlZiA9IG51bWJlcjtcclxuXHJcbmV4cG9ydCBlbnVtIEh0dHBIZWFkZXJUeXBlIHtcclxuICAgIGNvbnRlbnRUeXBlID0gMHgxXHJcbn1cclxuXHJcbmV4cG9ydCBlbnVtIEh0dHBIZWFkZXJUeXBlS2V5IHtcclxuICAgIGNvbnRlbnRUeXBlID0gXCJDb250ZW50LVR5cGVcIlxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VIZWFkZXJUeXBlKGhlYWRlcktleTogc3RyaW5nKTogTWF5YmU8SHR0cEhlYWRlclR5cGU+IHtcclxuICAgIHN3aXRjaCAoaGVhZGVyS2V5LnRvTG93ZXJDYXNlKCkpIHtcclxuICAgICAgICBjYXNlIEh0dHBIZWFkZXJUeXBlS2V5LmNvbnRlbnRUeXBlLnRvTG93ZXJDYXNlKCk6XHJcbiAgICAgICAgICAgIHJldHVybiBIdHRwSGVhZGVyVHlwZS5jb250ZW50VHlwZTtcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaGVhZGVyVHlwZVRvU3RyaW5nKGhlYWRlcjogSHR0cEhlYWRlclR5cGUpOiBzdHJpbmcge1xyXG4gICAgc3dpdGNoIChoZWFkZXIpIHtcclxuICAgICAgICBjYXNlIEh0dHBIZWFkZXJUeXBlLmNvbnRlbnRUeXBlOlxyXG4gICAgICAgICAgICByZXR1cm4gSHR0cEhlYWRlclR5cGVLZXkuY29udGVudFR5cGU7XHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgcmV0dXJuIGBVbmtub3duIEhlYWRlcjogJHtoZWFkZXJ9YDtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlR3JvdXBOYW1lKGdyb3VwTmFtZTogc3RyaW5nKTogTWF5YmU8R3JvdXBOYW1lPiB7XHJcbiAgICBjb25zdCBncm91cE5hbWVQcmVmaXggPSBcIiRcIjtcclxuICAgIGlmIChncm91cE5hbWUuc3RhcnRzV2l0aChncm91cE5hbWVQcmVmaXgpKSB7XHJcbiAgICAgICAgcmV0dXJuIGdyb3VwTmFtZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgIH1cclxufVxyXG5cclxuZW51bSBMZXhlZE5hdlRva2VuVHlwZSB7XHJcbiAgICBuYXZNb2RpZmllcixcclxuICAgIG5hdlR5cGUsXHJcbiAgICB1cmxDYXRlZ29yeSxcclxuICAgIG9yaWdpbixcclxuICAgIGJhY2tSZWYsXHJcbiAgICB1cmxDYXRlZ29yeUFycmF5LFxyXG4gICAgaGVhZGVyVHlwZSxcclxuICAgIGNvbnRlbnRUeXBlLFxyXG4gICAgZ3JvdXBOYW1lXHJcbn1cclxuXHJcbnR5cGUgTGV4ZWROYXZUb2tlbiA9IE5hdk1vZGlmZXJ8TmF2VHlwZXxVcmxDYXRlZ29yeXxPcmlnaW58QmFja1JlZnxVcmxDYXRlZ29yeVtdfEh0dHBIZWFkZXJUeXBlfENvbnRlbnRUeXBlfEdyb3VwTmFtZTtcclxuXHJcbmZ1bmN0aW9uIGxleFN0cmluZ1Rva2VuKHRva2VuOiBzdHJpbmcpOiBNYXliZTxbTGV4ZWROYXZUb2tlblR5cGUsIExleGVkTmF2VG9rZW5dPiB7XHJcbiAgICBjb25zdCBtb2RpZmllciA9IHBhcnNlTmF2TW9kaWZlcktleSh0b2tlbik7XHJcbiAgICBpZiAoc29tZShtb2RpZmllcikpIHtcclxuICAgICAgICByZXR1cm4gW0xleGVkTmF2VG9rZW5UeXBlLm5hdk1vZGlmaWVyLCBtb2RpZmllcl07XHJcbiAgICB9XHJcbiAgICBjb25zdCB0eXBlID0gcGFyc2VOYXZUeXBlKHRva2VuKTtcclxuICAgIGlmIChzb21lKHR5cGUpKSB7XHJcbiAgICAgICAgcmV0dXJuIFtMZXhlZE5hdlRva2VuVHlwZS5uYXZUeXBlLCB0eXBlXTtcclxuICAgIH1cclxuICAgIGNvbnN0IGNhdGVnb3J5ID0gcGFyc2VVcmxDYXRlZ29yeSh0b2tlbik7XHJcbiAgICBpZiAoc29tZShjYXRlZ29yeSkpIHtcclxuICAgICAgICByZXR1cm4gW0xleGVkTmF2VG9rZW5UeXBlLnVybENhdGVnb3J5LCBjYXRlZ29yeV07XHJcbiAgICB9XHJcbiAgICBjb25zdCBvcmlnaW4gPSBwYXJzZU9yaWdpbih0b2tlbik7XHJcbiAgICBpZiAoc29tZShvcmlnaW4pKSB7XHJcbiAgICAgICAgcmV0dXJuIFtMZXhlZE5hdlRva2VuVHlwZS5vcmlnaW4sIG9yaWdpbl07XHJcbiAgICB9XHJcbiAgICBjb25zdCBoZWFkZXIgPSBwYXJzZUhlYWRlclR5cGUodG9rZW4pO1xyXG4gICAgaWYgKHNvbWUoaGVhZGVyKSkge1xyXG4gICAgICAgIHJldHVybiBbTGV4ZWROYXZUb2tlblR5cGUuaGVhZGVyVHlwZSwgaGVhZGVyXTtcclxuICAgIH1cclxuICAgIGNvbnN0IGNvbnRlbnRUeXBlID0gcGFyc2VDb250ZW50VHlwZSh0b2tlbik7XHJcbiAgICBpZiAoc29tZShjb250ZW50VHlwZSkpIHtcclxuICAgICAgICByZXR1cm4gW0xleGVkTmF2VG9rZW5UeXBlLmNvbnRlbnRUeXBlLCBjb250ZW50VHlwZV07XHJcbiAgICB9XHJcbiAgICBjb25zdCBncm91cE5hbWUgPSBwYXJzZUdyb3VwTmFtZSh0b2tlbik7XHJcbiAgICBpZiAoc29tZShncm91cE5hbWUpKSB7XHJcbiAgICAgICAgcmV0dXJuIFtMZXhlZE5hdlRva2VuVHlwZS5ncm91cE5hbWUsIGdyb3VwTmFtZV07XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG59XHJcblxyXG5mdW5jdGlvbiBsZXhOYXZpZ2F0aW9uKHRva2VuczogU2VyaWFsaXplZE5hdmlnYXRpb24sIGxleGVkVG9rZW5zOiBbTGV4ZWROYXZUb2tlblR5cGUsIExleGVkTmF2VG9rZW5dW10pOiBib29sZWFuIHtcclxuICAgIGlmIChpc0VtcHR5KHRva2VucykpIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuICAgIGNvbnN0IFt0b2tlbiwgcmVtYWluaW5nVG9rZW5zXSA9IFtmaXJzdCh0b2tlbnMpLCByZXN0KHRva2VucyldO1xyXG4gICAgY29uc3Qgb2xkTGVuZ3RoID0gbGV4ZWRUb2tlbnMubGVuZ3RoO1xyXG4gICAgaWYgKGlzU3RyaW5nKHRva2VuKSkge1xyXG4gICAgICAgIGNvbnN0IGxleGVkVG9rZW4gPSBsZXhTdHJpbmdUb2tlbih0b2tlbik7XHJcbiAgICAgICAgaWYgKHNvbWUobGV4ZWRUb2tlbikpIHtcclxuICAgICAgICAgICAgbGV4ZWRUb2tlbnMucHVzaChsZXhlZFRva2VuKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAoaXNOdW1iZXIodG9rZW4pKSB7XHJcbiAgICAgICAgY29uc3QgYmFja1JlZiA9IHRva2VuO1xyXG4gICAgICAgIGxleGVkVG9rZW5zLnB1c2goW0xleGVkTmF2VG9rZW5UeXBlLmJhY2tSZWYsIGJhY2tSZWZdKTtcclxuICAgIH1cclxuICAgIGlmIChpc0FycmF5KHRva2VuKSkge1xyXG4gICAgICAgIGNvbnN0IHN1YlRva2VucyA9IHRva2VuO1xyXG4gICAgICAgIGNvbnN0IHVybENhdGVnb3JpZXMgPSBzdWJUb2tlbnMubWFwKChzdWJUb2tlbikgPT4ge1xyXG4gICAgICAgICAgICBpZiAoaXNTdHJpbmcoc3ViVG9rZW4pKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcGFyc2VVcmxDYXRlZ29yeShzdWJUb2tlbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgICAgICB9KS5maWx0ZXIoc29tZSk7XHJcbiAgICAgICAgY29uc3QgZGlkTGV4U3ViVG9rZW5zID0gKHVybENhdGVnb3JpZXMubGVuZ3RoID09PSBzdWJUb2tlbnMubGVuZ3RoKTtcclxuICAgICAgICBpZiAoIWRpZExleFN1YlRva2Vucykge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxleGVkVG9rZW5zLnB1c2goW0xleGVkTmF2VG9rZW5UeXBlLnVybENhdGVnb3J5QXJyYXksIHVybENhdGVnb3JpZXNdKTtcclxuICAgIH1cclxuICAgIGNvbnN0IG5ld0xlbmd0aCA9IGxleGVkVG9rZW5zLmxlbmd0aDtcclxuICAgIGNvbnN0IGRpZExleFRva2VuID0gKG5ld0xlbmd0aCA+IG9sZExlbmd0aCk7XHJcbiAgICBpZiAoZGlkTGV4VG9rZW4pIHtcclxuICAgICAgICByZXR1cm4gbGV4TmF2aWdhdGlvbihyZW1haW5pbmdUb2tlbnMsIGxleGVkVG9rZW5zKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG59XHJcblxyXG5lbnVtIE5hdk5vZGVUeXBlIHtcclxuICAgIHJlcGVhdGVkTmF2LFxyXG4gICAgdHlwZWROYXYsXHJcbiAgICBvcmlnaW5OYXYsXHJcbiAgICBjYXRlZ29yaXplZE5hdixcclxuICAgIGJhY2tSZWYsXHJcbiAgICBub3ROYXYsXHJcbiAgICBvck5hdixcclxuICAgIGNvbnRlbnRUeXBlTmF2LFxyXG4gICAgZ3JvdXBOYW1lTmF2XHJcbn1cclxuXHJcbmludGVyZmFjZSBJTmF2Tm9kZVZpc2l0b3Ige1xyXG4gICAgdmlzaXRSZXBlYXRlZE5hdihub2RlOiBSZXBlYXRlZE5hdk5vZGUpOiB2b2lkO1xyXG4gICAgdmlzaXRUeXBlZE5hdihub2RlOiBUeXBlZE5hdk5vZGUpOiB2b2lkO1xyXG4gICAgdmlzaXRPcmlnaW5OYXYobm9kZTogT3JpZ2luTmF2Tm9kZSk6IHZvaWQ7XHJcbiAgICB2aXNpdENhdGVnb3JpemVkTmF2KG5vZGU6IENhdGVnb3JpemVkTmF2Tm9kZSk6IHZvaWQ7XHJcbiAgICB2aXNpdEJhY2tSZWZOYXYobm9kZTogQmFja1JlZk5hdk5vZGUpOiB2b2lkO1xyXG4gICAgdmlzaXROb3ROYXYobm9kZTogTm90TmF2Tm9kZSk6IHZvaWQ7XHJcbiAgICB2aXNpdE9yTmF2KG5vZGU6IE9yTmF2Tm9kZSk6IHZvaWQ7XHJcbiAgICB2aXNpdENvbnRlbnRUeXBlTmF2KG5vZGU6IENvbnRlbnRUeXBlTmF2Tm9kZSk6IHZvaWQ7XHJcbiAgICB2aXNpdEdyb3VwTmFtZU5hdihub2RlOiBHcm91cE5hbWVOYXZOb2RlKTogdm9pZDtcclxufVxyXG5cclxuY2xhc3MgTmF2Tm9kZSB7XHJcbiAgICBjb25zdHJ1Y3RvcihwdWJsaWMgdHlwZTogTmF2Tm9kZVR5cGUpIHsgfVxyXG5cclxuICAgIHZpc2l0KHZpc2l0b3I6IElOYXZOb2RlVmlzaXRvcikgeyBcclxuICAgICAgICB1bnVzZWQodmlzaXRvcik7XHJcbiAgICB9XHJcbn1cclxuXHJcbmNsYXNzIFJlcGVhdGVkTmF2Tm9kZSBleHRlbmRzIE5hdk5vZGUge1xyXG4gICAgY29uc3RydWN0b3IocmVhZG9ubHkgY2hpbGQ6IE5hdk5vZGUpIHsgXHJcbiAgICAgICAgc3VwZXIoTmF2Tm9kZVR5cGUucmVwZWF0ZWROYXYpO1xyXG4gICAgfVxyXG5cclxuICAgIHZpc2l0KHZpc2l0b3I6IElOYXZOb2RlVmlzaXRvcikge1xyXG4gICAgICAgIHZpc2l0b3IudmlzaXRSZXBlYXRlZE5hdih0aGlzKTtcclxuICAgICAgICB0aGlzLmNoaWxkLnZpc2l0KHZpc2l0b3IpO1xyXG4gICAgfVxyXG59XHJcblxyXG5jbGFzcyBUeXBlZE5hdk5vZGUgZXh0ZW5kcyBOYXZOb2RlIHtcclxuICAgIGNvbnN0cnVjdG9yKHJlYWRvbmx5IG5hdlR5cGU6IE5hdlR5cGUsIHJlYWRvbmx5IGNoaWxkOiBOYXZOb2RlKSB7XHJcbiAgICAgICAgc3VwZXIoTmF2Tm9kZVR5cGUucmVwZWF0ZWROYXYpO1xyXG4gICAgfVxyXG5cclxuICAgIHZpc2l0KHZpc2l0b3I6IElOYXZOb2RlVmlzaXRvcikge1xyXG4gICAgICAgIHZpc2l0b3IudmlzaXRUeXBlZE5hdih0aGlzKTtcclxuICAgICAgICB0aGlzLmNoaWxkLnZpc2l0KHZpc2l0b3IpO1xyXG4gICAgfVxyXG59XHJcblxyXG5jbGFzcyBPcmlnaW5OYXZOb2RlIGV4dGVuZHMgTmF2Tm9kZSB7XHJcbiAgICBjb25zdHJ1Y3RvcihyZWFkb25seSBvcmlnaW46IE9yaWdpbikge1xyXG4gICAgICAgIHN1cGVyKE5hdk5vZGVUeXBlLm9yaWdpbk5hdik7XHJcbiAgICAgfVxyXG5cclxuICAgIHZpc2l0KHZpc2l0b3I6IElOYXZOb2RlVmlzaXRvcikge1xyXG4gICAgICAgIHZpc2l0b3IudmlzaXRPcmlnaW5OYXYodGhpcyk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmNsYXNzIENhdGVnb3JpemVkTmF2Tm9kZSBleHRlbmRzIE5hdk5vZGUge1xyXG4gICAgY29uc3RydWN0b3IocmVhZG9ubHkgY2F0ZWdvcnk6IFVybENhdGVnb3J5KSB7XHJcbiAgICAgICAgc3VwZXIoTmF2Tm9kZVR5cGUuY2F0ZWdvcml6ZWROYXYpO1xyXG4gICAgfVxyXG5cclxuICAgIHZpc2l0KHZpc2l0b3I6IElOYXZOb2RlVmlzaXRvcikge1xyXG4gICAgICAgIHZpc2l0b3IudmlzaXRDYXRlZ29yaXplZE5hdih0aGlzKTtcclxuICAgIH1cclxufVxyXG5cclxuY2xhc3MgTm90TmF2Tm9kZSBleHRlbmRzIE5hdk5vZGUge1xyXG4gICAgY29uc3RydWN0b3IocmVhZG9ubHkgY2hpbGQ6IE5hdk5vZGUpIHtcclxuICAgICAgICBzdXBlcihOYXZOb2RlVHlwZS5ub3ROYXYpO1xyXG4gICAgfVxyXG5cclxuICAgIHZpc2l0KHZpc2l0b3I6IElOYXZOb2RlVmlzaXRvcikge1xyXG4gICAgICAgIHZpc2l0b3IudmlzaXROb3ROYXYodGhpcyk7XHJcbiAgICAgICAgdGhpcy5jaGlsZC52aXNpdCh2aXNpdG9yKTtcclxuICAgIH1cclxufVxyXG5cclxuY2xhc3MgT3JOYXZOb2RlIGV4dGVuZHMgTmF2Tm9kZSB7XHJcbiAgICBjb25zdHJ1Y3RvcihyZWFkb25seSBjYXRlZ29yaWVzOiBVcmxDYXRlZ29yeVtdKSB7XHJcbiAgICAgICAgc3VwZXIoTmF2Tm9kZVR5cGUub3JOYXYpO1xyXG4gICAgfVxyXG5cclxuICAgIHZpc2l0KHZpc2l0b3I6IElOYXZOb2RlVmlzaXRvcikge1xyXG4gICAgICAgIHZpc2l0b3IudmlzaXRPck5hdih0aGlzKTtcclxuICAgIH1cclxufVxyXG5cclxuY2xhc3MgQmFja1JlZk5hdk5vZGUgZXh0ZW5kcyBOYXZOb2RlIHtcclxuICAgIGNvbnN0cnVjdG9yKHJlYWRvbmx5IGJhY2tSZWY6IEJhY2tSZWYpIHsgXHJcbiAgICAgICAgc3VwZXIoTmF2Tm9kZVR5cGUuYmFja1JlZik7XHJcbiAgICB9XHJcblxyXG4gICAgdmlzaXQodmlzaXRvcjogSU5hdk5vZGVWaXNpdG9yKSB7XHJcbiAgICAgICAgdmlzaXRvci52aXNpdEJhY2tSZWZOYXYodGhpcyk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmNsYXNzIENvbnRlbnRUeXBlTmF2Tm9kZSBleHRlbmRzIE5hdk5vZGUge1xyXG4gICAgY29uc3RydWN0b3IocmVhZG9ubHkgY29udGVudFR5cGU6IENvbnRlbnRUeXBlKSB7XHJcbiAgICAgICAgc3VwZXIoTmF2Tm9kZVR5cGUuY29udGVudFR5cGVOYXYpO1xyXG4gICAgfVxyXG5cclxuICAgIHZpc2l0KHZpc2l0b3I6IElOYXZOb2RlVmlzaXRvcikge1xyXG4gICAgICAgIHZpc2l0b3IudmlzaXRDb250ZW50VHlwZU5hdih0aGlzKTtcclxuICAgIH1cclxufVxyXG5cclxuY2xhc3MgR3JvdXBOYW1lTmF2Tm9kZSBleHRlbmRzIE5hdk5vZGUge1xyXG4gICAgY29uc3RydWN0b3IocmVhZG9ubHkgZ3JvdXBOYW1lOiBHcm91cE5hbWUpIHtcclxuICAgICAgICBzdXBlcihOYXZOb2RlVHlwZS5ncm91cE5hbWVOYXYpO1xyXG4gICAgfVxyXG5cclxuICAgIHZpc2l0KHZpc2l0b3I6IElOYXZOb2RlVmlzaXRvcikge1xyXG4gICAgICAgIHZpc2l0b3IudmlzaXRHcm91cE5hbWVOYXYodGhpcyk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHBhcnNlTmF2Tm9kZSh0b2tlbnM6IFtMZXhlZE5hdlRva2VuVHlwZSwgTGV4ZWROYXZUb2tlbl1bXSk6IE1heWJlPE5hdk5vZGU+IHtcclxuICAgIGlmIChpc0VtcHR5KHRva2VucykpIHtcclxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgfVxyXG4gICAgY29uc3QgW1t0b2tlblR5cGUsIHRva2VuXSwgcmVtYWluaW5nVG9rZW5zXSA9IFtmaXJzdCh0b2tlbnMpLCByZXN0KHRva2VucyldO1xyXG4gICAgc3dpdGNoICh0b2tlblR5cGUpIHtcclxuICAgICAgICBjYXNlIExleGVkTmF2VG9rZW5UeXBlLm5hdk1vZGlmaWVyOiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vZGlmaWVyID0gdG9rZW47XHJcbiAgICAgICAgICAgIHN3aXRjaCAobW9kaWZpZXIpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgTmF2TW9kaWZlci5yZXBlYXRlZDoge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNoaWxkTm9kZSA9IHBhcnNlTmF2Tm9kZShyZW1haW5pbmdUb2tlbnMpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChub25lKGNoaWxkTm9kZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBSZXBlYXRlZE5hdk5vZGUoY2hpbGROb2RlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhc2UgTmF2TW9kaWZlci5ub3Q6IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNFbXB0eShyZW1haW5pbmdUb2tlbnMpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNoaWxkTm9kZSA9IHBhcnNlTmF2Tm9kZShyZW1haW5pbmdUb2tlbnMpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChub25lKGNoaWxkTm9kZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBOb3ROYXZOb2RlKGNoaWxkTm9kZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXNlIE5hdk1vZGlmZXIub3I6IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNFbXB0eShyZW1haW5pbmdUb2tlbnMpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IFtuZXh0VG9rZW5UeXBlLCBuZXh0VG9rZW5dID0gZmlyc3QocmVtYWluaW5nVG9rZW5zKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobmV4dFRva2VuVHlwZSAhPT0gTGV4ZWROYXZUb2tlblR5cGUudXJsQ2F0ZWdvcnlBcnJheSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWlzQXJyYXkobmV4dFRva2VuKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjYXRlZ29yaWVzID0gbmV4dFRva2VuO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghaXNFbXB0eShyZXN0KHJlbWFpbmluZ1Rva2VucykpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgT3JOYXZOb2RlKGNhdGVnb3JpZXMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDoge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgY2FzZSBMZXhlZE5hdlRva2VuVHlwZS5uYXZUeXBlOiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG5hdlR5cGUgPSB0b2tlbiBhcyBOYXZUeXBlO1xyXG4gICAgICAgICAgICBjb25zdCBjaGlsZE5vZGUgPSBwYXJzZU5hdk5vZGUocmVtYWluaW5nVG9rZW5zKTtcclxuICAgICAgICAgICAgaWYgKG5vbmUoY2hpbGROb2RlKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFR5cGVkTmF2Tm9kZShuYXZUeXBlLCBjaGlsZE5vZGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXNlIExleGVkTmF2VG9rZW5UeXBlLnVybENhdGVnb3J5OiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNhdGVnb3J5ID0gdG9rZW4gYXMgVXJsQ2F0ZWdvcnk7XHJcbiAgICAgICAgICAgIGlmICghaXNFbXB0eShyZW1haW5pbmdUb2tlbnMpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgQ2F0ZWdvcml6ZWROYXZOb2RlKGNhdGVnb3J5KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2FzZSBMZXhlZE5hdlRva2VuVHlwZS5vcmlnaW46IHtcclxuICAgICAgICAgICAgY29uc3Qgb3JpZ2luID0gdG9rZW4gYXMgT3JpZ2luO1xyXG4gICAgICAgICAgICBpZiAoIWlzRW1wdHkocmVtYWluaW5nVG9rZW5zKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IE9yaWdpbk5hdk5vZGUob3JpZ2luKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2FzZSBMZXhlZE5hdlRva2VuVHlwZS5iYWNrUmVmOiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGJhY2tSZWYgPSB0b2tlbiBhcyBCYWNrUmVmO1xyXG4gICAgICAgICAgICBpZiAoIWlzRW1wdHkocmVtYWluaW5nVG9rZW5zKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEJhY2tSZWZOYXZOb2RlKGJhY2tSZWYpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXNlIExleGVkTmF2VG9rZW5UeXBlLmhlYWRlclR5cGU6IHtcclxuICAgICAgICAgICAgaWYgKGlzRW1wdHkocmVtYWluaW5nVG9rZW5zKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zdCBbbmV4dFRva2VuVHlwZSwgbmV4dFRva2VuXSA9IGZpcnN0KHJlbWFpbmluZ1Rva2Vucyk7XHJcbiAgICAgICAgICAgIGlmIChuZXh0VG9rZW5UeXBlICE9PSBMZXhlZE5hdlRva2VuVHlwZS5jb250ZW50VHlwZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoIWlzRW1wdHkocmVzdChyZW1haW5pbmdUb2tlbnMpKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zdCBjb250ZW50VHlwZSA9IG5leHRUb2tlbiBhcyBDb250ZW50VHlwZTtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBDb250ZW50VHlwZU5hdk5vZGUoY29udGVudFR5cGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXNlIExleGVkTmF2VG9rZW5UeXBlLmdyb3VwTmFtZToge1xyXG4gICAgICAgICAgICBjb25zdCBncm91cE5hbWUgPSB0b2tlbiBhcyBHcm91cE5hbWU7XHJcbiAgICAgICAgICAgIGlmICghaXNFbXB0eShyZW1haW5pbmdUb2tlbnMpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgR3JvdXBOYW1lTmF2Tm9kZShncm91cE5hbWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBkZWZhdWx0OiB7XHJcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5lbnVtIE5hdk5vZGVWaXNpdG9yU3RhdGUge1xyXG4gICAgdmlzaXRlZE5vTm9kZSxcclxuICAgIHZpc2l0ZWRSZXBlYXRlZE5vZGUsXHJcbiAgICB2aXNpdGllZFR5cGVkTm9kZSxcclxuICAgIHZpc2l0ZWROb3ROb2RlLFxyXG4gICAgdmlzaXRlZFRlcm1pbmFsTm9kZSxcclxuICAgIGVycm9yXHJcbn1cclxuXHJcbmNsYXNzIE5hdk5vZGVWaXNpdG9yIGltcGxlbWVudHMgSU5hdk5vZGVWaXNpdG9yIHtcclxuICAgIGNvbnN0cnVjdG9yKHJlYWRvbmx5IGlkOiBudW1iZXIpIHsgfVxyXG5cclxuICAgIHZpc2l0UmVwZWF0ZWROYXYobm9kZTogUmVwZWF0ZWROYXZOb2RlKTogdm9pZCB7XHJcbiAgICAgICAgc3dpdGNoICh0aGlzLnN0YXRlKSB7XHJcbiAgICAgICAgICAgIGNhc2UgTmF2Tm9kZVZpc2l0b3JTdGF0ZS52aXNpdGVkTm9Ob2RlOiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRlID0gTmF2Tm9kZVZpc2l0b3JTdGF0ZS52aXNpdGVkUmVwZWF0ZWROb2RlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tb2RpZmllcnMgfD0gTmF2TW9kaWZlci5yZXBlYXRlZDtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBOYXZOb2RlVmlzaXRvclN0YXRlLmVycm9yO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdmlzaXRUeXBlZE5hdihub2RlOiBUeXBlZE5hdk5vZGUpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCBvblZpc2l0ZWQgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBOYXZOb2RlVmlzaXRvclN0YXRlLnZpc2l0aWVkVHlwZWROb2RlO1xyXG4gICAgICAgICAgICB0aGlzLm5hdlR5cGUgPSBub2RlLm5hdlR5cGU7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgc3dpdGNoICh0aGlzLnN0YXRlKSB7XHJcbiAgICAgICAgICAgIGNhc2UgTmF2Tm9kZVZpc2l0b3JTdGF0ZS52aXNpdGVkTm9Ob2RlOiB7XHJcbiAgICAgICAgICAgICAgICBvblZpc2l0ZWQoKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhc2UgTmF2Tm9kZVZpc2l0b3JTdGF0ZS52aXNpdGVkUmVwZWF0ZWROb2RlOiB7XHJcbiAgICAgICAgICAgICAgICBvblZpc2l0ZWQoKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBOYXZOb2RlVmlzaXRvclN0YXRlLmVycm9yO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdmlzaXRPcmlnaW5OYXYobm9kZTogT3JpZ2luTmF2Tm9kZSk6IHZvaWQge1xyXG4gICAgICAgIHN3aXRjaCAodGhpcy5zdGF0ZSkge1xyXG4gICAgICAgICAgICBjYXNlIE5hdk5vZGVWaXNpdG9yU3RhdGUudmlzaXRpZWRUeXBlZE5vZGU6IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBOYXZOb2RlVmlzaXRvclN0YXRlLnZpc2l0ZWRUZXJtaW5hbE5vZGU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm5hdlBhdHRlcm4gPSBuZXcgT3JpZ2luTmF2UGF0dGVybih0aGlzLm1vZGlmaWVycywgdGhpcy5uYXZUeXBlIGFzIE5hdlR5cGUsIG5vZGUub3JpZ2luLCB0aGlzLmlkKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBOYXZOb2RlVmlzaXRvclN0YXRlLmVycm9yO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdmlzaXRDYXRlZ29yaXplZE5hdihub2RlOiBDYXRlZ29yaXplZE5hdk5vZGUpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCBvblZpc2l0ZWQgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBOYXZOb2RlVmlzaXRvclN0YXRlLnZpc2l0ZWRUZXJtaW5hbE5vZGU7XHJcbiAgICAgICAgICAgIHRoaXMubmF2UGF0dGVybiA9IG5ldyBDYXRlZ29yaXplZE5hdlBhdHRlcm4odGhpcy5tb2RpZmllcnMsIHRoaXMubmF2VHlwZSBhcyBOYXZUeXBlLCBub2RlLmNhdGVnb3J5LCB0aGlzLmlkKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHN3aXRjaCAodGhpcy5zdGF0ZSkge1xyXG4gICAgICAgICAgICBjYXNlIE5hdk5vZGVWaXNpdG9yU3RhdGUudmlzaXRpZWRUeXBlZE5vZGU6IHtcclxuICAgICAgICAgICAgICAgIG9uVmlzaXRlZCgpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2FzZSBOYXZOb2RlVmlzaXRvclN0YXRlLnZpc2l0ZWROb3ROb2RlOiB7XHJcbiAgICAgICAgICAgICAgICBvblZpc2l0ZWQoKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBOYXZOb2RlVmlzaXRvclN0YXRlLmVycm9yO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdmlzaXRCYWNrUmVmTmF2KG5vZGU6IEJhY2tSZWZOYXZOb2RlKTogdm9pZCB7XHJcbiAgICAgICAgY29uc3Qgb25WaXNpdGVkID0gKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gTmF2Tm9kZVZpc2l0b3JTdGF0ZS52aXNpdGVkVGVybWluYWxOb2RlO1xyXG4gICAgICAgICAgICB0aGlzLm5hdlBhdHRlcm4gPSBuZXcgQmFja1JlZk5hdlBhdHRlcm4odGhpcy5tb2RpZmllcnMsIHRoaXMubmF2VHlwZSBhcyBOYXZUeXBlLCBub2RlLmJhY2tSZWYsIHRoaXMuaWQpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHN3aXRjaCAodGhpcy5zdGF0ZSkge1xyXG4gICAgICAgICAgICBjYXNlIE5hdk5vZGVWaXNpdG9yU3RhdGUudmlzaXRpZWRUeXBlZE5vZGU6IHtcclxuICAgICAgICAgICAgICAgIG9uVmlzaXRlZCgpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2FzZSBOYXZOb2RlVmlzaXRvclN0YXRlLnZpc2l0ZWROb3ROb2RlOiB7XHJcbiAgICAgICAgICAgICAgICBvblZpc2l0ZWQoKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBOYXZOb2RlVmlzaXRvclN0YXRlLmVycm9yO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdmlzaXROb3ROYXYobm9kZTogTm90TmF2Tm9kZSk6IHZvaWQge1xyXG4gICAgICAgIHN3aXRjaCAodGhpcy5zdGF0ZSkge1xyXG4gICAgICAgICAgICBjYXNlIE5hdk5vZGVWaXNpdG9yU3RhdGUudmlzaXRpZWRUeXBlZE5vZGU6IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBOYXZOb2RlVmlzaXRvclN0YXRlLnZpc2l0ZWROb3ROb2RlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tb2RpZmllcnMgfD0gTmF2TW9kaWZlci5ub3Q7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBkZWZhdWx0OiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRlID0gTmF2Tm9kZVZpc2l0b3JTdGF0ZS5lcnJvcjtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHZpc2l0T3JOYXYobm9kZTogT3JOYXZOb2RlKTogdm9pZCB7XHJcbiAgICAgICAgc3dpdGNoICh0aGlzLnN0YXRlKSB7XHJcbiAgICAgICAgICAgIGNhc2UgTmF2Tm9kZVZpc2l0b3JTdGF0ZS52aXNpdGllZFR5cGVkTm9kZToge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IE5hdk5vZGVWaXNpdG9yU3RhdGUudmlzaXRlZFRlcm1pbmFsTm9kZTtcclxuICAgICAgICAgICAgICAgIHRoaXMubW9kaWZpZXJzIHw9IE5hdk1vZGlmZXIub3I7XHJcbiAgICAgICAgICAgICAgICBsZXQgY2F0ZWdvcmllcyA9IFVybENhdGVnb3J5LnVuY2F0ZWdvcml6ZWRVcmw7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGNhdGVnb3J5IG9mIG5vZGUuY2F0ZWdvcmllcykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhdGVnb3JpZXMgfD0gY2F0ZWdvcnk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLm5hdlBhdHRlcm4gPSBuZXcgQ2F0ZWdvcml6ZWROYXZQYXR0ZXJuKHRoaXMubW9kaWZpZXJzLCB0aGlzLm5hdlR5cGUgYXMgTmF2VHlwZSwgY2F0ZWdvcmllcywgdGhpcy5pZCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBkZWZhdWx0OiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRlID0gTmF2Tm9kZVZpc2l0b3JTdGF0ZS5lcnJvcjtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHZpc2l0Q29udGVudFR5cGVOYXYobm9kZTogQ29udGVudFR5cGVOYXZOb2RlKSB7XHJcbiAgICAgICAgc3dpdGNoICh0aGlzLnN0YXRlKSB7XHJcbiAgICAgICAgICAgIGNhc2UgTmF2Tm9kZVZpc2l0b3JTdGF0ZS52aXNpdGVkTm9Ob2RlOiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRlID0gTmF2Tm9kZVZpc2l0b3JTdGF0ZS52aXNpdGVkVGVybWluYWxOb2RlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5uYXZQYXR0ZXJuID0gbmV3IENvbnRlbnRUeXBlTmF2UGF0dGVybihub2RlLmNvbnRlbnRUeXBlLCB0aGlzLmlkKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBOYXZOb2RlVmlzaXRvclN0YXRlLmVycm9yO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdmlzaXRHcm91cE5hbWVOYXYobm9kZTogR3JvdXBOYW1lTmF2Tm9kZSkge1xyXG4gICAgICAgIHN3aXRjaCAodGhpcy5zdGF0ZSkge1xyXG4gICAgICAgICAgICBjYXNlIE5hdk5vZGVWaXNpdG9yU3RhdGUudmlzaXRpZWRUeXBlZE5vZGU6IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBOYXZOb2RlVmlzaXRvclN0YXRlLnZpc2l0ZWRUZXJtaW5hbE5vZGU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm5hdlBhdHRlcm4gPSBuZXcgR3JvdXBOYXZQYXR0ZXJuKHRoaXMubW9kaWZpZXJzLCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5uYXZUeXBlIGFzIE5hdlR5cGUsIG5vZGUuZ3JvdXBOYW1lLCB0aGlzLmlkKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBOYXZOb2RlVmlzaXRvclN0YXRlLmVycm9yO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdmlzaXQobm9kZTogTmF2Tm9kZSkgOiBNYXliZTxOYXZQYXR0ZXJuPiB7XHJcbiAgICAgICAgbm9kZS52aXNpdCh0aGlzKTtcclxuICAgICAgICBpZiAodGhpcy5zdGF0ZSA9PT0gTmF2Tm9kZVZpc2l0b3JTdGF0ZS5lcnJvcikge1xyXG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5zdGF0ZSAhPT0gTmF2Tm9kZVZpc2l0b3JTdGF0ZS52aXNpdGVkVGVybWluYWxOb2RlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLm5hdlBhdHRlcm47XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzdGF0ZSA9IE5hdk5vZGVWaXNpdG9yU3RhdGUudmlzaXRlZE5vTm9kZTtcclxuICAgIHByaXZhdGUgbW9kaWZpZXJzID0gTmF2TW9kaWZlci5ub01vZGlmaWVyO1xyXG4gICAgcHJpdmF0ZSBuYXZUeXBlOiBNYXliZTxOYXZUeXBlPiA9IHVuZGVmaW5lZDtcclxuICAgIHByaXZhdGUgbmF2UGF0dGVybjogTWF5YmU8TmF2UGF0dGVybj4gPSB1bmRlZmluZWQ7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHBhcnNlTmF2aWdhdGlvbih0b2tlbnM6IFNlcmlhbGl6ZWROYXZpZ2F0aW9uLCBpbmRleDogbnVtYmVyKTogTWF5YmU8TmF2UGF0dGVybj4ge1xyXG4gICAgaWYgKGlzRW1wdHkodG9rZW5zKSkge1xyXG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICB9XHJcbiAgICBjb25zdCBsZXhlZFRva2VuczogW0xleGVkTmF2VG9rZW5UeXBlLCBMZXhlZE5hdlRva2VuXVtdID0gW107XHJcbiAgICBpZiAoIWxleE5hdmlnYXRpb24odG9rZW5zLCBsZXhlZFRva2VucykpIHtcclxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgfVxyXG4gICAgY29uc3Qgbm9kZSA9IHBhcnNlTmF2Tm9kZShsZXhlZFRva2Vucyk7XHJcbiAgICBpZiAobm9uZShub2RlKSkge1xyXG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICB9XHJcbiAgICBjb25zdCBpZCA9IGluZGV4ICsgMTtcclxuICAgIGNvbnN0IHZpc2l0b3IgPSBuZXcgTmF2Tm9kZVZpc2l0b3IoaWQpO1xyXG4gICAgY29uc3QgbmF2aWdhdGlvbiA9IHZpc2l0b3IudmlzaXQobm9kZSk7XHJcbiAgICByZXR1cm4gbmF2aWdhdGlvbjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlTmF2U2VxdWVuY2Uoc2VyaWFsaXplZE5hdlNlcXVlbmNlOiBTZXJpYWxpemVkTmF2aWdhdGlvbltdKTogTWF5YmU8TmF2UGF0dGVyblNlcXVlbmNlPiB7XHJcbiAgICBjb25zdCBwYXJzZWROYXZTZXF1ZW5jZSA9IHNlcmlhbGl6ZWROYXZTZXF1ZW5jZS5tYXAocGFyc2VOYXZpZ2F0aW9uKTtcclxuICAgIGlmIChwYXJzZWROYXZTZXF1ZW5jZS5zb21lKG5vbmUpKSB7XHJcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgIH1cclxuICAgIGNvbnN0IG5hdlNlcXVlbmNlID0gcGFyc2VkTmF2U2VxdWVuY2UuZmlsdGVyKHNvbWUpO1xyXG4gICAgcmV0dXJuIG5hdlNlcXVlbmNlO1xyXG59XHJcblxyXG5leHBvcnQgdHlwZSBOYXZNZXRhZGF0YSA9IFNlcmlhbGl6ZWROYXZNZXRhZGF0YTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZU5hdk1ldGFkYXRhKHNlcmlhbGl6ZWROYXZNZXRhZGF0YTogU2VyaWFsaXplZE5hdk1ldGFkYXRhKTogTWF5YmU8TmF2TWV0YWRhdGE+IHtcclxuICAgIGlmIChub25lKHNlcmlhbGl6ZWROYXZNZXRhZGF0YS5wcmVjZWRlbmNlKSkge1xyXG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICB9XHJcbiAgICBpZiAobm9uZShzZXJpYWxpemVkTmF2TWV0YWRhdGEuYWxsb3cpICYmIG5vbmUoc2VyaWFsaXplZE5hdk1ldGFkYXRhLmJsb2NrKSkge1xyXG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICB9XHJcbiAgICBpZiAobm9uZShzZXJpYWxpemVkTmF2TWV0YWRhdGEubmF2aWdhdGVUbykpIHtcclxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHNlcmlhbGl6ZWROYXZNZXRhZGF0YTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlTmF2U2VxRGF0YShzZXJpYWxpemVkTmF2U2VxRGF0YTogU2VyaWFsaXplZE5hdlNlcURhdGEpOiBNYXliZTxbTmF2UGF0dGVyblNlcXVlbmNlLCBOYXZNZXRhZGF0YV0+IHtcclxuICAgIGNvbnN0IHBhcnNlZE5hdlNlcXVlbmNlID0gcGFyc2VOYXZTZXF1ZW5jZShzZXJpYWxpemVkTmF2U2VxRGF0YS5zZXEpO1xyXG4gICAgaWYgKG5vbmUocGFyc2VkTmF2U2VxdWVuY2UpKSB7XHJcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgIH1cclxuICAgIGNvbnN0IHBhcnNlZE5hdk1ldGFkYXRhID0gcGFyc2VOYXZNZXRhZGF0YShzZXJpYWxpemVkTmF2U2VxRGF0YS5tZXRhZGF0YSk7XHJcbiAgICBpZiAobm9uZShwYXJzZWROYXZNZXRhZGF0YSkpIHtcclxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIFtwYXJzZWROYXZTZXF1ZW5jZSwgcGFyc2VkTmF2TWV0YWRhdGFdO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY2hlY2tWZXJzaW9uKHNlcmlhbGl6ZWRQaGlzaGluZ05hdlNlcURhdGE6IFNlcmlhbGl6ZWRQaGlzaGluZ05hdlNlcURhdGEsIGV4cGVjdGVkVmVyc2lvbjogVmVyc2lvbik6IGJvb2xlYW4ge1xyXG4gICAgY29uc3QgaXNWYWxpZFZlcnNpb24gPSAoc2VyaWFsaXplZFBoaXNoaW5nTmF2U2VxRGF0YS52ZXJzaW9uID09PSBleHBlY3RlZFZlcnNpb24pO1xyXG4gICAgaWYgKCFpc1ZhbGlkVmVyc2lvbikge1xyXG4gICAgICAgIGxvZ0Vycm9yKG5ldyBFcnJvcihgU2VyaWFsaXplZFBoaXNoaW5nTmF2U2VxRGF0YSB2ZXJzaW9uIGNoZWNrIGZhaWxlZC4gJHt0b1N0cmluZyh7XHJcbiAgICAgICAgICAgIHZlcnNpb246IHNlcmlhbGl6ZWRQaGlzaGluZ05hdlNlcURhdGEudmVyc2lvbixcclxuICAgICAgICAgICAgZXhwZWN0ZWRWZXJzaW9uOiBleHBlY3RlZFZlcnNpb25cclxuICAgICAgICB9KX1gKSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gaXNWYWxpZFZlcnNpb247XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBpc1ZhbGlkU2VyaWFsaXplZFBoaXNoaW5nTmF2U2VxRGF0YShzZXJpYWxpemVkUGhpc2hpbmdOYXZTZXFEYXRhOiBTZXJpYWxpemVkUGhpc2hpbmdOYXZTZXFEYXRhKTogYm9vbGVhbiB7XHJcbiAgICBpZiAobm9uZShzZXJpYWxpemVkUGhpc2hpbmdOYXZTZXFEYXRhLnZlcnNpb24pKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgaWYgKG5vbmUoc2VyaWFsaXplZFBoaXNoaW5nTmF2U2VxRGF0YS5idWlsdGluUnVsZXNQcmVjZWRlbmNlKSkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIGlmIChub25lKHNlcmlhbGl6ZWRQaGlzaGluZ05hdlNlcURhdGEuc2VxcykpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxufVxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL25hdi1zZXF1ZW5jZS1wYXJzZXIudHMiLCIvLyBDb3B5cmlnaHQgKGMpIDIwMTggQnJvbWl1bSwgSW5jLlxyXG4vLyBVc2Ugb2YgdGhlIEJyb21pdW0sIEluYy4gc29mdHdhcmUgcmVxdWlyZXMgYSBsaWNlbnNlIGFncmVlbWVudCB3aXRoIEJyb21pdW0sIEluYy4gb3IgYW4gYXV0aG9yaXplZCByZXNlbGxlci5cclxuXHJcbmltcG9ydCB7IE1heWJlLCBzb21lIH0gZnJvbSBcIi4vbWF5YmVcIjtcclxuXHJcbmV4cG9ydCBlbnVtIENvbnRlbnRUeXBlIHtcclxuICAgIHBkZiA9IDB4MSxcclxufVxyXG5cclxuZW51bSBDb250ZW50VHlwZUtleSB7XHJcbiAgICBwZGYgPSBcImFwcGxpY2F0aW9uL3BkZlwiXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUNvbnRlbnRUeXBlKGNvbnRlbnRUeXBlS2V5OiBzdHJpbmcpOiBNYXliZTxDb250ZW50VHlwZT4ge1xyXG4gICAgY29uc3QgY29udGVudFR5cGVLZXlMb3dlciA9IGNvbnRlbnRUeXBlS2V5LnRvTG93ZXJDYXNlKCk7XHJcbiAgICAvLyBEZWFsIHdpdGggY29udGVudCB0eXBlcyBsaWtlIFwiYXBwbGljYXRpb24vcGRmOyBjaGFyc2V0PXV0Zi04XCJcclxuICAgIGlmIChjb250ZW50VHlwZUtleUxvd2VyLnN0YXJ0c1dpdGgoQ29udGVudFR5cGVLZXkucGRmLnRvTG93ZXJDYXNlKCkpKSB7XHJcbiAgICAgICAgcmV0dXJuIENvbnRlbnRUeXBlLnBkZjtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlUmF3Q29udGVudFR5cGUocmF3Q29udGVudFR5cGU6IE1heWJlPHN0cmluZz4pOiBNYXliZTxDb250ZW50VHlwZT4ge1xyXG4gICAgcmV0dXJuIHNvbWUocmF3Q29udGVudFR5cGUpID8gcGFyc2VDb250ZW50VHlwZShyYXdDb250ZW50VHlwZSk6IHVuZGVmaW5lZDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNvbnRlbnRUeXBlVG9TdHJpbmcoY29udGVudFR5cGU6IENvbnRlbnRUeXBlKTogc3RyaW5nIHtcclxuICAgIHN3aXRjaCAoY29udGVudFR5cGUpIHtcclxuICAgICAgICBjYXNlIENvbnRlbnRUeXBlLnBkZjpcclxuICAgICAgICAgICAgcmV0dXJuIENvbnRlbnRUeXBlS2V5LnBkZjtcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICByZXR1cm4gYFVua25vd24gQ29udGVudFR5cGU6ICR7Y29udGVudFR5cGV9YDtcclxuICAgIH1cclxufVxyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi4vbGliL2NvbW1vbi9jb250ZW50LXR5cGUudHMiLCJpbXBvcnQgeyBFdmVudERpc3BhdGNoZXIgfSBmcm9tIFwiLi9ldmVudC1kaXNwYXRjaGVyXCI7XHJcblxyXG5leHBvcnQgZW51bSBDb25uZWN0aW9uU3RhdGUge1xyXG4gICAgQ29ubmVjdGluZyxcclxuICAgIEhhbmRzaGFraW5nLFxyXG4gICAgQ29ubmVjdGVkLFxyXG4gICAgRGlzY29ubmVjdGluZyxcclxuICAgIERpc2Nvbm5lY3RlZFxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgQ29ubmVjdGlvblN0YXRlQ2hhbmdlZEV2ZW50IHtcclxuICAgIGNvbnN0cnVjdG9yKHJlYWRvbmx5IG9sZFN0YXRlOiBDb25uZWN0aW9uU3RhdGUsIHJlYWRvbmx5IG5ld1N0YXRlOiBDb25uZWN0aW9uU3RhdGUpIHt9XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSUNvbm5lY3Rpb24ge1xyXG4gICAgcmVhZG9ubHkgb25Db25uZWN0aW9uU3RhdGVDaGFuZ2VkOiBFdmVudERpc3BhdGNoZXI8Q29ubmVjdGlvblN0YXRlQ2hhbmdlZEV2ZW50PjtcclxuICAgIHJlYWRvbmx5IGNvbm5lY3Rpb25TdGF0ZTogQ29ubmVjdGlvblN0YXRlO1xyXG59XHJcblxyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi4vbGliL2NvbW1vbi9jb25uZWN0aW9uLnRzIiwiLy8gQ29weXJpZ2h0IChjKSAyMDE4IEJyb21pdW0sIEluYy5cclxuLy8gVXNlIG9mIHRoZSBCcm9taXVtLCBJbmMuIHNvZnR3YXJlIHJlcXVpcmVzIGEgbGljZW5zZSBhZ3JlZW1lbnQgd2l0aCBCcm9taXVtLCBJbmMuIG9yIGFuIGF1dGhvcml6ZWQgcmVzZWxsZXIuXHJcblxyXG5pbXBvcnQgeyBNYXliZSwgbm9uZSB9IGZyb20gXCIuL21heWJlXCI7XHJcbmltcG9ydCB7IEhhc2ggfSBmcm9tIFwiLi9oYXNoXCI7XHJcbmltcG9ydCB7IEhhc2hNYXAgfSBmcm9tIFwiLi9oYXNoLW1hcFwiO1xyXG5pbXBvcnQgeyBSZXNvbHZlciwgbWFrZVByb21pc2VBc3luYyB9IGZyb20gXCIuL3Byb21pc2UtdXRpbHNcIjtcclxuaW1wb3J0IHsgVVJMLCBwYXJzZVVybCB9IGZyb20gXCIuL3VybC11dGlsc1wiO1xyXG5pbXBvcnQgeyBUYWJJZCB9IGZyb20gXCIuL2NvbW1vbi10eXBlc1wiO1xyXG5pbXBvcnQgeyByZWFkUG9ydFBhZ2VVcmwsIHJlYWRQb3J0VGFiSWQgfSBmcm9tIFwiLi9wb3J0LXV0aWxzXCI7XHJcbmltcG9ydCB7IGNvbXBhcmVTdHJpbmdzIH0gZnJvbSBcIi4vc3RyaW5nLXV0aWxzXCI7XHJcbmltcG9ydCB7IEJyb3dzZXIgfSBmcm9tIFwiLi9icm93c2VyXCI7XHJcblxyXG5leHBvcnQgdHlwZSBJc1BhZ2VVUkwgPSAodXJsOiBVUkwpID0+IGJvb2xlYW47XHJcbmV4cG9ydCB0eXBlIE9uVW5yZXNvbHZlZFBhZ2VQb3J0Q29ubmVjdGVkID0gKHRhYklkOiBUYWJJZCwgcG9ydDogY2hyb21lLnJ1bnRpbWUuUG9ydCkgPT4gdm9pZDtcclxuXHJcbmV4cG9ydCBjbGFzcyBQYWdlUG9ydFJlc29sdmVyIHtcclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgICAgICBwcml2YXRlIHBvcnROYW1lOiBzdHJpbmcsXHJcbiAgICAgICAgICAgIHByaXZhdGUgb25VbnJlc29sdmVkUG9ydENvbm5lY3RlZDogT25VbnJlc29sdmVkUGFnZVBvcnRDb25uZWN0ZWQsXHJcbiAgICAgICAgICAgIHByaXZhdGUgaXNQYWdlVVJMOiBJc1BhZ2VVUkwsXHJcbiAgICAgICAgICAgIHByaXZhdGUgY2hlY2tQYWdlVVJMOiBib29sZWFuID0gdHJ1ZSkge1xyXG4gICAgICAgIGNocm9tZS5ydW50aW1lLm9uQ29ubmVjdC5hZGRMaXN0ZW5lcihcclxuICAgICAgICAgICAgICAgIHRoaXMub25Qb3J0Q29ubmVjdGVkLmJpbmQodGhpcykpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgb25Qb3J0Q29ubmVjdGVkKHBvcnQ6IGNocm9tZS5ydW50aW1lLlBvcnQpIHtcclxuICAgICAgICBpZiAoIWNvbXBhcmVTdHJpbmdzKHBvcnQubmFtZSwgdGhpcy5wb3J0TmFtZSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5jaGVja1BhZ2VVUkwpIHtcclxuICAgICAgICAgICAgY29uc3QgdXJsID0gcmVhZFBvcnRQYWdlVXJsKHBvcnQpO1xyXG4gICAgICAgICAgICBpZiAobm9uZSh1cmwpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKCF0aGlzLmlzUGFnZVVSTCh1cmwpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgdGFiSWQgPSByZWFkUG9ydFRhYklkKHBvcnQpO1xyXG4gICAgICAgIGlmIChub25lKHRhYklkKSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHJlc29sdmUgPSB0aGlzLnJlc29sdmVycy5nZXQodGFiSWQpO1xyXG4gICAgICAgIGlmIChub25lKHJlc29sdmUpKSB7XHJcbiAgICAgICAgICAgIHRoaXMub25VbnJlc29sdmVkUG9ydENvbm5lY3RlZCh0YWJJZCwgcG9ydCk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5yZXNvbHZlcnMuZGVsZXRlKHRhYklkKTtcclxuICAgICAgICByZXNvbHZlKHBvcnQpO1xyXG4gICAgfVxyXG5cclxuICAgIHJlc29sdmVQb3J0KHRhYklkOiBUYWJJZCk6IFByb21pc2U8Y2hyb21lLnJ1bnRpbWUuUG9ydD4ge1xyXG4gICAgICAgIHJldHVybiBtYWtlUHJvbWlzZUFzeW5jKChyZXNvbHZlKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMucmVzb2x2ZXJzLnNldCh0YWJJZCwgcmVzb2x2ZSk7XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHJlc29sdmVycyA9IG5ldyBNYXA8VGFiSWQsIFJlc29sdmVyPGNocm9tZS5ydW50aW1lLlBvcnQ+PigpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0QnJvd3NlclNwZWNpZmljRXh0ZW5zaW9uUGFnZVBvcnRSZXNvbHZlcihcclxuICAgICAgICBicm93c2VyOiBNYXliZTxCcm93c2VyPixcclxuICAgICAgICBwb3J0TmFtZTogc3RyaW5nLFxyXG4gICAgICAgIG9uVW5yZXNvbHZlZFBvcnRDb25uZWN0ZWQ6IE9uVW5yZXNvbHZlZFBhZ2VQb3J0Q29ubmVjdGVkLFxyXG4gICAgICAgIGlzUGFnZVVSTDogSXNQYWdlVVJMKSB7XHJcbiAgICAvLyBJbiBFZGdlIHBvcnQuc2VuZGVyLnVybCBpcyBtaXNzaW5nIHdoZW4gdGhlIG1lc3NhZ2UgaXMgc2VudCBmcm9tIGFuXHJcbiAgICAvLyBleHRlbnNpb24gdmlldyAoc3VjaCBhcyB0aGUgYmxvY2tlZCBwYWdlKS4gSGVuY2UgY3JlYXRlIGEgcGFnZSBwb3J0XHJcbiAgICAvLyByZXNvbHZlciB3aGljaCBkb2Vzbid0IGNoZWNrIHRoZSBwYWdlIFVSTC4gSWYgd2UgZG9uJ3Qga25vdyB0aGVcclxuICAgIC8vIGJyb3dzZXIgdGhlbiBjcmVhdGUgYSBwYWdlIHBvcnQgcmVzb2x2ZXIgd2hpY2ggd29ya3MgZm9yIHRoZW0gYWxsLlxyXG4gICAgaWYgKGJyb3dzZXIgPT09IEJyb3dzZXIuZWRnZSB8fCBub25lKGJyb3dzZXIpKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQYWdlUG9ydFJlc29sdmVyKFxyXG4gICAgICAgICAgICBwb3J0TmFtZSwgXHJcbiAgICAgICAgICAgIG9uVW5yZXNvbHZlZFBvcnRDb25uZWN0ZWQsXHJcbiAgICAgICAgICAgICh1cmwpID0+IHsgcmV0dXJuIGZhbHNlOyB9LFxyXG4gICAgICAgICAgICBmYWxzZSk7XHJcbiAgICAvLyBJZiB3ZSBrbm93IHBvcnQuc2VuZGVyLnVybCB3aWxsIGJlIGRlZmluZWQgdGhlbiBjcmVhdGUgYSBub3JtYWwgcGFnZVxyXG4gICAgLy8gcG9ydCByZXNvbHZlciB3aGljaCBjaGVja3MgdGhlIHBhZ2UgVVJMLlxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gbmV3IFBhZ2VQb3J0UmVzb2x2ZXIoXHJcbiAgICAgICAgICAgIHBvcnROYW1lLCBcclxuICAgICAgICAgICAgb25VbnJlc29sdmVkUG9ydENvbm5lY3RlZCxcclxuICAgICAgICAgICAgaXNQYWdlVVJMKTtcclxuICAgIH1cclxufVxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuLi9saWIvY29tbW9uL3BhZ2UtcG9ydC1yZXNvbHZlci50cyIsIi8vIENvcHlyaWdodCAoYykgMjAxOCBCcm9taXVtLCBJbmMuXHJcbi8vIFVzZSBvZiB0aGUgQnJvbWl1bSwgSW5jLiBzb2Z0d2FyZSByZXF1aXJlcyBhIGxpY2Vuc2UgYWdyZWVtZW50IHdpdGggQnJvbWl1bSwgSW5jLiBvciBhbiBhdXRob3JpemVkIHJlc2VsbGVyLlxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGN1cnJlbnREYXRlVGltZVN0cmluZygpOiBzdHJpbmcge1xyXG4gICAgcmV0dXJuIG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcclxufVxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuLi9saWIvY29tbW9uL2RhdGUtdXRpbHMudHMiLCIvLyBDb3B5cmlnaHQgSm95ZW50LCBJbmMuIGFuZCBvdGhlciBOb2RlIGNvbnRyaWJ1dG9ycy5cbi8vXG4vLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYVxuLy8gY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZVxuLy8gXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nXG4vLyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsXG4vLyBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0XG4vLyBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGVcbi8vIGZvbGxvd2luZyBjb25kaXRpb25zOlxuLy9cbi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkXG4vLyBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbi8vXG4vLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTXG4vLyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GXG4vLyBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOXG4vLyBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSxcbi8vIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUlxuLy8gT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRVxuLy8gVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cblxuJ3VzZSBzdHJpY3QnO1xuXG4vKjxyZXBsYWNlbWVudD4qL1xuXG52YXIgcHJvY2Vzc05leHRUaWNrID0gcmVxdWlyZSgncHJvY2Vzcy1uZXh0aWNrLWFyZ3MnKTtcbi8qPC9yZXBsYWNlbWVudD4qL1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWRhYmxlO1xuXG4vKjxyZXBsYWNlbWVudD4qL1xudmFyIGlzQXJyYXkgPSByZXF1aXJlKCdpc2FycmF5Jyk7XG4vKjwvcmVwbGFjZW1lbnQ+Ki9cblxuLyo8cmVwbGFjZW1lbnQ+Ki9cbnZhciBEdXBsZXg7XG4vKjwvcmVwbGFjZW1lbnQ+Ki9cblxuUmVhZGFibGUuUmVhZGFibGVTdGF0ZSA9IFJlYWRhYmxlU3RhdGU7XG5cbi8qPHJlcGxhY2VtZW50PiovXG52YXIgRUUgPSByZXF1aXJlKCdldmVudHMnKS5FdmVudEVtaXR0ZXI7XG5cbnZhciBFRWxpc3RlbmVyQ291bnQgPSBmdW5jdGlvbiAoZW1pdHRlciwgdHlwZSkge1xuICByZXR1cm4gZW1pdHRlci5saXN0ZW5lcnModHlwZSkubGVuZ3RoO1xufTtcbi8qPC9yZXBsYWNlbWVudD4qL1xuXG4vKjxyZXBsYWNlbWVudD4qL1xudmFyIFN0cmVhbSA9IHJlcXVpcmUoJy4vaW50ZXJuYWwvc3RyZWFtcy9zdHJlYW0nKTtcbi8qPC9yZXBsYWNlbWVudD4qL1xuXG4vLyBUT0RPKGJtZXVyZXIpOiBDaGFuZ2UgdGhpcyBiYWNrIHRvIGNvbnN0IG9uY2UgaG9sZSBjaGVja3MgYXJlXG4vLyBwcm9wZXJseSBvcHRpbWl6ZWQgYXdheSBlYXJseSBpbiBJZ25pdGlvbitUdXJib0Zhbi5cbi8qPHJlcGxhY2VtZW50PiovXG52YXIgQnVmZmVyID0gcmVxdWlyZSgnc2FmZS1idWZmZXInKS5CdWZmZXI7XG52YXIgT3VyVWludDhBcnJheSA9IGdsb2JhbC5VaW50OEFycmF5IHx8IGZ1bmN0aW9uICgpIHt9O1xuZnVuY3Rpb24gX3VpbnQ4QXJyYXlUb0J1ZmZlcihjaHVuaykge1xuICByZXR1cm4gQnVmZmVyLmZyb20oY2h1bmspO1xufVxuZnVuY3Rpb24gX2lzVWludDhBcnJheShvYmopIHtcbiAgcmV0dXJuIEJ1ZmZlci5pc0J1ZmZlcihvYmopIHx8IG9iaiBpbnN0YW5jZW9mIE91clVpbnQ4QXJyYXk7XG59XG4vKjwvcmVwbGFjZW1lbnQ+Ki9cblxuLyo8cmVwbGFjZW1lbnQ+Ki9cbnZhciB1dGlsID0gcmVxdWlyZSgnY29yZS11dGlsLWlzJyk7XG51dGlsLmluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKTtcbi8qPC9yZXBsYWNlbWVudD4qL1xuXG4vKjxyZXBsYWNlbWVudD4qL1xudmFyIGRlYnVnVXRpbCA9IHJlcXVpcmUoJ3V0aWwnKTtcbnZhciBkZWJ1ZyA9IHZvaWQgMDtcbmlmIChkZWJ1Z1V0aWwgJiYgZGVidWdVdGlsLmRlYnVnbG9nKSB7XG4gIGRlYnVnID0gZGVidWdVdGlsLmRlYnVnbG9nKCdzdHJlYW0nKTtcbn0gZWxzZSB7XG4gIGRlYnVnID0gZnVuY3Rpb24gKCkge307XG59XG4vKjwvcmVwbGFjZW1lbnQ+Ki9cblxudmFyIEJ1ZmZlckxpc3QgPSByZXF1aXJlKCcuL2ludGVybmFsL3N0cmVhbXMvQnVmZmVyTGlzdCcpO1xudmFyIGRlc3Ryb3lJbXBsID0gcmVxdWlyZSgnLi9pbnRlcm5hbC9zdHJlYW1zL2Rlc3Ryb3knKTtcbnZhciBTdHJpbmdEZWNvZGVyO1xuXG51dGlsLmluaGVyaXRzKFJlYWRhYmxlLCBTdHJlYW0pO1xuXG52YXIga1Byb3h5RXZlbnRzID0gWydlcnJvcicsICdjbG9zZScsICdkZXN0cm95JywgJ3BhdXNlJywgJ3Jlc3VtZSddO1xuXG5mdW5jdGlvbiBwcmVwZW5kTGlzdGVuZXIoZW1pdHRlciwgZXZlbnQsIGZuKSB7XG4gIC8vIFNhZGx5IHRoaXMgaXMgbm90IGNhY2hlYWJsZSBhcyBzb21lIGxpYnJhcmllcyBidW5kbGUgdGhlaXIgb3duXG4gIC8vIGV2ZW50IGVtaXR0ZXIgaW1wbGVtZW50YXRpb24gd2l0aCB0aGVtLlxuICBpZiAodHlwZW9mIGVtaXR0ZXIucHJlcGVuZExpc3RlbmVyID09PSAnZnVuY3Rpb24nKSB7XG4gICAgcmV0dXJuIGVtaXR0ZXIucHJlcGVuZExpc3RlbmVyKGV2ZW50LCBmbik7XG4gIH0gZWxzZSB7XG4gICAgLy8gVGhpcyBpcyBhIGhhY2sgdG8gbWFrZSBzdXJlIHRoYXQgb3VyIGVycm9yIGhhbmRsZXIgaXMgYXR0YWNoZWQgYmVmb3JlIGFueVxuICAgIC8vIHVzZXJsYW5kIG9uZXMuICBORVZFUiBETyBUSElTLiBUaGlzIGlzIGhlcmUgb25seSBiZWNhdXNlIHRoaXMgY29kZSBuZWVkc1xuICAgIC8vIHRvIGNvbnRpbnVlIHRvIHdvcmsgd2l0aCBvbGRlciB2ZXJzaW9ucyBvZiBOb2RlLmpzIHRoYXQgZG8gbm90IGluY2x1ZGVcbiAgICAvLyB0aGUgcHJlcGVuZExpc3RlbmVyKCkgbWV0aG9kLiBUaGUgZ29hbCBpcyB0byBldmVudHVhbGx5IHJlbW92ZSB0aGlzIGhhY2suXG4gICAgaWYgKCFlbWl0dGVyLl9ldmVudHMgfHwgIWVtaXR0ZXIuX2V2ZW50c1tldmVudF0pIGVtaXR0ZXIub24oZXZlbnQsIGZuKTtlbHNlIGlmIChpc0FycmF5KGVtaXR0ZXIuX2V2ZW50c1tldmVudF0pKSBlbWl0dGVyLl9ldmVudHNbZXZlbnRdLnVuc2hpZnQoZm4pO2Vsc2UgZW1pdHRlci5fZXZlbnRzW2V2ZW50XSA9IFtmbiwgZW1pdHRlci5fZXZlbnRzW2V2ZW50XV07XG4gIH1cbn1cblxuZnVuY3Rpb24gUmVhZGFibGVTdGF0ZShvcHRpb25zLCBzdHJlYW0pIHtcbiAgRHVwbGV4ID0gRHVwbGV4IHx8IHJlcXVpcmUoJy4vX3N0cmVhbV9kdXBsZXgnKTtcblxuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblxuICAvLyBvYmplY3Qgc3RyZWFtIGZsYWcuIFVzZWQgdG8gbWFrZSByZWFkKG4pIGlnbm9yZSBuIGFuZCB0b1xuICAvLyBtYWtlIGFsbCB0aGUgYnVmZmVyIG1lcmdpbmcgYW5kIGxlbmd0aCBjaGVja3MgZ28gYXdheVxuICB0aGlzLm9iamVjdE1vZGUgPSAhIW9wdGlvbnMub2JqZWN0TW9kZTtcblxuICBpZiAoc3RyZWFtIGluc3RhbmNlb2YgRHVwbGV4KSB0aGlzLm9iamVjdE1vZGUgPSB0aGlzLm9iamVjdE1vZGUgfHwgISFvcHRpb25zLnJlYWRhYmxlT2JqZWN0TW9kZTtcblxuICAvLyB0aGUgcG9pbnQgYXQgd2hpY2ggaXQgc3RvcHMgY2FsbGluZyBfcmVhZCgpIHRvIGZpbGwgdGhlIGJ1ZmZlclxuICAvLyBOb3RlOiAwIGlzIGEgdmFsaWQgdmFsdWUsIG1lYW5zIFwiZG9uJ3QgY2FsbCBfcmVhZCBwcmVlbXB0aXZlbHkgZXZlclwiXG4gIHZhciBod20gPSBvcHRpb25zLmhpZ2hXYXRlck1hcms7XG4gIHZhciBkZWZhdWx0SHdtID0gdGhpcy5vYmplY3RNb2RlID8gMTYgOiAxNiAqIDEwMjQ7XG4gIHRoaXMuaGlnaFdhdGVyTWFyayA9IGh3bSB8fCBod20gPT09IDAgPyBod20gOiBkZWZhdWx0SHdtO1xuXG4gIC8vIGNhc3QgdG8gaW50cy5cbiAgdGhpcy5oaWdoV2F0ZXJNYXJrID0gTWF0aC5mbG9vcih0aGlzLmhpZ2hXYXRlck1hcmspO1xuXG4gIC8vIEEgbGlua2VkIGxpc3QgaXMgdXNlZCB0byBzdG9yZSBkYXRhIGNodW5rcyBpbnN0ZWFkIG9mIGFuIGFycmF5IGJlY2F1c2UgdGhlXG4gIC8vIGxpbmtlZCBsaXN0IGNhbiByZW1vdmUgZWxlbWVudHMgZnJvbSB0aGUgYmVnaW5uaW5nIGZhc3RlciB0aGFuXG4gIC8vIGFycmF5LnNoaWZ0KClcbiAgdGhpcy5idWZmZXIgPSBuZXcgQnVmZmVyTGlzdCgpO1xuICB0aGlzLmxlbmd0aCA9IDA7XG4gIHRoaXMucGlwZXMgPSBudWxsO1xuICB0aGlzLnBpcGVzQ291bnQgPSAwO1xuICB0aGlzLmZsb3dpbmcgPSBudWxsO1xuICB0aGlzLmVuZGVkID0gZmFsc2U7XG4gIHRoaXMuZW5kRW1pdHRlZCA9IGZhbHNlO1xuICB0aGlzLnJlYWRpbmcgPSBmYWxzZTtcblxuICAvLyBhIGZsYWcgdG8gYmUgYWJsZSB0byB0ZWxsIGlmIHRoZSBldmVudCAncmVhZGFibGUnLydkYXRhJyBpcyBlbWl0dGVkXG4gIC8vIGltbWVkaWF0ZWx5LCBvciBvbiBhIGxhdGVyIHRpY2suICBXZSBzZXQgdGhpcyB0byB0cnVlIGF0IGZpcnN0LCBiZWNhdXNlXG4gIC8vIGFueSBhY3Rpb25zIHRoYXQgc2hvdWxkbid0IGhhcHBlbiB1bnRpbCBcImxhdGVyXCIgc2hvdWxkIGdlbmVyYWxseSBhbHNvXG4gIC8vIG5vdCBoYXBwZW4gYmVmb3JlIHRoZSBmaXJzdCByZWFkIGNhbGwuXG4gIHRoaXMuc3luYyA9IHRydWU7XG5cbiAgLy8gd2hlbmV2ZXIgd2UgcmV0dXJuIG51bGwsIHRoZW4gd2Ugc2V0IGEgZmxhZyB0byBzYXlcbiAgLy8gdGhhdCB3ZSdyZSBhd2FpdGluZyBhICdyZWFkYWJsZScgZXZlbnQgZW1pc3Npb24uXG4gIHRoaXMubmVlZFJlYWRhYmxlID0gZmFsc2U7XG4gIHRoaXMuZW1pdHRlZFJlYWRhYmxlID0gZmFsc2U7XG4gIHRoaXMucmVhZGFibGVMaXN0ZW5pbmcgPSBmYWxzZTtcbiAgdGhpcy5yZXN1bWVTY2hlZHVsZWQgPSBmYWxzZTtcblxuICAvLyBoYXMgaXQgYmVlbiBkZXN0cm95ZWRcbiAgdGhpcy5kZXN0cm95ZWQgPSBmYWxzZTtcblxuICAvLyBDcnlwdG8gaXMga2luZCBvZiBvbGQgYW5kIGNydXN0eS4gIEhpc3RvcmljYWxseSwgaXRzIGRlZmF1bHQgc3RyaW5nXG4gIC8vIGVuY29kaW5nIGlzICdiaW5hcnknIHNvIHdlIGhhdmUgdG8gbWFrZSB0aGlzIGNvbmZpZ3VyYWJsZS5cbiAgLy8gRXZlcnl0aGluZyBlbHNlIGluIHRoZSB1bml2ZXJzZSB1c2VzICd1dGY4JywgdGhvdWdoLlxuICB0aGlzLmRlZmF1bHRFbmNvZGluZyA9IG9wdGlvbnMuZGVmYXVsdEVuY29kaW5nIHx8ICd1dGY4JztcblxuICAvLyB0aGUgbnVtYmVyIG9mIHdyaXRlcnMgdGhhdCBhcmUgYXdhaXRpbmcgYSBkcmFpbiBldmVudCBpbiAucGlwZSgpc1xuICB0aGlzLmF3YWl0RHJhaW4gPSAwO1xuXG4gIC8vIGlmIHRydWUsIGEgbWF5YmVSZWFkTW9yZSBoYXMgYmVlbiBzY2hlZHVsZWRcbiAgdGhpcy5yZWFkaW5nTW9yZSA9IGZhbHNlO1xuXG4gIHRoaXMuZGVjb2RlciA9IG51bGw7XG4gIHRoaXMuZW5jb2RpbmcgPSBudWxsO1xuICBpZiAob3B0aW9ucy5lbmNvZGluZykge1xuICAgIGlmICghU3RyaW5nRGVjb2RlcikgU3RyaW5nRGVjb2RlciA9IHJlcXVpcmUoJ3N0cmluZ19kZWNvZGVyLycpLlN0cmluZ0RlY29kZXI7XG4gICAgdGhpcy5kZWNvZGVyID0gbmV3IFN0cmluZ0RlY29kZXIob3B0aW9ucy5lbmNvZGluZyk7XG4gICAgdGhpcy5lbmNvZGluZyA9IG9wdGlvbnMuZW5jb2Rpbmc7XG4gIH1cbn1cblxuZnVuY3Rpb24gUmVhZGFibGUob3B0aW9ucykge1xuICBEdXBsZXggPSBEdXBsZXggfHwgcmVxdWlyZSgnLi9fc3RyZWFtX2R1cGxleCcpO1xuXG4gIGlmICghKHRoaXMgaW5zdGFuY2VvZiBSZWFkYWJsZSkpIHJldHVybiBuZXcgUmVhZGFibGUob3B0aW9ucyk7XG5cbiAgdGhpcy5fcmVhZGFibGVTdGF0ZSA9IG5ldyBSZWFkYWJsZVN0YXRlKG9wdGlvbnMsIHRoaXMpO1xuXG4gIC8vIGxlZ2FjeVxuICB0aGlzLnJlYWRhYmxlID0gdHJ1ZTtcblxuICBpZiAob3B0aW9ucykge1xuICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5yZWFkID09PSAnZnVuY3Rpb24nKSB0aGlzLl9yZWFkID0gb3B0aW9ucy5yZWFkO1xuXG4gICAgaWYgKHR5cGVvZiBvcHRpb25zLmRlc3Ryb3kgPT09ICdmdW5jdGlvbicpIHRoaXMuX2Rlc3Ryb3kgPSBvcHRpb25zLmRlc3Ryb3k7XG4gIH1cblxuICBTdHJlYW0uY2FsbCh0aGlzKTtcbn1cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KFJlYWRhYmxlLnByb3RvdHlwZSwgJ2Rlc3Ryb3llZCcsIHtcbiAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHRoaXMuX3JlYWRhYmxlU3RhdGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fcmVhZGFibGVTdGF0ZS5kZXN0cm95ZWQ7XG4gIH0sXG4gIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgLy8gd2UgaWdub3JlIHRoZSB2YWx1ZSBpZiB0aGUgc3RyZWFtXG4gICAgLy8gaGFzIG5vdCBiZWVuIGluaXRpYWxpemVkIHlldFxuICAgIGlmICghdGhpcy5fcmVhZGFibGVTdGF0ZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIGJhY2t3YXJkIGNvbXBhdGliaWxpdHksIHRoZSB1c2VyIGlzIGV4cGxpY2l0bHlcbiAgICAvLyBtYW5hZ2luZyBkZXN0cm95ZWRcbiAgICB0aGlzLl9yZWFkYWJsZVN0YXRlLmRlc3Ryb3llZCA9IHZhbHVlO1xuICB9XG59KTtcblxuUmVhZGFibGUucHJvdG90eXBlLmRlc3Ryb3kgPSBkZXN0cm95SW1wbC5kZXN0cm95O1xuUmVhZGFibGUucHJvdG90eXBlLl91bmRlc3Ryb3kgPSBkZXN0cm95SW1wbC51bmRlc3Ryb3k7XG5SZWFkYWJsZS5wcm90b3R5cGUuX2Rlc3Ryb3kgPSBmdW5jdGlvbiAoZXJyLCBjYikge1xuICB0aGlzLnB1c2gobnVsbCk7XG4gIGNiKGVycik7XG59O1xuXG4vLyBNYW51YWxseSBzaG92ZSBzb21ldGhpbmcgaW50byB0aGUgcmVhZCgpIGJ1ZmZlci5cbi8vIFRoaXMgcmV0dXJucyB0cnVlIGlmIHRoZSBoaWdoV2F0ZXJNYXJrIGhhcyBub3QgYmVlbiBoaXQgeWV0LFxuLy8gc2ltaWxhciB0byBob3cgV3JpdGFibGUud3JpdGUoKSByZXR1cm5zIHRydWUgaWYgeW91IHNob3VsZFxuLy8gd3JpdGUoKSBzb21lIG1vcmUuXG5SZWFkYWJsZS5wcm90b3R5cGUucHVzaCA9IGZ1bmN0aW9uIChjaHVuaywgZW5jb2RpbmcpIHtcbiAgdmFyIHN0YXRlID0gdGhpcy5fcmVhZGFibGVTdGF0ZTtcbiAgdmFyIHNraXBDaHVua0NoZWNrO1xuXG4gIGlmICghc3RhdGUub2JqZWN0TW9kZSkge1xuICAgIGlmICh0eXBlb2YgY2h1bmsgPT09ICdzdHJpbmcnKSB7XG4gICAgICBlbmNvZGluZyA9IGVuY29kaW5nIHx8IHN0YXRlLmRlZmF1bHRFbmNvZGluZztcbiAgICAgIGlmIChlbmNvZGluZyAhPT0gc3RhdGUuZW5jb2RpbmcpIHtcbiAgICAgICAgY2h1bmsgPSBCdWZmZXIuZnJvbShjaHVuaywgZW5jb2RpbmcpO1xuICAgICAgICBlbmNvZGluZyA9ICcnO1xuICAgICAgfVxuICAgICAgc2tpcENodW5rQ2hlY2sgPSB0cnVlO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBza2lwQ2h1bmtDaGVjayA9IHRydWU7XG4gIH1cblxuICByZXR1cm4gcmVhZGFibGVBZGRDaHVuayh0aGlzLCBjaHVuaywgZW5jb2RpbmcsIGZhbHNlLCBza2lwQ2h1bmtDaGVjayk7XG59O1xuXG4vLyBVbnNoaWZ0IHNob3VsZCAqYWx3YXlzKiBiZSBzb21ldGhpbmcgZGlyZWN0bHkgb3V0IG9mIHJlYWQoKVxuUmVhZGFibGUucHJvdG90eXBlLnVuc2hpZnQgPSBmdW5jdGlvbiAoY2h1bmspIHtcbiAgcmV0dXJuIHJlYWRhYmxlQWRkQ2h1bmsodGhpcywgY2h1bmssIG51bGwsIHRydWUsIGZhbHNlKTtcbn07XG5cbmZ1bmN0aW9uIHJlYWRhYmxlQWRkQ2h1bmsoc3RyZWFtLCBjaHVuaywgZW5jb2RpbmcsIGFkZFRvRnJvbnQsIHNraXBDaHVua0NoZWNrKSB7XG4gIHZhciBzdGF0ZSA9IHN0cmVhbS5fcmVhZGFibGVTdGF0ZTtcbiAgaWYgKGNodW5rID09PSBudWxsKSB7XG4gICAgc3RhdGUucmVhZGluZyA9IGZhbHNlO1xuICAgIG9uRW9mQ2h1bmsoc3RyZWFtLCBzdGF0ZSk7XG4gIH0gZWxzZSB7XG4gICAgdmFyIGVyO1xuICAgIGlmICghc2tpcENodW5rQ2hlY2spIGVyID0gY2h1bmtJbnZhbGlkKHN0YXRlLCBjaHVuayk7XG4gICAgaWYgKGVyKSB7XG4gICAgICBzdHJlYW0uZW1pdCgnZXJyb3InLCBlcik7XG4gICAgfSBlbHNlIGlmIChzdGF0ZS5vYmplY3RNb2RlIHx8IGNodW5rICYmIGNodW5rLmxlbmd0aCA+IDApIHtcbiAgICAgIGlmICh0eXBlb2YgY2h1bmsgIT09ICdzdHJpbmcnICYmICFzdGF0ZS5vYmplY3RNb2RlICYmIE9iamVjdC5nZXRQcm90b3R5cGVPZihjaHVuaykgIT09IEJ1ZmZlci5wcm90b3R5cGUpIHtcbiAgICAgICAgY2h1bmsgPSBfdWludDhBcnJheVRvQnVmZmVyKGNodW5rKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGFkZFRvRnJvbnQpIHtcbiAgICAgICAgaWYgKHN0YXRlLmVuZEVtaXR0ZWQpIHN0cmVhbS5lbWl0KCdlcnJvcicsIG5ldyBFcnJvcignc3RyZWFtLnVuc2hpZnQoKSBhZnRlciBlbmQgZXZlbnQnKSk7ZWxzZSBhZGRDaHVuayhzdHJlYW0sIHN0YXRlLCBjaHVuaywgdHJ1ZSk7XG4gICAgICB9IGVsc2UgaWYgKHN0YXRlLmVuZGVkKSB7XG4gICAgICAgIHN0cmVhbS5lbWl0KCdlcnJvcicsIG5ldyBFcnJvcignc3RyZWFtLnB1c2goKSBhZnRlciBFT0YnKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzdGF0ZS5yZWFkaW5nID0gZmFsc2U7XG4gICAgICAgIGlmIChzdGF0ZS5kZWNvZGVyICYmICFlbmNvZGluZykge1xuICAgICAgICAgIGNodW5rID0gc3RhdGUuZGVjb2Rlci53cml0ZShjaHVuayk7XG4gICAgICAgICAgaWYgKHN0YXRlLm9iamVjdE1vZGUgfHwgY2h1bmsubGVuZ3RoICE9PSAwKSBhZGRDaHVuayhzdHJlYW0sIHN0YXRlLCBjaHVuaywgZmFsc2UpO2Vsc2UgbWF5YmVSZWFkTW9yZShzdHJlYW0sIHN0YXRlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBhZGRDaHVuayhzdHJlYW0sIHN0YXRlLCBjaHVuaywgZmFsc2UpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICghYWRkVG9Gcm9udCkge1xuICAgICAgc3RhdGUucmVhZGluZyA9IGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBuZWVkTW9yZURhdGEoc3RhdGUpO1xufVxuXG5mdW5jdGlvbiBhZGRDaHVuayhzdHJlYW0sIHN0YXRlLCBjaHVuaywgYWRkVG9Gcm9udCkge1xuICBpZiAoc3RhdGUuZmxvd2luZyAmJiBzdGF0ZS5sZW5ndGggPT09IDAgJiYgIXN0YXRlLnN5bmMpIHtcbiAgICBzdHJlYW0uZW1pdCgnZGF0YScsIGNodW5rKTtcbiAgICBzdHJlYW0ucmVhZCgwKTtcbiAgfSBlbHNlIHtcbiAgICAvLyB1cGRhdGUgdGhlIGJ1ZmZlciBpbmZvLlxuICAgIHN0YXRlLmxlbmd0aCArPSBzdGF0ZS5vYmplY3RNb2RlID8gMSA6IGNodW5rLmxlbmd0aDtcbiAgICBpZiAoYWRkVG9Gcm9udCkgc3RhdGUuYnVmZmVyLnVuc2hpZnQoY2h1bmspO2Vsc2Ugc3RhdGUuYnVmZmVyLnB1c2goY2h1bmspO1xuXG4gICAgaWYgKHN0YXRlLm5lZWRSZWFkYWJsZSkgZW1pdFJlYWRhYmxlKHN0cmVhbSk7XG4gIH1cbiAgbWF5YmVSZWFkTW9yZShzdHJlYW0sIHN0YXRlKTtcbn1cblxuZnVuY3Rpb24gY2h1bmtJbnZhbGlkKHN0YXRlLCBjaHVuaykge1xuICB2YXIgZXI7XG4gIGlmICghX2lzVWludDhBcnJheShjaHVuaykgJiYgdHlwZW9mIGNodW5rICE9PSAnc3RyaW5nJyAmJiBjaHVuayAhPT0gdW5kZWZpbmVkICYmICFzdGF0ZS5vYmplY3RNb2RlKSB7XG4gICAgZXIgPSBuZXcgVHlwZUVycm9yKCdJbnZhbGlkIG5vbi1zdHJpbmcvYnVmZmVyIGNodW5rJyk7XG4gIH1cbiAgcmV0dXJuIGVyO1xufVxuXG4vLyBpZiBpdCdzIHBhc3QgdGhlIGhpZ2ggd2F0ZXIgbWFyaywgd2UgY2FuIHB1c2ggaW4gc29tZSBtb3JlLlxuLy8gQWxzbywgaWYgd2UgaGF2ZSBubyBkYXRhIHlldCwgd2UgY2FuIHN0YW5kIHNvbWVcbi8vIG1vcmUgYnl0ZXMuICBUaGlzIGlzIHRvIHdvcmsgYXJvdW5kIGNhc2VzIHdoZXJlIGh3bT0wLFxuLy8gc3VjaCBhcyB0aGUgcmVwbC4gIEFsc28sIGlmIHRoZSBwdXNoKCkgdHJpZ2dlcmVkIGFcbi8vIHJlYWRhYmxlIGV2ZW50LCBhbmQgdGhlIHVzZXIgY2FsbGVkIHJlYWQobGFyZ2VOdW1iZXIpIHN1Y2ggdGhhdFxuLy8gbmVlZFJlYWRhYmxlIHdhcyBzZXQsIHRoZW4gd2Ugb3VnaHQgdG8gcHVzaCBtb3JlLCBzbyB0aGF0IGFub3RoZXJcbi8vICdyZWFkYWJsZScgZXZlbnQgd2lsbCBiZSB0cmlnZ2VyZWQuXG5mdW5jdGlvbiBuZWVkTW9yZURhdGEoc3RhdGUpIHtcbiAgcmV0dXJuICFzdGF0ZS5lbmRlZCAmJiAoc3RhdGUubmVlZFJlYWRhYmxlIHx8IHN0YXRlLmxlbmd0aCA8IHN0YXRlLmhpZ2hXYXRlck1hcmsgfHwgc3RhdGUubGVuZ3RoID09PSAwKTtcbn1cblxuUmVhZGFibGUucHJvdG90eXBlLmlzUGF1c2VkID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gdGhpcy5fcmVhZGFibGVTdGF0ZS5mbG93aW5nID09PSBmYWxzZTtcbn07XG5cbi8vIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5LlxuUmVhZGFibGUucHJvdG90eXBlLnNldEVuY29kaW5nID0gZnVuY3Rpb24gKGVuYykge1xuICBpZiAoIVN0cmluZ0RlY29kZXIpIFN0cmluZ0RlY29kZXIgPSByZXF1aXJlKCdzdHJpbmdfZGVjb2Rlci8nKS5TdHJpbmdEZWNvZGVyO1xuICB0aGlzLl9yZWFkYWJsZVN0YXRlLmRlY29kZXIgPSBuZXcgU3RyaW5nRGVjb2RlcihlbmMpO1xuICB0aGlzLl9yZWFkYWJsZVN0YXRlLmVuY29kaW5nID0gZW5jO1xuICByZXR1cm4gdGhpcztcbn07XG5cbi8vIERvbid0IHJhaXNlIHRoZSBod20gPiA4TUJcbnZhciBNQVhfSFdNID0gMHg4MDAwMDA7XG5mdW5jdGlvbiBjb21wdXRlTmV3SGlnaFdhdGVyTWFyayhuKSB7XG4gIGlmIChuID49IE1BWF9IV00pIHtcbiAgICBuID0gTUFYX0hXTTtcbiAgfSBlbHNlIHtcbiAgICAvLyBHZXQgdGhlIG5leHQgaGlnaGVzdCBwb3dlciBvZiAyIHRvIHByZXZlbnQgaW5jcmVhc2luZyBod20gZXhjZXNzaXZlbHkgaW5cbiAgICAvLyB0aW55IGFtb3VudHNcbiAgICBuLS07XG4gICAgbiB8PSBuID4+PiAxO1xuICAgIG4gfD0gbiA+Pj4gMjtcbiAgICBuIHw9IG4gPj4+IDQ7XG4gICAgbiB8PSBuID4+PiA4O1xuICAgIG4gfD0gbiA+Pj4gMTY7XG4gICAgbisrO1xuICB9XG4gIHJldHVybiBuO1xufVxuXG4vLyBUaGlzIGZ1bmN0aW9uIGlzIGRlc2lnbmVkIHRvIGJlIGlubGluYWJsZSwgc28gcGxlYXNlIHRha2UgY2FyZSB3aGVuIG1ha2luZ1xuLy8gY2hhbmdlcyB0byB0aGUgZnVuY3Rpb24gYm9keS5cbmZ1bmN0aW9uIGhvd011Y2hUb1JlYWQobiwgc3RhdGUpIHtcbiAgaWYgKG4gPD0gMCB8fCBzdGF0ZS5sZW5ndGggPT09IDAgJiYgc3RhdGUuZW5kZWQpIHJldHVybiAwO1xuICBpZiAoc3RhdGUub2JqZWN0TW9kZSkgcmV0dXJuIDE7XG4gIGlmIChuICE9PSBuKSB7XG4gICAgLy8gT25seSBmbG93IG9uZSBidWZmZXIgYXQgYSB0aW1lXG4gICAgaWYgKHN0YXRlLmZsb3dpbmcgJiYgc3RhdGUubGVuZ3RoKSByZXR1cm4gc3RhdGUuYnVmZmVyLmhlYWQuZGF0YS5sZW5ndGg7ZWxzZSByZXR1cm4gc3RhdGUubGVuZ3RoO1xuICB9XG4gIC8vIElmIHdlJ3JlIGFza2luZyBmb3IgbW9yZSB0aGFuIHRoZSBjdXJyZW50IGh3bSwgdGhlbiByYWlzZSB0aGUgaHdtLlxuICBpZiAobiA+IHN0YXRlLmhpZ2hXYXRlck1hcmspIHN0YXRlLmhpZ2hXYXRlck1hcmsgPSBjb21wdXRlTmV3SGlnaFdhdGVyTWFyayhuKTtcbiAgaWYgKG4gPD0gc3RhdGUubGVuZ3RoKSByZXR1cm4gbjtcbiAgLy8gRG9uJ3QgaGF2ZSBlbm91Z2hcbiAgaWYgKCFzdGF0ZS5lbmRlZCkge1xuICAgIHN0YXRlLm5lZWRSZWFkYWJsZSA9IHRydWU7XG4gICAgcmV0dXJuIDA7XG4gIH1cbiAgcmV0dXJuIHN0YXRlLmxlbmd0aDtcbn1cblxuLy8geW91IGNhbiBvdmVycmlkZSBlaXRoZXIgdGhpcyBtZXRob2QsIG9yIHRoZSBhc3luYyBfcmVhZChuKSBiZWxvdy5cblJlYWRhYmxlLnByb3RvdHlwZS5yZWFkID0gZnVuY3Rpb24gKG4pIHtcbiAgZGVidWcoJ3JlYWQnLCBuKTtcbiAgbiA9IHBhcnNlSW50KG4sIDEwKTtcbiAgdmFyIHN0YXRlID0gdGhpcy5fcmVhZGFibGVTdGF0ZTtcbiAgdmFyIG5PcmlnID0gbjtcblxuICBpZiAobiAhPT0gMCkgc3RhdGUuZW1pdHRlZFJlYWRhYmxlID0gZmFsc2U7XG5cbiAgLy8gaWYgd2UncmUgZG9pbmcgcmVhZCgwKSB0byB0cmlnZ2VyIGEgcmVhZGFibGUgZXZlbnQsIGJ1dCB3ZVxuICAvLyBhbHJlYWR5IGhhdmUgYSBidW5jaCBvZiBkYXRhIGluIHRoZSBidWZmZXIsIHRoZW4ganVzdCB0cmlnZ2VyXG4gIC8vIHRoZSAncmVhZGFibGUnIGV2ZW50IGFuZCBtb3ZlIG9uLlxuICBpZiAobiA9PT0gMCAmJiBzdGF0ZS5uZWVkUmVhZGFibGUgJiYgKHN0YXRlLmxlbmd0aCA+PSBzdGF0ZS5oaWdoV2F0ZXJNYXJrIHx8IHN0YXRlLmVuZGVkKSkge1xuICAgIGRlYnVnKCdyZWFkOiBlbWl0UmVhZGFibGUnLCBzdGF0ZS5sZW5ndGgsIHN0YXRlLmVuZGVkKTtcbiAgICBpZiAoc3RhdGUubGVuZ3RoID09PSAwICYmIHN0YXRlLmVuZGVkKSBlbmRSZWFkYWJsZSh0aGlzKTtlbHNlIGVtaXRSZWFkYWJsZSh0aGlzKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIG4gPSBob3dNdWNoVG9SZWFkKG4sIHN0YXRlKTtcblxuICAvLyBpZiB3ZSd2ZSBlbmRlZCwgYW5kIHdlJ3JlIG5vdyBjbGVhciwgdGhlbiBmaW5pc2ggaXQgdXAuXG4gIGlmIChuID09PSAwICYmIHN0YXRlLmVuZGVkKSB7XG4gICAgaWYgKHN0YXRlLmxlbmd0aCA9PT0gMCkgZW5kUmVhZGFibGUodGhpcyk7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICAvLyBBbGwgdGhlIGFjdHVhbCBjaHVuayBnZW5lcmF0aW9uIGxvZ2ljIG5lZWRzIHRvIGJlXG4gIC8vICpiZWxvdyogdGhlIGNhbGwgdG8gX3JlYWQuICBUaGUgcmVhc29uIGlzIHRoYXQgaW4gY2VydGFpblxuICAvLyBzeW50aGV0aWMgc3RyZWFtIGNhc2VzLCBzdWNoIGFzIHBhc3N0aHJvdWdoIHN0cmVhbXMsIF9yZWFkXG4gIC8vIG1heSBiZSBhIGNvbXBsZXRlbHkgc3luY2hyb25vdXMgb3BlcmF0aW9uIHdoaWNoIG1heSBjaGFuZ2VcbiAgLy8gdGhlIHN0YXRlIG9mIHRoZSByZWFkIGJ1ZmZlciwgcHJvdmlkaW5nIGVub3VnaCBkYXRhIHdoZW5cbiAgLy8gYmVmb3JlIHRoZXJlIHdhcyAqbm90KiBlbm91Z2guXG4gIC8vXG4gIC8vIFNvLCB0aGUgc3RlcHMgYXJlOlxuICAvLyAxLiBGaWd1cmUgb3V0IHdoYXQgdGhlIHN0YXRlIG9mIHRoaW5ncyB3aWxsIGJlIGFmdGVyIHdlIGRvXG4gIC8vIGEgcmVhZCBmcm9tIHRoZSBidWZmZXIuXG4gIC8vXG4gIC8vIDIuIElmIHRoYXQgcmVzdWx0aW5nIHN0YXRlIHdpbGwgdHJpZ2dlciBhIF9yZWFkLCB0aGVuIGNhbGwgX3JlYWQuXG4gIC8vIE5vdGUgdGhhdCB0aGlzIG1heSBiZSBhc3luY2hyb25vdXMsIG9yIHN5bmNocm9ub3VzLiAgWWVzLCBpdCBpc1xuICAvLyBkZWVwbHkgdWdseSB0byB3cml0ZSBBUElzIHRoaXMgd2F5LCBidXQgdGhhdCBzdGlsbCBkb2Vzbid0IG1lYW5cbiAgLy8gdGhhdCB0aGUgUmVhZGFibGUgY2xhc3Mgc2hvdWxkIGJlaGF2ZSBpbXByb3Blcmx5LCBhcyBzdHJlYW1zIGFyZVxuICAvLyBkZXNpZ25lZCB0byBiZSBzeW5jL2FzeW5jIGFnbm9zdGljLlxuICAvLyBUYWtlIG5vdGUgaWYgdGhlIF9yZWFkIGNhbGwgaXMgc3luYyBvciBhc3luYyAoaWUsIGlmIHRoZSByZWFkIGNhbGxcbiAgLy8gaGFzIHJldHVybmVkIHlldCksIHNvIHRoYXQgd2Uga25vdyB3aGV0aGVyIG9yIG5vdCBpdCdzIHNhZmUgdG8gZW1pdFxuICAvLyAncmVhZGFibGUnIGV0Yy5cbiAgLy9cbiAgLy8gMy4gQWN0dWFsbHkgcHVsbCB0aGUgcmVxdWVzdGVkIGNodW5rcyBvdXQgb2YgdGhlIGJ1ZmZlciBhbmQgcmV0dXJuLlxuXG4gIC8vIGlmIHdlIG5lZWQgYSByZWFkYWJsZSBldmVudCwgdGhlbiB3ZSBuZWVkIHRvIGRvIHNvbWUgcmVhZGluZy5cbiAgdmFyIGRvUmVhZCA9IHN0YXRlLm5lZWRSZWFkYWJsZTtcbiAgZGVidWcoJ25lZWQgcmVhZGFibGUnLCBkb1JlYWQpO1xuXG4gIC8vIGlmIHdlIGN1cnJlbnRseSBoYXZlIGxlc3MgdGhhbiB0aGUgaGlnaFdhdGVyTWFyaywgdGhlbiBhbHNvIHJlYWQgc29tZVxuICBpZiAoc3RhdGUubGVuZ3RoID09PSAwIHx8IHN0YXRlLmxlbmd0aCAtIG4gPCBzdGF0ZS5oaWdoV2F0ZXJNYXJrKSB7XG4gICAgZG9SZWFkID0gdHJ1ZTtcbiAgICBkZWJ1ZygnbGVuZ3RoIGxlc3MgdGhhbiB3YXRlcm1hcmsnLCBkb1JlYWQpO1xuICB9XG5cbiAgLy8gaG93ZXZlciwgaWYgd2UndmUgZW5kZWQsIHRoZW4gdGhlcmUncyBubyBwb2ludCwgYW5kIGlmIHdlJ3JlIGFscmVhZHlcbiAgLy8gcmVhZGluZywgdGhlbiBpdCdzIHVubmVjZXNzYXJ5LlxuICBpZiAoc3RhdGUuZW5kZWQgfHwgc3RhdGUucmVhZGluZykge1xuICAgIGRvUmVhZCA9IGZhbHNlO1xuICAgIGRlYnVnKCdyZWFkaW5nIG9yIGVuZGVkJywgZG9SZWFkKTtcbiAgfSBlbHNlIGlmIChkb1JlYWQpIHtcbiAgICBkZWJ1ZygnZG8gcmVhZCcpO1xuICAgIHN0YXRlLnJlYWRpbmcgPSB0cnVlO1xuICAgIHN0YXRlLnN5bmMgPSB0cnVlO1xuICAgIC8vIGlmIHRoZSBsZW5ndGggaXMgY3VycmVudGx5IHplcm8sIHRoZW4gd2UgKm5lZWQqIGEgcmVhZGFibGUgZXZlbnQuXG4gICAgaWYgKHN0YXRlLmxlbmd0aCA9PT0gMCkgc3RhdGUubmVlZFJlYWRhYmxlID0gdHJ1ZTtcbiAgICAvLyBjYWxsIGludGVybmFsIHJlYWQgbWV0aG9kXG4gICAgdGhpcy5fcmVhZChzdGF0ZS5oaWdoV2F0ZXJNYXJrKTtcbiAgICBzdGF0ZS5zeW5jID0gZmFsc2U7XG4gICAgLy8gSWYgX3JlYWQgcHVzaGVkIGRhdGEgc3luY2hyb25vdXNseSwgdGhlbiBgcmVhZGluZ2Agd2lsbCBiZSBmYWxzZSxcbiAgICAvLyBhbmQgd2UgbmVlZCB0byByZS1ldmFsdWF0ZSBob3cgbXVjaCBkYXRhIHdlIGNhbiByZXR1cm4gdG8gdGhlIHVzZXIuXG4gICAgaWYgKCFzdGF0ZS5yZWFkaW5nKSBuID0gaG93TXVjaFRvUmVhZChuT3JpZywgc3RhdGUpO1xuICB9XG5cbiAgdmFyIHJldDtcbiAgaWYgKG4gPiAwKSByZXQgPSBmcm9tTGlzdChuLCBzdGF0ZSk7ZWxzZSByZXQgPSBudWxsO1xuXG4gIGlmIChyZXQgPT09IG51bGwpIHtcbiAgICBzdGF0ZS5uZWVkUmVhZGFibGUgPSB0cnVlO1xuICAgIG4gPSAwO1xuICB9IGVsc2Uge1xuICAgIHN0YXRlLmxlbmd0aCAtPSBuO1xuICB9XG5cbiAgaWYgKHN0YXRlLmxlbmd0aCA9PT0gMCkge1xuICAgIC8vIElmIHdlIGhhdmUgbm90aGluZyBpbiB0aGUgYnVmZmVyLCB0aGVuIHdlIHdhbnQgdG8ga25vd1xuICAgIC8vIGFzIHNvb24gYXMgd2UgKmRvKiBnZXQgc29tZXRoaW5nIGludG8gdGhlIGJ1ZmZlci5cbiAgICBpZiAoIXN0YXRlLmVuZGVkKSBzdGF0ZS5uZWVkUmVhZGFibGUgPSB0cnVlO1xuXG4gICAgLy8gSWYgd2UgdHJpZWQgdG8gcmVhZCgpIHBhc3QgdGhlIEVPRiwgdGhlbiBlbWl0IGVuZCBvbiB0aGUgbmV4dCB0aWNrLlxuICAgIGlmIChuT3JpZyAhPT0gbiAmJiBzdGF0ZS5lbmRlZCkgZW5kUmVhZGFibGUodGhpcyk7XG4gIH1cblxuICBpZiAocmV0ICE9PSBudWxsKSB0aGlzLmVtaXQoJ2RhdGEnLCByZXQpO1xuXG4gIHJldHVybiByZXQ7XG59O1xuXG5mdW5jdGlvbiBvbkVvZkNodW5rKHN0cmVhbSwgc3RhdGUpIHtcbiAgaWYgKHN0YXRlLmVuZGVkKSByZXR1cm47XG4gIGlmIChzdGF0ZS5kZWNvZGVyKSB7XG4gICAgdmFyIGNodW5rID0gc3RhdGUuZGVjb2Rlci5lbmQoKTtcbiAgICBpZiAoY2h1bmsgJiYgY2h1bmsubGVuZ3RoKSB7XG4gICAgICBzdGF0ZS5idWZmZXIucHVzaChjaHVuayk7XG4gICAgICBzdGF0ZS5sZW5ndGggKz0gc3RhdGUub2JqZWN0TW9kZSA/IDEgOiBjaHVuay5sZW5ndGg7XG4gICAgfVxuICB9XG4gIHN0YXRlLmVuZGVkID0gdHJ1ZTtcblxuICAvLyBlbWl0ICdyZWFkYWJsZScgbm93IHRvIG1ha2Ugc3VyZSBpdCBnZXRzIHBpY2tlZCB1cC5cbiAgZW1pdFJlYWRhYmxlKHN0cmVhbSk7XG59XG5cbi8vIERvbid0IGVtaXQgcmVhZGFibGUgcmlnaHQgYXdheSBpbiBzeW5jIG1vZGUsIGJlY2F1c2UgdGhpcyBjYW4gdHJpZ2dlclxuLy8gYW5vdGhlciByZWFkKCkgY2FsbCA9PiBzdGFjayBvdmVyZmxvdy4gIFRoaXMgd2F5LCBpdCBtaWdodCB0cmlnZ2VyXG4vLyBhIG5leHRUaWNrIHJlY3Vyc2lvbiB3YXJuaW5nLCBidXQgdGhhdCdzIG5vdCBzbyBiYWQuXG5mdW5jdGlvbiBlbWl0UmVhZGFibGUoc3RyZWFtKSB7XG4gIHZhciBzdGF0ZSA9IHN0cmVhbS5fcmVhZGFibGVTdGF0ZTtcbiAgc3RhdGUubmVlZFJlYWRhYmxlID0gZmFsc2U7XG4gIGlmICghc3RhdGUuZW1pdHRlZFJlYWRhYmxlKSB7XG4gICAgZGVidWcoJ2VtaXRSZWFkYWJsZScsIHN0YXRlLmZsb3dpbmcpO1xuICAgIHN0YXRlLmVtaXR0ZWRSZWFkYWJsZSA9IHRydWU7XG4gICAgaWYgKHN0YXRlLnN5bmMpIHByb2Nlc3NOZXh0VGljayhlbWl0UmVhZGFibGVfLCBzdHJlYW0pO2Vsc2UgZW1pdFJlYWRhYmxlXyhzdHJlYW0pO1xuICB9XG59XG5cbmZ1bmN0aW9uIGVtaXRSZWFkYWJsZV8oc3RyZWFtKSB7XG4gIGRlYnVnKCdlbWl0IHJlYWRhYmxlJyk7XG4gIHN0cmVhbS5lbWl0KCdyZWFkYWJsZScpO1xuICBmbG93KHN0cmVhbSk7XG59XG5cbi8vIGF0IHRoaXMgcG9pbnQsIHRoZSB1c2VyIGhhcyBwcmVzdW1hYmx5IHNlZW4gdGhlICdyZWFkYWJsZScgZXZlbnQsXG4vLyBhbmQgY2FsbGVkIHJlYWQoKSB0byBjb25zdW1lIHNvbWUgZGF0YS4gIHRoYXQgbWF5IGhhdmUgdHJpZ2dlcmVkXG4vLyBpbiB0dXJuIGFub3RoZXIgX3JlYWQobikgY2FsbCwgaW4gd2hpY2ggY2FzZSByZWFkaW5nID0gdHJ1ZSBpZlxuLy8gaXQncyBpbiBwcm9ncmVzcy5cbi8vIEhvd2V2ZXIsIGlmIHdlJ3JlIG5vdCBlbmRlZCwgb3IgcmVhZGluZywgYW5kIHRoZSBsZW5ndGggPCBod20sXG4vLyB0aGVuIGdvIGFoZWFkIGFuZCB0cnkgdG8gcmVhZCBzb21lIG1vcmUgcHJlZW1wdGl2ZWx5LlxuZnVuY3Rpb24gbWF5YmVSZWFkTW9yZShzdHJlYW0sIHN0YXRlKSB7XG4gIGlmICghc3RhdGUucmVhZGluZ01vcmUpIHtcbiAgICBzdGF0ZS5yZWFkaW5nTW9yZSA9IHRydWU7XG4gICAgcHJvY2Vzc05leHRUaWNrKG1heWJlUmVhZE1vcmVfLCBzdHJlYW0sIHN0YXRlKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBtYXliZVJlYWRNb3JlXyhzdHJlYW0sIHN0YXRlKSB7XG4gIHZhciBsZW4gPSBzdGF0ZS5sZW5ndGg7XG4gIHdoaWxlICghc3RhdGUucmVhZGluZyAmJiAhc3RhdGUuZmxvd2luZyAmJiAhc3RhdGUuZW5kZWQgJiYgc3RhdGUubGVuZ3RoIDwgc3RhdGUuaGlnaFdhdGVyTWFyaykge1xuICAgIGRlYnVnKCdtYXliZVJlYWRNb3JlIHJlYWQgMCcpO1xuICAgIHN0cmVhbS5yZWFkKDApO1xuICAgIGlmIChsZW4gPT09IHN0YXRlLmxlbmd0aClcbiAgICAgIC8vIGRpZG4ndCBnZXQgYW55IGRhdGEsIHN0b3Agc3Bpbm5pbmcuXG4gICAgICBicmVhaztlbHNlIGxlbiA9IHN0YXRlLmxlbmd0aDtcbiAgfVxuICBzdGF0ZS5yZWFkaW5nTW9yZSA9IGZhbHNlO1xufVxuXG4vLyBhYnN0cmFjdCBtZXRob2QuICB0byBiZSBvdmVycmlkZGVuIGluIHNwZWNpZmljIGltcGxlbWVudGF0aW9uIGNsYXNzZXMuXG4vLyBjYWxsIGNiKGVyLCBkYXRhKSB3aGVyZSBkYXRhIGlzIDw9IG4gaW4gbGVuZ3RoLlxuLy8gZm9yIHZpcnR1YWwgKG5vbi1zdHJpbmcsIG5vbi1idWZmZXIpIHN0cmVhbXMsIFwibGVuZ3RoXCIgaXMgc29tZXdoYXRcbi8vIGFyYml0cmFyeSwgYW5kIHBlcmhhcHMgbm90IHZlcnkgbWVhbmluZ2Z1bC5cblJlYWRhYmxlLnByb3RvdHlwZS5fcmVhZCA9IGZ1bmN0aW9uIChuKSB7XG4gIHRoaXMuZW1pdCgnZXJyb3InLCBuZXcgRXJyb3IoJ19yZWFkKCkgaXMgbm90IGltcGxlbWVudGVkJykpO1xufTtcblxuUmVhZGFibGUucHJvdG90eXBlLnBpcGUgPSBmdW5jdGlvbiAoZGVzdCwgcGlwZU9wdHMpIHtcbiAgdmFyIHNyYyA9IHRoaXM7XG4gIHZhciBzdGF0ZSA9IHRoaXMuX3JlYWRhYmxlU3RhdGU7XG5cbiAgc3dpdGNoIChzdGF0ZS5waXBlc0NvdW50KSB7XG4gICAgY2FzZSAwOlxuICAgICAgc3RhdGUucGlwZXMgPSBkZXN0O1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAxOlxuICAgICAgc3RhdGUucGlwZXMgPSBbc3RhdGUucGlwZXMsIGRlc3RdO1xuICAgICAgYnJlYWs7XG4gICAgZGVmYXVsdDpcbiAgICAgIHN0YXRlLnBpcGVzLnB1c2goZGVzdCk7XG4gICAgICBicmVhaztcbiAgfVxuICBzdGF0ZS5waXBlc0NvdW50ICs9IDE7XG4gIGRlYnVnKCdwaXBlIGNvdW50PSVkIG9wdHM9JWonLCBzdGF0ZS5waXBlc0NvdW50LCBwaXBlT3B0cyk7XG5cbiAgdmFyIGRvRW5kID0gKCFwaXBlT3B0cyB8fCBwaXBlT3B0cy5lbmQgIT09IGZhbHNlKSAmJiBkZXN0ICE9PSBwcm9jZXNzLnN0ZG91dCAmJiBkZXN0ICE9PSBwcm9jZXNzLnN0ZGVycjtcblxuICB2YXIgZW5kRm4gPSBkb0VuZCA/IG9uZW5kIDogdW5waXBlO1xuICBpZiAoc3RhdGUuZW5kRW1pdHRlZCkgcHJvY2Vzc05leHRUaWNrKGVuZEZuKTtlbHNlIHNyYy5vbmNlKCdlbmQnLCBlbmRGbik7XG5cbiAgZGVzdC5vbigndW5waXBlJywgb251bnBpcGUpO1xuICBmdW5jdGlvbiBvbnVucGlwZShyZWFkYWJsZSwgdW5waXBlSW5mbykge1xuICAgIGRlYnVnKCdvbnVucGlwZScpO1xuICAgIGlmIChyZWFkYWJsZSA9PT0gc3JjKSB7XG4gICAgICBpZiAodW5waXBlSW5mbyAmJiB1bnBpcGVJbmZvLmhhc1VucGlwZWQgPT09IGZhbHNlKSB7XG4gICAgICAgIHVucGlwZUluZm8uaGFzVW5waXBlZCA9IHRydWU7XG4gICAgICAgIGNsZWFudXAoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBvbmVuZCgpIHtcbiAgICBkZWJ1Zygnb25lbmQnKTtcbiAgICBkZXN0LmVuZCgpO1xuICB9XG5cbiAgLy8gd2hlbiB0aGUgZGVzdCBkcmFpbnMsIGl0IHJlZHVjZXMgdGhlIGF3YWl0RHJhaW4gY291bnRlclxuICAvLyBvbiB0aGUgc291cmNlLiAgVGhpcyB3b3VsZCBiZSBtb3JlIGVsZWdhbnQgd2l0aCBhIC5vbmNlKClcbiAgLy8gaGFuZGxlciBpbiBmbG93KCksIGJ1dCBhZGRpbmcgYW5kIHJlbW92aW5nIHJlcGVhdGVkbHkgaXNcbiAgLy8gdG9vIHNsb3cuXG4gIHZhciBvbmRyYWluID0gcGlwZU9uRHJhaW4oc3JjKTtcbiAgZGVzdC5vbignZHJhaW4nLCBvbmRyYWluKTtcblxuICB2YXIgY2xlYW5lZFVwID0gZmFsc2U7XG4gIGZ1bmN0aW9uIGNsZWFudXAoKSB7XG4gICAgZGVidWcoJ2NsZWFudXAnKTtcbiAgICAvLyBjbGVhbnVwIGV2ZW50IGhhbmRsZXJzIG9uY2UgdGhlIHBpcGUgaXMgYnJva2VuXG4gICAgZGVzdC5yZW1vdmVMaXN0ZW5lcignY2xvc2UnLCBvbmNsb3NlKTtcbiAgICBkZXN0LnJlbW92ZUxpc3RlbmVyKCdmaW5pc2gnLCBvbmZpbmlzaCk7XG4gICAgZGVzdC5yZW1vdmVMaXN0ZW5lcignZHJhaW4nLCBvbmRyYWluKTtcbiAgICBkZXN0LnJlbW92ZUxpc3RlbmVyKCdlcnJvcicsIG9uZXJyb3IpO1xuICAgIGRlc3QucmVtb3ZlTGlzdGVuZXIoJ3VucGlwZScsIG9udW5waXBlKTtcbiAgICBzcmMucmVtb3ZlTGlzdGVuZXIoJ2VuZCcsIG9uZW5kKTtcbiAgICBzcmMucmVtb3ZlTGlzdGVuZXIoJ2VuZCcsIHVucGlwZSk7XG4gICAgc3JjLnJlbW92ZUxpc3RlbmVyKCdkYXRhJywgb25kYXRhKTtcblxuICAgIGNsZWFuZWRVcCA9IHRydWU7XG5cbiAgICAvLyBpZiB0aGUgcmVhZGVyIGlzIHdhaXRpbmcgZm9yIGEgZHJhaW4gZXZlbnQgZnJvbSB0aGlzXG4gICAgLy8gc3BlY2lmaWMgd3JpdGVyLCB0aGVuIGl0IHdvdWxkIGNhdXNlIGl0IHRvIG5ldmVyIHN0YXJ0XG4gICAgLy8gZmxvd2luZyBhZ2Fpbi5cbiAgICAvLyBTbywgaWYgdGhpcyBpcyBhd2FpdGluZyBhIGRyYWluLCB0aGVuIHdlIGp1c3QgY2FsbCBpdCBub3cuXG4gICAgLy8gSWYgd2UgZG9uJ3Qga25vdywgdGhlbiBhc3N1bWUgdGhhdCB3ZSBhcmUgd2FpdGluZyBmb3Igb25lLlxuICAgIGlmIChzdGF0ZS5hd2FpdERyYWluICYmICghZGVzdC5fd3JpdGFibGVTdGF0ZSB8fCBkZXN0Ll93cml0YWJsZVN0YXRlLm5lZWREcmFpbikpIG9uZHJhaW4oKTtcbiAgfVxuXG4gIC8vIElmIHRoZSB1c2VyIHB1c2hlcyBtb3JlIGRhdGEgd2hpbGUgd2UncmUgd3JpdGluZyB0byBkZXN0IHRoZW4gd2UnbGwgZW5kIHVwXG4gIC8vIGluIG9uZGF0YSBhZ2Fpbi4gSG93ZXZlciwgd2Ugb25seSB3YW50IHRvIGluY3JlYXNlIGF3YWl0RHJhaW4gb25jZSBiZWNhdXNlXG4gIC8vIGRlc3Qgd2lsbCBvbmx5IGVtaXQgb25lICdkcmFpbicgZXZlbnQgZm9yIHRoZSBtdWx0aXBsZSB3cml0ZXMuXG4gIC8vID0+IEludHJvZHVjZSBhIGd1YXJkIG9uIGluY3JlYXNpbmcgYXdhaXREcmFpbi5cbiAgdmFyIGluY3JlYXNlZEF3YWl0RHJhaW4gPSBmYWxzZTtcbiAgc3JjLm9uKCdkYXRhJywgb25kYXRhKTtcbiAgZnVuY3Rpb24gb25kYXRhKGNodW5rKSB7XG4gICAgZGVidWcoJ29uZGF0YScpO1xuICAgIGluY3JlYXNlZEF3YWl0RHJhaW4gPSBmYWxzZTtcbiAgICB2YXIgcmV0ID0gZGVzdC53cml0ZShjaHVuayk7XG4gICAgaWYgKGZhbHNlID09PSByZXQgJiYgIWluY3JlYXNlZEF3YWl0RHJhaW4pIHtcbiAgICAgIC8vIElmIHRoZSB1c2VyIHVucGlwZWQgZHVyaW5nIGBkZXN0LndyaXRlKClgLCBpdCBpcyBwb3NzaWJsZVxuICAgICAgLy8gdG8gZ2V0IHN0dWNrIGluIGEgcGVybWFuZW50bHkgcGF1c2VkIHN0YXRlIGlmIHRoYXQgd3JpdGVcbiAgICAgIC8vIGFsc28gcmV0dXJuZWQgZmFsc2UuXG4gICAgICAvLyA9PiBDaGVjayB3aGV0aGVyIGBkZXN0YCBpcyBzdGlsbCBhIHBpcGluZyBkZXN0aW5hdGlvbi5cbiAgICAgIGlmICgoc3RhdGUucGlwZXNDb3VudCA9PT0gMSAmJiBzdGF0ZS5waXBlcyA9PT0gZGVzdCB8fCBzdGF0ZS5waXBlc0NvdW50ID4gMSAmJiBpbmRleE9mKHN0YXRlLnBpcGVzLCBkZXN0KSAhPT0gLTEpICYmICFjbGVhbmVkVXApIHtcbiAgICAgICAgZGVidWcoJ2ZhbHNlIHdyaXRlIHJlc3BvbnNlLCBwYXVzZScsIHNyYy5fcmVhZGFibGVTdGF0ZS5hd2FpdERyYWluKTtcbiAgICAgICAgc3JjLl9yZWFkYWJsZVN0YXRlLmF3YWl0RHJhaW4rKztcbiAgICAgICAgaW5jcmVhc2VkQXdhaXREcmFpbiA9IHRydWU7XG4gICAgICB9XG4gICAgICBzcmMucGF1c2UoKTtcbiAgICB9XG4gIH1cblxuICAvLyBpZiB0aGUgZGVzdCBoYXMgYW4gZXJyb3IsIHRoZW4gc3RvcCBwaXBpbmcgaW50byBpdC5cbiAgLy8gaG93ZXZlciwgZG9uJ3Qgc3VwcHJlc3MgdGhlIHRocm93aW5nIGJlaGF2aW9yIGZvciB0aGlzLlxuICBmdW5jdGlvbiBvbmVycm9yKGVyKSB7XG4gICAgZGVidWcoJ29uZXJyb3InLCBlcik7XG4gICAgdW5waXBlKCk7XG4gICAgZGVzdC5yZW1vdmVMaXN0ZW5lcignZXJyb3InLCBvbmVycm9yKTtcbiAgICBpZiAoRUVsaXN0ZW5lckNvdW50KGRlc3QsICdlcnJvcicpID09PSAwKSBkZXN0LmVtaXQoJ2Vycm9yJywgZXIpO1xuICB9XG5cbiAgLy8gTWFrZSBzdXJlIG91ciBlcnJvciBoYW5kbGVyIGlzIGF0dGFjaGVkIGJlZm9yZSB1c2VybGFuZCBvbmVzLlxuICBwcmVwZW5kTGlzdGVuZXIoZGVzdCwgJ2Vycm9yJywgb25lcnJvcik7XG5cbiAgLy8gQm90aCBjbG9zZSBhbmQgZmluaXNoIHNob3VsZCB0cmlnZ2VyIHVucGlwZSwgYnV0IG9ubHkgb25jZS5cbiAgZnVuY3Rpb24gb25jbG9zZSgpIHtcbiAgICBkZXN0LnJlbW92ZUxpc3RlbmVyKCdmaW5pc2gnLCBvbmZpbmlzaCk7XG4gICAgdW5waXBlKCk7XG4gIH1cbiAgZGVzdC5vbmNlKCdjbG9zZScsIG9uY2xvc2UpO1xuICBmdW5jdGlvbiBvbmZpbmlzaCgpIHtcbiAgICBkZWJ1Zygnb25maW5pc2gnKTtcbiAgICBkZXN0LnJlbW92ZUxpc3RlbmVyKCdjbG9zZScsIG9uY2xvc2UpO1xuICAgIHVucGlwZSgpO1xuICB9XG4gIGRlc3Qub25jZSgnZmluaXNoJywgb25maW5pc2gpO1xuXG4gIGZ1bmN0aW9uIHVucGlwZSgpIHtcbiAgICBkZWJ1ZygndW5waXBlJyk7XG4gICAgc3JjLnVucGlwZShkZXN0KTtcbiAgfVxuXG4gIC8vIHRlbGwgdGhlIGRlc3QgdGhhdCBpdCdzIGJlaW5nIHBpcGVkIHRvXG4gIGRlc3QuZW1pdCgncGlwZScsIHNyYyk7XG5cbiAgLy8gc3RhcnQgdGhlIGZsb3cgaWYgaXQgaGFzbid0IGJlZW4gc3RhcnRlZCBhbHJlYWR5LlxuICBpZiAoIXN0YXRlLmZsb3dpbmcpIHtcbiAgICBkZWJ1ZygncGlwZSByZXN1bWUnKTtcbiAgICBzcmMucmVzdW1lKCk7XG4gIH1cblxuICByZXR1cm4gZGVzdDtcbn07XG5cbmZ1bmN0aW9uIHBpcGVPbkRyYWluKHNyYykge1xuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIHZhciBzdGF0ZSA9IHNyYy5fcmVhZGFibGVTdGF0ZTtcbiAgICBkZWJ1ZygncGlwZU9uRHJhaW4nLCBzdGF0ZS5hd2FpdERyYWluKTtcbiAgICBpZiAoc3RhdGUuYXdhaXREcmFpbikgc3RhdGUuYXdhaXREcmFpbi0tO1xuICAgIGlmIChzdGF0ZS5hd2FpdERyYWluID09PSAwICYmIEVFbGlzdGVuZXJDb3VudChzcmMsICdkYXRhJykpIHtcbiAgICAgIHN0YXRlLmZsb3dpbmcgPSB0cnVlO1xuICAgICAgZmxvdyhzcmMpO1xuICAgIH1cbiAgfTtcbn1cblxuUmVhZGFibGUucHJvdG90eXBlLnVucGlwZSA9IGZ1bmN0aW9uIChkZXN0KSB7XG4gIHZhciBzdGF0ZSA9IHRoaXMuX3JlYWRhYmxlU3RhdGU7XG4gIHZhciB1bnBpcGVJbmZvID0geyBoYXNVbnBpcGVkOiBmYWxzZSB9O1xuXG4gIC8vIGlmIHdlJ3JlIG5vdCBwaXBpbmcgYW55d2hlcmUsIHRoZW4gZG8gbm90aGluZy5cbiAgaWYgKHN0YXRlLnBpcGVzQ291bnQgPT09IDApIHJldHVybiB0aGlzO1xuXG4gIC8vIGp1c3Qgb25lIGRlc3RpbmF0aW9uLiAgbW9zdCBjb21tb24gY2FzZS5cbiAgaWYgKHN0YXRlLnBpcGVzQ291bnQgPT09IDEpIHtcbiAgICAvLyBwYXNzZWQgaW4gb25lLCBidXQgaXQncyBub3QgdGhlIHJpZ2h0IG9uZS5cbiAgICBpZiAoZGVzdCAmJiBkZXN0ICE9PSBzdGF0ZS5waXBlcykgcmV0dXJuIHRoaXM7XG5cbiAgICBpZiAoIWRlc3QpIGRlc3QgPSBzdGF0ZS5waXBlcztcblxuICAgIC8vIGdvdCBhIG1hdGNoLlxuICAgIHN0YXRlLnBpcGVzID0gbnVsbDtcbiAgICBzdGF0ZS5waXBlc0NvdW50ID0gMDtcbiAgICBzdGF0ZS5mbG93aW5nID0gZmFsc2U7XG4gICAgaWYgKGRlc3QpIGRlc3QuZW1pdCgndW5waXBlJywgdGhpcywgdW5waXBlSW5mbyk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvLyBzbG93IGNhc2UuIG11bHRpcGxlIHBpcGUgZGVzdGluYXRpb25zLlxuXG4gIGlmICghZGVzdCkge1xuICAgIC8vIHJlbW92ZSBhbGwuXG4gICAgdmFyIGRlc3RzID0gc3RhdGUucGlwZXM7XG4gICAgdmFyIGxlbiA9IHN0YXRlLnBpcGVzQ291bnQ7XG4gICAgc3RhdGUucGlwZXMgPSBudWxsO1xuICAgIHN0YXRlLnBpcGVzQ291bnQgPSAwO1xuICAgIHN0YXRlLmZsb3dpbmcgPSBmYWxzZTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgIGRlc3RzW2ldLmVtaXQoJ3VucGlwZScsIHRoaXMsIHVucGlwZUluZm8pO1xuICAgIH1yZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8vIHRyeSB0byBmaW5kIHRoZSByaWdodCBvbmUuXG4gIHZhciBpbmRleCA9IGluZGV4T2Yoc3RhdGUucGlwZXMsIGRlc3QpO1xuICBpZiAoaW5kZXggPT09IC0xKSByZXR1cm4gdGhpcztcblxuICBzdGF0ZS5waXBlcy5zcGxpY2UoaW5kZXgsIDEpO1xuICBzdGF0ZS5waXBlc0NvdW50IC09IDE7XG4gIGlmIChzdGF0ZS5waXBlc0NvdW50ID09PSAxKSBzdGF0ZS5waXBlcyA9IHN0YXRlLnBpcGVzWzBdO1xuXG4gIGRlc3QuZW1pdCgndW5waXBlJywgdGhpcywgdW5waXBlSW5mbyk7XG5cbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vLyBzZXQgdXAgZGF0YSBldmVudHMgaWYgdGhleSBhcmUgYXNrZWQgZm9yXG4vLyBFbnN1cmUgcmVhZGFibGUgbGlzdGVuZXJzIGV2ZW50dWFsbHkgZ2V0IHNvbWV0aGluZ1xuUmVhZGFibGUucHJvdG90eXBlLm9uID0gZnVuY3Rpb24gKGV2LCBmbikge1xuICB2YXIgcmVzID0gU3RyZWFtLnByb3RvdHlwZS5vbi5jYWxsKHRoaXMsIGV2LCBmbik7XG5cbiAgaWYgKGV2ID09PSAnZGF0YScpIHtcbiAgICAvLyBTdGFydCBmbG93aW5nIG9uIG5leHQgdGljayBpZiBzdHJlYW0gaXNuJ3QgZXhwbGljaXRseSBwYXVzZWRcbiAgICBpZiAodGhpcy5fcmVhZGFibGVTdGF0ZS5mbG93aW5nICE9PSBmYWxzZSkgdGhpcy5yZXN1bWUoKTtcbiAgfSBlbHNlIGlmIChldiA9PT0gJ3JlYWRhYmxlJykge1xuICAgIHZhciBzdGF0ZSA9IHRoaXMuX3JlYWRhYmxlU3RhdGU7XG4gICAgaWYgKCFzdGF0ZS5lbmRFbWl0dGVkICYmICFzdGF0ZS5yZWFkYWJsZUxpc3RlbmluZykge1xuICAgICAgc3RhdGUucmVhZGFibGVMaXN0ZW5pbmcgPSBzdGF0ZS5uZWVkUmVhZGFibGUgPSB0cnVlO1xuICAgICAgc3RhdGUuZW1pdHRlZFJlYWRhYmxlID0gZmFsc2U7XG4gICAgICBpZiAoIXN0YXRlLnJlYWRpbmcpIHtcbiAgICAgICAgcHJvY2Vzc05leHRUaWNrKG5SZWFkaW5nTmV4dFRpY2ssIHRoaXMpO1xuICAgICAgfSBlbHNlIGlmIChzdGF0ZS5sZW5ndGgpIHtcbiAgICAgICAgZW1pdFJlYWRhYmxlKHRoaXMpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiByZXM7XG59O1xuUmVhZGFibGUucHJvdG90eXBlLmFkZExpc3RlbmVyID0gUmVhZGFibGUucHJvdG90eXBlLm9uO1xuXG5mdW5jdGlvbiBuUmVhZGluZ05leHRUaWNrKHNlbGYpIHtcbiAgZGVidWcoJ3JlYWRhYmxlIG5leHR0aWNrIHJlYWQgMCcpO1xuICBzZWxmLnJlYWQoMCk7XG59XG5cbi8vIHBhdXNlKCkgYW5kIHJlc3VtZSgpIGFyZSByZW1uYW50cyBvZiB0aGUgbGVnYWN5IHJlYWRhYmxlIHN0cmVhbSBBUElcbi8vIElmIHRoZSB1c2VyIHVzZXMgdGhlbSwgdGhlbiBzd2l0Y2ggaW50byBvbGQgbW9kZS5cblJlYWRhYmxlLnByb3RvdHlwZS5yZXN1bWUgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBzdGF0ZSA9IHRoaXMuX3JlYWRhYmxlU3RhdGU7XG4gIGlmICghc3RhdGUuZmxvd2luZykge1xuICAgIGRlYnVnKCdyZXN1bWUnKTtcbiAgICBzdGF0ZS5mbG93aW5nID0gdHJ1ZTtcbiAgICByZXN1bWUodGhpcywgc3RhdGUpO1xuICB9XG4gIHJldHVybiB0aGlzO1xufTtcblxuZnVuY3Rpb24gcmVzdW1lKHN0cmVhbSwgc3RhdGUpIHtcbiAgaWYgKCFzdGF0ZS5yZXN1bWVTY2hlZHVsZWQpIHtcbiAgICBzdGF0ZS5yZXN1bWVTY2hlZHVsZWQgPSB0cnVlO1xuICAgIHByb2Nlc3NOZXh0VGljayhyZXN1bWVfLCBzdHJlYW0sIHN0YXRlKTtcbiAgfVxufVxuXG5mdW5jdGlvbiByZXN1bWVfKHN0cmVhbSwgc3RhdGUpIHtcbiAgaWYgKCFzdGF0ZS5yZWFkaW5nKSB7XG4gICAgZGVidWcoJ3Jlc3VtZSByZWFkIDAnKTtcbiAgICBzdHJlYW0ucmVhZCgwKTtcbiAgfVxuXG4gIHN0YXRlLnJlc3VtZVNjaGVkdWxlZCA9IGZhbHNlO1xuICBzdGF0ZS5hd2FpdERyYWluID0gMDtcbiAgc3RyZWFtLmVtaXQoJ3Jlc3VtZScpO1xuICBmbG93KHN0cmVhbSk7XG4gIGlmIChzdGF0ZS5mbG93aW5nICYmICFzdGF0ZS5yZWFkaW5nKSBzdHJlYW0ucmVhZCgwKTtcbn1cblxuUmVhZGFibGUucHJvdG90eXBlLnBhdXNlID0gZnVuY3Rpb24gKCkge1xuICBkZWJ1ZygnY2FsbCBwYXVzZSBmbG93aW5nPSVqJywgdGhpcy5fcmVhZGFibGVTdGF0ZS5mbG93aW5nKTtcbiAgaWYgKGZhbHNlICE9PSB0aGlzLl9yZWFkYWJsZVN0YXRlLmZsb3dpbmcpIHtcbiAgICBkZWJ1ZygncGF1c2UnKTtcbiAgICB0aGlzLl9yZWFkYWJsZVN0YXRlLmZsb3dpbmcgPSBmYWxzZTtcbiAgICB0aGlzLmVtaXQoJ3BhdXNlJyk7XG4gIH1cbiAgcmV0dXJuIHRoaXM7XG59O1xuXG5mdW5jdGlvbiBmbG93KHN0cmVhbSkge1xuICB2YXIgc3RhdGUgPSBzdHJlYW0uX3JlYWRhYmxlU3RhdGU7XG4gIGRlYnVnKCdmbG93Jywgc3RhdGUuZmxvd2luZyk7XG4gIHdoaWxlIChzdGF0ZS5mbG93aW5nICYmIHN0cmVhbS5yZWFkKCkgIT09IG51bGwpIHt9XG59XG5cbi8vIHdyYXAgYW4gb2xkLXN0eWxlIHN0cmVhbSBhcyB0aGUgYXN5bmMgZGF0YSBzb3VyY2UuXG4vLyBUaGlzIGlzICpub3QqIHBhcnQgb2YgdGhlIHJlYWRhYmxlIHN0cmVhbSBpbnRlcmZhY2UuXG4vLyBJdCBpcyBhbiB1Z2x5IHVuZm9ydHVuYXRlIG1lc3Mgb2YgaGlzdG9yeS5cblJlYWRhYmxlLnByb3RvdHlwZS53cmFwID0gZnVuY3Rpb24gKHN0cmVhbSkge1xuICB2YXIgc3RhdGUgPSB0aGlzLl9yZWFkYWJsZVN0YXRlO1xuICB2YXIgcGF1c2VkID0gZmFsc2U7XG5cbiAgdmFyIHNlbGYgPSB0aGlzO1xuICBzdHJlYW0ub24oJ2VuZCcsIGZ1bmN0aW9uICgpIHtcbiAgICBkZWJ1Zygnd3JhcHBlZCBlbmQnKTtcbiAgICBpZiAoc3RhdGUuZGVjb2RlciAmJiAhc3RhdGUuZW5kZWQpIHtcbiAgICAgIHZhciBjaHVuayA9IHN0YXRlLmRlY29kZXIuZW5kKCk7XG4gICAgICBpZiAoY2h1bmsgJiYgY2h1bmsubGVuZ3RoKSBzZWxmLnB1c2goY2h1bmspO1xuICAgIH1cblxuICAgIHNlbGYucHVzaChudWxsKTtcbiAgfSk7XG5cbiAgc3RyZWFtLm9uKCdkYXRhJywgZnVuY3Rpb24gKGNodW5rKSB7XG4gICAgZGVidWcoJ3dyYXBwZWQgZGF0YScpO1xuICAgIGlmIChzdGF0ZS5kZWNvZGVyKSBjaHVuayA9IHN0YXRlLmRlY29kZXIud3JpdGUoY2h1bmspO1xuXG4gICAgLy8gZG9uJ3Qgc2tpcCBvdmVyIGZhbHN5IHZhbHVlcyBpbiBvYmplY3RNb2RlXG4gICAgaWYgKHN0YXRlLm9iamVjdE1vZGUgJiYgKGNodW5rID09PSBudWxsIHx8IGNodW5rID09PSB1bmRlZmluZWQpKSByZXR1cm47ZWxzZSBpZiAoIXN0YXRlLm9iamVjdE1vZGUgJiYgKCFjaHVuayB8fCAhY2h1bmsubGVuZ3RoKSkgcmV0dXJuO1xuXG4gICAgdmFyIHJldCA9IHNlbGYucHVzaChjaHVuayk7XG4gICAgaWYgKCFyZXQpIHtcbiAgICAgIHBhdXNlZCA9IHRydWU7XG4gICAgICBzdHJlYW0ucGF1c2UoKTtcbiAgICB9XG4gIH0pO1xuXG4gIC8vIHByb3h5IGFsbCB0aGUgb3RoZXIgbWV0aG9kcy5cbiAgLy8gaW1wb3J0YW50IHdoZW4gd3JhcHBpbmcgZmlsdGVycyBhbmQgZHVwbGV4ZXMuXG4gIGZvciAodmFyIGkgaW4gc3RyZWFtKSB7XG4gICAgaWYgKHRoaXNbaV0gPT09IHVuZGVmaW5lZCAmJiB0eXBlb2Ygc3RyZWFtW2ldID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICB0aGlzW2ldID0gZnVuY3Rpb24gKG1ldGhvZCkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHJldHVybiBzdHJlYW1bbWV0aG9kXS5hcHBseShzdHJlYW0sIGFyZ3VtZW50cyk7XG4gICAgICAgIH07XG4gICAgICB9KGkpO1xuICAgIH1cbiAgfVxuXG4gIC8vIHByb3h5IGNlcnRhaW4gaW1wb3J0YW50IGV2ZW50cy5cbiAgZm9yICh2YXIgbiA9IDA7IG4gPCBrUHJveHlFdmVudHMubGVuZ3RoOyBuKyspIHtcbiAgICBzdHJlYW0ub24oa1Byb3h5RXZlbnRzW25dLCBzZWxmLmVtaXQuYmluZChzZWxmLCBrUHJveHlFdmVudHNbbl0pKTtcbiAgfVxuXG4gIC8vIHdoZW4gd2UgdHJ5IHRvIGNvbnN1bWUgc29tZSBtb3JlIGJ5dGVzLCBzaW1wbHkgdW5wYXVzZSB0aGVcbiAgLy8gdW5kZXJseWluZyBzdHJlYW0uXG4gIHNlbGYuX3JlYWQgPSBmdW5jdGlvbiAobikge1xuICAgIGRlYnVnKCd3cmFwcGVkIF9yZWFkJywgbik7XG4gICAgaWYgKHBhdXNlZCkge1xuICAgICAgcGF1c2VkID0gZmFsc2U7XG4gICAgICBzdHJlYW0ucmVzdW1lKCk7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBzZWxmO1xufTtcblxuLy8gZXhwb3NlZCBmb3IgdGVzdGluZyBwdXJwb3NlcyBvbmx5LlxuUmVhZGFibGUuX2Zyb21MaXN0ID0gZnJvbUxpc3Q7XG5cbi8vIFBsdWNrIG9mZiBuIGJ5dGVzIGZyb20gYW4gYXJyYXkgb2YgYnVmZmVycy5cbi8vIExlbmd0aCBpcyB0aGUgY29tYmluZWQgbGVuZ3RocyBvZiBhbGwgdGhlIGJ1ZmZlcnMgaW4gdGhlIGxpc3QuXG4vLyBUaGlzIGZ1bmN0aW9uIGlzIGRlc2lnbmVkIHRvIGJlIGlubGluYWJsZSwgc28gcGxlYXNlIHRha2UgY2FyZSB3aGVuIG1ha2luZ1xuLy8gY2hhbmdlcyB0byB0aGUgZnVuY3Rpb24gYm9keS5cbmZ1bmN0aW9uIGZyb21MaXN0KG4sIHN0YXRlKSB7XG4gIC8vIG5vdGhpbmcgYnVmZmVyZWRcbiAgaWYgKHN0YXRlLmxlbmd0aCA9PT0gMCkgcmV0dXJuIG51bGw7XG5cbiAgdmFyIHJldDtcbiAgaWYgKHN0YXRlLm9iamVjdE1vZGUpIHJldCA9IHN0YXRlLmJ1ZmZlci5zaGlmdCgpO2Vsc2UgaWYgKCFuIHx8IG4gPj0gc3RhdGUubGVuZ3RoKSB7XG4gICAgLy8gcmVhZCBpdCBhbGwsIHRydW5jYXRlIHRoZSBsaXN0XG4gICAgaWYgKHN0YXRlLmRlY29kZXIpIHJldCA9IHN0YXRlLmJ1ZmZlci5qb2luKCcnKTtlbHNlIGlmIChzdGF0ZS5idWZmZXIubGVuZ3RoID09PSAxKSByZXQgPSBzdGF0ZS5idWZmZXIuaGVhZC5kYXRhO2Vsc2UgcmV0ID0gc3RhdGUuYnVmZmVyLmNvbmNhdChzdGF0ZS5sZW5ndGgpO1xuICAgIHN0YXRlLmJ1ZmZlci5jbGVhcigpO1xuICB9IGVsc2Uge1xuICAgIC8vIHJlYWQgcGFydCBvZiBsaXN0XG4gICAgcmV0ID0gZnJvbUxpc3RQYXJ0aWFsKG4sIHN0YXRlLmJ1ZmZlciwgc3RhdGUuZGVjb2Rlcik7XG4gIH1cblxuICByZXR1cm4gcmV0O1xufVxuXG4vLyBFeHRyYWN0cyBvbmx5IGVub3VnaCBidWZmZXJlZCBkYXRhIHRvIHNhdGlzZnkgdGhlIGFtb3VudCByZXF1ZXN0ZWQuXG4vLyBUaGlzIGZ1bmN0aW9uIGlzIGRlc2lnbmVkIHRvIGJlIGlubGluYWJsZSwgc28gcGxlYXNlIHRha2UgY2FyZSB3aGVuIG1ha2luZ1xuLy8gY2hhbmdlcyB0byB0aGUgZnVuY3Rpb24gYm9keS5cbmZ1bmN0aW9uIGZyb21MaXN0UGFydGlhbChuLCBsaXN0LCBoYXNTdHJpbmdzKSB7XG4gIHZhciByZXQ7XG4gIGlmIChuIDwgbGlzdC5oZWFkLmRhdGEubGVuZ3RoKSB7XG4gICAgLy8gc2xpY2UgaXMgdGhlIHNhbWUgZm9yIGJ1ZmZlcnMgYW5kIHN0cmluZ3NcbiAgICByZXQgPSBsaXN0LmhlYWQuZGF0YS5zbGljZSgwLCBuKTtcbiAgICBsaXN0LmhlYWQuZGF0YSA9IGxpc3QuaGVhZC5kYXRhLnNsaWNlKG4pO1xuICB9IGVsc2UgaWYgKG4gPT09IGxpc3QuaGVhZC5kYXRhLmxlbmd0aCkge1xuICAgIC8vIGZpcnN0IGNodW5rIGlzIGEgcGVyZmVjdCBtYXRjaFxuICAgIHJldCA9IGxpc3Quc2hpZnQoKTtcbiAgfSBlbHNlIHtcbiAgICAvLyByZXN1bHQgc3BhbnMgbW9yZSB0aGFuIG9uZSBidWZmZXJcbiAgICByZXQgPSBoYXNTdHJpbmdzID8gY29weUZyb21CdWZmZXJTdHJpbmcobiwgbGlzdCkgOiBjb3B5RnJvbUJ1ZmZlcihuLCBsaXN0KTtcbiAgfVxuICByZXR1cm4gcmV0O1xufVxuXG4vLyBDb3BpZXMgYSBzcGVjaWZpZWQgYW1vdW50IG9mIGNoYXJhY3RlcnMgZnJvbSB0aGUgbGlzdCBvZiBidWZmZXJlZCBkYXRhXG4vLyBjaHVua3MuXG4vLyBUaGlzIGZ1bmN0aW9uIGlzIGRlc2lnbmVkIHRvIGJlIGlubGluYWJsZSwgc28gcGxlYXNlIHRha2UgY2FyZSB3aGVuIG1ha2luZ1xuLy8gY2hhbmdlcyB0byB0aGUgZnVuY3Rpb24gYm9keS5cbmZ1bmN0aW9uIGNvcHlGcm9tQnVmZmVyU3RyaW5nKG4sIGxpc3QpIHtcbiAgdmFyIHAgPSBsaXN0LmhlYWQ7XG4gIHZhciBjID0gMTtcbiAgdmFyIHJldCA9IHAuZGF0YTtcbiAgbiAtPSByZXQubGVuZ3RoO1xuICB3aGlsZSAocCA9IHAubmV4dCkge1xuICAgIHZhciBzdHIgPSBwLmRhdGE7XG4gICAgdmFyIG5iID0gbiA+IHN0ci5sZW5ndGggPyBzdHIubGVuZ3RoIDogbjtcbiAgICBpZiAobmIgPT09IHN0ci5sZW5ndGgpIHJldCArPSBzdHI7ZWxzZSByZXQgKz0gc3RyLnNsaWNlKDAsIG4pO1xuICAgIG4gLT0gbmI7XG4gICAgaWYgKG4gPT09IDApIHtcbiAgICAgIGlmIChuYiA9PT0gc3RyLmxlbmd0aCkge1xuICAgICAgICArK2M7XG4gICAgICAgIGlmIChwLm5leHQpIGxpc3QuaGVhZCA9IHAubmV4dDtlbHNlIGxpc3QuaGVhZCA9IGxpc3QudGFpbCA9IG51bGw7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsaXN0LmhlYWQgPSBwO1xuICAgICAgICBwLmRhdGEgPSBzdHIuc2xpY2UobmIpO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgfVxuICAgICsrYztcbiAgfVxuICBsaXN0Lmxlbmd0aCAtPSBjO1xuICByZXR1cm4gcmV0O1xufVxuXG4vLyBDb3BpZXMgYSBzcGVjaWZpZWQgYW1vdW50IG9mIGJ5dGVzIGZyb20gdGhlIGxpc3Qgb2YgYnVmZmVyZWQgZGF0YSBjaHVua3MuXG4vLyBUaGlzIGZ1bmN0aW9uIGlzIGRlc2lnbmVkIHRvIGJlIGlubGluYWJsZSwgc28gcGxlYXNlIHRha2UgY2FyZSB3aGVuIG1ha2luZ1xuLy8gY2hhbmdlcyB0byB0aGUgZnVuY3Rpb24gYm9keS5cbmZ1bmN0aW9uIGNvcHlGcm9tQnVmZmVyKG4sIGxpc3QpIHtcbiAgdmFyIHJldCA9IEJ1ZmZlci5hbGxvY1Vuc2FmZShuKTtcbiAgdmFyIHAgPSBsaXN0LmhlYWQ7XG4gIHZhciBjID0gMTtcbiAgcC5kYXRhLmNvcHkocmV0KTtcbiAgbiAtPSBwLmRhdGEubGVuZ3RoO1xuICB3aGlsZSAocCA9IHAubmV4dCkge1xuICAgIHZhciBidWYgPSBwLmRhdGE7XG4gICAgdmFyIG5iID0gbiA+IGJ1Zi5sZW5ndGggPyBidWYubGVuZ3RoIDogbjtcbiAgICBidWYuY29weShyZXQsIHJldC5sZW5ndGggLSBuLCAwLCBuYik7XG4gICAgbiAtPSBuYjtcbiAgICBpZiAobiA9PT0gMCkge1xuICAgICAgaWYgKG5iID09PSBidWYubGVuZ3RoKSB7XG4gICAgICAgICsrYztcbiAgICAgICAgaWYgKHAubmV4dCkgbGlzdC5oZWFkID0gcC5uZXh0O2Vsc2UgbGlzdC5oZWFkID0gbGlzdC50YWlsID0gbnVsbDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxpc3QuaGVhZCA9IHA7XG4gICAgICAgIHAuZGF0YSA9IGJ1Zi5zbGljZShuYik7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICB9XG4gICAgKytjO1xuICB9XG4gIGxpc3QubGVuZ3RoIC09IGM7XG4gIHJldHVybiByZXQ7XG59XG5cbmZ1bmN0aW9uIGVuZFJlYWRhYmxlKHN0cmVhbSkge1xuICB2YXIgc3RhdGUgPSBzdHJlYW0uX3JlYWRhYmxlU3RhdGU7XG5cbiAgLy8gSWYgd2UgZ2V0IGhlcmUgYmVmb3JlIGNvbnN1bWluZyBhbGwgdGhlIGJ5dGVzLCB0aGVuIHRoYXQgaXMgYVxuICAvLyBidWcgaW4gbm9kZS4gIFNob3VsZCBuZXZlciBoYXBwZW4uXG4gIGlmIChzdGF0ZS5sZW5ndGggPiAwKSB0aHJvdyBuZXcgRXJyb3IoJ1wiZW5kUmVhZGFibGUoKVwiIGNhbGxlZCBvbiBub24tZW1wdHkgc3RyZWFtJyk7XG5cbiAgaWYgKCFzdGF0ZS5lbmRFbWl0dGVkKSB7XG4gICAgc3RhdGUuZW5kZWQgPSB0cnVlO1xuICAgIHByb2Nlc3NOZXh0VGljayhlbmRSZWFkYWJsZU5ULCBzdGF0ZSwgc3RyZWFtKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBlbmRSZWFkYWJsZU5UKHN0YXRlLCBzdHJlYW0pIHtcbiAgLy8gQ2hlY2sgdGhhdCB3ZSBkaWRuJ3QgZ2V0IG9uZSBsYXN0IHVuc2hpZnQuXG4gIGlmICghc3RhdGUuZW5kRW1pdHRlZCAmJiBzdGF0ZS5sZW5ndGggPT09IDApIHtcbiAgICBzdGF0ZS5lbmRFbWl0dGVkID0gdHJ1ZTtcbiAgICBzdHJlYW0ucmVhZGFibGUgPSBmYWxzZTtcbiAgICBzdHJlYW0uZW1pdCgnZW5kJyk7XG4gIH1cbn1cblxuZnVuY3Rpb24gZm9yRWFjaCh4cywgZikge1xuICBmb3IgKHZhciBpID0gMCwgbCA9IHhzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIGYoeHNbaV0sIGkpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGluZGV4T2YoeHMsIHgpIHtcbiAgZm9yICh2YXIgaSA9IDAsIGwgPSB4cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICBpZiAoeHNbaV0gPT09IHgpIHJldHVybiBpO1xuICB9XG4gIHJldHVybiAtMTtcbn1cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBjOi9qZW5raW5zL3dvcmtzcGFjZS9jYW1fc2J4X2FsbF9tYXN0ZXJfc2lnbmVkL3NieC1hbGwtc2lnbmVkL25vZGVfbW9kdWxlcy9zdHJlYW0tYnJvd3NlcmlmeS9ub2RlX21vZHVsZXMvcmVhZGFibGUtc3RyZWFtL2xpYi9fc3RyZWFtX3JlYWRhYmxlLmpzXG4vLyBtb2R1bGUgaWQgPSA0MVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJ2V2ZW50cycpLkV2ZW50RW1pdHRlcjtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGM6L2plbmtpbnMvd29ya3NwYWNlL2NhbV9zYnhfYWxsX21hc3Rlcl9zaWduZWQvc2J4LWFsbC1zaWduZWQvbm9kZV9tb2R1bGVzL3N0cmVhbS1icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9yZWFkYWJsZS1zdHJlYW0vbGliL2ludGVybmFsL3N0cmVhbXMvc3RyZWFtLWJyb3dzZXIuanNcbi8vIG1vZHVsZSBpZCA9IDQyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qIVxuICogVGhlIGJ1ZmZlciBtb2R1bGUgZnJvbSBub2RlLmpzLCBmb3IgdGhlIGJyb3dzZXIuXG4gKlxuICogQGF1dGhvciAgIEZlcm9zcyBBYm91a2hhZGlqZWggPGZlcm9zc0BmZXJvc3Mub3JnPiA8aHR0cDovL2Zlcm9zcy5vcmc+XG4gKiBAbGljZW5zZSAgTUlUXG4gKi9cbi8qIGVzbGludC1kaXNhYmxlIG5vLXByb3RvICovXG5cbid1c2Ugc3RyaWN0J1xuXG52YXIgYmFzZTY0ID0gcmVxdWlyZSgnYmFzZTY0LWpzJylcbnZhciBpZWVlNzU0ID0gcmVxdWlyZSgnaWVlZTc1NCcpXG52YXIgaXNBcnJheSA9IHJlcXVpcmUoJ2lzYXJyYXknKVxuXG5leHBvcnRzLkJ1ZmZlciA9IEJ1ZmZlclxuZXhwb3J0cy5TbG93QnVmZmVyID0gU2xvd0J1ZmZlclxuZXhwb3J0cy5JTlNQRUNUX01BWF9CWVRFUyA9IDUwXG5cbi8qKlxuICogSWYgYEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUYDpcbiAqICAgPT09IHRydWUgICAgVXNlIFVpbnQ4QXJyYXkgaW1wbGVtZW50YXRpb24gKGZhc3Rlc3QpXG4gKiAgID09PSBmYWxzZSAgIFVzZSBPYmplY3QgaW1wbGVtZW50YXRpb24gKG1vc3QgY29tcGF0aWJsZSwgZXZlbiBJRTYpXG4gKlxuICogQnJvd3NlcnMgdGhhdCBzdXBwb3J0IHR5cGVkIGFycmF5cyBhcmUgSUUgMTArLCBGaXJlZm94IDQrLCBDaHJvbWUgNyssIFNhZmFyaSA1LjErLFxuICogT3BlcmEgMTEuNissIGlPUyA0LjIrLlxuICpcbiAqIER1ZSB0byB2YXJpb3VzIGJyb3dzZXIgYnVncywgc29tZXRpbWVzIHRoZSBPYmplY3QgaW1wbGVtZW50YXRpb24gd2lsbCBiZSB1c2VkIGV2ZW5cbiAqIHdoZW4gdGhlIGJyb3dzZXIgc3VwcG9ydHMgdHlwZWQgYXJyYXlzLlxuICpcbiAqIE5vdGU6XG4gKlxuICogICAtIEZpcmVmb3ggNC0yOSBsYWNrcyBzdXBwb3J0IGZvciBhZGRpbmcgbmV3IHByb3BlcnRpZXMgdG8gYFVpbnQ4QXJyYXlgIGluc3RhbmNlcyxcbiAqICAgICBTZWU6IGh0dHBzOi8vYnVnemlsbGEubW96aWxsYS5vcmcvc2hvd19idWcuY2dpP2lkPTY5NTQzOC5cbiAqXG4gKiAgIC0gQ2hyb21lIDktMTAgaXMgbWlzc2luZyB0aGUgYFR5cGVkQXJyYXkucHJvdG90eXBlLnN1YmFycmF5YCBmdW5jdGlvbi5cbiAqXG4gKiAgIC0gSUUxMCBoYXMgYSBicm9rZW4gYFR5cGVkQXJyYXkucHJvdG90eXBlLnN1YmFycmF5YCBmdW5jdGlvbiB3aGljaCByZXR1cm5zIGFycmF5cyBvZlxuICogICAgIGluY29ycmVjdCBsZW5ndGggaW4gc29tZSBzaXR1YXRpb25zLlxuXG4gKiBXZSBkZXRlY3QgdGhlc2UgYnVnZ3kgYnJvd3NlcnMgYW5kIHNldCBgQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlRgIHRvIGBmYWxzZWAgc28gdGhleVxuICogZ2V0IHRoZSBPYmplY3QgaW1wbGVtZW50YXRpb24sIHdoaWNoIGlzIHNsb3dlciBidXQgYmVoYXZlcyBjb3JyZWN0bHkuXG4gKi9cbkJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUID0gZ2xvYmFsLlRZUEVEX0FSUkFZX1NVUFBPUlQgIT09IHVuZGVmaW5lZFxuICA/IGdsb2JhbC5UWVBFRF9BUlJBWV9TVVBQT1JUXG4gIDogdHlwZWRBcnJheVN1cHBvcnQoKVxuXG4vKlxuICogRXhwb3J0IGtNYXhMZW5ndGggYWZ0ZXIgdHlwZWQgYXJyYXkgc3VwcG9ydCBpcyBkZXRlcm1pbmVkLlxuICovXG5leHBvcnRzLmtNYXhMZW5ndGggPSBrTWF4TGVuZ3RoKClcblxuZnVuY3Rpb24gdHlwZWRBcnJheVN1cHBvcnQgKCkge1xuICB0cnkge1xuICAgIHZhciBhcnIgPSBuZXcgVWludDhBcnJheSgxKVxuICAgIGFyci5fX3Byb3RvX18gPSB7X19wcm90b19fOiBVaW50OEFycmF5LnByb3RvdHlwZSwgZm9vOiBmdW5jdGlvbiAoKSB7IHJldHVybiA0MiB9fVxuICAgIHJldHVybiBhcnIuZm9vKCkgPT09IDQyICYmIC8vIHR5cGVkIGFycmF5IGluc3RhbmNlcyBjYW4gYmUgYXVnbWVudGVkXG4gICAgICAgIHR5cGVvZiBhcnIuc3ViYXJyYXkgPT09ICdmdW5jdGlvbicgJiYgLy8gY2hyb21lIDktMTAgbGFjayBgc3ViYXJyYXlgXG4gICAgICAgIGFyci5zdWJhcnJheSgxLCAxKS5ieXRlTGVuZ3RoID09PSAwIC8vIGllMTAgaGFzIGJyb2tlbiBgc3ViYXJyYXlgXG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxufVxuXG5mdW5jdGlvbiBrTWF4TGVuZ3RoICgpIHtcbiAgcmV0dXJuIEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUXG4gICAgPyAweDdmZmZmZmZmXG4gICAgOiAweDNmZmZmZmZmXG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUJ1ZmZlciAodGhhdCwgbGVuZ3RoKSB7XG4gIGlmIChrTWF4TGVuZ3RoKCkgPCBsZW5ndGgpIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignSW52YWxpZCB0eXBlZCBhcnJheSBsZW5ndGgnKVxuICB9XG4gIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIC8vIFJldHVybiBhbiBhdWdtZW50ZWQgYFVpbnQ4QXJyYXlgIGluc3RhbmNlLCBmb3IgYmVzdCBwZXJmb3JtYW5jZVxuICAgIHRoYXQgPSBuZXcgVWludDhBcnJheShsZW5ndGgpXG4gICAgdGhhdC5fX3Byb3RvX18gPSBCdWZmZXIucHJvdG90eXBlXG4gIH0gZWxzZSB7XG4gICAgLy8gRmFsbGJhY2s6IFJldHVybiBhbiBvYmplY3QgaW5zdGFuY2Ugb2YgdGhlIEJ1ZmZlciBjbGFzc1xuICAgIGlmICh0aGF0ID09PSBudWxsKSB7XG4gICAgICB0aGF0ID0gbmV3IEJ1ZmZlcihsZW5ndGgpXG4gICAgfVxuICAgIHRoYXQubGVuZ3RoID0gbGVuZ3RoXG4gIH1cblxuICByZXR1cm4gdGhhdFxufVxuXG4vKipcbiAqIFRoZSBCdWZmZXIgY29uc3RydWN0b3IgcmV0dXJucyBpbnN0YW5jZXMgb2YgYFVpbnQ4QXJyYXlgIHRoYXQgaGF2ZSB0aGVpclxuICogcHJvdG90eXBlIGNoYW5nZWQgdG8gYEJ1ZmZlci5wcm90b3R5cGVgLiBGdXJ0aGVybW9yZSwgYEJ1ZmZlcmAgaXMgYSBzdWJjbGFzcyBvZlxuICogYFVpbnQ4QXJyYXlgLCBzbyB0aGUgcmV0dXJuZWQgaW5zdGFuY2VzIHdpbGwgaGF2ZSBhbGwgdGhlIG5vZGUgYEJ1ZmZlcmAgbWV0aG9kc1xuICogYW5kIHRoZSBgVWludDhBcnJheWAgbWV0aG9kcy4gU3F1YXJlIGJyYWNrZXQgbm90YXRpb24gd29ya3MgYXMgZXhwZWN0ZWQgLS0gaXRcbiAqIHJldHVybnMgYSBzaW5nbGUgb2N0ZXQuXG4gKlxuICogVGhlIGBVaW50OEFycmF5YCBwcm90b3R5cGUgcmVtYWlucyB1bm1vZGlmaWVkLlxuICovXG5cbmZ1bmN0aW9uIEJ1ZmZlciAoYXJnLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpIHtcbiAgaWYgKCFCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCAmJiAhKHRoaXMgaW5zdGFuY2VvZiBCdWZmZXIpKSB7XG4gICAgcmV0dXJuIG5ldyBCdWZmZXIoYXJnLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpXG4gIH1cblxuICAvLyBDb21tb24gY2FzZS5cbiAgaWYgKHR5cGVvZiBhcmcgPT09ICdudW1iZXInKSB7XG4gICAgaWYgKHR5cGVvZiBlbmNvZGluZ09yT2Zmc2V0ID09PSAnc3RyaW5nJykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAnSWYgZW5jb2RpbmcgaXMgc3BlY2lmaWVkIHRoZW4gdGhlIGZpcnN0IGFyZ3VtZW50IG11c3QgYmUgYSBzdHJpbmcnXG4gICAgICApXG4gICAgfVxuICAgIHJldHVybiBhbGxvY1Vuc2FmZSh0aGlzLCBhcmcpXG4gIH1cbiAgcmV0dXJuIGZyb20odGhpcywgYXJnLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpXG59XG5cbkJ1ZmZlci5wb29sU2l6ZSA9IDgxOTIgLy8gbm90IHVzZWQgYnkgdGhpcyBpbXBsZW1lbnRhdGlvblxuXG4vLyBUT0RPOiBMZWdhY3ksIG5vdCBuZWVkZWQgYW55bW9yZS4gUmVtb3ZlIGluIG5leHQgbWFqb3IgdmVyc2lvbi5cbkJ1ZmZlci5fYXVnbWVudCA9IGZ1bmN0aW9uIChhcnIpIHtcbiAgYXJyLl9fcHJvdG9fXyA9IEJ1ZmZlci5wcm90b3R5cGVcbiAgcmV0dXJuIGFyclxufVxuXG5mdW5jdGlvbiBmcm9tICh0aGF0LCB2YWx1ZSwgZW5jb2RpbmdPck9mZnNldCwgbGVuZ3RoKSB7XG4gIGlmICh0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignXCJ2YWx1ZVwiIGFyZ3VtZW50IG11c3Qgbm90IGJlIGEgbnVtYmVyJylcbiAgfVxuXG4gIGlmICh0eXBlb2YgQXJyYXlCdWZmZXIgIT09ICd1bmRlZmluZWQnICYmIHZhbHVlIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHtcbiAgICByZXR1cm4gZnJvbUFycmF5QnVmZmVyKHRoYXQsIHZhbHVlLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpXG4gIH1cblxuICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykge1xuICAgIHJldHVybiBmcm9tU3RyaW5nKHRoYXQsIHZhbHVlLCBlbmNvZGluZ09yT2Zmc2V0KVxuICB9XG5cbiAgcmV0dXJuIGZyb21PYmplY3QodGhhdCwgdmFsdWUpXG59XG5cbi8qKlxuICogRnVuY3Rpb25hbGx5IGVxdWl2YWxlbnQgdG8gQnVmZmVyKGFyZywgZW5jb2RpbmcpIGJ1dCB0aHJvd3MgYSBUeXBlRXJyb3JcbiAqIGlmIHZhbHVlIGlzIGEgbnVtYmVyLlxuICogQnVmZmVyLmZyb20oc3RyWywgZW5jb2RpbmddKVxuICogQnVmZmVyLmZyb20oYXJyYXkpXG4gKiBCdWZmZXIuZnJvbShidWZmZXIpXG4gKiBCdWZmZXIuZnJvbShhcnJheUJ1ZmZlclssIGJ5dGVPZmZzZXRbLCBsZW5ndGhdXSlcbiAqKi9cbkJ1ZmZlci5mcm9tID0gZnVuY3Rpb24gKHZhbHVlLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpIHtcbiAgcmV0dXJuIGZyb20obnVsbCwgdmFsdWUsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aClcbn1cblxuaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gIEJ1ZmZlci5wcm90b3R5cGUuX19wcm90b19fID0gVWludDhBcnJheS5wcm90b3R5cGVcbiAgQnVmZmVyLl9fcHJvdG9fXyA9IFVpbnQ4QXJyYXlcbiAgaWYgKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC5zcGVjaWVzICYmXG4gICAgICBCdWZmZXJbU3ltYm9sLnNwZWNpZXNdID09PSBCdWZmZXIpIHtcbiAgICAvLyBGaXggc3ViYXJyYXkoKSBpbiBFUzIwMTYuIFNlZTogaHR0cHM6Ly9naXRodWIuY29tL2Zlcm9zcy9idWZmZXIvcHVsbC85N1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShCdWZmZXIsIFN5bWJvbC5zcGVjaWVzLCB7XG4gICAgICB2YWx1ZTogbnVsbCxcbiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pXG4gIH1cbn1cblxuZnVuY3Rpb24gYXNzZXJ0U2l6ZSAoc2l6ZSkge1xuICBpZiAodHlwZW9mIHNpemUgIT09ICdudW1iZXInKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignXCJzaXplXCIgYXJndW1lbnQgbXVzdCBiZSBhIG51bWJlcicpXG4gIH0gZWxzZSBpZiAoc2l6ZSA8IDApIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignXCJzaXplXCIgYXJndW1lbnQgbXVzdCBub3QgYmUgbmVnYXRpdmUnKVxuICB9XG59XG5cbmZ1bmN0aW9uIGFsbG9jICh0aGF0LCBzaXplLCBmaWxsLCBlbmNvZGluZykge1xuICBhc3NlcnRTaXplKHNpemUpXG4gIGlmIChzaXplIDw9IDApIHtcbiAgICByZXR1cm4gY3JlYXRlQnVmZmVyKHRoYXQsIHNpemUpXG4gIH1cbiAgaWYgKGZpbGwgIT09IHVuZGVmaW5lZCkge1xuICAgIC8vIE9ubHkgcGF5IGF0dGVudGlvbiB0byBlbmNvZGluZyBpZiBpdCdzIGEgc3RyaW5nLiBUaGlzXG4gICAgLy8gcHJldmVudHMgYWNjaWRlbnRhbGx5IHNlbmRpbmcgaW4gYSBudW1iZXIgdGhhdCB3b3VsZFxuICAgIC8vIGJlIGludGVycHJldHRlZCBhcyBhIHN0YXJ0IG9mZnNldC5cbiAgICByZXR1cm4gdHlwZW9mIGVuY29kaW5nID09PSAnc3RyaW5nJ1xuICAgICAgPyBjcmVhdGVCdWZmZXIodGhhdCwgc2l6ZSkuZmlsbChmaWxsLCBlbmNvZGluZylcbiAgICAgIDogY3JlYXRlQnVmZmVyKHRoYXQsIHNpemUpLmZpbGwoZmlsbClcbiAgfVxuICByZXR1cm4gY3JlYXRlQnVmZmVyKHRoYXQsIHNpemUpXG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBmaWxsZWQgQnVmZmVyIGluc3RhbmNlLlxuICogYWxsb2Moc2l6ZVssIGZpbGxbLCBlbmNvZGluZ11dKVxuICoqL1xuQnVmZmVyLmFsbG9jID0gZnVuY3Rpb24gKHNpemUsIGZpbGwsIGVuY29kaW5nKSB7XG4gIHJldHVybiBhbGxvYyhudWxsLCBzaXplLCBmaWxsLCBlbmNvZGluZylcbn1cblxuZnVuY3Rpb24gYWxsb2NVbnNhZmUgKHRoYXQsIHNpemUpIHtcbiAgYXNzZXJ0U2l6ZShzaXplKVxuICB0aGF0ID0gY3JlYXRlQnVmZmVyKHRoYXQsIHNpemUgPCAwID8gMCA6IGNoZWNrZWQoc2l6ZSkgfCAwKVxuICBpZiAoIUJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplOyArK2kpIHtcbiAgICAgIHRoYXRbaV0gPSAwXG4gICAgfVxuICB9XG4gIHJldHVybiB0aGF0XG59XG5cbi8qKlxuICogRXF1aXZhbGVudCB0byBCdWZmZXIobnVtKSwgYnkgZGVmYXVsdCBjcmVhdGVzIGEgbm9uLXplcm8tZmlsbGVkIEJ1ZmZlciBpbnN0YW5jZS5cbiAqICovXG5CdWZmZXIuYWxsb2NVbnNhZmUgPSBmdW5jdGlvbiAoc2l6ZSkge1xuICByZXR1cm4gYWxsb2NVbnNhZmUobnVsbCwgc2l6ZSlcbn1cbi8qKlxuICogRXF1aXZhbGVudCB0byBTbG93QnVmZmVyKG51bSksIGJ5IGRlZmF1bHQgY3JlYXRlcyBhIG5vbi16ZXJvLWZpbGxlZCBCdWZmZXIgaW5zdGFuY2UuXG4gKi9cbkJ1ZmZlci5hbGxvY1Vuc2FmZVNsb3cgPSBmdW5jdGlvbiAoc2l6ZSkge1xuICByZXR1cm4gYWxsb2NVbnNhZmUobnVsbCwgc2l6ZSlcbn1cblxuZnVuY3Rpb24gZnJvbVN0cmluZyAodGhhdCwgc3RyaW5nLCBlbmNvZGluZykge1xuICBpZiAodHlwZW9mIGVuY29kaW5nICE9PSAnc3RyaW5nJyB8fCBlbmNvZGluZyA9PT0gJycpIHtcbiAgICBlbmNvZGluZyA9ICd1dGY4J1xuICB9XG5cbiAgaWYgKCFCdWZmZXIuaXNFbmNvZGluZyhlbmNvZGluZykpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdcImVuY29kaW5nXCIgbXVzdCBiZSBhIHZhbGlkIHN0cmluZyBlbmNvZGluZycpXG4gIH1cblxuICB2YXIgbGVuZ3RoID0gYnl0ZUxlbmd0aChzdHJpbmcsIGVuY29kaW5nKSB8IDBcbiAgdGhhdCA9IGNyZWF0ZUJ1ZmZlcih0aGF0LCBsZW5ndGgpXG5cbiAgdmFyIGFjdHVhbCA9IHRoYXQud3JpdGUoc3RyaW5nLCBlbmNvZGluZylcblxuICBpZiAoYWN0dWFsICE9PSBsZW5ndGgpIHtcbiAgICAvLyBXcml0aW5nIGEgaGV4IHN0cmluZywgZm9yIGV4YW1wbGUsIHRoYXQgY29udGFpbnMgaW52YWxpZCBjaGFyYWN0ZXJzIHdpbGxcbiAgICAvLyBjYXVzZSBldmVyeXRoaW5nIGFmdGVyIHRoZSBmaXJzdCBpbnZhbGlkIGNoYXJhY3RlciB0byBiZSBpZ25vcmVkLiAoZS5nLlxuICAgIC8vICdhYnh4Y2QnIHdpbGwgYmUgdHJlYXRlZCBhcyAnYWInKVxuICAgIHRoYXQgPSB0aGF0LnNsaWNlKDAsIGFjdHVhbClcbiAgfVxuXG4gIHJldHVybiB0aGF0XG59XG5cbmZ1bmN0aW9uIGZyb21BcnJheUxpa2UgKHRoYXQsIGFycmF5KSB7XG4gIHZhciBsZW5ndGggPSBhcnJheS5sZW5ndGggPCAwID8gMCA6IGNoZWNrZWQoYXJyYXkubGVuZ3RoKSB8IDBcbiAgdGhhdCA9IGNyZWF0ZUJ1ZmZlcih0aGF0LCBsZW5ndGgpXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpICs9IDEpIHtcbiAgICB0aGF0W2ldID0gYXJyYXlbaV0gJiAyNTVcbiAgfVxuICByZXR1cm4gdGhhdFxufVxuXG5mdW5jdGlvbiBmcm9tQXJyYXlCdWZmZXIgKHRoYXQsIGFycmF5LCBieXRlT2Zmc2V0LCBsZW5ndGgpIHtcbiAgYXJyYXkuYnl0ZUxlbmd0aCAvLyB0aGlzIHRocm93cyBpZiBgYXJyYXlgIGlzIG5vdCBhIHZhbGlkIEFycmF5QnVmZmVyXG5cbiAgaWYgKGJ5dGVPZmZzZXQgPCAwIHx8IGFycmF5LmJ5dGVMZW5ndGggPCBieXRlT2Zmc2V0KSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1xcJ29mZnNldFxcJyBpcyBvdXQgb2YgYm91bmRzJylcbiAgfVxuXG4gIGlmIChhcnJheS5ieXRlTGVuZ3RoIDwgYnl0ZU9mZnNldCArIChsZW5ndGggfHwgMCkpIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignXFwnbGVuZ3RoXFwnIGlzIG91dCBvZiBib3VuZHMnKVxuICB9XG5cbiAgaWYgKGJ5dGVPZmZzZXQgPT09IHVuZGVmaW5lZCAmJiBsZW5ndGggPT09IHVuZGVmaW5lZCkge1xuICAgIGFycmF5ID0gbmV3IFVpbnQ4QXJyYXkoYXJyYXkpXG4gIH0gZWxzZSBpZiAobGVuZ3RoID09PSB1bmRlZmluZWQpIHtcbiAgICBhcnJheSA9IG5ldyBVaW50OEFycmF5KGFycmF5LCBieXRlT2Zmc2V0KVxuICB9IGVsc2Uge1xuICAgIGFycmF5ID0gbmV3IFVpbnQ4QXJyYXkoYXJyYXksIGJ5dGVPZmZzZXQsIGxlbmd0aClcbiAgfVxuXG4gIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIC8vIFJldHVybiBhbiBhdWdtZW50ZWQgYFVpbnQ4QXJyYXlgIGluc3RhbmNlLCBmb3IgYmVzdCBwZXJmb3JtYW5jZVxuICAgIHRoYXQgPSBhcnJheVxuICAgIHRoYXQuX19wcm90b19fID0gQnVmZmVyLnByb3RvdHlwZVxuICB9IGVsc2Uge1xuICAgIC8vIEZhbGxiYWNrOiBSZXR1cm4gYW4gb2JqZWN0IGluc3RhbmNlIG9mIHRoZSBCdWZmZXIgY2xhc3NcbiAgICB0aGF0ID0gZnJvbUFycmF5TGlrZSh0aGF0LCBhcnJheSlcbiAgfVxuICByZXR1cm4gdGhhdFxufVxuXG5mdW5jdGlvbiBmcm9tT2JqZWN0ICh0aGF0LCBvYmopIHtcbiAgaWYgKEJ1ZmZlci5pc0J1ZmZlcihvYmopKSB7XG4gICAgdmFyIGxlbiA9IGNoZWNrZWQob2JqLmxlbmd0aCkgfCAwXG4gICAgdGhhdCA9IGNyZWF0ZUJ1ZmZlcih0aGF0LCBsZW4pXG5cbiAgICBpZiAodGhhdC5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiB0aGF0XG4gICAgfVxuXG4gICAgb2JqLmNvcHkodGhhdCwgMCwgMCwgbGVuKVxuICAgIHJldHVybiB0aGF0XG4gIH1cblxuICBpZiAob2JqKSB7XG4gICAgaWYgKCh0eXBlb2YgQXJyYXlCdWZmZXIgIT09ICd1bmRlZmluZWQnICYmXG4gICAgICAgIG9iai5idWZmZXIgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikgfHwgJ2xlbmd0aCcgaW4gb2JqKSB7XG4gICAgICBpZiAodHlwZW9mIG9iai5sZW5ndGggIT09ICdudW1iZXInIHx8IGlzbmFuKG9iai5sZW5ndGgpKSB7XG4gICAgICAgIHJldHVybiBjcmVhdGVCdWZmZXIodGhhdCwgMClcbiAgICAgIH1cbiAgICAgIHJldHVybiBmcm9tQXJyYXlMaWtlKHRoYXQsIG9iailcbiAgICB9XG5cbiAgICBpZiAob2JqLnR5cGUgPT09ICdCdWZmZXInICYmIGlzQXJyYXkob2JqLmRhdGEpKSB7XG4gICAgICByZXR1cm4gZnJvbUFycmF5TGlrZSh0aGF0LCBvYmouZGF0YSlcbiAgICB9XG4gIH1cblxuICB0aHJvdyBuZXcgVHlwZUVycm9yKCdGaXJzdCBhcmd1bWVudCBtdXN0IGJlIGEgc3RyaW5nLCBCdWZmZXIsIEFycmF5QnVmZmVyLCBBcnJheSwgb3IgYXJyYXktbGlrZSBvYmplY3QuJylcbn1cblxuZnVuY3Rpb24gY2hlY2tlZCAobGVuZ3RoKSB7XG4gIC8vIE5vdGU6IGNhbm5vdCB1c2UgYGxlbmd0aCA8IGtNYXhMZW5ndGgoKWAgaGVyZSBiZWNhdXNlIHRoYXQgZmFpbHMgd2hlblxuICAvLyBsZW5ndGggaXMgTmFOICh3aGljaCBpcyBvdGhlcndpc2UgY29lcmNlZCB0byB6ZXJvLilcbiAgaWYgKGxlbmd0aCA+PSBrTWF4TGVuZ3RoKCkpIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignQXR0ZW1wdCB0byBhbGxvY2F0ZSBCdWZmZXIgbGFyZ2VyIHRoYW4gbWF4aW11bSAnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAnc2l6ZTogMHgnICsga01heExlbmd0aCgpLnRvU3RyaW5nKDE2KSArICcgYnl0ZXMnKVxuICB9XG4gIHJldHVybiBsZW5ndGggfCAwXG59XG5cbmZ1bmN0aW9uIFNsb3dCdWZmZXIgKGxlbmd0aCkge1xuICBpZiAoK2xlbmd0aCAhPSBsZW5ndGgpIHsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBlcWVxZXFcbiAgICBsZW5ndGggPSAwXG4gIH1cbiAgcmV0dXJuIEJ1ZmZlci5hbGxvYygrbGVuZ3RoKVxufVxuXG5CdWZmZXIuaXNCdWZmZXIgPSBmdW5jdGlvbiBpc0J1ZmZlciAoYikge1xuICByZXR1cm4gISEoYiAhPSBudWxsICYmIGIuX2lzQnVmZmVyKVxufVxuXG5CdWZmZXIuY29tcGFyZSA9IGZ1bmN0aW9uIGNvbXBhcmUgKGEsIGIpIHtcbiAgaWYgKCFCdWZmZXIuaXNCdWZmZXIoYSkgfHwgIUJ1ZmZlci5pc0J1ZmZlcihiKSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0FyZ3VtZW50cyBtdXN0IGJlIEJ1ZmZlcnMnKVxuICB9XG5cbiAgaWYgKGEgPT09IGIpIHJldHVybiAwXG5cbiAgdmFyIHggPSBhLmxlbmd0aFxuICB2YXIgeSA9IGIubGVuZ3RoXG5cbiAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IE1hdGgubWluKHgsIHkpOyBpIDwgbGVuOyArK2kpIHtcbiAgICBpZiAoYVtpXSAhPT0gYltpXSkge1xuICAgICAgeCA9IGFbaV1cbiAgICAgIHkgPSBiW2ldXG4gICAgICBicmVha1xuICAgIH1cbiAgfVxuXG4gIGlmICh4IDwgeSkgcmV0dXJuIC0xXG4gIGlmICh5IDwgeCkgcmV0dXJuIDFcbiAgcmV0dXJuIDBcbn1cblxuQnVmZmVyLmlzRW5jb2RpbmcgPSBmdW5jdGlvbiBpc0VuY29kaW5nIChlbmNvZGluZykge1xuICBzd2l0Y2ggKFN0cmluZyhlbmNvZGluZykudG9Mb3dlckNhc2UoKSkge1xuICAgIGNhc2UgJ2hleCc6XG4gICAgY2FzZSAndXRmOCc6XG4gICAgY2FzZSAndXRmLTgnOlxuICAgIGNhc2UgJ2FzY2lpJzpcbiAgICBjYXNlICdsYXRpbjEnOlxuICAgIGNhc2UgJ2JpbmFyeSc6XG4gICAgY2FzZSAnYmFzZTY0JzpcbiAgICBjYXNlICd1Y3MyJzpcbiAgICBjYXNlICd1Y3MtMic6XG4gICAgY2FzZSAndXRmMTZsZSc6XG4gICAgY2FzZSAndXRmLTE2bGUnOlxuICAgICAgcmV0dXJuIHRydWVcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIGZhbHNlXG4gIH1cbn1cblxuQnVmZmVyLmNvbmNhdCA9IGZ1bmN0aW9uIGNvbmNhdCAobGlzdCwgbGVuZ3RoKSB7XG4gIGlmICghaXNBcnJheShsaXN0KSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1wibGlzdFwiIGFyZ3VtZW50IG11c3QgYmUgYW4gQXJyYXkgb2YgQnVmZmVycycpXG4gIH1cblxuICBpZiAobGlzdC5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gQnVmZmVyLmFsbG9jKDApXG4gIH1cblxuICB2YXIgaVxuICBpZiAobGVuZ3RoID09PSB1bmRlZmluZWQpIHtcbiAgICBsZW5ndGggPSAwXG4gICAgZm9yIChpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyArK2kpIHtcbiAgICAgIGxlbmd0aCArPSBsaXN0W2ldLmxlbmd0aFxuICAgIH1cbiAgfVxuXG4gIHZhciBidWZmZXIgPSBCdWZmZXIuYWxsb2NVbnNhZmUobGVuZ3RoKVxuICB2YXIgcG9zID0gMFxuICBmb3IgKGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7ICsraSkge1xuICAgIHZhciBidWYgPSBsaXN0W2ldXG4gICAgaWYgKCFCdWZmZXIuaXNCdWZmZXIoYnVmKSkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignXCJsaXN0XCIgYXJndW1lbnQgbXVzdCBiZSBhbiBBcnJheSBvZiBCdWZmZXJzJylcbiAgICB9XG4gICAgYnVmLmNvcHkoYnVmZmVyLCBwb3MpXG4gICAgcG9zICs9IGJ1Zi5sZW5ndGhcbiAgfVxuICByZXR1cm4gYnVmZmVyXG59XG5cbmZ1bmN0aW9uIGJ5dGVMZW5ndGggKHN0cmluZywgZW5jb2RpbmcpIHtcbiAgaWYgKEJ1ZmZlci5pc0J1ZmZlcihzdHJpbmcpKSB7XG4gICAgcmV0dXJuIHN0cmluZy5sZW5ndGhcbiAgfVxuICBpZiAodHlwZW9mIEFycmF5QnVmZmVyICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgQXJyYXlCdWZmZXIuaXNWaWV3ID09PSAnZnVuY3Rpb24nICYmXG4gICAgICAoQXJyYXlCdWZmZXIuaXNWaWV3KHN0cmluZykgfHwgc3RyaW5nIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpKSB7XG4gICAgcmV0dXJuIHN0cmluZy5ieXRlTGVuZ3RoXG4gIH1cbiAgaWYgKHR5cGVvZiBzdHJpbmcgIT09ICdzdHJpbmcnKSB7XG4gICAgc3RyaW5nID0gJycgKyBzdHJpbmdcbiAgfVxuXG4gIHZhciBsZW4gPSBzdHJpbmcubGVuZ3RoXG4gIGlmIChsZW4gPT09IDApIHJldHVybiAwXG5cbiAgLy8gVXNlIGEgZm9yIGxvb3AgdG8gYXZvaWQgcmVjdXJzaW9uXG4gIHZhciBsb3dlcmVkQ2FzZSA9IGZhbHNlXG4gIGZvciAoOzspIHtcbiAgICBzd2l0Y2ggKGVuY29kaW5nKSB7XG4gICAgICBjYXNlICdhc2NpaSc6XG4gICAgICBjYXNlICdsYXRpbjEnOlxuICAgICAgY2FzZSAnYmluYXJ5JzpcbiAgICAgICAgcmV0dXJuIGxlblxuICAgICAgY2FzZSAndXRmOCc6XG4gICAgICBjYXNlICd1dGYtOCc6XG4gICAgICBjYXNlIHVuZGVmaW5lZDpcbiAgICAgICAgcmV0dXJuIHV0ZjhUb0J5dGVzKHN0cmluZykubGVuZ3RoXG4gICAgICBjYXNlICd1Y3MyJzpcbiAgICAgIGNhc2UgJ3Vjcy0yJzpcbiAgICAgIGNhc2UgJ3V0ZjE2bGUnOlxuICAgICAgY2FzZSAndXRmLTE2bGUnOlxuICAgICAgICByZXR1cm4gbGVuICogMlxuICAgICAgY2FzZSAnaGV4JzpcbiAgICAgICAgcmV0dXJuIGxlbiA+Pj4gMVxuICAgICAgY2FzZSAnYmFzZTY0JzpcbiAgICAgICAgcmV0dXJuIGJhc2U2NFRvQnl0ZXMoc3RyaW5nKS5sZW5ndGhcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGlmIChsb3dlcmVkQ2FzZSkgcmV0dXJuIHV0ZjhUb0J5dGVzKHN0cmluZykubGVuZ3RoIC8vIGFzc3VtZSB1dGY4XG4gICAgICAgIGVuY29kaW5nID0gKCcnICsgZW5jb2RpbmcpLnRvTG93ZXJDYXNlKClcbiAgICAgICAgbG93ZXJlZENhc2UgPSB0cnVlXG4gICAgfVxuICB9XG59XG5CdWZmZXIuYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGhcblxuZnVuY3Rpb24gc2xvd1RvU3RyaW5nIChlbmNvZGluZywgc3RhcnQsIGVuZCkge1xuICB2YXIgbG93ZXJlZENhc2UgPSBmYWxzZVxuXG4gIC8vIE5vIG5lZWQgdG8gdmVyaWZ5IHRoYXQgXCJ0aGlzLmxlbmd0aCA8PSBNQVhfVUlOVDMyXCIgc2luY2UgaXQncyBhIHJlYWQtb25seVxuICAvLyBwcm9wZXJ0eSBvZiBhIHR5cGVkIGFycmF5LlxuXG4gIC8vIFRoaXMgYmVoYXZlcyBuZWl0aGVyIGxpa2UgU3RyaW5nIG5vciBVaW50OEFycmF5IGluIHRoYXQgd2Ugc2V0IHN0YXJ0L2VuZFxuICAvLyB0byB0aGVpciB1cHBlci9sb3dlciBib3VuZHMgaWYgdGhlIHZhbHVlIHBhc3NlZCBpcyBvdXQgb2YgcmFuZ2UuXG4gIC8vIHVuZGVmaW5lZCBpcyBoYW5kbGVkIHNwZWNpYWxseSBhcyBwZXIgRUNNQS0yNjIgNnRoIEVkaXRpb24sXG4gIC8vIFNlY3Rpb24gMTMuMy4zLjcgUnVudGltZSBTZW1hbnRpY3M6IEtleWVkQmluZGluZ0luaXRpYWxpemF0aW9uLlxuICBpZiAoc3RhcnQgPT09IHVuZGVmaW5lZCB8fCBzdGFydCA8IDApIHtcbiAgICBzdGFydCA9IDBcbiAgfVxuICAvLyBSZXR1cm4gZWFybHkgaWYgc3RhcnQgPiB0aGlzLmxlbmd0aC4gRG9uZSBoZXJlIHRvIHByZXZlbnQgcG90ZW50aWFsIHVpbnQzMlxuICAvLyBjb2VyY2lvbiBmYWlsIGJlbG93LlxuICBpZiAoc3RhcnQgPiB0aGlzLmxlbmd0aCkge1xuICAgIHJldHVybiAnJ1xuICB9XG5cbiAgaWYgKGVuZCA9PT0gdW5kZWZpbmVkIHx8IGVuZCA+IHRoaXMubGVuZ3RoKSB7XG4gICAgZW5kID0gdGhpcy5sZW5ndGhcbiAgfVxuXG4gIGlmIChlbmQgPD0gMCkge1xuICAgIHJldHVybiAnJ1xuICB9XG5cbiAgLy8gRm9yY2UgY29lcnNpb24gdG8gdWludDMyLiBUaGlzIHdpbGwgYWxzbyBjb2VyY2UgZmFsc2V5L05hTiB2YWx1ZXMgdG8gMC5cbiAgZW5kID4+Pj0gMFxuICBzdGFydCA+Pj49IDBcblxuICBpZiAoZW5kIDw9IHN0YXJ0KSB7XG4gICAgcmV0dXJuICcnXG4gIH1cblxuICBpZiAoIWVuY29kaW5nKSBlbmNvZGluZyA9ICd1dGY4J1xuXG4gIHdoaWxlICh0cnVlKSB7XG4gICAgc3dpdGNoIChlbmNvZGluZykge1xuICAgICAgY2FzZSAnaGV4JzpcbiAgICAgICAgcmV0dXJuIGhleFNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpXG5cbiAgICAgIGNhc2UgJ3V0ZjgnOlxuICAgICAgY2FzZSAndXRmLTgnOlxuICAgICAgICByZXR1cm4gdXRmOFNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpXG5cbiAgICAgIGNhc2UgJ2FzY2lpJzpcbiAgICAgICAgcmV0dXJuIGFzY2lpU2xpY2UodGhpcywgc3RhcnQsIGVuZClcblxuICAgICAgY2FzZSAnbGF0aW4xJzpcbiAgICAgIGNhc2UgJ2JpbmFyeSc6XG4gICAgICAgIHJldHVybiBsYXRpbjFTbGljZSh0aGlzLCBzdGFydCwgZW5kKVxuXG4gICAgICBjYXNlICdiYXNlNjQnOlxuICAgICAgICByZXR1cm4gYmFzZTY0U2xpY2UodGhpcywgc3RhcnQsIGVuZClcblxuICAgICAgY2FzZSAndWNzMic6XG4gICAgICBjYXNlICd1Y3MtMic6XG4gICAgICBjYXNlICd1dGYxNmxlJzpcbiAgICAgIGNhc2UgJ3V0Zi0xNmxlJzpcbiAgICAgICAgcmV0dXJuIHV0ZjE2bGVTbGljZSh0aGlzLCBzdGFydCwgZW5kKVxuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBpZiAobG93ZXJlZENhc2UpIHRocm93IG5ldyBUeXBlRXJyb3IoJ1Vua25vd24gZW5jb2Rpbmc6ICcgKyBlbmNvZGluZylcbiAgICAgICAgZW5jb2RpbmcgPSAoZW5jb2RpbmcgKyAnJykudG9Mb3dlckNhc2UoKVxuICAgICAgICBsb3dlcmVkQ2FzZSA9IHRydWVcbiAgICB9XG4gIH1cbn1cblxuLy8gVGhlIHByb3BlcnR5IGlzIHVzZWQgYnkgYEJ1ZmZlci5pc0J1ZmZlcmAgYW5kIGBpcy1idWZmZXJgIChpbiBTYWZhcmkgNS03KSB0byBkZXRlY3Rcbi8vIEJ1ZmZlciBpbnN0YW5jZXMuXG5CdWZmZXIucHJvdG90eXBlLl9pc0J1ZmZlciA9IHRydWVcblxuZnVuY3Rpb24gc3dhcCAoYiwgbiwgbSkge1xuICB2YXIgaSA9IGJbbl1cbiAgYltuXSA9IGJbbV1cbiAgYlttXSA9IGlcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5zd2FwMTYgPSBmdW5jdGlvbiBzd2FwMTYgKCkge1xuICB2YXIgbGVuID0gdGhpcy5sZW5ndGhcbiAgaWYgKGxlbiAlIDIgIT09IDApIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignQnVmZmVyIHNpemUgbXVzdCBiZSBhIG11bHRpcGxlIG9mIDE2LWJpdHMnKVxuICB9XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpICs9IDIpIHtcbiAgICBzd2FwKHRoaXMsIGksIGkgKyAxKVxuICB9XG4gIHJldHVybiB0aGlzXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUuc3dhcDMyID0gZnVuY3Rpb24gc3dhcDMyICgpIHtcbiAgdmFyIGxlbiA9IHRoaXMubGVuZ3RoXG4gIGlmIChsZW4gJSA0ICE9PSAwKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0J1ZmZlciBzaXplIG11c3QgYmUgYSBtdWx0aXBsZSBvZiAzMi1iaXRzJylcbiAgfVxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSArPSA0KSB7XG4gICAgc3dhcCh0aGlzLCBpLCBpICsgMylcbiAgICBzd2FwKHRoaXMsIGkgKyAxLCBpICsgMilcbiAgfVxuICByZXR1cm4gdGhpc1xufVxuXG5CdWZmZXIucHJvdG90eXBlLnN3YXA2NCA9IGZ1bmN0aW9uIHN3YXA2NCAoKSB7XG4gIHZhciBsZW4gPSB0aGlzLmxlbmd0aFxuICBpZiAobGVuICUgOCAhPT0gMCkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdCdWZmZXIgc2l6ZSBtdXN0IGJlIGEgbXVsdGlwbGUgb2YgNjQtYml0cycpXG4gIH1cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkgKz0gOCkge1xuICAgIHN3YXAodGhpcywgaSwgaSArIDcpXG4gICAgc3dhcCh0aGlzLCBpICsgMSwgaSArIDYpXG4gICAgc3dhcCh0aGlzLCBpICsgMiwgaSArIDUpXG4gICAgc3dhcCh0aGlzLCBpICsgMywgaSArIDQpXG4gIH1cbiAgcmV0dXJuIHRoaXNcbn1cblxuQnVmZmVyLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uIHRvU3RyaW5nICgpIHtcbiAgdmFyIGxlbmd0aCA9IHRoaXMubGVuZ3RoIHwgMFxuICBpZiAobGVuZ3RoID09PSAwKSByZXR1cm4gJydcbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApIHJldHVybiB1dGY4U2xpY2UodGhpcywgMCwgbGVuZ3RoKVxuICByZXR1cm4gc2xvd1RvU3RyaW5nLmFwcGx5KHRoaXMsIGFyZ3VtZW50cylcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiBlcXVhbHMgKGIpIHtcbiAgaWYgKCFCdWZmZXIuaXNCdWZmZXIoYikpIHRocm93IG5ldyBUeXBlRXJyb3IoJ0FyZ3VtZW50IG11c3QgYmUgYSBCdWZmZXInKVxuICBpZiAodGhpcyA9PT0gYikgcmV0dXJuIHRydWVcbiAgcmV0dXJuIEJ1ZmZlci5jb21wYXJlKHRoaXMsIGIpID09PSAwXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUuaW5zcGVjdCA9IGZ1bmN0aW9uIGluc3BlY3QgKCkge1xuICB2YXIgc3RyID0gJydcbiAgdmFyIG1heCA9IGV4cG9ydHMuSU5TUEVDVF9NQVhfQllURVNcbiAgaWYgKHRoaXMubGVuZ3RoID4gMCkge1xuICAgIHN0ciA9IHRoaXMudG9TdHJpbmcoJ2hleCcsIDAsIG1heCkubWF0Y2goLy57Mn0vZykuam9pbignICcpXG4gICAgaWYgKHRoaXMubGVuZ3RoID4gbWF4KSBzdHIgKz0gJyAuLi4gJ1xuICB9XG4gIHJldHVybiAnPEJ1ZmZlciAnICsgc3RyICsgJz4nXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUuY29tcGFyZSA9IGZ1bmN0aW9uIGNvbXBhcmUgKHRhcmdldCwgc3RhcnQsIGVuZCwgdGhpc1N0YXJ0LCB0aGlzRW5kKSB7XG4gIGlmICghQnVmZmVyLmlzQnVmZmVyKHRhcmdldCkpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdBcmd1bWVudCBtdXN0IGJlIGEgQnVmZmVyJylcbiAgfVxuXG4gIGlmIChzdGFydCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgc3RhcnQgPSAwXG4gIH1cbiAgaWYgKGVuZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgZW5kID0gdGFyZ2V0ID8gdGFyZ2V0Lmxlbmd0aCA6IDBcbiAgfVxuICBpZiAodGhpc1N0YXJ0ID09PSB1bmRlZmluZWQpIHtcbiAgICB0aGlzU3RhcnQgPSAwXG4gIH1cbiAgaWYgKHRoaXNFbmQgPT09IHVuZGVmaW5lZCkge1xuICAgIHRoaXNFbmQgPSB0aGlzLmxlbmd0aFxuICB9XG5cbiAgaWYgKHN0YXJ0IDwgMCB8fCBlbmQgPiB0YXJnZXQubGVuZ3RoIHx8IHRoaXNTdGFydCA8IDAgfHwgdGhpc0VuZCA+IHRoaXMubGVuZ3RoKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ291dCBvZiByYW5nZSBpbmRleCcpXG4gIH1cblxuICBpZiAodGhpc1N0YXJ0ID49IHRoaXNFbmQgJiYgc3RhcnQgPj0gZW5kKSB7XG4gICAgcmV0dXJuIDBcbiAgfVxuICBpZiAodGhpc1N0YXJ0ID49IHRoaXNFbmQpIHtcbiAgICByZXR1cm4gLTFcbiAgfVxuICBpZiAoc3RhcnQgPj0gZW5kKSB7XG4gICAgcmV0dXJuIDFcbiAgfVxuXG4gIHN0YXJ0ID4+Pj0gMFxuICBlbmQgPj4+PSAwXG4gIHRoaXNTdGFydCA+Pj49IDBcbiAgdGhpc0VuZCA+Pj49IDBcblxuICBpZiAodGhpcyA9PT0gdGFyZ2V0KSByZXR1cm4gMFxuXG4gIHZhciB4ID0gdGhpc0VuZCAtIHRoaXNTdGFydFxuICB2YXIgeSA9IGVuZCAtIHN0YXJ0XG4gIHZhciBsZW4gPSBNYXRoLm1pbih4LCB5KVxuXG4gIHZhciB0aGlzQ29weSA9IHRoaXMuc2xpY2UodGhpc1N0YXJ0LCB0aGlzRW5kKVxuICB2YXIgdGFyZ2V0Q29weSA9IHRhcmdldC5zbGljZShzdGFydCwgZW5kKVxuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyArK2kpIHtcbiAgICBpZiAodGhpc0NvcHlbaV0gIT09IHRhcmdldENvcHlbaV0pIHtcbiAgICAgIHggPSB0aGlzQ29weVtpXVxuICAgICAgeSA9IHRhcmdldENvcHlbaV1cbiAgICAgIGJyZWFrXG4gICAgfVxuICB9XG5cbiAgaWYgKHggPCB5KSByZXR1cm4gLTFcbiAgaWYgKHkgPCB4KSByZXR1cm4gMVxuICByZXR1cm4gMFxufVxuXG4vLyBGaW5kcyBlaXRoZXIgdGhlIGZpcnN0IGluZGV4IG9mIGB2YWxgIGluIGBidWZmZXJgIGF0IG9mZnNldCA+PSBgYnl0ZU9mZnNldGAsXG4vLyBPUiB0aGUgbGFzdCBpbmRleCBvZiBgdmFsYCBpbiBgYnVmZmVyYCBhdCBvZmZzZXQgPD0gYGJ5dGVPZmZzZXRgLlxuLy9cbi8vIEFyZ3VtZW50czpcbi8vIC0gYnVmZmVyIC0gYSBCdWZmZXIgdG8gc2VhcmNoXG4vLyAtIHZhbCAtIGEgc3RyaW5nLCBCdWZmZXIsIG9yIG51bWJlclxuLy8gLSBieXRlT2Zmc2V0IC0gYW4gaW5kZXggaW50byBgYnVmZmVyYDsgd2lsbCBiZSBjbGFtcGVkIHRvIGFuIGludDMyXG4vLyAtIGVuY29kaW5nIC0gYW4gb3B0aW9uYWwgZW5jb2RpbmcsIHJlbGV2YW50IGlzIHZhbCBpcyBhIHN0cmluZ1xuLy8gLSBkaXIgLSB0cnVlIGZvciBpbmRleE9mLCBmYWxzZSBmb3IgbGFzdEluZGV4T2ZcbmZ1bmN0aW9uIGJpZGlyZWN0aW9uYWxJbmRleE9mIChidWZmZXIsIHZhbCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcsIGRpcikge1xuICAvLyBFbXB0eSBidWZmZXIgbWVhbnMgbm8gbWF0Y2hcbiAgaWYgKGJ1ZmZlci5sZW5ndGggPT09IDApIHJldHVybiAtMVxuXG4gIC8vIE5vcm1hbGl6ZSBieXRlT2Zmc2V0XG4gIGlmICh0eXBlb2YgYnl0ZU9mZnNldCA9PT0gJ3N0cmluZycpIHtcbiAgICBlbmNvZGluZyA9IGJ5dGVPZmZzZXRcbiAgICBieXRlT2Zmc2V0ID0gMFxuICB9IGVsc2UgaWYgKGJ5dGVPZmZzZXQgPiAweDdmZmZmZmZmKSB7XG4gICAgYnl0ZU9mZnNldCA9IDB4N2ZmZmZmZmZcbiAgfSBlbHNlIGlmIChieXRlT2Zmc2V0IDwgLTB4ODAwMDAwMDApIHtcbiAgICBieXRlT2Zmc2V0ID0gLTB4ODAwMDAwMDBcbiAgfVxuICBieXRlT2Zmc2V0ID0gK2J5dGVPZmZzZXQgIC8vIENvZXJjZSB0byBOdW1iZXIuXG4gIGlmIChpc05hTihieXRlT2Zmc2V0KSkge1xuICAgIC8vIGJ5dGVPZmZzZXQ6IGl0IGl0J3MgdW5kZWZpbmVkLCBudWxsLCBOYU4sIFwiZm9vXCIsIGV0Yywgc2VhcmNoIHdob2xlIGJ1ZmZlclxuICAgIGJ5dGVPZmZzZXQgPSBkaXIgPyAwIDogKGJ1ZmZlci5sZW5ndGggLSAxKVxuICB9XG5cbiAgLy8gTm9ybWFsaXplIGJ5dGVPZmZzZXQ6IG5lZ2F0aXZlIG9mZnNldHMgc3RhcnQgZnJvbSB0aGUgZW5kIG9mIHRoZSBidWZmZXJcbiAgaWYgKGJ5dGVPZmZzZXQgPCAwKSBieXRlT2Zmc2V0ID0gYnVmZmVyLmxlbmd0aCArIGJ5dGVPZmZzZXRcbiAgaWYgKGJ5dGVPZmZzZXQgPj0gYnVmZmVyLmxlbmd0aCkge1xuICAgIGlmIChkaXIpIHJldHVybiAtMVxuICAgIGVsc2UgYnl0ZU9mZnNldCA9IGJ1ZmZlci5sZW5ndGggLSAxXG4gIH0gZWxzZSBpZiAoYnl0ZU9mZnNldCA8IDApIHtcbiAgICBpZiAoZGlyKSBieXRlT2Zmc2V0ID0gMFxuICAgIGVsc2UgcmV0dXJuIC0xXG4gIH1cblxuICAvLyBOb3JtYWxpemUgdmFsXG4gIGlmICh0eXBlb2YgdmFsID09PSAnc3RyaW5nJykge1xuICAgIHZhbCA9IEJ1ZmZlci5mcm9tKHZhbCwgZW5jb2RpbmcpXG4gIH1cblxuICAvLyBGaW5hbGx5LCBzZWFyY2ggZWl0aGVyIGluZGV4T2YgKGlmIGRpciBpcyB0cnVlKSBvciBsYXN0SW5kZXhPZlxuICBpZiAoQnVmZmVyLmlzQnVmZmVyKHZhbCkpIHtcbiAgICAvLyBTcGVjaWFsIGNhc2U6IGxvb2tpbmcgZm9yIGVtcHR5IHN0cmluZy9idWZmZXIgYWx3YXlzIGZhaWxzXG4gICAgaWYgKHZhbC5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiAtMVxuICAgIH1cbiAgICByZXR1cm4gYXJyYXlJbmRleE9mKGJ1ZmZlciwgdmFsLCBieXRlT2Zmc2V0LCBlbmNvZGluZywgZGlyKVxuICB9IGVsc2UgaWYgKHR5cGVvZiB2YWwgPT09ICdudW1iZXInKSB7XG4gICAgdmFsID0gdmFsICYgMHhGRiAvLyBTZWFyY2ggZm9yIGEgYnl0ZSB2YWx1ZSBbMC0yNTVdXG4gICAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUICYmXG4gICAgICAgIHR5cGVvZiBVaW50OEFycmF5LnByb3RvdHlwZS5pbmRleE9mID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBpZiAoZGlyKSB7XG4gICAgICAgIHJldHVybiBVaW50OEFycmF5LnByb3RvdHlwZS5pbmRleE9mLmNhbGwoYnVmZmVyLCB2YWwsIGJ5dGVPZmZzZXQpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gVWludDhBcnJheS5wcm90b3R5cGUubGFzdEluZGV4T2YuY2FsbChidWZmZXIsIHZhbCwgYnl0ZU9mZnNldClcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGFycmF5SW5kZXhPZihidWZmZXIsIFsgdmFsIF0sIGJ5dGVPZmZzZXQsIGVuY29kaW5nLCBkaXIpXG4gIH1cblxuICB0aHJvdyBuZXcgVHlwZUVycm9yKCd2YWwgbXVzdCBiZSBzdHJpbmcsIG51bWJlciBvciBCdWZmZXInKVxufVxuXG5mdW5jdGlvbiBhcnJheUluZGV4T2YgKGFyciwgdmFsLCBieXRlT2Zmc2V0LCBlbmNvZGluZywgZGlyKSB7XG4gIHZhciBpbmRleFNpemUgPSAxXG4gIHZhciBhcnJMZW5ndGggPSBhcnIubGVuZ3RoXG4gIHZhciB2YWxMZW5ndGggPSB2YWwubGVuZ3RoXG5cbiAgaWYgKGVuY29kaW5nICE9PSB1bmRlZmluZWQpIHtcbiAgICBlbmNvZGluZyA9IFN0cmluZyhlbmNvZGluZykudG9Mb3dlckNhc2UoKVxuICAgIGlmIChlbmNvZGluZyA9PT0gJ3VjczInIHx8IGVuY29kaW5nID09PSAndWNzLTInIHx8XG4gICAgICAgIGVuY29kaW5nID09PSAndXRmMTZsZScgfHwgZW5jb2RpbmcgPT09ICd1dGYtMTZsZScpIHtcbiAgICAgIGlmIChhcnIubGVuZ3RoIDwgMiB8fCB2YWwubGVuZ3RoIDwgMikge1xuICAgICAgICByZXR1cm4gLTFcbiAgICAgIH1cbiAgICAgIGluZGV4U2l6ZSA9IDJcbiAgICAgIGFyckxlbmd0aCAvPSAyXG4gICAgICB2YWxMZW5ndGggLz0gMlxuICAgICAgYnl0ZU9mZnNldCAvPSAyXG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gcmVhZCAoYnVmLCBpKSB7XG4gICAgaWYgKGluZGV4U2l6ZSA9PT0gMSkge1xuICAgICAgcmV0dXJuIGJ1ZltpXVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gYnVmLnJlYWRVSW50MTZCRShpICogaW5kZXhTaXplKVxuICAgIH1cbiAgfVxuXG4gIHZhciBpXG4gIGlmIChkaXIpIHtcbiAgICB2YXIgZm91bmRJbmRleCA9IC0xXG4gICAgZm9yIChpID0gYnl0ZU9mZnNldDsgaSA8IGFyckxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAocmVhZChhcnIsIGkpID09PSByZWFkKHZhbCwgZm91bmRJbmRleCA9PT0gLTEgPyAwIDogaSAtIGZvdW5kSW5kZXgpKSB7XG4gICAgICAgIGlmIChmb3VuZEluZGV4ID09PSAtMSkgZm91bmRJbmRleCA9IGlcbiAgICAgICAgaWYgKGkgLSBmb3VuZEluZGV4ICsgMSA9PT0gdmFsTGVuZ3RoKSByZXR1cm4gZm91bmRJbmRleCAqIGluZGV4U2l6ZVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGZvdW5kSW5kZXggIT09IC0xKSBpIC09IGkgLSBmb3VuZEluZGV4XG4gICAgICAgIGZvdW5kSW5kZXggPSAtMVxuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBpZiAoYnl0ZU9mZnNldCArIHZhbExlbmd0aCA+IGFyckxlbmd0aCkgYnl0ZU9mZnNldCA9IGFyckxlbmd0aCAtIHZhbExlbmd0aFxuICAgIGZvciAoaSA9IGJ5dGVPZmZzZXQ7IGkgPj0gMDsgaS0tKSB7XG4gICAgICB2YXIgZm91bmQgPSB0cnVlXG4gICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHZhbExlbmd0aDsgaisrKSB7XG4gICAgICAgIGlmIChyZWFkKGFyciwgaSArIGopICE9PSByZWFkKHZhbCwgaikpIHtcbiAgICAgICAgICBmb3VuZCA9IGZhbHNlXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGZvdW5kKSByZXR1cm4gaVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiAtMVxufVxuXG5CdWZmZXIucHJvdG90eXBlLmluY2x1ZGVzID0gZnVuY3Rpb24gaW5jbHVkZXMgKHZhbCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcpIHtcbiAgcmV0dXJuIHRoaXMuaW5kZXhPZih2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nKSAhPT0gLTFcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5pbmRleE9mID0gZnVuY3Rpb24gaW5kZXhPZiAodmFsLCBieXRlT2Zmc2V0LCBlbmNvZGluZykge1xuICByZXR1cm4gYmlkaXJlY3Rpb25hbEluZGV4T2YodGhpcywgdmFsLCBieXRlT2Zmc2V0LCBlbmNvZGluZywgdHJ1ZSlcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5sYXN0SW5kZXhPZiA9IGZ1bmN0aW9uIGxhc3RJbmRleE9mICh2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nKSB7XG4gIHJldHVybiBiaWRpcmVjdGlvbmFsSW5kZXhPZih0aGlzLCB2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nLCBmYWxzZSlcbn1cblxuZnVuY3Rpb24gaGV4V3JpdGUgKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkge1xuICBvZmZzZXQgPSBOdW1iZXIob2Zmc2V0KSB8fCAwXG4gIHZhciByZW1haW5pbmcgPSBidWYubGVuZ3RoIC0gb2Zmc2V0XG4gIGlmICghbGVuZ3RoKSB7XG4gICAgbGVuZ3RoID0gcmVtYWluaW5nXG4gIH0gZWxzZSB7XG4gICAgbGVuZ3RoID0gTnVtYmVyKGxlbmd0aClcbiAgICBpZiAobGVuZ3RoID4gcmVtYWluaW5nKSB7XG4gICAgICBsZW5ndGggPSByZW1haW5pbmdcbiAgICB9XG4gIH1cblxuICAvLyBtdXN0IGJlIGFuIGV2ZW4gbnVtYmVyIG9mIGRpZ2l0c1xuICB2YXIgc3RyTGVuID0gc3RyaW5nLmxlbmd0aFxuICBpZiAoc3RyTGVuICUgMiAhPT0gMCkgdGhyb3cgbmV3IFR5cGVFcnJvcignSW52YWxpZCBoZXggc3RyaW5nJylcblxuICBpZiAobGVuZ3RoID4gc3RyTGVuIC8gMikge1xuICAgIGxlbmd0aCA9IHN0ckxlbiAvIDJcbiAgfVxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgKytpKSB7XG4gICAgdmFyIHBhcnNlZCA9IHBhcnNlSW50KHN0cmluZy5zdWJzdHIoaSAqIDIsIDIpLCAxNilcbiAgICBpZiAoaXNOYU4ocGFyc2VkKSkgcmV0dXJuIGlcbiAgICBidWZbb2Zmc2V0ICsgaV0gPSBwYXJzZWRcbiAgfVxuICByZXR1cm4gaVxufVxuXG5mdW5jdGlvbiB1dGY4V3JpdGUgKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkge1xuICByZXR1cm4gYmxpdEJ1ZmZlcih1dGY4VG9CeXRlcyhzdHJpbmcsIGJ1Zi5sZW5ndGggLSBvZmZzZXQpLCBidWYsIG9mZnNldCwgbGVuZ3RoKVxufVxuXG5mdW5jdGlvbiBhc2NpaVdyaXRlIChidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpIHtcbiAgcmV0dXJuIGJsaXRCdWZmZXIoYXNjaWlUb0J5dGVzKHN0cmluZyksIGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpXG59XG5cbmZ1bmN0aW9uIGxhdGluMVdyaXRlIChidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpIHtcbiAgcmV0dXJuIGFzY2lpV3JpdGUoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKVxufVxuXG5mdW5jdGlvbiBiYXNlNjRXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7XG4gIHJldHVybiBibGl0QnVmZmVyKGJhc2U2NFRvQnl0ZXMoc3RyaW5nKSwgYnVmLCBvZmZzZXQsIGxlbmd0aClcbn1cblxuZnVuY3Rpb24gdWNzMldyaXRlIChidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpIHtcbiAgcmV0dXJuIGJsaXRCdWZmZXIodXRmMTZsZVRvQnl0ZXMoc3RyaW5nLCBidWYubGVuZ3RoIC0gb2Zmc2V0KSwgYnVmLCBvZmZzZXQsIGxlbmd0aClcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZSA9IGZ1bmN0aW9uIHdyaXRlIChzdHJpbmcsIG9mZnNldCwgbGVuZ3RoLCBlbmNvZGluZykge1xuICAvLyBCdWZmZXIjd3JpdGUoc3RyaW5nKVxuICBpZiAob2Zmc2V0ID09PSB1bmRlZmluZWQpIHtcbiAgICBlbmNvZGluZyA9ICd1dGY4J1xuICAgIGxlbmd0aCA9IHRoaXMubGVuZ3RoXG4gICAgb2Zmc2V0ID0gMFxuICAvLyBCdWZmZXIjd3JpdGUoc3RyaW5nLCBlbmNvZGluZylcbiAgfSBlbHNlIGlmIChsZW5ndGggPT09IHVuZGVmaW5lZCAmJiB0eXBlb2Ygb2Zmc2V0ID09PSAnc3RyaW5nJykge1xuICAgIGVuY29kaW5nID0gb2Zmc2V0XG4gICAgbGVuZ3RoID0gdGhpcy5sZW5ndGhcbiAgICBvZmZzZXQgPSAwXG4gIC8vIEJ1ZmZlciN3cml0ZShzdHJpbmcsIG9mZnNldFssIGxlbmd0aF1bLCBlbmNvZGluZ10pXG4gIH0gZWxzZSBpZiAoaXNGaW5pdGUob2Zmc2V0KSkge1xuICAgIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgICBpZiAoaXNGaW5pdGUobGVuZ3RoKSkge1xuICAgICAgbGVuZ3RoID0gbGVuZ3RoIHwgMFxuICAgICAgaWYgKGVuY29kaW5nID09PSB1bmRlZmluZWQpIGVuY29kaW5nID0gJ3V0ZjgnXG4gICAgfSBlbHNlIHtcbiAgICAgIGVuY29kaW5nID0gbGVuZ3RoXG4gICAgICBsZW5ndGggPSB1bmRlZmluZWRcbiAgICB9XG4gIC8vIGxlZ2FjeSB3cml0ZShzdHJpbmcsIGVuY29kaW5nLCBvZmZzZXQsIGxlbmd0aCkgLSByZW1vdmUgaW4gdjAuMTNcbiAgfSBlbHNlIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAnQnVmZmVyLndyaXRlKHN0cmluZywgZW5jb2RpbmcsIG9mZnNldFssIGxlbmd0aF0pIGlzIG5vIGxvbmdlciBzdXBwb3J0ZWQnXG4gICAgKVxuICB9XG5cbiAgdmFyIHJlbWFpbmluZyA9IHRoaXMubGVuZ3RoIC0gb2Zmc2V0XG4gIGlmIChsZW5ndGggPT09IHVuZGVmaW5lZCB8fCBsZW5ndGggPiByZW1haW5pbmcpIGxlbmd0aCA9IHJlbWFpbmluZ1xuXG4gIGlmICgoc3RyaW5nLmxlbmd0aCA+IDAgJiYgKGxlbmd0aCA8IDAgfHwgb2Zmc2V0IDwgMCkpIHx8IG9mZnNldCA+IHRoaXMubGVuZ3RoKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0F0dGVtcHQgdG8gd3JpdGUgb3V0c2lkZSBidWZmZXIgYm91bmRzJylcbiAgfVxuXG4gIGlmICghZW5jb2RpbmcpIGVuY29kaW5nID0gJ3V0ZjgnXG5cbiAgdmFyIGxvd2VyZWRDYXNlID0gZmFsc2VcbiAgZm9yICg7Oykge1xuICAgIHN3aXRjaCAoZW5jb2RpbmcpIHtcbiAgICAgIGNhc2UgJ2hleCc6XG4gICAgICAgIHJldHVybiBoZXhXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKVxuXG4gICAgICBjYXNlICd1dGY4JzpcbiAgICAgIGNhc2UgJ3V0Zi04JzpcbiAgICAgICAgcmV0dXJuIHV0ZjhXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKVxuXG4gICAgICBjYXNlICdhc2NpaSc6XG4gICAgICAgIHJldHVybiBhc2NpaVdyaXRlKHRoaXMsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpXG5cbiAgICAgIGNhc2UgJ2xhdGluMSc6XG4gICAgICBjYXNlICdiaW5hcnknOlxuICAgICAgICByZXR1cm4gbGF0aW4xV3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aClcblxuICAgICAgY2FzZSAnYmFzZTY0JzpcbiAgICAgICAgLy8gV2FybmluZzogbWF4TGVuZ3RoIG5vdCB0YWtlbiBpbnRvIGFjY291bnQgaW4gYmFzZTY0V3JpdGVcbiAgICAgICAgcmV0dXJuIGJhc2U2NFdyaXRlKHRoaXMsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpXG5cbiAgICAgIGNhc2UgJ3VjczInOlxuICAgICAgY2FzZSAndWNzLTInOlxuICAgICAgY2FzZSAndXRmMTZsZSc6XG4gICAgICBjYXNlICd1dGYtMTZsZSc6XG4gICAgICAgIHJldHVybiB1Y3MyV3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aClcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgaWYgKGxvd2VyZWRDYXNlKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdVbmtub3duIGVuY29kaW5nOiAnICsgZW5jb2RpbmcpXG4gICAgICAgIGVuY29kaW5nID0gKCcnICsgZW5jb2RpbmcpLnRvTG93ZXJDYXNlKClcbiAgICAgICAgbG93ZXJlZENhc2UgPSB0cnVlXG4gICAgfVxuICB9XG59XG5cbkJ1ZmZlci5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gdG9KU09OICgpIHtcbiAgcmV0dXJuIHtcbiAgICB0eXBlOiAnQnVmZmVyJyxcbiAgICBkYXRhOiBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh0aGlzLl9hcnIgfHwgdGhpcywgMClcbiAgfVxufVxuXG5mdW5jdGlvbiBiYXNlNjRTbGljZSAoYnVmLCBzdGFydCwgZW5kKSB7XG4gIGlmIChzdGFydCA9PT0gMCAmJiBlbmQgPT09IGJ1Zi5sZW5ndGgpIHtcbiAgICByZXR1cm4gYmFzZTY0LmZyb21CeXRlQXJyYXkoYnVmKVxuICB9IGVsc2Uge1xuICAgIHJldHVybiBiYXNlNjQuZnJvbUJ5dGVBcnJheShidWYuc2xpY2Uoc3RhcnQsIGVuZCkpXG4gIH1cbn1cblxuZnVuY3Rpb24gdXRmOFNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHtcbiAgZW5kID0gTWF0aC5taW4oYnVmLmxlbmd0aCwgZW5kKVxuICB2YXIgcmVzID0gW11cblxuICB2YXIgaSA9IHN0YXJ0XG4gIHdoaWxlIChpIDwgZW5kKSB7XG4gICAgdmFyIGZpcnN0Qnl0ZSA9IGJ1ZltpXVxuICAgIHZhciBjb2RlUG9pbnQgPSBudWxsXG4gICAgdmFyIGJ5dGVzUGVyU2VxdWVuY2UgPSAoZmlyc3RCeXRlID4gMHhFRikgPyA0XG4gICAgICA6IChmaXJzdEJ5dGUgPiAweERGKSA/IDNcbiAgICAgIDogKGZpcnN0Qnl0ZSA+IDB4QkYpID8gMlxuICAgICAgOiAxXG5cbiAgICBpZiAoaSArIGJ5dGVzUGVyU2VxdWVuY2UgPD0gZW5kKSB7XG4gICAgICB2YXIgc2Vjb25kQnl0ZSwgdGhpcmRCeXRlLCBmb3VydGhCeXRlLCB0ZW1wQ29kZVBvaW50XG5cbiAgICAgIHN3aXRjaCAoYnl0ZXNQZXJTZXF1ZW5jZSkge1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgaWYgKGZpcnN0Qnl0ZSA8IDB4ODApIHtcbiAgICAgICAgICAgIGNvZGVQb2ludCA9IGZpcnN0Qnl0ZVxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgc2Vjb25kQnl0ZSA9IGJ1ZltpICsgMV1cbiAgICAgICAgICBpZiAoKHNlY29uZEJ5dGUgJiAweEMwKSA9PT0gMHg4MCkge1xuICAgICAgICAgICAgdGVtcENvZGVQb2ludCA9IChmaXJzdEJ5dGUgJiAweDFGKSA8PCAweDYgfCAoc2Vjb25kQnl0ZSAmIDB4M0YpXG4gICAgICAgICAgICBpZiAodGVtcENvZGVQb2ludCA+IDB4N0YpIHtcbiAgICAgICAgICAgICAgY29kZVBvaW50ID0gdGVtcENvZGVQb2ludFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgc2Vjb25kQnl0ZSA9IGJ1ZltpICsgMV1cbiAgICAgICAgICB0aGlyZEJ5dGUgPSBidWZbaSArIDJdXG4gICAgICAgICAgaWYgKChzZWNvbmRCeXRlICYgMHhDMCkgPT09IDB4ODAgJiYgKHRoaXJkQnl0ZSAmIDB4QzApID09PSAweDgwKSB7XG4gICAgICAgICAgICB0ZW1wQ29kZVBvaW50ID0gKGZpcnN0Qnl0ZSAmIDB4RikgPDwgMHhDIHwgKHNlY29uZEJ5dGUgJiAweDNGKSA8PCAweDYgfCAodGhpcmRCeXRlICYgMHgzRilcbiAgICAgICAgICAgIGlmICh0ZW1wQ29kZVBvaW50ID4gMHg3RkYgJiYgKHRlbXBDb2RlUG9pbnQgPCAweEQ4MDAgfHwgdGVtcENvZGVQb2ludCA+IDB4REZGRikpIHtcbiAgICAgICAgICAgICAgY29kZVBvaW50ID0gdGVtcENvZGVQb2ludFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgc2Vjb25kQnl0ZSA9IGJ1ZltpICsgMV1cbiAgICAgICAgICB0aGlyZEJ5dGUgPSBidWZbaSArIDJdXG4gICAgICAgICAgZm91cnRoQnl0ZSA9IGJ1ZltpICsgM11cbiAgICAgICAgICBpZiAoKHNlY29uZEJ5dGUgJiAweEMwKSA9PT0gMHg4MCAmJiAodGhpcmRCeXRlICYgMHhDMCkgPT09IDB4ODAgJiYgKGZvdXJ0aEJ5dGUgJiAweEMwKSA9PT0gMHg4MCkge1xuICAgICAgICAgICAgdGVtcENvZGVQb2ludCA9IChmaXJzdEJ5dGUgJiAweEYpIDw8IDB4MTIgfCAoc2Vjb25kQnl0ZSAmIDB4M0YpIDw8IDB4QyB8ICh0aGlyZEJ5dGUgJiAweDNGKSA8PCAweDYgfCAoZm91cnRoQnl0ZSAmIDB4M0YpXG4gICAgICAgICAgICBpZiAodGVtcENvZGVQb2ludCA+IDB4RkZGRiAmJiB0ZW1wQ29kZVBvaW50IDwgMHgxMTAwMDApIHtcbiAgICAgICAgICAgICAgY29kZVBvaW50ID0gdGVtcENvZGVQb2ludFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoY29kZVBvaW50ID09PSBudWxsKSB7XG4gICAgICAvLyB3ZSBkaWQgbm90IGdlbmVyYXRlIGEgdmFsaWQgY29kZVBvaW50IHNvIGluc2VydCBhXG4gICAgICAvLyByZXBsYWNlbWVudCBjaGFyIChVK0ZGRkQpIGFuZCBhZHZhbmNlIG9ubHkgMSBieXRlXG4gICAgICBjb2RlUG9pbnQgPSAweEZGRkRcbiAgICAgIGJ5dGVzUGVyU2VxdWVuY2UgPSAxXG4gICAgfSBlbHNlIGlmIChjb2RlUG9pbnQgPiAweEZGRkYpIHtcbiAgICAgIC8vIGVuY29kZSB0byB1dGYxNiAoc3Vycm9nYXRlIHBhaXIgZGFuY2UpXG4gICAgICBjb2RlUG9pbnQgLT0gMHgxMDAwMFxuICAgICAgcmVzLnB1c2goY29kZVBvaW50ID4+PiAxMCAmIDB4M0ZGIHwgMHhEODAwKVxuICAgICAgY29kZVBvaW50ID0gMHhEQzAwIHwgY29kZVBvaW50ICYgMHgzRkZcbiAgICB9XG5cbiAgICByZXMucHVzaChjb2RlUG9pbnQpXG4gICAgaSArPSBieXRlc1BlclNlcXVlbmNlXG4gIH1cblxuICByZXR1cm4gZGVjb2RlQ29kZVBvaW50c0FycmF5KHJlcylcbn1cblxuLy8gQmFzZWQgb24gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMjI3NDcyNzIvNjgwNzQyLCB0aGUgYnJvd3NlciB3aXRoXG4vLyB0aGUgbG93ZXN0IGxpbWl0IGlzIENocm9tZSwgd2l0aCAweDEwMDAwIGFyZ3MuXG4vLyBXZSBnbyAxIG1hZ25pdHVkZSBsZXNzLCBmb3Igc2FmZXR5XG52YXIgTUFYX0FSR1VNRU5UU19MRU5HVEggPSAweDEwMDBcblxuZnVuY3Rpb24gZGVjb2RlQ29kZVBvaW50c0FycmF5IChjb2RlUG9pbnRzKSB7XG4gIHZhciBsZW4gPSBjb2RlUG9pbnRzLmxlbmd0aFxuICBpZiAobGVuIDw9IE1BWF9BUkdVTUVOVFNfTEVOR1RIKSB7XG4gICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkoU3RyaW5nLCBjb2RlUG9pbnRzKSAvLyBhdm9pZCBleHRyYSBzbGljZSgpXG4gIH1cblxuICAvLyBEZWNvZGUgaW4gY2h1bmtzIHRvIGF2b2lkIFwiY2FsbCBzdGFjayBzaXplIGV4Y2VlZGVkXCIuXG4gIHZhciByZXMgPSAnJ1xuICB2YXIgaSA9IDBcbiAgd2hpbGUgKGkgPCBsZW4pIHtcbiAgICByZXMgKz0gU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShcbiAgICAgIFN0cmluZyxcbiAgICAgIGNvZGVQb2ludHMuc2xpY2UoaSwgaSArPSBNQVhfQVJHVU1FTlRTX0xFTkdUSClcbiAgICApXG4gIH1cbiAgcmV0dXJuIHJlc1xufVxuXG5mdW5jdGlvbiBhc2NpaVNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHtcbiAgdmFyIHJldCA9ICcnXG4gIGVuZCA9IE1hdGgubWluKGJ1Zi5sZW5ndGgsIGVuZClcblxuICBmb3IgKHZhciBpID0gc3RhcnQ7IGkgPCBlbmQ7ICsraSkge1xuICAgIHJldCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGJ1ZltpXSAmIDB4N0YpXG4gIH1cbiAgcmV0dXJuIHJldFxufVxuXG5mdW5jdGlvbiBsYXRpbjFTbGljZSAoYnVmLCBzdGFydCwgZW5kKSB7XG4gIHZhciByZXQgPSAnJ1xuICBlbmQgPSBNYXRoLm1pbihidWYubGVuZ3RoLCBlbmQpXG5cbiAgZm9yICh2YXIgaSA9IHN0YXJ0OyBpIDwgZW5kOyArK2kpIHtcbiAgICByZXQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShidWZbaV0pXG4gIH1cbiAgcmV0dXJuIHJldFxufVxuXG5mdW5jdGlvbiBoZXhTbGljZSAoYnVmLCBzdGFydCwgZW5kKSB7XG4gIHZhciBsZW4gPSBidWYubGVuZ3RoXG5cbiAgaWYgKCFzdGFydCB8fCBzdGFydCA8IDApIHN0YXJ0ID0gMFxuICBpZiAoIWVuZCB8fCBlbmQgPCAwIHx8IGVuZCA+IGxlbikgZW5kID0gbGVuXG5cbiAgdmFyIG91dCA9ICcnXG4gIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IGVuZDsgKytpKSB7XG4gICAgb3V0ICs9IHRvSGV4KGJ1ZltpXSlcbiAgfVxuICByZXR1cm4gb3V0XG59XG5cbmZ1bmN0aW9uIHV0ZjE2bGVTbGljZSAoYnVmLCBzdGFydCwgZW5kKSB7XG4gIHZhciBieXRlcyA9IGJ1Zi5zbGljZShzdGFydCwgZW5kKVxuICB2YXIgcmVzID0gJydcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBieXRlcy5sZW5ndGg7IGkgKz0gMikge1xuICAgIHJlcyArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGJ5dGVzW2ldICsgYnl0ZXNbaSArIDFdICogMjU2KVxuICB9XG4gIHJldHVybiByZXNcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5zbGljZSA9IGZ1bmN0aW9uIHNsaWNlIChzdGFydCwgZW5kKSB7XG4gIHZhciBsZW4gPSB0aGlzLmxlbmd0aFxuICBzdGFydCA9IH5+c3RhcnRcbiAgZW5kID0gZW5kID09PSB1bmRlZmluZWQgPyBsZW4gOiB+fmVuZFxuXG4gIGlmIChzdGFydCA8IDApIHtcbiAgICBzdGFydCArPSBsZW5cbiAgICBpZiAoc3RhcnQgPCAwKSBzdGFydCA9IDBcbiAgfSBlbHNlIGlmIChzdGFydCA+IGxlbikge1xuICAgIHN0YXJ0ID0gbGVuXG4gIH1cblxuICBpZiAoZW5kIDwgMCkge1xuICAgIGVuZCArPSBsZW5cbiAgICBpZiAoZW5kIDwgMCkgZW5kID0gMFxuICB9IGVsc2UgaWYgKGVuZCA+IGxlbikge1xuICAgIGVuZCA9IGxlblxuICB9XG5cbiAgaWYgKGVuZCA8IHN0YXJ0KSBlbmQgPSBzdGFydFxuXG4gIHZhciBuZXdCdWZcbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgbmV3QnVmID0gdGhpcy5zdWJhcnJheShzdGFydCwgZW5kKVxuICAgIG5ld0J1Zi5fX3Byb3RvX18gPSBCdWZmZXIucHJvdG90eXBlXG4gIH0gZWxzZSB7XG4gICAgdmFyIHNsaWNlTGVuID0gZW5kIC0gc3RhcnRcbiAgICBuZXdCdWYgPSBuZXcgQnVmZmVyKHNsaWNlTGVuLCB1bmRlZmluZWQpXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzbGljZUxlbjsgKytpKSB7XG4gICAgICBuZXdCdWZbaV0gPSB0aGlzW2kgKyBzdGFydF1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gbmV3QnVmXG59XG5cbi8qXG4gKiBOZWVkIHRvIG1ha2Ugc3VyZSB0aGF0IGJ1ZmZlciBpc24ndCB0cnlpbmcgdG8gd3JpdGUgb3V0IG9mIGJvdW5kcy5cbiAqL1xuZnVuY3Rpb24gY2hlY2tPZmZzZXQgKG9mZnNldCwgZXh0LCBsZW5ndGgpIHtcbiAgaWYgKChvZmZzZXQgJSAxKSAhPT0gMCB8fCBvZmZzZXQgPCAwKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignb2Zmc2V0IGlzIG5vdCB1aW50JylcbiAgaWYgKG9mZnNldCArIGV4dCA+IGxlbmd0aCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1RyeWluZyB0byBhY2Nlc3MgYmV5b25kIGJ1ZmZlciBsZW5ndGgnKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRVSW50TEUgPSBmdW5jdGlvbiByZWFkVUludExFIChvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgYnl0ZUxlbmd0aCwgdGhpcy5sZW5ndGgpXG5cbiAgdmFyIHZhbCA9IHRoaXNbb2Zmc2V0XVxuICB2YXIgbXVsID0gMVxuICB2YXIgaSA9IDBcbiAgd2hpbGUgKCsraSA8IGJ5dGVMZW5ndGggJiYgKG11bCAqPSAweDEwMCkpIHtcbiAgICB2YWwgKz0gdGhpc1tvZmZzZXQgKyBpXSAqIG11bFxuICB9XG5cbiAgcmV0dXJuIHZhbFxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRVSW50QkUgPSBmdW5jdGlvbiByZWFkVUludEJFIChvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggfCAwXG4gIGlmICghbm9Bc3NlcnQpIHtcbiAgICBjaGVja09mZnNldChvZmZzZXQsIGJ5dGVMZW5ndGgsIHRoaXMubGVuZ3RoKVxuICB9XG5cbiAgdmFyIHZhbCA9IHRoaXNbb2Zmc2V0ICsgLS1ieXRlTGVuZ3RoXVxuICB2YXIgbXVsID0gMVxuICB3aGlsZSAoYnl0ZUxlbmd0aCA+IDAgJiYgKG11bCAqPSAweDEwMCkpIHtcbiAgICB2YWwgKz0gdGhpc1tvZmZzZXQgKyAtLWJ5dGVMZW5ndGhdICogbXVsXG4gIH1cblxuICByZXR1cm4gdmFsXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnQ4ID0gZnVuY3Rpb24gcmVhZFVJbnQ4IChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgMSwgdGhpcy5sZW5ndGgpXG4gIHJldHVybiB0aGlzW29mZnNldF1cbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkVUludDE2TEUgPSBmdW5jdGlvbiByZWFkVUludDE2TEUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCAyLCB0aGlzLmxlbmd0aClcbiAgcmV0dXJuIHRoaXNbb2Zmc2V0XSB8ICh0aGlzW29mZnNldCArIDFdIDw8IDgpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnQxNkJFID0gZnVuY3Rpb24gcmVhZFVJbnQxNkJFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgMiwgdGhpcy5sZW5ndGgpXG4gIHJldHVybiAodGhpc1tvZmZzZXRdIDw8IDgpIHwgdGhpc1tvZmZzZXQgKyAxXVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRVSW50MzJMRSA9IGZ1bmN0aW9uIHJlYWRVSW50MzJMRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKVxuXG4gIHJldHVybiAoKHRoaXNbb2Zmc2V0XSkgfFxuICAgICAgKHRoaXNbb2Zmc2V0ICsgMV0gPDwgOCkgfFxuICAgICAgKHRoaXNbb2Zmc2V0ICsgMl0gPDwgMTYpKSArXG4gICAgICAodGhpc1tvZmZzZXQgKyAzXSAqIDB4MTAwMDAwMClcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkVUludDMyQkUgPSBmdW5jdGlvbiByZWFkVUludDMyQkUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aClcblxuICByZXR1cm4gKHRoaXNbb2Zmc2V0XSAqIDB4MTAwMDAwMCkgK1xuICAgICgodGhpc1tvZmZzZXQgKyAxXSA8PCAxNikgfFxuICAgICh0aGlzW29mZnNldCArIDJdIDw8IDgpIHxcbiAgICB0aGlzW29mZnNldCArIDNdKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRJbnRMRSA9IGZ1bmN0aW9uIHJlYWRJbnRMRSAob2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoIHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIGJ5dGVMZW5ndGgsIHRoaXMubGVuZ3RoKVxuXG4gIHZhciB2YWwgPSB0aGlzW29mZnNldF1cbiAgdmFyIG11bCA9IDFcbiAgdmFyIGkgPSAwXG4gIHdoaWxlICgrK2kgPCBieXRlTGVuZ3RoICYmIChtdWwgKj0gMHgxMDApKSB7XG4gICAgdmFsICs9IHRoaXNbb2Zmc2V0ICsgaV0gKiBtdWxcbiAgfVxuICBtdWwgKj0gMHg4MFxuXG4gIGlmICh2YWwgPj0gbXVsKSB2YWwgLT0gTWF0aC5wb3coMiwgOCAqIGJ5dGVMZW5ndGgpXG5cbiAgcmV0dXJuIHZhbFxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRJbnRCRSA9IGZ1bmN0aW9uIHJlYWRJbnRCRSAob2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoIHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIGJ5dGVMZW5ndGgsIHRoaXMubGVuZ3RoKVxuXG4gIHZhciBpID0gYnl0ZUxlbmd0aFxuICB2YXIgbXVsID0gMVxuICB2YXIgdmFsID0gdGhpc1tvZmZzZXQgKyAtLWldXG4gIHdoaWxlIChpID4gMCAmJiAobXVsICo9IDB4MTAwKSkge1xuICAgIHZhbCArPSB0aGlzW29mZnNldCArIC0taV0gKiBtdWxcbiAgfVxuICBtdWwgKj0gMHg4MFxuXG4gIGlmICh2YWwgPj0gbXVsKSB2YWwgLT0gTWF0aC5wb3coMiwgOCAqIGJ5dGVMZW5ndGgpXG5cbiAgcmV0dXJuIHZhbFxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRJbnQ4ID0gZnVuY3Rpb24gcmVhZEludDggKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCAxLCB0aGlzLmxlbmd0aClcbiAgaWYgKCEodGhpc1tvZmZzZXRdICYgMHg4MCkpIHJldHVybiAodGhpc1tvZmZzZXRdKVxuICByZXR1cm4gKCgweGZmIC0gdGhpc1tvZmZzZXRdICsgMSkgKiAtMSlcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkSW50MTZMRSA9IGZ1bmN0aW9uIHJlYWRJbnQxNkxFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgMiwgdGhpcy5sZW5ndGgpXG4gIHZhciB2YWwgPSB0aGlzW29mZnNldF0gfCAodGhpc1tvZmZzZXQgKyAxXSA8PCA4KVxuICByZXR1cm4gKHZhbCAmIDB4ODAwMCkgPyB2YWwgfCAweEZGRkYwMDAwIDogdmFsXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEludDE2QkUgPSBmdW5jdGlvbiByZWFkSW50MTZCRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDIsIHRoaXMubGVuZ3RoKVxuICB2YXIgdmFsID0gdGhpc1tvZmZzZXQgKyAxXSB8ICh0aGlzW29mZnNldF0gPDwgOClcbiAgcmV0dXJuICh2YWwgJiAweDgwMDApID8gdmFsIHwgMHhGRkZGMDAwMCA6IHZhbFxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRJbnQzMkxFID0gZnVuY3Rpb24gcmVhZEludDMyTEUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aClcblxuICByZXR1cm4gKHRoaXNbb2Zmc2V0XSkgfFxuICAgICh0aGlzW29mZnNldCArIDFdIDw8IDgpIHxcbiAgICAodGhpc1tvZmZzZXQgKyAyXSA8PCAxNikgfFxuICAgICh0aGlzW29mZnNldCArIDNdIDw8IDI0KVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRJbnQzMkJFID0gZnVuY3Rpb24gcmVhZEludDMyQkUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aClcblxuICByZXR1cm4gKHRoaXNbb2Zmc2V0XSA8PCAyNCkgfFxuICAgICh0aGlzW29mZnNldCArIDFdIDw8IDE2KSB8XG4gICAgKHRoaXNbb2Zmc2V0ICsgMl0gPDwgOCkgfFxuICAgICh0aGlzW29mZnNldCArIDNdKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRGbG9hdExFID0gZnVuY3Rpb24gcmVhZEZsb2F0TEUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aClcbiAgcmV0dXJuIGllZWU3NTQucmVhZCh0aGlzLCBvZmZzZXQsIHRydWUsIDIzLCA0KVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRGbG9hdEJFID0gZnVuY3Rpb24gcmVhZEZsb2F0QkUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aClcbiAgcmV0dXJuIGllZWU3NTQucmVhZCh0aGlzLCBvZmZzZXQsIGZhbHNlLCAyMywgNClcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkRG91YmxlTEUgPSBmdW5jdGlvbiByZWFkRG91YmxlTEUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA4LCB0aGlzLmxlbmd0aClcbiAgcmV0dXJuIGllZWU3NTQucmVhZCh0aGlzLCBvZmZzZXQsIHRydWUsIDUyLCA4KVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWREb3VibGVCRSA9IGZ1bmN0aW9uIHJlYWREb3VibGVCRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDgsIHRoaXMubGVuZ3RoKVxuICByZXR1cm4gaWVlZTc1NC5yZWFkKHRoaXMsIG9mZnNldCwgZmFsc2UsIDUyLCA4KVxufVxuXG5mdW5jdGlvbiBjaGVja0ludCAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBleHQsIG1heCwgbWluKSB7XG4gIGlmICghQnVmZmVyLmlzQnVmZmVyKGJ1ZikpIHRocm93IG5ldyBUeXBlRXJyb3IoJ1wiYnVmZmVyXCIgYXJndW1lbnQgbXVzdCBiZSBhIEJ1ZmZlciBpbnN0YW5jZScpXG4gIGlmICh2YWx1ZSA+IG1heCB8fCB2YWx1ZSA8IG1pbikgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1widmFsdWVcIiBhcmd1bWVudCBpcyBvdXQgb2YgYm91bmRzJylcbiAgaWYgKG9mZnNldCArIGV4dCA+IGJ1Zi5sZW5ndGgpIHRocm93IG5ldyBSYW5nZUVycm9yKCdJbmRleCBvdXQgb2YgcmFuZ2UnKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlVUludExFID0gZnVuY3Rpb24gd3JpdGVVSW50TEUgKHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggfCAwXG4gIGlmICghbm9Bc3NlcnQpIHtcbiAgICB2YXIgbWF4Qnl0ZXMgPSBNYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aCkgLSAxXG4gICAgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbWF4Qnl0ZXMsIDApXG4gIH1cblxuICB2YXIgbXVsID0gMVxuICB2YXIgaSA9IDBcbiAgdGhpc1tvZmZzZXRdID0gdmFsdWUgJiAweEZGXG4gIHdoaWxlICgrK2kgPCBieXRlTGVuZ3RoICYmIChtdWwgKj0gMHgxMDApKSB7XG4gICAgdGhpc1tvZmZzZXQgKyBpXSA9ICh2YWx1ZSAvIG11bCkgJiAweEZGXG4gIH1cblxuICByZXR1cm4gb2Zmc2V0ICsgYnl0ZUxlbmd0aFxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlVUludEJFID0gZnVuY3Rpb24gd3JpdGVVSW50QkUgKHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggfCAwXG4gIGlmICghbm9Bc3NlcnQpIHtcbiAgICB2YXIgbWF4Qnl0ZXMgPSBNYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aCkgLSAxXG4gICAgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbWF4Qnl0ZXMsIDApXG4gIH1cblxuICB2YXIgaSA9IGJ5dGVMZW5ndGggLSAxXG4gIHZhciBtdWwgPSAxXG4gIHRoaXNbb2Zmc2V0ICsgaV0gPSB2YWx1ZSAmIDB4RkZcbiAgd2hpbGUgKC0taSA+PSAwICYmIChtdWwgKj0gMHgxMDApKSB7XG4gICAgdGhpc1tvZmZzZXQgKyBpXSA9ICh2YWx1ZSAvIG11bCkgJiAweEZGXG4gIH1cblxuICByZXR1cm4gb2Zmc2V0ICsgYnl0ZUxlbmd0aFxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlVUludDggPSBmdW5jdGlvbiB3cml0ZVVJbnQ4ICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDEsIDB4ZmYsIDApXG4gIGlmICghQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHZhbHVlID0gTWF0aC5mbG9vcih2YWx1ZSlcbiAgdGhpc1tvZmZzZXRdID0gKHZhbHVlICYgMHhmZilcbiAgcmV0dXJuIG9mZnNldCArIDFcbn1cblxuZnVuY3Rpb24gb2JqZWN0V3JpdGVVSW50MTYgKGJ1ZiwgdmFsdWUsIG9mZnNldCwgbGl0dGxlRW5kaWFuKSB7XG4gIGlmICh2YWx1ZSA8IDApIHZhbHVlID0gMHhmZmZmICsgdmFsdWUgKyAxXG4gIGZvciAodmFyIGkgPSAwLCBqID0gTWF0aC5taW4oYnVmLmxlbmd0aCAtIG9mZnNldCwgMik7IGkgPCBqOyArK2kpIHtcbiAgICBidWZbb2Zmc2V0ICsgaV0gPSAodmFsdWUgJiAoMHhmZiA8PCAoOCAqIChsaXR0bGVFbmRpYW4gPyBpIDogMSAtIGkpKSkpID4+PlxuICAgICAgKGxpdHRsZUVuZGlhbiA/IGkgOiAxIC0gaSkgKiA4XG4gIH1cbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnQxNkxFID0gZnVuY3Rpb24gd3JpdGVVSW50MTZMRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAyLCAweGZmZmYsIDApXG4gIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSAmIDB4ZmYpXG4gICAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSA+Pj4gOClcbiAgfSBlbHNlIHtcbiAgICBvYmplY3RXcml0ZVVJbnQxNih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCB0cnVlKVxuICB9XG4gIHJldHVybiBvZmZzZXQgKyAyXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50MTZCRSA9IGZ1bmN0aW9uIHdyaXRlVUludDE2QkUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgMiwgMHhmZmZmLCAwKVxuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgPj4+IDgpXG4gICAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSAmIDB4ZmYpXG4gIH0gZWxzZSB7XG4gICAgb2JqZWN0V3JpdGVVSW50MTYodGhpcywgdmFsdWUsIG9mZnNldCwgZmFsc2UpXG4gIH1cbiAgcmV0dXJuIG9mZnNldCArIDJcbn1cblxuZnVuY3Rpb24gb2JqZWN0V3JpdGVVSW50MzIgKGJ1ZiwgdmFsdWUsIG9mZnNldCwgbGl0dGxlRW5kaWFuKSB7XG4gIGlmICh2YWx1ZSA8IDApIHZhbHVlID0gMHhmZmZmZmZmZiArIHZhbHVlICsgMVxuICBmb3IgKHZhciBpID0gMCwgaiA9IE1hdGgubWluKGJ1Zi5sZW5ndGggLSBvZmZzZXQsIDQpOyBpIDwgajsgKytpKSB7XG4gICAgYnVmW29mZnNldCArIGldID0gKHZhbHVlID4+PiAobGl0dGxlRW5kaWFuID8gaSA6IDMgLSBpKSAqIDgpICYgMHhmZlxuICB9XG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50MzJMRSA9IGZ1bmN0aW9uIHdyaXRlVUludDMyTEUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgNCwgMHhmZmZmZmZmZiwgMClcbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgdGhpc1tvZmZzZXQgKyAzXSA9ICh2YWx1ZSA+Pj4gMjQpXG4gICAgdGhpc1tvZmZzZXQgKyAyXSA9ICh2YWx1ZSA+Pj4gMTYpXG4gICAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSA+Pj4gOClcbiAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgJiAweGZmKVxuICB9IGVsc2Uge1xuICAgIG9iamVjdFdyaXRlVUludDMyKHRoaXMsIHZhbHVlLCBvZmZzZXQsIHRydWUpXG4gIH1cbiAgcmV0dXJuIG9mZnNldCArIDRcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnQzMkJFID0gZnVuY3Rpb24gd3JpdGVVSW50MzJCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCA0LCAweGZmZmZmZmZmLCAwKVxuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgPj4+IDI0KVxuICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgPj4+IDE2KVxuICAgIHRoaXNbb2Zmc2V0ICsgMl0gPSAodmFsdWUgPj4+IDgpXG4gICAgdGhpc1tvZmZzZXQgKyAzXSA9ICh2YWx1ZSAmIDB4ZmYpXG4gIH0gZWxzZSB7XG4gICAgb2JqZWN0V3JpdGVVSW50MzIodGhpcywgdmFsdWUsIG9mZnNldCwgZmFsc2UpXG4gIH1cbiAgcmV0dXJuIG9mZnNldCArIDRcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUludExFID0gZnVuY3Rpb24gd3JpdGVJbnRMRSAodmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBpZiAoIW5vQXNzZXJ0KSB7XG4gICAgdmFyIGxpbWl0ID0gTWF0aC5wb3coMiwgOCAqIGJ5dGVMZW5ndGggLSAxKVxuXG4gICAgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbGltaXQgLSAxLCAtbGltaXQpXG4gIH1cblxuICB2YXIgaSA9IDBcbiAgdmFyIG11bCA9IDFcbiAgdmFyIHN1YiA9IDBcbiAgdGhpc1tvZmZzZXRdID0gdmFsdWUgJiAweEZGXG4gIHdoaWxlICgrK2kgPCBieXRlTGVuZ3RoICYmIChtdWwgKj0gMHgxMDApKSB7XG4gICAgaWYgKHZhbHVlIDwgMCAmJiBzdWIgPT09IDAgJiYgdGhpc1tvZmZzZXQgKyBpIC0gMV0gIT09IDApIHtcbiAgICAgIHN1YiA9IDFcbiAgICB9XG4gICAgdGhpc1tvZmZzZXQgKyBpXSA9ICgodmFsdWUgLyBtdWwpID4+IDApIC0gc3ViICYgMHhGRlxuICB9XG5cbiAgcmV0dXJuIG9mZnNldCArIGJ5dGVMZW5ndGhcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUludEJFID0gZnVuY3Rpb24gd3JpdGVJbnRCRSAodmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBpZiAoIW5vQXNzZXJ0KSB7XG4gICAgdmFyIGxpbWl0ID0gTWF0aC5wb3coMiwgOCAqIGJ5dGVMZW5ndGggLSAxKVxuXG4gICAgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbGltaXQgLSAxLCAtbGltaXQpXG4gIH1cblxuICB2YXIgaSA9IGJ5dGVMZW5ndGggLSAxXG4gIHZhciBtdWwgPSAxXG4gIHZhciBzdWIgPSAwXG4gIHRoaXNbb2Zmc2V0ICsgaV0gPSB2YWx1ZSAmIDB4RkZcbiAgd2hpbGUgKC0taSA+PSAwICYmIChtdWwgKj0gMHgxMDApKSB7XG4gICAgaWYgKHZhbHVlIDwgMCAmJiBzdWIgPT09IDAgJiYgdGhpc1tvZmZzZXQgKyBpICsgMV0gIT09IDApIHtcbiAgICAgIHN1YiA9IDFcbiAgICB9XG4gICAgdGhpc1tvZmZzZXQgKyBpXSA9ICgodmFsdWUgLyBtdWwpID4+IDApIC0gc3ViICYgMHhGRlxuICB9XG5cbiAgcmV0dXJuIG9mZnNldCArIGJ5dGVMZW5ndGhcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUludDggPSBmdW5jdGlvbiB3cml0ZUludDggKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgMSwgMHg3ZiwgLTB4ODApXG4gIGlmICghQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHZhbHVlID0gTWF0aC5mbG9vcih2YWx1ZSlcbiAgaWYgKHZhbHVlIDwgMCkgdmFsdWUgPSAweGZmICsgdmFsdWUgKyAxXG4gIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSAmIDB4ZmYpXG4gIHJldHVybiBvZmZzZXQgKyAxXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnQxNkxFID0gZnVuY3Rpb24gd3JpdGVJbnQxNkxFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDIsIDB4N2ZmZiwgLTB4ODAwMClcbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlICYgMHhmZilcbiAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiA4KVxuICB9IGVsc2Uge1xuICAgIG9iamVjdFdyaXRlVUludDE2KHRoaXMsIHZhbHVlLCBvZmZzZXQsIHRydWUpXG4gIH1cbiAgcmV0dXJuIG9mZnNldCArIDJcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUludDE2QkUgPSBmdW5jdGlvbiB3cml0ZUludDE2QkUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgMiwgMHg3ZmZmLCAtMHg4MDAwKVxuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgPj4+IDgpXG4gICAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSAmIDB4ZmYpXG4gIH0gZWxzZSB7XG4gICAgb2JqZWN0V3JpdGVVSW50MTYodGhpcywgdmFsdWUsIG9mZnNldCwgZmFsc2UpXG4gIH1cbiAgcmV0dXJuIG9mZnNldCArIDJcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUludDMyTEUgPSBmdW5jdGlvbiB3cml0ZUludDMyTEUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgNCwgMHg3ZmZmZmZmZiwgLTB4ODAwMDAwMDApXG4gIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSAmIDB4ZmYpXG4gICAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSA+Pj4gOClcbiAgICB0aGlzW29mZnNldCArIDJdID0gKHZhbHVlID4+PiAxNilcbiAgICB0aGlzW29mZnNldCArIDNdID0gKHZhbHVlID4+PiAyNClcbiAgfSBlbHNlIHtcbiAgICBvYmplY3RXcml0ZVVJbnQzMih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCB0cnVlKVxuICB9XG4gIHJldHVybiBvZmZzZXQgKyA0XG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnQzMkJFID0gZnVuY3Rpb24gd3JpdGVJbnQzMkJFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDQsIDB4N2ZmZmZmZmYsIC0weDgwMDAwMDAwKVxuICBpZiAodmFsdWUgPCAwKSB2YWx1ZSA9IDB4ZmZmZmZmZmYgKyB2YWx1ZSArIDFcbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlID4+PiAyNClcbiAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiAxNilcbiAgICB0aGlzW29mZnNldCArIDJdID0gKHZhbHVlID4+PiA4KVxuICAgIHRoaXNbb2Zmc2V0ICsgM10gPSAodmFsdWUgJiAweGZmKVxuICB9IGVsc2Uge1xuICAgIG9iamVjdFdyaXRlVUludDMyKHRoaXMsIHZhbHVlLCBvZmZzZXQsIGZhbHNlKVxuICB9XG4gIHJldHVybiBvZmZzZXQgKyA0XG59XG5cbmZ1bmN0aW9uIGNoZWNrSUVFRTc1NCAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBleHQsIG1heCwgbWluKSB7XG4gIGlmIChvZmZzZXQgKyBleHQgPiBidWYubGVuZ3RoKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignSW5kZXggb3V0IG9mIHJhbmdlJylcbiAgaWYgKG9mZnNldCA8IDApIHRocm93IG5ldyBSYW5nZUVycm9yKCdJbmRleCBvdXQgb2YgcmFuZ2UnKVxufVxuXG5mdW5jdGlvbiB3cml0ZUZsb2F0IChidWYsIHZhbHVlLCBvZmZzZXQsIGxpdHRsZUVuZGlhbiwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkge1xuICAgIGNoZWNrSUVFRTc1NChidWYsIHZhbHVlLCBvZmZzZXQsIDQsIDMuNDAyODIzNDY2Mzg1Mjg4NmUrMzgsIC0zLjQwMjgyMzQ2NjM4NTI4ODZlKzM4KVxuICB9XG4gIGllZWU3NTQud3JpdGUoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBsaXR0bGVFbmRpYW4sIDIzLCA0KVxuICByZXR1cm4gb2Zmc2V0ICsgNFxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlRmxvYXRMRSA9IGZ1bmN0aW9uIHdyaXRlRmxvYXRMRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgcmV0dXJuIHdyaXRlRmxvYXQodGhpcywgdmFsdWUsIG9mZnNldCwgdHJ1ZSwgbm9Bc3NlcnQpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVGbG9hdEJFID0gZnVuY3Rpb24gd3JpdGVGbG9hdEJFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICByZXR1cm4gd3JpdGVGbG9hdCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBmYWxzZSwgbm9Bc3NlcnQpXG59XG5cbmZ1bmN0aW9uIHdyaXRlRG91YmxlIChidWYsIHZhbHVlLCBvZmZzZXQsIGxpdHRsZUVuZGlhbiwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkge1xuICAgIGNoZWNrSUVFRTc1NChidWYsIHZhbHVlLCBvZmZzZXQsIDgsIDEuNzk3NjkzMTM0ODYyMzE1N0UrMzA4LCAtMS43OTc2OTMxMzQ4NjIzMTU3RSszMDgpXG4gIH1cbiAgaWVlZTc1NC53cml0ZShidWYsIHZhbHVlLCBvZmZzZXQsIGxpdHRsZUVuZGlhbiwgNTIsIDgpXG4gIHJldHVybiBvZmZzZXQgKyA4XG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVEb3VibGVMRSA9IGZ1bmN0aW9uIHdyaXRlRG91YmxlTEUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHJldHVybiB3cml0ZURvdWJsZSh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCB0cnVlLCBub0Fzc2VydClcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZURvdWJsZUJFID0gZnVuY3Rpb24gd3JpdGVEb3VibGVCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgcmV0dXJuIHdyaXRlRG91YmxlKHRoaXMsIHZhbHVlLCBvZmZzZXQsIGZhbHNlLCBub0Fzc2VydClcbn1cblxuLy8gY29weSh0YXJnZXRCdWZmZXIsIHRhcmdldFN0YXJ0PTAsIHNvdXJjZVN0YXJ0PTAsIHNvdXJjZUVuZD1idWZmZXIubGVuZ3RoKVxuQnVmZmVyLnByb3RvdHlwZS5jb3B5ID0gZnVuY3Rpb24gY29weSAodGFyZ2V0LCB0YXJnZXRTdGFydCwgc3RhcnQsIGVuZCkge1xuICBpZiAoIXN0YXJ0KSBzdGFydCA9IDBcbiAgaWYgKCFlbmQgJiYgZW5kICE9PSAwKSBlbmQgPSB0aGlzLmxlbmd0aFxuICBpZiAodGFyZ2V0U3RhcnQgPj0gdGFyZ2V0Lmxlbmd0aCkgdGFyZ2V0U3RhcnQgPSB0YXJnZXQubGVuZ3RoXG4gIGlmICghdGFyZ2V0U3RhcnQpIHRhcmdldFN0YXJ0ID0gMFxuICBpZiAoZW5kID4gMCAmJiBlbmQgPCBzdGFydCkgZW5kID0gc3RhcnRcblxuICAvLyBDb3B5IDAgYnl0ZXM7IHdlJ3JlIGRvbmVcbiAgaWYgKGVuZCA9PT0gc3RhcnQpIHJldHVybiAwXG4gIGlmICh0YXJnZXQubGVuZ3RoID09PSAwIHx8IHRoaXMubGVuZ3RoID09PSAwKSByZXR1cm4gMFxuXG4gIC8vIEZhdGFsIGVycm9yIGNvbmRpdGlvbnNcbiAgaWYgKHRhcmdldFN0YXJ0IDwgMCkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCd0YXJnZXRTdGFydCBvdXQgb2YgYm91bmRzJylcbiAgfVxuICBpZiAoc3RhcnQgPCAwIHx8IHN0YXJ0ID49IHRoaXMubGVuZ3RoKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignc291cmNlU3RhcnQgb3V0IG9mIGJvdW5kcycpXG4gIGlmIChlbmQgPCAwKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignc291cmNlRW5kIG91dCBvZiBib3VuZHMnKVxuXG4gIC8vIEFyZSB3ZSBvb2I/XG4gIGlmIChlbmQgPiB0aGlzLmxlbmd0aCkgZW5kID0gdGhpcy5sZW5ndGhcbiAgaWYgKHRhcmdldC5sZW5ndGggLSB0YXJnZXRTdGFydCA8IGVuZCAtIHN0YXJ0KSB7XG4gICAgZW5kID0gdGFyZ2V0Lmxlbmd0aCAtIHRhcmdldFN0YXJ0ICsgc3RhcnRcbiAgfVxuXG4gIHZhciBsZW4gPSBlbmQgLSBzdGFydFxuICB2YXIgaVxuXG4gIGlmICh0aGlzID09PSB0YXJnZXQgJiYgc3RhcnQgPCB0YXJnZXRTdGFydCAmJiB0YXJnZXRTdGFydCA8IGVuZCkge1xuICAgIC8vIGRlc2NlbmRpbmcgY29weSBmcm9tIGVuZFxuICAgIGZvciAoaSA9IGxlbiAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICB0YXJnZXRbaSArIHRhcmdldFN0YXJ0XSA9IHRoaXNbaSArIHN0YXJ0XVxuICAgIH1cbiAgfSBlbHNlIGlmIChsZW4gPCAxMDAwIHx8ICFCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIC8vIGFzY2VuZGluZyBjb3B5IGZyb20gc3RhcnRcbiAgICBmb3IgKGkgPSAwOyBpIDwgbGVuOyArK2kpIHtcbiAgICAgIHRhcmdldFtpICsgdGFyZ2V0U3RhcnRdID0gdGhpc1tpICsgc3RhcnRdXG4gICAgfVxuICB9IGVsc2Uge1xuICAgIFVpbnQ4QXJyYXkucHJvdG90eXBlLnNldC5jYWxsKFxuICAgICAgdGFyZ2V0LFxuICAgICAgdGhpcy5zdWJhcnJheShzdGFydCwgc3RhcnQgKyBsZW4pLFxuICAgICAgdGFyZ2V0U3RhcnRcbiAgICApXG4gIH1cblxuICByZXR1cm4gbGVuXG59XG5cbi8vIFVzYWdlOlxuLy8gICAgYnVmZmVyLmZpbGwobnVtYmVyWywgb2Zmc2V0WywgZW5kXV0pXG4vLyAgICBidWZmZXIuZmlsbChidWZmZXJbLCBvZmZzZXRbLCBlbmRdXSlcbi8vICAgIGJ1ZmZlci5maWxsKHN0cmluZ1ssIG9mZnNldFssIGVuZF1dWywgZW5jb2RpbmddKVxuQnVmZmVyLnByb3RvdHlwZS5maWxsID0gZnVuY3Rpb24gZmlsbCAodmFsLCBzdGFydCwgZW5kLCBlbmNvZGluZykge1xuICAvLyBIYW5kbGUgc3RyaW5nIGNhc2VzOlxuICBpZiAodHlwZW9mIHZhbCA9PT0gJ3N0cmluZycpIHtcbiAgICBpZiAodHlwZW9mIHN0YXJ0ID09PSAnc3RyaW5nJykge1xuICAgICAgZW5jb2RpbmcgPSBzdGFydFxuICAgICAgc3RhcnQgPSAwXG4gICAgICBlbmQgPSB0aGlzLmxlbmd0aFxuICAgIH0gZWxzZSBpZiAodHlwZW9mIGVuZCA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGVuY29kaW5nID0gZW5kXG4gICAgICBlbmQgPSB0aGlzLmxlbmd0aFxuICAgIH1cbiAgICBpZiAodmFsLmxlbmd0aCA9PT0gMSkge1xuICAgICAgdmFyIGNvZGUgPSB2YWwuY2hhckNvZGVBdCgwKVxuICAgICAgaWYgKGNvZGUgPCAyNTYpIHtcbiAgICAgICAgdmFsID0gY29kZVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoZW5jb2RpbmcgIT09IHVuZGVmaW5lZCAmJiB0eXBlb2YgZW5jb2RpbmcgIT09ICdzdHJpbmcnKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdlbmNvZGluZyBtdXN0IGJlIGEgc3RyaW5nJylcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBlbmNvZGluZyA9PT0gJ3N0cmluZycgJiYgIUJ1ZmZlci5pc0VuY29kaW5nKGVuY29kaW5nKSkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVW5rbm93biBlbmNvZGluZzogJyArIGVuY29kaW5nKVxuICAgIH1cbiAgfSBlbHNlIGlmICh0eXBlb2YgdmFsID09PSAnbnVtYmVyJykge1xuICAgIHZhbCA9IHZhbCAmIDI1NVxuICB9XG5cbiAgLy8gSW52YWxpZCByYW5nZXMgYXJlIG5vdCBzZXQgdG8gYSBkZWZhdWx0LCBzbyBjYW4gcmFuZ2UgY2hlY2sgZWFybHkuXG4gIGlmIChzdGFydCA8IDAgfHwgdGhpcy5sZW5ndGggPCBzdGFydCB8fCB0aGlzLmxlbmd0aCA8IGVuZCkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdPdXQgb2YgcmFuZ2UgaW5kZXgnKVxuICB9XG5cbiAgaWYgKGVuZCA8PSBzdGFydCkge1xuICAgIHJldHVybiB0aGlzXG4gIH1cblxuICBzdGFydCA9IHN0YXJ0ID4+PiAwXG4gIGVuZCA9IGVuZCA9PT0gdW5kZWZpbmVkID8gdGhpcy5sZW5ndGggOiBlbmQgPj4+IDBcblxuICBpZiAoIXZhbCkgdmFsID0gMFxuXG4gIHZhciBpXG4gIGlmICh0eXBlb2YgdmFsID09PSAnbnVtYmVyJykge1xuICAgIGZvciAoaSA9IHN0YXJ0OyBpIDwgZW5kOyArK2kpIHtcbiAgICAgIHRoaXNbaV0gPSB2YWxcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgdmFyIGJ5dGVzID0gQnVmZmVyLmlzQnVmZmVyKHZhbClcbiAgICAgID8gdmFsXG4gICAgICA6IHV0ZjhUb0J5dGVzKG5ldyBCdWZmZXIodmFsLCBlbmNvZGluZykudG9TdHJpbmcoKSlcbiAgICB2YXIgbGVuID0gYnl0ZXMubGVuZ3RoXG4gICAgZm9yIChpID0gMDsgaSA8IGVuZCAtIHN0YXJ0OyArK2kpIHtcbiAgICAgIHRoaXNbaSArIHN0YXJ0XSA9IGJ5dGVzW2kgJSBsZW5dXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHRoaXNcbn1cblxuLy8gSEVMUEVSIEZVTkNUSU9OU1xuLy8gPT09PT09PT09PT09PT09PVxuXG52YXIgSU5WQUxJRF9CQVNFNjRfUkUgPSAvW14rXFwvMC05QS1aYS16LV9dL2dcblxuZnVuY3Rpb24gYmFzZTY0Y2xlYW4gKHN0cikge1xuICAvLyBOb2RlIHN0cmlwcyBvdXQgaW52YWxpZCBjaGFyYWN0ZXJzIGxpa2UgXFxuIGFuZCBcXHQgZnJvbSB0aGUgc3RyaW5nLCBiYXNlNjQtanMgZG9lcyBub3RcbiAgc3RyID0gc3RyaW5ndHJpbShzdHIpLnJlcGxhY2UoSU5WQUxJRF9CQVNFNjRfUkUsICcnKVxuICAvLyBOb2RlIGNvbnZlcnRzIHN0cmluZ3Mgd2l0aCBsZW5ndGggPCAyIHRvICcnXG4gIGlmIChzdHIubGVuZ3RoIDwgMikgcmV0dXJuICcnXG4gIC8vIE5vZGUgYWxsb3dzIGZvciBub24tcGFkZGVkIGJhc2U2NCBzdHJpbmdzIChtaXNzaW5nIHRyYWlsaW5nID09PSksIGJhc2U2NC1qcyBkb2VzIG5vdFxuICB3aGlsZSAoc3RyLmxlbmd0aCAlIDQgIT09IDApIHtcbiAgICBzdHIgPSBzdHIgKyAnPSdcbiAgfVxuICByZXR1cm4gc3RyXG59XG5cbmZ1bmN0aW9uIHN0cmluZ3RyaW0gKHN0cikge1xuICBpZiAoc3RyLnRyaW0pIHJldHVybiBzdHIudHJpbSgpXG4gIHJldHVybiBzdHIucmVwbGFjZSgvXlxccyt8XFxzKyQvZywgJycpXG59XG5cbmZ1bmN0aW9uIHRvSGV4IChuKSB7XG4gIGlmIChuIDwgMTYpIHJldHVybiAnMCcgKyBuLnRvU3RyaW5nKDE2KVxuICByZXR1cm4gbi50b1N0cmluZygxNilcbn1cblxuZnVuY3Rpb24gdXRmOFRvQnl0ZXMgKHN0cmluZywgdW5pdHMpIHtcbiAgdW5pdHMgPSB1bml0cyB8fCBJbmZpbml0eVxuICB2YXIgY29kZVBvaW50XG4gIHZhciBsZW5ndGggPSBzdHJpbmcubGVuZ3RoXG4gIHZhciBsZWFkU3Vycm9nYXRlID0gbnVsbFxuICB2YXIgYnl0ZXMgPSBbXVxuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyArK2kpIHtcbiAgICBjb2RlUG9pbnQgPSBzdHJpbmcuY2hhckNvZGVBdChpKVxuXG4gICAgLy8gaXMgc3Vycm9nYXRlIGNvbXBvbmVudFxuICAgIGlmIChjb2RlUG9pbnQgPiAweEQ3RkYgJiYgY29kZVBvaW50IDwgMHhFMDAwKSB7XG4gICAgICAvLyBsYXN0IGNoYXIgd2FzIGEgbGVhZFxuICAgICAgaWYgKCFsZWFkU3Vycm9nYXRlKSB7XG4gICAgICAgIC8vIG5vIGxlYWQgeWV0XG4gICAgICAgIGlmIChjb2RlUG9pbnQgPiAweERCRkYpIHtcbiAgICAgICAgICAvLyB1bmV4cGVjdGVkIHRyYWlsXG4gICAgICAgICAgaWYgKCh1bml0cyAtPSAzKSA+IC0xKSBieXRlcy5wdXNoKDB4RUYsIDB4QkYsIDB4QkQpXG4gICAgICAgICAgY29udGludWVcbiAgICAgICAgfSBlbHNlIGlmIChpICsgMSA9PT0gbGVuZ3RoKSB7XG4gICAgICAgICAgLy8gdW5wYWlyZWQgbGVhZFxuICAgICAgICAgIGlmICgodW5pdHMgLT0gMykgPiAtMSkgYnl0ZXMucHVzaCgweEVGLCAweEJGLCAweEJEKVxuICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgIH1cblxuICAgICAgICAvLyB2YWxpZCBsZWFkXG4gICAgICAgIGxlYWRTdXJyb2dhdGUgPSBjb2RlUG9pbnRcblxuICAgICAgICBjb250aW51ZVxuICAgICAgfVxuXG4gICAgICAvLyAyIGxlYWRzIGluIGEgcm93XG4gICAgICBpZiAoY29kZVBvaW50IDwgMHhEQzAwKSB7XG4gICAgICAgIGlmICgodW5pdHMgLT0gMykgPiAtMSkgYnl0ZXMucHVzaCgweEVGLCAweEJGLCAweEJEKVxuICAgICAgICBsZWFkU3Vycm9nYXRlID0gY29kZVBvaW50XG4gICAgICAgIGNvbnRpbnVlXG4gICAgICB9XG5cbiAgICAgIC8vIHZhbGlkIHN1cnJvZ2F0ZSBwYWlyXG4gICAgICBjb2RlUG9pbnQgPSAobGVhZFN1cnJvZ2F0ZSAtIDB4RDgwMCA8PCAxMCB8IGNvZGVQb2ludCAtIDB4REMwMCkgKyAweDEwMDAwXG4gICAgfSBlbHNlIGlmIChsZWFkU3Vycm9nYXRlKSB7XG4gICAgICAvLyB2YWxpZCBibXAgY2hhciwgYnV0IGxhc3QgY2hhciB3YXMgYSBsZWFkXG4gICAgICBpZiAoKHVuaXRzIC09IDMpID4gLTEpIGJ5dGVzLnB1c2goMHhFRiwgMHhCRiwgMHhCRClcbiAgICB9XG5cbiAgICBsZWFkU3Vycm9nYXRlID0gbnVsbFxuXG4gICAgLy8gZW5jb2RlIHV0ZjhcbiAgICBpZiAoY29kZVBvaW50IDwgMHg4MCkge1xuICAgICAgaWYgKCh1bml0cyAtPSAxKSA8IDApIGJyZWFrXG4gICAgICBieXRlcy5wdXNoKGNvZGVQb2ludClcbiAgICB9IGVsc2UgaWYgKGNvZGVQb2ludCA8IDB4ODAwKSB7XG4gICAgICBpZiAoKHVuaXRzIC09IDIpIDwgMCkgYnJlYWtcbiAgICAgIGJ5dGVzLnB1c2goXG4gICAgICAgIGNvZGVQb2ludCA+PiAweDYgfCAweEMwLFxuICAgICAgICBjb2RlUG9pbnQgJiAweDNGIHwgMHg4MFxuICAgICAgKVxuICAgIH0gZWxzZSBpZiAoY29kZVBvaW50IDwgMHgxMDAwMCkge1xuICAgICAgaWYgKCh1bml0cyAtPSAzKSA8IDApIGJyZWFrXG4gICAgICBieXRlcy5wdXNoKFxuICAgICAgICBjb2RlUG9pbnQgPj4gMHhDIHwgMHhFMCxcbiAgICAgICAgY29kZVBvaW50ID4+IDB4NiAmIDB4M0YgfCAweDgwLFxuICAgICAgICBjb2RlUG9pbnQgJiAweDNGIHwgMHg4MFxuICAgICAgKVxuICAgIH0gZWxzZSBpZiAoY29kZVBvaW50IDwgMHgxMTAwMDApIHtcbiAgICAgIGlmICgodW5pdHMgLT0gNCkgPCAwKSBicmVha1xuICAgICAgYnl0ZXMucHVzaChcbiAgICAgICAgY29kZVBvaW50ID4+IDB4MTIgfCAweEYwLFxuICAgICAgICBjb2RlUG9pbnQgPj4gMHhDICYgMHgzRiB8IDB4ODAsXG4gICAgICAgIGNvZGVQb2ludCA+PiAweDYgJiAweDNGIHwgMHg4MCxcbiAgICAgICAgY29kZVBvaW50ICYgMHgzRiB8IDB4ODBcbiAgICAgIClcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGNvZGUgcG9pbnQnKVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBieXRlc1xufVxuXG5mdW5jdGlvbiBhc2NpaVRvQnl0ZXMgKHN0cikge1xuICB2YXIgYnl0ZUFycmF5ID0gW11cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyArK2kpIHtcbiAgICAvLyBOb2RlJ3MgY29kZSBzZWVtcyB0byBiZSBkb2luZyB0aGlzIGFuZCBub3QgJiAweDdGLi5cbiAgICBieXRlQXJyYXkucHVzaChzdHIuY2hhckNvZGVBdChpKSAmIDB4RkYpXG4gIH1cbiAgcmV0dXJuIGJ5dGVBcnJheVxufVxuXG5mdW5jdGlvbiB1dGYxNmxlVG9CeXRlcyAoc3RyLCB1bml0cykge1xuICB2YXIgYywgaGksIGxvXG4gIHZhciBieXRlQXJyYXkgPSBbXVxuICBmb3IgKHZhciBpID0gMDsgaSA8IHN0ci5sZW5ndGg7ICsraSkge1xuICAgIGlmICgodW5pdHMgLT0gMikgPCAwKSBicmVha1xuXG4gICAgYyA9IHN0ci5jaGFyQ29kZUF0KGkpXG4gICAgaGkgPSBjID4+IDhcbiAgICBsbyA9IGMgJSAyNTZcbiAgICBieXRlQXJyYXkucHVzaChsbylcbiAgICBieXRlQXJyYXkucHVzaChoaSlcbiAgfVxuXG4gIHJldHVybiBieXRlQXJyYXlcbn1cblxuZnVuY3Rpb24gYmFzZTY0VG9CeXRlcyAoc3RyKSB7XG4gIHJldHVybiBiYXNlNjQudG9CeXRlQXJyYXkoYmFzZTY0Y2xlYW4oc3RyKSlcbn1cblxuZnVuY3Rpb24gYmxpdEJ1ZmZlciAoc3JjLCBkc3QsIG9mZnNldCwgbGVuZ3RoKSB7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyArK2kpIHtcbiAgICBpZiAoKGkgKyBvZmZzZXQgPj0gZHN0Lmxlbmd0aCkgfHwgKGkgPj0gc3JjLmxlbmd0aCkpIGJyZWFrXG4gICAgZHN0W2kgKyBvZmZzZXRdID0gc3JjW2ldXG4gIH1cbiAgcmV0dXJuIGlcbn1cblxuZnVuY3Rpb24gaXNuYW4gKHZhbCkge1xuICByZXR1cm4gdmFsICE9PSB2YWwgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1zZWxmLWNvbXBhcmVcbn1cblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGM6L2plbmtpbnMvd29ya3NwYWNlL2NhbV9zYnhfYWxsX21hc3Rlcl9zaWduZWQvc2J4LWFsbC1zaWduZWQvbm9kZV9tb2R1bGVzL2J1ZmZlci9pbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gNDNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiJ3VzZSBzdHJpY3QnO1xuXG4vKjxyZXBsYWNlbWVudD4qL1xuXG52YXIgcHJvY2Vzc05leHRUaWNrID0gcmVxdWlyZSgncHJvY2Vzcy1uZXh0aWNrLWFyZ3MnKTtcbi8qPC9yZXBsYWNlbWVudD4qL1xuXG4vLyB1bmRvY3VtZW50ZWQgY2IoKSBBUEksIG5lZWRlZCBmb3IgY29yZSwgbm90IGZvciBwdWJsaWMgQVBJXG5mdW5jdGlvbiBkZXN0cm95KGVyciwgY2IpIHtcbiAgdmFyIF90aGlzID0gdGhpcztcblxuICB2YXIgcmVhZGFibGVEZXN0cm95ZWQgPSB0aGlzLl9yZWFkYWJsZVN0YXRlICYmIHRoaXMuX3JlYWRhYmxlU3RhdGUuZGVzdHJveWVkO1xuICB2YXIgd3JpdGFibGVEZXN0cm95ZWQgPSB0aGlzLl93cml0YWJsZVN0YXRlICYmIHRoaXMuX3dyaXRhYmxlU3RhdGUuZGVzdHJveWVkO1xuXG4gIGlmIChyZWFkYWJsZURlc3Ryb3llZCB8fCB3cml0YWJsZURlc3Ryb3llZCkge1xuICAgIGlmIChjYikge1xuICAgICAgY2IoZXJyKTtcbiAgICB9IGVsc2UgaWYgKGVyciAmJiAoIXRoaXMuX3dyaXRhYmxlU3RhdGUgfHwgIXRoaXMuX3dyaXRhYmxlU3RhdGUuZXJyb3JFbWl0dGVkKSkge1xuICAgICAgcHJvY2Vzc05leHRUaWNrKGVtaXRFcnJvck5ULCB0aGlzLCBlcnIpO1xuICAgIH1cbiAgICByZXR1cm47XG4gIH1cblxuICAvLyB3ZSBzZXQgZGVzdHJveWVkIHRvIHRydWUgYmVmb3JlIGZpcmluZyBlcnJvciBjYWxsYmFja3MgaW4gb3JkZXJcbiAgLy8gdG8gbWFrZSBpdCByZS1lbnRyYW5jZSBzYWZlIGluIGNhc2UgZGVzdHJveSgpIGlzIGNhbGxlZCB3aXRoaW4gY2FsbGJhY2tzXG5cbiAgaWYgKHRoaXMuX3JlYWRhYmxlU3RhdGUpIHtcbiAgICB0aGlzLl9yZWFkYWJsZVN0YXRlLmRlc3Ryb3llZCA9IHRydWU7XG4gIH1cblxuICAvLyBpZiB0aGlzIGlzIGEgZHVwbGV4IHN0cmVhbSBtYXJrIHRoZSB3cml0YWJsZSBwYXJ0IGFzIGRlc3Ryb3llZCBhcyB3ZWxsXG4gIGlmICh0aGlzLl93cml0YWJsZVN0YXRlKSB7XG4gICAgdGhpcy5fd3JpdGFibGVTdGF0ZS5kZXN0cm95ZWQgPSB0cnVlO1xuICB9XG5cbiAgdGhpcy5fZGVzdHJveShlcnIgfHwgbnVsbCwgZnVuY3Rpb24gKGVycikge1xuICAgIGlmICghY2IgJiYgZXJyKSB7XG4gICAgICBwcm9jZXNzTmV4dFRpY2soZW1pdEVycm9yTlQsIF90aGlzLCBlcnIpO1xuICAgICAgaWYgKF90aGlzLl93cml0YWJsZVN0YXRlKSB7XG4gICAgICAgIF90aGlzLl93cml0YWJsZVN0YXRlLmVycm9yRW1pdHRlZCA9IHRydWU7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChjYikge1xuICAgICAgY2IoZXJyKTtcbiAgICB9XG4gIH0pO1xufVxuXG5mdW5jdGlvbiB1bmRlc3Ryb3koKSB7XG4gIGlmICh0aGlzLl9yZWFkYWJsZVN0YXRlKSB7XG4gICAgdGhpcy5fcmVhZGFibGVTdGF0ZS5kZXN0cm95ZWQgPSBmYWxzZTtcbiAgICB0aGlzLl9yZWFkYWJsZVN0YXRlLnJlYWRpbmcgPSBmYWxzZTtcbiAgICB0aGlzLl9yZWFkYWJsZVN0YXRlLmVuZGVkID0gZmFsc2U7XG4gICAgdGhpcy5fcmVhZGFibGVTdGF0ZS5lbmRFbWl0dGVkID0gZmFsc2U7XG4gIH1cblxuICBpZiAodGhpcy5fd3JpdGFibGVTdGF0ZSkge1xuICAgIHRoaXMuX3dyaXRhYmxlU3RhdGUuZGVzdHJveWVkID0gZmFsc2U7XG4gICAgdGhpcy5fd3JpdGFibGVTdGF0ZS5lbmRlZCA9IGZhbHNlO1xuICAgIHRoaXMuX3dyaXRhYmxlU3RhdGUuZW5kaW5nID0gZmFsc2U7XG4gICAgdGhpcy5fd3JpdGFibGVTdGF0ZS5maW5pc2hlZCA9IGZhbHNlO1xuICAgIHRoaXMuX3dyaXRhYmxlU3RhdGUuZXJyb3JFbWl0dGVkID0gZmFsc2U7XG4gIH1cbn1cblxuZnVuY3Rpb24gZW1pdEVycm9yTlQoc2VsZiwgZXJyKSB7XG4gIHNlbGYuZW1pdCgnZXJyb3InLCBlcnIpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgZGVzdHJveTogZGVzdHJveSxcbiAgdW5kZXN0cm95OiB1bmRlc3Ryb3lcbn07XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gYzovamVua2lucy93b3Jrc3BhY2UvY2FtX3NieF9hbGxfbWFzdGVyX3NpZ25lZC9zYngtYWxsLXNpZ25lZC9ub2RlX21vZHVsZXMvc3RyZWFtLWJyb3dzZXJpZnkvbm9kZV9tb2R1bGVzL3JlYWRhYmxlLXN0cmVhbS9saWIvaW50ZXJuYWwvc3RyZWFtcy9kZXN0cm95LmpzXG4vLyBtb2R1bGUgaWQgPSA0NFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIndXNlIHN0cmljdCc7XG5cbnZhciBCdWZmZXIgPSByZXF1aXJlKCdzYWZlLWJ1ZmZlcicpLkJ1ZmZlcjtcblxudmFyIGlzRW5jb2RpbmcgPSBCdWZmZXIuaXNFbmNvZGluZyB8fCBmdW5jdGlvbiAoZW5jb2RpbmcpIHtcbiAgZW5jb2RpbmcgPSAnJyArIGVuY29kaW5nO1xuICBzd2l0Y2ggKGVuY29kaW5nICYmIGVuY29kaW5nLnRvTG93ZXJDYXNlKCkpIHtcbiAgICBjYXNlICdoZXgnOmNhc2UgJ3V0ZjgnOmNhc2UgJ3V0Zi04JzpjYXNlICdhc2NpaSc6Y2FzZSAnYmluYXJ5JzpjYXNlICdiYXNlNjQnOmNhc2UgJ3VjczInOmNhc2UgJ3Vjcy0yJzpjYXNlICd1dGYxNmxlJzpjYXNlICd1dGYtMTZsZSc6Y2FzZSAncmF3JzpcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn07XG5cbmZ1bmN0aW9uIF9ub3JtYWxpemVFbmNvZGluZyhlbmMpIHtcbiAgaWYgKCFlbmMpIHJldHVybiAndXRmOCc7XG4gIHZhciByZXRyaWVkO1xuICB3aGlsZSAodHJ1ZSkge1xuICAgIHN3aXRjaCAoZW5jKSB7XG4gICAgICBjYXNlICd1dGY4JzpcbiAgICAgIGNhc2UgJ3V0Zi04JzpcbiAgICAgICAgcmV0dXJuICd1dGY4JztcbiAgICAgIGNhc2UgJ3VjczInOlxuICAgICAgY2FzZSAndWNzLTInOlxuICAgICAgY2FzZSAndXRmMTZsZSc6XG4gICAgICBjYXNlICd1dGYtMTZsZSc6XG4gICAgICAgIHJldHVybiAndXRmMTZsZSc7XG4gICAgICBjYXNlICdsYXRpbjEnOlxuICAgICAgY2FzZSAnYmluYXJ5JzpcbiAgICAgICAgcmV0dXJuICdsYXRpbjEnO1xuICAgICAgY2FzZSAnYmFzZTY0JzpcbiAgICAgIGNhc2UgJ2FzY2lpJzpcbiAgICAgIGNhc2UgJ2hleCc6XG4gICAgICAgIHJldHVybiBlbmM7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICBpZiAocmV0cmllZCkgcmV0dXJuOyAvLyB1bmRlZmluZWRcbiAgICAgICAgZW5jID0gKCcnICsgZW5jKS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICByZXRyaWVkID0gdHJ1ZTtcbiAgICB9XG4gIH1cbn07XG5cbi8vIERvIG5vdCBjYWNoZSBgQnVmZmVyLmlzRW5jb2RpbmdgIHdoZW4gY2hlY2tpbmcgZW5jb2RpbmcgbmFtZXMgYXMgc29tZVxuLy8gbW9kdWxlcyBtb25rZXktcGF0Y2ggaXQgdG8gc3VwcG9ydCBhZGRpdGlvbmFsIGVuY29kaW5nc1xuZnVuY3Rpb24gbm9ybWFsaXplRW5jb2RpbmcoZW5jKSB7XG4gIHZhciBuZW5jID0gX25vcm1hbGl6ZUVuY29kaW5nKGVuYyk7XG4gIGlmICh0eXBlb2YgbmVuYyAhPT0gJ3N0cmluZycgJiYgKEJ1ZmZlci5pc0VuY29kaW5nID09PSBpc0VuY29kaW5nIHx8ICFpc0VuY29kaW5nKGVuYykpKSB0aHJvdyBuZXcgRXJyb3IoJ1Vua25vd24gZW5jb2Rpbmc6ICcgKyBlbmMpO1xuICByZXR1cm4gbmVuYyB8fCBlbmM7XG59XG5cbi8vIFN0cmluZ0RlY29kZXIgcHJvdmlkZXMgYW4gaW50ZXJmYWNlIGZvciBlZmZpY2llbnRseSBzcGxpdHRpbmcgYSBzZXJpZXMgb2Zcbi8vIGJ1ZmZlcnMgaW50byBhIHNlcmllcyBvZiBKUyBzdHJpbmdzIHdpdGhvdXQgYnJlYWtpbmcgYXBhcnQgbXVsdGktYnl0ZVxuLy8gY2hhcmFjdGVycy5cbmV4cG9ydHMuU3RyaW5nRGVjb2RlciA9IFN0cmluZ0RlY29kZXI7XG5mdW5jdGlvbiBTdHJpbmdEZWNvZGVyKGVuY29kaW5nKSB7XG4gIHRoaXMuZW5jb2RpbmcgPSBub3JtYWxpemVFbmNvZGluZyhlbmNvZGluZyk7XG4gIHZhciBuYjtcbiAgc3dpdGNoICh0aGlzLmVuY29kaW5nKSB7XG4gICAgY2FzZSAndXRmMTZsZSc6XG4gICAgICB0aGlzLnRleHQgPSB1dGYxNlRleHQ7XG4gICAgICB0aGlzLmVuZCA9IHV0ZjE2RW5kO1xuICAgICAgbmIgPSA0O1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAndXRmOCc6XG4gICAgICB0aGlzLmZpbGxMYXN0ID0gdXRmOEZpbGxMYXN0O1xuICAgICAgbmIgPSA0O1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAnYmFzZTY0JzpcbiAgICAgIHRoaXMudGV4dCA9IGJhc2U2NFRleHQ7XG4gICAgICB0aGlzLmVuZCA9IGJhc2U2NEVuZDtcbiAgICAgIG5iID0gMztcbiAgICAgIGJyZWFrO1xuICAgIGRlZmF1bHQ6XG4gICAgICB0aGlzLndyaXRlID0gc2ltcGxlV3JpdGU7XG4gICAgICB0aGlzLmVuZCA9IHNpbXBsZUVuZDtcbiAgICAgIHJldHVybjtcbiAgfVxuICB0aGlzLmxhc3ROZWVkID0gMDtcbiAgdGhpcy5sYXN0VG90YWwgPSAwO1xuICB0aGlzLmxhc3RDaGFyID0gQnVmZmVyLmFsbG9jVW5zYWZlKG5iKTtcbn1cblxuU3RyaW5nRGVjb2Rlci5wcm90b3R5cGUud3JpdGUgPSBmdW5jdGlvbiAoYnVmKSB7XG4gIGlmIChidWYubGVuZ3RoID09PSAwKSByZXR1cm4gJyc7XG4gIHZhciByO1xuICB2YXIgaTtcbiAgaWYgKHRoaXMubGFzdE5lZWQpIHtcbiAgICByID0gdGhpcy5maWxsTGFzdChidWYpO1xuICAgIGlmIChyID09PSB1bmRlZmluZWQpIHJldHVybiAnJztcbiAgICBpID0gdGhpcy5sYXN0TmVlZDtcbiAgICB0aGlzLmxhc3ROZWVkID0gMDtcbiAgfSBlbHNlIHtcbiAgICBpID0gMDtcbiAgfVxuICBpZiAoaSA8IGJ1Zi5sZW5ndGgpIHJldHVybiByID8gciArIHRoaXMudGV4dChidWYsIGkpIDogdGhpcy50ZXh0KGJ1ZiwgaSk7XG4gIHJldHVybiByIHx8ICcnO1xufTtcblxuU3RyaW5nRGVjb2Rlci5wcm90b3R5cGUuZW5kID0gdXRmOEVuZDtcblxuLy8gUmV0dXJucyBvbmx5IGNvbXBsZXRlIGNoYXJhY3RlcnMgaW4gYSBCdWZmZXJcblN0cmluZ0RlY29kZXIucHJvdG90eXBlLnRleHQgPSB1dGY4VGV4dDtcblxuLy8gQXR0ZW1wdHMgdG8gY29tcGxldGUgYSBwYXJ0aWFsIG5vbi1VVEYtOCBjaGFyYWN0ZXIgdXNpbmcgYnl0ZXMgZnJvbSBhIEJ1ZmZlclxuU3RyaW5nRGVjb2Rlci5wcm90b3R5cGUuZmlsbExhc3QgPSBmdW5jdGlvbiAoYnVmKSB7XG4gIGlmICh0aGlzLmxhc3ROZWVkIDw9IGJ1Zi5sZW5ndGgpIHtcbiAgICBidWYuY29weSh0aGlzLmxhc3RDaGFyLCB0aGlzLmxhc3RUb3RhbCAtIHRoaXMubGFzdE5lZWQsIDAsIHRoaXMubGFzdE5lZWQpO1xuICAgIHJldHVybiB0aGlzLmxhc3RDaGFyLnRvU3RyaW5nKHRoaXMuZW5jb2RpbmcsIDAsIHRoaXMubGFzdFRvdGFsKTtcbiAgfVxuICBidWYuY29weSh0aGlzLmxhc3RDaGFyLCB0aGlzLmxhc3RUb3RhbCAtIHRoaXMubGFzdE5lZWQsIDAsIGJ1Zi5sZW5ndGgpO1xuICB0aGlzLmxhc3ROZWVkIC09IGJ1Zi5sZW5ndGg7XG59O1xuXG4vLyBDaGVja3MgdGhlIHR5cGUgb2YgYSBVVEYtOCBieXRlLCB3aGV0aGVyIGl0J3MgQVNDSUksIGEgbGVhZGluZyBieXRlLCBvciBhXG4vLyBjb250aW51YXRpb24gYnl0ZS5cbmZ1bmN0aW9uIHV0ZjhDaGVja0J5dGUoYnl0ZSkge1xuICBpZiAoYnl0ZSA8PSAweDdGKSByZXR1cm4gMDtlbHNlIGlmIChieXRlID4+IDUgPT09IDB4MDYpIHJldHVybiAyO2Vsc2UgaWYgKGJ5dGUgPj4gNCA9PT0gMHgwRSkgcmV0dXJuIDM7ZWxzZSBpZiAoYnl0ZSA+PiAzID09PSAweDFFKSByZXR1cm4gNDtcbiAgcmV0dXJuIC0xO1xufVxuXG4vLyBDaGVja3MgYXQgbW9zdCAzIGJ5dGVzIGF0IHRoZSBlbmQgb2YgYSBCdWZmZXIgaW4gb3JkZXIgdG8gZGV0ZWN0IGFuXG4vLyBpbmNvbXBsZXRlIG11bHRpLWJ5dGUgVVRGLTggY2hhcmFjdGVyLiBUaGUgdG90YWwgbnVtYmVyIG9mIGJ5dGVzICgyLCAzLCBvciA0KVxuLy8gbmVlZGVkIHRvIGNvbXBsZXRlIHRoZSBVVEYtOCBjaGFyYWN0ZXIgKGlmIGFwcGxpY2FibGUpIGFyZSByZXR1cm5lZC5cbmZ1bmN0aW9uIHV0ZjhDaGVja0luY29tcGxldGUoc2VsZiwgYnVmLCBpKSB7XG4gIHZhciBqID0gYnVmLmxlbmd0aCAtIDE7XG4gIGlmIChqIDwgaSkgcmV0dXJuIDA7XG4gIHZhciBuYiA9IHV0ZjhDaGVja0J5dGUoYnVmW2pdKTtcbiAgaWYgKG5iID49IDApIHtcbiAgICBpZiAobmIgPiAwKSBzZWxmLmxhc3ROZWVkID0gbmIgLSAxO1xuICAgIHJldHVybiBuYjtcbiAgfVxuICBpZiAoLS1qIDwgaSkgcmV0dXJuIDA7XG4gIG5iID0gdXRmOENoZWNrQnl0ZShidWZbal0pO1xuICBpZiAobmIgPj0gMCkge1xuICAgIGlmIChuYiA+IDApIHNlbGYubGFzdE5lZWQgPSBuYiAtIDI7XG4gICAgcmV0dXJuIG5iO1xuICB9XG4gIGlmICgtLWogPCBpKSByZXR1cm4gMDtcbiAgbmIgPSB1dGY4Q2hlY2tCeXRlKGJ1ZltqXSk7XG4gIGlmIChuYiA+PSAwKSB7XG4gICAgaWYgKG5iID4gMCkge1xuICAgICAgaWYgKG5iID09PSAyKSBuYiA9IDA7ZWxzZSBzZWxmLmxhc3ROZWVkID0gbmIgLSAzO1xuICAgIH1cbiAgICByZXR1cm4gbmI7XG4gIH1cbiAgcmV0dXJuIDA7XG59XG5cbi8vIFZhbGlkYXRlcyBhcyBtYW55IGNvbnRpbnVhdGlvbiBieXRlcyBmb3IgYSBtdWx0aS1ieXRlIFVURi04IGNoYXJhY3RlciBhc1xuLy8gbmVlZGVkIG9yIGFyZSBhdmFpbGFibGUuIElmIHdlIHNlZSBhIG5vbi1jb250aW51YXRpb24gYnl0ZSB3aGVyZSB3ZSBleHBlY3Rcbi8vIG9uZSwgd2UgXCJyZXBsYWNlXCIgdGhlIHZhbGlkYXRlZCBjb250aW51YXRpb24gYnl0ZXMgd2UndmUgc2VlbiBzbyBmYXIgd2l0aFxuLy8gVVRGLTggcmVwbGFjZW1lbnQgY2hhcmFjdGVycyAoJ1xcdWZmZmQnKSwgdG8gbWF0Y2ggdjgncyBVVEYtOCBkZWNvZGluZ1xuLy8gYmVoYXZpb3IuIFRoZSBjb250aW51YXRpb24gYnl0ZSBjaGVjayBpcyBpbmNsdWRlZCB0aHJlZSB0aW1lcyBpbiB0aGUgY2FzZVxuLy8gd2hlcmUgYWxsIG9mIHRoZSBjb250aW51YXRpb24gYnl0ZXMgZm9yIGEgY2hhcmFjdGVyIGV4aXN0IGluIHRoZSBzYW1lIGJ1ZmZlci5cbi8vIEl0IGlzIGFsc28gZG9uZSB0aGlzIHdheSBhcyBhIHNsaWdodCBwZXJmb3JtYW5jZSBpbmNyZWFzZSBpbnN0ZWFkIG9mIHVzaW5nIGFcbi8vIGxvb3AuXG5mdW5jdGlvbiB1dGY4Q2hlY2tFeHRyYUJ5dGVzKHNlbGYsIGJ1ZiwgcCkge1xuICBpZiAoKGJ1ZlswXSAmIDB4QzApICE9PSAweDgwKSB7XG4gICAgc2VsZi5sYXN0TmVlZCA9IDA7XG4gICAgcmV0dXJuICdcXHVmZmZkJy5yZXBlYXQocCk7XG4gIH1cbiAgaWYgKHNlbGYubGFzdE5lZWQgPiAxICYmIGJ1Zi5sZW5ndGggPiAxKSB7XG4gICAgaWYgKChidWZbMV0gJiAweEMwKSAhPT0gMHg4MCkge1xuICAgICAgc2VsZi5sYXN0TmVlZCA9IDE7XG4gICAgICByZXR1cm4gJ1xcdWZmZmQnLnJlcGVhdChwICsgMSk7XG4gICAgfVxuICAgIGlmIChzZWxmLmxhc3ROZWVkID4gMiAmJiBidWYubGVuZ3RoID4gMikge1xuICAgICAgaWYgKChidWZbMl0gJiAweEMwKSAhPT0gMHg4MCkge1xuICAgICAgICBzZWxmLmxhc3ROZWVkID0gMjtcbiAgICAgICAgcmV0dXJuICdcXHVmZmZkJy5yZXBlYXQocCArIDIpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG4vLyBBdHRlbXB0cyB0byBjb21wbGV0ZSBhIG11bHRpLWJ5dGUgVVRGLTggY2hhcmFjdGVyIHVzaW5nIGJ5dGVzIGZyb20gYSBCdWZmZXIuXG5mdW5jdGlvbiB1dGY4RmlsbExhc3QoYnVmKSB7XG4gIHZhciBwID0gdGhpcy5sYXN0VG90YWwgLSB0aGlzLmxhc3ROZWVkO1xuICB2YXIgciA9IHV0ZjhDaGVja0V4dHJhQnl0ZXModGhpcywgYnVmLCBwKTtcbiAgaWYgKHIgIT09IHVuZGVmaW5lZCkgcmV0dXJuIHI7XG4gIGlmICh0aGlzLmxhc3ROZWVkIDw9IGJ1Zi5sZW5ndGgpIHtcbiAgICBidWYuY29weSh0aGlzLmxhc3RDaGFyLCBwLCAwLCB0aGlzLmxhc3ROZWVkKTtcbiAgICByZXR1cm4gdGhpcy5sYXN0Q2hhci50b1N0cmluZyh0aGlzLmVuY29kaW5nLCAwLCB0aGlzLmxhc3RUb3RhbCk7XG4gIH1cbiAgYnVmLmNvcHkodGhpcy5sYXN0Q2hhciwgcCwgMCwgYnVmLmxlbmd0aCk7XG4gIHRoaXMubGFzdE5lZWQgLT0gYnVmLmxlbmd0aDtcbn1cblxuLy8gUmV0dXJucyBhbGwgY29tcGxldGUgVVRGLTggY2hhcmFjdGVycyBpbiBhIEJ1ZmZlci4gSWYgdGhlIEJ1ZmZlciBlbmRlZCBvbiBhXG4vLyBwYXJ0aWFsIGNoYXJhY3RlciwgdGhlIGNoYXJhY3RlcidzIGJ5dGVzIGFyZSBidWZmZXJlZCB1bnRpbCB0aGUgcmVxdWlyZWRcbi8vIG51bWJlciBvZiBieXRlcyBhcmUgYXZhaWxhYmxlLlxuZnVuY3Rpb24gdXRmOFRleHQoYnVmLCBpKSB7XG4gIHZhciB0b3RhbCA9IHV0ZjhDaGVja0luY29tcGxldGUodGhpcywgYnVmLCBpKTtcbiAgaWYgKCF0aGlzLmxhc3ROZWVkKSByZXR1cm4gYnVmLnRvU3RyaW5nKCd1dGY4JywgaSk7XG4gIHRoaXMubGFzdFRvdGFsID0gdG90YWw7XG4gIHZhciBlbmQgPSBidWYubGVuZ3RoIC0gKHRvdGFsIC0gdGhpcy5sYXN0TmVlZCk7XG4gIGJ1Zi5jb3B5KHRoaXMubGFzdENoYXIsIDAsIGVuZCk7XG4gIHJldHVybiBidWYudG9TdHJpbmcoJ3V0ZjgnLCBpLCBlbmQpO1xufVxuXG4vLyBGb3IgVVRGLTgsIGEgcmVwbGFjZW1lbnQgY2hhcmFjdGVyIGZvciBlYWNoIGJ1ZmZlcmVkIGJ5dGUgb2YgYSAocGFydGlhbClcbi8vIGNoYXJhY3RlciBuZWVkcyB0byBiZSBhZGRlZCB0byB0aGUgb3V0cHV0LlxuZnVuY3Rpb24gdXRmOEVuZChidWYpIHtcbiAgdmFyIHIgPSBidWYgJiYgYnVmLmxlbmd0aCA/IHRoaXMud3JpdGUoYnVmKSA6ICcnO1xuICBpZiAodGhpcy5sYXN0TmVlZCkgcmV0dXJuIHIgKyAnXFx1ZmZmZCcucmVwZWF0KHRoaXMubGFzdFRvdGFsIC0gdGhpcy5sYXN0TmVlZCk7XG4gIHJldHVybiByO1xufVxuXG4vLyBVVEYtMTZMRSB0eXBpY2FsbHkgbmVlZHMgdHdvIGJ5dGVzIHBlciBjaGFyYWN0ZXIsIGJ1dCBldmVuIGlmIHdlIGhhdmUgYW4gZXZlblxuLy8gbnVtYmVyIG9mIGJ5dGVzIGF2YWlsYWJsZSwgd2UgbmVlZCB0byBjaGVjayBpZiB3ZSBlbmQgb24gYSBsZWFkaW5nL2hpZ2hcbi8vIHN1cnJvZ2F0ZS4gSW4gdGhhdCBjYXNlLCB3ZSBuZWVkIHRvIHdhaXQgZm9yIHRoZSBuZXh0IHR3byBieXRlcyBpbiBvcmRlciB0b1xuLy8gZGVjb2RlIHRoZSBsYXN0IGNoYXJhY3RlciBwcm9wZXJseS5cbmZ1bmN0aW9uIHV0ZjE2VGV4dChidWYsIGkpIHtcbiAgaWYgKChidWYubGVuZ3RoIC0gaSkgJSAyID09PSAwKSB7XG4gICAgdmFyIHIgPSBidWYudG9TdHJpbmcoJ3V0ZjE2bGUnLCBpKTtcbiAgICBpZiAocikge1xuICAgICAgdmFyIGMgPSByLmNoYXJDb2RlQXQoci5sZW5ndGggLSAxKTtcbiAgICAgIGlmIChjID49IDB4RDgwMCAmJiBjIDw9IDB4REJGRikge1xuICAgICAgICB0aGlzLmxhc3ROZWVkID0gMjtcbiAgICAgICAgdGhpcy5sYXN0VG90YWwgPSA0O1xuICAgICAgICB0aGlzLmxhc3RDaGFyWzBdID0gYnVmW2J1Zi5sZW5ndGggLSAyXTtcbiAgICAgICAgdGhpcy5sYXN0Q2hhclsxXSA9IGJ1ZltidWYubGVuZ3RoIC0gMV07XG4gICAgICAgIHJldHVybiByLnNsaWNlKDAsIC0xKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHI7XG4gIH1cbiAgdGhpcy5sYXN0TmVlZCA9IDE7XG4gIHRoaXMubGFzdFRvdGFsID0gMjtcbiAgdGhpcy5sYXN0Q2hhclswXSA9IGJ1ZltidWYubGVuZ3RoIC0gMV07XG4gIHJldHVybiBidWYudG9TdHJpbmcoJ3V0ZjE2bGUnLCBpLCBidWYubGVuZ3RoIC0gMSk7XG59XG5cbi8vIEZvciBVVEYtMTZMRSB3ZSBkbyBub3QgZXhwbGljaXRseSBhcHBlbmQgc3BlY2lhbCByZXBsYWNlbWVudCBjaGFyYWN0ZXJzIGlmIHdlXG4vLyBlbmQgb24gYSBwYXJ0aWFsIGNoYXJhY3Rlciwgd2Ugc2ltcGx5IGxldCB2OCBoYW5kbGUgdGhhdC5cbmZ1bmN0aW9uIHV0ZjE2RW5kKGJ1Zikge1xuICB2YXIgciA9IGJ1ZiAmJiBidWYubGVuZ3RoID8gdGhpcy53cml0ZShidWYpIDogJyc7XG4gIGlmICh0aGlzLmxhc3ROZWVkKSB7XG4gICAgdmFyIGVuZCA9IHRoaXMubGFzdFRvdGFsIC0gdGhpcy5sYXN0TmVlZDtcbiAgICByZXR1cm4gciArIHRoaXMubGFzdENoYXIudG9TdHJpbmcoJ3V0ZjE2bGUnLCAwLCBlbmQpO1xuICB9XG4gIHJldHVybiByO1xufVxuXG5mdW5jdGlvbiBiYXNlNjRUZXh0KGJ1ZiwgaSkge1xuICB2YXIgbiA9IChidWYubGVuZ3RoIC0gaSkgJSAzO1xuICBpZiAobiA9PT0gMCkgcmV0dXJuIGJ1Zi50b1N0cmluZygnYmFzZTY0JywgaSk7XG4gIHRoaXMubGFzdE5lZWQgPSAzIC0gbjtcbiAgdGhpcy5sYXN0VG90YWwgPSAzO1xuICBpZiAobiA9PT0gMSkge1xuICAgIHRoaXMubGFzdENoYXJbMF0gPSBidWZbYnVmLmxlbmd0aCAtIDFdO1xuICB9IGVsc2Uge1xuICAgIHRoaXMubGFzdENoYXJbMF0gPSBidWZbYnVmLmxlbmd0aCAtIDJdO1xuICAgIHRoaXMubGFzdENoYXJbMV0gPSBidWZbYnVmLmxlbmd0aCAtIDFdO1xuICB9XG4gIHJldHVybiBidWYudG9TdHJpbmcoJ2Jhc2U2NCcsIGksIGJ1Zi5sZW5ndGggLSBuKTtcbn1cblxuZnVuY3Rpb24gYmFzZTY0RW5kKGJ1Zikge1xuICB2YXIgciA9IGJ1ZiAmJiBidWYubGVuZ3RoID8gdGhpcy53cml0ZShidWYpIDogJyc7XG4gIGlmICh0aGlzLmxhc3ROZWVkKSByZXR1cm4gciArIHRoaXMubGFzdENoYXIudG9TdHJpbmcoJ2Jhc2U2NCcsIDAsIDMgLSB0aGlzLmxhc3ROZWVkKTtcbiAgcmV0dXJuIHI7XG59XG5cbi8vIFBhc3MgYnl0ZXMgb24gdGhyb3VnaCBmb3Igc2luZ2xlLWJ5dGUgZW5jb2RpbmdzIChlLmcuIGFzY2lpLCBsYXRpbjEsIGhleClcbmZ1bmN0aW9uIHNpbXBsZVdyaXRlKGJ1Zikge1xuICByZXR1cm4gYnVmLnRvU3RyaW5nKHRoaXMuZW5jb2RpbmcpO1xufVxuXG5mdW5jdGlvbiBzaW1wbGVFbmQoYnVmKSB7XG4gIHJldHVybiBidWYgJiYgYnVmLmxlbmd0aCA/IHRoaXMud3JpdGUoYnVmKSA6ICcnO1xufVxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGM6L2plbmtpbnMvd29ya3NwYWNlL2NhbV9zYnhfYWxsX21hc3Rlcl9zaWduZWQvc2J4LWFsbC1zaWduZWQvbm9kZV9tb2R1bGVzL25vZGUtbGlicy1icm93c2VyL25vZGVfbW9kdWxlcy9zdHJpbmdfZGVjb2Rlci9saWIvc3RyaW5nX2RlY29kZXIuanNcbi8vIG1vZHVsZSBpZCA9IDQ1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8vIENvcHlyaWdodCBKb3llbnQsIEluYy4gYW5kIG90aGVyIE5vZGUgY29udHJpYnV0b3JzLlxuLy9cbi8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhXG4vLyBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlXG4vLyBcIlNvZnR3YXJlXCIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmdcbi8vIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCxcbi8vIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXRcbi8vIHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZVxuLy8gZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4vL1xuLy8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWRcbi8vIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuLy9cbi8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1Ncbi8vIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0Zcbi8vIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU5cbi8vIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLFxuLy8gREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SXG4vLyBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFXG4vLyBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuXG4vLyBhIHRyYW5zZm9ybSBzdHJlYW0gaXMgYSByZWFkYWJsZS93cml0YWJsZSBzdHJlYW0gd2hlcmUgeW91IGRvXG4vLyBzb21ldGhpbmcgd2l0aCB0aGUgZGF0YS4gIFNvbWV0aW1lcyBpdCdzIGNhbGxlZCBhIFwiZmlsdGVyXCIsXG4vLyBidXQgdGhhdCdzIG5vdCBhIGdyZWF0IG5hbWUgZm9yIGl0LCBzaW5jZSB0aGF0IGltcGxpZXMgYSB0aGluZyB3aGVyZVxuLy8gc29tZSBiaXRzIHBhc3MgdGhyb3VnaCwgYW5kIG90aGVycyBhcmUgc2ltcGx5IGlnbm9yZWQuICAoVGhhdCB3b3VsZFxuLy8gYmUgYSB2YWxpZCBleGFtcGxlIG9mIGEgdHJhbnNmb3JtLCBvZiBjb3Vyc2UuKVxuLy9cbi8vIFdoaWxlIHRoZSBvdXRwdXQgaXMgY2F1c2FsbHkgcmVsYXRlZCB0byB0aGUgaW5wdXQsIGl0J3Mgbm90IGFcbi8vIG5lY2Vzc2FyaWx5IHN5bW1ldHJpYyBvciBzeW5jaHJvbm91cyB0cmFuc2Zvcm1hdGlvbi4gIEZvciBleGFtcGxlLFxuLy8gYSB6bGliIHN0cmVhbSBtaWdodCB0YWtlIG11bHRpcGxlIHBsYWluLXRleHQgd3JpdGVzKCksIGFuZCB0aGVuXG4vLyBlbWl0IGEgc2luZ2xlIGNvbXByZXNzZWQgY2h1bmsgc29tZSB0aW1lIGluIHRoZSBmdXR1cmUuXG4vL1xuLy8gSGVyZSdzIGhvdyB0aGlzIHdvcmtzOlxuLy9cbi8vIFRoZSBUcmFuc2Zvcm0gc3RyZWFtIGhhcyBhbGwgdGhlIGFzcGVjdHMgb2YgdGhlIHJlYWRhYmxlIGFuZCB3cml0YWJsZVxuLy8gc3RyZWFtIGNsYXNzZXMuICBXaGVuIHlvdSB3cml0ZShjaHVuayksIHRoYXQgY2FsbHMgX3dyaXRlKGNodW5rLGNiKVxuLy8gaW50ZXJuYWxseSwgYW5kIHJldHVybnMgZmFsc2UgaWYgdGhlcmUncyBhIGxvdCBvZiBwZW5kaW5nIHdyaXRlc1xuLy8gYnVmZmVyZWQgdXAuICBXaGVuIHlvdSBjYWxsIHJlYWQoKSwgdGhhdCBjYWxscyBfcmVhZChuKSB1bnRpbFxuLy8gdGhlcmUncyBlbm91Z2ggcGVuZGluZyByZWFkYWJsZSBkYXRhIGJ1ZmZlcmVkIHVwLlxuLy9cbi8vIEluIGEgdHJhbnNmb3JtIHN0cmVhbSwgdGhlIHdyaXR0ZW4gZGF0YSBpcyBwbGFjZWQgaW4gYSBidWZmZXIuICBXaGVuXG4vLyBfcmVhZChuKSBpcyBjYWxsZWQsIGl0IHRyYW5zZm9ybXMgdGhlIHF1ZXVlZCB1cCBkYXRhLCBjYWxsaW5nIHRoZVxuLy8gYnVmZmVyZWQgX3dyaXRlIGNiJ3MgYXMgaXQgY29uc3VtZXMgY2h1bmtzLiAgSWYgY29uc3VtaW5nIGEgc2luZ2xlXG4vLyB3cml0dGVuIGNodW5rIHdvdWxkIHJlc3VsdCBpbiBtdWx0aXBsZSBvdXRwdXQgY2h1bmtzLCB0aGVuIHRoZSBmaXJzdFxuLy8gb3V0cHV0dGVkIGJpdCBjYWxscyB0aGUgcmVhZGNiLCBhbmQgc3Vic2VxdWVudCBjaHVua3MganVzdCBnbyBpbnRvXG4vLyB0aGUgcmVhZCBidWZmZXIsIGFuZCB3aWxsIGNhdXNlIGl0IHRvIGVtaXQgJ3JlYWRhYmxlJyBpZiBuZWNlc3NhcnkuXG4vL1xuLy8gVGhpcyB3YXksIGJhY2stcHJlc3N1cmUgaXMgYWN0dWFsbHkgZGV0ZXJtaW5lZCBieSB0aGUgcmVhZGluZyBzaWRlLFxuLy8gc2luY2UgX3JlYWQgaGFzIHRvIGJlIGNhbGxlZCB0byBzdGFydCBwcm9jZXNzaW5nIGEgbmV3IGNodW5rLiAgSG93ZXZlcixcbi8vIGEgcGF0aG9sb2dpY2FsIGluZmxhdGUgdHlwZSBvZiB0cmFuc2Zvcm0gY2FuIGNhdXNlIGV4Y2Vzc2l2ZSBidWZmZXJpbmdcbi8vIGhlcmUuICBGb3IgZXhhbXBsZSwgaW1hZ2luZSBhIHN0cmVhbSB3aGVyZSBldmVyeSBieXRlIG9mIGlucHV0IGlzXG4vLyBpbnRlcnByZXRlZCBhcyBhbiBpbnRlZ2VyIGZyb20gMC0yNTUsIGFuZCB0aGVuIHJlc3VsdHMgaW4gdGhhdCBtYW55XG4vLyBieXRlcyBvZiBvdXRwdXQuICBXcml0aW5nIHRoZSA0IGJ5dGVzIHtmZixmZixmZixmZn0gd291bGQgcmVzdWx0IGluXG4vLyAxa2Igb2YgZGF0YSBiZWluZyBvdXRwdXQuICBJbiB0aGlzIGNhc2UsIHlvdSBjb3VsZCB3cml0ZSBhIHZlcnkgc21hbGxcbi8vIGFtb3VudCBvZiBpbnB1dCwgYW5kIGVuZCB1cCB3aXRoIGEgdmVyeSBsYXJnZSBhbW91bnQgb2Ygb3V0cHV0LiAgSW5cbi8vIHN1Y2ggYSBwYXRob2xvZ2ljYWwgaW5mbGF0aW5nIG1lY2hhbmlzbSwgdGhlcmUnZCBiZSBubyB3YXkgdG8gdGVsbFxuLy8gdGhlIHN5c3RlbSB0byBzdG9wIGRvaW5nIHRoZSB0cmFuc2Zvcm0uICBBIHNpbmdsZSA0TUIgd3JpdGUgY291bGRcbi8vIGNhdXNlIHRoZSBzeXN0ZW0gdG8gcnVuIG91dCBvZiBtZW1vcnkuXG4vL1xuLy8gSG93ZXZlciwgZXZlbiBpbiBzdWNoIGEgcGF0aG9sb2dpY2FsIGNhc2UsIG9ubHkgYSBzaW5nbGUgd3JpdHRlbiBjaHVua1xuLy8gd291bGQgYmUgY29uc3VtZWQsIGFuZCB0aGVuIHRoZSByZXN0IHdvdWxkIHdhaXQgKHVuLXRyYW5zZm9ybWVkKSB1bnRpbFxuLy8gdGhlIHJlc3VsdHMgb2YgdGhlIHByZXZpb3VzIHRyYW5zZm9ybWVkIGNodW5rIHdlcmUgY29uc3VtZWQuXG5cbid1c2Ugc3RyaWN0JztcblxubW9kdWxlLmV4cG9ydHMgPSBUcmFuc2Zvcm07XG5cbnZhciBEdXBsZXggPSByZXF1aXJlKCcuL19zdHJlYW1fZHVwbGV4Jyk7XG5cbi8qPHJlcGxhY2VtZW50PiovXG52YXIgdXRpbCA9IHJlcXVpcmUoJ2NvcmUtdXRpbC1pcycpO1xudXRpbC5pbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJyk7XG4vKjwvcmVwbGFjZW1lbnQ+Ki9cblxudXRpbC5pbmhlcml0cyhUcmFuc2Zvcm0sIER1cGxleCk7XG5cbmZ1bmN0aW9uIFRyYW5zZm9ybVN0YXRlKHN0cmVhbSkge1xuICB0aGlzLmFmdGVyVHJhbnNmb3JtID0gZnVuY3Rpb24gKGVyLCBkYXRhKSB7XG4gICAgcmV0dXJuIGFmdGVyVHJhbnNmb3JtKHN0cmVhbSwgZXIsIGRhdGEpO1xuICB9O1xuXG4gIHRoaXMubmVlZFRyYW5zZm9ybSA9IGZhbHNlO1xuICB0aGlzLnRyYW5zZm9ybWluZyA9IGZhbHNlO1xuICB0aGlzLndyaXRlY2IgPSBudWxsO1xuICB0aGlzLndyaXRlY2h1bmsgPSBudWxsO1xuICB0aGlzLndyaXRlZW5jb2RpbmcgPSBudWxsO1xufVxuXG5mdW5jdGlvbiBhZnRlclRyYW5zZm9ybShzdHJlYW0sIGVyLCBkYXRhKSB7XG4gIHZhciB0cyA9IHN0cmVhbS5fdHJhbnNmb3JtU3RhdGU7XG4gIHRzLnRyYW5zZm9ybWluZyA9IGZhbHNlO1xuXG4gIHZhciBjYiA9IHRzLndyaXRlY2I7XG5cbiAgaWYgKCFjYikge1xuICAgIHJldHVybiBzdHJlYW0uZW1pdCgnZXJyb3InLCBuZXcgRXJyb3IoJ3dyaXRlIGNhbGxiYWNrIGNhbGxlZCBtdWx0aXBsZSB0aW1lcycpKTtcbiAgfVxuXG4gIHRzLndyaXRlY2h1bmsgPSBudWxsO1xuICB0cy53cml0ZWNiID0gbnVsbDtcblxuICBpZiAoZGF0YSAhPT0gbnVsbCAmJiBkYXRhICE9PSB1bmRlZmluZWQpIHN0cmVhbS5wdXNoKGRhdGEpO1xuXG4gIGNiKGVyKTtcblxuICB2YXIgcnMgPSBzdHJlYW0uX3JlYWRhYmxlU3RhdGU7XG4gIHJzLnJlYWRpbmcgPSBmYWxzZTtcbiAgaWYgKHJzLm5lZWRSZWFkYWJsZSB8fCBycy5sZW5ndGggPCBycy5oaWdoV2F0ZXJNYXJrKSB7XG4gICAgc3RyZWFtLl9yZWFkKHJzLmhpZ2hXYXRlck1hcmspO1xuICB9XG59XG5cbmZ1bmN0aW9uIFRyYW5zZm9ybShvcHRpb25zKSB7XG4gIGlmICghKHRoaXMgaW5zdGFuY2VvZiBUcmFuc2Zvcm0pKSByZXR1cm4gbmV3IFRyYW5zZm9ybShvcHRpb25zKTtcblxuICBEdXBsZXguY2FsbCh0aGlzLCBvcHRpb25zKTtcblxuICB0aGlzLl90cmFuc2Zvcm1TdGF0ZSA9IG5ldyBUcmFuc2Zvcm1TdGF0ZSh0aGlzKTtcblxuICB2YXIgc3RyZWFtID0gdGhpcztcblxuICAvLyBzdGFydCBvdXQgYXNraW5nIGZvciBhIHJlYWRhYmxlIGV2ZW50IG9uY2UgZGF0YSBpcyB0cmFuc2Zvcm1lZC5cbiAgdGhpcy5fcmVhZGFibGVTdGF0ZS5uZWVkUmVhZGFibGUgPSB0cnVlO1xuXG4gIC8vIHdlIGhhdmUgaW1wbGVtZW50ZWQgdGhlIF9yZWFkIG1ldGhvZCwgYW5kIGRvbmUgdGhlIG90aGVyIHRoaW5nc1xuICAvLyB0aGF0IFJlYWRhYmxlIHdhbnRzIGJlZm9yZSB0aGUgZmlyc3QgX3JlYWQgY2FsbCwgc28gdW5zZXQgdGhlXG4gIC8vIHN5bmMgZ3VhcmQgZmxhZy5cbiAgdGhpcy5fcmVhZGFibGVTdGF0ZS5zeW5jID0gZmFsc2U7XG5cbiAgaWYgKG9wdGlvbnMpIHtcbiAgICBpZiAodHlwZW9mIG9wdGlvbnMudHJhbnNmb3JtID09PSAnZnVuY3Rpb24nKSB0aGlzLl90cmFuc2Zvcm0gPSBvcHRpb25zLnRyYW5zZm9ybTtcblxuICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5mbHVzaCA9PT0gJ2Z1bmN0aW9uJykgdGhpcy5fZmx1c2ggPSBvcHRpb25zLmZsdXNoO1xuICB9XG5cbiAgLy8gV2hlbiB0aGUgd3JpdGFibGUgc2lkZSBmaW5pc2hlcywgdGhlbiBmbHVzaCBvdXQgYW55dGhpbmcgcmVtYWluaW5nLlxuICB0aGlzLm9uY2UoJ3ByZWZpbmlzaCcsIGZ1bmN0aW9uICgpIHtcbiAgICBpZiAodHlwZW9mIHRoaXMuX2ZsdXNoID09PSAnZnVuY3Rpb24nKSB0aGlzLl9mbHVzaChmdW5jdGlvbiAoZXIsIGRhdGEpIHtcbiAgICAgIGRvbmUoc3RyZWFtLCBlciwgZGF0YSk7XG4gICAgfSk7ZWxzZSBkb25lKHN0cmVhbSk7XG4gIH0pO1xufVxuXG5UcmFuc2Zvcm0ucHJvdG90eXBlLnB1c2ggPSBmdW5jdGlvbiAoY2h1bmssIGVuY29kaW5nKSB7XG4gIHRoaXMuX3RyYW5zZm9ybVN0YXRlLm5lZWRUcmFuc2Zvcm0gPSBmYWxzZTtcbiAgcmV0dXJuIER1cGxleC5wcm90b3R5cGUucHVzaC5jYWxsKHRoaXMsIGNodW5rLCBlbmNvZGluZyk7XG59O1xuXG4vLyBUaGlzIGlzIHRoZSBwYXJ0IHdoZXJlIHlvdSBkbyBzdHVmZiFcbi8vIG92ZXJyaWRlIHRoaXMgZnVuY3Rpb24gaW4gaW1wbGVtZW50YXRpb24gY2xhc3Nlcy5cbi8vICdjaHVuaycgaXMgYW4gaW5wdXQgY2h1bmsuXG4vL1xuLy8gQ2FsbCBgcHVzaChuZXdDaHVuaylgIHRvIHBhc3MgYWxvbmcgdHJhbnNmb3JtZWQgb3V0cHV0XG4vLyB0byB0aGUgcmVhZGFibGUgc2lkZS4gIFlvdSBtYXkgY2FsbCAncHVzaCcgemVybyBvciBtb3JlIHRpbWVzLlxuLy9cbi8vIENhbGwgYGNiKGVycilgIHdoZW4geW91IGFyZSBkb25lIHdpdGggdGhpcyBjaHVuay4gIElmIHlvdSBwYXNzXG4vLyBhbiBlcnJvciwgdGhlbiB0aGF0J2xsIHB1dCB0aGUgaHVydCBvbiB0aGUgd2hvbGUgb3BlcmF0aW9uLiAgSWYgeW91XG4vLyBuZXZlciBjYWxsIGNiKCksIHRoZW4geW91J2xsIG5ldmVyIGdldCBhbm90aGVyIGNodW5rLlxuVHJhbnNmb3JtLnByb3RvdHlwZS5fdHJhbnNmb3JtID0gZnVuY3Rpb24gKGNodW5rLCBlbmNvZGluZywgY2IpIHtcbiAgdGhyb3cgbmV3IEVycm9yKCdfdHJhbnNmb3JtKCkgaXMgbm90IGltcGxlbWVudGVkJyk7XG59O1xuXG5UcmFuc2Zvcm0ucHJvdG90eXBlLl93cml0ZSA9IGZ1bmN0aW9uIChjaHVuaywgZW5jb2RpbmcsIGNiKSB7XG4gIHZhciB0cyA9IHRoaXMuX3RyYW5zZm9ybVN0YXRlO1xuICB0cy53cml0ZWNiID0gY2I7XG4gIHRzLndyaXRlY2h1bmsgPSBjaHVuaztcbiAgdHMud3JpdGVlbmNvZGluZyA9IGVuY29kaW5nO1xuICBpZiAoIXRzLnRyYW5zZm9ybWluZykge1xuICAgIHZhciBycyA9IHRoaXMuX3JlYWRhYmxlU3RhdGU7XG4gICAgaWYgKHRzLm5lZWRUcmFuc2Zvcm0gfHwgcnMubmVlZFJlYWRhYmxlIHx8IHJzLmxlbmd0aCA8IHJzLmhpZ2hXYXRlck1hcmspIHRoaXMuX3JlYWQocnMuaGlnaFdhdGVyTWFyayk7XG4gIH1cbn07XG5cbi8vIERvZXNuJ3QgbWF0dGVyIHdoYXQgdGhlIGFyZ3MgYXJlIGhlcmUuXG4vLyBfdHJhbnNmb3JtIGRvZXMgYWxsIHRoZSB3b3JrLlxuLy8gVGhhdCB3ZSBnb3QgaGVyZSBtZWFucyB0aGF0IHRoZSByZWFkYWJsZSBzaWRlIHdhbnRzIG1vcmUgZGF0YS5cblRyYW5zZm9ybS5wcm90b3R5cGUuX3JlYWQgPSBmdW5jdGlvbiAobikge1xuICB2YXIgdHMgPSB0aGlzLl90cmFuc2Zvcm1TdGF0ZTtcblxuICBpZiAodHMud3JpdGVjaHVuayAhPT0gbnVsbCAmJiB0cy53cml0ZWNiICYmICF0cy50cmFuc2Zvcm1pbmcpIHtcbiAgICB0cy50cmFuc2Zvcm1pbmcgPSB0cnVlO1xuICAgIHRoaXMuX3RyYW5zZm9ybSh0cy53cml0ZWNodW5rLCB0cy53cml0ZWVuY29kaW5nLCB0cy5hZnRlclRyYW5zZm9ybSk7XG4gIH0gZWxzZSB7XG4gICAgLy8gbWFyayB0aGF0IHdlIG5lZWQgYSB0cmFuc2Zvcm0sIHNvIHRoYXQgYW55IGRhdGEgdGhhdCBjb21lcyBpblxuICAgIC8vIHdpbGwgZ2V0IHByb2Nlc3NlZCwgbm93IHRoYXQgd2UndmUgYXNrZWQgZm9yIGl0LlxuICAgIHRzLm5lZWRUcmFuc2Zvcm0gPSB0cnVlO1xuICB9XG59O1xuXG5UcmFuc2Zvcm0ucHJvdG90eXBlLl9kZXN0cm95ID0gZnVuY3Rpb24gKGVyciwgY2IpIHtcbiAgdmFyIF90aGlzID0gdGhpcztcblxuICBEdXBsZXgucHJvdG90eXBlLl9kZXN0cm95LmNhbGwodGhpcywgZXJyLCBmdW5jdGlvbiAoZXJyMikge1xuICAgIGNiKGVycjIpO1xuICAgIF90aGlzLmVtaXQoJ2Nsb3NlJyk7XG4gIH0pO1xufTtcblxuZnVuY3Rpb24gZG9uZShzdHJlYW0sIGVyLCBkYXRhKSB7XG4gIGlmIChlcikgcmV0dXJuIHN0cmVhbS5lbWl0KCdlcnJvcicsIGVyKTtcblxuICBpZiAoZGF0YSAhPT0gbnVsbCAmJiBkYXRhICE9PSB1bmRlZmluZWQpIHN0cmVhbS5wdXNoKGRhdGEpO1xuXG4gIC8vIGlmIHRoZXJlJ3Mgbm90aGluZyBpbiB0aGUgd3JpdGUgYnVmZmVyLCB0aGVuIHRoYXQgbWVhbnNcbiAgLy8gdGhhdCBub3RoaW5nIG1vcmUgd2lsbCBldmVyIGJlIHByb3ZpZGVkXG4gIHZhciB3cyA9IHN0cmVhbS5fd3JpdGFibGVTdGF0ZTtcbiAgdmFyIHRzID0gc3RyZWFtLl90cmFuc2Zvcm1TdGF0ZTtcblxuICBpZiAod3MubGVuZ3RoKSB0aHJvdyBuZXcgRXJyb3IoJ0NhbGxpbmcgdHJhbnNmb3JtIGRvbmUgd2hlbiB3cy5sZW5ndGggIT0gMCcpO1xuXG4gIGlmICh0cy50cmFuc2Zvcm1pbmcpIHRocm93IG5ldyBFcnJvcignQ2FsbGluZyB0cmFuc2Zvcm0gZG9uZSB3aGVuIHN0aWxsIHRyYW5zZm9ybWluZycpO1xuXG4gIHJldHVybiBzdHJlYW0ucHVzaChudWxsKTtcbn1cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBjOi9qZW5raW5zL3dvcmtzcGFjZS9jYW1fc2J4X2FsbF9tYXN0ZXJfc2lnbmVkL3NieC1hbGwtc2lnbmVkL25vZGVfbW9kdWxlcy9zdHJlYW0tYnJvd3NlcmlmeS9ub2RlX21vZHVsZXMvcmVhZGFibGUtc3RyZWFtL2xpYi9fc3RyZWFtX3RyYW5zZm9ybS5qc1xuLy8gbW9kdWxlIGlkID0gNDZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLy8gQ29weXJpZ2h0IChjKSAyMDE4IEJyb21pdW0sIEluYy5cclxuLy8gVXNlIG9mIHRoZSBCcm9taXVtLCBJbmMuIHNvZnR3YXJlIHJlcXVpcmVzIGEgbGljZW5zZSBhZ3JlZW1lbnQgd2l0aCBCcm9taXVtLCBJbmMuIG9yIGFuIGF1dGhvcml6ZWQgcmVzZWxsZXIuXHJcblxyXG4vLy8gPHJlZmVyZW5jZSB0eXBlcz1cImNocm9tZVwiLz5cclxuaW1wb3J0IHsgTm9uZSwgU29tZSwgTWF5YmUsIHNvbWUsIG5vbmUgfSBmcm9tIFwiLi9tYXliZVwiO1xyXG5pbXBvcnQgeyBUYWJJZCwgV2luZG93SWQgfSBmcm9tIFwiLi9jb21tb24tdHlwZXNcIjtcclxuaW1wb3J0IHsgaXNWYWxpZFRhYklkLCBpc1ZhbGlkV2luZG93SWQgfSBmcm9tIFwiLi90YWItdXRpbHNcIjtcclxuaW1wb3J0IHsgVVJMT3JTcGVjLCBwYXJzZVVybCwgVVJMLCBpc1VSTCwgbWF5YmVQYXJzZVVybCwgcGFyc2VVUkxJZk5lY2Vzc2FyeSwgaXNTYW1lVXJsLCBVcmxDb21wYXJlT3B0aW9ucyB9IGZyb20gXCIuL3VybC11dGlsc1wiO1xyXG5pbXBvcnQgeyBmaWx0ZXIsIHRvQXJyYXksIGlzRW1wdHkgfSBmcm9tIFwiLi9pdGVyLXV0aWxzXCI7XHJcbmltcG9ydCB7IGZpcnN0LCBtYXAgfSBmcm9tIFwiLi9pdGVyLXV0aWxzXCI7XHJcbmltcG9ydCB7IEJyb3dzZXIgfSBmcm9tIFwiLi9icm93c2VyXCI7XHJcbmltcG9ydCB7IHRvU3RyaW5nIH0gZnJvbSBcIi4vc3RyaW5nLXV0aWxzXCI7XHJcblxyXG50eXBlIFdpbmRvdyA9IGNocm9tZS53aW5kb3dzLldpbmRvdztcclxudHlwZSBUYWIgPSBjaHJvbWUudGFicy5UYWI7XHJcbnR5cGUgVGFicyA9IFNldDxUYWJJZD47XHJcbnR5cGUgV2luZG93cyA9IFNldDxXaW5kb3dJZD47XHJcbnR5cGUgV2luZG93VG9UYWJzID0gTWFwPFdpbmRvd0lkLCBTZXQ8VGFiSWQ+PjtcclxudHlwZSBXaW5kb3dUb1RhYiA9IE1hcDxXaW5kb3dJZCwgVGFiSWQ+O1xyXG50eXBlIFRhYlRvV2luZG93ID0gTWFwPFRhYklkLCBXaW5kb3dJZD47XHJcbnR5cGUgVGFiVVJMcyA9IE1hcDxUYWJJZCwgVVJMT3JTcGVjPjtcclxudHlwZSBPcGVuZXJUYWJzID0gTWFwPFRhYklkLCBUYWJJZD47XHJcbnR5cGUgT3BlbmVyV2luZG93cyA9IE1hcDxXaW5kb3dJZCwgW1dpbmRvd0lkLCBUYWJJZF0+O1xyXG5cclxuZXhwb3J0IHR5cGUgT25UYWJDbG9zZWQgPSAodGFiSWQ6IFRhYklkKSA9PiB2b2lkO1xyXG5leHBvcnQgaW50ZXJmYWNlIElUYWJDbG9zZWROb3RpZmllciB7XHJcbiAgICByZWdpc3Rlck9uVGFiQ2xvc2VkSGFuZGxlcihoYW5kbGVyOiBPblRhYkNsb3NlZCk6IHZvaWQ7XHJcbn1cclxuXHJcbmV4cG9ydCB0eXBlIE9uVGFiQ3JlYXRlZCA9ICh0YWJJZDogVGFiSWQpID0+IHZvaWQ7XHJcbmV4cG9ydCBpbnRlcmZhY2UgSVRhYkNyZWF0ZWROb3RpZmllciB7XHJcbiAgICByZWdpc3Rlck9uVGFiQ3JlYXRlZEhhbmRsZXIoaGFuZGxlcjogT25UYWJDcmVhdGVkKTogdm9pZDtcclxufVxyXG5cclxuZXhwb3J0IHR5cGUgT25UYWJSZXN0b3JlZCA9ICh0YWJJZDogVGFiSWQsIHVybDogTWF5YmU8VVJMPikgPT4gdm9pZDsgXHJcbmV4cG9ydCBpbnRlcmZhY2UgSVRhYlJlc3RvcmVkTm90aWZpZXIge1xyXG4gICAgcmVnaXN0ZXJPblRhYlJlc3RvcmVkTGlzdGVuZXIobGlzdGVuZXI6IE9uVGFiUmVzdG9yZWQpOiB2b2lkO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VCcm93c2VyTmV3VGFiVVJMcygpOiBNYXA8QnJvd3NlciwgVVJMPiB7XHJcbiAgICBjb25zdCBuZXdUYWJTcGVjczogW0Jyb3dzZXIsIHN0cmluZ11bXSA9IFtcclxuICAgICAgICBbQnJvd3Nlci5jaHJvbWUsIFwiY2hyb21lOi8vbmV3dGFiXCJdLFxyXG4gICAgICAgIFtCcm93c2VyLmZpcmVmb3gsIFwiYWJvdXQ6bmV3dGFiXCJdLFxyXG4gICAgICAgIFtCcm93c2VyLmVkZ2UsIFwiaHR0cHM6Ly93d3cubXNuLmNvbS9zcGFydGFuL250cFwiXSxcclxuICAgICAgICBbQnJvd3Nlci5lZGdlQ2hyb21pdW0sIFwiaHR0cHM6Ly9udHAubXNuLmNvbS9lZGdlL250cFwiXVxyXG4gICAgXTtcclxuICAgIGNvbnN0IG5ld1RhYlVSTHMgPSBuZXdUYWJTcGVjcy5tYXAoKFticm93c2VyLCBzcGVjXSk6IE1heWJlPFtCcm93c2VyLCBVUkxdPiA9PiB7XHJcbiAgICAgICAgY29uc3QgdXJsID0gcGFyc2VVcmwoc3BlYyk7XHJcbiAgICAgICAgaWYgKG5vbmUodXJsKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gW2Jyb3dzZXIsIHVybF07XHJcbiAgICB9KS5maWx0ZXIoc29tZSk7XHJcbiAgICByZXR1cm4gbmV3IE1hcDxCcm93c2VyLCBVUkw+KG5ld1RhYlVSTHMpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBwYXJzZVRhYlVybCh0YWI6IFRhYiB8IGNocm9tZS50YWJzLlRhYkNoYW5nZUluZm8pOiBNYXliZTxVUkxPclNwZWM+IHtcclxuICAgIGlmICh0YWIudXJsID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgfVxyXG4gICAgY29uc3Qgc3BlYyA9IHRhYi51cmw7XHJcbiAgICBjb25zdCB1cmwgPSBwYXJzZVVybChzcGVjKTtcclxuICAgIGlmICh1cmwgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIHJldHVybiBzcGVjO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gdXJsO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgVGFiU3RhbGtlciBpbXBsZW1lbnRzIElUYWJDbG9zZWROb3RpZmllciwgSVRhYkNyZWF0ZWROb3RpZmllciB7XHJcbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIGJyb3dzZXI6IE1heWJlPEJyb3dzZXI+KSB7XHJcbiAgICAgICAgdGhpcy5icm93c2VyTmV3VGFiVVJMcyA9IHBhcnNlQnJvd3Nlck5ld1RhYlVSTHMoKTtcclxuICAgIH1cclxuXHJcbiAgICBxdWVyeVJlc3RvcmVkU2Vzc2lvblRhYnMoKSB7XHJcbiAgICAgICAgY2hyb21lLndpbmRvd3MuZ2V0QWxsKCh3aW5kb3dzKSA9PiB7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3Qgd2luZG93IG9mIHdpbmRvd3MpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMub25XaW5kb3dDcmVhdGVkKHdpbmRvdyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2hyb21lLnRhYnMucXVlcnkoe30sICh0YWJzKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHRhYiBvZiB0YWJzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vblRhYkNyZWF0ZWQodGFiKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB0YWJJZCA9IHRhYi5pZDtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc29tZSh0YWJJZCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXN0b3JlZFNlc3Npb25UYWJzLmFkZCh0YWJJZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHVybCA9IHNvbWUodGFiLnVybCkgPyBwYXJzZVVybCh0YWIudXJsKSA6IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RpZnlPblRhYlJlc3RvcmVkTGlzdGVuZXJzKHRhYklkLCB1cmwpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBvblRhYkNyZWF0ZWQodGFiOiBUYWIpIHtcclxuICAgICAgICBjb25zdCB0YWJJZCA9IHRhYi5pZDtcclxuICAgICAgICBpZiAodGFiSWQgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghaXNWYWxpZFRhYklkKHRhYklkKSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHdpbmRvd0lkID0gdGFiLndpbmRvd0lkO1xyXG4gICAgICAgIHRoaXMudGFicy5hZGQodGFiSWQpO1xyXG4gICAgICAgIHRoaXMuYWRkVGFiVG9XaW5kb3codGFiSWQsIHdpbmRvd0lkKTtcclxuICAgICAgICBjb25zdCBvcGVuZXJUYWJJZCA9IHRhYi5vcGVuZXJUYWJJZDtcclxuICAgICAgICBpZiAob3BlbmVyVGFiSWQgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aGlzLm9wZW5lclRhYnMuc2V0KHRhYklkLCBvcGVuZXJUYWJJZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0YWIuYWN0aXZlKSB7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlVGFiQWN0aXZhdGlvbih0YWJJZCwgd2luZG93SWQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnVwZGF0ZVRhYlVSTCh0YWJJZCwgdGFiKTtcclxuICAgICAgICB0aGlzLm5vdGlmeU9uVGFiQ3JlYXRlZEhhbmRsZXJzKHRhYklkKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHVwZGF0ZVRhYlVSTCh0YWJJZDogVGFiSWQsIHRhYkluZm86IFRhYiB8IGNocm9tZS50YWJzLlRhYkNoYW5nZUluZm8pIHtcclxuICAgICAgICBpZiAodGFiSW5mby51cmwgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHVybCA9IHBhcnNlVGFiVXJsKHRhYkluZm8pO1xyXG4gICAgICAgIGlmICh1cmwgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMudGFiVVJMcy5zZXQodGFiSWQsIHVybCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBvblRhYlVwZGF0ZWQodGFiSWQ6IFRhYklkLCBjaGFuZ2VJbmZvOiBjaHJvbWUudGFicy5UYWJDaGFuZ2VJbmZvLCB0YWI6IFRhYikge1xyXG4gICAgICAgIGlmICghaXNWYWxpZFRhYklkKHRhYklkKSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMudGFicy5hZGQodGFiSWQpO1xyXG4gICAgICAgIGlmICh0YWIuYWN0aXZlKSB7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlVGFiQWN0aXZhdGlvbih0YWJJZCwgdGFiLndpbmRvd0lkKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy51cGRhdGVUYWJVUkwodGFiSWQsIGNoYW5nZUluZm8pO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgb25UYWJNb3ZlZCh0YWJJZDogVGFiSWQsIG1vdmVJbmZvOiBjaHJvbWUudGFicy5UYWJNb3ZlSW5mbykge1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIG9uVGFiQWN0aXZhdGVkKGFjdGl2ZUluZm86IGNocm9tZS50YWJzLlRhYkFjdGl2ZUluZm8pIHtcclxuICAgICAgICBjb25zdCB0YWJJZCA9IGFjdGl2ZUluZm8udGFiSWQ7XHJcbiAgICAgICAgY29uc3Qgd2luZG93SWQgPSBhY3RpdmVJbmZvLndpbmRvd0lkO1xyXG5cclxuICAgICAgICAvLyBJZiB3ZSBhbHJlYWR5IGtub3cgYWJvdXQgdGhlIHRhYiB0aGVuIGp1c3QgdXBkYXRlIHRoZSBhY3RpdmF0aW9uLCBvdGhlcndpc2UgY3JlYXRlIGEgbmV3IGVudHJ5IGZvciB0aGUgdGFiXHJcbiAgICAgICAgLy8gKHdoaWNoIGluY2x1ZGVzIHVwZGF0aW5nIHRoZSBhY3RpdmF0aW9uIGlmIGFwcHJvcHJhaXRlKS4gRm9yIEVkZ2UgaXQncyBjb21tb24gdG8gbm90IGdldCB0aGUgb25UYWJDcmVhdGVkXHJcbiAgICAgICAgLy8gZXZlbnQgYW5kIHRvIG9ubHkgZ2V0IHRoZSBvblRhYkFjdGl2YXRlZCBldmVudCwgaGVuY2UgdGhlIG5lZWQgdG8gcG90ZW50aWFsbHkgY3JlYXRlIHRhYiBlbnRyaWVzIGhlcmUuXHJcbiAgICAgICAgaWYgKHRoaXMudGFicy5oYXModGFiSWQpKSB7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlVGFiQWN0aXZhdGlvbih0YWJJZCwgd2luZG93SWQpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNocm9tZS50YWJzLmdldCh0YWJJZCwgdGFiID0+IHRoaXMub25UYWJDcmVhdGVkKHRhYikpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHVwZGF0ZVRhYkFjdGl2YXRpb24odGFiSWQ6IFRhYklkLCB3aW5kb3dJZDogV2luZG93SWQpIHtcclxuICAgICAgICBpZiAoIWlzVmFsaWRUYWJJZCh0YWJJZCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIWlzVmFsaWRXaW5kb3dJZCh3aW5kb3dJZCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgbGFzdEFjdGl2YXRlZFRhYklkID0gdGhpcy53aW5kb3dBY3RpdmF0ZWRUYWJzLmdldCh3aW5kb3dJZCk7XHJcbiAgICAgICAgaWYgKHNvbWUobGFzdEFjdGl2YXRlZFRhYklkKSAmJiBsYXN0QWN0aXZhdGVkVGFiSWQgIT09IHRhYklkKSB7XHJcbiAgICAgICAgICAgIHRoaXMud2luZG93TGFzdFVuaXF1ZUFjdGl2YXRlZFRhYnMuc2V0KHdpbmRvd0lkLCBsYXN0QWN0aXZhdGVkVGFiSWQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy53aW5kb3dBY3RpdmF0ZWRUYWJzLnNldCh3aW5kb3dJZCwgdGFiSWQpO1xyXG4gICAgICAgIHRoaXMuYWN0aXZhdGVkVGFicyA9IG5ldyBTZXQodGhpcy53aW5kb3dBY3RpdmF0ZWRUYWJzLnZhbHVlcygpKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIG9uVGFiSGlnaGxpZ2h0ZWQoaGlnaGxpZ2h0SW5mbzogY2hyb21lLnRhYnMuSGlnaGxpZ2h0SW5mbykge1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIG9uVGFiRGV0YWNoZWQodGFiSWQ6IFRhYklkLCBkZXRhY2hJbmZvOiBjaHJvbWUudGFicy5UYWJEZXRhY2hJbmZvKSB7XHJcbiAgICAgICAgaWYgKCFpc1ZhbGlkVGFiSWQodGFiSWQpKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3Qgd2luZG93SWQgPSBkZXRhY2hJbmZvLm9sZFdpbmRvd0lkO1xyXG4gICAgICAgIGlmICghaXNWYWxpZFdpbmRvd0lkKHdpbmRvd0lkKSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMucmVtb3ZlVGFiRnJvbVdpbmRvdyh0YWJJZCwgd2luZG93SWQpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgb25UYWJBdHRhY2hlZCh0YWJJZDogVGFiSWQsIGF0dGFjaEluZm86IGNocm9tZS50YWJzLlRhYkF0dGFjaEluZm8pIHtcclxuICAgICAgICBpZiAoIWlzVmFsaWRUYWJJZCh0YWJJZCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCB3aW5kb3dJZCA9IGF0dGFjaEluZm8ubmV3V2luZG93SWQ7XHJcbiAgICAgICAgaWYgKCFpc1ZhbGlkV2luZG93SWQod2luZG93SWQpKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5hZGRUYWJUb1dpbmRvdyh0YWJJZCwgd2luZG93SWQpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcmVtb3ZlVGFiKHRhYklkOiBUYWJJZCkge1xyXG4gICAgICAgIHRoaXMudGFicy5kZWxldGUodGFiSWQpO1xyXG4gICAgICAgIHRoaXMudGFiVVJMcy5kZWxldGUodGFiSWQpO1xyXG4gICAgICAgIHRoaXMub3BlbmVyVGFicy5kZWxldGUodGFiSWQpO1xyXG4gICAgICAgIHRoaXMucmVzdG9yZWRTZXNzaW9uVGFicy5kZWxldGUodGFiSWQpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgb25UYWJSZW1vdmVkKHRhYklkOiBUYWJJZCwgcmVtb3ZlSW5mbzogY2hyb21lLnRhYnMuVGFiUmVtb3ZlSW5mbykge1xyXG4gICAgICAgIGlmICghaXNWYWxpZFRhYklkKHRhYklkKSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHdpbmRvd0lkID0gcmVtb3ZlSW5mby53aW5kb3dJZDtcclxuICAgICAgICBpZiAoIWlzVmFsaWRXaW5kb3dJZCh3aW5kb3dJZCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLm5vdGlmeU9uVGFiQ2xvc2VkSGFuZGxlcnModGFiSWQpO1xyXG4gICAgICAgIHRoaXMucmVtb3ZlVGFiRnJvbVdpbmRvdyh0YWJJZCwgd2luZG93SWQpO1xyXG4gICAgICAgIHRoaXMucmVtb3ZlVGFiKHRhYklkKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIG9uVGFiUmVwbGFjZWQoYWRkZWRUYWJJZDogVGFiSWQsIHJlbW92ZWRUYWJJZDogVGFiSWQpIHtcclxuICAgICAgICBpZiAodGhpcy5pc1RhYihhZGRlZFRhYklkKSkge1xyXG4gICAgICAgICAgICBjb25zdCB3aW5kb3dJZCA9IHRoaXMuZmluZFRhYldpbmRvd0lkKGFkZGVkVGFiSWQpO1xyXG4gICAgICAgICAgICBpZiAoc29tZSh3aW5kb3dJZCkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYWRkVGFiVG9XaW5kb3coYWRkZWRUYWJJZCwgd2luZG93SWQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmlzVGFiKHJlbW92ZWRUYWJJZCkpIHtcclxuICAgICAgICAgICAgY29uc3Qgd2luZG93SWQgPSB0aGlzLmZpbmRUYWJXaW5kb3dJZChyZW1vdmVkVGFiSWQpO1xyXG4gICAgICAgICAgICBpZiAoc29tZSh3aW5kb3dJZCkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlVGFiRnJvbVdpbmRvdyhyZW1vdmVkVGFiSWQsIHdpbmRvd0lkKTtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlVGFiKHJlbW92ZWRUYWJJZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBvbldpbmRvd0NyZWF0ZWQod2luZG93OiBXaW5kb3cpIHtcclxuICAgICAgICBjb25zdCB3aW5kb3dJZCA9IHdpbmRvdy5pZDtcclxuICAgICAgICBpZiAoIWlzVmFsaWRXaW5kb3dJZCh3aW5kb3dJZCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLndpbmRvd3MuYWRkKHdpbmRvd0lkKTtcclxuICAgICAgICBsZXQgZm9jdXNlZFdpbmRvd0lkID0gdGhpcy5mb2N1c2VkV2luZG93SWQ7XHJcbiAgICAgICAgaWYgKGZvY3VzZWRXaW5kb3dJZCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGZvY3VzZWRXaW5kb3dJZCA9IHRoaXMubGFzdEZvY3VzZWRXaW5kb3dJZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGZvY3VzZWRXaW5kb3dJZCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGFjdGl2YXRlZFRhYklkID0gdGhpcy53aW5kb3dBY3RpdmF0ZWRUYWJzLmdldChmb2N1c2VkV2luZG93SWQpO1xyXG4gICAgICAgICAgICBpZiAoYWN0aXZhdGVkVGFiSWQgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vcGVuZXJXaW5kb3dzLnNldCh3aW5kb3dJZCwgW2ZvY3VzZWRXaW5kb3dJZCwgYWN0aXZhdGVkVGFiSWRdKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIG9uV2luZG93UmVtb3ZlZCh3aW5kb3dJZDogV2luZG93SWQpIHtcclxuICAgICAgICBpZiAoIWlzVmFsaWRXaW5kb3dJZCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMud2luZG93cy5kZWxldGUod2luZG93SWQpO1xyXG4gICAgICAgIGNvbnN0IHRhYnMgPSB0aGlzLndpbmRvd3NUb1RhYnMuZ2V0KHdpbmRvd0lkKTtcclxuICAgICAgICBpZiAodGFicyAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgdGFiSWQgb2YgdGFicykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVUYWIodGFiSWQpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVUYWJGcm9tV2luZG93KHRhYklkLCB3aW5kb3dJZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy53aW5kb3dzVG9UYWJzLmRlbGV0ZSh3aW5kb3dJZCk7XHJcbiAgICAgICAgdGhpcy53aW5kb3dBY3RpdmF0ZWRUYWJzLmRlbGV0ZSh3aW5kb3dJZCk7XHJcbiAgICAgICAgdGhpcy53aW5kb3dMYXN0VW5pcXVlQWN0aXZhdGVkVGFicy5kZWxldGUod2luZG93SWQpO1xyXG4gICAgICAgIHRoaXMub3BlbmVyV2luZG93cy5kZWxldGUod2luZG93SWQpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgb25XaW5kb3dGb2N1c0NoYW5nZWQod2luZG93SWQ6IFdpbmRvd0lkKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZm9jdXNlZFdpbmRvd0lkICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5sYXN0Rm9jdXNlZFdpbmRvd0lkID0gdGhpcy5mb2N1c2VkV2luZG93SWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChpc1ZhbGlkV2luZG93SWQod2luZG93SWQpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZm9jdXNlZFdpbmRvd0lkID0gd2luZG93SWQ7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5mb2N1c2VkV2luZG93SWQgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcmVnaXN0ZXJUYWJFdmVudExpc3RlbmVycygpIHtcclxuICAgICAgICBjaHJvbWUudGFicy5vbkNyZWF0ZWQuYWRkTGlzdGVuZXIodGhpcy5vblRhYkNyZWF0ZWQuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgY2hyb21lLnRhYnMub25VcGRhdGVkLmFkZExpc3RlbmVyKHRoaXMub25UYWJVcGRhdGVkLmJpbmQodGhpcykpO1xyXG4gICAgICAgIGNocm9tZS50YWJzLm9uTW92ZWQuYWRkTGlzdGVuZXIodGhpcy5vblRhYk1vdmVkLmJpbmQodGhpcykpO1xyXG4gICAgICAgIGNocm9tZS50YWJzLm9uQWN0aXZhdGVkLmFkZExpc3RlbmVyKHRoaXMub25UYWJBY3RpdmF0ZWQuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgY2hyb21lLnRhYnMub25IaWdobGlnaHRlZC5hZGRMaXN0ZW5lcih0aGlzLm9uVGFiSGlnaGxpZ2h0ZWQuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgY2hyb21lLnRhYnMub25EZXRhY2hlZC5hZGRMaXN0ZW5lcih0aGlzLm9uVGFiRGV0YWNoZWQuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgY2hyb21lLnRhYnMub25BdHRhY2hlZC5hZGRMaXN0ZW5lcih0aGlzLm9uVGFiQXR0YWNoZWQuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgY2hyb21lLnRhYnMub25SZW1vdmVkLmFkZExpc3RlbmVyKHRoaXMub25UYWJSZW1vdmVkLmJpbmQodGhpcykpO1xyXG4gICAgICAgIGNocm9tZS50YWJzLm9uUmVwbGFjZWQuYWRkTGlzdGVuZXIodGhpcy5vblRhYlJlcGxhY2VkLmJpbmQodGhpcykpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcmVnaXN0ZXJXaW5kb3dFdmVudExpc3RlbmVycygpIHtcclxuICAgICAgICBjaHJvbWUud2luZG93cy5vbkNyZWF0ZWQuYWRkTGlzdGVuZXIodGhpcy5vbldpbmRvd0NyZWF0ZWQuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgY2hyb21lLndpbmRvd3Mub25SZW1vdmVkLmFkZExpc3RlbmVyKHRoaXMub25XaW5kb3dSZW1vdmVkLmJpbmQodGhpcykpO1xyXG4gICAgICAgIGNocm9tZS53aW5kb3dzLm9uRm9jdXNDaGFuZ2VkLmFkZExpc3RlbmVyKHRoaXMub25XaW5kb3dGb2N1c0NoYW5nZWQuYmluZCh0aGlzKSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVnaXN0ZXJMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgdGhpcy5yZWdpc3RlcldpbmRvd0V2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICAgICAgdGhpcy5yZWdpc3RlclRhYkV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgYWRkVGFiVG9XaW5kb3codGFiSWQ6IFRhYklkLCB3aW5kb3dJZDogV2luZG93SWQpIHtcclxuICAgICAgICBjb25zdCB3aW5kb3dUb1RhYnMgPSB0aGlzLndpbmRvd3NUb1RhYnMuZ2V0KHdpbmRvd0lkKTtcclxuICAgICAgICBpZiAod2luZG93VG9UYWJzID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhpcy53aW5kb3dzVG9UYWJzLnNldCh3aW5kb3dJZCwgbmV3IFNldChbdGFiSWRdKSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgd2luZG93VG9UYWJzLmFkZCh0YWJJZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMudGFic1RvV2luZG93cy5zZXQodGFiSWQsIHdpbmRvd0lkKTtcclxuICAgIH1cclxuXHJcbiAgICByZW1vdmVUYWJGcm9tV2luZG93KHRhYklkOiBUYWJJZCwgd2luZG93SWQ6IFdpbmRvd0lkKSB7XHJcbiAgICAgICAgY29uc3Qgd2luZG93VG9UYWJzID0gdGhpcy53aW5kb3dzVG9UYWJzLmdldCh3aW5kb3dJZCk7XHJcbiAgICAgICAgaWYgKHdpbmRvd1RvVGFicyAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMud2luZG93c1RvVGFicy5kZWxldGUodGFiSWQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnRhYnNUb1dpbmRvd3MuZGVsZXRlKHRhYklkKTtcclxuICAgIH1cclxuXHJcbiAgICBmaW5kQWN0aXZhdGVkVGFiSWQod2luZG93SWQ6IE1heWJlPFdpbmRvd0lkPik6IE1heWJlPFRhYklkPiB7XHJcbiAgICAgICAgaWYgKHdpbmRvd0lkID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCFpc1ZhbGlkV2luZG93SWQod2luZG93SWQpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLndpbmRvd0FjdGl2YXRlZFRhYnMuZ2V0KHdpbmRvd0lkKTtcclxuICAgIH1cclxuXHJcbiAgICBmaW5kTGFzdEFjdGl2YXRlZFRhYklkKHdpbmRvd0lkOiBNYXliZTxXaW5kb3dJZD4pOiBNYXliZTxUYWJJZD4ge1xyXG4gICAgICAgIGlmICh3aW5kb3dJZCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghaXNWYWxpZFdpbmRvd0lkKHdpbmRvd0lkKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy53aW5kb3dMYXN0VW5pcXVlQWN0aXZhdGVkVGFicy5nZXQod2luZG93SWQpO1xyXG4gICAgfVxyXG5cclxuICAgIGZpbmRUYWJVUkwodGFiSWQ6IE1heWJlPFRhYklkPik6IE1heWJlPFVSTE9yU3BlYz4ge1xyXG4gICAgICAgIGlmICh0YWJJZCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghaXNWYWxpZFRhYklkKHRhYklkKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy50YWJVUkxzLmdldCh0YWJJZCk7XHJcbiAgICB9XHJcblxyXG4gICAgZmluZE9wZW5lclRhYklkKHRhYklkOiBNYXliZTxUYWJJZD4pOiBNYXliZTxUYWJJZD4ge1xyXG4gICAgICAgIGlmICh0YWJJZCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghaXNWYWxpZFRhYklkKHRhYklkKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5vcGVuZXJUYWJzLmdldCh0YWJJZCk7XHJcbiAgICB9XHJcblxyXG4gICAgZmluZFRhYldpbmRvd0lkKHRhYklkOiBNYXliZTxUYWJJZD4pOiBNYXliZTxXaW5kb3dJZD4ge1xyXG4gICAgICAgIGlmICh0YWJJZCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghaXNWYWxpZFRhYklkKHRhYklkKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy50YWJzVG9XaW5kb3dzLmdldCh0YWJJZCk7XHJcbiAgICB9XHJcblxyXG4gICAgZmluZE9wZW5lcldpbmRvd0lkKHdpbmRvd0lkOiBNYXliZTxXaW5kb3dJZD4pOiBNYXliZTxbV2luZG93SWQsIFRhYklkXT4ge1xyXG4gICAgICAgIGlmICh3aW5kb3dJZCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghaXNWYWxpZFdpbmRvd0lkKHdpbmRvd0lkKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5vcGVuZXJXaW5kb3dzLmdldCh3aW5kb3dJZCk7XHJcbiAgICB9XHJcblxyXG4gICAgZmluZFdpbmRvd1RhYkNvdW50KHdpbmRvd0lkOiBNYXliZTxXaW5kb3dJZD4pOiBudW1iZXIge1xyXG4gICAgICAgIGlmICh3aW5kb3dJZCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCB3aW5kb3dUb1RhYnMgPSB0aGlzLndpbmRvd3NUb1RhYnMuZ2V0KHdpbmRvd0lkKTtcclxuICAgICAgICBpZiAod2luZG93VG9UYWJzID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB3aW5kb3dUb1RhYnMuc2l6ZTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgbWF5YmVOZXdXaW5kb3dJZCgpOiBNYXliZTxXaW5kb3dJZD4ge1xyXG4gICAgICAgIGNvbnN0IGVtcHR5V2luZG93SWRzID0gdG9BcnJheShcclxuICAgICAgICAgICAgZmlsdGVyKHRoaXMud2luZG93cy5rZXlzKCksICh3aW5kb3dJZDogV2luZG93SWQpID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmZpbmRXaW5kb3dUYWJDb3VudCh3aW5kb3dJZCkgPT09IDA7XHJcbiAgICAgICAgICAgIH0pKTtcclxuICAgICAgICBpZiAoZW1wdHlXaW5kb3dJZHMubGVuZ3RoID09PSAxKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmaXJzdChlbXB0eVdpbmRvd0lkcyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaXNUYWJBY3RpdmF0ZWQodGFiSWQ6IFRhYklkKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYWN0aXZhdGVkVGFicy5oYXModGFiSWQpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBhY3RpdmF0ZWRUYWJJZCgpOiBNYXliZTxUYWJJZD4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmZpbmRBY3RpdmF0ZWRUYWJJZCh0aGlzLmZvY3VzZWRXaW5kb3dJZCk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGFjdGl2YXRlZFRhYlVSTCgpOiBNYXliZTxVUkxPclNwZWM+IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5maW5kVGFiVVJMKHRoaXMuYWN0aXZhdGVkVGFiSWQpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBsYXN0QWN0aXZhdGVkVGFiSWQoKTogTWF5YmU8VGFiSWQ+IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5maW5kTGFzdEFjdGl2YXRlZFRhYklkKHRoaXMuZm9jdXNlZFdpbmRvd0lkKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgbGFzdEZvY3VzZWRXaW5kb3dBY3RpdmF0ZWRUYWJJZCgpOiBNYXliZTxUYWJJZD4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmZpbmRBY3RpdmF0ZWRUYWJJZCh0aGlzLmxhc3RGb2N1c2VkV2luZG93SWQpO1xyXG4gICAgfVxyXG5cclxuICAgIGlzVGFiKHRhYklkOiBUYWJJZCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiBpc1ZhbGlkVGFiSWQodGFiSWQpICYmIHRoaXMudGFicy5oYXModGFiSWQpO1xyXG4gICAgfVxyXG5cclxuICAgIGlzV2luZG93KHdpbmRvd0lkOiBXaW5kb3dJZCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiBpc1ZhbGlkV2luZG93SWQod2luZG93SWQpICYmIHRoaXMud2luZG93cy5oYXMod2luZG93SWQpO1xyXG4gICAgfVxyXG5cclxuICAgIGlzUmVzdG9yZWRTZXNzaW9uVGFiKHRhYklkOiBUYWJJZCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiBpc1ZhbGlkVGFiSWQodGFiSWQpICYmIHRoaXMucmVzdG9yZWRTZXNzaW9uVGFicy5oYXModGFiSWQpO1xyXG4gICAgfVxyXG5cclxuICAgIGZpbmRQb3B1cFdpbmRvd1RhYklkKHdpbmRvd0lkOiBXaW5kb3dJZCk6IE1heWJlPFRhYklkPiB7XHJcbiAgICAgICAgaWYgKCFpc1ZhbGlkV2luZG93SWQod2luZG93SWQpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHRhYnMgPSB0aGlzLndpbmRvd3NUb1RhYnMuZ2V0KHdpbmRvd0lkKTtcclxuICAgICAgICBpZiAobm9uZSh0YWJzKSB8fCAodGFicy5zaXplICE9PSAxKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmlyc3QodGFicyk7XHJcbiAgICB9XHJcblxyXG4gICAgZmluZFBvcHVwV2luZG93VGFiSWRzKCk6IFRhYklkW10ge1xyXG4gICAgICAgIGNvbnN0IHdpbmRvd3MgPSB0b0FycmF5KHRoaXMud2luZG93cyk7XHJcbiAgICAgICAgcmV0dXJuIHdpbmRvd3MubWFwKCh3aW5kb3dJZCkgPT4gdGhpcy5maW5kUG9wdXBXaW5kb3dUYWJJZCh3aW5kb3dJZCkpLmZpbHRlcihzb21lKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGZpbmRCcm93c2VyTmV3VGFiVVJMKCk6IE1heWJlPFVSTD4ge1xyXG4gICAgICAgIGlmIChub25lKHRoaXMuYnJvd3NlcikpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG5vbmUodGhpcy5icm93c2VyTmV3VGFiVVJMcykpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgYnJvd3Nlck5ld1RhYlVSTCA9IHRoaXMuYnJvd3Nlck5ld1RhYlVSTHMuZ2V0KHRoaXMuYnJvd3Nlcik7XHJcbiAgICAgICAgcmV0dXJuIGJyb3dzZXJOZXdUYWJVUkw7XHJcbiAgICB9XHJcblxyXG4gICAgZGlkVXNlckNyZWF0ZVRhYih0YWJJZDogVGFiSWQpOiBib29sZWFuIHtcclxuICAgICAgICBjb25zdCB1cmxPclNwZWMgPSB0aGlzLmZpbmRUYWJVUkwodGFiSWQpO1xyXG4gICAgICAgIGlmIChub25lKHVybE9yU3BlYykpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCB1cmwgPSBwYXJzZVVSTElmTmVjZXNzYXJ5KHVybE9yU3BlYyk7XHJcbiAgICAgICAgaWYgKG5vbmUodXJsKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGJyb3dzZXJOZXdUYWJVUkwgPSB0aGlzLmZpbmRCcm93c2VyTmV3VGFiVVJMKCk7XHJcbiAgICAgICAgaWYgKG5vbmUoYnJvd3Nlck5ld1RhYlVSTCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gaXNTYW1lVXJsKHVybCwgYnJvd3Nlck5ld1RhYlVSTCwgVXJsQ29tcGFyZU9wdGlvbnMuSWdub3JlU2VhcmNoUGFyYW1zKTtcclxuICAgIH1cclxuXHJcbiAgICByZWdpc3Rlck9uVGFiQ2xvc2VkSGFuZGxlcihoYW5kbGVyOiBPblRhYkNsb3NlZCkge1xyXG4gICAgICAgIHRoaXMub25UYWJDbG9zZWRIYW5kbGVycy5wdXNoKGhhbmRsZXIpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgbm90aWZ5T25UYWJDbG9zZWRIYW5kbGVycyh0YWJJZDogVGFiSWQpIHtcclxuICAgICAgICBmb3IgKGNvbnN0IG9uVGFiQ2xvc2VkIG9mIHRoaXMub25UYWJDbG9zZWRIYW5kbGVycykge1xyXG4gICAgICAgICAgICBvblRhYkNsb3NlZCh0YWJJZCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJlZ2lzdGVyT25UYWJDcmVhdGVkSGFuZGxlcihoYW5kbGVyOiBPblRhYkNyZWF0ZWQpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLm9uVGFiQ3JlYXRlZEhhbmRsZXJzLnB1c2goaGFuZGxlcik7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBub3RpZnlPblRhYkNyZWF0ZWRIYW5kbGVycyh0YWJJZDogVGFiSWQpIHtcclxuICAgICAgICBmb3IgKGNvbnN0IG9uVGFiQ3JlYXRlZCBvZiB0aGlzLm9uVGFiQ3JlYXRlZEhhbmRsZXJzKSB7XHJcbiAgICAgICAgICAgIG9uVGFiQ3JlYXRlZCh0YWJJZCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJlZ2lzdGVyT25UYWJSZXN0b3JlZExpc3RlbmVycyhsaXN0ZW5lcjogT25UYWJSZXN0b3JlZCkge1xyXG4gICAgICAgIHRoaXMub25UYWJSZXN0b3JlZExpc3RlbmVycy5wdXNoKGxpc3RlbmVyKTtcclxuICAgICAgICBpZiAoIWlzRW1wdHkodGhpcy5yZXN0b3JlZFNlc3Npb25UYWJzKSkge1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IHRhYklkIG9mIHRoaXMucmVzdG9yZWRTZXNzaW9uVGFicykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdXJsT3JTcGVjID0gdGhpcy5maW5kVGFiVVJMKHRhYklkKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHVybCA9IHNvbWUodXJsT3JTcGVjKSA/IHBhcnNlVVJMSWZOZWNlc3NhcnkodXJsT3JTcGVjKSA6IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5T25UYWJSZXN0b3JlZExpc3RlbmVycyh0YWJJZCwgdXJsKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIG5vdGlmeU9uVGFiUmVzdG9yZWRMaXN0ZW5lcnModGFiSWQ6IFRhYklkLCB1cmw6IE1heWJlPFVSTD4pIHtcclxuICAgICAgICBmb3IgKGNvbnN0IG9uVGFiUmVzdG9yZWQgb2YgdGhpcy5vblRhYlJlc3RvcmVkTGlzdGVuZXJzKSB7XHJcbiAgICAgICAgICAgIG9uVGFiUmVzdG9yZWQodGFiSWQsIHVybCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZvY3VzZWRXaW5kb3dJZDogTWF5YmU8V2luZG93SWQ+O1xyXG4gICAgbGFzdEZvY3VzZWRXaW5kb3dJZDogTWF5YmU8V2luZG93SWQ+O1xyXG5cclxuICAgIHByaXZhdGUgd2luZG93czogV2luZG93cyA9IG5ldyBTZXQoKTtcclxuICAgIHByaXZhdGUgdGFiczogVGFicyA9IG5ldyBTZXQoKTtcclxuICAgIHByaXZhdGUgd2luZG93c1RvVGFiczogV2luZG93VG9UYWJzID0gbmV3IE1hcCgpO1xyXG4gICAgcHJpdmF0ZSB0YWJzVG9XaW5kb3dzOiBUYWJUb1dpbmRvdyA9IG5ldyBNYXAoKTtcclxuICAgIHByaXZhdGUgdGFiVVJMczogVGFiVVJMcyA9IG5ldyBNYXAoKTtcclxuICAgIHByaXZhdGUgd2luZG93QWN0aXZhdGVkVGFiczogV2luZG93VG9UYWIgPSBuZXcgTWFwKCk7XHJcbiAgICBwcml2YXRlIHdpbmRvd0xhc3RVbmlxdWVBY3RpdmF0ZWRUYWJzOiBXaW5kb3dUb1RhYiA9IG5ldyBNYXAoKTtcclxuICAgIHByaXZhdGUgYWN0aXZhdGVkVGFicyA9IG5ldyBTZXQ8VGFiSWQ+KCk7XHJcbiAgICBwcml2YXRlIG9wZW5lclRhYnM6IE9wZW5lclRhYnMgPSBuZXcgTWFwKCk7XHJcbiAgICBwcml2YXRlIG9wZW5lcldpbmRvd3M6IE9wZW5lcldpbmRvd3MgPSBuZXcgTWFwKCk7XHJcbiAgICBwcml2YXRlIHJlc3RvcmVkU2Vzc2lvblRhYnM6IFRhYnMgPSBuZXcgU2V0KCk7XHJcbiAgICBwcml2YXRlIG9uVGFiQ2xvc2VkSGFuZGxlcnM6IE9uVGFiQ2xvc2VkW10gPSBbXTtcclxuICAgIHByaXZhdGUgb25UYWJDcmVhdGVkSGFuZGxlcnM6IE9uVGFiQ3JlYXRlZFtdID0gW107XHJcbiAgICBwcml2YXRlIG9uVGFiUmVzdG9yZWRMaXN0ZW5lcnM6IE9uVGFiUmVzdG9yZWRbXSA9IFtdO1xyXG4gICAgcHJpdmF0ZSBicm93c2VyTmV3VGFiVVJMczogTWF5YmU8TWFwPEJyb3dzZXIsIFVSTD4+O1xyXG5cclxuICAgIC8vIFRoaXMgaXMgdXNlZCBmb3IgbG9nZ2luZyBhbmQgd2Ugc2hvdWxkIG9ubHkgbG9nIHdoYXQncyB1c2VmdWwuXHJcbiAgICB0b1N0cmluZygpIHtcclxuICAgICAgICBjb25zdCB3aW5kb3dzVG9UYWJzVG9VUkxzOiBNYXA8bnVtYmVyLCBNYXA8bnVtYmVyLCBNYXliZTxVUkxPclNwZWM+Pj4gPSBuZXcgTWFwKCk7XHJcbiAgICAgICAgZm9yIChjb25zdCBbd2luZG93LCB0YWJzXSBvZiB0aGlzLndpbmRvd3NUb1RhYnMpIHtcclxuICAgICAgICAgICAgbGV0IHRhYnNUb1VSTHM6IE1hcDxudW1iZXIsIE1heWJlPFVSTE9yU3BlYz4+ID0gbmV3IE1hcCgpO1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IHRhYiBvZiB0YWJzKSB7XHJcbiAgICAgICAgICAgICAgICB0YWJzVG9VUkxzLnNldCh0YWIsIHRoaXMudGFiVVJMcy5nZXQodGFiKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgd2luZG93c1RvVGFic1RvVVJMcy5zZXQod2luZG93LCB0YWJzVG9VUkxzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0b1N0cmluZyh7XHJcbiAgICAgICAgICAgIHdpbmRvd3NUb1RhYnNUb1VSTHM6IHdpbmRvd3NUb1RhYnNUb1VSTHMsXHJcbiAgICAgICAgICAgIHdpbmRvd0FjdGl2YXRlZFRhYnM6IHRoaXMud2luZG93QWN0aXZhdGVkVGFicyxcclxuICAgICAgICAgICAgd2luZG93TGFzdFVuaXF1ZUFjdGl2YXRlZFRhYnM6IHRoaXMud2luZG93TGFzdFVuaXF1ZUFjdGl2YXRlZFRhYnMsXHJcbiAgICAgICAgICAgIGFjdGl2YXRlZFRhYnM6IHRoaXMuYWN0aXZhdGVkVGFicyxcclxuICAgICAgICAgICAgb3BlbmVyVGFiczogdGhpcy5vcGVuZXJUYWJzLFxyXG4gICAgICAgICAgICBvcGVuZXJXaW5kb3dzOiB0aGlzLm9wZW5lcldpbmRvd3MsXHJcbiAgICAgICAgICAgIGJyb3dzZXJOZXdUYWJVUkxzOiB0aGlzLmJyb3dzZXJOZXdUYWJVUkxzXHJcbiAgICAgICAgfSwgMSk7XHJcbiAgICB9XHJcbn1cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi90YWItc3RhbGtlci50cyIsIi8vIENvcHlyaWdodCAoYykgMjAxOCBCcm9taXVtLCBJbmMuXHJcbi8vIFVzZSBvZiB0aGUgQnJvbWl1bSwgSW5jLiBzb2Z0d2FyZSByZXF1aXJlcyBhIGxpY2Vuc2UgYWdyZWVtZW50IHdpdGggQnJvbWl1bSwgSW5jLiBvciBhbiBhdXRob3JpemVkIHJlc2VsbGVyLlxyXG5cclxuaW1wb3J0IHsgVGFiSWQsIFdpbmRvd0lkIH0gZnJvbSBcIi4vY29tbW9uLXR5cGVzXCI7XHJcbmltcG9ydCB7IEhhc2ggfSBmcm9tIFwiLi9oYXNoXCI7XHJcbmltcG9ydCB7IG11cm11ckhhc2ggfSBmcm9tIFwiLi9tdXJtdXItaGFzaFwiO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGlzVmFsaWRXaW5kb3dJZCh3aW5kb3dJZDogV2luZG93SWQpIHtcclxuICAgIHJldHVybiB3aW5kb3dJZCAhPT0gY2hyb21lLndpbmRvd3MuV0lORE9XX0lEX05PTkU7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBpc1ZhbGlkVGFiSWQodGFiSWQ6IFRhYklkKSB7XHJcbiAgICByZXR1cm4gdGFiSWQgIT09IGNocm9tZS50YWJzLlRBQl9JRF9OT05FO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaGFzaFRhYklkKHRhYklkOiBUYWJJZCwgc2VlZDogSGFzaCA9IDApOiBIYXNoIHtcclxuICAgIHJldHVybiBtdXJtdXJIYXNoKHRhYklkLCBzZWVkKTtcclxufSBcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBpc1NhbWVUYWJJZChhOiBUYWJJZCwgYjogVGFiSWQpOiBib29sZWFuIHtcclxuICAgIGlmICghaXNWYWxpZFRhYklkKGEpIHx8ICFpc1ZhbGlkVGFiSWQoYikpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYSA9PT0gYjtcclxufVxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuLi9saWIvY29tbW9uL3RhYi11dGlscy50cyIsIi8vIENvcHlyaWdodCAoYykgMjAxOCBCcm9taXVtLCBJbmMuXHJcbi8vIFVzZSBvZiB0aGUgQnJvbWl1bSwgSW5jLiBzb2Z0d2FyZSByZXF1aXJlcyBhIGxpY2Vuc2UgYWdyZWVtZW50IHdpdGggQnJvbWl1bSwgSW5jLiBvciBhbiBhdXRob3JpemVkIHJlc2VsbGVyLlxyXG5cclxuaW1wb3J0IHsgVVJMLCBpc1NhbWVVcmwgfSBmcm9tIFwiLi91cmwtdXRpbHNcIjtcclxuaW1wb3J0IHsgSGFzaCB9IGZyb20gXCIuL2hhc2hcIjtcclxuaW1wb3J0IHsgbXVybXVySGFzaCB9IGZyb20gXCIuL211cm11ci1oYXNoXCI7XHJcbmltcG9ydCB7IE9yaWdpbiwgaXNTYW1lT3JpZ2luLCBwYXJzZU9yaWdpbiwgT3JpZ2luUGFyc2VPcHRpb25zIH0gZnJvbSBcIi4vb3JpZ2luXCI7XHJcbmltcG9ydCB7IE1heWJlLCBzb21lLCBub25lIH0gZnJvbSBcIi4vbWF5YmVcIjtcclxuaW1wb3J0IHsgSGFzaE1hcCwgSGFzaFNldCwgbWFrZURlZmF1bHRIYXNoTWFwLCBtYWtlRGVmYXVsdEhhc2hTZXQsIEhhc2hhYmxlIH0gZnJvbSBcIi4vaGFzaC1tYXBcIjtcclxuaW1wb3J0IHsgSWQsIElkR2VuZXJhdG9yIH0gZnJvbSBcIi4vaWQtZ2VuZXJhdG9yXCI7XHJcbmltcG9ydCB7IGZpbHRlciwgbWFwIH0gZnJvbSBcIi4vaXRlci11dGlsc1wiO1xyXG5pbXBvcnQgeyBDb25maWdLZXkgfSBmcm9tIFwiLi9jb25maWcta2V5c1wiO1xyXG5pbXBvcnQgeyBDb25maWdSZWFkZXIgfSBmcm9tIFwiLi9jb25maWctcmVhZGVyXCI7XHJcbmltcG9ydCB7IElDb25maWdOb3RpZmllciB9IGZyb20gXCIuL2NvbmZpZy1ub3RpZmllclwiO1xyXG5pbXBvcnQgeyBsb2dFcnJvciB9IGZyb20gXCIuL2xvZ1wiO1xyXG5pbXBvcnQgeyBUYWJJZCB9IGZyb20gXCIuL2NvbW1vbi10eXBlc1wiO1xyXG5pbXBvcnQgeyB0b1N0cmluZyB9IGZyb20gXCIuL3N0cmluZy11dGlsc1wiO1xyXG5pbXBvcnQgeyBJVGFiQ2xvc2VkTm90aWZpZXIgfSBmcm9tIFwiLi90YWItc3RhbGtlclwiO1xyXG5pbXBvcnQgeyBTZXJpYWxpemVkUGhpc2hpbmdOYXZTZXFEYXRhIH0gZnJvbSBcIi4vbWVzc2FnZXNcIjtcclxuaW1wb3J0IHsgaXNFbXB0eSwgbmV3QXJyYXksIGZpbmRBbGxJbmRpY2VzLCBmaXJzdCwgbGFzdCB9IGZyb20gXCIuL2FycmF5LXV0aWxzXCI7XHJcbmltcG9ydCB7XHJcbiAgICBOYXZUeXBlLFxyXG4gICAgVXJsQ2F0ZWdvcnksXHJcbiAgICBOYXZpZ2F0aW9uLFxyXG4gICAgT3JpZ2luTmF2LFxyXG4gICAgQ2F0ZWdvcml6ZWROYXYsXHJcbiAgICBoYXNoTmF2aWdhdGlvbixcclxuICAgIGlzU2FtZU5hdmlnYXRpb24sXHJcbiAgICBOYXZQYXR0ZXJuLFxyXG4gICAgTmF2UGF0dGVyblNlcXVlbmNlLFxyXG4gICAgcGFyc2VOYXZTZXFEYXRhLFxyXG4gICAgTmF2TWV0YWRhdGEsXHJcbiAgICBCYWNrUmVmLFxyXG4gICAgQmFja1JlZk5hdlBhdHRlcm4sXHJcbiAgICBjaGVja1ZlcnNpb24sXHJcbiAgICBpc1ZhbGlkU2VyaWFsaXplZFBoaXNoaW5nTmF2U2VxRGF0YSxcclxuICAgIEdyb3VwTmFtZSxcclxuICAgIEdyb3VwTmF2XHJcbn0gZnJvbSBcIi4vbmF2LXNlcXVlbmNlLXBhcnNlclwiO1xyXG5pbXBvcnQgeyBDb25maWcgfSBmcm9tIFwiLi9jb25maWdcIjtcclxuaW1wb3J0IHsgYnVpbHRpblJ1bGVzIH0gZnJvbSBcIi4vYnVpbHRpbi1uYXYtc2VxdWVuY2UtZGV0ZWN0b3ItcnVsZXNcIjtcclxuaW1wb3J0IHsgQnJvd3NlciB9IGZyb20gXCIuL2Jyb3dzZXJcIjtcclxuaW1wb3J0IHtDb250ZW50VHlwZX0gZnJvbSBcIi4vY29udGVudC10eXBlXCI7XHJcblxyXG50eXBlIE5hdlNlcXVlbmNlSWQgPSBJZDtcclxuXHJcbmNsYXNzIFBhcnRpYWxOYXZTZXF1ZW5jZSBpbXBsZW1lbnRzIEhhc2hhYmxlPFBhcnRpYWxOYXZTZXF1ZW5jZT4ge1xyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAgICAgICAgIHJlYWRvbmx5IG5hdlNlcXVlbmNlSWQ6IElkLCBcclxuICAgICAgICAgICAgcmVhZG9ubHkgaWQ6IElkLFxyXG4gICAgICAgICAgICByZWFkb25seSBwYXJ0aWFsTGVuZ3RoOiBudW1iZXIsIFxyXG4gICAgICAgICAgICByZWFkb25seSBjb21wbGV0ZUxlbmd0aDogbnVtYmVyKSB7IH1cclxuXHJcbiAgICBnZXQgaXNQYXJ0aWFsKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnBhcnRpYWxMZW5ndGggPCB0aGlzLmNvbXBsZXRlTGVuZ3RoO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBpc0NvbXBsZXRlKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnBhcnRpYWxMZW5ndGggPT09IHRoaXMuY29tcGxldGVMZW5ndGg7XHJcbiAgICB9XHJcblxyXG4gICAgaGFzaFdpdGhTZWVkKHNlZWQ6IEhhc2gpOiBIYXNoIHtcclxuICAgICAgICBsZXQgaGFzaCA9IHNlZWQ7XHJcbiAgICAgICAgaGFzaCA9IG11cm11ckhhc2godGhpcy5uYXZTZXF1ZW5jZUlkLCBoYXNoKTtcclxuICAgICAgICBoYXNoID0gbXVybXVySGFzaCh0aGlzLmlkLCBoYXNoKTtcclxuICAgICAgICBoYXNoID0gbXVybXVySGFzaCh0aGlzLnBhcnRpYWxMZW5ndGgsIGhhc2gpO1xyXG4gICAgICAgIGhhc2ggPSBtdXJtdXJIYXNoKHRoaXMuY29tcGxldGVMZW5ndGgsIGhhc2gpO1xyXG4gICAgICAgIHJldHVybiBoYXNoO1xyXG4gICAgfVxyXG5cclxuICAgIGhhc2goKTogSGFzaCB7XHJcbiAgICAgICAgY29uc3Qgc2VlZCA9IDA7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaGFzaFdpdGhTZWVkKHNlZWQpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbXBhcmUob3RoZXI6IFBhcnRpYWxOYXZTZXF1ZW5jZSk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiAodGhpcy5uYXZTZXF1ZW5jZUlkID09PSBvdGhlci5uYXZTZXF1ZW5jZUlkKSAmJiBcclxuICAgICAgICAgICAgKHRoaXMuaWQgPT09IG90aGVyLmlkKSAmJlxyXG4gICAgICAgICAgICAodGhpcy5wYXJ0aWFsTGVuZ3RoID09PSBvdGhlci5wYXJ0aWFsTGVuZ3RoKSAmJlxyXG4gICAgICAgICAgICAodGhpcy5jb21wbGV0ZUxlbmd0aCA9PT0gb3RoZXIuY29tcGxldGVMZW5ndGgpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBhc0JhY2tSZWYoKTogQmFja1JlZiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaWQ7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGFzSW5kZXgoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5wYXJ0aWFsTGVuZ3RoIC0gMTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgYXNOZXh0SW5kZXgoKTogTWF5YmU8bnVtYmVyPiB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNDb21wbGV0ZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5wYXJ0aWFsTGVuZ3RoO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgTmF2RGF0YSB7XHJcbiAgICBjb25zdHJ1Y3RvcihcclxuICAgICAgICAgICAgcmVhZG9ubHkgdHlwZTogTmF2VHlwZSwgXHJcbiAgICAgICAgICAgIHJlYWRvbmx5IHVybDogVVJMLCBcclxuICAgICAgICAgICAgcmVhZG9ubHkgb3JpZ2luOiBNYXliZTxPcmlnaW4+LCBcclxuICAgICAgICAgICAgcmVhZG9ubHkgY2F0ZWdvcnk6IFVybENhdGVnb3J5LFxyXG4gICAgICAgICAgICByZWFkb25seSBncm91cHM6IEdyb3VwTmFtZVtdKSB7IH1cclxuXHJcbiAgICBnZXQgaXNQYXJlbnRUYWIoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudHlwZSA9PT0gTmF2VHlwZS5wYXJlbnRUYWI7XHJcbiAgICB9XHJcblxyXG4gICAgaXNOZXdUYWI6IE1heWJlPGJvb2xlYW4+ID0gdW5kZWZpbmVkO1xyXG4gICAgZGlkVXNlckNyZWF0ZVRhYjogTWF5YmU8Ym9vbGVhbj4gPSB1bmRlZmluZWQ7XHJcbiAgICBjb250ZW50VHlwZTogTWF5YmU8Q29udGVudFR5cGU+ID0gdW5kZWZpbmVkO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaXNTYW1lTmF2RGF0YShhOiBOYXZEYXRhLCBiOiBOYXZEYXRhKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gKGEudHlwZSA9PT0gYi50eXBlKSAmJiBcclxuICAgICAgICAgICAgaXNTYW1lVXJsKGEudXJsLCBiLnVybCkgJiZcclxuICAgICAgICAgICAgaXNTYW1lT3JpZ2luKGEub3JpZ2luLCBiLm9yaWdpbikgJiZcclxuICAgICAgICAgICAgKGEuY2F0ZWdvcnkgPT09IGIuY2F0ZWdvcnkpO1xyXG59XHJcblxyXG5leHBvcnQgdHlwZSBOYXZEYXRhU2VxdWVuY2UgPSBOYXZEYXRhW107XHJcblxyXG5leHBvcnQgY2xhc3MgVHJhY2tlZE5hdlNlcXVlbmNlIGltcGxlbWVudHMgSU5hdlNlcXVlbmNlRGV0ZWN0aW9uIHtcclxuICAgIGNvbnN0cnVjdG9yKHJlYWRvbmx5IG1ldGFkYXRhOiBNYXliZTxOYXZNZXRhZGF0YT4pIHsgfVxyXG5cclxuICAgIHB1c2gobmF2RGF0YTogTmF2RGF0YSwgcGFydGlhbE5hdlNlcXVlbmNlOiBQYXJ0aWFsTmF2U2VxdWVuY2UpIHtcclxuICAgICAgICB0aGlzLnNlcXVlbmNlLnB1c2gobmF2RGF0YSk7XHJcbiAgICAgICAgY29uc3QgYmFja1JlZiA9IHBhcnRpYWxOYXZTZXF1ZW5jZS5hc0JhY2tSZWY7XHJcbiAgICAgICAgdGhpcy5ib3VuZEJhY2tSZWZzLnNldChiYWNrUmVmLCBuYXZEYXRhKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQoaW5kZXg6IG51bWJlcik6IE5hdkRhdGEge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNlcXVlbmNlW2luZGV4XTtcclxuICAgIH1cclxuXHJcbiAgICBsb29rdXBCYWNrUmVmQmluZGluZyhiYWNrUmVmOiBCYWNrUmVmKTogTWF5YmU8TmF2RGF0YT4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmJvdW5kQmFja1JlZnMuZ2V0KGJhY2tSZWYpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBwcmVjZWRlbmNlKCk6IE1heWJlPG51bWJlcj4ge1xyXG4gICAgICAgIGlmIChub25lKHRoaXMubWV0YWRhdGEpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLm1ldGFkYXRhLnByZWNlZGVuY2U7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGxlbmd0aCgpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNlcXVlbmNlLmxlbmd0aDtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgbmF2aWdhdGVUb1VSTCgpOiBNYXliZTxVUkw+IHtcclxuICAgICAgICBpZiAobm9uZSh0aGlzLm1ldGFkYXRhKSkge1xyXG4gICAgICAgICAgICBpZiAoaXNFbXB0eSh0aGlzLnNlcXVlbmNlKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zdCBuYXZEYXRhID0gbGFzdCh0aGlzLnNlcXVlbmNlKTtcclxuICAgICAgICAgICAgcmV0dXJuIG5hdkRhdGEudXJsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBuYXZEYXRhID0gdGhpcy5ib3VuZEJhY2tSZWZzLmdldCh0aGlzLm1ldGFkYXRhLm5hdmlnYXRlVG8pO1xyXG4gICAgICAgIGlmIChub25lKG5hdkRhdGEpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBuYXZEYXRhLnVybDtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgbmF2U2VxdWVuY2UoKTogTmF2RGF0YVNlcXVlbmNlIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zZXF1ZW5jZTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNlcXVlbmNlOiBOYXZEYXRhU2VxdWVuY2UgPSBbXTtcclxuICAgIHByaXZhdGUgYm91bmRCYWNrUmVmcyA9IG5ldyBNYXA8QmFja1JlZiwgTmF2RGF0YT4oKTtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJTmF2U2VxdWVuY2VEZXRlY3Rpb24ge1xyXG4gICAgcmVhZG9ubHkgcHJlY2VkZW5jZTogTWF5YmU8bnVtYmVyPjtcclxuICAgIHJlYWRvbmx5IG5hdlNlcXVlbmNlOiBOYXZEYXRhU2VxdWVuY2U7XHJcbiAgICByZWFkb25seSBuYXZpZ2F0ZVRvVVJMOiBNYXliZTxVUkw+O1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElOYXZTZXF1ZW5jZURldGVjdGlvbnMge1xyXG4gICAgcmVhZG9ubHkgcHJlY2VkZW5jZTogTWF5YmU8bnVtYmVyPjtcclxuICAgIHJlYWRvbmx5IHNob3VsZEJsb2NrOiBib29sZWFuO1xyXG4gICAgcmVhZG9ubHkgc2hvdWxkUG9zc2libHlCbG9jazogYm9vbGVhbjtcclxuICAgIHJlYWRvbmx5IHNob3VsZEFsbG93OiBib29sZWFuO1xyXG4gICAgcmVhZG9ubHkgc2hvdWxkUG9zc2libHlBbGxvdzogYm9vbGVhbjtcclxuICAgIHJlYWRvbmx5IGJsb2NrZWQ6IElOYXZTZXF1ZW5jZURldGVjdGlvbjtcclxuICAgIHJlYWRvbmx5IHBvc3NpYmxlQmxvY2tlZDogSU5hdlNlcXVlbmNlRGV0ZWN0aW9uO1xyXG4gICAgcmVhZG9ubHkgYWxsb3dlZDogSU5hdlNlcXVlbmNlRGV0ZWN0aW9uO1xyXG4gICAgcmVhZG9ubHkgcG9zc2libGVBbGxvd2VkOiBJTmF2U2VxdWVuY2VEZXRlY3Rpb247XHJcbn1cclxuXHJcbmNsYXNzIEVtcHR5TmF2U2VxdWVuY2VEZXRlY3Rpb24gaW1wbGVtZW50cyBJTmF2U2VxdWVuY2VEZXRlY3Rpb24ge1xyXG4gICAgZ2V0IHByZWNlZGVuY2UoKTogTWF5YmU8bnVtYmVyPiB7IFxyXG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICB9XHJcbiAgICBnZXQgbmF2U2VxdWVuY2UoKTogTmF2RGF0YVtdIHsgXHJcbiAgICAgICAgcmV0dXJuIFtdO1xyXG4gICAgfVxyXG4gICAgZ2V0IG5hdmlnYXRlVG9VUkwoKTogTWF5YmU8VVJMPiB7XHJcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEVtcHR5TmF2U2VxdWVuY2VEZXRlY3Rpb25zIGltcGxlbWVudHMgSU5hdlNlcXVlbmNlRGV0ZWN0aW9ucyB7XHJcbiAgICBnZXQgcHJlY2VkZW5jZSgpOiBNYXliZTxudW1iZXI+IHtcclxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgfVxyXG4gICAgZ2V0IHNob3VsZEJsb2NrKCk6IGJvb2xlYW4geyBcclxuICAgICAgICByZXR1cm4gZmFsc2U7IFxyXG4gICAgfVxyXG4gICAgZ2V0IHNob3VsZFBvc3NpYmx5QmxvY2soKTogYm9vbGVhbiB7IFxyXG4gICAgICAgIHJldHVybiBmYWxzZTsgXHJcbiAgICB9XHJcbiAgICBnZXQgc2hvdWxkQWxsb3coKTogYm9vbGVhbiB7IFxyXG4gICAgICAgIHJldHVybiBmYWxzZTsgXHJcbiAgICB9XHJcbiAgICBnZXQgc2hvdWxkUG9zc2libHlBbGxvdygpOiBib29sZWFuIHsgXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlOyBcclxuICAgIH1cclxuICAgIGdldCBibG9ja2VkKCk6IElOYXZTZXF1ZW5jZURldGVjdGlvbiB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBFbXB0eU5hdlNlcXVlbmNlRGV0ZWN0aW9uKCk7XHJcbiAgICB9XHJcbiAgICBnZXQgcG9zc2libGVCbG9ja2VkKCk6IElOYXZTZXF1ZW5jZURldGVjdGlvbiB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBFbXB0eU5hdlNlcXVlbmNlRGV0ZWN0aW9uKCk7XHJcbiAgICB9XHJcbiAgICBnZXQgYWxsb3dlZCgpOiBJTmF2U2VxdWVuY2VEZXRlY3Rpb24ge1xyXG4gICAgICAgIHJldHVybiBuZXcgRW1wdHlOYXZTZXF1ZW5jZURldGVjdGlvbigpO1xyXG4gICAgfVxyXG4gICAgZ2V0IHBvc3NpYmxlQWxsb3dlZCgpOiBJTmF2U2VxdWVuY2VEZXRlY3Rpb24ge1xyXG4gICAgICAgIHJldHVybiBuZXcgRW1wdHlOYXZTZXF1ZW5jZURldGVjdGlvbigpO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZW51bSBCbG9ja1R5cGUge1xyXG4gICAgbm9uZSxcclxuICAgIGJsb2NrLFxyXG4gICAgYWxsb3dcclxufVxyXG5cclxuZXhwb3J0IGVudW0gRGV0ZWN0ZWRUeXBlIHtcclxuICAgIG5vbmUsXHJcbiAgICBkZXRlY3RlZCxcclxuICAgIHBvc3NpYmx5RGV0ZWN0ZWRcclxufVxyXG5cclxudHlwZSBEZXRlY3Rpb25BY3Rpb24gPSBbVHJhY2tlZE5hdlNlcXVlbmNlLCBCbG9ja1R5cGUsIERldGVjdGVkVHlwZV07XHJcblxyXG5leHBvcnQgY2xhc3MgUmVzb2x2ZWREZXRlY3Rpb25BY3Rpb24ge1xyXG4gICAgY29uc3RydWN0b3IocmVhZG9ubHkgcHJlY2VkZW5jZTogTWF5YmU8bnVtYmVyPiwgcHJpdmF0ZSBibG9jazogQmxvY2tUeXBlLCBwcml2YXRlIGRldGVjdGVkOiBEZXRlY3RlZFR5cGUpIHt9XHJcblxyXG4gICAgcHJpdmF0ZSBnZXQgaXNCbG9ja2VkKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmJsb2NrID09PSBCbG9ja1R5cGUuYmxvY2s7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBnZXQgaXNBbGxvd2VkKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmJsb2NrID09PSBCbG9ja1R5cGUuYWxsb3c7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBnZXQgaXNEZXRlY3RlZCgpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5kZXRlY3RlZCA9PT0gRGV0ZWN0ZWRUeXBlLmRldGVjdGVkO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZ2V0IGlzUG9zc2libHlEZXRlY3RlZCgpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5kZXRlY3RlZCA9PT0gRGV0ZWN0ZWRUeXBlLnBvc3NpYmx5RGV0ZWN0ZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHNob3VsZEJsb2NrKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmlzQmxvY2tlZCAmJiB0aGlzLmlzRGV0ZWN0ZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHNob3VsZEFsbG93KCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmlzQWxsb3dlZCAmJiB0aGlzLmlzRGV0ZWN0ZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHNob3VsZFBvc3NpYmx5QmxvY2soKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNCbG9ja2VkICYmIHRoaXMuaXNQb3NzaWJseURldGVjdGVkO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBzaG91bGRQb3NzaWxieUFsbG93KCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmlzQWxsb3dlZCAmJiB0aGlzLmlzUG9zc2libHlEZXRlY3RlZDtcclxuICAgIH1cclxufVxyXG5cclxuY2xhc3MgTmF2U2VxdWVuY2VEZXRlY3Rpb25zIGltcGxlbWVudHMgSU5hdlNlcXVlbmNlRGV0ZWN0aW9ucyB7XHJcbiAgICBjb25zdHJ1Y3RvcihkZXRlY3RlZDogVHJhY2tlZE5hdlNlcXVlbmNlW10sIHBvc3NpYmx5RGV0ZWN0ZWQ6IFRyYWNrZWROYXZTZXF1ZW5jZVtdKSB7XHJcbiAgICAgICAgY29uc3QgaXNCbG9ja2VkID0gKHNlcXVlbmNlOiBUcmFja2VkTmF2U2VxdWVuY2UpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbWV0YWRhdGEgPSBzZXF1ZW5jZS5tZXRhZGF0YTtcclxuICAgICAgICAgICAgaWYgKG5vbmUobWV0YWRhdGEpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIG1ldGFkYXRhLmJsb2NrO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGNvbnN0IGlzQWxsb3dlZCA9IChzZXF1ZW5jZTogVHJhY2tlZE5hdlNlcXVlbmNlKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1ldGFkYXRhID0gc2VxdWVuY2UubWV0YWRhdGE7XHJcbiAgICAgICAgICAgIGlmIChub25lKG1ldGFkYXRhKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBtZXRhZGF0YS5hbGxvdztcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0aGlzLmJsb2NrZWREZXRlY3RlZCA9IHNvcnREZXRlY3RlZE5hdlNlcXVlbmNlcyhkZXRlY3RlZC5maWx0ZXIoaXNCbG9ja2VkKSk7XHJcbiAgICAgICAgdGhpcy5ibG9ja2VkUG9zc2libHlEZXRlY3RlZCA9IHNvcnREZXRlY3RlZE5hdlNlcXVlbmNlcyhwb3NzaWJseURldGVjdGVkLmZpbHRlcihpc0Jsb2NrZWQpKTtcclxuICAgICAgICB0aGlzLmFsbG93ZWREZXRlY3RlZCA9IHNvcnREZXRlY3RlZE5hdlNlcXVlbmNlcyhkZXRlY3RlZC5maWx0ZXIoaXNBbGxvd2VkKSk7XHJcbiAgICAgICAgdGhpcy5hbGxvd2VkUG9zc2libHlEZXRlY3RlZCA9IHNvcnREZXRlY3RlZE5hdlNlcXVlbmNlcyhwb3NzaWJseURldGVjdGVkLmZpbHRlcihpc0FsbG93ZWQpKTtcclxuICAgICAgICB0aGlzLmFjdGlvbiA9IHRoaXMucmVzb2x2ZUFjdGlvbnMoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNvcnRBY3Rpb25zKGFjdGlvbnM6IERldGVjdGlvbkFjdGlvbltdKTogRGV0ZWN0aW9uQWN0aW9uW10ge1xyXG4gICAgICAgIGlmIChpc0VtcHR5KGFjdGlvbnMpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBbXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGFjdGlvbnMuc29ydCgoYTogRGV0ZWN0aW9uQWN0aW9uLCBiOiBEZXRlY3Rpb25BY3Rpb24pID0+IHtcclxuICAgICAgICAgICAgY29uc3QgW3NlcXVlbmNlQSwgYmxvY2tBLCBkZXRlY3RlZEFdID0gYTtcclxuICAgICAgICAgICAgY29uc3QgW3NlcXVlbmNlQiwgYmxvY2tCLCBkZXRlY3RlZEJdID0gYjtcclxuICAgICAgICAgICAgY29uc3QgY29tcGFyaXNvbiA9IGNvbXBhcmVUcmFja2VkTmF2U2VxdWVuY2VzKHNlcXVlbmNlQSwgc2VxdWVuY2VCKTtcclxuICAgICAgICAgICAgaWYgKGNvbXBhcmlzb24gPT09IDApIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGlzQmxvY2tlZEEgPSBibG9ja0EgPT09IEJsb2NrVHlwZS5ibG9jaztcclxuICAgICAgICAgICAgICAgIGNvbnN0IGlzQmxvY2tlZEIgPSBibG9ja0IgPT09IEJsb2NrVHlwZS5ibG9jaztcclxuICAgICAgICAgICAgICAgIGNvbnN0IGlzQWxsb3dlZEEgPSBibG9ja0EgPT09IEJsb2NrVHlwZS5hbGxvdztcclxuICAgICAgICAgICAgICAgIGNvbnN0IGlzQWxsb3dlZEIgPSBibG9ja0IgPT09IEJsb2NrVHlwZS5hbGxvdztcclxuICAgICAgICAgICAgICAgIGNvbnN0IGlzRGV0ZWN0ZWRBID0gZGV0ZWN0ZWRBID09PSBEZXRlY3RlZFR5cGUuZGV0ZWN0ZWQ7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpc0RldGVjdGVkQiA9IGRldGVjdGVkQiA9PT0gRGV0ZWN0ZWRUeXBlLmRldGVjdGVkO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaXNQb3NzaWJseURldGVjdGVkQSA9IGRldGVjdGVkQSA9PT0gRGV0ZWN0ZWRUeXBlLnBvc3NpYmx5RGV0ZWN0ZWQ7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpc1Bvc3NpYmx5RGV0ZWN0ZWRCID0gZGV0ZWN0ZWRCID09PSBEZXRlY3RlZFR5cGUucG9zc2libHlEZXRlY3RlZDtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoaXNEZXRlY3RlZEEgJiYgaXNQb3NzaWJseURldGVjdGVkQikge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAtMTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaXNEZXRlY3RlZEIgJiYgaXNQb3NzaWJseURldGVjdGVkQSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAxO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpc0Jsb2NrZWRBICYmIGlzQWxsb3dlZEIpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gLTE7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGlzQmxvY2tlZEIgJiYgaXNBbGxvd2VkQSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAxO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29tcGFyZUhpZ2hlcihzZXF1ZW5jZUEubGVuZ3RoLCBzZXF1ZW5jZUIubGVuZ3RoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBjb21wYXJpc29uO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSByZXNvbHZlQWN0aW9ucygpIHtcclxuICAgICAgICBjb25zdCBhY3Rpb25zOiBEZXRlY3Rpb25BY3Rpb25bXSA9IFtdO1xyXG4gICAgICAgIGNvbnN0IG1heWJlQWRkQWN0aW9uID0gKHNlcXVlbmNlczogVHJhY2tlZE5hdlNlcXVlbmNlW10sIGJsb2NrOiBCbG9ja1R5cGUsIGRldGVjdGVkOiBEZXRlY3RlZFR5cGUpID0+IHtcclxuICAgICAgICAgICAgaWYgKCFpc0VtcHR5KHNlcXVlbmNlcykpIHtcclxuICAgICAgICAgICAgICAgIGFjdGlvbnMucHVzaChbZmlyc3Qoc2VxdWVuY2VzKSwgYmxvY2ssIGRldGVjdGVkXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIG1heWJlQWRkQWN0aW9uKHRoaXMuYmxvY2tlZERldGVjdGVkLCBCbG9ja1R5cGUuYmxvY2ssIERldGVjdGVkVHlwZS5kZXRlY3RlZCk7XHJcbiAgICAgICAgbWF5YmVBZGRBY3Rpb24odGhpcy5hbGxvd2VkRGV0ZWN0ZWQsIEJsb2NrVHlwZS5hbGxvdywgRGV0ZWN0ZWRUeXBlLmRldGVjdGVkKTtcclxuICAgICAgICBtYXliZUFkZEFjdGlvbih0aGlzLmJsb2NrZWRQb3NzaWJseURldGVjdGVkLCBCbG9ja1R5cGUuYmxvY2ssIERldGVjdGVkVHlwZS5wb3NzaWJseURldGVjdGVkKTtcclxuICAgICAgICBtYXliZUFkZEFjdGlvbih0aGlzLmFsbG93ZWRQb3NzaWJseURldGVjdGVkLCBCbG9ja1R5cGUuYWxsb3csIERldGVjdGVkVHlwZS5wb3NzaWJseURldGVjdGVkKTtcclxuXHJcbiAgICAgICAgaWYgKGlzRW1wdHkoYWN0aW9ucykpIHtcclxuICAgICAgICAgICAgY29uc3QgcHJlY2VkZW5jZSA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBSZXNvbHZlZERldGVjdGlvbkFjdGlvbihwcmVjZWRlbmNlLCBCbG9ja1R5cGUubm9uZSwgRGV0ZWN0ZWRUeXBlLm5vbmUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBzb3J0ZWRBY3Rpb25zID0gdGhpcy5zb3J0QWN0aW9ucyhhY3Rpb25zKTtcclxuICAgICAgICBjb25zdCBbYWN0aW9uLCBibG9jaywgZGV0ZWN0ZWRdID0gZmlyc3Qoc29ydGVkQWN0aW9ucyk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBSZXNvbHZlZERldGVjdGlvbkFjdGlvbihhY3Rpb24ucHJlY2VkZW5jZSwgYmxvY2ssIGRldGVjdGVkKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgcHJlY2VkZW5jZSgpOiBNYXliZTxudW1iZXI+IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5hY3Rpb24ucHJlY2VkZW5jZTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgc2hvdWxkQmxvY2soKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYWN0aW9uLnNob3VsZEJsb2NrO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBzaG91bGRQb3NzaWJseUJsb2NrKCk6IGJvb2xlYW4geyBcclxuICAgICAgICByZXR1cm4gdGhpcy5hY3Rpb24uc2hvdWxkUG9zc2libHlCbG9jaztcclxuICAgIH1cclxuXHJcbiAgICBnZXQgc2hvdWxkQWxsb3coKTogYm9vbGVhbiB7IFxyXG4gICAgICAgIHJldHVybiB0aGlzLmFjdGlvbi5zaG91bGRBbGxvdztcclxuICAgIH1cclxuXHJcbiAgICBnZXQgc2hvdWxkUG9zc2libHlBbGxvdygpOiBib29sZWFuIHsgXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYWN0aW9uLnNob3VsZFBvc3NpbGJ5QWxsb3c7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBmaW5kRmlyc3REZXRlY3Rpb24oc2VxdWVuY2VzOiBUcmFja2VkTmF2U2VxdWVuY2VbXSkge1xyXG4gICAgICAgIGlmIChpc0VtcHR5KHNlcXVlbmNlcykpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBFbXB0eU5hdlNlcXVlbmNlRGV0ZWN0aW9uKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmaXJzdChzZXF1ZW5jZXMpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBibG9ja2VkKCk6IElOYXZTZXF1ZW5jZURldGVjdGlvbiB7IFxyXG4gICAgICAgIHJldHVybiB0aGlzLmZpbmRGaXJzdERldGVjdGlvbih0aGlzLmJsb2NrZWREZXRlY3RlZCk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHBvc3NpYmxlQmxvY2tlZCgpOiBJTmF2U2VxdWVuY2VEZXRlY3Rpb24geyBcclxuICAgICAgICByZXR1cm4gdGhpcy5maW5kRmlyc3REZXRlY3Rpb24odGhpcy5ibG9ja2VkUG9zc2libHlEZXRlY3RlZCk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGFsbG93ZWQoKTogSU5hdlNlcXVlbmNlRGV0ZWN0aW9uIHsgXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZmluZEZpcnN0RGV0ZWN0aW9uKHRoaXMuYWxsb3dlZERldGVjdGVkKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgcG9zc2libGVBbGxvd2VkKCk6IElOYXZTZXF1ZW5jZURldGVjdGlvbiB7IFxyXG4gICAgICAgIHJldHVybiB0aGlzLmZpbmRGaXJzdERldGVjdGlvbih0aGlzLmFsbG93ZWRQb3NzaWJseURldGVjdGVkKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGJsb2NrZWREZXRlY3RlZDogVHJhY2tlZE5hdlNlcXVlbmNlW10gPSBbXTtcclxuICAgIHByaXZhdGUgYmxvY2tlZFBvc3NpYmx5RGV0ZWN0ZWQ6IFRyYWNrZWROYXZTZXF1ZW5jZVtdID0gW107XHJcbiAgICBwcml2YXRlIGFsbG93ZWREZXRlY3RlZDogVHJhY2tlZE5hdlNlcXVlbmNlW10gPSBbXTtcclxuICAgIHByaXZhdGUgYWxsb3dlZFBvc3NpYmx5RGV0ZWN0ZWQ6IFRyYWNrZWROYXZTZXF1ZW5jZVtdID0gW107XHJcbiAgICBwcml2YXRlIGFjdGlvbjogUmVzb2x2ZWREZXRlY3Rpb25BY3Rpb247XHJcbn1cclxuXHJcbmNsYXNzIENvbXBsZXRlTmF2U2VxdWVuY2Uge1xyXG4gICAgY29uc3RydWN0b3IocmVhZG9ubHkgbWV0YWRhdGE6IE5hdk1ldGFkYXRhKSB7IH1cclxuXHJcbiAgICBwdXNoKG5hdlBhdHRlcm46IE5hdlBhdHRlcm4sIHBhcnRpYWxOYXZTZXF1ZW5jZTogUGFydGlhbE5hdlNlcXVlbmNlKSB7XHJcbiAgICAgICAgdGhpcy5zZXF1ZW5jZS5wdXNoKFtuYXZQYXR0ZXJuLCBwYXJ0aWFsTmF2U2VxdWVuY2VdKTtcclxuICAgICAgICBjb25zdCBiYWNrUmVmID0gbmF2UGF0dGVybi5hc0JhY2tSZWZlcmVuY2U7XHJcbiAgICAgICAgaWYgKHNvbWUoYmFja1JlZikpIHtcclxuICAgICAgICAgICAgdGhpcy5iYWNrUmVmcy5wdXNoKFtiYWNrUmVmLCBwYXJ0aWFsTmF2U2VxdWVuY2VdKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGxlbmd0aCgpOiBudW1iZXIgeyBcclxuICAgICAgICByZXR1cm4gdGhpcy5zZXF1ZW5jZS5sZW5ndGg7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0KGluZGV4OiBudW1iZXIpOiBNYXliZTxbTmF2UGF0dGVybiwgUGFydGlhbE5hdlNlcXVlbmNlXT4ge1xyXG4gICAgICAgIGlmIChpbmRleCA8IDAgfHwgaW5kZXggPj0gdGhpcy5zZXF1ZW5jZS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc2VxdWVuY2VbaW5kZXhdO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2VxdWVuY2U6IFtOYXZQYXR0ZXJuLCBQYXJ0aWFsTmF2U2VxdWVuY2VdW10gPSBbXTtcclxuICAgIGJhY2tSZWZzOiBbQmFja1JlZk5hdlBhdHRlcm4sIFBhcnRpYWxOYXZTZXF1ZW5jZV1bXSA9IFtdO1xyXG59XHJcblxyXG50eXBlIFBhcnRpYWxOYXZTZXF1ZW5jZVNldCA9IEhhc2hTZXQ8UGFydGlhbE5hdlNlcXVlbmNlPjtcclxudHlwZSBQYXJ0aWFsTmF2U2VxdWVuY2VSZXN1bHRNYXAgPSBIYXNoTWFwPFBhcnRpYWxOYXZTZXF1ZW5jZSwgVHJhY2tlZE5hdlNlcXVlbmNlPjtcclxuXHJcbmZ1bmN0aW9uICpmaW5kSW5jbHVzaW9ucyhsZW5ndGg6IG51bWJlcik6IEl0ZXJhYmxlPGJvb2xlYW5bXT4ge1xyXG4gICAgY29uc3QgaW5jbHVkZXMgPSBuZXdBcnJheShsZW5ndGgsIGZhbHNlKTtcclxuICAgIHlpZWxkIGluY2x1ZGVzO1xyXG4gICAgbGV0IGZvdW5kQWxsSW5jbHVzaW9ucyA9IGZhbHNlO1xyXG4gICAgd2hpbGUgKCFmb3VuZEFsbEluY2x1c2lvbnMpIHtcclxuICAgICAgICBsZXQgY2FycnkgPSB0cnVlO1xyXG4gICAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgY2FycnkgJiYgKGluZGV4IDwgaW5jbHVkZXMubGVuZ3RoKTsgaW5kZXggKz0gMSkge1xyXG4gICAgICAgICAgICBjb25zdCBpbmNsdWRlID0gaW5jbHVkZXNbaW5kZXhdO1xyXG4gICAgICAgICAgICBpZiAoaW5jbHVkZSkge1xyXG4gICAgICAgICAgICAgICAgaW5jbHVkZXNbaW5kZXhdID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBjYXJyeSA9IHRydWU7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpbmNsdWRlc1tpbmRleF0gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgY2FycnkgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoY2FycnkpIHtcclxuICAgICAgICAgICAgZm91bmRBbGxJbmNsdXNpb25zID0gdHJ1ZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB5aWVsZCBpbmNsdWRlcztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG1ha2VJbmRleE1hc2soaW5kaWNlczogbnVtYmVyW10sIGxlbmd0aDogbnVtYmVyKTogW2Jvb2xlYW5bXSwgbnVtYmVyW11dIHtcclxuICAgIGNvbnN0IGlzSW5kZXhNYXNrID0gbmV3QXJyYXkobGVuZ3RoLCBmYWxzZSk7XHJcbiAgICBjb25zdCBpbmRleE1hc2sgPSBuZXdBcnJheShsZW5ndGgsIC0xKTtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaW5kaWNlcy5sZW5ndGg7IGkgKz0gMSkge1xyXG4gICAgICAgIGNvbnN0IGluZGV4ID0gaW5kaWNlc1tpXTtcclxuICAgICAgICBpc0luZGV4TWFza1tpbmRleF0gPSB0cnVlO1xyXG4gICAgICAgIGluZGV4TWFza1tpbmRleF0gPSBpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIFtpc0luZGV4TWFzaywgaW5kZXhNYXNrXTtcclxufVxyXG5cclxuY2xhc3MgTmF2U2VxdWVuY2VEZXRlY3RvciB7XHJcbiAgICBjb25zdHJ1Y3RvcihuYXZTZXF1ZW5jZXM6IFtOYXZQYXR0ZXJuU2VxdWVuY2UsIE5hdk1ldGFkYXRhXVtdKSB7XHJcbiAgICAgICAgZm9yIChjb25zdCBbbmF2U2VxdWVuY2UsIG5hdk1ldGFkYXRhXSBvZiBuYXZTZXF1ZW5jZXMpIHtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBuYXZTZXF1ZW5jZVZhcmlhdGlvbiBvZiB0aGlzLmZpbmRSZXBlYXRQYXR0ZXJuVmFyaWF0aW9ucyhuYXZTZXF1ZW5jZSkpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG5hdlNlcXVlbmNlSWQgPSB0aGlzLmlkR2VuZXJhdG9yLmdlbmVyYXRlSWQoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuYnVpbGRQYXJ0aWFsTmF2U2VxdWVuY2VzKG5hdlNlcXVlbmNlVmFyaWF0aW9uLCBuYXZNZXRhZGF0YSwgbmF2U2VxdWVuY2VJZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSAqZmluZFJlcGVhdFBhdHRlcm5WYXJpYXRpb25zKG5hdlNlcXVlbmNlOiBOYXZQYXR0ZXJuU2VxdWVuY2UpOiBJdGVyYWJsZUl0ZXJhdG9yPE5hdlBhdHRlcm5TZXF1ZW5jZT4ge1xyXG4gICAgICAgIGNvbnN0IHJlcGVhdFBhdHRlcm5JbmRpY2VzID0gZmluZEFsbEluZGljZXMobmF2U2VxdWVuY2UsIChuYXZQYXR0ZXJuKSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBuYXZQYXR0ZXJuLmhhc1JlcGVhdGVkTW9kaWZpZXI7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGNvbnN0IFtpc1JlcGVhdFBhdHRlcm4sIGluY2x1ZGVzSW5kZXhdID0gbWFrZUluZGV4TWFzayhyZXBlYXRQYXR0ZXJuSW5kaWNlcywgbmF2U2VxdWVuY2UubGVuZ3RoKTtcclxuICAgICAgICBjb25zdCBkb0luY2x1ZGUgPSAoaW5jbHVkZXM6IGJvb2xlYW5bXSwgaW5kZXg6IG51bWJlcik6IGJvb2xlYW4gPT4ge1xyXG4gICAgICAgICAgICBpZiAoaXNSZXBlYXRQYXR0ZXJuW2luZGV4XSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGluY2x1ZGVzW2luY2x1ZGVzSW5kZXhbaW5kZXhdXTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgZm9yIChjb25zdCBpbmNsdWRlcyBvZiBmaW5kSW5jbHVzaW9ucyhyZXBlYXRQYXR0ZXJuSW5kaWNlcy5sZW5ndGgpKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG5hdlNlcXVlbmNlVmFyaWF0aW9uID0gbmV3IEFycmF5PE5hdlBhdHRlcm4+KCk7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBuYXZTZXF1ZW5jZS5sZW5ndGg7IGluZGV4ICs9IDEpIHtcclxuICAgICAgICAgICAgICAgIGlmIChkb0luY2x1ZGUoaW5jbHVkZXMsIGluZGV4KSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG5hdlNlcXVlbmNlVmFyaWF0aW9uLnB1c2gobmF2U2VxdWVuY2VbaW5kZXhdKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB5aWVsZCBuYXZTZXF1ZW5jZVZhcmlhdGlvbjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBlbXB0eVBhcnRpYWxOYXZTZXF1ZW5jZVNldCgpIHtcclxuICAgICAgICByZXR1cm4gbWFrZURlZmF1bHRIYXNoU2V0PFBhcnRpYWxOYXZTZXF1ZW5jZT4oKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFkZFBhcnRpYWxOYXZTZXF1ZW5jZShcclxuICAgICAgICAgICAgbmF2aWdhdGlvbjogTmF2aWdhdGlvbiwgXHJcbiAgICAgICAgICAgIHBhcnRpYWxOYXZTZXF1ZW5jZTogUGFydGlhbE5hdlNlcXVlbmNlKSB7XHJcbiAgICAgICAgY29uc3QgcGFydGlhbE5hdlNlcXVlbmNlU2V0ID0gdGhpcy5wYXJ0aWFsTmF2U2VxdWVuY2VNYXAuZ2V0KG5hdmlnYXRpb24pO1xyXG4gICAgICAgIGlmIChzb21lKHBhcnRpYWxOYXZTZXF1ZW5jZVNldCkpIHtcclxuICAgICAgICAgICAgcGFydGlhbE5hdlNlcXVlbmNlU2V0LmFkZChwYXJ0aWFsTmF2U2VxdWVuY2UpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG5ld1BhcnRpYWxOYXZTZXF1ZW5jZVNldCA9IHRoaXMuZW1wdHlQYXJ0aWFsTmF2U2VxdWVuY2VTZXQoKTtcclxuICAgICAgICAgICAgbmV3UGFydGlhbE5hdlNlcXVlbmNlU2V0LmFkZChwYXJ0aWFsTmF2U2VxdWVuY2UpO1xyXG4gICAgICAgICAgICB0aGlzLnBhcnRpYWxOYXZTZXF1ZW5jZU1hcC5wdXQobmF2aWdhdGlvbiwgbmV3UGFydGlhbE5hdlNlcXVlbmNlU2V0KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhZGRDb21wbGV0ZU5hdlNlcXVlbmNlKG5hdlBhdHRlcm46IE5hdlBhdHRlcm4sIHBhcnRpYWxOYXZTZXF1ZW5jZTogUGFydGlhbE5hdlNlcXVlbmNlLCBuYXZNZXRhZGF0YTogTmF2TWV0YWRhdGEpIHtcclxuICAgICAgICBjb25zdCBuYXZTZXF1ZW5jZUlkID0gcGFydGlhbE5hdlNlcXVlbmNlLm5hdlNlcXVlbmNlSWQ7XHJcbiAgICAgICAgY29uc3QgY29tcGxldGVOYXZTZXF1ZW5jZSA9IHRoaXMuY29tcGxldGVOYXZTZXF1ZW5jZU1hcC5nZXQobmF2U2VxdWVuY2VJZCk7XHJcbiAgICAgICAgaWYgKHNvbWUoY29tcGxldGVOYXZTZXF1ZW5jZSkpIHtcclxuICAgICAgICAgICAgY29tcGxldGVOYXZTZXF1ZW5jZS5wdXNoKG5hdlBhdHRlcm4sIHBhcnRpYWxOYXZTZXF1ZW5jZSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgbmV3Q29tcGxldGVOYXZTZXF1ZW5jZSA9IG5ldyBDb21wbGV0ZU5hdlNlcXVlbmNlKG5hdk1ldGFkYXRhKTtcclxuICAgICAgICAgICAgbmV3Q29tcGxldGVOYXZTZXF1ZW5jZS5wdXNoKG5hdlBhdHRlcm4sIHBhcnRpYWxOYXZTZXF1ZW5jZSk7XHJcbiAgICAgICAgICAgIHRoaXMuY29tcGxldGVOYXZTZXF1ZW5jZU1hcC5zZXQobmF2U2VxdWVuY2VJZCwgbmV3Q29tcGxldGVOYXZTZXF1ZW5jZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYnVpbGRQYXJ0aWFsTmF2U2VxdWVuY2VzKG5hdlNlcXVlbmNlOiBOYXZQYXR0ZXJuU2VxdWVuY2UsIG5hdk1ldGFkYXRhOiBOYXZNZXRhZGF0YSwgbmF2U2VxdWVuY2VJZDogTmF2U2VxdWVuY2VJZCkge1xyXG4gICAgICAgIGNvbnN0IGNvbXBsZXRlTGVuZ3RoID0gbmF2U2VxdWVuY2UubGVuZ3RoO1xyXG4gICAgICAgIG5hdlNlcXVlbmNlLmZvckVhY2goKG5hdlBhdHRlcm46IE5hdlBhdHRlcm4sIGluZGV4OiBudW1iZXIpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgaWQgPSBuYXZQYXR0ZXJuLmlkO1xyXG4gICAgICAgICAgICBjb25zdCBwYXJ0aWFsTGVuZ3RoID0gaW5kZXggKyAxO1xyXG4gICAgICAgICAgICBjb25zdCBwYXJ0aWFsTmF2U2VxdWVuY2UgPSBuZXcgUGFydGlhbE5hdlNlcXVlbmNlKG5hdlNlcXVlbmNlSWQsIGlkLCBwYXJ0aWFsTGVuZ3RoLCBjb21wbGV0ZUxlbmd0aCk7XHJcbiAgICAgICAgICAgIHRoaXMuYWRkQ29tcGxldGVOYXZTZXF1ZW5jZShuYXZQYXR0ZXJuLCBwYXJ0aWFsTmF2U2VxdWVuY2UsIG5hdk1ldGFkYXRhKTtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBuYXZpZ2F0aW9uIG9mIG5hdlBhdHRlcm4uYnVpbGROYXZpZ2F0aW9ucygpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFkZFBhcnRpYWxOYXZTZXF1ZW5jZShuYXZpZ2F0aW9uLCBwYXJ0aWFsTmF2U2VxdWVuY2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBmaW5kTmV4dEluQ29tcGxldGVOYXZTZXF1ZW5jZShwYXJ0aWFsTmF2U2VxdWVuY2U6IFBhcnRpYWxOYXZTZXF1ZW5jZSk6IE1heWJlPFtOYXZQYXR0ZXJuLCBQYXJ0aWFsTmF2U2VxdWVuY2VdPiB7XHJcbiAgICAgICAgaWYgKHBhcnRpYWxOYXZTZXF1ZW5jZS5pc0NvbXBsZXRlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IG5hdlNlcXVlbmNlSWQgPSBwYXJ0aWFsTmF2U2VxdWVuY2UubmF2U2VxdWVuY2VJZDtcclxuICAgICAgICBjb25zdCBjb21wbGV0ZU5hdlNlcXVlbmNlID0gdGhpcy5jb21wbGV0ZU5hdlNlcXVlbmNlTWFwLmdldChuYXZTZXF1ZW5jZUlkKTtcclxuICAgICAgICBpZiAobm9uZShjb21wbGV0ZU5hdlNlcXVlbmNlKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBuZXh0SW5kZXggPSBwYXJ0aWFsTmF2U2VxdWVuY2UuYXNOZXh0SW5kZXg7XHJcbiAgICAgICAgaWYgKG5vbmUobmV4dEluZGV4KSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBuZXh0SW5TZXF1ZW5jZSA9IGNvbXBsZXRlTmF2U2VxdWVuY2UuZ2V0KG5leHRJbmRleCk7XHJcbiAgICAgICAgcmV0dXJuIG5leHRJblNlcXVlbmNlO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZmluZE5leHRJbk5hdlNlcXVlbmNlV2l0aFJlcGVhdGVkKHBhcnRpYWxOYXZTZXF1ZW5jZTogUGFydGlhbE5hdlNlcXVlbmNlLCBuZXh0UGFydGlhbE5hdlNlcXVlbmNlU2V0OiBQYXJ0aWFsTmF2U2VxdWVuY2VTZXQpOiBNYXliZTxQYXJ0aWFsTmF2U2VxdWVuY2U+IHtcclxuICAgICAgICBpZiAocGFydGlhbE5hdlNlcXVlbmNlLmlzQ29tcGxldGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgbmF2U2VxdWVuY2VJZCA9IHBhcnRpYWxOYXZTZXF1ZW5jZS5uYXZTZXF1ZW5jZUlkO1xyXG4gICAgICAgIGNvbnN0IGNvbXBsZXRlTmF2U2VxdWVuY2UgPSB0aGlzLmNvbXBsZXRlTmF2U2VxdWVuY2VNYXAuZ2V0KG5hdlNlcXVlbmNlSWQpO1xyXG4gICAgICAgIGlmIChub25lKGNvbXBsZXRlTmF2U2VxdWVuY2UpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IG5leHRJbmRleCA9IHBhcnRpYWxOYXZTZXF1ZW5jZS5hc05leHRJbmRleDtcclxuICAgICAgICBpZiAoc29tZShuZXh0SW5kZXgpKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG5leHRQb3NzaWJsZSA9IGNvbXBsZXRlTmF2U2VxdWVuY2UuZ2V0KG5leHRJbmRleCk7XHJcbiAgICAgICAgICAgIGlmIChzb21lKG5leHRQb3NzaWJsZSkpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IFssIG5leHRQYXJ0aWFsTmF2U2VxdWVuY2VdID0gbmV4dFBvc3NpYmxlO1xyXG4gICAgICAgICAgICAgICAgaWYgKG5leHRQYXJ0aWFsTmF2U2VxdWVuY2VTZXQuaGFzKG5leHRQYXJ0aWFsTmF2U2VxdWVuY2UpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5leHRQYXJ0aWFsTmF2U2VxdWVuY2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgY3VycmVudEluZGV4ID0gcGFydGlhbE5hdlNlcXVlbmNlLmFzSW5kZXg7XHJcbiAgICAgICAgY29uc3QgcmVwZWF0ZWROZXh0UG9zc2libGUgPSBjb21wbGV0ZU5hdlNlcXVlbmNlLmdldChjdXJyZW50SW5kZXgpO1xyXG4gICAgICAgIGlmIChzb21lKHJlcGVhdGVkTmV4dFBvc3NpYmxlKSkge1xyXG4gICAgICAgICAgICBjb25zdCBbLCBjdXJyZW50UGFydGlhbE5hdlNlcXVlbmNlXSA9IHJlcGVhdGVkTmV4dFBvc3NpYmxlO1xyXG4gICAgICAgICAgICBpZiAobmV4dFBhcnRpYWxOYXZTZXF1ZW5jZVNldC5oYXMoY3VycmVudFBhcnRpYWxOYXZTZXF1ZW5jZSkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBjdXJyZW50UGFydGlhbE5hdlNlcXVlbmNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSAqZmluZE5leHRJbk5hdlNlcXVlbmNlcyhcclxuICAgICAgICAgICAgY3VycmVudFBhcnRpYWxOYXZTZXF1ZW5jZVJlc3VsdE1hcDogUGFydGlhbE5hdlNlcXVlbmNlUmVzdWx0TWFwLCBcclxuICAgICAgICAgICAgbmV4dFBhcnRpYWxOYXZTZXF1ZW5jZVNldDogUGFydGlhbE5hdlNlcXVlbmNlU2V0LFxyXG4gICAgICAgICAgICBuYXZEYXRhOiBOYXZEYXRhKTogSXRlcmFibGVJdGVyYXRvcjxbUGFydGlhbE5hdlNlcXVlbmNlLCBUcmFja2VkTmF2U2VxdWVuY2VdPiB7XHJcbiAgICAgICAgZm9yIChjb25zdCBbcGFydGlhbE5hdlNlcXVlbmNlLCB0cmFja2VkTmF2U2VxdWVuY2VdIG9mIGN1cnJlbnRQYXJ0aWFsTmF2U2VxdWVuY2VSZXN1bHRNYXApIHtcclxuICAgICAgICAgICAgY29uc3QgbmV4dFBhcnRpYWxOYXZTZXF1ZW5jZSA9IHRoaXMuZmluZE5leHRJbk5hdlNlcXVlbmNlV2l0aFJlcGVhdGVkKHBhcnRpYWxOYXZTZXF1ZW5jZSwgbmV4dFBhcnRpYWxOYXZTZXF1ZW5jZVNldCk7XHJcbiAgICAgICAgICAgIGlmIChzb21lKG5leHRQYXJ0aWFsTmF2U2VxdWVuY2UpKSB7XHJcbiAgICAgICAgICAgICAgICB0cmFja2VkTmF2U2VxdWVuY2UucHVzaChuYXZEYXRhLCBuZXh0UGFydGlhbE5hdlNlcXVlbmNlKTtcclxuICAgICAgICAgICAgICAgIHlpZWxkIFtuZXh0UGFydGlhbE5hdlNlcXVlbmNlLCB0cmFja2VkTmF2U2VxdWVuY2VdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZmluZE5hdk1ldGFkYXRhKG5hdlNlcXVlbmNlSWQ6IElkKTogTWF5YmU8TmF2TWV0YWRhdGE+IHtcclxuICAgICAgICBjb25zdCBjb21wbGV0ZU5hdlNlcXVlbmNlID0gdGhpcy5jb21wbGV0ZU5hdlNlcXVlbmNlTWFwLmdldChuYXZTZXF1ZW5jZUlkKTtcclxuICAgICAgICBpZiAobm9uZShjb21wbGV0ZU5hdlNlcXVlbmNlKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gY29tcGxldGVOYXZTZXF1ZW5jZS5tZXRhZGF0YTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlICpmaW5kRmlyc3RJbk5hdlNlcXVlbmNlcyhcclxuICAgICAgICAgICAgcGFydGlhbE5hdlNlcXVlbmNlU2V0OiBQYXJ0aWFsTmF2U2VxdWVuY2VTZXQsIFxyXG4gICAgICAgICAgICBuYXZEYXRhOiBOYXZEYXRhKTogSXRlcmFibGVJdGVyYXRvcjxbUGFydGlhbE5hdlNlcXVlbmNlLCBUcmFja2VkTmF2U2VxdWVuY2VdPiB7XHJcbiAgICAgICAgeWllbGQqIG1hcChmaWx0ZXIocGFydGlhbE5hdlNlcXVlbmNlU2V0LCAocGFydGlhbE5hdlNlcXVlbmNlKSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiAocGFydGlhbE5hdlNlcXVlbmNlLnBhcnRpYWxMZW5ndGggPT09IDEpO1xyXG4gICAgICAgIH0pLCAocGFydGlhbE5hdlNlcXVlbmNlKSA6W1BhcnRpYWxOYXZTZXF1ZW5jZSwgVHJhY2tlZE5hdlNlcXVlbmNlXSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG5hdlNlcXVlbmNlSWQgPSBwYXJ0aWFsTmF2U2VxdWVuY2UubmF2U2VxdWVuY2VJZDtcclxuICAgICAgICAgICAgY29uc3QgbWV0YWRhdGEgPSB0aGlzLmZpbmROYXZNZXRhZGF0YShuYXZTZXF1ZW5jZUlkKTtcclxuICAgICAgICAgICAgY29uc3QgdHJhY2tlZE5hdlNlcXVlbmNlID0gbmV3IFRyYWNrZWROYXZTZXF1ZW5jZShtZXRhZGF0YSk7XHJcbiAgICAgICAgICAgIHRyYWNrZWROYXZTZXF1ZW5jZS5wdXNoKG5hdkRhdGEsIHBhcnRpYWxOYXZTZXF1ZW5jZSk7XHJcbiAgICAgICAgICAgIHJldHVybiBbcGFydGlhbE5hdlNlcXVlbmNlLCB0cmFja2VkTmF2U2VxdWVuY2VdO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZmluZFBhcnRpYWxOYXZTZXF1ZW5jZVNldChuYXZpZ2F0aW9uOiBNYXliZTxOYXZpZ2F0aW9uPik6IFBhcnRpYWxOYXZTZXF1ZW5jZVNldCB7XHJcbiAgICAgICAgaWYgKG5vbmUobmF2aWdhdGlvbikpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZW1wdHlQYXJ0aWFsTmF2U2VxdWVuY2VTZXQoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgcGFydGlhbE5hdlNlcXVlbmNlU2V0ID0gdGhpcy5wYXJ0aWFsTmF2U2VxdWVuY2VNYXAuZ2V0KG5hdmlnYXRpb24pO1xyXG4gICAgICAgIGlmIChub25lKHBhcnRpYWxOYXZTZXF1ZW5jZVNldCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZW1wdHlQYXJ0aWFsTmF2U2VxdWVuY2VTZXQoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHBhcnRpYWxOYXZTZXF1ZW5jZVNldDtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGZpbmRPcmlnaW5QYXJ0aWFsTmF2U2VxdWVuY2VTZXQobmF2RGF0YTogTmF2RGF0YSk6IFBhcnRpYWxOYXZTZXF1ZW5jZVNldCB7XHJcbiAgICAgICAgaWYgKHNvbWUobmF2RGF0YS5vcmlnaW4pKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG5hdmlnYXRpb24gPSBuZXcgT3JpZ2luTmF2KG5hdkRhdGEudHlwZSwgbmF2RGF0YS5vcmlnaW4pO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5maW5kUGFydGlhbE5hdlNlcXVlbmNlU2V0KG5hdmlnYXRpb24pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5lbXB0eVBhcnRpYWxOYXZTZXF1ZW5jZVNldCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZmluZENhdGVnb3JpemVkUGFydGlhbE5hdlNlcXVlbmNlU2V0KG5hdkRhdGE6IE5hdkRhdGEpOiBQYXJ0aWFsTmF2U2VxdWVuY2VTZXQge1xyXG4gICAgICAgIGNvbnN0IG5hdmlnYXRpb24gPSBuZXcgQ2F0ZWdvcml6ZWROYXYobmF2RGF0YS50eXBlLCBuYXZEYXRhLmNhdGVnb3J5KTtcclxuICAgICAgICByZXR1cm4gdGhpcy5maW5kUGFydGlhbE5hdlNlcXVlbmNlU2V0KG5hdmlnYXRpb24pO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZmluZEdyb3VwUGFydGlhbE5hdlNlcXVlbmNlU2V0KG5hdkRhdGE6IE5hdkRhdGEpOiBQYXJ0aWFsTmF2U2VxdWVuY2VTZXQge1xyXG4gICAgICAgIGlmIChub25lKG5hdkRhdGEuZ3JvdXBzKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5lbXB0eVBhcnRpYWxOYXZTZXF1ZW5jZVNldCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBncm91cFBhcnRpYWxOYXZTZXF1ZW5jZVNldCA9IHRoaXMuZW1wdHlQYXJ0aWFsTmF2U2VxdWVuY2VTZXQoKTtcclxuICAgICAgICBmb3IgKGNvbnN0IGdyb3VwIG9mIG5hdkRhdGEuZ3JvdXBzKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG5hdmlnYXRpb24gPSBuZXcgR3JvdXBOYXYobmF2RGF0YS50eXBlLCBncm91cCk7XHJcbiAgICAgICAgICAgIGdyb3VwUGFydGlhbE5hdlNlcXVlbmNlU2V0LmFkZE1hbnkoXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5maW5kUGFydGlhbE5hdlNlcXVlbmNlU2V0KG5hdmlnYXRpb24pKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGdyb3VwUGFydGlhbE5hdlNlcXVlbmNlU2V0O1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgKmZpbmRCYWNrUmVmUGFydGlhbE5hdlNlcXVlbmNlcyhuYXZEYXRhOiBOYXZEYXRhLCBcclxuICAgICAgICAgICAgY3VycmVudFBhcnRpYWxOYXZTZXF1ZW5jZTogUGFydGlhbE5hdlNlcXVlbmNlLCBcclxuICAgICAgICAgICAgdHJhY2tlZE5hdlNlcXVlbmNlOiBUcmFja2VkTmF2U2VxdWVuY2UpOiBJdGVyYWJsZUl0ZXJhdG9yPFBhcnRpYWxOYXZTZXF1ZW5jZT4ge1xyXG4gICAgICAgIGNvbnN0IG5hdlNlcXVlbmNlSWQgPSBjdXJyZW50UGFydGlhbE5hdlNlcXVlbmNlLm5hdlNlcXVlbmNlSWQ7XHJcbiAgICAgICAgY29uc3QgY29tcGxldGVOYXZTZXF1ZW5jZSA9IHRoaXMuY29tcGxldGVOYXZTZXF1ZW5jZU1hcC5nZXQobmF2U2VxdWVuY2VJZCk7XHJcbiAgICAgICAgaWYgKG5vbmUoY29tcGxldGVOYXZTZXF1ZW5jZSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKGNvbnN0IFtiYWNrUmVmTmF2UGF0dGVybiwgbmV4dFBhcnRpYWxOYXZTZXF1ZW5jZV0gb2YgY29tcGxldGVOYXZTZXF1ZW5jZS5iYWNrUmVmcykge1xyXG4gICAgICAgICAgICBjb25zdCBiYWNrUmVmTmF2RGF0YSA9IHRyYWNrZWROYXZTZXF1ZW5jZS5sb29rdXBCYWNrUmVmQmluZGluZyhiYWNrUmVmTmF2UGF0dGVybi5iYWNrUmVmKTtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBuYXZUeXBlIG9mIGJhY2tSZWZOYXZQYXR0ZXJuLm5hdlR5cGVzKCkpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGhhc1NhbWVOYXZUeXBlID0gKG5hdkRhdGEudHlwZSA9PT0gbmF2VHlwZSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBoYXNTYW1lT3JpZ2luID0gKHNvbWUoYmFja1JlZk5hdkRhdGEpICYmIGlzU2FtZU9yaWdpbihuYXZEYXRhLm9yaWdpbiwgYmFja1JlZk5hdkRhdGEub3JpZ2luKSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoYmFja1JlZk5hdlBhdHRlcm4uaGFzTm90TW9kaWZlcikge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChoYXNTYW1lTmF2VHlwZSAmJiBzb21lKGJhY2tSZWZOYXZEYXRhKSAmJiAhaGFzU2FtZU9yaWdpbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB5aWVsZCBuZXh0UGFydGlhbE5hdlNlcXVlbmNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gXHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChoYXNTYW1lTmF2VHlwZSAmJiBzb21lKGJhY2tSZWZOYXZEYXRhKSAmJiBoYXNTYW1lT3JpZ2luKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHlpZWxkIG5leHRQYXJ0aWFsTmF2U2VxdWVuY2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGZpbmRCYWNrUmVmUGFydGlhbE5hdlNlcXVlbmNlU2V0KG5hdkRhdGE6IE5hdkRhdGEsIFxyXG4gICAgICAgICAgICBjdXJyZW50UGFydGlhbE5hdlNlcXVlbmNlUmVzdWx0TWFwOiBQYXJ0aWFsTmF2U2VxdWVuY2VSZXN1bHRNYXApOiBQYXJ0aWFsTmF2U2VxdWVuY2VTZXQge1xyXG4gICAgICAgIGNvbnN0IG5leHRQYXJ0aWFsTmF2U2VxdWVuY2VTZXQgPSB0aGlzLmVtcHR5UGFydGlhbE5hdlNlcXVlbmNlU2V0KCk7XHJcbiAgICAgICAgZm9yIChjb25zdCBbY3VycmVudFBhcnRpYWxOYXZTZXF1ZW5jZSwgdHJhY2tlZE5hdlNlcXVlbmNlXSBvZiBjdXJyZW50UGFydGlhbE5hdlNlcXVlbmNlUmVzdWx0TWFwKSB7XHJcbiAgICAgICAgICAgIG5leHRQYXJ0aWFsTmF2U2VxdWVuY2VTZXQuYWRkTWFueShcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmZpbmRCYWNrUmVmUGFydGlhbE5hdlNlcXVlbmNlcyhuYXZEYXRhLCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRQYXJ0aWFsTmF2U2VxdWVuY2UsIHRyYWNrZWROYXZTZXF1ZW5jZSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbmV4dFBhcnRpYWxOYXZTZXF1ZW5jZVNldDtcclxuICAgIH1cclxuXHJcbiAgICBkZXRlY3ROYXZTZXF1ZW5jZShuYXZEYXRhOiBOYXZEYXRhLCBcclxuICAgICAgICAgICAgY3VycmVudFBhcnRpYWxOYXZTZXF1ZW5jZVJlc3VsdE1hcDogUGFydGlhbE5hdlNlcXVlbmNlUmVzdWx0TWFwKTogUGFydGlhbE5hdlNlcXVlbmNlUmVzdWx0TWFwIHtcclxuICAgICAgICBpZiAobmF2RGF0YS50eXBlID09PSBOYXZUeXBlLmNvbnRlbnRUeXBlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRldGVjdE5hdlNlcXVlbmNlV2l0aENvbnRlbnRUeXBlKG5hdkRhdGEsIGN1cnJlbnRQYXJ0aWFsTmF2U2VxdWVuY2VSZXN1bHRNYXApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBuZXh0UGFydGlhbE5hdlNlcXVlbmNlU2V0ID0gdGhpcy5lbXB0eVBhcnRpYWxOYXZTZXF1ZW5jZVNldCgpO1xyXG4gICAgICAgIG5leHRQYXJ0aWFsTmF2U2VxdWVuY2VTZXQuYWRkTWFueSh0aGlzLmZpbmRPcmlnaW5QYXJ0aWFsTmF2U2VxdWVuY2VTZXQobmF2RGF0YSkpO1xyXG4gICAgICAgIG5leHRQYXJ0aWFsTmF2U2VxdWVuY2VTZXQuYWRkTWFueSh0aGlzLmZpbmRDYXRlZ29yaXplZFBhcnRpYWxOYXZTZXF1ZW5jZVNldChuYXZEYXRhKSk7XHJcbiAgICAgICAgbmV4dFBhcnRpYWxOYXZTZXF1ZW5jZVNldC5hZGRNYW55KHRoaXMuZmluZEdyb3VwUGFydGlhbE5hdlNlcXVlbmNlU2V0KG5hdkRhdGEpKTtcclxuICAgICAgICBuZXh0UGFydGlhbE5hdlNlcXVlbmNlU2V0LmFkZE1hbnkodGhpcy5maW5kQmFja1JlZlBhcnRpYWxOYXZTZXF1ZW5jZVNldChuYXZEYXRhLCBcclxuICAgICAgICAgICAgICAgIGN1cnJlbnRQYXJ0aWFsTmF2U2VxdWVuY2VSZXN1bHRNYXApKTtcclxuICAgICAgICBjb25zdCBuZXh0UGFydGlhbE5hdlNlcXVlbmNlUmVzdWx0TWFwID0gbWFrZURlZmF1bHRIYXNoTWFwPFBhcnRpYWxOYXZTZXF1ZW5jZSwgVHJhY2tlZE5hdlNlcXVlbmNlPigpO1xyXG4gICAgICAgIG5leHRQYXJ0aWFsTmF2U2VxdWVuY2VSZXN1bHRNYXAucHV0TWFueShcclxuICAgICAgICAgICAgICAgIHRoaXMuZmluZEZpcnN0SW5OYXZTZXF1ZW5jZXMoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5leHRQYXJ0aWFsTmF2U2VxdWVuY2VTZXQsIG5hdkRhdGEpKTtcclxuICAgICAgICBuZXh0UGFydGlhbE5hdlNlcXVlbmNlUmVzdWx0TWFwLnB1dE1hbnkoXHJcbiAgICAgICAgICAgICAgICB0aGlzLmZpbmROZXh0SW5OYXZTZXF1ZW5jZXMoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRQYXJ0aWFsTmF2U2VxdWVuY2VSZXN1bHRNYXAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5leHRQYXJ0aWFsTmF2U2VxdWVuY2VTZXQsIG5hdkRhdGEpKTtcclxuICAgICAgICByZXR1cm4gbmV4dFBhcnRpYWxOYXZTZXF1ZW5jZVJlc3VsdE1hcDtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGZpbmRDb250ZW50VHlwZShuYXZpZ2F0aW9uOiBOYXZQYXR0ZXJuKTogTWF5YmU8Q29udGVudFR5cGU+IHtcclxuICAgICAgICBpZiAobm9uZShuYXZpZ2F0aW9uLmFzQ29udGVudFR5cGUpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBuYXZpZ2F0aW9uLmFzQ29udGVudFR5cGUuY29udGVudFR5cGU7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBmaW5kTmV4dEluTmF2U2VxdWVuY2VXaXRoQ29udGVudFR5cGUoXHJcbiAgICAgICAgICAgIGN1cnJlbnRQYXJ0aWFsTmF2U2VxdWVuY2U6IFBhcnRpYWxOYXZTZXF1ZW5jZSxcclxuICAgICAgICAgICAgdHJhY2tlZE5hdlNlcXVlbmNlOiBUcmFja2VkTmF2U2VxdWVuY2UsXHJcbiAgICAgICAgICAgIG5hdkRhdGE6IE5hdkRhdGEpOiBNYXliZTxbUGFydGlhbE5hdlNlcXVlbmNlLCBUcmFja2VkTmF2U2VxdWVuY2VdPiB7XHJcbiAgICAgICAgY29uc3QgbmV4dEluU2VxdWVuY2UgPSB0aGlzLmZpbmROZXh0SW5Db21wbGV0ZU5hdlNlcXVlbmNlKGN1cnJlbnRQYXJ0aWFsTmF2U2VxdWVuY2UpO1xyXG4gICAgICAgIGlmIChub25lKG5leHRJblNlcXVlbmNlKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBbbmV4dE5hdmlnYXRpb24sIG5leHRQYXJ0aWFsTmF2U2VxdWVuY2VdID0gbmV4dEluU2VxdWVuY2U7XHJcbiAgICAgICAgY29uc3QgbmV4dENvbnRlbnRUeXBlID0gdGhpcy5maW5kQ29udGVudFR5cGUobmV4dE5hdmlnYXRpb24pO1xyXG4gICAgICAgIGlmIChub25lKG5leHRDb250ZW50VHlwZSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFtjdXJyZW50UGFydGlhbE5hdlNlcXVlbmNlLCB0cmFja2VkTmF2U2VxdWVuY2VdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBjb250ZW50VHlwZSA9IG5hdkRhdGEuY29udGVudFR5cGU7XHJcbiAgICAgICAgaWYgKG5vbmUoY29udGVudFR5cGUpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChjb250ZW50VHlwZSA9PT0gbmV4dENvbnRlbnRUeXBlKSB7XHJcbiAgICAgICAgICAgIHRyYWNrZWROYXZTZXF1ZW5jZS5wdXNoKG5hdkRhdGEsIG5leHRQYXJ0aWFsTmF2U2VxdWVuY2UpO1xyXG4gICAgICAgICAgICByZXR1cm4gW25leHRQYXJ0aWFsTmF2U2VxdWVuY2UsIHRyYWNrZWROYXZTZXF1ZW5jZV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSAqZmluZE5leHRJbk5hdlNlcXVlbmNlc1dpdGhDb250ZW50VHlwZShuYXZEYXRhOiBOYXZEYXRhLFxyXG4gICAgICAgICAgICBjdXJyZW50UGFydGlhbE5hdlNlcXVlbmNlUmVzdWx0TWFwOiBQYXJ0aWFsTmF2U2VxdWVuY2VSZXN1bHRNYXApOiBJdGVyYWJsZUl0ZXJhdG9yPFtQYXJ0aWFsTmF2U2VxdWVuY2UsIFRyYWNrZWROYXZTZXF1ZW5jZV0+IHtcclxuICAgICAgICBmb3IgKGNvbnN0IFtjdXJyZW50UGFydGlhbE5hdlNlcXVlbmNlLCB0cmFja2VkTmF2U2VxdWVuY2VdIG9mIGN1cnJlbnRQYXJ0aWFsTmF2U2VxdWVuY2VSZXN1bHRNYXApIHtcclxuICAgICAgICAgICAgY29uc3QgbmV4dEluU2VxdWVuY2UgPSB0aGlzLmZpbmROZXh0SW5OYXZTZXF1ZW5jZVdpdGhDb250ZW50VHlwZShjdXJyZW50UGFydGlhbE5hdlNlcXVlbmNlLCB0cmFja2VkTmF2U2VxdWVuY2UsIG5hdkRhdGEpO1xyXG4gICAgICAgICAgICBpZiAoc29tZShuZXh0SW5TZXF1ZW5jZSkpIHtcclxuICAgICAgICAgICAgICAgIHlpZWxkIG5leHRJblNlcXVlbmNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGRldGVjdE5hdlNlcXVlbmNlV2l0aENvbnRlbnRUeXBlKG5hdkRhdGE6IE5hdkRhdGEsXHJcbiAgICAgICAgICAgIGN1cnJlbnRQYXJ0aWFsTmF2U2VxdWVuY2VSZXN1bHRNYXA6IFBhcnRpYWxOYXZTZXF1ZW5jZVJlc3VsdE1hcCk6IFBhcnRpYWxOYXZTZXF1ZW5jZVJlc3VsdE1hcCB7XHJcbiAgICAgICAgY29uc3QgbmV4dFBhcnRpYWxOYXZTZXF1ZW5jZVJlc3VsdE1hcCA9IG1ha2VEZWZhdWx0SGFzaE1hcDxQYXJ0aWFsTmF2U2VxdWVuY2UsIFRyYWNrZWROYXZTZXF1ZW5jZT4oKTtcclxuICAgICAgICBuZXh0UGFydGlhbE5hdlNlcXVlbmNlUmVzdWx0TWFwLnB1dE1hbnkoXHJcbiAgICAgICAgICAgICAgICB0aGlzLmZpbmROZXh0SW5OYXZTZXF1ZW5jZXNXaXRoQ29udGVudFR5cGUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hdkRhdGEsIGN1cnJlbnRQYXJ0aWFsTmF2U2VxdWVuY2VSZXN1bHRNYXApKTtcclxuICAgICAgICByZXR1cm4gbmV4dFBhcnRpYWxOYXZTZXF1ZW5jZVJlc3VsdE1hcDtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGNvbXBsZXRlTmF2U2VxdWVuY2VNYXAgPSBuZXcgTWFwPE5hdlNlcXVlbmNlSWQsIENvbXBsZXRlTmF2U2VxdWVuY2U+KCk7XHJcbiAgICBwcml2YXRlIHBhcnRpYWxOYXZTZXF1ZW5jZU1hcCA9IG5ldyBIYXNoTWFwPE5hdmlnYXRpb24sIFBhcnRpYWxOYXZTZXF1ZW5jZVNldD4oaGFzaE5hdmlnYXRpb24sIGlzU2FtZU5hdmlnYXRpb24pO1xyXG4gICAgcHJpdmF0ZSBpZEdlbmVyYXRvciA9IG5ldyBJZEdlbmVyYXRvcigpO1xyXG59XHJcblxyXG50eXBlIE9uTmF2aWdhdGlvbiA9IChuYXZpZ2F0aW9uOiBOYXZEYXRhKSA9PiB2b2lkO1xyXG5cclxuY2xhc3MgVGFiTmF2U2VxdWVuY2Uge1xyXG4gICAgY29uc3RydWN0b3IocmVhZG9ubHkgdGFiSWQ6IFRhYklkKSB7fVxyXG5cclxuICAgIG9uUGFyZW50VGFiKHVybDogVVJMLCBvcmlnaW46IE9yaWdpbiwgY2F0ZWdvcnk6IFVybENhdGVnb3J5LCBncm91cHM6IEdyb3VwTmFtZVtdKSB7XHJcbiAgICAgICAgY29uc3QgbmF2aWdhdGlvbiA9IG5ldyBOYXZEYXRhKE5hdlR5cGUucGFyZW50VGFiLCB1cmwsIG9yaWdpbiwgY2F0ZWdvcnksIGdyb3Vwcyk7XHJcbiAgICAgICAgdGhpcy5vbk5hdmlnYXRpb24obmF2aWdhdGlvbik7XHJcbiAgICB9XHJcblxyXG4gICAgb25OYXZpZ2F0ZSh1cmw6IFVSTCwgb3JpZ2luOiBNYXliZTxPcmlnaW4+LCBjYXRlZ29yeTogVXJsQ2F0ZWdvcnksIGdyb3VwczogR3JvdXBOYW1lW10sIGlzTmV3VGFiOiBib29sZWFuLCBkaWRVc2VyQ3JlYXRlVGFiOiBib29sZWFuKSB7XHJcbiAgICAgICAgY29uc3QgbmF2aWdhdGlvbiA9IG5ldyBOYXZEYXRhKE5hdlR5cGUubmF2aWdhdGlvbiwgdXJsLCBvcmlnaW4sIGNhdGVnb3J5LCBncm91cHMpO1xyXG4gICAgICAgIG5hdmlnYXRpb24uaXNOZXdUYWIgPSBpc05ld1RhYjtcclxuICAgICAgICBuYXZpZ2F0aW9uLmRpZFVzZXJDcmVhdGVUYWIgPSBkaWRVc2VyQ3JlYXRlVGFiO1xyXG4gICAgICAgIHRoaXMub25OYXZpZ2F0aW9uKG5hdmlnYXRpb24pO1xyXG4gICAgfVxyXG5cclxuICAgIG9uUmVkaXJlY3QodXJsOiBVUkwsIG9yaWdpbjogTWF5YmU8T3JpZ2luPiwgY2F0ZWdvcnk6IFVybENhdGVnb3J5LCBncm91cHM6IEdyb3VwTmFtZVtdKSB7XHJcbiAgICAgICAgY29uc3QgbmF2aWdhdGlvbiA9IG5ldyBOYXZEYXRhKE5hdlR5cGUucmVkaXJlY3QsIHVybCwgb3JpZ2luLCBjYXRlZ29yeSwgZ3JvdXBzKTtcclxuICAgICAgICB0aGlzLm9uTmF2aWdhdGlvbihuYXZpZ2F0aW9uKTtcclxuICAgIH1cclxuXHJcbiAgICBvbkNvbnRlbnRUeXBlKHVybDogVVJMLCBvcmlnaW46IE1heWJlPE9yaWdpbj4sIGNhdGVnb3J5OiBVcmxDYXRlZ29yeSwgZ3JvdXBzOiBHcm91cE5hbWVbXSwgY29udGVudFR5cGU6IE1heWJlPENvbnRlbnRUeXBlPikge1xyXG4gICAgICAgIGNvbnN0IG5hdmlnYXRpb24gPSBuZXcgTmF2RGF0YShOYXZUeXBlLmNvbnRlbnRUeXBlLCB1cmwsIG9yaWdpbiwgY2F0ZWdvcnksIGdyb3Vwcyk7XHJcbiAgICAgICAgbmF2aWdhdGlvbi5jb250ZW50VHlwZSA9IGNvbnRlbnRUeXBlO1xyXG4gICAgICAgIHRoaXMub25OYXZpZ2F0aW9uKG5hdmlnYXRpb24pO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgb25OYXZpZ2F0aW9uKG5hdmlnYXRpb246IE5hdkRhdGEpIHtcclxuICAgICAgICB0aGlzLm5hdlNlcXVlbmNlLnB1c2gobmF2aWdhdGlvbik7XHJcbiAgICAgICAgdGhpcy5ub3RpZnlMaXN0ZW5lcnMobmF2aWdhdGlvbik7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBub3RpZnlMaXN0ZW5lcnMobmF2aWdhdGlvbjogTmF2RGF0YSkge1xyXG4gICAgICAgIGZvciAoY29uc3Qgb25OYXZpZ2F0aW9uIG9mIHRoaXMubmF2TGlzdGVuZXJzKSB7XHJcbiAgICAgICAgICAgIG9uTmF2aWdhdGlvbihuYXZpZ2F0aW9uKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgYWRkTGlzdGVuZXIob25OYXZpZ2F0aW9uOiBPbk5hdmlnYXRpb24pIHtcclxuICAgICAgICBmb3IgKGNvbnN0IG5hdmlnYXRpb24gb2YgdGhpcy5uYXZTZXF1ZW5jZSkge1xyXG4gICAgICAgICAgICBvbk5hdmlnYXRpb24obmF2aWdhdGlvbik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMubmF2TGlzdGVuZXJzLnB1c2gob25OYXZpZ2F0aW9uKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgaXNOZXdUYWIoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIGlzRW1wdHkodGhpcy5uYXZTZXF1ZW5jZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVzZXQoKSB7XHJcbiAgICAgICAgdGhpcy5uYXZTZXF1ZW5jZSA9IFtdO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgbmF2U2VxdWVuY2UgPSBuZXcgQXJyYXk8TmF2RGF0YT4oKTtcclxuICAgIHByaXZhdGUgbmF2TGlzdGVuZXJzID0gbmV3IEFycmF5PE9uTmF2aWdhdGlvbj4oKTtcclxufVxyXG5cclxuY2xhc3MgVGFiTmF2U2VxdWVuY2VEZXRlY3RvciB7XHJcbiAgICBjb25zdHJ1Y3RvcihyZWFkb25seSB0YWJJZDogVGFiSWQsIHRhYk5hdlNlcXVlbmNlOiBUYWJOYXZTZXF1ZW5jZSwgcHJpdmF0ZSBuYXZTZXF1ZW5jZURldGVjdG9yOiBOYXZTZXF1ZW5jZURldGVjdG9yKSB7XHJcbiAgICAgICAgdGFiTmF2U2VxdWVuY2UuYWRkTGlzdGVuZXIoKG5hdmlnYXRpb246IE5hdkRhdGEpID0+IHRoaXMub25OYXZpZ2F0aW9uKG5hdmlnYXRpb24pKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIG9uTmF2aWdhdGlvbihuYXZpZ2F0aW9uOiBOYXZEYXRhKSB7XHJcbiAgICAgICAgY29uc3QgaXNQYXJlbnRUYWIgPSAobmF2aWdhdGlvbi50eXBlID09PSBOYXZUeXBlLnBhcmVudFRhYik7XHJcbiAgICAgICAgY29uc3QgaXNGaXJzdE5hdmlnYXRpb24gPSAodGhpcy5uYXZpZ2F0aW9uQ291bnQgPT09IDApO1xyXG4gICAgICAgIGlmIChpc1BhcmVudFRhYiAmJiAhaXNGaXJzdE5hdmlnYXRpb24pIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLm5hdmlnYXRpb25Db3VudCArPSAxO1xyXG4gICAgICAgIHRoaXMucGFydGlhbE5hdlNlcXVlbmNlUmVzdWx0TWFwID0gdGhpcy5kZXRlY3ROYXZTZXF1ZW5jZShuYXZpZ2F0aW9uKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGRldGVjdE5hdlNlcXVlbmNlKG5hdmlnYXRpb246IE5hdkRhdGEpOiBQYXJ0aWFsTmF2U2VxdWVuY2VSZXN1bHRNYXAge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm5hdlNlcXVlbmNlRGV0ZWN0b3IuZGV0ZWN0TmF2U2VxdWVuY2UobmF2aWdhdGlvbiwgdGhpcy5wYXJ0aWFsTmF2U2VxdWVuY2VSZXN1bHRNYXApO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZmluZERldGVjdGVkTmF2U2VxdWVuY2VzKGRvSW5jbHVkZU5hdlNlcXVlbmNlOiAocGFydGlhbE5hdlNlcXVlbmNlOiBQYXJ0aWFsTmF2U2VxdWVuY2UpID0+IGJvb2xlYW4pOiBUcmFja2VkTmF2U2VxdWVuY2VbXSB7XHJcbiAgICAgICAgY29uc3QgZGV0ZWN0ZWROYXZTZXF1ZW5jZXM6IFRyYWNrZWROYXZTZXF1ZW5jZVtdID0gW107XHJcbiAgICAgICAgZm9yIChjb25zdCBbcGFydGlhbE5hdlNlcXVlbmNlLCB0cmFja2VkTmF2U2VxdWVuY2VdIG9mIHRoaXMucGFydGlhbE5hdlNlcXVlbmNlUmVzdWx0TWFwKSB7XHJcbiAgICAgICAgICAgIGlmIChkb0luY2x1ZGVOYXZTZXF1ZW5jZShwYXJ0aWFsTmF2U2VxdWVuY2UpKSB7XHJcbiAgICAgICAgICAgICAgICBkZXRlY3RlZE5hdlNlcXVlbmNlcy5wdXNoKHRyYWNrZWROYXZTZXF1ZW5jZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGRldGVjdGVkTmF2U2VxdWVuY2VzO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBkZXRlY3RlZE5hdlNlcXVlbmNlcygpOiBUcmFja2VkTmF2U2VxdWVuY2VbXSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZmluZERldGVjdGVkTmF2U2VxdWVuY2VzKChwYXJ0aWFsTmF2U2VxdWVuY2UpID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHBhcnRpYWxOYXZTZXF1ZW5jZS5pc0NvbXBsZXRlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBwb3NzaWJseURldGVjdGVkTmF2U2VxdWVuY2VzKCk6IFRyYWNrZWROYXZTZXF1ZW5jZVtdIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5maW5kRGV0ZWN0ZWROYXZTZXF1ZW5jZXMoKHBhcnRpYWxOYXZTZXF1ZW5jZSkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gcGFydGlhbE5hdlNlcXVlbmNlLmlzUGFydGlhbDtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICByZXNldCgpIHtcclxuICAgICAgICB0aGlzLnBhcnRpYWxOYXZTZXF1ZW5jZVJlc3VsdE1hcCA9IG1ha2VEZWZhdWx0SGFzaE1hcDxQYXJ0aWFsTmF2U2VxdWVuY2UsIFRyYWNrZWROYXZTZXF1ZW5jZT4oKTtcclxuICAgICAgICB0aGlzLm5hdmlnYXRpb25Db3VudCA9IDA7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBwYXJ0aWFsTmF2U2VxdWVuY2VSZXN1bHRNYXAgPSBtYWtlRGVmYXVsdEhhc2hNYXA8UGFydGlhbE5hdlNlcXVlbmNlLCBUcmFja2VkTmF2U2VxdWVuY2U+KCk7XHJcbiAgICBwcml2YXRlIG5hdmlnYXRpb25Db3VudCA9IDA7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBQaGlzaGluZ05hdlNlcXVlbmNlRGV0ZWN0b3Ige1xyXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBicm93c2VyOiBNYXliZTxCcm93c2VyPiwgY29uZmlnTm90aWZpZXI6IElDb25maWdOb3RpZmllciwgdGFiQ2xvc2VkRGlzcGF0Y2hlcjogSVRhYkNsb3NlZE5vdGlmaWVyKSB7XHJcbiAgICAgICAgdGhpcy51cGRhdGVOYXZTZXF1ZW5jZURldGVjdG9yKGJ1aWx0aW5SdWxlcyk7XHJcbiAgICAgICAgY29uZmlnTm90aWZpZXIuYWRkQ29uZmlnTGlzdGVuZXJGb3JLZXkodGhpcy5vbkNvbmZpZ0NoYW5nZWQuYmluZCh0aGlzKSwgQ29uZmlnS2V5LnBoaXNoaW5nTmF2aWdhdGlvblNlcXVlbmNlcyk7XHJcbiAgICAgICAgdGFiQ2xvc2VkRGlzcGF0Y2hlci5yZWdpc3Rlck9uVGFiQ2xvc2VkSGFuZGxlcih0aGlzLm9uVGFiQ2xvc2VkLmJpbmQodGhpcykpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgY2hvb3NlUnVsZXMoc2VyaWFsaXplZFBoaXNoaW5nTmF2U2VxRGF0YTogU2VyaWFsaXplZFBoaXNoaW5nTmF2U2VxRGF0YSk6IFNlcmlhbGl6ZWRQaGlzaGluZ05hdlNlcURhdGEge1xyXG4gICAgICAgIGlmICghaXNWYWxpZFNlcmlhbGl6ZWRQaGlzaGluZ05hdlNlcURhdGEoc2VyaWFsaXplZFBoaXNoaW5nTmF2U2VxRGF0YSkpIHtcclxuICAgICAgICAgICAgbG9nRXJyb3IobmV3IEVycm9yKGBJbnZhbGlkIFNlcmlhbGl6ZWRQaGlzaGluZ05hdlNlcURhdGE6ICR7dG9TdHJpbmcoc2VyaWFsaXplZFBoaXNoaW5nTmF2U2VxRGF0YSl9YCkpO1xyXG4gICAgICAgICAgICByZXR1cm4gYnVpbHRpblJ1bGVzO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIWNoZWNrVmVyc2lvbihzZXJpYWxpemVkUGhpc2hpbmdOYXZTZXFEYXRhLCBDb25maWcucGhpc2hpbmdOYXZpZ2F0aW9uU2VxdWVuY2VzVmVyc2lvbigpKSkge1xyXG4gICAgICAgICAgICBsb2dFcnJvcihuZXcgRXJyb3IoYEZhaWxlZCB0byBjaGVjayB2ZXJzaW9uOiAke3RvU3RyaW5nKHNlcmlhbGl6ZWRQaGlzaGluZ05hdlNlcURhdGEpfWApKTtcclxuICAgICAgICAgICAgcmV0dXJuIGJ1aWx0aW5SdWxlcztcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHNlcmlhbGl6ZWRQaGlzaGluZ05hdlNlcURhdGE7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSB1cGRhdGVOYXZTZXF1ZW5jZURldGVjdG9yKHNlcmlhbGl6ZWRQaGlzaGluZ05hdlNlcURhdGE6IFNlcmlhbGl6ZWRQaGlzaGluZ05hdlNlcURhdGEpIHtcclxuICAgICAgICBjb25zdCBydWxlcyA9IHRoaXMuY2hvb3NlUnVsZXMoc2VyaWFsaXplZFBoaXNoaW5nTmF2U2VxRGF0YSk7XHJcbiAgICAgICAgdGhpcy5idWlsdGluUnVsZXNQcmVjZWRlbmNlID0gcnVsZXMuYnVpbHRpblJ1bGVzUHJlY2VkZW5jZTtcclxuICAgICAgICBjb25zdCBwYXJzZWRQaGlzaGluZ05hdlNlcXVlbmNlcyA9IHJ1bGVzLnNlcXMubWFwKHBhcnNlTmF2U2VxRGF0YSk7XHJcbiAgICAgICAgaWYgKHBhcnNlZFBoaXNoaW5nTmF2U2VxdWVuY2VzLnNvbWUobm9uZSkpIHtcclxuICAgICAgICAgICAgbG9nRXJyb3IobmV3IEVycm9yKGBGYWlsZWQgdG8gcGFyc2UgcGhpc2hpbmdOYXZpZ2F0aW9uU2VxdWVuY2VzOiAke3RvU3RyaW5nKHJ1bGVzKX1gKSk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgcGhpc2hpbmdOYXZpZ2F0aW9uU2VxdWVuY2VzID0gcGFyc2VkUGhpc2hpbmdOYXZTZXF1ZW5jZXMuZmlsdGVyKHNvbWUpO1xyXG4gICAgICAgIGNvbnN0IG5hdlNlcXVlbmNlRGV0ZWN0b3IgPSBuZXcgTmF2U2VxdWVuY2VEZXRlY3RvcihwaGlzaGluZ05hdmlnYXRpb25TZXF1ZW5jZXMpO1xyXG4gICAgICAgIHRoaXMudGFiTmF2U2VxdWVuY2VEZXRlY3RvcnMgPSB0aGlzLm1ha2VUYWJOYXZTZXF1ZW5jZURldGVjdG9ycyhuYXZTZXF1ZW5jZURldGVjdG9yKTtcclxuICAgICAgICB0aGlzLm5hdlNlcXVlbmNlRGV0ZWN0b3IgPSBuYXZTZXF1ZW5jZURldGVjdG9yO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgbWFrZVRhYk5hdlNlcXVlbmNlRGV0ZWN0b3JzKG5hdlNlcXVlbmNlRGV0ZWN0b3I6IE5hdlNlcXVlbmNlRGV0ZWN0b3IpOiBNYXA8VGFiSWQsIFRhYk5hdlNlcXVlbmNlRGV0ZWN0b3I+IHtcclxuICAgICAgICBjb25zdCB0YWJOYXZTZXF1ZW5jZURldGVjdG9ycyA9IG5ldyBNYXA8VGFiSWQsIFRhYk5hdlNlcXVlbmNlRGV0ZWN0b3I+KCk7XHJcbiAgICAgICAgdGhpcy50YWJOYXZTZXF1ZW5jZXMuZm9yRWFjaCgodGFiTmF2U2VxdWVuY2UsIHRhYklkKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRhYk5hdlNlcXVlbmNlRGV0ZWN0b3IgPSBuZXcgVGFiTmF2U2VxdWVuY2VEZXRlY3Rvcih0YWJJZCwgdGFiTmF2U2VxdWVuY2UsIG5hdlNlcXVlbmNlRGV0ZWN0b3IpO1xyXG4gICAgICAgICAgICB0YWJOYXZTZXF1ZW5jZURldGVjdG9ycy5zZXQodGFiSWQsIHRhYk5hdlNlcXVlbmNlRGV0ZWN0b3IpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiB0YWJOYXZTZXF1ZW5jZURldGVjdG9ycztcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIG9uQ29uZmlnQ2hhbmdlZChrZXk6IENvbmZpZ0tleSwgY29uZmlnOiBDb25maWdSZWFkZXIpIHtcclxuICAgICAgICBzd2l0Y2ggKGtleSkge1xyXG4gICAgICAgICAgICBjYXNlIENvbmZpZ0tleS5waGlzaGluZ05hdmlnYXRpb25TZXF1ZW5jZXM6IHtcclxuICAgICAgICAgICAgICAgIGlmIChzb21lKGNvbmZpZy5waGlzaGluZ05hdmlnYXRpb25TZXF1ZW5jZXMpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVOYXZTZXF1ZW5jZURldGVjdG9yKGNvbmZpZy5waGlzaGluZ05hdmlnYXRpb25TZXF1ZW5jZXMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBvblRhYkNsb3NlZCh0YWJJZDogVGFiSWQpIHtcclxuICAgICAgICB0aGlzLnRhYk5hdlNlcXVlbmNlRGV0ZWN0b3JzLmRlbGV0ZSh0YWJJZCk7XHJcbiAgICAgICAgdGhpcy50YWJOYXZTZXF1ZW5jZXMuZGVsZXRlKHRhYklkKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIG9uTmV3VGFiKHRhYklkOiBUYWJJZCkge1xyXG4gICAgICAgIGNvbnN0IHRhYk5hdlNlcXVlbmNlID0gbmV3IFRhYk5hdlNlcXVlbmNlKHRhYklkKTtcclxuICAgICAgICB0aGlzLnRhYk5hdlNlcXVlbmNlcy5zZXQodGFiSWQsIHRhYk5hdlNlcXVlbmNlKTtcclxuICAgICAgICBpZiAoc29tZSh0aGlzLm5hdlNlcXVlbmNlRGV0ZWN0b3IpKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRhYk5hdlNlcXVlbmNlRGV0ZWN0b3IgPSBuZXcgVGFiTmF2U2VxdWVuY2VEZXRlY3Rvcih0YWJJZCwgdGFiTmF2U2VxdWVuY2UsIHRoaXMubmF2U2VxdWVuY2VEZXRlY3Rvcik7XHJcbiAgICAgICAgICAgIHRoaXMudGFiTmF2U2VxdWVuY2VEZXRlY3RvcnMuc2V0KHRhYklkLCB0YWJOYXZTZXF1ZW5jZURldGVjdG9yKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaGFzSGlnaGVyUHJlY2VkZW5jZVRoYW5CdWlsdGluKG5hdlNlcXVlbmNlRGV0ZWN0aW9uczogSU5hdlNlcXVlbmNlRGV0ZWN0aW9ucyk6IGJvb2xlYW4ge1xyXG4gICAgICAgIGlmIChub25lKHRoaXMuYnVpbHRpblJ1bGVzUHJlY2VkZW5jZSkgfHxcclxuICAgICAgICAgICAgbm9uZShuYXZTZXF1ZW5jZURldGVjdGlvbnMucHJlY2VkZW5jZSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbmF2U2VxdWVuY2VEZXRlY3Rpb25zLnByZWNlZGVuY2UgPiB0aGlzLmJ1aWx0aW5SdWxlc1ByZWNlZGVuY2U7XHJcbiAgICB9XHJcblxyXG4gICAgcmVzZXREZXRlY3Rvcih0YWJJZDogVGFiSWQpIHtcclxuICAgICAgICBjb25zdCB0YWJOYXZTZXF1ZW5jZSA9IHRoaXMudGFiTmF2U2VxdWVuY2VzLmdldCh0YWJJZCk7XHJcbiAgICAgICAgaWYgKHNvbWUodGFiTmF2U2VxdWVuY2UpKSB7XHJcbiAgICAgICAgICAgIHRhYk5hdlNlcXVlbmNlLnJlc2V0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHRhYk5hdlNlcXVlbmNlRGV0ZWN0b3IgPSB0aGlzLnRhYk5hdlNlcXVlbmNlRGV0ZWN0b3JzLmdldCh0YWJJZCk7XHJcbiAgICAgICAgaWYgKHNvbWUodGFiTmF2U2VxdWVuY2VEZXRlY3RvcikpIHtcclxuICAgICAgICAgICAgdGFiTmF2U2VxdWVuY2VEZXRlY3Rvci5yZXNldCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBvblRhYkRldGVjdGVkKHRhYklkOiBUYWJJZCkge1xyXG4gICAgICAgIGlmICh0aGlzLnRhYk5hdlNlcXVlbmNlcy5oYXModGFiSWQpKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5vbk5ld1RhYih0YWJJZCk7XHJcbiAgICB9XHJcblxyXG4gICAgb25QYXJlbnRUYWJEZXRlY3RlZCh0YWJJZDogVGFiSWQsIHVybDogVVJMLCBjYXRlZ29yeTogVXJsQ2F0ZWdvcnksIGdyb3VwczogR3JvdXBOYW1lW10pOiBib29sZWFuIHtcclxuICAgICAgICBjb25zdCB0YWJOYXZTZXF1ZW5jZSA9IHRoaXMudGFiTmF2U2VxdWVuY2VzLmdldCh0YWJJZCk7XHJcbiAgICAgICAgaWYgKG5vbmUodGFiTmF2U2VxdWVuY2UpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCF0YWJOYXZTZXF1ZW5jZS5pc05ld1RhYikge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IG9yaWdpbiA9IHBhcnNlT3JpZ2luKHVybCk7XHJcbiAgICAgICAgaWYgKG5vbmUob3JpZ2luKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRhYk5hdlNlcXVlbmNlLm9uUGFyZW50VGFiKHVybCwgb3JpZ2luLCBjYXRlZ29yeSwgZ3JvdXBzKTtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHBhcnNlT3JpZ2luRm9yQnJvd3Nlcih1cmw6IFVSTCkge1xyXG4gICAgICAgIHN3aXRjaCAodGhpcy5icm93c2VyKSB7XHJcbiAgICAgICAgICAgIGNhc2UgQnJvd3Nlci5jaHJvbWU6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcGFyc2VPcmlnaW4odXJsLCBuZXcgT3JpZ2luUGFyc2VPcHRpb25zKHtcclxuICAgICAgICAgICAgICAgICAgICBhbGxvd0Nocm9tZVNjaGVtZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICBhbGxvd0Nocm9tZUV4dGVuc2lvblNjaGVtZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIH0pKTtcclxuICAgICAgICAgICAgY2FzZSBCcm93c2VyLmZpcmVmb3g6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcGFyc2VPcmlnaW4odXJsLCBuZXcgT3JpZ2luUGFyc2VPcHRpb25zKHtcclxuICAgICAgICAgICAgICAgICAgICBhbGxvd0Fib3V0U2NoZW1lOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIGFsbG93RmlyZWZveEV4dGVuc2lvblNjaGVtZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIH0pKTtcclxuICAgICAgICAgICAgY2FzZSBCcm93c2VyLmVkZ2U6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcGFyc2VPcmlnaW4odXJsLCBuZXcgT3JpZ2luUGFyc2VPcHRpb25zKHtcclxuICAgICAgICAgICAgICAgICAgICBhbGxvd0Fib3V0U2NoZW1lOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIGFsbG93RWRnZUV4dGVuc2lvblNjaGVtZTogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgICAgICBjYXNlIEJyb3dzZXIuZWRnZUNocm9taXVtOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHBhcnNlT3JpZ2luKHVybCwgbmV3IE9yaWdpblBhcnNlT3B0aW9ucyh7XHJcbiAgICAgICAgICAgICAgICAgICAgYWxsb3dFZGdlU2NoZW1lOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIGFsbG93Q2hyb21lU2NoZW1lOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIGFsbG93Q2hyb21lRXh0ZW5zaW9uU2NoZW1lOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgICAgICAvLyBJZiB3ZSBkb24ndCBrbm93IHRoZSBjdXJyZW50IGJyb3dzZXIgdGhlbiBhbGxvdyBub3RoaW5nLlxyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgbG9nRXJyb3IobmV3IEVycm9yKFwiQ3VycmVudCBicm93c2VyIHVua25vd24gaW4gTmF2U2VxdWVuY2VEZXRlY3Rvci5wYXJzZU9yaWdpbkZvckJyb3dzZXJcIikpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHBhcnNlT3JpZ2luKHVybCwgbmV3IE9yaWdpblBhcnNlT3B0aW9ucygpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBvbkV2ZW50KHRhYklkOiBUYWJJZCwgdXJsOiBVUkwsXHJcbiAgICAgICAgICAgIGhhbmRsZUV2ZW50OiAodGFiTmF2U2VxdWVuY2U6IFRhYk5hdlNlcXVlbmNlLCB1cmw6IFVSTCwgb3JpZ2luOiBNYXliZTxPcmlnaW4+KSA9PiB2b2lkKTogSU5hdlNlcXVlbmNlRGV0ZWN0aW9ucyB7XHJcbiAgICAgICAgY29uc3QgdGFiTmF2U2VxdWVuY2UgPSB0aGlzLnRhYk5hdlNlcXVlbmNlcy5nZXQodGFiSWQpO1xyXG4gICAgICAgIGlmIChub25lKHRhYk5hdlNlcXVlbmNlKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEVtcHR5TmF2U2VxdWVuY2VEZXRlY3Rpb25zKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBvcmlnaW4gPSB0aGlzLnBhcnNlT3JpZ2luRm9yQnJvd3Nlcih1cmwpO1xyXG4gICAgICAgIGhhbmRsZUV2ZW50KHRhYk5hdlNlcXVlbmNlLCB1cmwsIG9yaWdpbik7XHJcbiAgICAgICAgY29uc3QgdGFiTmF2U2VxdWVuY2VEZXRlY3RvciA9IHRoaXMudGFiTmF2U2VxdWVuY2VEZXRlY3RvcnMuZ2V0KHRhYklkKTtcclxuICAgICAgICBpZiAobm9uZSh0YWJOYXZTZXF1ZW5jZURldGVjdG9yKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEVtcHR5TmF2U2VxdWVuY2VEZXRlY3Rpb25zKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBuZXcgTmF2U2VxdWVuY2VEZXRlY3Rpb25zKFxyXG4gICAgICAgICAgICAgICAgdGFiTmF2U2VxdWVuY2VEZXRlY3Rvci5kZXRlY3RlZE5hdlNlcXVlbmNlcyxcclxuICAgICAgICAgICAgICAgIHRhYk5hdlNlcXVlbmNlRGV0ZWN0b3IucG9zc2libHlEZXRlY3RlZE5hdlNlcXVlbmNlcyk7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIG9uTmF2aWdhdGUodGFiSWQ6IFRhYklkLCB1cmw6IFVSTCwgY2F0ZWdvcnk6IFVybENhdGVnb3J5LCBncm91cHM6IEdyb3VwTmFtZVtdLCBpc05ld1RhYjogYm9vbGVhbiwgZGlkVXNlckNyZWF0ZVRhYjogYm9vbGVhbik6IElOYXZTZXF1ZW5jZURldGVjdGlvbnMge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm9uRXZlbnQodGFiSWQsIHVybCwgKHRhYk5hdlNlcXVlbmNlLCB1cmwsIG9yaWdpbikgPT4ge1xyXG4gICAgICAgICAgICB0YWJOYXZTZXF1ZW5jZS5vbk5hdmlnYXRlKHVybCwgb3JpZ2luLCBjYXRlZ29yeSwgZ3JvdXBzLCBpc05ld1RhYiwgZGlkVXNlckNyZWF0ZVRhYik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgb25SZWRpcmVjdCh0YWJJZDogVGFiSWQsIHVybDogVVJMLCBjYXRlZ29yeTogVXJsQ2F0ZWdvcnksIGdyb3VwczogR3JvdXBOYW1lW10pOiBJTmF2U2VxdWVuY2VEZXRlY3Rpb25zIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5vbkV2ZW50KHRhYklkLCB1cmwsICh0YWJOYXZTZXF1ZW5jZSwgdXJsLCBvcmlnaW4pID0+IHtcclxuICAgICAgICAgICAgdGFiTmF2U2VxdWVuY2Uub25SZWRpcmVjdCh1cmwsIG9yaWdpbiwgY2F0ZWdvcnksIGdyb3Vwcyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgb25Db250ZW50VHlwZSh0YWJJZDogVGFiSWQsIHVybDogVVJMLCBjYXRlZ29yeTogVXJsQ2F0ZWdvcnksIGdyb3VwczogR3JvdXBOYW1lW10sIGNvbnRlbnRUeXBlOiBNYXliZTxDb250ZW50VHlwZT4pOiBJTmF2U2VxdWVuY2VEZXRlY3Rpb25zIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5vbkV2ZW50KHRhYklkLCB1cmwsICh0YWJOYXZTZXF1ZW5jZSwgdXJsLCBvcmlnaW4pID0+IHtcclxuICAgICAgICAgICAgdGFiTmF2U2VxdWVuY2Uub25Db250ZW50VHlwZSh1cmwsIG9yaWdpbiwgY2F0ZWdvcnksIGdyb3VwcywgY29udGVudFR5cGUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgbmF2U2VxdWVuY2VEZXRlY3RvcjogTWF5YmU8TmF2U2VxdWVuY2VEZXRlY3Rvcj47XHJcbiAgICBwcml2YXRlIHRhYk5hdlNlcXVlbmNlcyA9IG5ldyBNYXA8VGFiSWQsIFRhYk5hdlNlcXVlbmNlPigpO1xyXG4gICAgcHJpdmF0ZSB0YWJOYXZTZXF1ZW5jZURldGVjdG9ycyA9IG5ldyBNYXA8VGFiSWQsIFRhYk5hdlNlcXVlbmNlRGV0ZWN0b3I+KCk7XHJcbiAgICBwcml2YXRlIGJ1aWx0aW5SdWxlc1ByZWNlZGVuY2U6IE1heWJlPG51bWJlcj4gPSB1bmRlZmluZWQ7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNvbXBhcmVIaWdoZXIoYTogbnVtYmVyLCBiOiBudW1iZXIpOiBudW1iZXIge1xyXG4gICAgaWYgKGEgPiBiKSB7XHJcbiAgICAgICAgcmV0dXJuIC0xO1xyXG4gICAgfSBlbHNlIGlmIChhIDwgYikge1xyXG4gICAgICAgIHJldHVybiAxO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gMDtcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gY29tcGFyZVRyYWNrZWROYXZTZXF1ZW5jZXMoYTogVHJhY2tlZE5hdlNlcXVlbmNlLCBiOiBUcmFja2VkTmF2U2VxdWVuY2UpOiBudW1iZXIge1xyXG4gICAgY29uc3QgYVByZWNlZGVuY2UgPSBhLnByZWNlZGVuY2U7XHJcbiAgICBjb25zdCBiUHJlY2VkZW5jZSA9IGIucHJlY2VkZW5jZTtcclxuICAgIGlmIChub25lKGFQcmVjZWRlbmNlKSB8fCBub25lKGJQcmVjZWRlbmNlKSkge1xyXG4gICAgICAgIHJldHVybiAwO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGNvbXBhcmVIaWdoZXIoYVByZWNlZGVuY2UsIGJQcmVjZWRlbmNlKTtcclxufVxyXG5cclxuZnVuY3Rpb24gc29ydERldGVjdGVkTmF2U2VxdWVuY2VzKGRldGVjdGVkTmF2U2VxdWVuY2VzOiBUcmFja2VkTmF2U2VxdWVuY2VbXSk6IFRyYWNrZWROYXZTZXF1ZW5jZVtdIHtcclxuICAgIGlmIChpc0VtcHR5KGRldGVjdGVkTmF2U2VxdWVuY2VzKSkge1xyXG4gICAgICAgIHJldHVybiBbXTtcclxuICAgIH1cclxuICAgIHJldHVybiBkZXRlY3RlZE5hdlNlcXVlbmNlcy5zb3J0KGNvbXBhcmVUcmFja2VkTmF2U2VxdWVuY2VzKTtcclxufVxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL25hdi1zZXF1ZW5jZS1kZXRlY3Rvci50cyIsIi8vIENvcHlyaWdodCAoYykgMjAxOCBCcm9taXVtLCBJbmMuXHJcbi8vIFVzZSBvZiB0aGUgQnJvbWl1bSwgSW5jLiBzb2Z0d2FyZSByZXF1aXJlcyBhIGxpY2Vuc2UgYWdyZWVtZW50IHdpdGggQnJvbWl1bSwgSW5jLiBvciBhbiBhdXRob3JpemVkIHJlc2VsbGVyLlxyXG5cclxuaW1wb3J0IHsgSHR0cE1ldGhvZFR5cGUgfSBmcm9tIFwiLi9odHRwLW1ldGhvZFwiO1xyXG5pbXBvcnQgeyBPcmlnaW5NYXRjaGVyLCBwYXJzZU9yaWdpbk1hdGNoZXIsIE9yaWdpbiwgT3JpZ2luR3JvdXBlciwgT3JpZ2luUGFyc2VPcHRpb25zIH0gZnJvbSBcIi4vb3JpZ2luXCI7XHJcbmltcG9ydCB7IFNlcmlhbGl6ZWRQaGlzaGluZ1NvdXJjZVNpdGVzLCBTZXJpYWxpemVkUGhpc2hpbmdHcm91cHMgfSBmcm9tIFwiLi9zZXJpYWxpemVkLXBoaXNoaW5nLXNvdXJjZS1zaXRlc1wiO1xyXG5pbXBvcnQgeyBIYXNoTWFwLCBtYWtlRGVmYXVsdEhhc2hNYXAsIEhhc2hhYmxlIH0gZnJvbSBcIi4vaGFzaC1tYXBcIjtcclxuaW1wb3J0IHsgTWF5YmUsIG5vbmUgfSBmcm9tIFwiLi9tYXliZVwiO1xyXG5pbXBvcnQgeyBDb25maWcgfSBmcm9tIFwiLi9jb25maWdcIjtcclxuaW1wb3J0IHsgbG9nRXJyb3IgfSBmcm9tIFwiLi9sb2dcIjtcclxuaW1wb3J0IHsgTmF2VHlwZSwgR3JvdXBOYW1lIH0gZnJvbSBcIi4vbmF2LXNlcXVlbmNlLXBhcnNlclwiO1xyXG5pbXBvcnQgeyBIYXNoIH0gZnJvbSBcIi4vaGFzaFwiO1xyXG5pbXBvcnQgeyBtdXJtdXJIYXNoIH0gZnJvbSBcIi4vbXVybXVyLWhhc2hcIjtcclxuaW1wb3J0IHsgbWFrZVN0cmluZ0hhc2hTZXQgfSBmcm9tIFwiLi9zdHJpbmctdXRpbHNcIjtcclxuXHJcbmV4cG9ydCBlbnVtIFRhYlR5cGUge1xyXG4gICAgbmV3VGFiLFxyXG4gICAgc2FtZVRhYlxyXG59XHJcblxyXG5jbGFzcyBQaGlzaGluZ1NvdXJjZVNpdGVzS2V5IGltcGxlbWVudHMgSGFzaGFibGU8UGhpc2hpbmdTb3VyY2VTaXRlc0tleT4ge1xyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAgICAgICAgIHJlYWRvbmx5IHRhYlR5cGU6IFRhYlR5cGUsIFxyXG4gICAgICAgICAgICByZWFkb25seSBuYXZUeXBlOiBOYXZUeXBlLFxyXG4gICAgICAgICAgICByZWFkb25seSBtZXRob2RUeXBlOiBIdHRwTWV0aG9kVHlwZSkgeyB9XHJcblxyXG4gICAgaGFzaFdpdGhTZWVkKHNlZWQ6IEhhc2gpOiBIYXNoIHtcclxuICAgICAgICBsZXQgaGFzaCA9IHNlZWQ7XHJcbiAgICAgICAgaGFzaCA9IG11cm11ckhhc2godGhpcy50YWJUeXBlLCBoYXNoKTtcclxuICAgICAgICBoYXNoID0gbXVybXVySGFzaCh0aGlzLm5hdlR5cGUsIGhhc2gpO1xyXG4gICAgICAgIGhhc2ggPSBtdXJtdXJIYXNoKHRoaXMubWV0aG9kVHlwZSwgaGFzaCk7XHJcbiAgICAgICAgcmV0dXJuIGhhc2g7XHJcbiAgICB9XHJcblxyXG4gICAgaGFzaCgpOiBIYXNoIHtcclxuICAgICAgICBjb25zdCBzZWVkID0gMDtcclxuICAgICAgICByZXR1cm4gdGhpcy5oYXNoV2l0aFNlZWQoc2VlZCk7XHJcbiAgICB9XHJcblxyXG4gICAgY29tcGFyZShvdGhlcjogUGhpc2hpbmdTb3VyY2VTaXRlc0tleSk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiAodGhpcy50YWJUeXBlID09PSBvdGhlci50YWJUeXBlKSAmJlxyXG4gICAgICAgICAgICAgICAgKHRoaXMubmF2VHlwZSA9PT0gb3RoZXIubmF2VHlwZSkgJiZcclxuICAgICAgICAgICAgICAgICh0aGlzLm1ldGhvZFR5cGUgPT09IG90aGVyLm1ldGhvZFR5cGUpO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElHcm91cEZpbmRlciB7XHJcbiAgICBmaW5kR3JvdXBzKG9yaWdpbjogT3JpZ2luKTogR3JvdXBOYW1lW107XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSVBoaXNoaW5nU291cmNlU2l0ZXMgZXh0ZW5kcyBJR3JvdXBGaW5kZXIge1xyXG4gICAgaXNQaGlzaGluZ1NvdXJjZVNpdGUob3JpZ2luOiBPcmlnaW4pOiBib29sZWFuO1xyXG4gICAgaXNXZWJNYWlsU2l0ZShvcmlnaW46IE9yaWdpbik6IGJvb2xlYW47XHJcbiAgICBzaXRlUmVxdWlyZXNBdXRoKG9yaWdpbjogT3JpZ2luKTogYm9vbGVhbjtcclxuICAgIGlzQXV0aFNpdGUob3JpZ2luOiBPcmlnaW4pOiBib29sZWFuO1xyXG4gICAgc2hvdWxkQmxvY2tOYXZpZ2F0aW9uKHRhYlR5cGU6IFRhYlR5cGUsIG5hdlR5cGU6IE5hdlR5cGUsIG1ldGhvZFR5cGU6IEh0dHBNZXRob2RUeXBlLCBvcmlnaW46IE9yaWdpbik6IGJvb2xlYW47XHJcbiAgICBzaG91bGRFbmFibGVOYXZpZ2F0aW9uUmVxdWVzdFR5cGVIZXVyaXN0aWNzOiBib29sZWFuO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgRW1wdHlQaGlzaGluZ1NvdXJjZVNpdGVzIGltcGxlbWVudHMgSVBoaXNoaW5nU291cmNlU2l0ZXMge1xyXG4gICAgaXNQaGlzaGluZ1NvdXJjZVNpdGUob3JpZ2luOiBPcmlnaW4pOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgaXNXZWJNYWlsU2l0ZShvcmlnaW46IE9yaWdpbik6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBzaXRlUmVxdWlyZXNBdXRoKG9yaWdpbjogT3JpZ2luKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIGlzQXV0aFNpdGUob3JpZ2luOiBPcmlnaW4pOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgZmluZEdyb3VwcyhvcmlnaW46IE9yaWdpbik6IEdyb3VwTmFtZVtdIHtcclxuICAgICAgICByZXR1cm4gW107XHJcbiAgICB9XHJcblxyXG4gICAgc2hvdWxkQmxvY2tOYXZpZ2F0aW9uKHRhYlR5cGU6IFRhYlR5cGUsIG5hdlR5cGU6IE5hdlR5cGUsIG1ldGhvZFR5cGU6IEh0dHBNZXRob2RUeXBlLCBvcmlnaW46IE9yaWdpbik6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgc2hvdWxkRW5hYmxlUGFnZUlucHV0RXZlbnRIZXVyaXN0aWNzKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBzaG91bGRFbmFibGVOYXZpZ2F0aW9uUmVxdWVzdFR5cGVIZXVyaXN0aWNzKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgUGhpc2hpbmdTb3VyY2VTaXRlcyBpbXBsZW1lbnRzIElQaGlzaGluZ1NvdXJjZVNpdGVzIHtcclxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgc2VyaWFsaXplZFNpdGVzOiBTZXJpYWxpemVkUGhpc2hpbmdTb3VyY2VTaXRlcykge1xyXG4gICAgICAgIHRoaXMucGhpc2hpbmdTb3VyY2VTaXRlcyA9IHRoaXMucGFyc2VPcmlnaW5NYXRjaGVyKHNlcmlhbGl6ZWRTaXRlcy5waGlzaGluZ1NvdXJjZVNpdGVzKTtcclxuICAgICAgICB0aGlzLndlYk1haWxTaXRlcyA9IHRoaXMucGFyc2VPcmlnaW5NYXRjaGVyKHNlcmlhbGl6ZWRTaXRlcy53ZWJNYWlsKTtcclxuICAgICAgICB0aGlzLnJlcXVpcmVBdXRoU2l0ZXMgPSB0aGlzLnBhcnNlT3JpZ2luTWF0Y2hlcihzZXJpYWxpemVkU2l0ZXMuYWR2YW5jZWQucmVxdWlyZUF1dGgpO1xyXG4gICAgICAgIHRoaXMuYXV0aFNpdGVzID0gdGhpcy5wYXJzZU9yaWdpbk1hdGNoZXIoc2VyaWFsaXplZFNpdGVzLmFkdmFuY2VkLmF1dGgpO1xyXG4gICAgICAgIHRoaXMucGFyc2VHcm91cHMoc2VyaWFsaXplZFNpdGVzLmdyb3Vwcyk7XHJcbiAgICAgICAgdGhpcy5kZXNlcmlhbGl6ZUtleWVkU2l0ZXMoc2VyaWFsaXplZFNpdGVzKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGdldCBvcmlnaW5QYXJzZU9wdGlvbnMoKTogT3JpZ2luUGFyc2VPcHRpb25zIHtcclxuICAgICAgICByZXR1cm4gbmV3IE9yaWdpblBhcnNlT3B0aW9ucyh7IFxyXG4gICAgICAgICAgICBhbGxvd1dpbGRjYXJkczogdHJ1ZSwgXHJcbiAgICAgICAgICAgIGFsbG93TWlzc2luZ1dpbGRjYXJkU2NoZW1lOiB0cnVlIFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcGFyc2VPcmlnaW5NYXRjaGVyKHNwZWNMaXN0OiBzdHJpbmdbXSk6IE9yaWdpbk1hdGNoZXIge1xyXG4gICAgICAgIHJldHVybiBwYXJzZU9yaWdpbk1hdGNoZXIoc3BlY0xpc3QsIHRoaXMub3JpZ2luUGFyc2VPcHRpb25zKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHBhcnNlR3JvdXBzKHNlcmlhbGl6ZWRHcm91cHM6IFNlcmlhbGl6ZWRQaGlzaGluZ0dyb3Vwcykge1xyXG4gICAgICAgIGZvciAoY29uc3QgZ3JvdXAgb2YgT2JqZWN0LmtleXMoc2VyaWFsaXplZEdyb3VwcykpIHtcclxuICAgICAgICAgICAgY29uc3Qgc3BlY0xpc3QgPSBzZXJpYWxpemVkR3JvdXBzW2dyb3VwXTtcclxuICAgICAgICAgICAgdGhpcy5ncm91cHMuYWRkRnJvbVNwZWNMaXN0KHNwZWNMaXN0LCBncm91cCwgdGhpcy5vcmlnaW5QYXJzZU9wdGlvbnMpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIG1ha2VLZXkodGFiVHlwZTogVGFiVHlwZSwgbmF2VHlwZTogTmF2VHlwZSwgbWV0aG9kVHlwZTogSHR0cE1ldGhvZFR5cGUpOiBQaGlzaGluZ1NvdXJjZVNpdGVzS2V5IHtcclxuICAgICAgICBjb25zdCBrZXkgPSBuZXcgUGhpc2hpbmdTb3VyY2VTaXRlc0tleSh0YWJUeXBlLCBuYXZUeXBlLCBtZXRob2RUeXBlKTtcclxuICAgICAgICByZXR1cm4ga2V5O1xyXG4gICAgfVxyXG5cclxuICAgIHNob3VsZEJsb2NrTmF2aWdhdGlvbih0YWJUeXBlOiBUYWJUeXBlLCBuYXZUeXBlOiBOYXZUeXBlLCBtZXRob2RUeXBlOiBIdHRwTWV0aG9kVHlwZSwgb3JpZ2luOiBPcmlnaW4pOiBib29sZWFuIHtcclxuICAgICAgICBjb25zdCBrZXkgPSB0aGlzLm1ha2VLZXkodGFiVHlwZSwgbmF2VHlwZSwgbWV0aG9kVHlwZSk7XHJcbiAgICAgICAgY29uc3QgbWF0Y2hlciA9IHRoaXMua2V5ZWRTaXRlcy5nZXQoa2V5KTtcclxuICAgICAgICBpZiAobm9uZShtYXRjaGVyKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBtYXRjaGVyLmhhcyhvcmlnaW4pO1xyXG4gICAgfVxyXG5cclxuICAgIGlzUGhpc2hpbmdTb3VyY2VTaXRlKG9yaWdpbjogT3JpZ2luKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucGhpc2hpbmdTb3VyY2VTaXRlcy5oYXMob3JpZ2luKTtcclxuICAgIH1cclxuXHJcbiAgICBpc1dlYk1haWxTaXRlKG9yaWdpbjogT3JpZ2luKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMud2ViTWFpbFNpdGVzLmhhcyhvcmlnaW4pO1xyXG4gICAgfVxyXG5cclxuICAgIHNpdGVSZXF1aXJlc0F1dGgob3JpZ2luOiBPcmlnaW4pOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5yZXF1aXJlQXV0aFNpdGVzLmhhcyhvcmlnaW4pO1xyXG4gICAgfVxyXG5cclxuICAgIGlzQXV0aFNpdGUob3JpZ2luOiBPcmlnaW4pOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5hdXRoU2l0ZXMuaGFzKG9yaWdpbik7XHJcbiAgICB9XHJcblxyXG4gICAgZmluZEdyb3VwcyhvcmlnaW46IE9yaWdpbik6IEdyb3VwTmFtZVtdIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5ncm91cHMubWF0Y2gob3JpZ2luKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgc2hvdWxkRW5hYmxlUGFnZUlucHV0RXZlbnRIZXVyaXN0aWNzKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNlcmlhbGl6ZWRTaXRlcy5hZHZhbmNlZC5oZXVyaXN0aWNzLnBhZ2VJbnB1dEV2ZW50cztcclxuICAgIH1cclxuXHJcbiAgICBnZXQgc2hvdWxkRW5hYmxlTmF2aWdhdGlvblJlcXVlc3RUeXBlSGV1cmlzdGljcygpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zZXJpYWxpemVkU2l0ZXMuYWR2YW5jZWQuaGV1cmlzdGljcy5uYXZpZ2F0aW9uUmVxdWVzdFR5cGU7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhZGRLZXllZFNpdGVzKHRhYlR5cGU6IFRhYlR5cGUsIG5hdlR5cGU6IE5hdlR5cGUsIG1ldGhvZFR5cGU6IEh0dHBNZXRob2RUeXBlLCBzcGVjTGlzdDogc3RyaW5nW10pIHtcclxuICAgICAgICBjb25zdCBkZWR1cGxpY2F0ZSA9ICh2YWx1ZXM6IHN0cmluZ1tdKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNldCA9IG1ha2VTdHJpbmdIYXNoU2V0KCk7IFxyXG4gICAgICAgICAgICBzZXQuYWRkTWFueSh2YWx1ZXMpO1xyXG4gICAgICAgICAgICByZXR1cm4gc2V0LnRvQXJyYXkoKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBjb25zdCBkZWRldXBsaWNhdGVkU3BlY0xpc3QgPSBkZWR1cGxpY2F0ZShzcGVjTGlzdCk7XHJcbiAgICAgICAgY29uc3QgbWF0Y2hlciA9IHRoaXMucGFyc2VPcmlnaW5NYXRjaGVyKGRlZGV1cGxpY2F0ZWRTcGVjTGlzdCk7XHJcbiAgICAgICAgY29uc3Qga2V5ID0gdGhpcy5tYWtlS2V5KHRhYlR5cGUsIG5hdlR5cGUsIG1ldGhvZFR5cGUpO1xyXG4gICAgICAgIHRoaXMua2V5ZWRTaXRlcy5wdXQoa2V5LCBtYXRjaGVyKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGRlc2VyaWFsaXplS2V5ZWRTaXRlcyhzZXJpYWxpemVkU2l0ZXM6IFNlcmlhbGl6ZWRQaGlzaGluZ1NvdXJjZVNpdGVzKSB7XHJcbiAgICAgICAgY29uc3Qgd2l0aFdlYk1haWwgPSAoc2l0ZXM6IHN0cmluZ1tdKSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBzaXRlcy5jb25jYXQoc2VyaWFsaXplZFNpdGVzLndlYk1haWwpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGNvbnN0IHdpdGhQaGlzaGluZ1NvdXJjZVNpdGVzID0gKHNpdGVzOiBzdHJpbmdbXSkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gc2l0ZXMuY29uY2F0KHNlcmlhbGl6ZWRTaXRlcy5waGlzaGluZ1NvdXJjZVNpdGVzKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBjb25zdCB3aXRoRGlzYWJsZUhldXJpc3RpY3MgPSAoKCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5zaG91bGRFbmFibGVOYXZpZ2F0aW9uUmVxdWVzdFR5cGVIZXVyaXN0aWNzKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gKHNpdGVzOiBzdHJpbmdbXSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzaXRlcztcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gKHNpdGVzOiBzdHJpbmdbXSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB3aXRoUGhpc2hpbmdTb3VyY2VTaXRlcyh3aXRoV2ViTWFpbChzaXRlcykpO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pKCk7XHJcblxyXG4gICAgICAgIHRoaXMuYWRkS2V5ZWRTaXRlcyhUYWJUeXBlLm5ld1RhYiwgTmF2VHlwZS5uYXZpZ2F0aW9uLCBIdHRwTWV0aG9kVHlwZS5nZXQsIFxyXG4gICAgICAgICAgICAgICAgd2l0aFBoaXNoaW5nU291cmNlU2l0ZXMod2l0aFdlYk1haWwoc2VyaWFsaXplZFNpdGVzLmFkdmFuY2VkLm5ld1RhYi5uYXZpZ2F0ZS5nZXQpKSk7XHJcbiAgICAgICAgdGhpcy5hZGRLZXllZFNpdGVzKFRhYlR5cGUubmV3VGFiLCBOYXZUeXBlLm5hdmlnYXRpb24sIEh0dHBNZXRob2RUeXBlLnBvc3QsIFxyXG4gICAgICAgICAgICAgICAgd2l0aERpc2FibGVIZXVyaXN0aWNzKHNlcmlhbGl6ZWRTaXRlcy5hZHZhbmNlZC5uZXdUYWIubmF2aWdhdGUucG9zdCkpO1xyXG4gICAgICAgIHRoaXMuYWRkS2V5ZWRTaXRlcyhUYWJUeXBlLm5ld1RhYiwgTmF2VHlwZS5yZWRpcmVjdCwgSHR0cE1ldGhvZFR5cGUuZ2V0LCBcclxuICAgICAgICAgICAgICAgIHdpdGhEaXNhYmxlSGV1cmlzdGljcyhzZXJpYWxpemVkU2l0ZXMuYWR2YW5jZWQubmV3VGFiLnJlZGlyZWN0LmdldCkpO1xyXG4gICAgICAgIHRoaXMuYWRkS2V5ZWRTaXRlcyhUYWJUeXBlLm5ld1RhYiwgTmF2VHlwZS5yZWRpcmVjdCwgSHR0cE1ldGhvZFR5cGUucG9zdCwgXHJcbiAgICAgICAgICAgICAgICB3aXRoRGlzYWJsZUhldXJpc3RpY3Moc2VyaWFsaXplZFNpdGVzLmFkdmFuY2VkLm5ld1RhYi5yZWRpcmVjdC5wb3N0KSk7XHJcbiAgICAgICAgdGhpcy5hZGRLZXllZFNpdGVzKFRhYlR5cGUuc2FtZVRhYiwgTmF2VHlwZS5uYXZpZ2F0aW9uLCBIdHRwTWV0aG9kVHlwZS5nZXQsIFxyXG4gICAgICAgICAgICAgICAgd2l0aERpc2FibGVIZXVyaXN0aWNzKHdpdGhQaGlzaGluZ1NvdXJjZVNpdGVzKHNlcmlhbGl6ZWRTaXRlcy5hZHZhbmNlZC5zYW1lVGFiLm5hdmlnYXRlLmdldCkpKTtcclxuICAgICAgICB0aGlzLmFkZEtleWVkU2l0ZXMoVGFiVHlwZS5zYW1lVGFiLCBOYXZUeXBlLm5hdmlnYXRpb24sIEh0dHBNZXRob2RUeXBlLnBvc3QsIFxyXG4gICAgICAgICAgICAgICAgd2l0aERpc2FibGVIZXVyaXN0aWNzKHNlcmlhbGl6ZWRTaXRlcy5hZHZhbmNlZC5zYW1lVGFiLm5hdmlnYXRlLnBvc3QpKTtcclxuICAgICAgICB0aGlzLmFkZEtleWVkU2l0ZXMoVGFiVHlwZS5zYW1lVGFiLCBOYXZUeXBlLnJlZGlyZWN0LCBIdHRwTWV0aG9kVHlwZS5nZXQsIFxyXG4gICAgICAgICAgICAgICAgd2l0aERpc2FibGVIZXVyaXN0aWNzKHdpdGhQaGlzaGluZ1NvdXJjZVNpdGVzKHNlcmlhbGl6ZWRTaXRlcy5hZHZhbmNlZC5zYW1lVGFiLnJlZGlyZWN0LmdldCkpKTtcclxuICAgICAgICB0aGlzLmFkZEtleWVkU2l0ZXMoVGFiVHlwZS5zYW1lVGFiLCBOYXZUeXBlLnJlZGlyZWN0LCBIdHRwTWV0aG9kVHlwZS5wb3N0LCBcclxuICAgICAgICAgICAgICAgIHdpdGhEaXNhYmxlSGV1cmlzdGljcyhzZXJpYWxpemVkU2l0ZXMuYWR2YW5jZWQuc2FtZVRhYi5yZWRpcmVjdC5wb3N0KSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBrZXllZFNpdGVzID0gbWFrZURlZmF1bHRIYXNoTWFwPFBoaXNoaW5nU291cmNlU2l0ZXNLZXksIE9yaWdpbk1hdGNoZXI+KCk7XHJcbiAgICBwcml2YXRlIHBoaXNoaW5nU291cmNlU2l0ZXM6IE9yaWdpbk1hdGNoZXI7XHJcbiAgICBwcml2YXRlIHdlYk1haWxTaXRlczogT3JpZ2luTWF0Y2hlcjtcclxuICAgIHByaXZhdGUgcmVxdWlyZUF1dGhTaXRlczogT3JpZ2luTWF0Y2hlcjtcclxuICAgIHByaXZhdGUgYXV0aFNpdGVzOiBPcmlnaW5NYXRjaGVyO1xyXG4gICAgcHJpdmF0ZSBncm91cHMgPSBuZXcgT3JpZ2luR3JvdXBlcigpO1xyXG59XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vcGhpc2hpbmctc291cmNlLXNpdGVzLnRzIiwiLy8gQ29weXJpZ2h0IChjKSAyMDE4IEJyb21pdW0sIEluYy5cclxuLy8gVXNlIG9mIHRoZSBCcm9taXVtLCBJbmMuIHNvZnR3YXJlIHJlcXVpcmVzIGEgbGljZW5zZSBhZ3JlZW1lbnQgd2l0aCBCcm9taXVtLCBJbmMuIG9yIGFuIGF1dGhvcml6ZWQgcmVzZWxsZXIuXHJcblxyXG5pbXBvcnQgeyBNYXliZSB9IGZyb20gXCIuL21heWJlXCI7XHJcblxyXG5leHBvcnQgZW51bSBIdHRwTWV0aG9kVHlwZSB7XHJcbiAgICBnZXQsXHJcbiAgICBwb3N0XHJcbn07XHJcblxyXG5lbnVtIEh0dHBNZXRob2RLZXlzIHtcclxuICAgIGdldCA9IFwiZ2V0XCIsXHJcbiAgICBwb3N0ID0gXCJwb3N0XCJcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlSHR0cE1ldGhvZChtZXRob2Q6IHN0cmluZyk6IE1heWJlPEh0dHBNZXRob2RUeXBlPiB7XHJcbiAgICBzd2l0Y2ggKG1ldGhvZC50b0xvd2VyQ2FzZSgpKSB7XHJcbiAgICAgICAgY2FzZSBIdHRwTWV0aG9kS2V5cy5nZXQ6XHJcbiAgICAgICAgICAgIHJldHVybiBIdHRwTWV0aG9kVHlwZS5nZXQ7XHJcbiAgICAgICAgY2FzZSBIdHRwTWV0aG9kS2V5cy5wb3N0OlxyXG4gICAgICAgICAgICByZXR1cm4gSHR0cE1ldGhvZFR5cGUucG9zdDtcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaHR0cE1ldGhvZFR5cGVUb1N0cmluZyhtZXRob2RUeXBlOiBIdHRwTWV0aG9kVHlwZSk6IHN0cmluZyB7XHJcbiAgICBzd2l0Y2ggKG1ldGhvZFR5cGUpIHtcclxuICAgICAgICBjYXNlIEh0dHBNZXRob2RUeXBlLmdldDpcclxuICAgICAgICAgICAgcmV0dXJuIEh0dHBNZXRob2RLZXlzLmdldC50b1VwcGVyQ2FzZSgpO1xyXG4gICAgICAgIGNhc2UgSHR0cE1ldGhvZFR5cGUucG9zdDpcclxuICAgICAgICAgICAgcmV0dXJuIEh0dHBNZXRob2RLZXlzLnBvc3QudG9VcHBlckNhc2UoKTtcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICByZXR1cm4gYEludmFsaWQgSHR0cE1ldGhvZFR5cGU6ICR7bWV0aG9kVHlwZX1gO1xyXG4gICAgfVxyXG59XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4uL2xpYi9jb21tb24vaHR0cC1tZXRob2QudHMiLCIvLyBDb3B5cmlnaHQgKGMpIDIwMTggQnJvbWl1bSwgSW5jLlxyXG4vLyBVc2Ugb2YgdGhlIEJyb21pdW0sIEluYy4gc29mdHdhcmUgcmVxdWlyZXMgYSBsaWNlbnNlIGFncmVlbWVudCB3aXRoIEJyb21pdW0sIEluYy4gb3IgYW4gYXV0aG9yaXplZCByZXNlbGxlci5cclxuXHJcbmltcG9ydCB7IE1heWJlLCBzb21lLCBub25lIH0gZnJvbSBcIi4vbWF5YmVcIjtcclxuaW1wb3J0IHsgT3JpZ2luLCBwYXJzZU9yaWdpbiB9IGZyb20gXCIuL29yaWdpblwiO1xyXG5pbXBvcnQgeyBVUkwsIHBhcnNlVXJsIH0gZnJvbSBcIi4vdXJsLXV0aWxzXCI7XHJcbmltcG9ydCB7IHBhcnNlTnVtYmVyIH0gZnJvbSBcIi4vbnVtYmVyLXV0aWxzXCI7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZmluZERvY3VtZW50VXJsKHdpbmRvdyA6IFdpbmRvdykgOiBNYXliZTxVUkw+IHtcclxuICAgIHJldHVybiBwYXJzZVVybCh3aW5kb3cubG9jYXRpb24udG9TdHJpbmcoKSk7XHJcbn1cclxuXHJcbi8vIFRoaXMgaXNuJ3QgYSBwZXJmZWN0IHNlYXJjaCBwYXJhbSBnZXR0ZXIgYnV0IGl0IHNob3VsZCBiZSBmaW5lIGZvciBkZWNvZGluZ1xyXG4vLyBvdXIgYmxvY2tlZCBwYWdlIGFuZCBleHRlcm5hbCBhcHAgbGluayBwYWdlIFVSTHMuXHJcbmZ1bmN0aW9uIGdldFF1ZXJ5UGFyYW1Gcm9tU2VhcmNoKHNlYXJjaDogc3RyaW5nLCBxdWVyeVBhcmFtOiBzdHJpbmcpIDogc3RyaW5nfG51bGwge1xyXG4gICAgLy8gUmVtb3ZlIHRoZSBsZWFkaW5nIFwiP1wiLlxyXG4gICAgY29uc3QgcGFyYW1zU3RyaW5nID0gc2VhcmNoLnN1YnN0cmluZygxKTtcclxuXHJcbiAgICAvLyBTcGxpdCB0aGUgcGFyYW1zIHN0cmluZyB1cCBpbnRvIFwia2V5PXZhbHVlXCIgc3RyaW5ncy5cclxuICAgIGNvbnN0IHBhcmFtcyA9IHBhcmFtc1N0cmluZy5zcGxpdChcIiZcIilcclxuXHJcbiAgICAvLyBTcGxpdCBlYWNoIFwia2V5PXZhbHVlXCIgc3RyaW5nIGludG8gYSBrZXkgdmFsdWUgcGFpci5cclxuICAgIGZvciAoY29uc3QgcGFpclN0cmluZyBvZiBwYXJhbXMpIHtcclxuICAgICAgICBjb25zdCBwYWlyID0gcGFpclN0cmluZy5zcGxpdChcIj1cIik7XHJcblxyXG4gICAgICAgIC8vIElmIHRoZSBkZWNvZGVkIGtleSBtYXRjaGVzIHRoZSBxdWVyeSBwYXJhbSB3ZSdyZSBsb29raW5nIGZvciB0aGVuXHJcbiAgICAgICAgLy8gcmV0dXJuIHRoZSBkZWNvZGVkIHZhbHVlLlxyXG4gICAgICAgIGlmIChkZWNvZGVVUklDb21wb25lbnQocGFpclswXSkgPT09IHF1ZXJ5UGFyYW0pIHtcclxuICAgICAgICAgICAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChwYWlyWzFdKTtcclxuICAgICAgICB9IFxyXG4gICAgfVxyXG5cclxuICAgIC8vIFJldHVybiBudWxsIGlmIFtxdWVyeVBhcmFtXSBpc24ndCBmb3VuZCBiZWNhdXNlIHRoYXQncyB3aGF0XHJcbiAgICAvLyBVUkxTZWFyY2hQYXJhbXMuZ2V0KCkgZG9lcy5cclxuICAgIHJldHVybiBudWxsO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZmluZERvY3VtZW50UXVlcnlQYXJhbShkb2N1bWVudFVybCA6IE1heWJlPFVSTD4sIHF1ZXJ5UGFyYW0gOiBzdHJpbmcpIDogTWF5YmU8c3RyaW5nPiB7XHJcbiAgICBpZiAobm9uZShkb2N1bWVudFVybCkpIHtcclxuICAgICAgICByZXR1cm4gXCJcIjtcclxuICAgIH1cclxuXHJcbiAgICAvLyBFZGdlIGRvZXNuJ3QgaW1wbGVtZW50IFVSTC5zZWFyY2hQYXJhbXMgc28gd2UgbXVzdCBiZSBwcmVwYXJlZCB0byBkZWNvZGVcclxuICAgIC8vIFVSTC5zZWFyY2ggb3Vyc2VsdmVzLlxyXG4gICAgbGV0IHZhbHVlID0gbnVsbDtcclxuICAgIGlmIChkb2N1bWVudFVybC5zZWFyY2hQYXJhbXMgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIC8vIEFzIG9mIFJlZHN0b25lIDQgRWRnZSBzdXBwb3J0cyB0aGUgVVJMU2VhcmNoUGFyYW1zIHR5cGUgc28gdHJ5IHRoYXQuXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3Qgc2VhcmNoUGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyhkb2N1bWVudFVybC5zZWFyY2gpO1xyXG4gICAgICAgICAgICB2YWx1ZSA9IHNlYXJjaFBhcmFtcy5nZXQocXVlcnlQYXJhbSk7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICB2YWx1ZSA9IGdldFF1ZXJ5UGFyYW1Gcm9tU2VhcmNoKGRvY3VtZW50VXJsLnNlYXJjaCwgcXVlcnlQYXJhbSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICB2YWx1ZSA9IGRvY3VtZW50VXJsLnNlYXJjaFBhcmFtcy5nZXQocXVlcnlQYXJhbSk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHZhbHVlID09PSBudWxsKSB7XHJcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgIH1cclxuICAgIHJldHVybiB2YWx1ZTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGZpbmRVUkxEb2N1bWVudFF1ZXJ5UGFyYW0oZG9jdW1lbnRVcmwgOiBNYXliZTxVUkw+LCBxdWVyeVBhcmFtOiBzdHJpbmcpIDogTWF5YmU8VVJMPiB7XHJcbiAgICBjb25zdCBxdWVyeVBhcmFtVmFsdWUgPSBmaW5kRG9jdW1lbnRRdWVyeVBhcmFtKGRvY3VtZW50VXJsLCBxdWVyeVBhcmFtKTtcclxuICAgIGlmIChub25lKHF1ZXJ5UGFyYW1WYWx1ZSkpIHtcclxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHBhcnNlVXJsKHF1ZXJ5UGFyYW1WYWx1ZSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBmaW5kTnVtYmVyRG9jdW1lbnRRdWVyeVBhcmFtKGRvY3VtZW50VXJsOiBNYXliZTxVUkw+LCBxdWVyeVBhcmFtTmFtZTogc3RyaW5nKSA6IE1heWJlPG51bWJlcj4ge1xyXG4gICAgY29uc3QgcXVlcnlQYXJhbVZhbHVlID0gZmluZERvY3VtZW50UXVlcnlQYXJhbShkb2N1bWVudFVybCwgcXVlcnlQYXJhbU5hbWUpO1xyXG4gICAgaWYgKG5vbmUocXVlcnlQYXJhbVZhbHVlKSkge1xyXG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcGFyc2VOdW1iZXIocXVlcnlQYXJhbVZhbHVlKTtcclxufVxyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi4vbGliL2NvbW1vbi91cmwtcGFyc2UtdXRpbHMudHMiLCIvLyBDb3B5cmlnaHQgKGMpIDIwMTggQnJvbWl1bSwgSW5jLlxyXG4vLyBVc2Ugb2YgdGhlIEJyb21pdW0sIEluYy4gc29mdHdhcmUgcmVxdWlyZXMgYSBsaWNlbnNlIGFncmVlbWVudCB3aXRoIEJyb21pdW0sIEluYy4gb3IgYW4gYXV0aG9yaXplZCByZXNlbGxlci5cclxuXHJcbmV4cG9ydCBlbnVtIE9wdGlvbk5hbWVzIHtcclxuICAgIG5hdmlnYXRlVG9TcGVjID0gXCJuYXZpZ2F0ZVNwZWNcIixcclxuICAgIGJsb2NrZWRTcGVjID0gXCJibG9ja2VkU3BlY1wiLFxyXG4gICAgY29udGVudFR5cGUgPSBcImNvbnRlbnRUeXBlXCIsXHJcbiAgICByZW1lbWJlckRlY2lzaW9uc0RlZmF1bHQgPSAncmVtZW1iZXJEZWNpc2lvbnNEZWZhdWx0JyxcclxuICAgIGlzQ29uc3VtZXJQcm9kdWN0ID0gJ2lzQ29uc3VtZXJQcm9kdWN0JyxcclxuICAgIGxlYXJuTW9yZVVSTCA9ICdsZWFybk1vcmVVUkwnLFxyXG4gICAgbGF1bmNoZWRTcGVjID0gXCJsYXVuY2hlZFNwZWNcIlxyXG59XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4uL2xpYi9ob3N0L2Jsb2NrZWQtcGFnZS1vcHRpb25zLnRzIiwiLy8gQ29weXJpZ2h0IChjKSAyMDE4IEJyb21pdW0sIEluYy5cclxuLy8gVXNlIG9mIHRoZSBCcm9taXVtLCBJbmMuIHNvZnR3YXJlIHJlcXVpcmVzIGEgbGljZW5zZSBhZ3JlZW1lbnQgd2l0aCBCcm9taXVtLCBJbmMuIG9yIGFuIGF1dGhvcml6ZWQgcmVzZWxsZXIuXHJcblxyXG4vLy8gPHJlZmVyZW5jZSB0eXBlcz1cImNocm9tZVwiLz5cclxuaW1wb3J0IHsgTWVzc2FnZVR5cGUgfSBmcm9tIFwiLi9tZXNzYWdlLXR5cGVzXCI7XHJcbmltcG9ydCB7IE1lc3NhZ2UgfSBmcm9tIFwiLi9tZXNzYWdlc1wiO1xyXG5pbXBvcnQgeyBkZWNvZGVNZXNzYWdlLCBJTWVzc2FnZURlY29kZXIsIE1lc3NhZ2VEZWNvZGVkRXZlbnQgfSBmcm9tIFwiLi9tZXNzYWdlLWRlY29kZXJcIjtcclxuaW1wb3J0IHsgSU1lc3NhZ2VSZWNlaXZlciB9IGZyb20gXCIuL21lc3NhZ2UtcmVjZWl2ZXJcIjtcclxuaW1wb3J0IHsgRXZlbnREaXNwYXRjaGVyIH0gZnJvbSBcIi4vZXZlbnQtZGlzcGF0Y2hlclwiO1xyXG5cclxuZXhwb3J0IHR5cGUgSGFuZGxlTWVzc2FnZSA9IChtZXNzYWdlOiBNZXNzYWdlKSA9PiB2b2lkO1xyXG5leHBvcnQgdHlwZSBIYW5kbGVQb3J0TWVzc2FnZSA9IChwb3J0OiBjaHJvbWUucnVudGltZS5Qb3J0LCBtZXNzYWdlOiBNZXNzYWdlKSA9PiB2b2lkO1xyXG5leHBvcnQgdHlwZSBIYW5kbGVJbnZhbGlkTWVzc2FnZSA9IChwb3J0OiBjaHJvbWUucnVudGltZS5Qb3J0LCBpbnZhbGlkTWVzc2FnZTogb2JqZWN0KSA9PiB2b2lkO1xyXG5leHBvcnQgdHlwZSBPblVuaGFuZGxlZE1lc3NhZ2UgPSAocG9ydDogY2hyb21lLnJ1bnRpbWUuUG9ydCwgbWVzc2FnZTogTWVzc2FnZSkgPT4gdm9pZDtcclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUludmFsaWRNZXNzYWdlKHBvcnQ6IGNocm9tZS5ydW50aW1lLlBvcnQsIGludmFsaWRNZXNzYWdlOiBvYmplY3QpIHtcclxuICAgIGNvbnNvbGUubG9nKGBoYW5kbGVJbnZhbGlkTWVzc2FnZTogaW52YWxpZE1lc3NhZ2U6ICR7aW52YWxpZE1lc3NhZ2V9YCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG9uVW5oYW5kbGVkTWVzc2FnZShwb3J0OiBjaHJvbWUucnVudGltZS5Qb3J0LCBtZXNzYWdlOiBNZXNzYWdlKSB7XHJcbiAgICBjb25zb2xlLmxvZyhgb25VbmhhbmRsZWRNZXNzYWdlOiBtZXNzYWdlOiAke21lc3NhZ2V9YCk7XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSU1lc3NhZ2VSb3V0ZXIgZXh0ZW5kcyBJTWVzc2FnZVJlY2VpdmVyIHtcclxuICAgIHJlZ2lzdGVyTWVzc2FnZUhhbmRsZXIodHlwZTogTWVzc2FnZVR5cGUsIGhhbmRsZU1lc3NhZ2U6IEhhbmRsZU1lc3NhZ2UpOiB2b2lkO1xyXG4gICAgcmVnaXN0ZXJQb3J0TWVzc2FnZUhhbmRsZXIodHlwZTogTWVzc2FnZVR5cGUsIGhhbmRsZU1lc3NhZ2U6IEhhbmRsZVBvcnRNZXNzYWdlKTogdm9pZDtcclxufVxyXG5cclxuYWJzdHJhY3QgY2xhc3MgTWVzc2FnZVJvdXRlciBpbXBsZW1lbnRzIElNZXNzYWdlUm91dGVyIHtcclxuICAgIGNvbnN0cnVjdG9yKHByb3RlY3RlZCBoYW5kbGVJbnZhbGlkTWVzc2FnZTogSGFuZGxlSW52YWxpZE1lc3NhZ2UsIHByb3RlY3RlZCBvblVuaGFuZGxlZE1lc3NhZ2U6IE9uVW5oYW5kbGVkTWVzc2FnZSkgeyB9XHJcblxyXG4gICAgYWJzdHJhY3Qgb25NZXNzYWdlUmVjZWl2ZWQocG9ydDogY2hyb21lLnJ1bnRpbWUuUG9ydCwgZW5jb2RlZE1lc3NhZ2U6IG9iamVjdCkgOiB2b2lkO1xyXG5cclxuICAgIHJlZ2lzdGVyTWVzc2FnZUhhbmRsZXIodHlwZTogTWVzc2FnZVR5cGUsIGhhbmRsZU1lc3NhZ2U6IEhhbmRsZU1lc3NhZ2UpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnJlZ2lzdGVyUG9ydE1lc3NhZ2VIYW5kbGVyKHR5cGUsIChwb3J0LCBtZXNzYWdlKSA9PiB7XHJcbiAgICAgICAgICAgIGhhbmRsZU1lc3NhZ2UobWVzc2FnZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVnaXN0ZXJQb3J0TWVzc2FnZUhhbmRsZXIodHlwZTogTWVzc2FnZVR5cGUsIGhhbmRsZU1lc3NhZ2U6IEhhbmRsZVBvcnRNZXNzYWdlKTogdm9pZCB7XHJcbiAgICAgICAgY29uc3QgbWVzc2FnZUhhbmRsZXJzID0gdGhpcy5tZXNzYWdlSGFuZGxlcnMuZ2V0KHR5cGUpO1xyXG4gICAgICAgIGlmIChtZXNzYWdlSGFuZGxlcnMgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aGlzLm1lc3NhZ2VIYW5kbGVycy5zZXQodHlwZSwgW2hhbmRsZU1lc3NhZ2VdKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBtZXNzYWdlSGFuZGxlcnMucHVzaChoYW5kbGVNZXNzYWdlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIG1lc3NhZ2VIYW5kbGVycyA9IG5ldyBNYXA8TWVzc2FnZVR5cGUsIEhhbmRsZVBvcnRNZXNzYWdlW10+KCk7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBHZW5lcmljTWVzc2FnZVJvdXRlciBleHRlbmRzIE1lc3NhZ2VSb3V0ZXIgaW1wbGVtZW50cyBJTWVzc2FnZURlY29kZXIge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoaGFuZGxlSW52YWxpZE1lc3NhZ2UsIG9uVW5oYW5kbGVkTWVzc2FnZSk7XHJcbiAgICB9XHJcblxyXG4gICAgb25NZXNzYWdlUmVjZWl2ZWQocG9ydDogY2hyb21lLnJ1bnRpbWUuUG9ydCwgZW5jb2RlZE1lc3NhZ2U6IG9iamVjdCkgOiB2b2lkIHtcclxuICAgICAgICBsZXQgbWVzc2FnZSA9IGRlY29kZU1lc3NhZ2UoZW5jb2RlZE1lc3NhZ2UpO1xyXG4gICAgICAgIGlmIChtZXNzYWdlID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5oYW5kbGVJbnZhbGlkTWVzc2FnZShwb3J0LCBlbmNvZGVkTWVzc2FnZSk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5vbk1lc3NhZ2VEZWNvZGVkLmRpc3BhdGNoRXZlbnQobmV3IE1lc3NhZ2VEZWNvZGVkRXZlbnQobWVzc2FnZSkpO1xyXG4gICAgICAgIGNvbnN0IG1lc3NhZ2VIYW5kbGVycyA9IHRoaXMubWVzc2FnZUhhbmRsZXJzLmdldChtZXNzYWdlLnR5cGUpO1xyXG4gICAgICAgIGlmIChtZXNzYWdlSGFuZGxlcnMgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aGlzLm9uVW5oYW5kbGVkTWVzc2FnZShwb3J0LCBtZXNzYWdlKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKGNvbnN0IGhhbmRsZU1lc3NhZ2Ugb2YgbWVzc2FnZUhhbmRsZXJzKSB7XHJcbiAgICAgICAgICAgIGhhbmRsZU1lc3NhZ2UocG9ydCwgbWVzc2FnZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG9uTWVzc2FnZURlY29kZWQgPSBuZXcgRXZlbnREaXNwYXRjaGVyPE1lc3NhZ2VEZWNvZGVkRXZlbnQ+KCk7XHJcbn1cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi4vbGliL2NvbW1vbi9tZXNzYWdlLXJvdXRlci50cyIsIi8vIENvcHlyaWdodCAoYykgMjAxOCBCcm9taXVtLCBJbmMuXHJcbi8vIFVzZSBvZiB0aGUgQnJvbWl1bSwgSW5jLiBzb2Z0d2FyZSByZXF1aXJlcyBhIGxpY2Vuc2UgYWdyZWVtZW50IHdpdGggQnJvbWl1bSwgSW5jLiBvciBhbiBhdXRob3JpemVkIHJlc2VsbGVyLlxyXG5cclxuaW1wb3J0IHsgaXNNZXNzYWdlVHlwZSB9IGZyb20gXCIuL21lc3NhZ2UtdHlwZXNcIjtcclxuaW1wb3J0IHsgTWVzc2FnZSB9IGZyb20gXCIuL21lc3NhZ2VzXCI7XHJcbmltcG9ydCB7IE1heWJlIH0gZnJvbSBcIi4vbWF5YmVcIjtcclxuaW1wb3J0IHsgaXNOdW1iZXIgfSBmcm9tIFwiLi9udW1iZXItdXRpbHNcIjtcclxuaW1wb3J0IHsgRXZlbnREaXNwYXRjaGVyIH0gZnJvbSBcIi4vZXZlbnQtZGlzcGF0Y2hlclwiO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGRlY29kZU1lc3NhZ2UoZW5jb2RlZE1lc3NhZ2U6IG9iamVjdCk6IE1heWJlPE1lc3NhZ2U+IHtcclxuICAgIGxldCBtZXNzYWdlID0gZW5jb2RlZE1lc3NhZ2UgYXMgTWVzc2FnZTtcclxuICAgIGlmIChtZXNzYWdlLnR5cGUgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIC8vIFRyeSBwYXJzaW5nIHRoZSBlbmNvZGVkTWVzc2FnZSBhcyBhIHN0cmluZyBpbnN0ZWFkIG9mIGFuIG9iamVjdCBpZiBjYXN0aW5nXHJcbiAgICAgICAgLy8gdG8gdGhlIE1lc3NhZ2UgdHlwZSBmYWlscy4gVGhpcyBpcyByZXF1aXJlZCBmb3IgZGVjb2RpbmcgbWVzc2FnZXMgaW4gRWRnZS5cclxuICAgICAgICBtZXNzYWdlID0gSlNPTi5wYXJzZShlbmNvZGVkTWVzc2FnZS50b1N0cmluZygpKTtcclxuICAgICAgICBpZiAobWVzc2FnZS50eXBlID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAoIWlzTnVtYmVyKG1lc3NhZ2UudHlwZSkpIHtcclxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgfVxyXG4gICAgaWYgKCFpc01lc3NhZ2VUeXBlKG1lc3NhZ2UudHlwZSkpIHtcclxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG1lc3NhZ2U7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBNZXNzYWdlRGVjb2RlZEV2ZW50IHtcclxuICAgIGNvbnN0cnVjdG9yKHJlYWRvbmx5IG1lc3NhZ2U6IE1lc3NhZ2UpIHt9XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSU1lc3NhZ2VEZWNvZGVyIHtcclxuICAgIG9uTWVzc2FnZURlY29kZWQ6IEV2ZW50RGlzcGF0Y2hlcjxNZXNzYWdlRGVjb2RlZEV2ZW50PjtcclxufVxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuLi9saWIvY29tbW9uL21lc3NhZ2UtZGVjb2Rlci50cyIsIi8vIENvcHlyaWdodCAoYykgMjAxOCBCcm9taXVtLCBJbmMuXHJcbi8vIFVzZSBvZiB0aGUgQnJvbWl1bSwgSW5jLiBzb2Z0d2FyZSByZXF1aXJlcyBhIGxpY2Vuc2UgYWdyZWVtZW50IHdpdGggQnJvbWl1bSwgSW5jLiBvciBhbiBhdXRob3JpemVkIHJlc2VsbGVyLlxyXG5cclxuLy8vIDxyZWZlcmVuY2UgdHlwZXM9XCJjaHJvbWVcIi8+XHJcbmltcG9ydCB7IGhvc3RDb25zdGFudHMgfSBmcm9tIFwiLi9ob3N0LWNvbnN0YW50c1wiO1xyXG5pbXBvcnQgeyBQb3J0UmVzb2x2ZXIgfSBmcm9tIFwiLi4vbGliL2NvbW1vbi9wb3J0LXJlc29sdmVyXCI7XHJcbmltcG9ydCB7IFBhZ2VQb3J0Q29udHJvbGxlciB9IGZyb20gXCIuL3BhZ2UtcG9ydC1jb250cm9sbGVyXCI7XHJcbmltcG9ydCB7IElDb25maWdOb3RpZmllciB9IGZyb20gXCIuL2NvbmZpZy1ub3RpZmllclwiO1xyXG5pbXBvcnQgeyBNZXNzYWdlVHlwZSB9IGZyb20gXCIuL21lc3NhZ2UtdHlwZXNcIjtcclxuaW1wb3J0IHsgTWVzc2FnZSwgUG9wdXBEYXRhUmVzcG9uc2VWMTEsIENsZWFyUmVtZW1iZXJlZERlY2lzaW9uc1YxIH0gZnJvbSBcIi4vbWVzc2FnZXNcIjtcclxuaW1wb3J0IHsgSTE4bk1lc3NhZ2VzLCBwb3B1cFR5cGUsIFBvcHVwVHlwZSwgZ2V0STE4biB9IGZyb20gXCIuL2kxOG5cIjtcclxuaW1wb3J0IHsgTWVzc2FnZVNlbmRlciB9IGZyb20gXCIuL21lc3NhZ2Utc2VuZGVyXCI7XHJcbmltcG9ydCB7IGxvZyB9IGZyb20gXCIuL2xvZ1wiO1xyXG5pbXBvcnQgeyBtYWtlUHJvbWlzZSB9IGZyb20gXCIuL3Byb21pc2UtdXRpbHNcIjtcclxuaW1wb3J0IHsgbm9uZSwgTWF5YmUsIHNvbWUgfSBmcm9tIFwiLi9tYXliZVwiO1xyXG5pbXBvcnQgeyBBY3Rpb24gfSBmcm9tIFwiLi9vbmNlXCI7XHJcbmltcG9ydCB7IEVycm9ySGFuZGxlciB9IGZyb20gXCIuL2Vycm9yLWhhbmRsZXJcIjtcclxuaW1wb3J0IHsgQ29uZmlnS2V5IH0gZnJvbSBcIi4vY29uZmlnLWtleXNcIjtcclxuaW1wb3J0IHsgQ29uZmlnUmVhZGVyIH0gZnJvbSBcIi4vY29uZmlnLXJlYWRlclwiO1xyXG5pbXBvcnQgeyBJRmVhdHVyZU1hbmFnZXIgfSBmcm9tIFwiLi9mZWF0dXJlLW1hbmFnZXJcIjtcclxuaW1wb3J0IHsgSUhhbmRzaGFrZXIgfSBmcm9tIFwiLi9oYW5kc2hha2VyXCI7XHJcbmltcG9ydCB7IFByb3RvY29sVmVyc2lvbiwgZ2V0SGVscFBhZ2VWZXJzaW9uIH0gZnJvbSBcIi4vcHJvdG9jb2wtdmVyc2lvbnNcIjtcclxuaW1wb3J0IHsgaXNTdXJlQ2xpY2sgfSBmcm9tIFwiLi9icmFuZGluZ1wiO1xyXG5cclxuZXhwb3J0IGNvbnN0IHN1cmVDbGlja0FkdmFuY2VkSGVscEhvc3RuYW1lID0gXCJodHRwczovL2hlbHAtc3VyZWNsaWNrYWR2YW5jZWQuYnJvbWl1bS1vbmxpbmUuY29tXCI7XHJcbmV4cG9ydCBjb25zdCBzdXJlQ2xpY2tIZWxwSG9zdG5hbWUgPSBcImh0dHBzOi8vaGVscC1zdXJlY2xpY2suYnJvbWl1bS1vbmxpbmUuY29tXCI7XHJcbmV4cG9ydCBjb25zdCBicm9taXVtSGVscEhvc3RuYW1lID0gXCJodHRwczovL2hlbHAuYnJvbWl1bS1vbmxpbmUuY29tXCI7XHJcblxyXG5jbGFzcyBQb3B1cFBhZ2VDb250cm9sbGVyIHtcclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgICAgICBwb3J0OiBQcm9taXNlPGNocm9tZS5ydW50aW1lLlBvcnQ+LFxyXG4gICAgICAgICAgICBwcml2YXRlIGN1cnJlbnRQb3B1cE1lc3NhZ2U6IEkxOG5NZXNzYWdlcyxcclxuICAgICAgICAgICAgcHJpdmF0ZSBvcGVuUGhpc2hpbmdMaW5rc0luU2VjdXJlQnJvd3NlcjogYm9vbGVhbixcclxuICAgICAgICAgICAgcHJpdmF0ZSBpc0VudGVycHJpc2VQcm9kdWN0OiBib29sZWFuLFxyXG4gICAgICAgICAgICBwcml2YXRlIGRvbnRBc2tBZ2FpbjogYm9vbGVhbixcclxuICAgICAgICAgICAgcHJpdmF0ZSBoZWxwTGlua1VSTDogc3RyaW5nLFxyXG4gICAgICAgICAgICBwcml2YXRlIG9uRGlzY29ubmVjdDogQWN0aW9uLFxyXG4gICAgICAgICAgICBwcml2YXRlIGhvc3RIZWxwZXJNZXNzYWdlU2VuZGVyOiBNZXNzYWdlU2VuZGVyLFxyXG4gICAgICAgICAgICBwcml2YXRlIGZlYXR1cmVNYW5hZ2VyOiBJRmVhdHVyZU1hbmFnZXIpIHtcclxuICAgICAgICB0aGlzLnBhZ2VQb3J0Q29udHJvbGxlciA9IG5ldyBQYWdlUG9ydENvbnRyb2xsZXIoXHJcbiAgICAgICAgICAgIGNocm9tZS50YWJzLlRBQl9JRF9OT05FLFxyXG4gICAgICAgICAgICBwb3J0LFxyXG4gICAgICAgICAgICAocG9ydDogY2hyb21lLnJ1bnRpbWUuUG9ydCkgPT4geyB9LFxyXG4gICAgICAgICAgICAocG9ydDogY2hyb21lLnJ1bnRpbWUuUG9ydCkgPT4geyB0aGlzLm9uRGlzY29ubmVjdCgpIH0pO1xyXG4gICAgICAgIHRoaXMucGFnZVBvcnRDb250cm9sbGVyLnJlZ2lzdGVyTWVzc2FnZUhhbmRsZXIoXHJcbiAgICAgICAgICAgIE1lc3NhZ2VUeXBlLnBvcHVwRGF0YVJlcXVlc3RWMSxcclxuICAgICAgICAgICAgKG1lc3NhZ2UpID0+IHRoaXMuaGFuZGxlUG9wdXBEYXRhUmVxdWVzdChtZXNzYWdlKSk7XHJcbiAgICAgICAgdGhpcy5wYWdlUG9ydENvbnRyb2xsZXIuY29ubmVjdCgpO1xyXG4gICAgICAgIC8vS1JZLTQ1NjkyLy8gUmV2ZXJ0IG9wdGlvbnMgcGFnZSBzbyBwb3B1cCBidXR0b24gY2xlYXJzIGFsbCByZW1lbWJlcmVkIGRlY2lzaW9uc1xyXG4gICAgICAgIGlmIChwb3B1cFR5cGUgPT09IFBvcHVwVHlwZS5jbGVhclJlbWVtYmVyZWREZWNpc2lvbnMpIHtcclxuICAgICAgICAgICAgdGhpcy5wYWdlUG9ydENvbnRyb2xsZXIucmVnaXN0ZXJNZXNzYWdlSGFuZGxlcihcclxuICAgICAgICAgICAgICAgIE1lc3NhZ2VUeXBlLmNsZWFyUmVtZW1iZXJlZERlY2lzaW9uc1YxLFxyXG4gICAgICAgICAgICAgICAgKG1lc3NhZ2UpID0+IHRoaXMuY2xlYXJBbGxSZW1lbWJlcmVkRGVjaXNpb25zKG1lc3NhZ2UpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy9LUlktNDU2OTIvLyBSZXZlcnQgb3B0aW9ucyBwYWdlIHNvIHBvcHVwIGJ1dHRvbiBjbGVhcnMgYWxsIHJlbWVtYmVyZWQgZGVjaXNpb25zXHJcbiAgICBwcml2YXRlIGNsZWFyQWxsUmVtZW1iZXJlZERlY2lzaW9ucyhtZXNzYWdlOiBNZXNzYWdlKSB7XHJcbiAgICAgICAgLy8gU2VuZCB0byB0aGUgaGVscGVyIHByb2Nlc3MuXHJcbiAgICAgICAgdGhpcy5ob3N0SGVscGVyTWVzc2FnZVNlbmRlci5zZW5kTWVzc2FnZShcclxuICAgICAgICAgICAgTWVzc2FnZVR5cGUuY2xlYXJSZW1lbWJlcmVkRGVjaXNpb25zVjEsXHJcbiAgICAgICAgICAgIG5ldyBDbGVhclJlbWVtYmVyZWREZWNpc2lvbnNWMSgpKTtcclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGVQb3B1cERhdGEoXHJcbiAgICAgICAgICAgIGkxOG5NZXNzYWdlOiBJMThuTWVzc2FnZXMsXHJcbiAgICAgICAgICAgIG9wZW5QaGlzaGluZ0xpbmtzSW5TZWN1cmVCcm93c2VyOiBib29sZWFuLFxyXG4gICAgICAgICAgICBpc0VudGVycHJpc2VQcm9kdWN0OiBib29sZWFuLFxyXG4gICAgICAgICAgICBkb250QXNrQWdhaW46IGJvb2xlYW4sXHJcbiAgICAgICAgICAgIGhlbHBMaW5rVVJMOiBzdHJpbmcpIHtcclxuICAgICAgICB0aGlzLmN1cnJlbnRQb3B1cE1lc3NhZ2UgPSBpMThuTWVzc2FnZTtcclxuICAgICAgICB0aGlzLm9wZW5QaGlzaGluZ0xpbmtzSW5TZWN1cmVCcm93c2VyID0gb3BlblBoaXNoaW5nTGlua3NJblNlY3VyZUJyb3dzZXI7XHJcbiAgICAgICAgdGhpcy5pc0VudGVycHJpc2VQcm9kdWN0ID0gaXNFbnRlcnByaXNlUHJvZHVjdDtcclxuICAgICAgICB0aGlzLmRvbnRBc2tBZ2FpbiA9IGRvbnRBc2tBZ2FpbjtcclxuICAgICAgICB0aGlzLmhlbHBMaW5rVVJMID0gaGVscExpbmtVUkw7XHJcbiAgICAgICAgdGhpcy5zZW5kUG9wdXBEYXRhUmVzcG9uc2UoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNlbmRQb3B1cERhdGFSZXNwb25zZSgpIHtcclxuICAgICAgICBsZXQgbWVzc2FnZSA9IHRoaXMuY3VycmVudFBvcHVwTWVzc2FnZTtcclxuICAgICAgICAvLyBEaXNwbGF5IGEgZGlmZmVyZW50IG1lc3NhZ2UgaWYgdGhlcmUncyBubyBlcnJvcnMgYnV0IHRoZSB1c2VyIGhhc1xyXG4gICAgICAgIC8vIGNob3NlbiB0byBub3QgYmUgcHJvbXB0ZWQgYWdhaW4uIEl0IGlzbid0IHJlYWxseSBhcHByb3ByaWF0ZSB0byBzYXlcclxuICAgICAgICAvLyB0aGF0IFNCWCBpcyBwcm90ZWN0aW5nIHRoZSB1c2VyIGluIHRoaXMgY2FzZS5cclxuICAgICAgICBpZiAodGhpcy5kb250QXNrQWdhaW4gJiYgbWVzc2FnZSA9PT0gSTE4bk1lc3NhZ2VzLnBvcHVwTm9FcnJvcikge1xyXG4gICAgICAgICAgICBtZXNzYWdlID0gSTE4bk1lc3NhZ2VzLnBvcHVwRG9udEFza0FnYWluO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gU2VuZCB0byB0aGUgcG9wdXAgcGFnZS5cclxuICAgICAgICB0aGlzLnBhZ2VQb3J0Q29udHJvbGxlci5zZW5kTWVzc2FnZShcclxuICAgICAgICAgICAgTWVzc2FnZVR5cGUucG9wdXBEYXRhUmVzcG9uc2VWMTEsXHJcbiAgICAgICAgICAgIG5ldyBQb3B1cERhdGFSZXNwb25zZVYxMShcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2UsXHJcbiAgICAgICAgICAgICAgICB0aGlzLnNob3dDbGVhclJlbWVtYmVyZWREZWNpc2lvbnNJbmZvLFxyXG4gICAgICAgICAgICAgICAgdGhpcy5pc0VudGVycHJpc2VQcm9kdWN0LFxyXG4gICAgICAgICAgICAgICAgdGhpcy5oZWxwTGlua1VSTCkpO1xyXG4gICAgfSBcclxuXHJcbiAgICBwcml2YXRlIGhhbmRsZVBvcHVwRGF0YVJlcXVlc3QobWVzc2FnZTogTWVzc2FnZSkge1xyXG4gICAgICAgIHRoaXMuc2VuZFBvcHVwRGF0YVJlc3BvbnNlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBnZXQgc2hvd0NsZWFyUmVtZW1iZXJlZERlY2lzaW9uc0luZm8oKSB7XHJcbiAgICAgICAgLy8gVGhlIHByb21wdCBpcyBzcGVjaWZpY2FsbHkgZGlzYWJsZWQgYnkgY29uZmlndXJhdGlvbi5cclxuICAgICAgICBpZiAodGhpcy5kb250QXNrQWdhaW4gfHwgdGhpcy5vcGVuUGhpc2hpbmdMaW5rc0luU2VjdXJlQnJvd3Nlcikge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBXaXRob3V0IExpbmsgb3IgUERGIHByb3RlY3Rpb24gdGhlIHVzZXIgaXMgbmV2ZXIgcHJvbXB0ZWQgYW5kIGhlbmNlIHRoZXJlJ3Mgbm8gZGVjaXNpb25zIHRvIHJlbWVtYmVyLlxyXG4gICAgICAgIHJldHVybiB0aGlzLmZlYXR1cmVNYW5hZ2VyLmlzTGlua1Byb3RlY3Rpb25FbmFibGVkIHx8IHRoaXMuZmVhdHVyZU1hbmFnZXIuaXNQREZQcm90ZWN0aW9uRW5hYmxlZDtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHBhZ2VQb3J0Q29udHJvbGxlcjogUGFnZVBvcnRDb250cm9sbGVyO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgUG9wdXBDb250cm9sbGVyIHtcclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgICAgICBwcml2YXRlIGhvc3RIZWxwZXJNZXNzYWdlU2VuZGVyOiBNZXNzYWdlU2VuZGVyLFxyXG4gICAgICAgICAgICBjb25maWdOb3RpZmllcjogSUNvbmZpZ05vdGlmaWVyLFxyXG4gICAgICAgICAgICBlcnJvckhhbmRsZXI6IEVycm9ySGFuZGxlcixcclxuICAgICAgICAgICAgcHJpdmF0ZSBmZWF0dXJlTWFuYWdlcjogSUZlYXR1cmVNYW5hZ2VyLFxyXG4gICAgICAgICAgICBoYW5kc2hha2VyOiBJSGFuZHNoYWtlcikge1xyXG4gICAgICAgIGNvbmZpZ05vdGlmaWVyLmFkZENvbmZpZ0xpc3RlbmVyRm9yS2V5cyhcclxuICAgICAgICAgICAgdGhpcy5vbkNvbmZpZ0NoYW5nZWQuYmluZCh0aGlzKSxcclxuICAgICAgICAgICAgWyBDb25maWdLZXkub3BlblBoaXNoaW5nTGlua3NJblNlY3VyZUJyb3dzZXIsIENvbmZpZ0tleS5pc0VudGVycHJpc2VQcm9kdWN0LCBDb25maWdLZXkuZG9udEFza0FnYWluIF0pO1xyXG4gICAgICAgIHRoaXMucG9ydFJlc29sdmVyID0gbmV3IFBvcnRSZXNvbHZlcihcclxuICAgICAgICAgICAgaG9zdENvbnN0YW50cy5wb3B1cFBvcnROYW1lLFxyXG4gICAgICAgICAgICBwb3J0ID0+IHRoaXMub25VbnJlc29sdmVkUG9ydENvbm5lY3RlZChwb3J0KSk7IFxyXG4gICAgICAgIGNvbnN0IHBvcnQgPSB0aGlzLnBvcnRSZXNvbHZlci5yZXNvbHZlUG9ydCgpO1xyXG5cclxuICAgICAgICB0aGlzLmN1cnJlbnRQb3B1cE1lc3NhZ2UgPSBlcnJvckhhbmRsZXIuaXNEb3JtYW50ID8gSTE4bk1lc3NhZ2VzLnBvcHVwR2VuZXJpY0Vycm9yIDogSTE4bk1lc3NhZ2VzLnBvcHVwTm9FcnJvcjtcclxuICAgICAgICBlcnJvckhhbmRsZXIub25Qb3B1cERhdGFDaGFuZ2VkLnJlZ2lzdGVyRXZlbnRIYW5kbGVyKHRoaXMub25Qb3B1cERhdGFDaGFuZ2VkLmJpbmQodGhpcykpO1xyXG5cclxuICAgICAgICBpZiAoaGFuZHNoYWtlci5pc0hhbmRzaGFrZW4gJiYgc29tZShoYW5kc2hha2VyLm5lZ290aWF0ZWRWZXJzaW9uKSkge1xyXG4gICAgICAgICAgICB0aGlzLm9uSGFuZHNoYWtlbihoYW5kc2hha2VyLm5lZ290aWF0ZWRWZXJzaW9uKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBoYW5kc2hha2VyLm9uSGFuZHNoYWtlbi5yZWdpc3RlckV2ZW50SGFuZGxlcihldmVudCA9PiB0aGlzLm9uSGFuZHNoYWtlbihldmVudC5uZWdvdGlhdGVkVmVyc2lvbikpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5tYWtlTmV3UGFnZUNvbnRyb2xsZXIocG9ydCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBvbkhhbmRzaGFrZW4obmVnb3RpYXRlZFZlcnNpb246IFByb3RvY29sVmVyc2lvbikge1xyXG4gICAgICAgIHRoaXMubmVnb3RpYXRlZFZlcnNpb24gPSBuZWdvdGlhdGVkVmVyc2lvbjtcclxuICAgICAgICB0aGlzLnVwZGF0ZVBvcHVwRGF0YSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgb25Db25maWdDaGFuZ2VkKGtleTogQ29uZmlnS2V5LCBjb25maWc6IENvbmZpZ1JlYWRlcikge1xyXG4gICAgICAgIHN3aXRjaChrZXkpIHtcclxuICAgICAgICAgICAgY2FzZSBDb25maWdLZXkub3BlblBoaXNoaW5nTGlua3NJblNlY3VyZUJyb3dzZXI6XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9wZW5QaGlzaGluZ0xpbmtzSW5TZWN1cmVCcm93c2VyID0gY29uZmlnLm9wZW5QaGlzaGluZ0xpbmtzSW5TZWN1cmVCcm93c2VyO1xyXG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVQb3B1cERhdGEoKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIENvbmZpZ0tleS5pc0VudGVycHJpc2VQcm9kdWN0OlxyXG4gICAgICAgICAgICAgICAgdGhpcy5pc0VudGVycHJpc2VQcm9kdWN0ID0gY29uZmlnLmlzRW50ZXJwcmlzZVByb2R1Y3Q7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVBvcHVwRGF0YSgpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgQ29uZmlnS2V5LmRvbnRBc2tBZ2FpbjpcclxuICAgICAgICAgICAgICAgIHRoaXMuZG9udEFza0FnYWluID0gY29uZmlnLmRvbnRBc2tBZ2FpbjtcclxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlUG9wdXBEYXRhKCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBvblBvcHVwRGF0YUNoYW5nZWQobmV3UG9wdXBNZXNzYWdlOiBJMThuTWVzc2FnZXMpIHtcclxuICAgICAgICBsb2coYFNldHRpbmcgcG9wdXAgbWVzc2FnZSB0byBpbnRlcm5hdGlvbmFsaXNlZCBzdHJpbmcgJHtuZXdQb3B1cE1lc3NhZ2V9YCk7XHJcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudFBvcHVwTWVzc2FnZSAhPT0gbmV3UG9wdXBNZXNzYWdlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY3VycmVudFBvcHVwTWVzc2FnZSA9IG5ld1BvcHVwTWVzc2FnZTtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGVQb3B1cERhdGEoKTtcclxuICAgICAgICB9XHJcbiAgICB9IFxyXG5cclxuICAgIHByaXZhdGUgdXBkYXRlUG9wdXBEYXRhKCkge1xyXG4gICAgICAgIGlmIChzb21lKHRoaXMucG9wdXBQYWdlQ29udHJvbGxlcikpIHtcclxuICAgICAgICAgICAgdGhpcy5wb3B1cFBhZ2VDb250cm9sbGVyLnVwZGF0ZVBvcHVwRGF0YShcclxuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudFBvcHVwTWVzc2FnZSxcclxuICAgICAgICAgICAgICAgIHRoaXMub3BlblBoaXNoaW5nTGlua3NJblNlY3VyZUJyb3dzZXIsXHJcbiAgICAgICAgICAgICAgICB0aGlzLmlzRW50ZXJwcmlzZVByb2R1Y3QsXHJcbiAgICAgICAgICAgICAgICB0aGlzLmRvbnRBc2tBZ2FpbixcclxuICAgICAgICAgICAgICAgIHRoaXMuaGVscExpbmtVUkwpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIG1ha2VOZXdQYWdlQ29udHJvbGxlcihwb3J0OiBQcm9taXNlPGNocm9tZS5ydW50aW1lLlBvcnQ+KSB7XHJcbiAgICAgICAgdGhpcy5wb3B1cFBhZ2VDb250cm9sbGVyID0gbmV3IFBvcHVwUGFnZUNvbnRyb2xsZXIoXHJcbiAgICAgICAgICAgIHBvcnQsXHJcbiAgICAgICAgICAgIHRoaXMuY3VycmVudFBvcHVwTWVzc2FnZSxcclxuICAgICAgICAgICAgdGhpcy5vcGVuUGhpc2hpbmdMaW5rc0luU2VjdXJlQnJvd3NlcixcclxuICAgICAgICAgICAgdGhpcy5pc0VudGVycHJpc2VQcm9kdWN0LFxyXG4gICAgICAgICAgICB0aGlzLmRvbnRBc2tBZ2FpbixcclxuICAgICAgICAgICAgdGhpcy5oZWxwTGlua1VSTCxcclxuICAgICAgICAgICAgKCkgPT4geyB0aGlzLm9uUG9ydERpc2Nvbm5lY3RlZCgpIH0sXHJcbiAgICAgICAgICAgIHRoaXMuaG9zdEhlbHBlck1lc3NhZ2VTZW5kZXIsXHJcbiAgICAgICAgICAgIHRoaXMuZmVhdHVyZU1hbmFnZXIpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgb25Qb3J0RGlzY29ubmVjdGVkKCkge1xyXG4gICAgICAgIHRoaXMucG9wdXBQYWdlQ29udHJvbGxlciA9IHVuZGVmaW5lZDtcclxuICAgICAgICBjb25zdCBwb3J0ID0gdGhpcy5wb3J0UmVzb2x2ZXIucmVzb2x2ZVBvcnQoKTtcclxuICAgICAgICB0aGlzLm1ha2VOZXdQYWdlQ29udHJvbGxlcihwb3J0KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIG9uVW5yZXNvbHZlZFBvcnRDb25uZWN0ZWQocG9ydDogY2hyb21lLnJ1bnRpbWUuUG9ydCkge1xyXG4gICAgICAgIGxvZyhcIlBvcHVwQ29udHJvbGxlci5vblVuZXhwZWN0ZWRQb3J0Q29ubmVjdGVkXCIpO1xyXG4gICAgICAgIC8vIFVzZSB0aGUgdW5yZXNvbHZlZCBwb3J0IGlmIHdlIGRvbid0IGN1cnJlbnRseSBoYXZlIGEgUG9wdXBQYWdlQ29udHJvbGxlci5cclxuICAgICAgICBpZiAobm9uZSh0aGlzLnBvcHVwUGFnZUNvbnRyb2xsZXIpKSB7XHJcbiAgICAgICAgICAgIHRoaXMubWFrZU5ld1BhZ2VDb250cm9sbGVyKG1ha2VQcm9taXNlKCgpID0+IHBvcnQpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBnZXQgaGVscExpbmtVUkwoKSB7XHJcbiAgICAgICAgY29uc3QgaG9zdG5hbWUgPSAoKCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5pc1N1cmVDbGljaykge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNFbnRlcnByaXNlUHJvZHVjdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzdXJlQ2xpY2tBZHZhbmNlZEhlbHBIb3N0bmFtZTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN1cmVDbGlja0hlbHBIb3N0bmFtZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBicm9taXVtSGVscEhvc3RuYW1lO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSkoKTtcclxuICAgICAgICBjb25zdCB2ZXJzaW9uID0gZ2V0SGVscFBhZ2VWZXJzaW9uKHRoaXMubmVnb3RpYXRlZFZlcnNpb24pO1xyXG4gICAgICAgIGNvbnN0IGxvY2FsaXNlZEhlbHBGaWxlID0gZ2V0STE4bihJMThuTWVzc2FnZXMuaGVscExpbmtGaWxlKTtcclxuICAgICAgICByZXR1cm4gYCR7aG9zdG5hbWV9L3NlY3VyZS1icm93c2luZy8ke3ZlcnNpb259LyR7bG9jYWxpc2VkSGVscEZpbGV9YDtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGN1cnJlbnRQb3B1cE1lc3NhZ2U6IEkxOG5NZXNzYWdlcztcclxuICAgIHByaXZhdGUgb3BlblBoaXNoaW5nTGlua3NJblNlY3VyZUJyb3dzZXIgPSBmYWxzZTtcclxuXHJcbiAgICAvLyBEZWZhdWx0IHRvIGZhbHNlIHNvIHRoYXQgaWYgd2UncmUgdXNpbmcgYW4gb2xkIHByb3RvY29sIHZlcnNpb24gd2hpY2hcclxuICAgIC8vIGRvZXNuJ3Qga25vdyBhYm91dCBpc0VudGVycHJpc2VQcm9kdWN0IHRoZW4gd2UgcHJlc2VydmUgdGhlIG9sZCBiZWhhdmlvdXJcclxuICAgIHByaXZhdGUgaXNFbnRlcnByaXNlUHJvZHVjdCA9IGZhbHNlO1xyXG4gICAgLy8gU2FtZSBmb3IgZG9udEFza0FnYWluXHJcbiAgICBwcml2YXRlIGRvbnRBc2tBZ2FpbiA9IGZhbHNlO1xyXG5cclxuICAgIHByaXZhdGUgbmVnb3RpYXRlZFZlcnNpb246IE1heWJlPFByb3RvY29sVmVyc2lvbj47XHJcbiAgICBwcml2YXRlIGlzU3VyZUNsaWNrID0gaXNTdXJlQ2xpY2soKTtcclxuICAgIHByaXZhdGUgcG9ydFJlc29sdmVyOiBQb3J0UmVzb2x2ZXI7XHJcbiAgICBwcml2YXRlIHBvcHVwUGFnZUNvbnRyb2xsZXI6IE1heWJlPFBvcHVwUGFnZUNvbnRyb2xsZXI+O1xyXG59XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vcG9wdXAtcGFnZS1jb250cm9sbGVyLnRzIiwiLy8gQ29weXJpZ2h0IChjKSAyMDE4IEJyb21pdW0sIEluYy5cclxuLy8gVXNlIG9mIHRoZSBCcm9taXVtLCBJbmMuIHNvZnR3YXJlIHJlcXVpcmVzIGEgbGljZW5zZSBhZ3JlZW1lbnQgd2l0aCBCcm9taXVtLCBJbmMuIG9yIGFuIGF1dGhvcml6ZWQgcmVzZWxsZXIuXHJcblxyXG5pbXBvcnQgeyBub25lIH0gZnJvbSBcIi4vbWF5YmVcIjtcclxuaW1wb3J0IHsgUmVzb2x2ZXIsIG1ha2VQcm9taXNlQXN5bmMgfSBmcm9tIFwiLi9wcm9taXNlLXV0aWxzXCI7XHJcbmltcG9ydCB7IGNvbXBhcmVTdHJpbmdzIH0gZnJvbSBcIi4vc3RyaW5nLXV0aWxzXCI7XHJcblxyXG5leHBvcnQgdHlwZSBPblVucmVzb2x2ZWRQb3J0Q29ubmVjdGVkID0gKHBvcnQ6IGNocm9tZS5ydW50aW1lLlBvcnQpID0+IHZvaWQ7XHJcblxyXG5leHBvcnQgY2xhc3MgUG9ydFJlc29sdmVyIHtcclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgIHByaXZhdGUgcG9ydE5hbWU6IHN0cmluZyxcclxuICAgICAgICBwcml2YXRlIG9uVW5yZXNvbHZlZFBvcnRDb25uZWN0ZWQ6IE9uVW5yZXNvbHZlZFBvcnRDb25uZWN0ZWQpIHtcclxuICAgICAgICBjaHJvbWUucnVudGltZS5vbkNvbm5lY3QuYWRkTGlzdGVuZXIoXHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uUG9ydENvbm5lY3RlZC5iaW5kKHRoaXMpKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIG9uUG9ydENvbm5lY3RlZChwb3J0OiBjaHJvbWUucnVudGltZS5Qb3J0KSB7XHJcbiAgICAgICAgaWYgKCFjb21wYXJlU3RyaW5ncyhwb3J0Lm5hbWUsIHRoaXMucG9ydE5hbWUpKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG5vbmUodGhpcy5yZXNvbHZlcikpIHtcclxuICAgICAgICAgICAgdGhpcy5vblVucmVzb2x2ZWRQb3J0Q29ubmVjdGVkKHBvcnQpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMucmVzb2x2ZXIocG9ydCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVzb2x2ZVBvcnQoKTogUHJvbWlzZTxjaHJvbWUucnVudGltZS5Qb3J0PiB7XHJcbiAgICAgICAgcmV0dXJuIG1ha2VQcm9taXNlQXN5bmMoKHJlc29sdmUpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5yZXNvbHZlciA9IHJlc29sdmU7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSByZXNvbHZlcjogUmVzb2x2ZXI8Y2hyb21lLnJ1bnRpbWUuUG9ydD4gfCB1bmRlZmluZWQgPSB1bmRlZmluZWQ7XHJcbn1cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4uL2xpYi9jb21tb24vcG9ydC1yZXNvbHZlci50cyIsIi8vIENvcHlyaWdodCAoYykgMjAxOCBCcm9taXVtLCBJbmMuXHJcbi8vIFVzZSBvZiB0aGUgQnJvbWl1bSwgSW5jLiBzb2Z0d2FyZSByZXF1aXJlcyBhIGxpY2Vuc2UgYWdyZWVtZW50IHdpdGggQnJvbWl1bSwgSW5jLiBvciBhbiBhdXRob3JpemVkIHJlc2VsbGVyLlxyXG5cclxuLy8vIDxyZWZlcmVuY2UgdHlwZXM9XCJjaHJvbWVcIi8+XHJcbmltcG9ydCB7IE1lc3NhZ2VTZW5kZXIgfSBmcm9tIFwiLi9tZXNzYWdlLXNlbmRlclwiO1xyXG5pbXBvcnQgeyBNZXNzYWdlLCBIYW5kc2hha2VWMSwgbWVzc2FnZVRvU3RyaW5nIH0gZnJvbSBcIi4vbWVzc2FnZXNcIjtcclxuaW1wb3J0IHsgTWVzc2FnZVR5cGUsIGlzRnJlcXVlbnRseVNlbnRNZXNzYWdlVHlwZSwgaXNFZGdlQWNrV29ya2Fyb3VuZCB9IGZyb20gXCIuL21lc3NhZ2UtdHlwZXNcIjtcclxuaW1wb3J0IHsgZW5jb2RlTWVzc2FnZSB9IGZyb20gXCIuL21lc3NhZ2UtZW5jb2RlclwiO1xyXG5pbXBvcnQgeyBkZWNvZGVNZXNzYWdlIH0gZnJvbSBcIi4vbWVzc2FnZS1kZWNvZGVyXCI7XHJcbmltcG9ydCB7IE1heWJlLCBub25lLCBzb21lIH0gZnJvbSBcIi4vbWF5YmVcIjtcclxuaW1wb3J0IHsgSU1lc3NhZ2VSZWNlaXZlciB9IGZyb20gXCIuL21lc3NhZ2UtcmVjZWl2ZXJcIjtcclxuaW1wb3J0IHsgRXZlbnREaXNwYXRjaGVyIH0gZnJvbSBcIi4vZXZlbnQtZGlzcGF0Y2hlclwiO1xyXG5pbXBvcnQgeyBJSGFuZHNoYWtlciwgSGFuZHNoYWtlbkV2ZW50IH0gZnJvbSBcIi4vaGFuZHNoYWtlclwiO1xyXG5pbXBvcnQgeyB0b1N0cmluZyB9IGZyb20gXCIuL3N0cmluZy11dGlsc1wiO1xyXG5pbXBvcnQgeyBpc0Vycm9yIH0gZnJvbSBcIi4vZXJyb3JzXCI7XHJcbmltcG9ydCB7IHBvcnRUb1N0cmluZyB9IGZyb20gXCIuL3BvcnQtdXRpbHNcIjtcclxuaW1wb3J0IHsgc3VwcG9ydGVkUHJvdG9jb2xWZXJzaW9ucywgUHJvdG9jb2xWZXJzaW9uLCBzaG91bGRMb2dNZXNzYWdlIH0gZnJvbSBcIi4vcHJvdG9jb2wtdmVyc2lvbnNcIjtcclxuaW1wb3J0IHsgSUNvbm5lY3Rpb24sIENvbm5lY3Rpb25TdGF0ZSwgQ29ubmVjdGlvblN0YXRlQ2hhbmdlZEV2ZW50IH0gZnJvbSBcIi4vY29ubmVjdGlvblwiO1xyXG5pbXBvcnQgeyBsb2csIGxvZ0Vycm9yIH0gZnJvbSBcIi4vbG9nXCI7XHJcblxyXG5leHBvcnQgdHlwZSBPbkNvbm5lY3QgPSAocG9ydDogY2hyb21lLnJ1bnRpbWUuUG9ydCkgPT4gdm9pZDtcclxuZXhwb3J0IHR5cGUgT25EaXNjb25uZWN0ID0gKHBvcnQ6IGNocm9tZS5ydW50aW1lLlBvcnQpID0+IHZvaWQ7XHJcbmV4cG9ydCB0eXBlIE9uUG9ydEVycm9yID0gKGU6IEVycm9yKSA9PiB2b2lkO1xyXG5leHBvcnQgdHlwZSBPbk5lZ290aWF0aW9uRXJyb3IgPSAoZTogRXJyb3IpID0+IHZvaWQ7XHJcblxyXG5leHBvcnQgZW51bSBOZWdvdGlhdGlvbiB7XHJcbiAgICBOb25lLFxyXG4gICAgTmVnb3RpYXRlUHJvdG9jb2xWZXJzaW9uXHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSU1lc3NhZ2VQb3J0Q2hhbm5lbCBleHRlbmRzIElIYW5kc2hha2VyLCBJQ29ubmVjdGlvbiB7XHJcbiAgICBjb25uZWN0KCk6IHZvaWQ7XHJcbiAgICBkaXNjb25uZWN0KCk6IHZvaWQ7XHJcbiAgICBzZW5kTWVzc2FnZShtZXNzYWdlOiBNZXNzYWdlKTogYm9vbGVhbjtcclxuICAgIHJlYWRvbmx5IG1lc3NhZ2VTZW5kZXI6IE1lc3NhZ2VTZW5kZXI7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBNZXNzYWdlUG9ydENoYW5uZWwgaW1wbGVtZW50cyBJTWVzc2FnZVBvcnRDaGFubmVsIHtcclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgICAgICBwcml2YXRlIGNvbm5lY3RUb1BvcnQ6IFByb21pc2U8Y2hyb21lLnJ1bnRpbWUuUG9ydD4sXHJcbiAgICAgICAgICAgIHByaXZhdGUgb25Db25uZWN0OiBPbkNvbm5lY3QsXHJcbiAgICAgICAgICAgIHByaXZhdGUgb25EaXNjb25uZWN0OiBPbkRpc2Nvbm5lY3QsXHJcbiAgICAgICAgICAgIHByaXZhdGUgb25Qb3J0RXJyb3I6IE9uUG9ydEVycm9yLFxyXG4gICAgICAgICAgICBwcml2YXRlIG9uTmVnb3RpYXRpb25FcnJvcjogT25OZWdvdGlhdGlvbkVycm9yLFxyXG4gICAgICAgICAgICBwcml2YXRlIG1lc3NhZ2VSb3V0ZXI6IElNZXNzYWdlUmVjZWl2ZXIsXHJcbiAgICAgICAgICAgIHByaXZhdGUgbmVnb3RpYXRpb24gOiBOZWdvdGlhdGlvbikge1xyXG4gICAgICAgIHRoaXMubWVzc2FnZVNlbmRlciA9IG5ldyBNZXNzYWdlU2VuZGVyKChtZXNzYWdlKSA9PiB0aGlzLnNlbmRNZXNzYWdlKG1lc3NhZ2UpKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGRpc2Nvbm5lY3RQb3J0KHBvcnQ6IGNocm9tZS5ydW50aW1lLlBvcnQpIHtcclxuICAgICAgICBwb3J0LmRpc2Nvbm5lY3QoKTtcclxuICAgICAgICB0aGlzLmhhbmRsZURpc2Nvbm5lY3QocG9ydCk7XHJcbiAgICB9XHJcblxyXG4gICAgY29ubmVjdCgpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhcIk1lc3NhZ2VQb3J0Q2hhbm5lbC5jb25uZWN0XCIpO1xyXG4gICAgICAgIGlmICh0aGlzLmNvbm5TdGF0ZSAhPT0gQ29ubmVjdGlvblN0YXRlLkRpc2Nvbm5lY3RlZCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYE1lc3NhZ2VQb3J0Q2hhbm5lbC5jb25uZWN0IGNhbGxlZCB3aXRoIGNvbm5TdGF0ZSA9PSAke3RoaXMuY29ublN0YXRlfWApO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmNvbm5TdGF0ZSA9IENvbm5lY3Rpb25TdGF0ZS5Db25uZWN0aW5nO1xyXG4gICAgICAgIHRoaXMuY29ubmVjdFRvUG9ydC50aGVuKChwb3J0OiBjaHJvbWUucnVudGltZS5Qb3J0KSA9PiB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbm5TdGF0ZSA9PT0gQ29ubmVjdGlvblN0YXRlLkRpc2Nvbm5lY3RpbmcpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGlzY29ubmVjdFBvcnQocG9ydCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5wb3J0ID0gcG9ydDtcclxuICAgICAgICAgICAgdGhpcy5wb3J0Lm9uTWVzc2FnZS5hZGRMaXN0ZW5lcigoZW5jb2RlTWVzc2FnZSwgcG9ydCkgPT4gdGhpcy5vbk1lc3NhZ2UoZW5jb2RlTWVzc2FnZSwgcG9ydCkpO1xyXG4gICAgICAgICAgICB0aGlzLnBvcnQub25EaXNjb25uZWN0LmFkZExpc3RlbmVyKChwb3J0KSA9PiB0aGlzLmhhbmRsZURpc2Nvbm5lY3QocG9ydCkpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5uZWdvdGlhdGlvbiA9PT0gTmVnb3RpYXRpb24uTmVnb3RpYXRlUHJvdG9jb2xWZXJzaW9uKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbm5TdGF0ZSA9IENvbm5lY3Rpb25TdGF0ZS5IYW5kc2hha2luZztcclxuICAgICAgICAgICAgICAgIGNvbnN0IGhhbmRzaGFrZSA9IG5ldyBIYW5kc2hha2VWMShzdXBwb3J0ZWRQcm90b2NvbFZlcnNpb25zKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBlbmNvZGVNZXNzYWdlKE1lc3NhZ2VUeXBlLmhhbmRzaGFrZVYxLCBoYW5kc2hha2UpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wb3N0TWVzc2FnZShtZXNzYWdlKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VuZFF1ZXVlZE1lc3NhZ2VzKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbm5TdGF0ZSA9IENvbm5lY3Rpb25TdGF0ZS5Db25uZWN0ZWQ7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uQ29ubmVjdCh0aGlzLnBvcnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZGlzY29ubmVjdCgpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhgTWVzc2FnZVBvcnRDaGFubmVsLmNvbm5lY3Q6IGNvbm5TdGF0ZSA9PSAke3RoaXMuY29ublN0YXRlfWApO1xyXG4gICAgICAgIHN3aXRjaCAodGhpcy5jb25uU3RhdGUpIHtcclxuICAgICAgICAgICAgY2FzZSBDb25uZWN0aW9uU3RhdGUuRGlzY29ubmVjdGVkOlxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgQ29ubmVjdGlvblN0YXRlLkRpc2Nvbm5lY3Rpbmc6XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBDb25uZWN0aW9uU3RhdGUuQ29ubmVjdGluZzpcclxuICAgICAgICAgICAgICAgIHRoaXMuY29ublN0YXRlID0gQ29ubmVjdGlvblN0YXRlLkRpc2Nvbm5lY3Rpbmc7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBDb25uZWN0aW9uU3RhdGUuSGFuZHNoYWtpbmc6XHJcbiAgICAgICAgICAgICAgICBpZiAoc29tZSh0aGlzLnBvcnQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNjb25uZWN0UG9ydCh0aGlzLnBvcnQpXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBDb25uZWN0aW9uU3RhdGUuQ29ubmVjdGVkOlxyXG4gICAgICAgICAgICAgICAgaWYgKHNvbWUodGhpcy5wb3J0KSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzY29ubmVjdFBvcnQodGhpcy5wb3J0KVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcG9zdE1lc3NhZ2UobWVzc2FnZTogTWVzc2FnZSkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChub25lKHRoaXMucG9ydCkpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk1lc3NhZ2VQb3J0Q2hhbm5lbC5wb3N0TWVzc2FnZTogdGhpcy5wb3J0ID09PSB1bmRlZmluZWRcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKCFpc0ZyZXF1ZW50bHlTZW50TWVzc2FnZVR5cGUobWVzc2FnZS50eXBlKSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5sb2coYE1lc3NhZ2VQb3J0Q2hhbm5lbC5wb3N0TWVzc2FnZTogbWVzc2FnZTogJHttZXNzYWdlVG9TdHJpbmcobWVzc2FnZSl9YCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5wb3J0LnBvc3RNZXNzYWdlKG1lc3NhZ2UpO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgaWYgKGlzRXJyb3IoZSkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMub25Qb3J0RXJyb3IoZSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBlcnJvciA9IG5ldyBFcnJvcihgVW5rbm93biBlcnJvciBjYXVnaHQgaW4gcG9zdE1lc3NhZ2U6ICR7dG9TdHJpbmcoZSl9YCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uUG9ydEVycm9yKGVycm9yKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNlbmRRdWV1ZWRNZXNzYWdlcygpIHtcclxuICAgICAgICBmb3IgKGNvbnN0IG1lc3NhZ2Ugb2YgdGhpcy5tZXNzYWdlcykge1xyXG4gICAgICAgICAgICB0aGlzLnBvc3RNZXNzYWdlKG1lc3NhZ2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLm1lc3NhZ2VzID0gW107XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBxdWV1ZU1lc3NhZ2UobWVzc2FnZTogTWVzc2FnZSkge1xyXG4gICAgICAgIHRoaXMubWVzc2FnZXMucHVzaChtZXNzYWdlKTtcclxuICAgIH1cclxuXHJcbiAgICBzZW5kTWVzc2FnZShtZXNzYWdlOiBNZXNzYWdlKTogYm9vbGVhbiB7XHJcbiAgICAgICAgaWYgKHRoaXMuY29ublN0YXRlID09PSBDb25uZWN0aW9uU3RhdGUuQ29ubmVjdGVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMucG9zdE1lc3NhZ2UobWVzc2FnZSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5xdWV1ZU1lc3NhZ2UobWVzc2FnZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgb25NZXNzYWdlKGVuY29kZWRNZXNzYWdlOiBvYmplY3QsIHBvcnQ6IGNocm9tZS5ydW50aW1lLlBvcnQpOiB2b2lkIHtcclxuICAgICAgICBpZiAodGhpcy5jb25uU3RhdGUgPT09IENvbm5lY3Rpb25TdGF0ZS5IYW5kc2hha2luZykge1xyXG4gICAgICAgICAgICB0aGlzLmxvZyhgTWVzc2FnZVBvcnRDaGFubmVsLm9uTWVzc2FnZTogbWVzc2FnZTogJHt0b1N0cmluZyhlbmNvZGVkTWVzc2FnZSl9IHBvcnQ6ICR7cG9ydFRvU3RyaW5nKHBvcnQpfWApO1xyXG4gICAgICAgICAgICBsZXQgbWVzc2FnZSA9IGRlY29kZU1lc3NhZ2UoZW5jb2RlZE1lc3NhZ2UpO1xyXG4gICAgICAgICAgICBpZiAobm9uZShtZXNzYWdlKSkge1xyXG4gICAgICAgICAgICAgICAgLy8gU2hvdWxkIHRoaXMgY2FsbCBvblBvcnRFcnJvcj8gSXQgbWlnaHQgbm90IGJlIHNlcmlvdXMgZW5vdWdoLlxyXG4gICAgICAgICAgICAgICAgdGhpcy5sb2dFcnJvcihuZXcgRXJyb3IoJ01lc3NhZ2VQb3J0Q2hhbm5lbC5vbk1lc3NhZ2U6IGludmFsaWQgbWVzc2FnZScpKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChpc0VkZ2VBY2tXb3JrYXJvdW5kKG1lc3NhZ2UudHlwZSkpIHtcclxuICAgICAgICAgICAgICAgIC8vIEVkZ2UgYWNrIG1lc3NhZ2Ugd29ya2Fyb3VuZFxyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKG1lc3NhZ2UudHlwZSAhPT0gTWVzc2FnZVR5cGUuaGFuZHNoYWtlVjEpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMub25OZWdvdGlhdGlvbkVycm9yKG5ldyBFcnJvcihgTWVzc2FnZSBiZWZvcmUgaGFuZHNoYWtlbjogJHttZXNzYWdlLnR5cGV9YCkpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKG5vbmUodGhpcy5wb3J0KSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vblBvcnRFcnJvcihuZXcgRXJyb3IoXCJNZXNzYWdlUG9ydENoYW5uZWwub25NZXNzYWdlOiB0aGlzLnBvcnQgPT09IHVuZGVmaW5lZFwiKSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBoYW5kc2hha2UgPSBtZXNzYWdlLnBheWxvYWQgYXMgSGFuZHNoYWtlVjE7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHN1cHBvcnRlZFZlcnNpb24gb2Ygc3VwcG9ydGVkUHJvdG9jb2xWZXJzaW9ucykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChoYW5kc2hha2UudmVyc2lvbnMuaW5kZXhPZihzdXBwb3J0ZWRWZXJzaW9uKSA+PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX25lZ290aWF0ZWRWZXJzaW9uID0gc3VwcG9ydGVkVmVyc2lvbjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2coYE5lZ290aWF0ZWQgcHJvdG9jb2wgdmVyc2lvbjogJHt0aGlzLl9uZWdvdGlhdGVkVmVyc2lvbn1gKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZW5kUXVldWVkTWVzc2FnZXMoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb25uU3RhdGUgPSBDb25uZWN0aW9uU3RhdGUuQ29ubmVjdGVkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9uSGFuZHNoYWtlbi5kaXNwYXRjaEV2ZW50KG5ldyBIYW5kc2hha2VuRXZlbnQodGhpcy5fbmVnb3RpYXRlZFZlcnNpb24pKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkNvbm5lY3QodGhpcy5wb3J0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uTmVnb3RpYXRpb25FcnJvcihuZXcgRXJyb3IoYE5vIHN1cHBvcnRlZCB2ZXJzaW9uIHJlY2VpdmVkIGluIGhhbmRzaGFrZTogJHtoYW5kc2hha2UudmVyc2lvbnN9YCkpO1xyXG4gICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuY29ublN0YXRlID09IENvbm5lY3Rpb25TdGF0ZS5Db25uZWN0ZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5tZXNzYWdlUm91dGVyLm9uTWVzc2FnZVJlY2VpdmVkKHBvcnQsIGVuY29kZWRNZXNzYWdlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBoYW5kbGVEaXNjb25uZWN0KHBvcnQ6IGNocm9tZS5ydW50aW1lLlBvcnQpOiB2b2lkIHtcclxuICAgICAgICBpZiAodGhpcy5jb25uU3RhdGUgPT09IENvbm5lY3Rpb25TdGF0ZS5EaXNjb25uZWN0ZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmNvbm5TdGF0ZSA9IENvbm5lY3Rpb25TdGF0ZS5EaXNjb25uZWN0ZWQ7XHJcbiAgICAgICAgdGhpcy5wb3J0ID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGBNZXNzYWdlUG9ydENoYW5uZWwuaGFuZGxlRGlzY29ubmVjdDogcG9ydDogJHtwb3J0VG9TdHJpbmcocG9ydCl9YCk7XHJcbiAgICAgICAgdGhpcy5vbkRpc2Nvbm5lY3QocG9ydCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzaG91bGRMb2dNZXNzYWdlKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIC8vIFdlIHNob3VsZCBhbHdheXMgbG9nIGZyb20gaW50cmEtZXh0ZW5zaW9uIE1lc3NhZ2VQb3J0Q2hhbm5lbHMgc3VjaCBhcyB0aG9zZSBmb3IgdGhlIHBvcHVwIG9yIGJsb2NraW5nIHBhZ2VcclxuICAgICAgICBpZiAodGhpcy5uZWdvdGlhdGlvbiA9PT0gTmVnb3RpYXRpb24uTm9uZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIE9ubHkgbG9nIGZvciB0aGUgSG9zdEhlbHBlciBjaGFubmVsIGlmIHdlJ3JlIG9uIGFuIG9sZCBwcm90b2NvbCB2ZXJzaW9uIGJlZm9yZSB0aGUgaGVscGVyIHN0YXJ0ZWQgbG9nZ2luZ1xyXG4gICAgICAgIHJldHVybiBzb21lKHRoaXMubmVnb3RpYXRlZFZlcnNpb24pICYmIHNob3VsZExvZ01lc3NhZ2UodGhpcy5uZWdvdGlhdGVkVmVyc2lvbik7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIGxvZyhtZXNzYWdlOiBzdHJpbmcpIHtcclxuICAgICAgICBpZiAodGhpcy5zaG91bGRMb2dNZXNzYWdlKCkpIHtcclxuICAgICAgICAgICAgbG9nKG1lc3NhZ2UpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKG1lc3NhZ2UpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgbG9nRXJyb3IoZXJyb3I6IEVycm9yKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuc2hvdWxkTG9nTWVzc2FnZSgpKSB7XHJcbiAgICAgICAgICAgIGxvZ0Vycm9yKGVycm9yKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBnZXQgY29ublN0YXRlKCk6IENvbm5lY3Rpb25TdGF0ZSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Nvbm5TdGF0ZTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNldCBjb25uU3RhdGUobmV3U3RhdGUpIHtcclxuICAgICAgICBjb25zdCBvbGRTdGF0ZSA9IHRoaXMuX2Nvbm5TdGF0ZTtcclxuICAgICAgICB0aGlzLl9jb25uU3RhdGUgPSBuZXdTdGF0ZTtcclxuICAgICAgICB0aGlzLm9uQ29ubmVjdGlvblN0YXRlQ2hhbmdlZC5kaXNwYXRjaEV2ZW50KG5ldyBDb25uZWN0aW9uU3RhdGVDaGFuZ2VkRXZlbnQob2xkU3RhdGUsIG5ld1N0YXRlKSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGlzSGFuZHNoYWtlbigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jb25uU3RhdGUgPT09IENvbm5lY3Rpb25TdGF0ZS5Db25uZWN0ZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IG5lZ290aWF0ZWRWZXJzaW9uKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9uZWdvdGlhdGVkVmVyc2lvbjtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgY29ubmVjdGlvblN0YXRlKCk6IENvbm5lY3Rpb25TdGF0ZSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY29ublN0YXRlO1xyXG4gICAgfVxyXG5cclxuICAgIHJlYWRvbmx5IG1lc3NhZ2VTZW5kZXI6IE1lc3NhZ2VTZW5kZXI7XHJcbiAgICByZWFkb25seSBvbkhhbmRzaGFrZW4gPSBuZXcgRXZlbnREaXNwYXRjaGVyPEhhbmRzaGFrZW5FdmVudD4oKTtcclxuICAgIHJlYWRvbmx5IG9uQ29ubmVjdGlvblN0YXRlQ2hhbmdlZCA9IG5ldyBFdmVudERpc3BhdGNoZXI8Q29ubmVjdGlvblN0YXRlQ2hhbmdlZEV2ZW50PigpO1xyXG5cclxuICAgIHByaXZhdGUgcG9ydDogTWF5YmU8Y2hyb21lLnJ1bnRpbWUuUG9ydD47XHJcbiAgICBwcml2YXRlIG1lc3NhZ2VzID0gbmV3IEFycmF5PE1lc3NhZ2U+KCk7XHJcbiAgICBwcml2YXRlIF9jb25uU3RhdGUgPSBDb25uZWN0aW9uU3RhdGUuRGlzY29ubmVjdGVkO1xyXG4gICAgcHJpdmF0ZSBfbmVnb3RpYXRlZFZlcnNpb246IE1heWJlPFByb3RvY29sVmVyc2lvbj4gPSB1bmRlZmluZWQ7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBHZW5lcmljTWVzc2FnZVBvcnRDaGFubmVsIGV4dGVuZHMgTWVzc2FnZVBvcnRDaGFubmVsIHtcclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgIGNvbm5lY3RUb1BvcnQ6IFByb21pc2U8Y2hyb21lLnJ1bnRpbWUuUG9ydD4sXHJcbiAgICAgICAgb25Db25uZWN0OiBPbkNvbm5lY3QsXHJcbiAgICAgICAgb25EaXNjb25uZWN0OiBPbkRpc2Nvbm5lY3QsXHJcbiAgICAgICAgbWVzc2FnZVJvdXRlcjogSU1lc3NhZ2VSZWNlaXZlcixcclxuICAgICAgICBuZWdvdGlhdGlvbiA6IE5lZ290aWF0aW9uKSB7XHJcbiAgICAgICAgICAgIHN1cGVyKGNvbm5lY3RUb1BvcnQsXHJcbiAgICAgICAgICAgICAgICBvbkNvbm5lY3QsXHJcbiAgICAgICAgICAgICAgICBvbkRpc2Nvbm5lY3QsXHJcbiAgICAgICAgICAgICAgICAoZTogRXJyb3IpID0+IHsgY29uc29sZS5lcnJvcihlKSB9LFxyXG4gICAgICAgICAgICAgICAgKGU6IEVycm9yKSA9PiB7IGNvbnNvbGUuZXJyb3IoZSkgfSxcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2VSb3V0ZXIsXHJcbiAgICAgICAgICAgICAgICBuZWdvdGlhdGlvbik7XHJcbiAgICB9XHJcbn1cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi4vbGliL2NvbW1vbi9tZXNzYWdlLXBvcnQtY2hhbm5lbC50cyIsIi8vIENvcHlyaWdodCAoYykgMjAxOCBCcm9taXVtLCBJbmMuXHJcbi8vIFVzZSBvZiB0aGUgQnJvbWl1bSwgSW5jLiBzb2Z0d2FyZSByZXF1aXJlcyBhIGxpY2Vuc2UgYWdyZWVtZW50IHdpdGggQnJvbWl1bSwgSW5jLiBvciBhbiBhdXRob3JpemVkIHJlc2VsbGVyLlxyXG5cclxuaW1wb3J0IHsgTWVzc2FnZVR5cGUgfSBmcm9tIFwiLi9tZXNzYWdlLXR5cGVzXCI7XHJcbmltcG9ydCB7IE1lc3NhZ2VQYXlsb2FkLCBNZXNzYWdlIH0gZnJvbSBcIi4vbWVzc2FnZXNcIjtcclxuaW1wb3J0IHsgZW5jb2RlTWVzc2FnZSB9IGZyb20gXCIuL21lc3NhZ2UtZW5jb2RlclwiO1xyXG5cclxudHlwZSBTZW5kTWVzc2FnZSA9IChtZXNzYWdlOiBNZXNzYWdlKSA9PiBib29sZWFuO1xyXG5cclxuZXhwb3J0IGNsYXNzIE1lc3NhZ2VTZW5kZXIge1xyXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBkb1NlbmRNZXNzYWdlOiBTZW5kTWVzc2FnZSkgeyB9XHJcblxyXG4gICAgc2VuZE1lc3NhZ2UodHlwZTogTWVzc2FnZVR5cGUsIHBheWxvYWQ6IE1lc3NhZ2VQYXlsb2FkKTogYm9vbGVhbiB7XHJcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGVuY29kZU1lc3NhZ2UodHlwZSwgcGF5bG9hZCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZG9TZW5kTWVzc2FnZShtZXNzYWdlKTtcclxuICAgIH1cclxufVxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuLi9saWIvY29tbW9uL21lc3NhZ2Utc2VuZGVyLnRzIiwiLy8gQ29weXJpZ2h0IChjKSAyMDE4IEJyb21pdW0sIEluYy5cclxuLy8gVXNlIG9mIHRoZSBCcm9taXVtLCBJbmMuIHNvZnR3YXJlIHJlcXVpcmVzIGEgbGljZW5zZSBhZ3JlZW1lbnQgd2l0aCBCcm9taXVtLCBJbmMuIG9yIGFuIGF1dGhvcml6ZWQgcmVzZWxsZXIuXHJcblxyXG5pbXBvcnQgeyBNZXNzYWdlVHlwZSB9IGZyb20gXCIuL21lc3NhZ2UtdHlwZXNcIjtcclxuaW1wb3J0IHsgTWVzc2FnZSwgTWVzc2FnZVBheWxvYWQgfSBmcm9tIFwiLi9tZXNzYWdlc1wiO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGVuY29kZU1lc3NhZ2UodHlwZTogTWVzc2FnZVR5cGUsIHBheWxvYWQ6IE1lc3NhZ2VQYXlsb2FkKTogTWVzc2FnZSB7XHJcbiAgICByZXR1cm4geyB0eXBlOiB0eXBlLCBwYXlsb2FkOiBwYXlsb2FkIH07XHJcbn1cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi4vbGliL2NvbW1vbi9tZXNzYWdlLWVuY29kZXIudHMiLCIvLyBDb3B5cmlnaHQgKGMpIDIwMTggQnJvbWl1bSwgSW5jLlxyXG4vLyBVc2Ugb2YgdGhlIEJyb21pdW0sIEluYy4gc29mdHdhcmUgcmVxdWlyZXMgYSBsaWNlbnNlIGFncmVlbWVudCB3aXRoIEJyb21pdW0sIEluYy4gb3IgYW4gYXV0aG9yaXplZCByZXNlbGxlci5cclxuXHJcbmltcG9ydCB7IENvbmRpdGlvbkRpc3BhdGNoZXIsIEhhbmRsZUNvbmRpdGlvbiB9IGZyb20gXCIuL2V2ZW50LWRpc3BhdGNoZXJcIjtcclxuaW1wb3J0IHsgZG9PbmNlIH0gZnJvbSBcIi4vb25jZVwiO1xyXG5pbXBvcnQgeyBsb2cgfSBmcm9tIFwiLi9sb2dcIjtcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSU9uQ29uZmlndXJlZCB7XHJcbiAgICByZWdpc3Rlckxpc3RlbmVyKGxpc3RlbmVyOiBIYW5kbGVDb25kaXRpb24pOiB2b2lkO1xyXG4gICAgcmVhZG9ubHkgaXNDb25maWd1cmVkOiBib29sZWFuO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElPbkNvbmZpZ3VyZWRSYWlzZXIge1xyXG4gICAgb25Db25maWd1cmVkKCk6IHZvaWQ7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBPbkNvbmZpZ3VyZWRNYW5hZ2VyIGltcGxlbWVudHMgSU9uQ29uZmlndXJlZCwgSU9uQ29uZmlndXJlZFJhaXNlciB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHsgfVxyXG5cclxuICAgIG9uQ29uZmlndXJlZCA9IGRvT25jZSgoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5jb25maWd1cmVkID0gdHJ1ZTtcclxuICAgICAgICBsb2coXCJPbkNvbmZpZ3VyZWRNYW5hZ2VyOiBTQlggaXMgZnVsbHkgY29uZmlndXJlZFwiKVxyXG4gICAgICAgIHRoaXMub25Db25maWd1cmVkRGlzcGF0Y2hlci5zZXRDb25kaXRpb24oKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHJlZ2lzdGVyTGlzdGVuZXIobGlzdGVuZXI6IEhhbmRsZUNvbmRpdGlvbikge1xyXG4gICAgICAgIHRoaXMub25Db25maWd1cmVkRGlzcGF0Y2hlci5yZWdpc3RlckNvbmRpdGlvbkxpc3RlbmVyKGxpc3RlbmVyKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgaXNDb25maWd1cmVkKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNvbmZpZ3VyZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgcmVhZG9ubHkgb25Db25maWd1cmVkRGlzcGF0Y2hlciA9IG5ldyBDb25kaXRpb25EaXNwYXRjaGVyKCk7XHJcbiAgICBwcml2YXRlIGNvbmZpZ3VyZWQgPSBmYWxzZTtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIER1bW15T25Db25maWd1cmVkIGltcGxlbWVudHMgSU9uQ29uZmlndXJlZCB7XHJcbiAgICByZWdpc3Rlckxpc3RlbmVyKGxpc3RlbmVyOiBIYW5kbGVDb25kaXRpb24pIHtcclxuICAgICAgICBsaXN0ZW5lcigpO1xyXG4gICAgfVxyXG5cclxuICAgIGlzQ29uZmlndXJlZCA9IHRydWU7XHJcbn1cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4uL2xpYi9jb21tb24vb24tY29uZmlndXJlZC50cyIsIi8vIENvcHlyaWdodCAoYykgMjAxOCBCcm9taXVtLCBJbmMuXHJcbi8vIFVzZSBvZiB0aGUgQnJvbWl1bSwgSW5jLiBzb2Z0d2FyZSByZXF1aXJlcyBhIGxpY2Vuc2UgYWdyZWVtZW50IHdpdGggQnJvbWl1bSwgSW5jLiBvciBhbiBhdXRob3JpemVkIHJlc2VsbGVyLlxyXG5cclxuaW1wb3J0IHsgVVJMLCBVUkxUb1N0cmluZywgcGFyc2VVcmwgfSBmcm9tIFwiLi91cmwtdXRpbHNcIjtcclxuaW1wb3J0IHsgaXNFbXB0eSB9IGZyb20gXCIuL2FycmF5LXV0aWxzXCI7XHJcbmltcG9ydCB7IE1heWJlIH0gZnJvbSBcIi4vbWF5YmVcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBVcmxFbmNvZGVyIHtcclxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgdXJsOiBVUkwpIHsgfVxyXG5cclxuICAgIGFkZFVybFF1ZXJ5UGFyYW0obmFtZTogc3RyaW5nLCB2YWx1ZTogTWF5YmU8VVJMPikge1xyXG4gICAgICAgIHRoaXMuYWRkUXVlcnlQYXJhbShuYW1lLCBVUkxUb1N0cmluZyh2YWx1ZSkpO1xyXG4gICAgfVxyXG5cclxuICAgIGFkZFF1ZXJ5UGFyYW0obmFtZTogc3RyaW5nLCB2YWx1ZTogc3RyaW5nKSB7XHJcbiAgICAgICAgdGhpcy5xdWVyeVBhcmFtcy5wdXNoKFtuYW1lLCBlbmNvZGVVUklDb21wb25lbnQodmFsdWUpXSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBlbmNvZGVRdWVyeVBhcmFtKG5hbWU6IHN0cmluZywgdmFsdWU6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIGAke25hbWV9PSR7dmFsdWV9YDtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGVuY29kZVF1ZXJ5UGFyYW1zKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnF1ZXJ5UGFyYW1zLm1hcCgoW25hbWUsIHZhbHVlXSkgPT4gdGhpcy5lbmNvZGVRdWVyeVBhcmFtKG5hbWUsIHZhbHVlKSkuam9pbihcIiZcIik7XHJcbiAgICB9XHJcblxyXG4gICAgZW5jb2RlVXJsKCk6IE1heWJlPFVSTD4ge1xyXG4gICAgICAgIGlmIChpc0VtcHR5KHRoaXMucXVlcnlQYXJhbXMpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnVybDtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3Qgc3BlYyA9IGAke1VSTFRvU3RyaW5nKHRoaXMudXJsKX0/JHt0aGlzLmVuY29kZVF1ZXJ5UGFyYW1zKCl9YDtcclxuICAgICAgICByZXR1cm4gcGFyc2VVcmwoc3BlYyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBxdWVyeVBhcmFtcyA9IG5ldyBBcnJheTxbc3RyaW5nLCBzdHJpbmddPigpO1xyXG59XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuLi9saWIvY29tbW9uL3VybC1lbmNvZGVyLnRzIiwiLy8gQ29weXJpZ2h0IChjKSAyMDE4IEJyb21pdW0sIEluYy5cclxuLy8gVXNlIG9mIHRoZSBCcm9taXVtLCBJbmMuIHNvZnR3YXJlIHJlcXVpcmVzIGEgbGljZW5zZSBhZ3JlZW1lbnQgd2l0aCBCcm9taXVtLCBJbmMuIG9yIGFuIGF1dGhvcml6ZWQgcmVzZWxsZXIuXHJcblxyXG4vLy8gPHJlZmVyZW5jZSB0eXBlcz1cImNocm9tZVwiLz5cclxuaW1wb3J0IHsgQ2hyYWdFcnJvciB9IGZyb20gXCIuL2Vycm9yc1wiXHJcbmltcG9ydCB7IEFjdGlvbiwgZG9PbmNlIH0gZnJvbSBcIi4vb25jZVwiO1xyXG5pbXBvcnQgeyBNZXNzYWdlLCBIZWxwZXJFcnJvclYxLCBEb3JtYW50U3RhdGVDaGFuZ2VkVjEsIE1lc3NhZ2VQYXlsb2FkLCBQcm9kdWN0U3RhdHVzZXMgfSBmcm9tIFwiLi9tZXNzYWdlc1wiO1xyXG5pbXBvcnQgeyBJTWVzc2FnZVJvdXRlciB9IGZyb20gXCIuL21lc3NhZ2Utcm91dGVyXCI7XHJcbmltcG9ydCB7IE1lc3NhZ2VUeXBlIH0gZnJvbSBcIi4vbWVzc2FnZS10eXBlc1wiO1xyXG5pbXBvcnQgeyBJQ29uZmlnTm90aWZpZXIgfSBmcm9tIFwiLi9jb25maWctbm90aWZpZXJcIjtcclxuaW1wb3J0IHsgQ29uZmlnS2V5IH0gZnJvbSBcIi4vY29uZmlnLWtleXNcIjtcclxuaW1wb3J0IHsgQ29uZmlnUmVhZGVyIH0gZnJvbSBcIi4vY29uZmlnLXJlYWRlclwiO1xyXG5pbXBvcnQgeyBJMThuTWVzc2FnZXMsIGlzUG9wdXBFcnJvciB9IGZyb20gXCIuL2kxOG5cIjtcclxuaW1wb3J0IHsgSWNvblVwZGF0ZXIsIEljb25UeXBlLCBzZXROb3JtYWxCYWRnZSwgc2V0RXJyb3JCYWRnZSB9IGZyb20gXCIuL2Jyb3dzZXItYWN0aW9uXCI7XHJcbmltcG9ydCB7IE1heWJlLCBub25lLCBzb21lIH0gZnJvbSBcIi4vbWF5YmVcIjtcclxuaW1wb3J0IHsgaXNOdW1iZXIgfSBmcm9tIFwiLi9udW1iZXItdXRpbHNcIjtcclxuaW1wb3J0IHsgQnJvd3NlckxhdW5jaEV2ZW50IH0gZnJvbSBcIi4vYmxvY2tlZC1wYWdlLWNvbnRyb2xsZXJcIjtcclxuaW1wb3J0IHsgQnJvd3NlciB9IGZyb20gXCIuL2Jyb3dzZXJcIjtcclxuaW1wb3J0IHsgaG9zdENvbnN0YW50cyB9IGZyb20gXCIuL2hvc3QtY29uc3RhbnRzXCI7XHJcbmltcG9ydCB7IElPbkNvbmZpZ3VyZWRSYWlzZXIgfSBmcm9tIFwiLi9vbi1jb25maWd1cmVkXCI7XHJcbmltcG9ydCB7IE1lc3NhZ2VTZW5kZXIgfSBmcm9tIFwiLi9tZXNzYWdlLXNlbmRlclwiO1xyXG5pbXBvcnQgeyBJSGFuZHNoYWtlciB9IGZyb20gXCIuL2hhbmRzaGFrZXJcIjtcclxuaW1wb3J0IHsgUHJvdG9jb2xWZXJzaW9uLCBpc0Vycm9yU3VwcG9ydGVkIH0gZnJvbSBcIi4vcHJvdG9jb2wtdmVyc2lvbnNcIjtcclxuaW1wb3J0IHsgSUNvbm5lY3Rpb24sIENvbm5lY3Rpb25TdGF0ZSB9IGZyb20gXCIuL2Nvbm5lY3Rpb25cIjtcclxuaW1wb3J0IHsgRXZlbnREaXNwYXRjaGVyIH0gZnJvbSBcIi4vZXZlbnQtZGlzcGF0Y2hlclwiO1xyXG5cclxuZXhwb3J0IGNvbnN0IG1heEZhaWxlZFJlbG9hZEF0dGVtcHRzID0gMztcclxuZXhwb3J0IGNvbnN0IG1heEZhaWxlZFJlY29ubmVjdEF0dGVtcHRzID0gMzA7XHJcblxyXG5jb25zdCBsb2cgPSBjb25zb2xlLmxvZztcclxuY29uc3QgbG9nRXJyb3IgPSBjb25zb2xlLmVycm9yO1xyXG5cclxuY2xhc3MgRXh0ZW5zaW9uUmVsb2FkZXIge1xyXG4gICAgcHJpdmF0ZSBzdGF0aWMgZmFpbGVkUmVsb2FkQXR0ZW1wdHNLZXkgPSBcImZhaWxlZFJlbG9hZEF0dGVtcHRzXCI7XHJcblxyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5yZWxvYWQgPSBkb09uY2UoKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnJlYWRGYWlsZWRSZWxvYWRBdHRlbXB0cygoZmFpbGVkUmVsb2FkQXR0ZW1wdHMpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVsb2FkRXh0ZW5zaW9uKGZhaWxlZFJlbG9hZEF0dGVtcHRzKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5sb2FkZWRTdWNjZXNzZnVsbHkgPSBkb09uY2UoKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLndyaXRlRmFpbGVkUmVsb2FkQXR0ZW1wdHMoe2ZhaWxlZFJlbG9hZEF0dGVtcHRzOiAwLCBpc1JlbG9hZDogZmFsc2V9LCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBsb2coYEV4dGVuc2lvblJlbG9hZGVyLmxvYWRlZFN1Y2Nlc3NmdWxseTogcmVzZXQgZmFpbGVkUmVsb2FkQXR0ZW1wdHNgKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgY2hyb21lLnJ1bnRpbWUub25TdGFydHVwLmFkZExpc3RlbmVyKCgpID0+IHRoaXMub25TdGFydHVwKCkpO1xyXG4gICAgICAgIHRoaXMucmVhZEZhaWxlZFJlbG9hZEF0dGVtcHRzKGZhaWxlZFJlbG9hZEF0dGVtcHMgPT4ge1xyXG4gICAgICAgICAgICBsb2coYEV4dGVuc2lvblJlbG9hZGVyLmNvbnN0cnVjdG9yOiBmYWlsZWRSZWxvYWRBdHRlbXB0cyA9PSAke2ZhaWxlZFJlbG9hZEF0dGVtcHN9YCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBvblN0YXJ0dXAoKSB7XHJcbiAgICAgICAgbG9nKFwiRXh0ZW5zaW9uUmVsb2FkZXIub25TdGFydHVwXCIpO1xyXG4gICAgICAgIHRoaXMubG9hZGVkU3VjY2Vzc2Z1bGx5KCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSByZWFkRmFpbGVkUmVsb2FkQXR0ZW1wdHMoY2FsbGJhY2s6IChmYWlsZWRSZWxvYWRBdHRlbXB0czogbnVtYmVyKSA9PiB2b2lkKSB7XHJcbiAgICAgICAgY29uc3Qga2V5ID0gRXh0ZW5zaW9uUmVsb2FkZXIuZmFpbGVkUmVsb2FkQXR0ZW1wdHNLZXk7XHJcbiAgICAgICAgY2hyb21lLnN0b3JhZ2UubG9jYWwuZ2V0KGtleSwgKGl0ZW1zKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGVycm9yID0gY2hyb21lLnJ1bnRpbWUubGFzdEVycm9yO1xyXG4gICAgICAgICAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIGxvZ0Vycm9yKG5ldyBFcnJvcihgRXh0ZW5zaW9uUmVsb2FkZXIucmVhZEZhaWxlZFJlbG9hZEF0dGVtcHRzOiBlcnJvcjogJHtlcnJvci5tZXNzYWdlfWApKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zdCBmYWlsZWRSZWxvYWRBdHRlbXB0cyA9IGl0ZW1zW2tleV07XHJcbiAgICAgICAgICAgIGlmIChpc051bWJlcihmYWlsZWRSZWxvYWRBdHRlbXB0cykpIHtcclxuICAgICAgICAgICAgICAgIGNhbGxiYWNrKGZhaWxlZFJlbG9hZEF0dGVtcHRzKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNhbGxiYWNrKDApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSB3cml0ZUZhaWxlZFJlbG9hZEF0dGVtcHRzKGFyZ3M6IHtmYWlsZWRSZWxvYWRBdHRlbXB0czogbnVtYmVyLCBpc1JlbG9hZDogYm9vbGVhbn0sIGNhbGxiYWNrOiAoKSA9PiB2b2lkKSB7XHJcbiAgICAgICAgY29uc3Qga2V5ID0gRXh0ZW5zaW9uUmVsb2FkZXIuZmFpbGVkUmVsb2FkQXR0ZW1wdHNLZXk7XHJcbiAgICAgICAgY2hyb21lLnN0b3JhZ2UubG9jYWwuc2V0KHtcclxuICAgICAgICAgICAgW2tleV06IGFyZ3MuZmFpbGVkUmVsb2FkQXR0ZW1wdHNcclxuICAgICAgICB9LCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGVycm9yID0gY2hyb21lLnJ1bnRpbWUubGFzdEVycm9yO1xyXG4gICAgICAgICAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIGxvZ0Vycm9yKG5ldyBFcnJvcihgRXh0ZW5zaW9uUmVsb2FkZXIud3JpdGVGYWlsZWRSZWxvYWRBdHRlbXB0czogZXJyb3I6ICR7ZXJyb3IubWVzc2FnZX1gKSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2FsbGJhY2soKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHJlbG9hZEV4dGVuc2lvbihmYWlsZWRSZWxvYWRBdHRlbXB0czogbnVtYmVyKSB7XHJcbiAgICAgICAgaWYgKGZhaWxlZFJlbG9hZEF0dGVtcHRzIDwgbWF4RmFpbGVkUmVsb2FkQXR0ZW1wdHMpIHtcclxuICAgICAgICAgICAgLy8gUmVsb2FkaW5nIHRoZSBleHRlbnNpb24gd2lsbCBjbG9zZSBhbnkgZXh0ZW5zaW9uIFVSTCB0YWJzIHN1Y2ggYXMgYW55IG5hdmlnYXRpb25zIHBvc3Rwb25lZCBiZWNhdXNlIHdlXHJcbiAgICAgICAgICAgIC8vIGRvbid0IGhhdmUgY29uZmlnIHdoaWNoIGFyZSBvbiB0aGUgaG9sZGluZyBwYWdlIG9yIGFueSBvcGVuIGJsb2NraW5nIHBhZ2VzLiBIZW5jZSB3ZSBzaG91bGRuJ3QgcmVsb2FkXHJcbiAgICAgICAgICAgIC8vIHRoZSBleHRlbnNpb24gaWYgdGhlcmUgYXJlIGFueSBleHRlbnNpb24gVVJMIHRhYnMgKGluc3RlYWQgd2FpdCBmb3IgYSBzaG9ydCB0aW1lIGFuZCBjaGVjayBhZ2FpbikuXHJcbiAgICAgICAgICAgIC8vIEFueSBwb3N0cG9uZWQgbmF2aWdhdGlvbnMgc2hvdWxkIGhhdmUgbW92ZWQgYXdheSBmcm9tIHRoZSBob2xkaW5nIHBhZ2UgYWZ0ZXJcclxuICAgICAgICAgICAgLy8gW2hvc3RDb25zdGFudHMucG9zdHBvbmVtZW50VGltZW91dF0gbXMgYW5kIGJsb2NraW5nIHBhZ2VzIGFyZSBnZW5lcmFsbHkgc2hvcnQgbGl2ZWQuIFdlIHNob3VsZG4ndCBoYXZlIHRvXHJcbiAgICAgICAgICAgIC8vIHdvcnJ5IGFib3V0IG5ldyBleHRlbnNpb24gVVJMIHRhYnMgYmVpbmcgY3JlYXRlZCBzaW5jZSB0aGUgZXh0ZW5zaW9uIHNob3VsZCBiZSBkb3JtYW50IGlmIHdlJ3JlIHJlbG9hZGluZ1xyXG4gICAgICAgICAgICBjb25zdCBleHRlbnNpb25UYWJzID0gY2hyb21lLmV4dGVuc2lvbi5nZXRWaWV3cyh7dHlwZTogXCJ0YWJcIn0pO1xyXG4gICAgICAgICAgICBpZiAoZXh0ZW5zaW9uVGFicy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHRoaXMucmVsb2FkRXh0ZW5zaW9uKGZhaWxlZFJlbG9hZEF0dGVtcHRzKSwgaG9zdENvbnN0YW50cy5wb3N0cG9uZW1lbnRUaW1lb3V0KTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy53cml0ZUZhaWxlZFJlbG9hZEF0dGVtcHRzKHtmYWlsZWRSZWxvYWRBdHRlbXB0czogZmFpbGVkUmVsb2FkQXR0ZW1wdHMgKyAxLCBpc1JlbG9hZDogdHJ1ZX0sICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGxvZyhgRXh0ZW5zaW9uUmVsb2FkZXIucmVsb2FkRXh0ZW5zaW9uOiByZWxvYWRpbmcgZXh0ZW5zaW9uIGF0dGVtcHQ6ICR7ZmFpbGVkUmVsb2FkQXR0ZW1wdHN9YCk7XHJcbiAgICAgICAgICAgICAgICBjaHJvbWUucnVudGltZS5yZWxvYWQoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJlbG9hZDogQWN0aW9uO1xyXG4gICAgbG9hZGVkU3VjY2Vzc2Z1bGx5OiBBY3Rpb247XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBFcnJvckhhbmRsZXIge1xyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAgICAgICAgIHByaXZhdGUgYnJvd3NlcjogTWF5YmU8QnJvd3Nlcj4sXHJcbiAgICAgICAgICAgIG1lc3NhZ2VSb3V0ZXI6IElNZXNzYWdlUm91dGVyLFxyXG4gICAgICAgICAgICBjb25maWdOb3RpZmllcjogSUNvbmZpZ05vdGlmaWVyLFxyXG4gICAgICAgICAgICBwcml2YXRlIG9uQ29uZmlndXJlZFJhaXNlcjogSU9uQ29uZmlndXJlZFJhaXNlcikge1xyXG4gICAgICAgIG1lc3NhZ2VSb3V0ZXIucmVnaXN0ZXJNZXNzYWdlSGFuZGxlcihNZXNzYWdlVHlwZS5oZWxwZXJFcnJvclYxLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9uSGVscGVyRXJyb3IuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgLy8gV2hlbiBDaHJvbWUgcmVzdGFydHMgYWxsIGludGVybmFsIHN0YXRlIG9mIHRoZSBleHRlbnNpb24gaXMgbG9zdCxcclxuICAgICAgICAvLyBob3dldmVyIHRoZSBpY29uIGFuZCBiYWRnZSBwZXJzaXN0LiBTaW5jZSBhbGwgaW50ZXJuYWwgc3RhdGUgaXMgcmVzZXRcclxuICAgICAgICAvLyB0aGUgZXh0ZW5zaW9uIGlzIG5ldmVyIGluIGEgZG9ybWFudCBzdGF0ZSBkdXJpbmcgY29uc3RydWN0aW9uLCBob3dldmVyXHJcbiAgICAgICAgLy8gdGhlIGljb24gZXRjIGFuZCBiYWRnZSBtaWdodCBiZSBzZXQgZm9yIGEgZG9ybWFudCBzdGF0ZSwgaGVuY2UgYWx3YXlzXHJcbiAgICAgICAgLy8gYXBwbHkgdGhlIG5vbi1kb3JtYW50IHN0YXRlIGljb24gYW5kIGJhZGdlIGluaXRpYWxseS5cclxuICAgICAgICB0aGlzLmljb25VcGRhdGVyID0gbmV3IEljb25VcGRhdGVyKHRoaXMuYnJvd3NlciwgSWNvblR5cGUubm9ybWFsKTtcclxuICAgICAgICBzZXROb3JtYWxCYWRnZSgpO1xyXG5cclxuICAgICAgICAvLyBUaGlzIGxpc3RlbmVyIGNhbiB0cmlnZ2VyIHRoZSBJY29uVXBkYXRlciwgaGVuY2UgcmVnaXN0ZXIgdGhlXHJcbiAgICAgICAgLy8gbGlzdGVuZXIgYWZ0ZXIgSWNvblVwZGF0ZXIgaGFzIGJlZW4gY29uc3RydWN0ZWQuXHJcbiAgICAgICAgY29uZmlnTm90aWZpZXIuYWRkQ29uZmlnTGlzdGVuZXJGb3JLZXlzKHRoaXMub25Db25maWdDaGFuZ2VkLmJpbmQodGhpcyksXHJcbiAgICAgICAgICAgIFsgQ29uZmlnS2V5LmlzRW5hYmxlZCwgQ29uZmlnS2V5LnByb2R1Y3RTdGF0dXMsIENvbmZpZ0tleS5pc0VudGVycHJpc2VQcm9kdWN0IF0pO1xyXG4gICAgfVxyXG5cclxuICAgIG9uQnJvd3NlckxhdW5jaEV2ZW50KGV2ZW50OiBCcm93c2VyTGF1bmNoRXZlbnQpIHtcclxuICAgICAgICBpZiAoZXZlbnQuZGlkTGF1bmNoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZXh0ZW5zaW9uUmVsb2FkZXIubG9hZGVkU3VjY2Vzc2Z1bGx5KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBvbkRvcm1hbnRTdGF0ZUNoYW5nZWQgPSBuZXcgRXZlbnREaXNwYXRjaGVyPGJvb2xlYW4+KCk7XHJcbiAgICBwdWJsaWMgb25Qb3B1cERhdGFDaGFuZ2VkID0gbmV3IEV2ZW50RGlzcGF0Y2hlcjxJMThuTWVzc2FnZXM+KCk7XHJcblxyXG4gICAgcHVibGljIGdldCBpc0Rvcm1hbnQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lzRG9ybWFudDtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNlbmREb3JtYW50U3RhdGUoKTogdm9pZCB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgdGhpcy5zZW5kTWVzc2FnZShcclxuICAgICAgICAgICAgICAgIE1lc3NhZ2VUeXBlLmRvcm1hbnRTdGF0ZUNoYW5nZWRWMSxcclxuICAgICAgICAgICAgICAgIG5ldyBEb3JtYW50U3RhdGVDaGFuZ2VkVjEodGhpcy5pc0Rvcm1hbnQpKTtcclxuICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIGxvZ0Vycm9yKGUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGVudGVyRG9ybWFudFN0YXRlKHBvcHVwTWVzc2FnZTogSTE4bk1lc3NhZ2VzLCBlcnJvckNvZGU6IENocmFnRXJyb3IpIHtcclxuICAgICAgICBpZiAoIXRoaXMuaXNEb3JtYW50KSB7XHJcbiAgICAgICAgICAgIGxvZ0Vycm9yKG5ldyBFcnJvcihcIkNocmFnIGhhcyBlbmNvdW50ZXJlZCBhIGZhdGFsIGVycm9yIGFuZCBpcyBlbnRlcmluZyBhIGRvcm1hbnQgc3RhdGUuXCIpKVxyXG4gICAgICAgICAgICB0aGlzLl9pc0Rvcm1hbnQgPSB0cnVlO1xyXG4gICAgICAgICAgICAvLyBSYWlzZSBldmVudCB1cGRhdGVzIGZvciBzdWJzY3JpYmVycy5cclxuICAgICAgICAgICAgdGhpcy5vbkRvcm1hbnRTdGF0ZUNoYW5nZWQuZGlzcGF0Y2hFdmVudCh0aGlzLmlzRG9ybWFudCk7XHJcbiAgICAgICAgICAgIHRoaXMub25Qb3B1cERhdGFDaGFuZ2VkLmRpc3BhdGNoRXZlbnQocG9wdXBNZXNzYWdlKTtcclxuICAgICAgICAgICAgLy8gU2V0IGJyb3dzZXJBY3Rpb24gYXBwcm9wcmlhdGVseS5cclxuICAgICAgICAgICAgdGhpcy5pY29uVXBkYXRlci5zZXRJY29uKEljb25UeXBlLmVycm9yKVxyXG4gICAgICAgICAgICBpZiAoaXNQb3B1cEVycm9yKHBvcHVwTWVzc2FnZSkpIHtcclxuICAgICAgICAgICAgICAgIHNldEVycm9yQmFkZ2UoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBTZW5kIGFuIHVwZGF0ZSBtZXNzYWdlIHRvIHRoZSBoZWxwZXIsIGlmIGFwcHJvcHJpYXRlLiBOb3QgYmVpbmdcclxuICAgICAgICAgICAgLy8gZW5hYmxlZCBpc24ndCByZWFsbHkgYW4gZXJyb3IsIHNvIGRvbid0IGFsZXJ0IHRoZSBoZWxwZXIuXHJcbiAgICAgICAgICAgIGlmIChlcnJvckNvZGUgIT09IENocmFnRXJyb3Iubm90RW5hYmxlZCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZW5kRG9ybWFudFN0YXRlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSB3YWtlRnJvbURvcm1hbnRTdGF0ZShwb3B1cE1lc3NhZ2U6IEkxOG5NZXNzYWdlcywgbGFzdEVycm9yQ29kZTogQ2hyYWdFcnJvcikge1xyXG4gICAgICAgIGlmICh0aGlzLmlzRG9ybWFudCkge1xyXG4gICAgICAgICAgICBsb2dFcnJvcihuZXcgRXJyb3IoXCJDaHJhZyBoYXMgcmVjb3ZlcmVkIGFuZCBpcyByZWFjdGl2YXRpbmcgKHdha2luZyBmcm9tIGEgZG9ybWFudCBzdGF0ZSkuXCIpKVxyXG4gICAgICAgICAgICB0aGlzLl9pc0Rvcm1hbnQgPSBmYWxzZTtcclxuICAgICAgICAgICAgLy8gUmFpc2UgZXZlbnQgdXBkYXRlcyBmb3Igc3Vic2NyaWJlcnMuXHJcbiAgICAgICAgICAgIHRoaXMub25Eb3JtYW50U3RhdGVDaGFuZ2VkLmRpc3BhdGNoRXZlbnQodGhpcy5pc0Rvcm1hbnQpO1xyXG4gICAgICAgICAgICB0aGlzLm9uUG9wdXBEYXRhQ2hhbmdlZC5kaXNwYXRjaEV2ZW50KHBvcHVwTWVzc2FnZSk7XHJcbiAgICAgICAgICAgIC8vIFNldCBicm93c2VyQWN0aW9uIGFwcHJvcHJpYXRlbHkuXHJcbiAgICAgICAgICAgIHRoaXMuaWNvblVwZGF0ZXIuc2V0SWNvbihJY29uVHlwZS5ub3JtYWwpXHJcbiAgICAgICAgICAgIHNldE5vcm1hbEJhZGdlKCk7XHJcbiAgICAgICAgICAgIC8vIFNlbmQgYW4gdXBkYXRlIG1lc3NhZ2UgdG8gdGhlIGhlbHBlcixcclxuICAgICAgICAgICAgLy8gdW5sZXNzIHRoZSBsYXN0IGVycm9yIHdhcyBiZWluZyBkaXNhYmxlZC5cclxuICAgICAgICAgICAgaWYgKGxhc3RFcnJvckNvZGUgIT09IENocmFnRXJyb3Iubm90RW5hYmxlZCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZW5kRG9ybWFudFN0YXRlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSByZWxvYWRFeHRlbnNpb24oKSB7XHJcbiAgICAgICAgbG9nKFwiRXJyb3JIYW5kbGVyLnJlbG9hZEV4dGVuc2lvblwiKTtcclxuICAgICAgICAvLyBLUlktNDk0MDA6IFJlbG9hZGluZyBpbiBFZGdlIG9uIFJTNSBjYXVzZXMgdGhlIGV4dGVuc2lvbiB0byBiZSBkaXNhYmxlZFxyXG4gICAgICAgIGlmICh0aGlzLmJyb3dzZXIgPT09IEJyb3dzZXIuZWRnZSkge1xyXG4gICAgICAgICAgICBpZiAobm9uZSh0aGlzLnJlY29ubmVjdFRvSGVscGVyKSkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRXJyb3JIYW5kbGVyLnJlbG9hZEV4dGVuc2lvbjogdGhpcy5yZWNvbm5lY3RUb0hlbHBlciA9PT0gdW5kZWZpbmVkXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMucmVjb25uZWN0VG9IZWxwZXIoKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmV4dGVuc2lvblJlbG9hZGVyLnJlbG9hZCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGhhbmRsZUhlbHBlckVycm9yKHBvcHVwTWVzc2FnZTogSTE4bk1lc3NhZ2VzLCBlcnJvckNvZGU6IENocmFnRXJyb3IpIHtcclxuICAgICAgICBsb2coYEVycm9ySGFuZGxlci5oYW5kbGVIZWxwZXJFcnJvcjogZXJyb3JDb2RlID09ICR7ZXJyb3JDb2RlfWApO1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHRoaXMuZW50ZXJEb3JtYW50U3RhdGUocG9wdXBNZXNzYWdlLCBlcnJvckNvZGUpO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgbG9nRXJyb3IoZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIC8vIElmIHRoZSBoZWxwZXIgcHJvY2VzcyBoYXMgY3Jhc2hlZCB0aGVuIHJlbG9hZCB0aGUgZXh0ZW5zaW9uXHJcbiAgICAgICAgICAgIC8vIHNpbmNlIHRoZSBicm93c2VyIHdpbGwgdGhlbiBsYXVuY2ggYSBuZXcgaGVscGVyIHByb2Nlc3MuXHJcbiAgICAgICAgICAgIHRoaXMucmVsb2FkRXh0ZW5zaW9uKCk7XHJcbiAgICAgICAgfSBmaW5hbGx5IHtcclxuICAgICAgICAgICAgLy8gSWYgdGhlIGhlbHBlciBoYXMgZW5jb3VudGVyZWQgYW4gZXJyb3IgdGhlbiB3ZSdyZSBub3QgZ29pbmdcclxuICAgICAgICAgICAgLy8gdG8gYmUgZ2V0dGluZyBhbnkgbW9yZSBjb25maWcgc28gcmFpc2UgdGhlIG9uQ29uZmlndXJlZCBldmVudFxyXG4gICAgICAgICAgICAvLyAod2UncmUgYXMgY2xvc2UgdG8gJ2Z1bGx5IGNvbmZpZ3VyZWQnIGFzIHdlJ3JlIGdvaW5nIHRvIGdldCkuXHJcbiAgICAgICAgICAgIC8vIFdpdGhvdXQgdGhpcyBhbnkgY2xhc3MgdXNpbmcgSU9uQ29uZmlndXJlZCB0byB3YWl0IGZvciBjb25maWdcclxuICAgICAgICAgICAgLy8gd291bGQgYmUgd2FpdGluZyBmb3JldmVyIGFmdGVyIGEgaGVscGVyIHByb2Nlc3MgY3Jhc2guXHJcbiAgICAgICAgICAgIHRoaXMub25Db25maWd1cmVkUmFpc2VyLm9uQ29uZmlndXJlZCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByYWlzZUVycm9yKGVycm9yQ29kZTogQ2hyYWdFcnJvciwgZT86IEVycm9yKTogdm9pZCB7XHJcbiAgICAgICAgLy8gTG9nIHRoZSBlcnJvciwgaWYgb25lIGlzIHN1cHBsaWVkLlxyXG4gICAgICAgIGlmIChlKSB7XHJcbiAgICAgICAgICAgIGxvZ0Vycm9yKGUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gSWYgdGhlIGVycm9yIGNvZGUgaXMgdW5rbm93biB0aGVuIGNoYW5nZSB0byByYWlzaW5nIGFuIHVua25vd25FcnJvci5cclxuICAgICAgICBlcnJvckNvZGUgPSB0aGlzLnRvUHJvdG9jb2xFcnJvcihlcnJvckNvZGUpO1xyXG4gICAgICAgIGxvZ0Vycm9yKG5ldyBFcnJvcihgQ2hyYWdFcnJvciByYWlzZWQ6ICR7Q2hyYWdFcnJvcltlcnJvckNvZGVdfWApKTtcclxuXHJcbiAgICAgICAgLy8gV2UgZG9uJ3QgY2FyZSBhYm91dCByZXBlYXRlZCBub3RpZmljYXRpb25zIGZvciB0aGUgc2FtZSBlcnJvci5cclxuICAgICAgICBpZiAoZXJyb3JDb2RlID09PSB0aGlzLmxhc3RFcnJvcikge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAvLyBUYWtlIGFjdGlvbiBiYXNlZCBvbiB0aGUgZXJyb3IuXHJcbiAgICAgICAgICAgIHN3aXRjaCAoZXJyb3JDb2RlKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIENocmFnRXJyb3Iubm90RW5hYmxlZDpcclxuICAgICAgICAgICAgICAgICAgICAvLyBEb24ndCBzZW5kIHRoZSBEb3JtYW50U3RhdGVDaGFuZ2VkIG1lc3NhZ2Ugd2hlbiBub3QgZW5hYmxlZFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIHNpbmNlIGl0J3Mgbm90IHJlYWxseSBhbiBlcnJvciBhbmQgd2UgZG9uJ3Qgd2FudCB0aGUgaGVscGVyXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdG8gcmFpc2UgYSBtYW5hZ2VtZW50IGFjdGlvbiBpbiB0aGlzIGNhc2UuXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbnRlckRvcm1hbnRTdGF0ZSh0aGlzLmRpc2FibGVkUG9wdXBNZXNzYWdlLCBlcnJvckNvZGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBDaHJhZ0Vycm9yLmhlbHBlclBvcnRFcnJvcjpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZUhlbHBlckVycm9yKEkxOG5NZXNzYWdlcy5wb3B1cE1pc3NpbmdIZWxwZXIsIGVycm9yQ29kZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIENocmFnRXJyb3IudHJ1c3REb3dubG9hZEZhaWxlZDpcclxuICAgICAgICAgICAgICAgICAgICAvLyBGYWlsaW5nIHRvIHRydXN0IGEgZG93bmxvYWQgZG9lc24ndCBzZWVtIGEgc2VyaW91cyBlbm91Z2hcclxuICAgICAgICAgICAgICAgICAgICAvLyBlcnJvciB0byBwdXQgdGhlIGV4dGVuc2lvbiBpbnRvIGEgZG9ybWFudCBzdGF0ZS4gSnVzdCBsb2cgaXQuXHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIENocmFnRXJyb3IubGF1bmNoQnJvd3NlckZhaWxlZDpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmVudGVyRG9ybWFudFN0YXRlKEkxOG5NZXNzYWdlcy5wb3B1cEdlbmVyaWNFcnJvciwgZXJyb3JDb2RlKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgQ2hyYWdFcnJvci5oYW5kc2hha2VFcnJvcjpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmVudGVyRG9ybWFudFN0YXRlKEkxOG5NZXNzYWdlcy5wb3B1cEdlbmVyaWNFcnJvciwgZXJyb3JDb2RlKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgQ2hyYWdFcnJvci51bmtub3duRXJyb3I6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbnRlckRvcm1hbnRTdGF0ZShJMThuTWVzc2FnZXMucG9wdXBHZW5lcmljRXJyb3IsIGVycm9yQ29kZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIENocmFnRXJyb3IucmVjb3ZlcmVkRnJvbUVycm9yOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMud2FrZUZyb21Eb3JtYW50U3RhdGUoSTE4bk1lc3NhZ2VzLnBvcHVwTm9FcnJvciwgdGhpcy5sYXN0RXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBDaHJhZ0Vycm9yLmlzMzJiaXRGaXJlZm94OlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZW50ZXJEb3JtYW50U3RhdGUoSTE4bk1lc3NhZ2VzLnBvcHVwSXMzMmJpdEZpcmVmb3gsIGVycm9yQ29kZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIENocmFnRXJyb3IuaGVscGVyVW5yZXNwb25zaXZlOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlSGVscGVyRXJyb3IoSTE4bk1lc3NhZ2VzLnBvcHVwTWlzc2luZ0hlbHBlciwgZXJyb3JDb2RlKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZmluYWxseSB7XHJcbiAgICAgICAgICAgIHRoaXMubGFzdEVycm9yID0gZXJyb3JDb2RlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIG9uSGVscGVyRXJyb3IobWVzc2FnZTogTWVzc2FnZSk6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IGhlbHBlckVycm9yID0gbWVzc2FnZS5wYXlsb2FkIGFzIEhlbHBlckVycm9yVjE7XHJcbiAgICAgICAgdGhpcy5yYWlzZUVycm9yKGhlbHBlckVycm9yLmVycm9yVHlwZSwgbmV3IEVycm9yKGhlbHBlckVycm9yLmVycm9yTWVzc2FnZSkpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZ2V0IGRpc2FibGVkUG9wdXBNZXNzYWdlKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5pc1NCWEVuYWJsZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIEkxOG5NZXNzYWdlcy5wb3B1cFNCWERpc2FibGVkO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3dpdGNoICh0aGlzLnByb2R1Y3RTdGF0dXMpIHtcclxuICAgICAgICAgICAgY2FzZSBQcm9kdWN0U3RhdHVzZXMuRGlzYWJsZWQ6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gSTE4bk1lc3NhZ2VzLnBvcHVwUHJvZHVjdERpc2FibGVkO1xyXG4gICAgICAgICAgICBjYXNlIFByb2R1Y3RTdGF0dXNlcy5Jbml0UmVxdWlyZWQ6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gSTE4bk1lc3NhZ2VzLnBvcHVwSW5pdFJlcXVpcmVkO1xyXG4gICAgICAgICAgICBjYXNlIFByb2R1Y3RTdGF0dXNlcy5VbmxpY2Vuc2VkOlxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNFbnRlcnByaXNlUHJvZHVjdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBJMThuTWVzc2FnZXMucG9wdXBVbmxpY2Vuc2VkO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gSTE4bk1lc3NhZ2VzLnBvcHVwVW5jb25maWd1cmVkO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXNlIFByb2R1Y3RTdGF0dXNlcy5Vbmtub3duOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIEkxOG5NZXNzYWdlcy5wb3B1cEdlbmVyaWNFcnJvcjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBJMThuTWVzc2FnZXMucG9wdXBOb0Vycm9yO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZ2V0IGlzRGlzYWJsZWQoKSB7XHJcbiAgICAgICAgcmV0dXJuICF0aGlzLmlzU0JYRW5hYmxlZCB8fCB0aGlzLnByb2R1Y3RTdGF0dXMgIT09IFByb2R1Y3RTdGF0dXNlcy5FbmFibGVkO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2V0SXNTQlhFbmFibGVkKGNvbmZpZzogQ29uZmlnUmVhZGVyKSB7XHJcbiAgICAgICAgLy8gV2UgZG9uJ3QgZXhwZWN0IHRvIGV2ZXIgZ2V0IHVuZGVmaW5lZCBpc0VuYWJsZWQgY29uZmlnLlxyXG4gICAgICAgIGlmIChub25lKGNvbmZpZy5pc0VuYWJsZWQpKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmFpc2VFcnJvcihDaHJhZ0Vycm9yLnVua25vd25FcnJvcixcclxuICAgICAgICAgICAgICAgIG5ldyBFcnJvcihcImlzRW5hYmxlZCBjb25maWcgaXMgdW5kZWZpbmVkXCIpKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQ2hlY2sgdGhlIGFwcHJvcHJpYXRlIGJyb3dzZXItc3BlY2lmaWMgaXNFbmFibGVkIGNvbmZpZy5cclxuICAgICAgICBzd2l0Y2ggKHRoaXMuYnJvd3Nlcikge1xyXG4gICAgICAgICAgICBjYXNlIEJyb3dzZXIuY2hyb21lOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5pc1NCWEVuYWJsZWQgPSBjb25maWcuaXNFbmFibGVkLmNocm9tZTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgY2FzZSBCcm93c2VyLmZpcmVmb3g6XHJcbiAgICAgICAgICAgICAgICB0aGlzLmlzU0JYRW5hYmxlZCA9IGNvbmZpZy5pc0VuYWJsZWQuZmlyZWZveDtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgY2FzZSBCcm93c2VyLmVkZ2U6XHJcbiAgICAgICAgICAgICAgICB0aGlzLmlzU0JYRW5hYmxlZCA9IGNvbmZpZy5pc0VuYWJsZWQuZWRnZTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgY2FzZSBCcm93c2VyLmVkZ2VDaHJvbWl1bTpcclxuICAgICAgICAgICAgICAgIHRoaXMuaXNTQlhFbmFibGVkID0gY29uZmlnLmlzRW5hYmxlZC5lZGdlQ2hyb21pdW07XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBJZiB3ZSBkb24ndCBrbm93IHRoZSBjdXJyZW50IGJyb3dzZXIgdGhlbiBlcnJvci5cclxuICAgICAgICB0aGlzLnJhaXNlRXJyb3IoQ2hyYWdFcnJvci51bmtub3duRXJyb3IsXHJcbiAgICAgICAgICAgIG5ldyBFcnJvcihcIkN1cnJlbnQgYnJvd3NlciB1bmtub3duIGluIEVycm9ySGFuZGxlci5vbkNvbmZpZ0NoYW5nZWRcIikpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgb25Db25maWdDaGFuZ2VkKGtleTogQ29uZmlnS2V5LCBjb25maWc6IENvbmZpZ1JlYWRlcikge1xyXG4gICAgICAgIHN3aXRjaCAoa2V5KSB7XHJcbiAgICAgICAgICAgIGNhc2UgQ29uZmlnS2V5LmlzRW5hYmxlZDpcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0SXNTQlhFbmFibGVkKGNvbmZpZyk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBDb25maWdLZXkucHJvZHVjdFN0YXR1czpcclxuICAgICAgICAgICAgICAgIHRoaXMucHJvZHVjdFN0YXR1cyA9IGNvbmZpZy5wcm9kdWN0U3RhdHVzO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgQ29uZmlnS2V5LmlzRW50ZXJwcmlzZVByb2R1Y3Q6XHJcbiAgICAgICAgICAgICAgICB0aGlzLmlzRW50ZXJwcmlzZVByb2R1Y3QgPSBjb25maWcuaXNFbnRlcnByaXNlUHJvZHVjdDtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuaXNEaXNhYmxlZCkge1xyXG4gICAgICAgICAgICB0aGlzLnJhaXNlRXJyb3IoQ2hyYWdFcnJvci5ub3RFbmFibGVkKTtcclxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuaXNEb3JtYW50ICYmIHRoaXMubGFzdEVycm9yID09PSBDaHJhZ0Vycm9yLm5vdEVuYWJsZWQpIHtcclxuICAgICAgICAgICAgLy8gSW4gdGhpcyBjYXNlIHdlJ3JlIGluIGFuIGVycm9yZWQgc3RhdGUgYnV0IG9ubHkgYmVjYXVzZVxyXG4gICAgICAgICAgICAvLyB0aGUgY29uZmlnIHdhcyBub3QgZW5hYmxlZCBzbyB3ZSBjYW4gc2FmZWx5IHdha2UgdGhlXHJcbiAgICAgICAgICAgIC8vIGV4dGVuc2lvbiB1cCBmcm9tIGRvcm1hbnQgbm93IHRoZSBjb25maWcgaXMgc2V0LlxyXG4gICAgICAgICAgICB0aGlzLnJhaXNlRXJyb3IoQ2hyYWdFcnJvci5yZWNvdmVyZWRGcm9tRXJyb3IpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNlbmRNZXNzYWdlKHR5cGU6IE1lc3NhZ2VUeXBlLCBwYXlsb2FkOiBNZXNzYWdlUGF5bG9hZCkge1xyXG4gICAgICAgIGlmIChub25lKHRoaXMubWVzc2FnZVNlbmRlcikpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRXJyb3JIYW5kbGVyLnNlbmRNZXNzYWdlOiB0aGlzLm1lc3NhZ2VTZW5kZXIgPT09IHVuZGVmaW5lZFwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5tZXNzYWdlU2VuZGVyLnNlbmRNZXNzYWdlKHR5cGUsIHBheWxvYWQpO1xyXG4gICAgfVxyXG5cclxuICAgIHNldHVwKG1lc3NhZ2VTZW5kZXI6IE1lc3NhZ2VTZW5kZXIsIGhhbmRzaGFrZXI6IElIYW5kc2hha2VyLCBjb25uZWN0aW9uOiBJQ29ubmVjdGlvbiwgcmVjb25uZWN0VG9IZWxwZXI6IEFjdGlvbikge1xyXG4gICAgICAgIHRoaXMubWVzc2FnZVNlbmRlciA9IG1lc3NhZ2VTZW5kZXI7XHJcbiAgICAgICAgdGhpcy5yZWNvbm5lY3RUb0hlbHBlciA9IHJlY29ubmVjdFRvSGVscGVyO1xyXG4gICAgICAgIGhhbmRzaGFrZXIub25IYW5kc2hha2VuLnJlZ2lzdGVyRXZlbnRIYW5kbGVyKChldmVudCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnByb3RvY29sVmVyc2lvbiA9IGV2ZW50Lm5lZ290aWF0ZWRWZXJzaW9uO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNvbm5lY3Rpb24ub25Db25uZWN0aW9uU3RhdGVDaGFuZ2VkLnJlZ2lzdGVyRXZlbnRIYW5kbGVyKChldmVudCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZXZlbnQubmV3U3RhdGUgPT09IENvbm5lY3Rpb25TdGF0ZS5Db25uZWN0ZWQpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzRG9ybWFudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAodGhpcy5sYXN0RXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBDaHJhZ0Vycm9yLmhlbHBlclBvcnRFcnJvcjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmFpc2VFcnJvcihDaHJhZ0Vycm9yLnJlY292ZXJlZEZyb21FcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBDaHJhZ0Vycm9yLmhlbHBlclVucmVzcG9uc2l2ZTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmFpc2VFcnJvcihDaHJhZ0Vycm9yLnJlY292ZXJlZEZyb21FcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgdG9Qcm90b2NvbEVycm9yKGVycm9yOiBDaHJhZ0Vycm9yKTogQ2hyYWdFcnJvciB7XHJcbiAgICAgICAgY29uc3QgcHJvdG9jb2xWZXJzaW9uID0gc29tZSh0aGlzLnByb3RvY29sVmVyc2lvbikgPyB0aGlzLnByb3RvY29sVmVyc2lvbiA6IFByb3RvY29sVmVyc2lvbi52MTtcclxuICAgICAgICBpZiAoaXNFcnJvclN1cHBvcnRlZChlcnJvciwgcHJvdG9jb2xWZXJzaW9uKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZXJyb3I7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIENocmFnRXJyb3IudW5rbm93bkVycm9yO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBTdGFydCBpbml0aWFsbHkgaW4gYW4gZXJyb3ItZnJlZSBzdGF0ZS5cclxuICAgIHByaXZhdGUgbGFzdEVycm9yID0gQ2hyYWdFcnJvci5yZWNvdmVyZWRGcm9tRXJyb3I7XHJcbiAgICBwcml2YXRlIF9pc0Rvcm1hbnQgPSBmYWxzZTtcclxuICAgIHByaXZhdGUgaWNvblVwZGF0ZXI6IEljb25VcGRhdGVyO1xyXG4gICAgcHJpdmF0ZSBleHRlbnNpb25SZWxvYWRlciA9IG5ldyBFeHRlbnNpb25SZWxvYWRlcigpO1xyXG4gICAgcHJpdmF0ZSBtZXNzYWdlU2VuZGVyOiBNYXliZTxNZXNzYWdlU2VuZGVyPiA9IHVuZGVmaW5lZDtcclxuICAgIHByaXZhdGUgcmVjb25uZWN0VG9IZWxwZXI6IE1heWJlPEFjdGlvbj4gPSB1bmRlZmluZWQ7XHJcbiAgICBwcml2YXRlIHByb3RvY29sVmVyc2lvbjogTWF5YmU8UHJvdG9jb2xWZXJzaW9uPiA9IHVuZGVmaW5lZDtcclxuICAgIHByaXZhdGUgaXNTQlhFbmFibGVkID0gdHJ1ZTtcclxuICAgIHByaXZhdGUgcHJvZHVjdFN0YXR1cyA9IFByb2R1Y3RTdGF0dXNlcy5FbmFibGVkO1xyXG4gICAgcHJpdmF0ZSBpc0VudGVycHJpc2VQcm9kdWN0ID0gZmFsc2U7XHJcbn1cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vZXJyb3ItaGFuZGxlci50cyIsIi8vIENvcHlyaWdodCAoYykgMjAxOCBCcm9taXVtLCBJbmMuXHJcbi8vIFVzZSBvZiB0aGUgQnJvbWl1bSwgSW5jLiBzb2Z0d2FyZSByZXF1aXJlcyBhIGxpY2Vuc2UgYWdyZWVtZW50IHdpdGggQnJvbWl1bSwgSW5jLiBvciBhbiBhdXRob3JpemVkIHJlc2VsbGVyLlxyXG5cclxuaW1wb3J0IHsgSWQsIElkR2VuZXJhdG9yIH0gZnJvbSBcIi4vaWQtZ2VuZXJhdG9yXCI7XHJcbmltcG9ydCB7IElNZXNzYWdlUm91dGVyIH0gZnJvbSBcIi4vbWVzc2FnZS1yb3V0ZXJcIjtcclxuaW1wb3J0IHsgTWVzc2FnZVNlbmRlciB9IGZyb20gXCIuL21lc3NhZ2Utc2VuZGVyXCI7XHJcbmltcG9ydCB7IE1lc3NhZ2UsIE1lc3NhZ2VQYXlsb2FkIH0gZnJvbSBcIi4vbWVzc2FnZXNcIjtcclxuaW1wb3J0IHsgTWVzc2FnZVR5cGUgfSBmcm9tIFwiLi9tZXNzYWdlLXR5cGVzXCI7XHJcbmltcG9ydCB7IG5vbmUgfSBmcm9tIFwiLi9tYXliZVwiO1xyXG5cclxuZXhwb3J0IHR5cGUgTWFrZVJlcXVlc3Q8UmVxdWVzdERhdGE+ID0gKGlkOiBJZCwgZGF0YTogUmVxdWVzdERhdGEpID0+IE1lc3NhZ2VQYXlsb2FkO1xyXG5leHBvcnQgdHlwZSBSZWFkUmVzcG9uc2U8UmVzdWx0PiA9IChtZXNzYWdlOiBNZXNzYWdlKSA9PiBbSWQsIFJlc3VsdF07XHJcbmV4cG9ydCB0eXBlIE9uUmVzcG9uc2U8UmVxdWVzdERhdGEsIFJlc3VsdD4gPSAoZGF0YTogUmVxdWVzdERhdGEsIHJlc3VsdDogUmVzdWx0KSA9PiB2b2lkO1xyXG5cclxuZXhwb3J0IGNsYXNzIFJlcXVlc3RSZXNwb25zZUhhbmRsZXI8UmVxdWVzdERhdGEsIFJlc3VsdD4ge1xyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAgICAgICAgIHByaXZhdGUgcmVxdWVzdFR5cGU6IE1lc3NhZ2VUeXBlLCBcclxuICAgICAgICAgICAgcHJpdmF0ZSByZXNwb25zZVR5cGU6IE1lc3NhZ2VUeXBlLCBcclxuICAgICAgICAgICAgcHJpdmF0ZSBtYWtlUmVxdWVzdDogTWFrZVJlcXVlc3Q8UmVxdWVzdERhdGE+LFxyXG4gICAgICAgICAgICBwcml2YXRlIHJlYWRSZXNwb25zZTogUmVhZFJlc3BvbnNlPFJlc3VsdD4sXHJcbiAgICAgICAgICAgIG1lc3NhZ2VSb3V0ZXI6IElNZXNzYWdlUm91dGVyLCBcclxuICAgICAgICAgICAgcHJpdmF0ZSBtZXNzYWdlU2VuZGVyOiBNZXNzYWdlU2VuZGVyLCBcclxuICAgICAgICAgICAgcHJpdmF0ZSBpZEdlbmVyYXRvcjogSWRHZW5lcmF0b3IpIHtcclxuICAgICAgICBtZXNzYWdlUm91dGVyLnJlZ2lzdGVyTWVzc2FnZUhhbmRsZXIoXHJcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGUsIFxyXG4gICAgICAgICAgICAgICAgKG1lc3NhZ2UpID0+IHRoaXMuaGFuZGxlUmVzcG9uc2UobWVzc2FnZSkpO1xyXG4gICAgfVxyXG5cclxuICAgIHNlbmRSZXF1ZXN0KGRhdGE6IFJlcXVlc3REYXRhLCBvblJlc3BvbnNlOiBPblJlc3BvbnNlPFJlcXVlc3REYXRhLCBSZXN1bHQ+KSB7XHJcbiAgICAgICAgY29uc3QgaWQgPSB0aGlzLmlkR2VuZXJhdG9yLmdlbmVyYXRlSWQoKTtcclxuICAgICAgICB0aGlzLnJlcXVlc3RzLnNldChpZCwgW2RhdGEsIG9uUmVzcG9uc2VdKTtcclxuICAgICAgICBjb25zdCByZXF1ZXN0ID0gdGhpcy5tYWtlUmVxdWVzdChpZCwgZGF0YSk7XHJcbiAgICAgICAgdGhpcy5tZXNzYWdlU2VuZGVyLnNlbmRNZXNzYWdlKHRoaXMucmVxdWVzdFR5cGUsIHJlcXVlc3QpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgaGFuZGxlUmVzcG9uc2UobWVzc2FnZTogTWVzc2FnZSkge1xyXG4gICAgICAgIGNvbnN0IFtpZCwgcmVzdWx0XSA9IHRoaXMucmVhZFJlc3BvbnNlKG1lc3NhZ2UpO1xyXG4gICAgICAgIGNvbnN0IHJlcXVlc3QgPSB0aGlzLnJlcXVlc3RzLmdldChpZCk7XHJcbiAgICAgICAgaWYgKG5vbmUocmVxdWVzdCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnJlcXVlc3RzLmRlbGV0ZShpZCk7XHJcbiAgICAgICAgY29uc3QgW2RhdGEsIG9uUmVzcG9uc2VdID0gcmVxdWVzdDtcclxuICAgICAgICBvblJlc3BvbnNlKGRhdGEsIHJlc3VsdCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSByZXF1ZXN0cyA9IG5ldyBNYXA8SWQsIFtSZXF1ZXN0RGF0YSwgT25SZXNwb25zZTxSZXF1ZXN0RGF0YSwgUmVzdWx0Pl0+KCk7XHJcbn1cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4uL2xpYi9jb21tb24vcmVxdWVzdC1yZXNwb25zZS1oYW5kbGVyLnRzIiwiLy8gQ29weXJpZ2h0IChjKSAyMDE4IEJyb21pdW0sIEluYy5cclxuLy8gVXNlIG9mIHRoZSBCcm9taXVtLCBJbmMuIHNvZnR3YXJlIHJlcXVpcmVzIGEgbGljZW5zZSBhZ3JlZW1lbnQgd2l0aCBCcm9taXVtLCBJbmMuIG9yIGFuIGF1dGhvcml6ZWQgcmVzZWxsZXIuXHJcblxyXG5pbXBvcnQgeyBsb2FkQ29uZmlnLCBDb25maWcgfSBmcm9tIFwiLi9jb25maWdcIjtcclxuaW1wb3J0IHsgRXZlbnRQYWdlTGlzdGVuZXIgfSBmcm9tIFwiLi9ldmVudC1wYWdlLWxpc3RlbmVyXCI7XHJcblxyXG5jb25zdCBjb25maWcgPSBsb2FkQ29uZmlnKCk7XHJcbmNvbnN0IGV2ZW50UGFnZUxpc3RlbmVyID0gbmV3IEV2ZW50UGFnZUxpc3RlbmVyKGNvbmZpZyk7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vbWFpbi50cyIsIi8qanNsaW50IG5vZGU6IHRydWUqL1xuXCJ1c2Ugc3RyaWN0XCI7XG5tb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4vbGliL3Fsb2JiZXInKTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4uL25vZGVfbW9kdWxlcy9xbG9iYmVyL2luZGV4LmpzXG4vLyBtb2R1bGUgaWQgPSA2NlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiMgcWxvYmJlciZuYnNwOyZuYnNwOyZuYnNwO1shW0J1aWxkIFN0YXR1c10oaHR0cHM6Ly90cmF2aXMtY2kub3JnL2RhdmVkb2VzZGV2L3Fsb2JiZXIucG5nKV0oaHR0cHM6Ly90cmF2aXMtY2kub3JnL2RhdmVkb2VzZGV2L3Fsb2JiZXIpIFshW0NvdmVyYWdlIFN0YXR1c10oaHR0cHM6Ly9jb3ZlcmFsbHMuaW8vcmVwb3MvZGF2ZWRvZXNkZXYvcWxvYmJlci9iYWRnZS5wbmc/YnJhbmNoPW1hc3RlcildKGh0dHBzOi8vY292ZXJhbGxzLmlvL3IvZGF2ZWRvZXNkZXYvcWxvYmJlcj9icmFuY2g9bWFzdGVyKSBbIVtOUE0gdmVyc2lvbl0oaHR0cHM6Ly9iYWRnZS5mdXJ5LmlvL2pzL3Fsb2JiZXIucG5nKV0oaHR0cDovL2JhZGdlLmZ1cnkuaW8vanMvcWxvYmJlcilcblxuTm9kZS5qcyBnbG9iYmluZyBmb3IgYW1xcC1saWtlIHRvcGljcy5cblxuRXhhbXBsZTpcblxuYGBgamF2YXNjcmlwdFxudmFyIFFsb2JiZXIgPSByZXF1aXJlKCdxbG9iYmVyJykuUWxvYmJlcjtcbnZhciBtYXRjaGVyID0gbmV3IFFsb2JiZXIoKTtcbm1hdGNoZXIuYWRkKCdmb28uKicsICdpdCBtYXRjaGVkIScpO1xuYXNzZXJ0LmRlZXBFcXVhbChtYXRjaGVyLm1hdGNoKCdmb28uYmFyJyksIFsnaXQgbWF0Y2hlZCEnXSk7XG5hc3NlcnQobWF0Y2hlci50ZXN0KCdmb28uYmFyJywgJ2l0IG1hdGNoZWQhJykpO1xuYGBgXG5cblRoZSBBUEkgaXMgZGVzY3JpYmVkIFtoZXJlXSgjdGFibGVvZmNvbnRlbnRzKS5cblxucWxvYmJlciBpcyBpbXBsZW1lbnRlZCB1c2luZyBhIHRyaWUsIGFzIGRlc2NyaWJlZCBpbiB0aGUgUmFiYml0TVEgYmxvZyBwb3N0cyBbaGVyZV0oaHR0cDovL3d3dy5yYWJiaXRtcS5jb20vYmxvZy8yMDEwLzA5LzE0L3ZlcnktZmFzdC1hbmQtc2NhbGFibGUtdG9waWMtcm91dGluZy1wYXJ0LTEvKSBhbmQgW2hlcmVdKGh0dHA6Ly93d3cucmFiYml0bXEuY29tL2Jsb2cvMjAxMS8wMy8yOC92ZXJ5LWZhc3QtYW5kLXNjYWxhYmxlLXRvcGljLXJvdXRpbmctcGFydC0yLykuXG5cbiMjIEluc3RhbGxhdGlvblxuXG5gYGBzaGVsbFxubnBtIGluc3RhbGwgcWxvYmJlclxuYGBgXG5cbiMjIEFub3RoZXIgRXhhbXBsZVxuXG5BIG1vcmUgYWR2YW5jZWQgZXhhbXBsZSB1c2luZyB0b3BpY3MgZnJvbSB0aGUgW1JhYmJpdE1RIHRvcGljIHR1dG9yaWFsXShodHRwOi8vd3d3LnJhYmJpdG1xLmNvbS90dXRvcmlhbHMvdHV0b3JpYWwtZml2ZS1weXRob24uaHRtbCk6XG5cbmBgYGphdmFzY3JpcHRcbnZhciBtYXRjaGVyID0gbmV3IFFsb2JiZXIoKTtcbm1hdGNoZXIuYWRkKCcqLm9yYW5nZS4qJywgJ1ExJyk7XG5tYXRjaGVyLmFkZCgnKi4qLnJhYmJpdCcsICdRMicpO1xubWF0Y2hlci5hZGQoJ2xhenkuIycsICdRMicpO1xuYXNzZXJ0LmRlZXBFcXVhbChbJ3F1aWNrLm9yYW5nZS5yYWJiaXQnLFxuICAgICAgICAgICAgICAgICAgJ2xhenkub3JhbmdlLmVsZXBoYW50JyxcbiAgICAgICAgICAgICAgICAgICdxdWljay5vcmFuZ2UuZm94JyxcbiAgICAgICAgICAgICAgICAgICdsYXp5LmJyb3duLmZveCcsXG4gICAgICAgICAgICAgICAgICAnbGF6eS5waW5rLnJhYmJpdCcsXG4gICAgICAgICAgICAgICAgICAncXVpY2suYnJvd24uZm94JyxcbiAgICAgICAgICAgICAgICAgICdvcmFuZ2UnLFxuICAgICAgICAgICAgICAgICAgJ3F1aWNrLm9yYW5nZS5tYWxlLnJhYmJpdCcsXG4gICAgICAgICAgICAgICAgICAnbGF6eS5vcmFuZ2UubWFsZS5yYWJiaXQnXS5tYXAoZnVuY3Rpb24gKHRvcGljKVxuICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBtYXRjaGVyLm1hdGNoKHRvcGljKS5zb3J0KCk7XG4gICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgW1snUTEnLCAnUTInXSxcbiAgICAgICAgICAgICAgICAgIFsnUTEnLCAnUTInXSxcbiAgICAgICAgICAgICAgICAgIFsnUTEnXSxcbiAgICAgICAgICAgICAgICAgIFsnUTInXSxcbiAgICAgICAgICAgICAgICAgIFsnUTInLCAnUTInXSxcbiAgICAgICAgICAgICAgICAgIFtdLFxuICAgICAgICAgICAgICAgICAgW10sXG4gICAgICAgICAgICAgICAgICBbXSxcbiAgICAgICAgICAgICAgICAgIFsnUTInXV0pO1xuYGBgXG5cbiMjIExpY2VuY2VcblxuW01JVF0oTElDRU5DRSlcblxuIyMgVGVzdHNcblxucWxvYmJlciBwYXNzZXMgdGhlIFtSYWJiaXRNUSB0b3BpYyB0ZXN0c10oaHR0cHM6Ly9naXRodWIuY29tL3JhYmJpdG1xL3JhYmJpdG1xLXNlcnZlci9ibG9iL21hc3Rlci9zcmMvcmFiYml0X3Rlc3RzLmVybCkgKEkgY29udmVydGVkIHRoZW0gZnJvbSBFcmxhbmcgdG8gSmF2YXNjcmlwdCkuXG5cblRvIHJ1biB0aGUgdGVzdHM6XG5cbmBgYHNoZWxsXG5ncnVudCB0ZXN0XG5gYGBcblxuIyMgTGludFxuXG5gYGBzaGVsbFxuZ3J1bnQgbGludFxuYGBgXG5cbiMjIENvZGUgQ292ZXJhZ2VcblxuYGBgc2hlbGxcbmdydW50IGNvdmVyYWdlXG5gYGBcblxuW0luc3RhbmJ1bF0oaHR0cDovL2dvdHdhcmxvc3QuZ2l0aHViLmlvL2lzdGFuYnVsLykgcmVzdWx0cyBhcmUgYXZhaWxhYmxlIFtoZXJlXShodHRwOi8vcmF3Z2l0LmRhdmVkb2VzZGV2LmNvbS9kYXZlZG9lc2Rldi9xbG9iYmVyL21hc3Rlci9jb3ZlcmFnZS9sY292LXJlcG9ydC9pbmRleC5odG1sKS5cblxuQ292ZXJhbGxzIHBhZ2UgaXMgW2hlcmVdKGh0dHBzOi8vY292ZXJhbGxzLmlvL3IvZGF2ZWRvZXNkZXYvcWxvYmJlcikuXG5cbiMjIEJlbmNobWFya3NcblxuYGBgc2hlbGxcbmdydW50IGJlbmNoXG5gYGBcblxucWxvYmJlciBpcyBhbHNvIGJlbmNobWFya2VkIGluIFthc2NvbHRhdG9yaV0oaHR0cHM6Ly9naXRodWIuY29tL21jb2xsaW5hL2FzY29sdGF0b3JpKS5cblxuIyBBUElcbiovXG5cbi8qanNsaW50IG5vZGU6IHRydWUsIG5vbWVuOiB0cnVlICovXG5cInVzZSBzdHJpY3RcIjtcblxudmFyIHV0aWwgPSByZXF1aXJlKCd1dGlsJyk7XG5cbi8qKlxuQ3JlYXRlcyBhIG5ldyBxbG9iYmVyLlxuXG5AY29uc3RydWN0b3JcbkBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gQ29uZmlndXJlcyB0aGUgcWxvYmJlci4gVXNlIHRoZSBmb2xsb3dpbmcgcHJvcGVydGllczpcbi0gYHtTdHJpbmd9IHNlcGFyYXRvcmAgVGhlIGNoYXJhY3RlciB0byB1c2UgZm9yIHNlcGFyYXRpbmcgd29yZHMgaW4gdG9waWNzLiBEZWZhdWx0cyB0byAnLicuIE1RVFQgdXNlcyAnLycgYXMgdGhlIHNlcGFyYXRvciwgZm9yIGV4YW1wbGUuXG5cbi0gYHtTdHJpbmd9IHdpbGRjYXJkX29uZWAgVGhlIGNoYXJhY3RlciB0byB1c2UgZm9yIG1hdGNoaW5nIGV4YWN0bHkgb25lIHdvcmQgaW4gYSB0b3BpYy4gRGVmYXVsdHMgdG8gJyonLiBNUVRUIHVzZXMgJysnLCBmb3IgZXhhbXBsZS5cblxuLSBge1N0cmluZ30gd2lsZGNhcmRfc29tZWAgVGhlIGNoYXJhY3RlciB0byB1c2UgZm9yIG1hdGNoaW5nIHplcm8gb3IgbW9yZSB3b3JkcyBpbiBhIHRvcGljLiBEZWZhdWx0cyB0byAnIycuIE1RVFQgdXNlcyAnIycgdG9vLlxuXG4tIGB7Qm9vbGVhbn0gY2FjaGVfYWRkc2AgV2hldGhlciB0byBjYWNoZSB0b3BpY3Mgd2hlbiBhZGRpbmcgdG9waWMgbWF0Y2hlcnMuIFRoaXMgd2lsbCBtYWtlIGFkZGluZyBtdWx0aXBsZSBtYXRjaGVycyBmb3IgdGhlIHNhbWUgdG9waWMgZmFzdGVyIGF0IHRoZSBjb3N0IG9mIGV4dHJhIG1lbW9yeSB1c2FnZS4gRGVmYXVsdHMgdG8gYGZhbHNlYC5cbiovXG5mdW5jdGlvbiBRbG9iYmVyIChvcHRpb25zKVxue1xuICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXG4gICAgdGhpcy5fc2VwYXJhdG9yID0gb3B0aW9ucy5zZXBhcmF0b3IgfHwgJy4nO1xuICAgIHRoaXMuX3dpbGRjYXJkX29uZSA9IG9wdGlvbnMud2lsZGNhcmRfb25lIHx8ICcqJztcbiAgICB0aGlzLl93aWxkY2FyZF9zb21lID0gb3B0aW9ucy53aWxkY2FyZF9zb21lIHx8ICcjJztcbiAgICB0aGlzLl90cmllID0gbmV3IE1hcCgpO1xuICAgIGlmIChvcHRpb25zLmNhY2hlX2FkZHMpXG4gICAge1xuICAgICAgICB0aGlzLl9zaG9ydGN1dHMgPSBuZXcgTWFwKCk7XG4gICAgfVxufVxuXG5RbG9iYmVyLnByb3RvdHlwZS5faW5pdGlhbF92YWx1ZSA9IGZ1bmN0aW9uICh2YWwpXG57XG4gICAgcmV0dXJuIFt2YWxdO1xufTtcblxuUWxvYmJlci5wcm90b3R5cGUuX2FkZF92YWx1ZSA9IGZ1bmN0aW9uICh2YWxzLCB2YWwpXG57XG4gICAgdmFsc1t2YWxzLmxlbmd0aF0gPSB2YWw7XG59O1xuXG5RbG9iYmVyLnByb3RvdHlwZS5fYWRkX3ZhbHVlcyA9IGZ1bmN0aW9uIChkZXN0LCBvcmlnaW4pXG57XG4gICAgdmFyIGksIGRlc3RMZW5ndGggPSBkZXN0Lmxlbmd0aCwgb3JpZ2luTGVuZ3RoID0gb3JpZ2luLmxlbmd0aDtcblxuICAgIGZvciAoaSA9IDA7IGkgPCBvcmlnaW5MZW5ndGg7IGkgKz0gMSlcbiAgICB7XG4gICAgICAgIGRlc3RbZGVzdExlbmd0aCArIGldID0gb3JpZ2luW2ldO1xuICAgIH1cbn07XG5cblFsb2JiZXIucHJvdG90eXBlLl9yZW1vdmVfdmFsdWUgPSBmdW5jdGlvbiAodmFscywgdmFsKVxue1xuICAgIGlmICh2YWwgPT09IHVuZGVmaW5lZClcbiAgICB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHZhciBpbmRleCA9IHZhbHMubGFzdEluZGV4T2YodmFsKTtcblxuICAgIGlmIChpbmRleCA+PSAwKVxuICAgIHtcbiAgICAgICAgdmFscy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgIH1cblxuICAgIHJldHVybiB2YWxzLmxlbmd0aCA9PT0gMDtcbn07XG5cblFsb2JiZXIucHJvdG90eXBlLl9hZGQgPSBmdW5jdGlvbiAodmFsLCBpLCB3b3Jkcywgc3ViX3RyaWUpXG57XG4gICAgdmFyIHN0LCB3b3JkO1xuXG4gICAgaWYgKGkgPT09IHdvcmRzLmxlbmd0aClcbiAgICB7XG4gICAgICAgIHN0ID0gc3ViX3RyaWUuZ2V0KHRoaXMuX3NlcGFyYXRvcik7XG4gICAgICAgIFxuICAgICAgICBpZiAoc3QpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMuX2FkZF92YWx1ZShzdCwgdmFsKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlXG4gICAgICAgIHtcbiAgICAgICAgICAgIHN0ID0gdGhpcy5faW5pdGlhbF92YWx1ZSh2YWwpO1xuICAgICAgICAgICAgc3ViX3RyaWUuc2V0KHRoaXMuX3NlcGFyYXRvciwgc3QpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gc3Q7XG4gICAgfVxuXG4gICAgd29yZCA9IHdvcmRzW2ldO1xuICAgIHN0ID0gc3ViX3RyaWUuZ2V0KHdvcmQpO1xuICAgIFxuICAgIGlmICghc3QpXG4gICAge1xuICAgICAgICBzdCA9IG5ldyBNYXAoKTtcbiAgICAgICAgc3ViX3RyaWUuc2V0KHdvcmQsIHN0KTtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIHRoaXMuX2FkZCh2YWwsIGkgKyAxLCB3b3Jkcywgc3QpO1xufTtcblxuUWxvYmJlci5wcm90b3R5cGUuX3JlbW92ZSA9IGZ1bmN0aW9uICh2YWwsIGksIHdvcmRzLCBzdWJfdHJpZSlcbntcbiAgICB2YXIgc3QsIHdvcmQsIHI7XG5cbiAgICBpZiAoaSA9PT0gd29yZHMubGVuZ3RoKVxuICAgIHtcbiAgICAgICAgc3QgPSBzdWJfdHJpZS5nZXQodGhpcy5fc2VwYXJhdG9yKTtcblxuICAgICAgICBpZiAoc3QgJiYgdGhpcy5fcmVtb3ZlX3ZhbHVlKHN0LCB2YWwpKVxuICAgICAgICB7XG4gICAgICAgICAgICBzdWJfdHJpZS5kZWxldGUodGhpcy5fc2VwYXJhdG9yKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBcbiAgICB3b3JkID0gd29yZHNbaV07XG4gICAgc3QgPSBzdWJfdHJpZS5nZXQod29yZCk7XG5cbiAgICBpZiAoIXN0KVxuICAgIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHIgPSB0aGlzLl9yZW1vdmUodmFsLCBpICsgMSwgd29yZHMsIHN0KTtcblxuICAgIGlmIChzdC5zaXplID09PSAwKVxuICAgIHtcbiAgICAgICAgc3ViX3RyaWUuZGVsZXRlKHdvcmQpO1xuICAgIH1cblxuICAgIHJldHVybiByO1xufTtcblxuUWxvYmJlci5wcm90b3R5cGUuX21hdGNoX3NvbWUgPSBmdW5jdGlvbiAodiwgaSwgd29yZHMsIHN0LCBjdHgpXG57XG4gICAgdmFyIGosIHc7XG5cbiAgICBmb3IgKHcgb2Ygc3Qua2V5cygpKVxuICAgIHtcbiAgICAgICAgaWYgKHcgIT09IHRoaXMuX3NlcGFyYXRvcilcbiAgICAgICAge1xuICAgICAgICAgICAgZm9yIChqID0gaTsgaiA8IHdvcmRzLmxlbmd0aDsgaiArPSAxKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHYgPSB0aGlzLl9tYXRjaCh2LCBqLCB3b3Jkcywgc3QsIGN0eCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB2O1xufTtcblxuUWxvYmJlci5wcm90b3R5cGUuX21hdGNoID0gZnVuY3Rpb24gKHYsIGksIHdvcmRzLCBzdWJfdHJpZSwgY3R4KVxue1xuICAgIHZhciB3b3JkLCBzdDtcblxuICAgIHN0ID0gc3ViX3RyaWUuZ2V0KHRoaXMuX3dpbGRjYXJkX3NvbWUpO1xuXG4gICAgaWYgKHN0KVxuICAgIHtcbiAgICAgICAgLy8gaW4gdGhlIGNvbW1vbiBjYXNlIHRoZXJlIHdpbGwgYmUgbm8gbW9yZSBsZXZlbHMuLi5cbiAgICAgICAgdiA9IHRoaXMuX21hdGNoX3NvbWUodiwgaSwgd29yZHMsIHN0LCBjdHgpO1xuICAgICAgICAvLyBhbmQgd2UnbGwgZW5kIHVwIG1hdGNoaW5nIHRoZSByZXN0IG9mIHRoZSB3b3JkczpcbiAgICAgICAgdiA9IHRoaXMuX21hdGNoKHYsIHdvcmRzLmxlbmd0aCwgd29yZHMsIHN0LCBjdHgpO1xuICAgIH1cblxuICAgIGlmIChpID09PSB3b3Jkcy5sZW5ndGgpXG4gICAge1xuICAgICAgICBzdCA9IHN1Yl90cmllLmdldCh0aGlzLl9zZXBhcmF0b3IpO1xuXG4gICAgICAgIGlmIChzdClcbiAgICAgICAge1xuICAgICAgICAgICAgaWYgKHYuZGVzdClcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9hZGRfdmFsdWVzKHYuZGVzdCwgdi5zb3VyY2UsIGN0eCk7XG4gICAgICAgICAgICAgICAgdGhpcy5fYWRkX3ZhbHVlcyh2LmRlc3QsIHN0LCBjdHgpO1xuICAgICAgICAgICAgICAgIHYgPSB2LmRlc3Q7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh2LnNvdXJjZSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB2LmRlc3QgPSB2LnNvdXJjZTtcbiAgICAgICAgICAgICAgICB2LnNvdXJjZSA9IHN0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHRoaXMuX2FkZF92YWx1ZXModiwgc3QsIGN0eCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZVxuICAgIHtcbiAgICAgICAgd29yZCA9IHdvcmRzW2ldO1xuXG4gICAgICAgIGlmICgod29yZCAhPT0gdGhpcy5fd2lsZGNhcmRfb25lKSAmJiAod29yZCAhPT0gdGhpcy5fd2lsZGNhcmRfc29tZSkpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHN0ID0gc3ViX3RyaWUuZ2V0KHdvcmQpO1xuXG4gICAgICAgICAgICBpZiAoc3QpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdiA9IHRoaXMuX21hdGNoKHYsIGkgKyAxLCB3b3Jkcywgc3QsIGN0eCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAod29yZClcbiAgICAgICAge1xuICAgICAgICAgICAgc3QgPSBzdWJfdHJpZS5nZXQodGhpcy5fd2lsZGNhcmRfb25lKTtcblxuICAgICAgICAgICAgaWYgKHN0KVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHYgPSB0aGlzLl9tYXRjaCh2LCBpICsgMSwgd29yZHMsIHN0LCBjdHgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHY7XG59O1xuXG5RbG9iYmVyLnByb3RvdHlwZS5fbWF0Y2gyID0gZnVuY3Rpb24gKHYsIHRvcGljLCBjdHgpXG57XG4gICAgdmFyIHZhbHMgPSB0aGlzLl9tYXRjaChcbiAgICB7XG4gICAgICAgIHNvdXJjZTogdlxuICAgIH0sIDAsIHRvcGljLnNwbGl0KHRoaXMuX3NlcGFyYXRvciksIHRoaXMuX3RyaWUsIGN0eCk7XG5cbiAgICByZXR1cm4gdmFscy5zb3VyY2UgfHwgdmFscztcbn07XG5cblFsb2JiZXIucHJvdG90eXBlLl90ZXN0X3NvbWUgPSBmdW5jdGlvbiAodiwgaSwgd29yZHMsIHN0KVxue1xuICAgIHZhciBqLCB3O1xuXG4gICAgZm9yICh3IG9mIHN0LmtleXMoKSlcbiAgICB7XG4gICAgICAgIGlmICh3ICE9PSB0aGlzLl9zZXBhcmF0b3IpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGZvciAoaiA9IGk7IGogPCB3b3Jkcy5sZW5ndGg7IGogKz0gMSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5fdGVzdCh2LCBqLCB3b3Jkcywgc3QpKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2U7XG59O1xuXG5RbG9iYmVyLnByb3RvdHlwZS5fdGVzdCA9IGZ1bmN0aW9uICh2LCBpLCB3b3Jkcywgc3ViX3RyaWUpXG57XG4gICAgdmFyIHdvcmQsIHN0O1xuXG4gICAgc3QgPSBzdWJfdHJpZS5nZXQodGhpcy5fd2lsZGNhcmRfc29tZSk7XG5cbiAgICBpZiAoc3QpXG4gICAge1xuICAgICAgICAgICAgLy8gaW4gdGhlIGNvbW1vbiBjYXNlIHRoZXJlIHdpbGwgYmUgbm8gbW9yZSBsZXZlbHMuLi5cbiAgICAgICAgaWYgKHRoaXMuX3Rlc3Rfc29tZSh2LCBpLCB3b3Jkcywgc3QpIHx8XG4gICAgICAgICAgICAvLyBhbmQgd2UnbGwgZW5kIHVwIG1hdGNoaW5nIHRoZSByZXN0IG9mIHRoZSB3b3JkczpcbiAgICAgICAgICAgIHRoaXMuX3Rlc3Qodiwgd29yZHMubGVuZ3RoLCB3b3Jkcywgc3QpKVxuICAgICAgICB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGlmIChpID09PSB3b3Jkcy5sZW5ndGgpXG4gICAge1xuICAgICAgICBzdCA9IHN1Yl90cmllLmdldCh0aGlzLl9zZXBhcmF0b3IpO1xuXG4gICAgICAgIGlmIChzdCAmJiB0aGlzLnRlc3RfdmFsdWVzKHN0LCB2KSlcbiAgICAgICAge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZVxuICAgIHtcbiAgICAgICAgd29yZCA9IHdvcmRzW2ldO1xuXG4gICAgICAgIGlmICgod29yZCAhPT0gdGhpcy5fd2lsZGNhcmRfb25lKSAmJiAod29yZCAhPT0gdGhpcy5fd2lsZGNhcmRfc29tZSkpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHN0ID0gc3ViX3RyaWUuZ2V0KHdvcmQpO1xuXG4gICAgICAgICAgICBpZiAoc3QgJiYgdGhpcy5fdGVzdCh2LCBpICsgMSwgd29yZHMsIHN0KSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh3b3JkKVxuICAgICAgICB7XG4gICAgICAgICAgICBzdCA9IHN1Yl90cmllLmdldCh0aGlzLl93aWxkY2FyZF9vbmUpO1xuXG4gICAgICAgICAgICBpZiAoc3QgJiYgdGhpcy5fdGVzdCh2LCBpICsgMSwgd29yZHMsIHN0KSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbn07XG5cbi8qKlxuQWRkIGEgdG9waWMgbWF0Y2hlciB0byB0aGUgcWxvYmJlci5cblxuTm90ZSB5b3UgY2FuIG1hdGNoIG1vcmUgdGhhbiBvbmUgdmFsdWUgYWdhaW5zdCBhIHRvcGljIGJ5IGNhbGxpbmcgYGFkZGAgbXVsdGlwbGUgdGltZXMgd2l0aCB0aGUgc2FtZSB0b3BpYyBhbmQgZGlmZmVyZW50IHZhbHVlcy5cblxuQHBhcmFtIHtTdHJpbmd9IHRvcGljIFRoZSB0b3BpYyB0byBtYXRjaCBhZ2FpbnN0LlxuQHBhcmFtIHtBbnl9IHZhbCBUaGUgdmFsdWUgdG8gcmV0dXJuIGlmIHRoZSB0b3BpYyBpcyBtYXRjaGVkLlxuQHJldHVybiB7UWxvYmJlcn0gVGhlIHFsb2JiZXIgKGZvciBjaGFpbmluZykuXG4qL1xuUWxvYmJlci5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24gKHRvcGljLCB2YWwpXG57XG4gICAgdmFyIHNob3J0Y3V0ID0gdGhpcy5fc2hvcnRjdXRzICYmIHRoaXMuX3Nob3J0Y3V0cy5nZXQodG9waWMpO1xuICAgIGlmIChzaG9ydGN1dClcbiAgICB7XG4gICAgICAgIHRoaXMuX2FkZF92YWx1ZShzaG9ydGN1dCwgdmFsKTtcbiAgICB9XG4gICAgZWxzZVxuICAgIHtcbiAgICAgICAgc2hvcnRjdXQgPSB0aGlzLl9hZGQodmFsLCAwLCB0b3BpYy5zcGxpdCh0aGlzLl9zZXBhcmF0b3IpLCB0aGlzLl90cmllKTtcbiAgICAgICAgaWYgKHRoaXMuX3Nob3J0Y3V0cylcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5fc2hvcnRjdXRzLnNldCh0b3BpYywgc2hvcnRjdXQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG5SZW1vdmUgYSB0b3BpYyBtYXRjaGVyIGZyb20gdGhlIHFsb2JiZXIuXG5cbkBwYXJhbSB7U3RyaW5nfSB0b3BpYyBUaGUgdG9waWMgdGhhdCdzIGJlaW5nIG1hdGNoZWQgYWdhaW5zdC5cbkBwYXJhbSB7QW55fSBbdmFsXSBUaGUgdmFsdWUgdGhhdCdzIGJlaW5nIG1hdGNoZWQuIElmIHlvdSBkb24ndCBzcGVjaWZ5IGB2YWxgIHRoZW4gYWxsIG1hdGNoZXJzIGZvciBgdG9waWNgIGFyZSByZW1vdmVkLlxuQHJldHVybiB7UWxvYmJlcn0gVGhlIHFsb2JiZXIgKGZvciBjaGFpbmluZykuXG4qL1xuUWxvYmJlci5wcm90b3R5cGUucmVtb3ZlID0gZnVuY3Rpb24gKHRvcGljLCB2YWwpXG57XG4gICAgaWYgKHRoaXMuX3JlbW92ZSh2YWwsIDAsIHRvcGljLnNwbGl0KHRoaXMuX3NlcGFyYXRvciksIHRoaXMuX3RyaWUpICYmIHRoaXMuX3Nob3J0Y3V0cylcbiAgICB7XG4gICAgICAgIHRoaXMuX3Nob3J0Y3V0cy5kZWxldGUodG9waWMpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuTWF0Y2ggYSB0b3BpYy5cblxuQHBhcmFtIHtTdHJpbmd9IHRvcGljIFRoZSB0b3BpYyB0byBtYXRjaCBhZ2FpbnN0LlxuQHJldHVybiB7QXJyYXl9IExpc3Qgb2YgdmFsdWVzIHRoYXQgbWF0Y2hlZCB0aGUgdG9waWMuIFRoaXMgbWF5IGNvbnRhaW4gZHVwbGljYXRlcy4gVXNlIGEgW2BRbG9iYmVyRGVkdXBgXSgjcWxvYmJlcmRlZHVwb3B0aW9ucykgaWYgeW91IGRvbid0IHdhbnQgZHVwbGljYXRlcy5cbiovXG5RbG9iYmVyLnByb3RvdHlwZS5tYXRjaCA9IGZ1bmN0aW9uICh0b3BpYywgY3R4KVxue1xuICAgIHJldHVybiB0aGlzLl9tYXRjaDIoW10sIHRvcGljLCBjdHgpO1xufTtcblxuLyoqXG5UZXN0IHdoZXRoZXIgYSB0b3BpYyBtYXRjaCBjb250YWlucyBhIHZhbHVlLiBGYXN0ZXIgdGhhbiBjYWxsaW5nIFtgbWF0Y2hgXSgjcWxvYmJlcnByb3RvdHlwZW1hdGNodG9waWMpIGFuZCBzZWFyY2hpbmcgdGhlIHJlc3VsdCBmb3IgdGhlIHZhbHVlLiBWYWx1ZXMgYXJlIHRlc3RlZCB1c2luZyBbYHRlc3RfdmFsdWVzYF0oI3Fsb2JiZXJwcm90b3R5cGV0ZXN0X3ZhbHVlc3ZhbHMtdmFsKS5cblxuQHBhcmFtIHtTdHJpbmd9IHRvcGljIFRoZSB0b3BpYyB0byBtYXRjaCBhZ2FpbnN0LlxuQHBhcmFtIHtBbnl9IHZhbCBUaGUgdmFsdWUgYmVpbmcgdGVzdGVkIGZvci5cbkByZXR1cm4ge0Jvb2xlYW59IFdoZXRoZXIgbWF0Y2hpbmcgYWdhaW5zdCBgdG9waWNgIGNvbnRhaW5zIGB2YWxgLlxuKi9cblFsb2JiZXIucHJvdG90eXBlLnRlc3QgPSBmdW5jdGlvbiAodG9waWMsIHZhbClcbntcbiAgICByZXR1cm4gdGhpcy5fdGVzdCh2YWwsIDAsIHRvcGljLnNwbGl0KHRoaXMuX3NlcGFyYXRvciksIHRoaXMuX3RyaWUpO1xufTtcblxuLyoqXG5UZXN0IHdoZXRoZXIgdmFsdWVzIGZvdW5kIGluIGEgbWF0Y2ggY29udGFpbiBhIHZhbHVlIHBhc3NlZCB0byBbYHRlc3RgXSgjcWxvYmJlcnByb3RvdHlwZXRlc3R0b3BpYy12YWwpLiBZb3UgY2FuIG92ZXJyaWRlIHRoaXMgdG8gcHJvdmlkZSBhIGN1c3RvbSBpbXBsZW1lbnRhdGlvbi4gRGVmYXVsdHMgdG8gdXNpbmcgYGluZGV4T2ZgLlxuXG5AcGFyYW0ge0FycmF5fSB2YWxzIFRoZSB2YWx1ZXMgZm91bmQgd2hpbGUgbWF0Y2hpbmcuXG5AcGFyYW0ge0FueX0gdmFsIFRoZSB2YWx1ZSBiZWluZyB0ZXN0ZWQgZm9yLlxuQHJldHVybiB7Qm9vbGVhbn0gV2hldGhlciBgdmFsc2AgY29udGFpbnMgYHZhbGAuXG4qL1xuUWxvYmJlci5wcm90b3R5cGUudGVzdF92YWx1ZXMgPSBmdW5jdGlvbiAodmFscywgdmFsKVxue1xuICAgIHJldHVybiB2YWxzLmluZGV4T2YodmFsKSA+PSAwO1xufTtcblxuLyoqXG5SZXNldCB0aGUgcWxvYmJlci5cblxuUmVtb3ZlcyBhbGwgdG9waWMgbWF0Y2hlcnMgZnJvbSB0aGUgcWxvYmJlci5cblxuQHJldHVybiB7UWxvYmJlcn0gVGhlIHFsb2JiZXIgKGZvciBjaGFpbmluZykuXG4qL1xuUWxvYmJlci5wcm90b3R5cGUuY2xlYXIgPSBmdW5jdGlvbiAoKVxue1xuICAgIHRoaXMuX3RyaWUuY2xlYXIoKTtcbiAgICBpZiAodGhpcy5fc2hvcnRjdXRzKVxuICAgIHtcbiAgICAgICAgdGhpcy5fc2hvcnRjdXRzLmNsZWFyKCk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xufTtcblxuLy8gZm9yIGRlYnVnZ2luZ1xuUWxvYmJlci5wcm90b3R5cGUuZ2V0X3RyaWUgPSBmdW5jdGlvbiAoKVxue1xuICAgIHJldHVybiB0aGlzLl90cmllO1xufTtcblxuLyoqXG5WaXNpdCBlYWNoIG5vZGUgaW4gdGhlIHFsb2JiZXIncyB0cmllIGluIHR1cm4uXG5cbkByZXR1cm4ge0l0ZXJhdG9yfSBBbiBpdGVyYXRvciBvbiB0aGUgdHJpZS4gVGhlIGl0ZXJhdG9yIHJldHVybnMgb2JqZWN0cyB3aGljaCwgaWYgZmVkIChpbiB0aGUgc2FtZSBvcmRlcikgdG8gdGhlIGZ1bmN0aW9uIHJldHVybmVkIGJ5IFtgZ2V0X3Jlc3RvcmVyYF0oI3Fsb2JiZXJwcm90b3R5cGVnZXRfcmVzdG9yZXJvcHRpb25zKSBvbiBhIGRpZmZlcmVudCBxbG9iYmVyLCB3aWxsIGJ1aWxkIHRoYXQgcWxvYmJlcidzIHRyaWUgdG8gdGhlIHNhbWUgc3RhdGUuIFRoZSBvYmplY3RzIGNhbiBiZSBzZXJpYWxpemVkIHVzaW5nIGBKU09OLnN0cmluZ2lmeWAsIF9pZl8gdGhlIHZhbHVlcyB5b3Ugc3RvcmUgaW4gdGhlIHFsb2JiZXIgYXJlIGFsc28gc2VyaWFsaXphYmxlLlxuKi9cblFsb2JiZXIucHJvdG90eXBlLnZpc2l0ID0gZnVuY3Rpb24qICgpXG57XG4gICAgbGV0IGl0ZXJhdG9ycyA9IFtdLFxuICAgICAgICBpdGVyYXRvciA9IHRoaXMuX3RyaWUuZW50cmllcygpLFxuICAgICAgICBpID0gMDtcblxuICAgIHdoaWxlICh0cnVlKVxuICAgIHtcbiAgICAgICAgaWYgKGkgPT09IDApXG4gICAgICAgIHtcbiAgICAgICAgICAgIHlpZWxkIHsgdHlwZTogJ3N0YXJ0X2VudHJpZXMnIH07XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgbmV4dCA9IGl0ZXJhdG9yLm5leHQoKTtcblxuICAgICAgICBpZiAobmV4dC5kb25lKVxuICAgICAgICB7XG4gICAgICAgICAgICB5aWVsZCB7IHR5cGU6ICdlbmRfZW50cmllcycgfTtcblxuICAgICAgICAgICAgbGV0IHByZXYgPSBpdGVyYXRvcnMucG9wKCk7XG4gICAgICAgICAgICBpZiAocHJldiA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgW2l0ZXJhdG9yLCBpXSA9IHByZXY7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBba2V5LCB2YWx1ZV0gPSBuZXh0LnZhbHVlO1xuICAgICAgICB5aWVsZCB7IHR5cGU6ICdlbnRyeScsIGk6IGkrKywga2V5OiBrZXkgfTtcblxuICAgICAgICBpZiAoa2V5ID09PSB0aGlzLl9zZXBhcmF0b3IpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHlpZWxkIHsgdHlwZTogJ3N0YXJ0X3ZhbHVlcycgfTtcblxuICAgICAgICAgICAgaWYgKHZhbHVlW1N5bWJvbC5pdGVyYXRvcl0pXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgbGV0IGogPSAwO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IHYgb2YgdmFsdWUpXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICB5aWVsZCB7IHR5cGU6ICd2YWx1ZScsIGk6IGorKywgdmFsdWU6IHYgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgeWllbGQgeyB0eXBlOiAndmFsdWUnLCBpOiAwLCB2YWx1ZTogdmFsdWUgfTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgeWllbGQgeyB0eXBlOiAnZW5kX3ZhbHVlcycgfTtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgaXRlcmF0b3JzLnB1c2goW2l0ZXJhdG9yLCBpXSk7XG4gICAgICAgIGl0ZXJhdG9yID0gdmFsdWUuZW50cmllcygpO1xuICAgICAgICBpID0gMDtcbiAgICB9XG59O1xuXG4vKipcbkdldCBhIGZ1bmN0aW9uIHdoaWNoIGNhbiByZXN0b3JlIHRoZSBxbG9iYmVyJ3MgdHJpZSB0byBhIHN0YXRlIHlvdSByZXRyaWV2ZWRcbmJ5IGNhbGxpbmcgW2B2aXNpdGBdKCNxbG9iYmVycHJvdG90eXBldmlzaXQpIG9uIHRoaXMgb3IgYW5vdGhlciBxbG9iYmVyLlxuXG5AcGFyYW0ge09iamVjdH0gW29wdGlvbnNdIE9wdGlvbnMgZm9yIHJlc3RvcmluZyB0aGUgdHJpZS5cbi0gYHtCb29sZWFufSBjYWNoZV9hZGRzYCBXaGV0aGVyIHRvIGNhY2hlIHRvcGljcyB3aGVuIHJlYnVpbGRpbmcgdGhlIHRyaWUuIFRoaXMgb25seSBhcHBsaWVzIGlmIHlvdSBhbHNvIHBhc3NlZCBgY2FjaGVfYWRkc2AgYXMgdHJ1ZSBpbiB0aGUgW2NvbnN0cnVjdG9yXSgjcWxvYmJlcm9wdGlvbnMpLlxuXG5AcmV0dXJuIHtGdW5jdGlvbn0gRnVuY3Rpb24gdG8gY2FsbCBpbiBvcmRlciB0byByZWJ1aWxkIHRoZSBxbG9iYmVyJ3MgdHJpZS4gWW91IHNob3VsZCBjYWxsIHRoaXMgcmVwZWF0ZWRseSB3aXRoIHRoZSBvYmplY3RzIHlvdSByZWNlaXZlZCBmcm9tIGEgY2FsbCB0byBbYHZpc2l0YF0oI3Fsb2JiZXJwcm90b3R5cGV2aXNpdCkuIElmIHlvdSBzZXJpYWxpemVkIHRoZSBvYmplY3RzLCByZW1lbWJlciB0byBkZXNlcmlhbGl6ZSB0aGVtIGZpcnN0IChlLmcuIHdpdGggYEpTT04ucGFyc2VgKSFcbiovXG5RbG9iYmVyLnByb3RvdHlwZS5nZXRfcmVzdG9yZXIgPSBmdW5jdGlvbiAob3B0aW9ucylcbntcbiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblxuICAgIGxldCBzdHMgPSBbXSxcbiAgICAgICAgZW50cnkgPSB0aGlzLl90cmllLFxuICAgICAgICBwYXRoID0gJyc7XG5cbiAgICByZXR1cm4gKG9iaikgPT5cbiAgICB7XG4gICAgICAgIHN3aXRjaCAob2JqLnR5cGUpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGNhc2UgJ2VudHJ5JzpcbiAgICAgICAgICAgICAgICBlbnRyeSA9IGVudHJ5IHx8IG5ldyBNYXAoKTtcbiAgICAgICAgICAgICAgICBzdHMucHVzaChbZW50cnksIG9iai5rZXksIHBhdGhdKTtcbiAgICAgICAgICAgICAgICBlbnRyeSA9IGVudHJ5LmdldChvYmoua2V5KTtcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5jYWNoZV9hZGRzKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBhdGgpXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhdGggKz0gdGhpcy5fc2VwYXJhdG9yO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHBhdGggKz0gb2JqLmtleTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgJ3ZhbHVlJzpcbiAgICAgICAgICAgICAgICBpZiAoZW50cnkpXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9hZGRfdmFsdWUoZW50cnksIG9iai52YWx1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGVudHJ5ID0gdGhpcy5faW5pdGlhbF92YWx1ZShvYmoudmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgY2FzZSAnZW5kX2VudHJpZXMnOlxuICAgICAgICAgICAgICAgIGlmIChlbnRyeSAmJiAoZW50cnkuc2l6ZSA9PT0gMCkpXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBlbnRyeSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLyogZmFsbHMgdGhyb3VnaCAqL1xuXG4gICAgICAgICAgICBjYXNlICdlbmRfdmFsdWVzJzpcbiAgICAgICAgICAgICAgICBsZXQgcHJldiA9IHN0cy5wb3AoKTtcbiAgICAgICAgICAgICAgICBpZiAocHJldiA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgZW50cnkgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgIHBhdGggPSAnJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IFtwcmV2X2VudHJ5LCBrZXksIHByZXZfcGF0aF0gPSBwcmV2O1xuICAgICAgICAgICAgICAgICAgICBpZiAoZW50cnkpXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmNhY2hlX2FkZHMgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9zaG9ydGN1dHMgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAob2JqLnR5cGUgPT09ICdlbmRfdmFsdWVzJykpXG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fc2hvcnRjdXRzLnNldChwcmV2X3BhdGgsIGVudHJ5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHByZXZfZW50cnkuc2V0KGtleSwgZW50cnkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVudHJ5ID0gcHJldl9lbnRyeTtcbiAgICAgICAgICAgICAgICAgICAgcGF0aCA9IHByZXZfcGF0aDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9O1xufTtcblxuLyoqXG5DcmVhdGVzIGEgbmV3IGRlLWR1cGxpY2F0aW5nIHFsb2JiZXIuXG5cbkluaGVyaXRzIGZyb20gW2BRbG9iYmVyYF0oI3Fsb2JiZXJvcHRpb25zKS5cblxuQGNvbnN0cnVjdG9yXG5AcGFyYW0ge09iamVjdH0gW29wdGlvbnNdIFNhbWUgb3B0aW9ucyBhcyBRbG9iYmVyLlxuKi9cbmZ1bmN0aW9uIFFsb2JiZXJEZWR1cCAob3B0aW9ucylcbntcbiAgICBRbG9iYmVyLmNhbGwodGhpcywgb3B0aW9ucyk7XG59XG5cbnV0aWwuaW5oZXJpdHMoUWxvYmJlckRlZHVwLCBRbG9iYmVyKTtcblxuUWxvYmJlckRlZHVwLnByb3RvdHlwZS5faW5pdGlhbF92YWx1ZSA9IGZ1bmN0aW9uICh2YWwpXG57XG4gICAgcmV0dXJuIG5ldyBTZXQoKS5hZGQodmFsKTtcbn07XG5cblFsb2JiZXJEZWR1cC5wcm90b3R5cGUuX2FkZF92YWx1ZSA9IGZ1bmN0aW9uICh2YWxzLCB2YWwpXG57XG4gICAgdmFscy5hZGQodmFsKTtcbn07XG5cblFsb2JiZXJEZWR1cC5wcm90b3R5cGUuX2FkZF92YWx1ZXMgPSBmdW5jdGlvbiAoZGVzdCwgb3JpZ2luKVxue1xuICAgIG9yaWdpbi5mb3JFYWNoKGZ1bmN0aW9uICh2YWwpXG4gICAge1xuICAgICAgICBkZXN0LmFkZCh2YWwpO1xuICAgIH0pO1xufTtcblxuUWxvYmJlckRlZHVwLnByb3RvdHlwZS5fcmVtb3ZlX3ZhbHVlID0gZnVuY3Rpb24gKHZhbHMsIHZhbClcbntcbiAgICBpZiAodmFsID09PSB1bmRlZmluZWQpXG4gICAge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICB2YWxzLmRlbGV0ZSh2YWwpO1xuICAgIHJldHVybiB2YWxzLnNpemUgPT09IDA7XG59O1xuXG4vKipcblRlc3Qgd2hldGhlciB2YWx1ZXMgZm91bmQgaW4gYSBtYXRjaCBjb250YWluIGEgdmFsdWUgcGFzc2VkIHRvIFtgdGVzdGBdKCNxbG9iYmVycHJvdG90eXBldGVzdHRvcGljX3ZhbCkuIFlvdSBjYW4gb3ZlcnJpZGUgdGhpcyB0byBwcm92aWRlIGEgY3VzdG9tIGltcGxlbWVudGF0aW9uLiBEZWZhdWx0cyB0byB1c2luZyBgaGFzYC5cblxuQHBhcmFtIHtTZXR9IHZhbHMgVGhlIHZhbHVlcyBmb3VuZCB3aGlsZSBtYXRjaGluZyAoW0VTNiBTZXRdKGh0dHA6Ly93d3cuZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi82LjAvI3NlYy1zZXQtb2JqZWN0cykpLlxuQHBhcmFtIHtBbnl9IHZhbCBUaGUgdmFsdWUgYmVpbmcgdGVzdGVkIGZvci5cbkByZXR1cm4ge0Jvb2xlYW59IFdoZXRoZXIgYHZhbHNgIGNvbnRhaW5zIGB2YWxgLlxuKi9cblFsb2JiZXJEZWR1cC5wcm90b3R5cGUudGVzdF92YWx1ZXMgPSBmdW5jdGlvbiAodmFscywgdmFsKVxue1xuICAgIHJldHVybiB2YWxzLmhhcyh2YWwpO1xufTtcblxuLyoqXG5NYXRjaCBhIHRvcGljLlxuXG5AcGFyYW0ge1N0cmluZ30gdG9waWMgVGhlIHRvcGljIHRvIG1hdGNoIGFnYWluc3QuXG5AcmV0dXJuIHtTZXR9IFtFUzYgU2V0XShodHRwOi8vd3d3LmVjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNi4wLyNzZWMtc2V0LW9iamVjdHMpIG9mIHZhbHVlcyB0aGF0IG1hdGNoZWQgdGhlIHRvcGljLlxuKi9cblFsb2JiZXJEZWR1cC5wcm90b3R5cGUubWF0Y2ggPSBmdW5jdGlvbiAodG9waWMsIGN0eClcbntcbiAgICByZXR1cm4gdGhpcy5fbWF0Y2gyKG5ldyBTZXQoKSwgdG9waWMsIGN0eCk7XG59O1xuXG4vKipcbkNyZWF0ZXMgYSBuZXcgcWxvYmJlciB3aGljaCBvbmx5IHN0b3JlcyB0aGUgdmFsdWUgYHRydWVgLlxuXG5XaGF0ZXZlciB2YWx1ZSB5b3UgW2BhZGRgXSgjcWxvYmJlcnByb3RvdHlwZWFkZHRvcGljLXZhbCkgdG8gdGhpcyBxbG9iYmVyXG4oZXZlbiBgdW5kZWZpbmVkYCksIGEgc2luZ2xlLCBkZS1kdXBsaWNhdGVkIGB0cnVlYCB3aWxsIGJlIHN0b3JlZC4gVXNlIHRoaXNcbnFsb2JiZXIgaWYgeW91IG9ubHkgbmVlZCB0byB0ZXN0IHdoZXRoZXIgdG9waWNzIG1hdGNoLCBub3QgYWJvdXQgdGhlIHZhbHVlc1xudGhleSBtYXRjaCB0by5cblxuSW5oZXJpdHMgZnJvbSBbYFFsb2JiZXJgXSgjcWxvYmJlcm9wdGlvbnMpLlxuXG5AY29uc3RydWN0b3JcbkBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gU2FtZSBvcHRpb25zIGFzIFFsb2JiZXIuXG4qL1xuZnVuY3Rpb24gUWxvYmJlclRydWUgKG9wdGlvbnMpXG57XG4gICAgUWxvYmJlci5jYWxsKHRoaXMsIG9wdGlvbnMpO1xufVxuXG51dGlsLmluaGVyaXRzKFFsb2JiZXJUcnVlLCBRbG9iYmVyKTtcblxuUWxvYmJlclRydWUucHJvdG90eXBlLl9pbml0aWFsX3ZhbHVlID0gZnVuY3Rpb24gKClcbntcbiAgICByZXR1cm4gdHJ1ZTtcbn07XG5cblFsb2JiZXJUcnVlLnByb3RvdHlwZS5fYWRkX3ZhbHVlID0gZnVuY3Rpb24gKClcbntcbn07XG5cblFsb2JiZXJUcnVlLnByb3RvdHlwZS5fcmVtb3ZlX3ZhbHVlID0gZnVuY3Rpb24gKClcbntcbiAgICByZXR1cm4gdHJ1ZTtcbn07XG5cbi8qKlxuVGhpcyBvdmVycmlkZSBvZiBbYHRlc3RfdmFsdWVzYF0oI3Fsb2JiZXJwcm90b3R5cGV0ZXN0X3ZhbHVlc3ZhbHMtdmFsKSBhbHdheXNcbnJldHVybnMgYHRydWVgLiBXaGVuIHlvdSBjYWxsIFtgdGVzdGBdKCNxbG9iYmVycHJvdG90eXBldGVzdHRvcGljLXZhbCkgb24gYVxuYFFsb2JiZXJUcnVlYCBpbnN0YW5jZSwgdGhlIHZhbHVlIHlvdSBwYXNzIGlzIGlnbm9yZWQgc2luY2UgaXQgb25seSBjYXJlc1xud2hldGhlciBhIHRvcGljIGlzIG1hdGNoZWQuXG5cbkByZXR1cm4ge0Jvb2xlYW59IEFsd2F5cyBgdHJ1ZWAuXG4qL1xuUWxvYmJlclRydWUucHJvdG90eXBlLnRlc3RfdmFsdWVzID0gZnVuY3Rpb24gKClcbntcbiAgICByZXR1cm4gdHJ1ZTsgICAgXG59O1xuXG4vKipcbk1hdGNoIGEgdG9waWMuXG5cblNpbmNlIGBRbG9iYmVyVHJ1ZWAgb25seSBjYXJlcyB3aGV0aGVyIGEgdG9waWMgaXMgbWF0Y2hlZCBhbmQgbm90IGFib3V0IHZhbHVlc1xuaXQgbWF0Y2hlcyB0bywgdGhpcyBvdmVycmlkZSBvZiBbYG1hdGNoYF0oI3Fsb2JiZXJwcm90b3R5cGVtYXRjaHRvcGljKSBqdXN0XG5jYWxscyBbYHRlc3RgXSgjcWxvYmJlcnByb3RvdHlwZXRlc3R0b3BpYy12YWwpICh3aXRoIHZhbHVlIGB1bmRlZmluZWRgKS5cblxuQHBhcmFtIHtTdHJpbmd9IHRvcGljIFRoZSB0b3BpYyB0byBtYXRjaCBhZ2FpbnN0LlxuQHJldHVybiB7Qm9vbGVhbn0gV2hldGhlciB0aGUgYFFsb2JiZXJUcnVlYCBpbnN0YW5jZSBtYXRjaGVzIHRoZSB0b3BpYy5cbiovXG5RbG9iYmVyVHJ1ZS5wcm90b3R5cGUubWF0Y2ggPSBmdW5jdGlvbiAodG9waWMsIGN0eClcbntcbiAgICByZXR1cm4gdGhpcy50ZXN0KHRvcGljLCBjdHgpO1xufTtcblxubGV0IHN0cmVhbSA9IHJlcXVpcmUoJ3N0cmVhbScpO1xuXG4vKipcbkNyZWF0ZXMgYSBuZXcgW2BSZWFkYWJsZWBdKGh0dHBzOi8vbm9kZWpzLm9yZy9kaXN0L2xhdGVzdC12OC54L2RvY3MvYXBpL3N0cmVhbS5odG1sI3N0cmVhbV9jbGFzc19zdHJlYW1fcmVhZGFibGUpIHN0cmVhbSwgaW4gb2JqZWN0IG1vZGUsIHdoaWNoIGNhbGxzIFtgdmlzaXRgXSgjcWxvYmJlcnByb3RvdHlwZXZpc2l0KSBvbiBhIHFsb2JiZXIgdG8gZ2VuZXJhdGUgaXRzIGRhdGEuXG5cbllvdSBjb3VsZCBbYHBpcGVgXShodHRwczovL25vZGVqcy5vcmcvZGlzdC9sYXRlc3QtdjgueC9kb2NzL2FwaS9zdHJlYW0uaHRtbCNzdHJlYW1fcmVhZGFibGVfcGlwZV9kZXN0aW5hdGlvbl9vcHRpb25zKSB0aGlzIHRvIGEgW2BKU09OU3RyZWFtLnN0cmluZ2lmeWBdKGh0dHBzOi8vZ2l0aHViLmNvbS9kb21pbmljdGFyci9KU09OU3RyZWFtI2pzb25zdHJlYW1zdHJpbmdpZnlvcGVuLXNlcC1jbG9zZSkgc3RyZWFtLCBmb3IgaW5zdGFuY2UsIHRvIHNlcmlhbGl6ZSB0aGUgcWxvYmJlciB0byBKU09OLiBTZWUgW3RoaXMgdGVzdF0odGVzdC9qc29uLmpzI0wxNCkgZm9yIGFuIGV4YW1wbGUuXG5cbkluaGVyaXRzIGZyb20gW2BSZWFkYWJsZWBdKGh0dHBzOi8vbm9kZWpzLm9yZy9kaXN0L2xhdGVzdC12OC54L2RvY3MvYXBpL3N0cmVhbS5odG1sI3N0cmVhbV9jbGFzc19zdHJlYW1fcmVhZGFibGUpLlxuXG5AY29uc3RydWN0b3JcblxuQHBhcmFtIHtRbG9iYmVyfSBxbG9iYmVyIFRoZSBxbG9iYmVyIHRvIGNhbGwgW2B2aXNpdGBdKCNxbG9iYmVycHJvdG90eXBldmlzaXQpIG9uLlxuKi9cbmZ1bmN0aW9uIFZpc2l0b3JTdHJlYW0gKHFsb2JiZXIpXG57XG4gICAgc3RyZWFtLlJlYWRhYmxlLmNhbGwodGhpcywgeyBvYmplY3RNb2RlOiB0cnVlIH0pO1xuICAgIHRoaXMuX2l0ZXJhdG9yID0gcWxvYmJlci52aXNpdCgpO1xufVxuXG51dGlsLmluaGVyaXRzKFZpc2l0b3JTdHJlYW0sIHN0cmVhbS5SZWFkYWJsZSk7XG5cblZpc2l0b3JTdHJlYW0ucHJvdG90eXBlLl9yZWFkID0gZnVuY3Rpb24gKClcbntcbiAgICB3aGlsZSAodHJ1ZSlcbiAgICB7XG4gICAgICAgIGxldCB7IGRvbmUsIHZhbHVlIH0gPSB0aGlzLl9pdGVyYXRvci5uZXh0KCk7XG5cbiAgICAgICAgaWYgKGRvbmUpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMucHVzaChudWxsKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCF0aGlzLnB1c2godmFsdWUpKVxuICAgICAgICB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbn07XG5cbi8qKlxuQ3JlYXRlcyBhIG5ldyBbYFdyaXRhYmxlYF0oaHR0cHM6Ly9ub2RlanMub3JnL2Rpc3QvbGF0ZXN0LXY4LngvZG9jcy9hcGkvc3RyZWFtLmh0bWwjc3RyZWFtX2NsYXNzX3N0cmVhbV93cml0YWJsZSkgc3RyZWFtLCBpbiBvYmplY3QgbW9kZSwgd2hpY2ggcGFzc2VzIGRhdGEgd3JpdHRlbiB0byBpdCBpbnRvIHRoZSBmdW5jdGlvbiByZXR1cm5lZCBieSBjYWxsaW5nIFtgZ2V0X3Jlc3RvcmVyYF0oI3Fsb2JiZXJwcm90b3R5cGVnZXRfcmVzdG9yZXJvcHRpb25zKSBvbiBhIHFsb2JiZXIuXG5cbllvdSBjb3VsZCBbYHBpcGVgXShodHRwczovL25vZGVqcy5vcmcvZGlzdC9sYXRlc3QtdjgueC9kb2NzL2FwaS9zdHJlYW0uaHRtbCNzdHJlYW1fcmVhZGFibGVfcGlwZV9kZXN0aW5hdGlvbl9vcHRpb25zKSBhIFtgSlNPTlN0cmVhbS5wYXJzZWBdKGh0dHBzOi8vZ2l0aHViLmNvbS9kb21pbmljdGFyci9KU09OU3RyZWFtI2pzb25zdHJlYW1wYXJzZXBhdGgpIHN0cmVhbSB0byB0aGlzLCBmb3IgaW5zdGFuY2UsIHRvIGRlc2VyaWFsaXplIHRoZSBxbG9iYmVyIGZyb20gSlNPTi4gU2VlIFt0aGlzIHRlc3RdKHRlc3QvanNvbi5qcyNMMzMpIGZvciBhbiBleGFtcGxlLlxuXG5Jbmhlcml0cyBmcm9tIFtgV3JpdGFibGVgXShodHRwczovL25vZGVqcy5vcmcvZGlzdC9sYXRlc3QtdjgueC9kb2NzL2FwaS9zdHJlYW0uaHRtbCNzdHJlYW1fY2xhc3Nfc3RyZWFtX3dyaXRhYmxlKS5cblxuQGNvbnN0cnVjdG9yXG5cbkBwYXJhbSB7UWxvYmJlcn0gcWxvYmJlciBUaGUgcWxvYmJlciB0byBjYWxsIFtgZ2V0X3Jlc3RvcmVyYF0oI3Fsb2JiZXJwcm90b3R5cGVnZXRfcmVzdG9yZXJvcHRpb25zKSBvbi5cbiovXG5mdW5jdGlvbiBSZXN0b3JlclN0cmVhbSAocWxvYmJlcilcbntcbiAgICBzdHJlYW0uV3JpdGFibGUuY2FsbCh0aGlzLCB7IG9iamVjdE1vZGU6IHRydWUgfSk7XG4gICAgdGhpcy5fcmVzdG9yZXIgPSBxbG9iYmVyLmdldF9yZXN0b3JlcigpO1xufVxuXG51dGlsLmluaGVyaXRzKFJlc3RvcmVyU3RyZWFtLCBzdHJlYW0uV3JpdGFibGUpO1xuXG5SZXN0b3JlclN0cmVhbS5wcm90b3R5cGUuX3dyaXRlID0gZnVuY3Rpb24gKHZhbHVlLCBfLCBjYilcbntcbiAgICB0aGlzLl9yZXN0b3Jlcih2YWx1ZSk7XG4gICAgY2IoKTtcbn07XG5cbmV4cG9ydHMuUWxvYmJlciA9IFFsb2JiZXI7XG5leHBvcnRzLlFsb2JiZXJEZWR1cCA9IFFsb2JiZXJEZWR1cDtcbmV4cG9ydHMuUWxvYmJlclRydWUgPSBRbG9iYmVyVHJ1ZTtcbmV4cG9ydHMuVmlzaXRvclN0cmVhbSA9IFZpc2l0b3JTdHJlYW07XG5leHBvcnRzLlJlc3RvcmVyU3RyZWFtID0gUmVzdG9yZXJTdHJlYW07XG5cblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4uL25vZGVfbW9kdWxlcy9xbG9iYmVyL2xpYi9xbG9iYmVyLmpzXG4vLyBtb2R1bGUgaWQgPSA2N1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvLyBDb3B5cmlnaHQgSm95ZW50LCBJbmMuIGFuZCBvdGhlciBOb2RlIGNvbnRyaWJ1dG9ycy5cbi8vXG4vLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYVxuLy8gY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZVxuLy8gXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nXG4vLyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsXG4vLyBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0XG4vLyBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGVcbi8vIGZvbGxvd2luZyBjb25kaXRpb25zOlxuLy9cbi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkXG4vLyBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbi8vXG4vLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTXG4vLyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GXG4vLyBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOXG4vLyBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSxcbi8vIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUlxuLy8gT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRVxuLy8gVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cblxudmFyIGZvcm1hdFJlZ0V4cCA9IC8lW3NkaiVdL2c7XG5leHBvcnRzLmZvcm1hdCA9IGZ1bmN0aW9uKGYpIHtcbiAgaWYgKCFpc1N0cmluZyhmKSkge1xuICAgIHZhciBvYmplY3RzID0gW107XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIG9iamVjdHMucHVzaChpbnNwZWN0KGFyZ3VtZW50c1tpXSkpO1xuICAgIH1cbiAgICByZXR1cm4gb2JqZWN0cy5qb2luKCcgJyk7XG4gIH1cblxuICB2YXIgaSA9IDE7XG4gIHZhciBhcmdzID0gYXJndW1lbnRzO1xuICB2YXIgbGVuID0gYXJncy5sZW5ndGg7XG4gIHZhciBzdHIgPSBTdHJpbmcoZikucmVwbGFjZShmb3JtYXRSZWdFeHAsIGZ1bmN0aW9uKHgpIHtcbiAgICBpZiAoeCA9PT0gJyUlJykgcmV0dXJuICclJztcbiAgICBpZiAoaSA+PSBsZW4pIHJldHVybiB4O1xuICAgIHN3aXRjaCAoeCkge1xuICAgICAgY2FzZSAnJXMnOiByZXR1cm4gU3RyaW5nKGFyZ3NbaSsrXSk7XG4gICAgICBjYXNlICclZCc6IHJldHVybiBOdW1iZXIoYXJnc1tpKytdKTtcbiAgICAgIGNhc2UgJyVqJzpcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoYXJnc1tpKytdKTtcbiAgICAgICAgfSBjYXRjaCAoXykge1xuICAgICAgICAgIHJldHVybiAnW0NpcmN1bGFyXSc7XG4gICAgICAgIH1cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiB4O1xuICAgIH1cbiAgfSk7XG4gIGZvciAodmFyIHggPSBhcmdzW2ldOyBpIDwgbGVuOyB4ID0gYXJnc1srK2ldKSB7XG4gICAgaWYgKGlzTnVsbCh4KSB8fCAhaXNPYmplY3QoeCkpIHtcbiAgICAgIHN0ciArPSAnICcgKyB4O1xuICAgIH0gZWxzZSB7XG4gICAgICBzdHIgKz0gJyAnICsgaW5zcGVjdCh4KTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHN0cjtcbn07XG5cblxuLy8gTWFyayB0aGF0IGEgbWV0aG9kIHNob3VsZCBub3QgYmUgdXNlZC5cbi8vIFJldHVybnMgYSBtb2RpZmllZCBmdW5jdGlvbiB3aGljaCB3YXJucyBvbmNlIGJ5IGRlZmF1bHQuXG4vLyBJZiAtLW5vLWRlcHJlY2F0aW9uIGlzIHNldCwgdGhlbiBpdCBpcyBhIG5vLW9wLlxuZXhwb3J0cy5kZXByZWNhdGUgPSBmdW5jdGlvbihmbiwgbXNnKSB7XG4gIC8vIEFsbG93IGZvciBkZXByZWNhdGluZyB0aGluZ3MgaW4gdGhlIHByb2Nlc3Mgb2Ygc3RhcnRpbmcgdXAuXG4gIGlmIChpc1VuZGVmaW5lZChnbG9iYWwucHJvY2VzcykpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gZXhwb3J0cy5kZXByZWNhdGUoZm4sIG1zZykuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9O1xuICB9XG5cbiAgaWYgKHByb2Nlc3Mubm9EZXByZWNhdGlvbiA9PT0gdHJ1ZSkge1xuICAgIHJldHVybiBmbjtcbiAgfVxuXG4gIHZhciB3YXJuZWQgPSBmYWxzZTtcbiAgZnVuY3Rpb24gZGVwcmVjYXRlZCgpIHtcbiAgICBpZiAoIXdhcm5lZCkge1xuICAgICAgaWYgKHByb2Nlc3MudGhyb3dEZXByZWNhdGlvbikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IobXNnKTtcbiAgICAgIH0gZWxzZSBpZiAocHJvY2Vzcy50cmFjZURlcHJlY2F0aW9uKSB7XG4gICAgICAgIGNvbnNvbGUudHJhY2UobXNnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IobXNnKTtcbiAgICAgIH1cbiAgICAgIHdhcm5lZCA9IHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9XG5cbiAgcmV0dXJuIGRlcHJlY2F0ZWQ7XG59O1xuXG5cbnZhciBkZWJ1Z3MgPSB7fTtcbnZhciBkZWJ1Z0Vudmlyb247XG5leHBvcnRzLmRlYnVnbG9nID0gZnVuY3Rpb24oc2V0KSB7XG4gIGlmIChpc1VuZGVmaW5lZChkZWJ1Z0Vudmlyb24pKVxuICAgIGRlYnVnRW52aXJvbiA9IHByb2Nlc3MuZW52Lk5PREVfREVCVUcgfHwgJyc7XG4gIHNldCA9IHNldC50b1VwcGVyQ2FzZSgpO1xuICBpZiAoIWRlYnVnc1tzZXRdKSB7XG4gICAgaWYgKG5ldyBSZWdFeHAoJ1xcXFxiJyArIHNldCArICdcXFxcYicsICdpJykudGVzdChkZWJ1Z0Vudmlyb24pKSB7XG4gICAgICB2YXIgcGlkID0gcHJvY2Vzcy5waWQ7XG4gICAgICBkZWJ1Z3Nbc2V0XSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgbXNnID0gZXhwb3J0cy5mb3JtYXQuYXBwbHkoZXhwb3J0cywgYXJndW1lbnRzKTtcbiAgICAgICAgY29uc29sZS5lcnJvcignJXMgJWQ6ICVzJywgc2V0LCBwaWQsIG1zZyk7XG4gICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICBkZWJ1Z3Nbc2V0XSA9IGZ1bmN0aW9uKCkge307XG4gICAgfVxuICB9XG4gIHJldHVybiBkZWJ1Z3Nbc2V0XTtcbn07XG5cblxuLyoqXG4gKiBFY2hvcyB0aGUgdmFsdWUgb2YgYSB2YWx1ZS4gVHJ5cyB0byBwcmludCB0aGUgdmFsdWUgb3V0XG4gKiBpbiB0aGUgYmVzdCB3YXkgcG9zc2libGUgZ2l2ZW4gdGhlIGRpZmZlcmVudCB0eXBlcy5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqIFRoZSBvYmplY3QgdG8gcHJpbnQgb3V0LlxuICogQHBhcmFtIHtPYmplY3R9IG9wdHMgT3B0aW9uYWwgb3B0aW9ucyBvYmplY3QgdGhhdCBhbHRlcnMgdGhlIG91dHB1dC5cbiAqL1xuLyogbGVnYWN5OiBvYmosIHNob3dIaWRkZW4sIGRlcHRoLCBjb2xvcnMqL1xuZnVuY3Rpb24gaW5zcGVjdChvYmosIG9wdHMpIHtcbiAgLy8gZGVmYXVsdCBvcHRpb25zXG4gIHZhciBjdHggPSB7XG4gICAgc2VlbjogW10sXG4gICAgc3R5bGl6ZTogc3R5bGl6ZU5vQ29sb3JcbiAgfTtcbiAgLy8gbGVnYWN5Li4uXG4gIGlmIChhcmd1bWVudHMubGVuZ3RoID49IDMpIGN0eC5kZXB0aCA9IGFyZ3VtZW50c1syXTtcbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPj0gNCkgY3R4LmNvbG9ycyA9IGFyZ3VtZW50c1szXTtcbiAgaWYgKGlzQm9vbGVhbihvcHRzKSkge1xuICAgIC8vIGxlZ2FjeS4uLlxuICAgIGN0eC5zaG93SGlkZGVuID0gb3B0cztcbiAgfSBlbHNlIGlmIChvcHRzKSB7XG4gICAgLy8gZ290IGFuIFwib3B0aW9uc1wiIG9iamVjdFxuICAgIGV4cG9ydHMuX2V4dGVuZChjdHgsIG9wdHMpO1xuICB9XG4gIC8vIHNldCBkZWZhdWx0IG9wdGlvbnNcbiAgaWYgKGlzVW5kZWZpbmVkKGN0eC5zaG93SGlkZGVuKSkgY3R4LnNob3dIaWRkZW4gPSBmYWxzZTtcbiAgaWYgKGlzVW5kZWZpbmVkKGN0eC5kZXB0aCkpIGN0eC5kZXB0aCA9IDI7XG4gIGlmIChpc1VuZGVmaW5lZChjdHguY29sb3JzKSkgY3R4LmNvbG9ycyA9IGZhbHNlO1xuICBpZiAoaXNVbmRlZmluZWQoY3R4LmN1c3RvbUluc3BlY3QpKSBjdHguY3VzdG9tSW5zcGVjdCA9IHRydWU7XG4gIGlmIChjdHguY29sb3JzKSBjdHguc3R5bGl6ZSA9IHN0eWxpemVXaXRoQ29sb3I7XG4gIHJldHVybiBmb3JtYXRWYWx1ZShjdHgsIG9iaiwgY3R4LmRlcHRoKTtcbn1cbmV4cG9ydHMuaW5zcGVjdCA9IGluc3BlY3Q7XG5cblxuLy8gaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9BTlNJX2VzY2FwZV9jb2RlI2dyYXBoaWNzXG5pbnNwZWN0LmNvbG9ycyA9IHtcbiAgJ2JvbGQnIDogWzEsIDIyXSxcbiAgJ2l0YWxpYycgOiBbMywgMjNdLFxuICAndW5kZXJsaW5lJyA6IFs0LCAyNF0sXG4gICdpbnZlcnNlJyA6IFs3LCAyN10sXG4gICd3aGl0ZScgOiBbMzcsIDM5XSxcbiAgJ2dyZXknIDogWzkwLCAzOV0sXG4gICdibGFjaycgOiBbMzAsIDM5XSxcbiAgJ2JsdWUnIDogWzM0LCAzOV0sXG4gICdjeWFuJyA6IFszNiwgMzldLFxuICAnZ3JlZW4nIDogWzMyLCAzOV0sXG4gICdtYWdlbnRhJyA6IFszNSwgMzldLFxuICAncmVkJyA6IFszMSwgMzldLFxuICAneWVsbG93JyA6IFszMywgMzldXG59O1xuXG4vLyBEb24ndCB1c2UgJ2JsdWUnIG5vdCB2aXNpYmxlIG9uIGNtZC5leGVcbmluc3BlY3Quc3R5bGVzID0ge1xuICAnc3BlY2lhbCc6ICdjeWFuJyxcbiAgJ251bWJlcic6ICd5ZWxsb3cnLFxuICAnYm9vbGVhbic6ICd5ZWxsb3cnLFxuICAndW5kZWZpbmVkJzogJ2dyZXknLFxuICAnbnVsbCc6ICdib2xkJyxcbiAgJ3N0cmluZyc6ICdncmVlbicsXG4gICdkYXRlJzogJ21hZ2VudGEnLFxuICAvLyBcIm5hbWVcIjogaW50ZW50aW9uYWxseSBub3Qgc3R5bGluZ1xuICAncmVnZXhwJzogJ3JlZCdcbn07XG5cblxuZnVuY3Rpb24gc3R5bGl6ZVdpdGhDb2xvcihzdHIsIHN0eWxlVHlwZSkge1xuICB2YXIgc3R5bGUgPSBpbnNwZWN0LnN0eWxlc1tzdHlsZVR5cGVdO1xuXG4gIGlmIChzdHlsZSkge1xuICAgIHJldHVybiAnXFx1MDAxYlsnICsgaW5zcGVjdC5jb2xvcnNbc3R5bGVdWzBdICsgJ20nICsgc3RyICtcbiAgICAgICAgICAgJ1xcdTAwMWJbJyArIGluc3BlY3QuY29sb3JzW3N0eWxlXVsxXSArICdtJztcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gc3RyO1xuICB9XG59XG5cblxuZnVuY3Rpb24gc3R5bGl6ZU5vQ29sb3Ioc3RyLCBzdHlsZVR5cGUpIHtcbiAgcmV0dXJuIHN0cjtcbn1cblxuXG5mdW5jdGlvbiBhcnJheVRvSGFzaChhcnJheSkge1xuICB2YXIgaGFzaCA9IHt9O1xuXG4gIGFycmF5LmZvckVhY2goZnVuY3Rpb24odmFsLCBpZHgpIHtcbiAgICBoYXNoW3ZhbF0gPSB0cnVlO1xuICB9KTtcblxuICByZXR1cm4gaGFzaDtcbn1cblxuXG5mdW5jdGlvbiBmb3JtYXRWYWx1ZShjdHgsIHZhbHVlLCByZWN1cnNlVGltZXMpIHtcbiAgLy8gUHJvdmlkZSBhIGhvb2sgZm9yIHVzZXItc3BlY2lmaWVkIGluc3BlY3QgZnVuY3Rpb25zLlxuICAvLyBDaGVjayB0aGF0IHZhbHVlIGlzIGFuIG9iamVjdCB3aXRoIGFuIGluc3BlY3QgZnVuY3Rpb24gb24gaXRcbiAgaWYgKGN0eC5jdXN0b21JbnNwZWN0ICYmXG4gICAgICB2YWx1ZSAmJlxuICAgICAgaXNGdW5jdGlvbih2YWx1ZS5pbnNwZWN0KSAmJlxuICAgICAgLy8gRmlsdGVyIG91dCB0aGUgdXRpbCBtb2R1bGUsIGl0J3MgaW5zcGVjdCBmdW5jdGlvbiBpcyBzcGVjaWFsXG4gICAgICB2YWx1ZS5pbnNwZWN0ICE9PSBleHBvcnRzLmluc3BlY3QgJiZcbiAgICAgIC8vIEFsc28gZmlsdGVyIG91dCBhbnkgcHJvdG90eXBlIG9iamVjdHMgdXNpbmcgdGhlIGNpcmN1bGFyIGNoZWNrLlxuICAgICAgISh2YWx1ZS5jb25zdHJ1Y3RvciAmJiB2YWx1ZS5jb25zdHJ1Y3Rvci5wcm90b3R5cGUgPT09IHZhbHVlKSkge1xuICAgIHZhciByZXQgPSB2YWx1ZS5pbnNwZWN0KHJlY3Vyc2VUaW1lcywgY3R4KTtcbiAgICBpZiAoIWlzU3RyaW5nKHJldCkpIHtcbiAgICAgIHJldCA9IGZvcm1hdFZhbHVlKGN0eCwgcmV0LCByZWN1cnNlVGltZXMpO1xuICAgIH1cbiAgICByZXR1cm4gcmV0O1xuICB9XG5cbiAgLy8gUHJpbWl0aXZlIHR5cGVzIGNhbm5vdCBoYXZlIHByb3BlcnRpZXNcbiAgdmFyIHByaW1pdGl2ZSA9IGZvcm1hdFByaW1pdGl2ZShjdHgsIHZhbHVlKTtcbiAgaWYgKHByaW1pdGl2ZSkge1xuICAgIHJldHVybiBwcmltaXRpdmU7XG4gIH1cblxuICAvLyBMb29rIHVwIHRoZSBrZXlzIG9mIHRoZSBvYmplY3QuXG4gIHZhciBrZXlzID0gT2JqZWN0LmtleXModmFsdWUpO1xuICB2YXIgdmlzaWJsZUtleXMgPSBhcnJheVRvSGFzaChrZXlzKTtcblxuICBpZiAoY3R4LnNob3dIaWRkZW4pIHtcbiAgICBrZXlzID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXModmFsdWUpO1xuICB9XG5cbiAgLy8gSUUgZG9lc24ndCBtYWtlIGVycm9yIGZpZWxkcyBub24tZW51bWVyYWJsZVxuICAvLyBodHRwOi8vbXNkbi5taWNyb3NvZnQuY29tL2VuLXVzL2xpYnJhcnkvaWUvZHd3NTJzYnQodj12cy45NCkuYXNweFxuICBpZiAoaXNFcnJvcih2YWx1ZSlcbiAgICAgICYmIChrZXlzLmluZGV4T2YoJ21lc3NhZ2UnKSA+PSAwIHx8IGtleXMuaW5kZXhPZignZGVzY3JpcHRpb24nKSA+PSAwKSkge1xuICAgIHJldHVybiBmb3JtYXRFcnJvcih2YWx1ZSk7XG4gIH1cblxuICAvLyBTb21lIHR5cGUgb2Ygb2JqZWN0IHdpdGhvdXQgcHJvcGVydGllcyBjYW4gYmUgc2hvcnRjdXR0ZWQuXG4gIGlmIChrZXlzLmxlbmd0aCA9PT0gMCkge1xuICAgIGlmIChpc0Z1bmN0aW9uKHZhbHVlKSkge1xuICAgICAgdmFyIG5hbWUgPSB2YWx1ZS5uYW1lID8gJzogJyArIHZhbHVlLm5hbWUgOiAnJztcbiAgICAgIHJldHVybiBjdHguc3R5bGl6ZSgnW0Z1bmN0aW9uJyArIG5hbWUgKyAnXScsICdzcGVjaWFsJyk7XG4gICAgfVxuICAgIGlmIChpc1JlZ0V4cCh2YWx1ZSkpIHtcbiAgICAgIHJldHVybiBjdHguc3R5bGl6ZShSZWdFeHAucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsdWUpLCAncmVnZXhwJyk7XG4gICAgfVxuICAgIGlmIChpc0RhdGUodmFsdWUpKSB7XG4gICAgICByZXR1cm4gY3R4LnN0eWxpemUoRGF0ZS5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWx1ZSksICdkYXRlJyk7XG4gICAgfVxuICAgIGlmIChpc0Vycm9yKHZhbHVlKSkge1xuICAgICAgcmV0dXJuIGZvcm1hdEVycm9yKHZhbHVlKTtcbiAgICB9XG4gIH1cblxuICB2YXIgYmFzZSA9ICcnLCBhcnJheSA9IGZhbHNlLCBicmFjZXMgPSBbJ3snLCAnfSddO1xuXG4gIC8vIE1ha2UgQXJyYXkgc2F5IHRoYXQgdGhleSBhcmUgQXJyYXlcbiAgaWYgKGlzQXJyYXkodmFsdWUpKSB7XG4gICAgYXJyYXkgPSB0cnVlO1xuICAgIGJyYWNlcyA9IFsnWycsICddJ107XG4gIH1cblxuICAvLyBNYWtlIGZ1bmN0aW9ucyBzYXkgdGhhdCB0aGV5IGFyZSBmdW5jdGlvbnNcbiAgaWYgKGlzRnVuY3Rpb24odmFsdWUpKSB7XG4gICAgdmFyIG4gPSB2YWx1ZS5uYW1lID8gJzogJyArIHZhbHVlLm5hbWUgOiAnJztcbiAgICBiYXNlID0gJyBbRnVuY3Rpb24nICsgbiArICddJztcbiAgfVxuXG4gIC8vIE1ha2UgUmVnRXhwcyBzYXkgdGhhdCB0aGV5IGFyZSBSZWdFeHBzXG4gIGlmIChpc1JlZ0V4cCh2YWx1ZSkpIHtcbiAgICBiYXNlID0gJyAnICsgUmVnRXhwLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbHVlKTtcbiAgfVxuXG4gIC8vIE1ha2UgZGF0ZXMgd2l0aCBwcm9wZXJ0aWVzIGZpcnN0IHNheSB0aGUgZGF0ZVxuICBpZiAoaXNEYXRlKHZhbHVlKSkge1xuICAgIGJhc2UgPSAnICcgKyBEYXRlLnByb3RvdHlwZS50b1VUQ1N0cmluZy5jYWxsKHZhbHVlKTtcbiAgfVxuXG4gIC8vIE1ha2UgZXJyb3Igd2l0aCBtZXNzYWdlIGZpcnN0IHNheSB0aGUgZXJyb3JcbiAgaWYgKGlzRXJyb3IodmFsdWUpKSB7XG4gICAgYmFzZSA9ICcgJyArIGZvcm1hdEVycm9yKHZhbHVlKTtcbiAgfVxuXG4gIGlmIChrZXlzLmxlbmd0aCA9PT0gMCAmJiAoIWFycmF5IHx8IHZhbHVlLmxlbmd0aCA9PSAwKSkge1xuICAgIHJldHVybiBicmFjZXNbMF0gKyBiYXNlICsgYnJhY2VzWzFdO1xuICB9XG5cbiAgaWYgKHJlY3Vyc2VUaW1lcyA8IDApIHtcbiAgICBpZiAoaXNSZWdFeHAodmFsdWUpKSB7XG4gICAgICByZXR1cm4gY3R4LnN0eWxpemUoUmVnRXhwLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbHVlKSwgJ3JlZ2V4cCcpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gY3R4LnN0eWxpemUoJ1tPYmplY3RdJywgJ3NwZWNpYWwnKTtcbiAgICB9XG4gIH1cblxuICBjdHguc2Vlbi5wdXNoKHZhbHVlKTtcblxuICB2YXIgb3V0cHV0O1xuICBpZiAoYXJyYXkpIHtcbiAgICBvdXRwdXQgPSBmb3JtYXRBcnJheShjdHgsIHZhbHVlLCByZWN1cnNlVGltZXMsIHZpc2libGVLZXlzLCBrZXlzKTtcbiAgfSBlbHNlIHtcbiAgICBvdXRwdXQgPSBrZXlzLm1hcChmdW5jdGlvbihrZXkpIHtcbiAgICAgIHJldHVybiBmb3JtYXRQcm9wZXJ0eShjdHgsIHZhbHVlLCByZWN1cnNlVGltZXMsIHZpc2libGVLZXlzLCBrZXksIGFycmF5KTtcbiAgICB9KTtcbiAgfVxuXG4gIGN0eC5zZWVuLnBvcCgpO1xuXG4gIHJldHVybiByZWR1Y2VUb1NpbmdsZVN0cmluZyhvdXRwdXQsIGJhc2UsIGJyYWNlcyk7XG59XG5cblxuZnVuY3Rpb24gZm9ybWF0UHJpbWl0aXZlKGN0eCwgdmFsdWUpIHtcbiAgaWYgKGlzVW5kZWZpbmVkKHZhbHVlKSlcbiAgICByZXR1cm4gY3R4LnN0eWxpemUoJ3VuZGVmaW5lZCcsICd1bmRlZmluZWQnKTtcbiAgaWYgKGlzU3RyaW5nKHZhbHVlKSkge1xuICAgIHZhciBzaW1wbGUgPSAnXFwnJyArIEpTT04uc3RyaW5naWZ5KHZhbHVlKS5yZXBsYWNlKC9eXCJ8XCIkL2csICcnKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoLycvZywgXCJcXFxcJ1wiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL1xcXFxcIi9nLCAnXCInKSArICdcXCcnO1xuICAgIHJldHVybiBjdHguc3R5bGl6ZShzaW1wbGUsICdzdHJpbmcnKTtcbiAgfVxuICBpZiAoaXNOdW1iZXIodmFsdWUpKVxuICAgIHJldHVybiBjdHguc3R5bGl6ZSgnJyArIHZhbHVlLCAnbnVtYmVyJyk7XG4gIGlmIChpc0Jvb2xlYW4odmFsdWUpKVxuICAgIHJldHVybiBjdHguc3R5bGl6ZSgnJyArIHZhbHVlLCAnYm9vbGVhbicpO1xuICAvLyBGb3Igc29tZSByZWFzb24gdHlwZW9mIG51bGwgaXMgXCJvYmplY3RcIiwgc28gc3BlY2lhbCBjYXNlIGhlcmUuXG4gIGlmIChpc051bGwodmFsdWUpKVxuICAgIHJldHVybiBjdHguc3R5bGl6ZSgnbnVsbCcsICdudWxsJyk7XG59XG5cblxuZnVuY3Rpb24gZm9ybWF0RXJyb3IodmFsdWUpIHtcbiAgcmV0dXJuICdbJyArIEVycm9yLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbHVlKSArICddJztcbn1cblxuXG5mdW5jdGlvbiBmb3JtYXRBcnJheShjdHgsIHZhbHVlLCByZWN1cnNlVGltZXMsIHZpc2libGVLZXlzLCBrZXlzKSB7XG4gIHZhciBvdXRwdXQgPSBbXTtcbiAgZm9yICh2YXIgaSA9IDAsIGwgPSB2YWx1ZS5sZW5ndGg7IGkgPCBsOyArK2kpIHtcbiAgICBpZiAoaGFzT3duUHJvcGVydHkodmFsdWUsIFN0cmluZyhpKSkpIHtcbiAgICAgIG91dHB1dC5wdXNoKGZvcm1hdFByb3BlcnR5KGN0eCwgdmFsdWUsIHJlY3Vyc2VUaW1lcywgdmlzaWJsZUtleXMsXG4gICAgICAgICAgU3RyaW5nKGkpLCB0cnVlKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG91dHB1dC5wdXNoKCcnKTtcbiAgICB9XG4gIH1cbiAga2V5cy5mb3JFYWNoKGZ1bmN0aW9uKGtleSkge1xuICAgIGlmICgha2V5Lm1hdGNoKC9eXFxkKyQvKSkge1xuICAgICAgb3V0cHV0LnB1c2goZm9ybWF0UHJvcGVydHkoY3R4LCB2YWx1ZSwgcmVjdXJzZVRpbWVzLCB2aXNpYmxlS2V5cyxcbiAgICAgICAgICBrZXksIHRydWUpKTtcbiAgICB9XG4gIH0pO1xuICByZXR1cm4gb3V0cHV0O1xufVxuXG5cbmZ1bmN0aW9uIGZvcm1hdFByb3BlcnR5KGN0eCwgdmFsdWUsIHJlY3Vyc2VUaW1lcywgdmlzaWJsZUtleXMsIGtleSwgYXJyYXkpIHtcbiAgdmFyIG5hbWUsIHN0ciwgZGVzYztcbiAgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodmFsdWUsIGtleSkgfHwgeyB2YWx1ZTogdmFsdWVba2V5XSB9O1xuICBpZiAoZGVzYy5nZXQpIHtcbiAgICBpZiAoZGVzYy5zZXQpIHtcbiAgICAgIHN0ciA9IGN0eC5zdHlsaXplKCdbR2V0dGVyL1NldHRlcl0nLCAnc3BlY2lhbCcpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdHIgPSBjdHguc3R5bGl6ZSgnW0dldHRlcl0nLCAnc3BlY2lhbCcpO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBpZiAoZGVzYy5zZXQpIHtcbiAgICAgIHN0ciA9IGN0eC5zdHlsaXplKCdbU2V0dGVyXScsICdzcGVjaWFsJyk7XG4gICAgfVxuICB9XG4gIGlmICghaGFzT3duUHJvcGVydHkodmlzaWJsZUtleXMsIGtleSkpIHtcbiAgICBuYW1lID0gJ1snICsga2V5ICsgJ10nO1xuICB9XG4gIGlmICghc3RyKSB7XG4gICAgaWYgKGN0eC5zZWVuLmluZGV4T2YoZGVzYy52YWx1ZSkgPCAwKSB7XG4gICAgICBpZiAoaXNOdWxsKHJlY3Vyc2VUaW1lcykpIHtcbiAgICAgICAgc3RyID0gZm9ybWF0VmFsdWUoY3R4LCBkZXNjLnZhbHVlLCBudWxsKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0ciA9IGZvcm1hdFZhbHVlKGN0eCwgZGVzYy52YWx1ZSwgcmVjdXJzZVRpbWVzIC0gMSk7XG4gICAgICB9XG4gICAgICBpZiAoc3RyLmluZGV4T2YoJ1xcbicpID4gLTEpIHtcbiAgICAgICAgaWYgKGFycmF5KSB7XG4gICAgICAgICAgc3RyID0gc3RyLnNwbGl0KCdcXG4nKS5tYXAoZnVuY3Rpb24obGluZSkge1xuICAgICAgICAgICAgcmV0dXJuICcgICcgKyBsaW5lO1xuICAgICAgICAgIH0pLmpvaW4oJ1xcbicpLnN1YnN0cigyKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzdHIgPSAnXFxuJyArIHN0ci5zcGxpdCgnXFxuJykubWFwKGZ1bmN0aW9uKGxpbmUpIHtcbiAgICAgICAgICAgIHJldHVybiAnICAgJyArIGxpbmU7XG4gICAgICAgICAgfSkuam9pbignXFxuJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgc3RyID0gY3R4LnN0eWxpemUoJ1tDaXJjdWxhcl0nLCAnc3BlY2lhbCcpO1xuICAgIH1cbiAgfVxuICBpZiAoaXNVbmRlZmluZWQobmFtZSkpIHtcbiAgICBpZiAoYXJyYXkgJiYga2V5Lm1hdGNoKC9eXFxkKyQvKSkge1xuICAgICAgcmV0dXJuIHN0cjtcbiAgICB9XG4gICAgbmFtZSA9IEpTT04uc3RyaW5naWZ5KCcnICsga2V5KTtcbiAgICBpZiAobmFtZS5tYXRjaCgvXlwiKFthLXpBLVpfXVthLXpBLVpfMC05XSopXCIkLykpIHtcbiAgICAgIG5hbWUgPSBuYW1lLnN1YnN0cigxLCBuYW1lLmxlbmd0aCAtIDIpO1xuICAgICAgbmFtZSA9IGN0eC5zdHlsaXplKG5hbWUsICduYW1lJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG5hbWUgPSBuYW1lLnJlcGxhY2UoLycvZywgXCJcXFxcJ1wiKVxuICAgICAgICAgICAgICAgICAucmVwbGFjZSgvXFxcXFwiL2csICdcIicpXG4gICAgICAgICAgICAgICAgIC5yZXBsYWNlKC8oXlwifFwiJCkvZywgXCInXCIpO1xuICAgICAgbmFtZSA9IGN0eC5zdHlsaXplKG5hbWUsICdzdHJpbmcnKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gbmFtZSArICc6ICcgKyBzdHI7XG59XG5cblxuZnVuY3Rpb24gcmVkdWNlVG9TaW5nbGVTdHJpbmcob3V0cHV0LCBiYXNlLCBicmFjZXMpIHtcbiAgdmFyIG51bUxpbmVzRXN0ID0gMDtcbiAgdmFyIGxlbmd0aCA9IG91dHB1dC5yZWR1Y2UoZnVuY3Rpb24ocHJldiwgY3VyKSB7XG4gICAgbnVtTGluZXNFc3QrKztcbiAgICBpZiAoY3VyLmluZGV4T2YoJ1xcbicpID49IDApIG51bUxpbmVzRXN0Kys7XG4gICAgcmV0dXJuIHByZXYgKyBjdXIucmVwbGFjZSgvXFx1MDAxYlxcW1xcZFxcZD9tL2csICcnKS5sZW5ndGggKyAxO1xuICB9LCAwKTtcblxuICBpZiAobGVuZ3RoID4gNjApIHtcbiAgICByZXR1cm4gYnJhY2VzWzBdICtcbiAgICAgICAgICAgKGJhc2UgPT09ICcnID8gJycgOiBiYXNlICsgJ1xcbiAnKSArXG4gICAgICAgICAgICcgJyArXG4gICAgICAgICAgIG91dHB1dC5qb2luKCcsXFxuICAnKSArXG4gICAgICAgICAgICcgJyArXG4gICAgICAgICAgIGJyYWNlc1sxXTtcbiAgfVxuXG4gIHJldHVybiBicmFjZXNbMF0gKyBiYXNlICsgJyAnICsgb3V0cHV0LmpvaW4oJywgJykgKyAnICcgKyBicmFjZXNbMV07XG59XG5cblxuLy8gTk9URTogVGhlc2UgdHlwZSBjaGVja2luZyBmdW5jdGlvbnMgaW50ZW50aW9uYWxseSBkb24ndCB1c2UgYGluc3RhbmNlb2ZgXG4vLyBiZWNhdXNlIGl0IGlzIGZyYWdpbGUgYW5kIGNhbiBiZSBlYXNpbHkgZmFrZWQgd2l0aCBgT2JqZWN0LmNyZWF0ZSgpYC5cbmZ1bmN0aW9uIGlzQXJyYXkoYXIpIHtcbiAgcmV0dXJuIEFycmF5LmlzQXJyYXkoYXIpO1xufVxuZXhwb3J0cy5pc0FycmF5ID0gaXNBcnJheTtcblxuZnVuY3Rpb24gaXNCb29sZWFuKGFyZykge1xuICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ2Jvb2xlYW4nO1xufVxuZXhwb3J0cy5pc0Jvb2xlYW4gPSBpc0Jvb2xlYW47XG5cbmZ1bmN0aW9uIGlzTnVsbChhcmcpIHtcbiAgcmV0dXJuIGFyZyA9PT0gbnVsbDtcbn1cbmV4cG9ydHMuaXNOdWxsID0gaXNOdWxsO1xuXG5mdW5jdGlvbiBpc051bGxPclVuZGVmaW5lZChhcmcpIHtcbiAgcmV0dXJuIGFyZyA9PSBudWxsO1xufVxuZXhwb3J0cy5pc051bGxPclVuZGVmaW5lZCA9IGlzTnVsbE9yVW5kZWZpbmVkO1xuXG5mdW5jdGlvbiBpc051bWJlcihhcmcpIHtcbiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdudW1iZXInO1xufVxuZXhwb3J0cy5pc051bWJlciA9IGlzTnVtYmVyO1xuXG5mdW5jdGlvbiBpc1N0cmluZyhhcmcpIHtcbiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdzdHJpbmcnO1xufVxuZXhwb3J0cy5pc1N0cmluZyA9IGlzU3RyaW5nO1xuXG5mdW5jdGlvbiBpc1N5bWJvbChhcmcpIHtcbiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdzeW1ib2wnO1xufVxuZXhwb3J0cy5pc1N5bWJvbCA9IGlzU3ltYm9sO1xuXG5mdW5jdGlvbiBpc1VuZGVmaW5lZChhcmcpIHtcbiAgcmV0dXJuIGFyZyA9PT0gdm9pZCAwO1xufVxuZXhwb3J0cy5pc1VuZGVmaW5lZCA9IGlzVW5kZWZpbmVkO1xuXG5mdW5jdGlvbiBpc1JlZ0V4cChyZSkge1xuICByZXR1cm4gaXNPYmplY3QocmUpICYmIG9iamVjdFRvU3RyaW5nKHJlKSA9PT0gJ1tvYmplY3QgUmVnRXhwXSc7XG59XG5leHBvcnRzLmlzUmVnRXhwID0gaXNSZWdFeHA7XG5cbmZ1bmN0aW9uIGlzT2JqZWN0KGFyZykge1xuICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ29iamVjdCcgJiYgYXJnICE9PSBudWxsO1xufVxuZXhwb3J0cy5pc09iamVjdCA9IGlzT2JqZWN0O1xuXG5mdW5jdGlvbiBpc0RhdGUoZCkge1xuICByZXR1cm4gaXNPYmplY3QoZCkgJiYgb2JqZWN0VG9TdHJpbmcoZCkgPT09ICdbb2JqZWN0IERhdGVdJztcbn1cbmV4cG9ydHMuaXNEYXRlID0gaXNEYXRlO1xuXG5mdW5jdGlvbiBpc0Vycm9yKGUpIHtcbiAgcmV0dXJuIGlzT2JqZWN0KGUpICYmXG4gICAgICAob2JqZWN0VG9TdHJpbmcoZSkgPT09ICdbb2JqZWN0IEVycm9yXScgfHwgZSBpbnN0YW5jZW9mIEVycm9yKTtcbn1cbmV4cG9ydHMuaXNFcnJvciA9IGlzRXJyb3I7XG5cbmZ1bmN0aW9uIGlzRnVuY3Rpb24oYXJnKSB7XG4gIHJldHVybiB0eXBlb2YgYXJnID09PSAnZnVuY3Rpb24nO1xufVxuZXhwb3J0cy5pc0Z1bmN0aW9uID0gaXNGdW5jdGlvbjtcblxuZnVuY3Rpb24gaXNQcmltaXRpdmUoYXJnKSB7XG4gIHJldHVybiBhcmcgPT09IG51bGwgfHxcbiAgICAgICAgIHR5cGVvZiBhcmcgPT09ICdib29sZWFuJyB8fFxuICAgICAgICAgdHlwZW9mIGFyZyA9PT0gJ251bWJlcicgfHxcbiAgICAgICAgIHR5cGVvZiBhcmcgPT09ICdzdHJpbmcnIHx8XG4gICAgICAgICB0eXBlb2YgYXJnID09PSAnc3ltYm9sJyB8fCAgLy8gRVM2IHN5bWJvbFxuICAgICAgICAgdHlwZW9mIGFyZyA9PT0gJ3VuZGVmaW5lZCc7XG59XG5leHBvcnRzLmlzUHJpbWl0aXZlID0gaXNQcmltaXRpdmU7XG5cbmV4cG9ydHMuaXNCdWZmZXIgPSByZXF1aXJlKCcuL3N1cHBvcnQvaXNCdWZmZXInKTtcblxuZnVuY3Rpb24gb2JqZWN0VG9TdHJpbmcobykge1xuICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8pO1xufVxuXG5cbmZ1bmN0aW9uIHBhZChuKSB7XG4gIHJldHVybiBuIDwgMTAgPyAnMCcgKyBuLnRvU3RyaW5nKDEwKSA6IG4udG9TdHJpbmcoMTApO1xufVxuXG5cbnZhciBtb250aHMgPSBbJ0phbicsICdGZWInLCAnTWFyJywgJ0FwcicsICdNYXknLCAnSnVuJywgJ0p1bCcsICdBdWcnLCAnU2VwJyxcbiAgICAgICAgICAgICAgJ09jdCcsICdOb3YnLCAnRGVjJ107XG5cbi8vIDI2IEZlYiAxNjoxOTozNFxuZnVuY3Rpb24gdGltZXN0YW1wKCkge1xuICB2YXIgZCA9IG5ldyBEYXRlKCk7XG4gIHZhciB0aW1lID0gW3BhZChkLmdldEhvdXJzKCkpLFxuICAgICAgICAgICAgICBwYWQoZC5nZXRNaW51dGVzKCkpLFxuICAgICAgICAgICAgICBwYWQoZC5nZXRTZWNvbmRzKCkpXS5qb2luKCc6Jyk7XG4gIHJldHVybiBbZC5nZXREYXRlKCksIG1vbnRoc1tkLmdldE1vbnRoKCldLCB0aW1lXS5qb2luKCcgJyk7XG59XG5cblxuLy8gbG9nIGlzIGp1c3QgYSB0aGluIHdyYXBwZXIgdG8gY29uc29sZS5sb2cgdGhhdCBwcmVwZW5kcyBhIHRpbWVzdGFtcFxuZXhwb3J0cy5sb2cgPSBmdW5jdGlvbigpIHtcbiAgY29uc29sZS5sb2coJyVzIC0gJXMnLCB0aW1lc3RhbXAoKSwgZXhwb3J0cy5mb3JtYXQuYXBwbHkoZXhwb3J0cywgYXJndW1lbnRzKSk7XG59O1xuXG5cbi8qKlxuICogSW5oZXJpdCB0aGUgcHJvdG90eXBlIG1ldGhvZHMgZnJvbSBvbmUgY29uc3RydWN0b3IgaW50byBhbm90aGVyLlxuICpcbiAqIFRoZSBGdW5jdGlvbi5wcm90b3R5cGUuaW5oZXJpdHMgZnJvbSBsYW5nLmpzIHJld3JpdHRlbiBhcyBhIHN0YW5kYWxvbmVcbiAqIGZ1bmN0aW9uIChub3Qgb24gRnVuY3Rpb24ucHJvdG90eXBlKS4gTk9URTogSWYgdGhpcyBmaWxlIGlzIHRvIGJlIGxvYWRlZFxuICogZHVyaW5nIGJvb3RzdHJhcHBpbmcgdGhpcyBmdW5jdGlvbiBuZWVkcyB0byBiZSByZXdyaXR0ZW4gdXNpbmcgc29tZSBuYXRpdmVcbiAqIGZ1bmN0aW9ucyBhcyBwcm90b3R5cGUgc2V0dXAgdXNpbmcgbm9ybWFsIEphdmFTY3JpcHQgZG9lcyBub3Qgd29yayBhc1xuICogZXhwZWN0ZWQgZHVyaW5nIGJvb3RzdHJhcHBpbmcgKHNlZSBtaXJyb3IuanMgaW4gcjExNDkwMykuXG4gKlxuICogQHBhcmFtIHtmdW5jdGlvbn0gY3RvciBDb25zdHJ1Y3RvciBmdW5jdGlvbiB3aGljaCBuZWVkcyB0byBpbmhlcml0IHRoZVxuICogICAgIHByb3RvdHlwZS5cbiAqIEBwYXJhbSB7ZnVuY3Rpb259IHN1cGVyQ3RvciBDb25zdHJ1Y3RvciBmdW5jdGlvbiB0byBpbmhlcml0IHByb3RvdHlwZSBmcm9tLlxuICovXG5leHBvcnRzLmluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKTtcblxuZXhwb3J0cy5fZXh0ZW5kID0gZnVuY3Rpb24ob3JpZ2luLCBhZGQpIHtcbiAgLy8gRG9uJ3QgZG8gYW55dGhpbmcgaWYgYWRkIGlzbid0IGFuIG9iamVjdFxuICBpZiAoIWFkZCB8fCAhaXNPYmplY3QoYWRkKSkgcmV0dXJuIG9yaWdpbjtcblxuICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKGFkZCk7XG4gIHZhciBpID0ga2V5cy5sZW5ndGg7XG4gIHdoaWxlIChpLS0pIHtcbiAgICBvcmlnaW5ba2V5c1tpXV0gPSBhZGRba2V5c1tpXV07XG4gIH1cbiAgcmV0dXJuIG9yaWdpbjtcbn07XG5cbmZ1bmN0aW9uIGhhc093blByb3BlcnR5KG9iaiwgcHJvcCkge1xuICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCk7XG59XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBjOi9qZW5raW5zL3dvcmtzcGFjZS9jYW1fc2J4X2FsbF9tYXN0ZXJfc2lnbmVkL3NieC1hbGwtc2lnbmVkL25vZGVfbW9kdWxlcy91dGlsL3V0aWwuanNcbi8vIG1vZHVsZSBpZCA9IDY4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gaXNCdWZmZXIoYXJnKSB7XG4gIHJldHVybiBhcmcgJiYgdHlwZW9mIGFyZyA9PT0gJ29iamVjdCdcbiAgICAmJiB0eXBlb2YgYXJnLmNvcHkgPT09ICdmdW5jdGlvbidcbiAgICAmJiB0eXBlb2YgYXJnLmZpbGwgPT09ICdmdW5jdGlvbidcbiAgICAmJiB0eXBlb2YgYXJnLnJlYWRVSW50OCA9PT0gJ2Z1bmN0aW9uJztcbn1cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBjOi9qZW5raW5zL3dvcmtzcGFjZS9jYW1fc2J4X2FsbF9tYXN0ZXJfc2lnbmVkL3NieC1hbGwtc2lnbmVkL25vZGVfbW9kdWxlcy91dGlsL3N1cHBvcnQvaXNCdWZmZXJCcm93c2VyLmpzXG4vLyBtb2R1bGUgaWQgPSA2OVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJpZiAodHlwZW9mIE9iamVjdC5jcmVhdGUgPT09ICdmdW5jdGlvbicpIHtcbiAgLy8gaW1wbGVtZW50YXRpb24gZnJvbSBzdGFuZGFyZCBub2RlLmpzICd1dGlsJyBtb2R1bGVcbiAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBpbmhlcml0cyhjdG9yLCBzdXBlckN0b3IpIHtcbiAgICBjdG9yLnN1cGVyXyA9IHN1cGVyQ3RvclxuICAgIGN0b3IucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckN0b3IucHJvdG90eXBlLCB7XG4gICAgICBjb25zdHJ1Y3Rvcjoge1xuICAgICAgICB2YWx1ZTogY3RvcixcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcbn0gZWxzZSB7XG4gIC8vIG9sZCBzY2hvb2wgc2hpbSBmb3Igb2xkIGJyb3dzZXJzXG4gIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gaW5oZXJpdHMoY3Rvciwgc3VwZXJDdG9yKSB7XG4gICAgY3Rvci5zdXBlcl8gPSBzdXBlckN0b3JcbiAgICB2YXIgVGVtcEN0b3IgPSBmdW5jdGlvbiAoKSB7fVxuICAgIFRlbXBDdG9yLnByb3RvdHlwZSA9IHN1cGVyQ3Rvci5wcm90b3R5cGVcbiAgICBjdG9yLnByb3RvdHlwZSA9IG5ldyBUZW1wQ3RvcigpXG4gICAgY3Rvci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBjdG9yXG4gIH1cbn1cblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGM6L2plbmtpbnMvd29ya3NwYWNlL2NhbV9zYnhfYWxsX21hc3Rlcl9zaWduZWQvc2J4LWFsbC1zaWduZWQvbm9kZV9tb2R1bGVzL3V0aWwvbm9kZV9tb2R1bGVzL2luaGVyaXRzL2luaGVyaXRzX2Jyb3dzZXIuanNcbi8vIG1vZHVsZSBpZCA9IDcwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8vIENvcHlyaWdodCBKb3llbnQsIEluYy4gYW5kIG90aGVyIE5vZGUgY29udHJpYnV0b3JzLlxuLy9cbi8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhXG4vLyBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlXG4vLyBcIlNvZnR3YXJlXCIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmdcbi8vIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCxcbi8vIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXRcbi8vIHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZVxuLy8gZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4vL1xuLy8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWRcbi8vIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuLy9cbi8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1Ncbi8vIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0Zcbi8vIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU5cbi8vIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLFxuLy8gREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SXG4vLyBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFXG4vLyBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuXG5tb2R1bGUuZXhwb3J0cyA9IFN0cmVhbTtcblxudmFyIEVFID0gcmVxdWlyZSgnZXZlbnRzJykuRXZlbnRFbWl0dGVyO1xudmFyIGluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKTtcblxuaW5oZXJpdHMoU3RyZWFtLCBFRSk7XG5TdHJlYW0uUmVhZGFibGUgPSByZXF1aXJlKCdyZWFkYWJsZS1zdHJlYW0vcmVhZGFibGUuanMnKTtcblN0cmVhbS5Xcml0YWJsZSA9IHJlcXVpcmUoJ3JlYWRhYmxlLXN0cmVhbS93cml0YWJsZS5qcycpO1xuU3RyZWFtLkR1cGxleCA9IHJlcXVpcmUoJ3JlYWRhYmxlLXN0cmVhbS9kdXBsZXguanMnKTtcblN0cmVhbS5UcmFuc2Zvcm0gPSByZXF1aXJlKCdyZWFkYWJsZS1zdHJlYW0vdHJhbnNmb3JtLmpzJyk7XG5TdHJlYW0uUGFzc1Rocm91Z2ggPSByZXF1aXJlKCdyZWFkYWJsZS1zdHJlYW0vcGFzc3Rocm91Z2guanMnKTtcblxuLy8gQmFja3dhcmRzLWNvbXBhdCB3aXRoIG5vZGUgMC40LnhcblN0cmVhbS5TdHJlYW0gPSBTdHJlYW07XG5cblxuXG4vLyBvbGQtc3R5bGUgc3RyZWFtcy4gIE5vdGUgdGhhdCB0aGUgcGlwZSBtZXRob2QgKHRoZSBvbmx5IHJlbGV2YW50XG4vLyBwYXJ0IG9mIHRoaXMgY2xhc3MpIGlzIG92ZXJyaWRkZW4gaW4gdGhlIFJlYWRhYmxlIGNsYXNzLlxuXG5mdW5jdGlvbiBTdHJlYW0oKSB7XG4gIEVFLmNhbGwodGhpcyk7XG59XG5cblN0cmVhbS5wcm90b3R5cGUucGlwZSA9IGZ1bmN0aW9uKGRlc3QsIG9wdGlvbnMpIHtcbiAgdmFyIHNvdXJjZSA9IHRoaXM7XG5cbiAgZnVuY3Rpb24gb25kYXRhKGNodW5rKSB7XG4gICAgaWYgKGRlc3Qud3JpdGFibGUpIHtcbiAgICAgIGlmIChmYWxzZSA9PT0gZGVzdC53cml0ZShjaHVuaykgJiYgc291cmNlLnBhdXNlKSB7XG4gICAgICAgIHNvdXJjZS5wYXVzZSgpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHNvdXJjZS5vbignZGF0YScsIG9uZGF0YSk7XG5cbiAgZnVuY3Rpb24gb25kcmFpbigpIHtcbiAgICBpZiAoc291cmNlLnJlYWRhYmxlICYmIHNvdXJjZS5yZXN1bWUpIHtcbiAgICAgIHNvdXJjZS5yZXN1bWUoKTtcbiAgICB9XG4gIH1cblxuICBkZXN0Lm9uKCdkcmFpbicsIG9uZHJhaW4pO1xuXG4gIC8vIElmIHRoZSAnZW5kJyBvcHRpb24gaXMgbm90IHN1cHBsaWVkLCBkZXN0LmVuZCgpIHdpbGwgYmUgY2FsbGVkIHdoZW5cbiAgLy8gc291cmNlIGdldHMgdGhlICdlbmQnIG9yICdjbG9zZScgZXZlbnRzLiAgT25seSBkZXN0LmVuZCgpIG9uY2UuXG4gIGlmICghZGVzdC5faXNTdGRpbyAmJiAoIW9wdGlvbnMgfHwgb3B0aW9ucy5lbmQgIT09IGZhbHNlKSkge1xuICAgIHNvdXJjZS5vbignZW5kJywgb25lbmQpO1xuICAgIHNvdXJjZS5vbignY2xvc2UnLCBvbmNsb3NlKTtcbiAgfVxuXG4gIHZhciBkaWRPbkVuZCA9IGZhbHNlO1xuICBmdW5jdGlvbiBvbmVuZCgpIHtcbiAgICBpZiAoZGlkT25FbmQpIHJldHVybjtcbiAgICBkaWRPbkVuZCA9IHRydWU7XG5cbiAgICBkZXN0LmVuZCgpO1xuICB9XG5cblxuICBmdW5jdGlvbiBvbmNsb3NlKCkge1xuICAgIGlmIChkaWRPbkVuZCkgcmV0dXJuO1xuICAgIGRpZE9uRW5kID0gdHJ1ZTtcblxuICAgIGlmICh0eXBlb2YgZGVzdC5kZXN0cm95ID09PSAnZnVuY3Rpb24nKSBkZXN0LmRlc3Ryb3koKTtcbiAgfVxuXG4gIC8vIGRvbid0IGxlYXZlIGRhbmdsaW5nIHBpcGVzIHdoZW4gdGhlcmUgYXJlIGVycm9ycy5cbiAgZnVuY3Rpb24gb25lcnJvcihlcikge1xuICAgIGNsZWFudXAoKTtcbiAgICBpZiAoRUUubGlzdGVuZXJDb3VudCh0aGlzLCAnZXJyb3InKSA9PT0gMCkge1xuICAgICAgdGhyb3cgZXI7IC8vIFVuaGFuZGxlZCBzdHJlYW0gZXJyb3IgaW4gcGlwZS5cbiAgICB9XG4gIH1cblxuICBzb3VyY2Uub24oJ2Vycm9yJywgb25lcnJvcik7XG4gIGRlc3Qub24oJ2Vycm9yJywgb25lcnJvcik7XG5cbiAgLy8gcmVtb3ZlIGFsbCB0aGUgZXZlbnQgbGlzdGVuZXJzIHRoYXQgd2VyZSBhZGRlZC5cbiAgZnVuY3Rpb24gY2xlYW51cCgpIHtcbiAgICBzb3VyY2UucmVtb3ZlTGlzdGVuZXIoJ2RhdGEnLCBvbmRhdGEpO1xuICAgIGRlc3QucmVtb3ZlTGlzdGVuZXIoJ2RyYWluJywgb25kcmFpbik7XG5cbiAgICBzb3VyY2UucmVtb3ZlTGlzdGVuZXIoJ2VuZCcsIG9uZW5kKTtcbiAgICBzb3VyY2UucmVtb3ZlTGlzdGVuZXIoJ2Nsb3NlJywgb25jbG9zZSk7XG5cbiAgICBzb3VyY2UucmVtb3ZlTGlzdGVuZXIoJ2Vycm9yJywgb25lcnJvcik7XG4gICAgZGVzdC5yZW1vdmVMaXN0ZW5lcignZXJyb3InLCBvbmVycm9yKTtcblxuICAgIHNvdXJjZS5yZW1vdmVMaXN0ZW5lcignZW5kJywgY2xlYW51cCk7XG4gICAgc291cmNlLnJlbW92ZUxpc3RlbmVyKCdjbG9zZScsIGNsZWFudXApO1xuXG4gICAgZGVzdC5yZW1vdmVMaXN0ZW5lcignY2xvc2UnLCBjbGVhbnVwKTtcbiAgfVxuXG4gIHNvdXJjZS5vbignZW5kJywgY2xlYW51cCk7XG4gIHNvdXJjZS5vbignY2xvc2UnLCBjbGVhbnVwKTtcblxuICBkZXN0Lm9uKCdjbG9zZScsIGNsZWFudXApO1xuXG4gIGRlc3QuZW1pdCgncGlwZScsIHNvdXJjZSk7XG5cbiAgLy8gQWxsb3cgZm9yIHVuaXgtbGlrZSB1c2FnZTogQS5waXBlKEIpLnBpcGUoQylcbiAgcmV0dXJuIGRlc3Q7XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gYzovamVua2lucy93b3Jrc3BhY2UvY2FtX3NieF9hbGxfbWFzdGVyX3NpZ25lZC9zYngtYWxsLXNpZ25lZC9ub2RlX21vZHVsZXMvc3RyZWFtLWJyb3dzZXJpZnkvaW5kZXguanNcbi8vIG1vZHVsZSBpZCA9IDcxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsInZhciB0b1N0cmluZyA9IHt9LnRvU3RyaW5nO1xuXG5tb2R1bGUuZXhwb3J0cyA9IEFycmF5LmlzQXJyYXkgfHwgZnVuY3Rpb24gKGFycikge1xuICByZXR1cm4gdG9TdHJpbmcuY2FsbChhcnIpID09ICdbb2JqZWN0IEFycmF5XSc7XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gYzovamVua2lucy93b3Jrc3BhY2UvY2FtX3NieF9hbGxfbWFzdGVyX3NpZ25lZC9zYngtYWxsLXNpZ25lZC9ub2RlX21vZHVsZXMvc3RyZWFtLWJyb3dzZXJpZnkvbm9kZV9tb2R1bGVzL2lzYXJyYXkvaW5kZXguanNcbi8vIG1vZHVsZSBpZCA9IDcyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIid1c2Ugc3RyaWN0J1xuXG5leHBvcnRzLmJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoXG5leHBvcnRzLnRvQnl0ZUFycmF5ID0gdG9CeXRlQXJyYXlcbmV4cG9ydHMuZnJvbUJ5dGVBcnJheSA9IGZyb21CeXRlQXJyYXlcblxudmFyIGxvb2t1cCA9IFtdXG52YXIgcmV2TG9va3VwID0gW11cbnZhciBBcnIgPSB0eXBlb2YgVWludDhBcnJheSAhPT0gJ3VuZGVmaW5lZCcgPyBVaW50OEFycmF5IDogQXJyYXlcblxudmFyIGNvZGUgPSAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLydcbmZvciAodmFyIGkgPSAwLCBsZW4gPSBjb2RlLmxlbmd0aDsgaSA8IGxlbjsgKytpKSB7XG4gIGxvb2t1cFtpXSA9IGNvZGVbaV1cbiAgcmV2TG9va3VwW2NvZGUuY2hhckNvZGVBdChpKV0gPSBpXG59XG5cbnJldkxvb2t1cFsnLScuY2hhckNvZGVBdCgwKV0gPSA2MlxucmV2TG9va3VwWydfJy5jaGFyQ29kZUF0KDApXSA9IDYzXG5cbmZ1bmN0aW9uIHBsYWNlSG9sZGVyc0NvdW50IChiNjQpIHtcbiAgdmFyIGxlbiA9IGI2NC5sZW5ndGhcbiAgaWYgKGxlbiAlIDQgPiAwKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIHN0cmluZy4gTGVuZ3RoIG11c3QgYmUgYSBtdWx0aXBsZSBvZiA0JylcbiAgfVxuXG4gIC8vIHRoZSBudW1iZXIgb2YgZXF1YWwgc2lnbnMgKHBsYWNlIGhvbGRlcnMpXG4gIC8vIGlmIHRoZXJlIGFyZSB0d28gcGxhY2Vob2xkZXJzLCB0aGFuIHRoZSB0d28gY2hhcmFjdGVycyBiZWZvcmUgaXRcbiAgLy8gcmVwcmVzZW50IG9uZSBieXRlXG4gIC8vIGlmIHRoZXJlIGlzIG9ubHkgb25lLCB0aGVuIHRoZSB0aHJlZSBjaGFyYWN0ZXJzIGJlZm9yZSBpdCByZXByZXNlbnQgMiBieXRlc1xuICAvLyB0aGlzIGlzIGp1c3QgYSBjaGVhcCBoYWNrIHRvIG5vdCBkbyBpbmRleE9mIHR3aWNlXG4gIHJldHVybiBiNjRbbGVuIC0gMl0gPT09ICc9JyA/IDIgOiBiNjRbbGVuIC0gMV0gPT09ICc9JyA/IDEgOiAwXG59XG5cbmZ1bmN0aW9uIGJ5dGVMZW5ndGggKGI2NCkge1xuICAvLyBiYXNlNjQgaXMgNC8zICsgdXAgdG8gdHdvIGNoYXJhY3RlcnMgb2YgdGhlIG9yaWdpbmFsIGRhdGFcbiAgcmV0dXJuIChiNjQubGVuZ3RoICogMyAvIDQpIC0gcGxhY2VIb2xkZXJzQ291bnQoYjY0KVxufVxuXG5mdW5jdGlvbiB0b0J5dGVBcnJheSAoYjY0KSB7XG4gIHZhciBpLCBsLCB0bXAsIHBsYWNlSG9sZGVycywgYXJyXG4gIHZhciBsZW4gPSBiNjQubGVuZ3RoXG4gIHBsYWNlSG9sZGVycyA9IHBsYWNlSG9sZGVyc0NvdW50KGI2NClcblxuICBhcnIgPSBuZXcgQXJyKChsZW4gKiAzIC8gNCkgLSBwbGFjZUhvbGRlcnMpXG5cbiAgLy8gaWYgdGhlcmUgYXJlIHBsYWNlaG9sZGVycywgb25seSBnZXQgdXAgdG8gdGhlIGxhc3QgY29tcGxldGUgNCBjaGFyc1xuICBsID0gcGxhY2VIb2xkZXJzID4gMCA/IGxlbiAtIDQgOiBsZW5cblxuICB2YXIgTCA9IDBcblxuICBmb3IgKGkgPSAwOyBpIDwgbDsgaSArPSA0KSB7XG4gICAgdG1wID0gKHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpKV0gPDwgMTgpIHwgKHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpICsgMSldIDw8IDEyKSB8IChyZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSArIDIpXSA8PCA2KSB8IHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpICsgMyldXG4gICAgYXJyW0wrK10gPSAodG1wID4+IDE2KSAmIDB4RkZcbiAgICBhcnJbTCsrXSA9ICh0bXAgPj4gOCkgJiAweEZGXG4gICAgYXJyW0wrK10gPSB0bXAgJiAweEZGXG4gIH1cblxuICBpZiAocGxhY2VIb2xkZXJzID09PSAyKSB7XG4gICAgdG1wID0gKHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpKV0gPDwgMikgfCAocmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkgKyAxKV0gPj4gNClcbiAgICBhcnJbTCsrXSA9IHRtcCAmIDB4RkZcbiAgfSBlbHNlIGlmIChwbGFjZUhvbGRlcnMgPT09IDEpIHtcbiAgICB0bXAgPSAocmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkpXSA8PCAxMCkgfCAocmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkgKyAxKV0gPDwgNCkgfCAocmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkgKyAyKV0gPj4gMilcbiAgICBhcnJbTCsrXSA9ICh0bXAgPj4gOCkgJiAweEZGXG4gICAgYXJyW0wrK10gPSB0bXAgJiAweEZGXG4gIH1cblxuICByZXR1cm4gYXJyXG59XG5cbmZ1bmN0aW9uIHRyaXBsZXRUb0Jhc2U2NCAobnVtKSB7XG4gIHJldHVybiBsb29rdXBbbnVtID4+IDE4ICYgMHgzRl0gKyBsb29rdXBbbnVtID4+IDEyICYgMHgzRl0gKyBsb29rdXBbbnVtID4+IDYgJiAweDNGXSArIGxvb2t1cFtudW0gJiAweDNGXVxufVxuXG5mdW5jdGlvbiBlbmNvZGVDaHVuayAodWludDgsIHN0YXJ0LCBlbmQpIHtcbiAgdmFyIHRtcFxuICB2YXIgb3V0cHV0ID0gW11cbiAgZm9yICh2YXIgaSA9IHN0YXJ0OyBpIDwgZW5kOyBpICs9IDMpIHtcbiAgICB0bXAgPSAodWludDhbaV0gPDwgMTYpICsgKHVpbnQ4W2kgKyAxXSA8PCA4KSArICh1aW50OFtpICsgMl0pXG4gICAgb3V0cHV0LnB1c2godHJpcGxldFRvQmFzZTY0KHRtcCkpXG4gIH1cbiAgcmV0dXJuIG91dHB1dC5qb2luKCcnKVxufVxuXG5mdW5jdGlvbiBmcm9tQnl0ZUFycmF5ICh1aW50OCkge1xuICB2YXIgdG1wXG4gIHZhciBsZW4gPSB1aW50OC5sZW5ndGhcbiAgdmFyIGV4dHJhQnl0ZXMgPSBsZW4gJSAzIC8vIGlmIHdlIGhhdmUgMSBieXRlIGxlZnQsIHBhZCAyIGJ5dGVzXG4gIHZhciBvdXRwdXQgPSAnJ1xuICB2YXIgcGFydHMgPSBbXVxuICB2YXIgbWF4Q2h1bmtMZW5ndGggPSAxNjM4MyAvLyBtdXN0IGJlIG11bHRpcGxlIG9mIDNcblxuICAvLyBnbyB0aHJvdWdoIHRoZSBhcnJheSBldmVyeSB0aHJlZSBieXRlcywgd2UnbGwgZGVhbCB3aXRoIHRyYWlsaW5nIHN0dWZmIGxhdGVyXG4gIGZvciAodmFyIGkgPSAwLCBsZW4yID0gbGVuIC0gZXh0cmFCeXRlczsgaSA8IGxlbjI7IGkgKz0gbWF4Q2h1bmtMZW5ndGgpIHtcbiAgICBwYXJ0cy5wdXNoKGVuY29kZUNodW5rKHVpbnQ4LCBpLCAoaSArIG1heENodW5rTGVuZ3RoKSA+IGxlbjIgPyBsZW4yIDogKGkgKyBtYXhDaHVua0xlbmd0aCkpKVxuICB9XG5cbiAgLy8gcGFkIHRoZSBlbmQgd2l0aCB6ZXJvcywgYnV0IG1ha2Ugc3VyZSB0byBub3QgZm9yZ2V0IHRoZSBleHRyYSBieXRlc1xuICBpZiAoZXh0cmFCeXRlcyA9PT0gMSkge1xuICAgIHRtcCA9IHVpbnQ4W2xlbiAtIDFdXG4gICAgb3V0cHV0ICs9IGxvb2t1cFt0bXAgPj4gMl1cbiAgICBvdXRwdXQgKz0gbG9va3VwWyh0bXAgPDwgNCkgJiAweDNGXVxuICAgIG91dHB1dCArPSAnPT0nXG4gIH0gZWxzZSBpZiAoZXh0cmFCeXRlcyA9PT0gMikge1xuICAgIHRtcCA9ICh1aW50OFtsZW4gLSAyXSA8PCA4KSArICh1aW50OFtsZW4gLSAxXSlcbiAgICBvdXRwdXQgKz0gbG9va3VwW3RtcCA+PiAxMF1cbiAgICBvdXRwdXQgKz0gbG9va3VwWyh0bXAgPj4gNCkgJiAweDNGXVxuICAgIG91dHB1dCArPSBsb29rdXBbKHRtcCA8PCAyKSAmIDB4M0ZdXG4gICAgb3V0cHV0ICs9ICc9J1xuICB9XG5cbiAgcGFydHMucHVzaChvdXRwdXQpXG5cbiAgcmV0dXJuIHBhcnRzLmpvaW4oJycpXG59XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBjOi9qZW5raW5zL3dvcmtzcGFjZS9jYW1fc2J4X2FsbF9tYXN0ZXJfc2lnbmVkL3NieC1hbGwtc2lnbmVkL25vZGVfbW9kdWxlcy9iYXNlNjQtanMvaW5kZXguanNcbi8vIG1vZHVsZSBpZCA9IDczXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImV4cG9ydHMucmVhZCA9IGZ1bmN0aW9uIChidWZmZXIsIG9mZnNldCwgaXNMRSwgbUxlbiwgbkJ5dGVzKSB7XG4gIHZhciBlLCBtXG4gIHZhciBlTGVuID0gbkJ5dGVzICogOCAtIG1MZW4gLSAxXG4gIHZhciBlTWF4ID0gKDEgPDwgZUxlbikgLSAxXG4gIHZhciBlQmlhcyA9IGVNYXggPj4gMVxuICB2YXIgbkJpdHMgPSAtN1xuICB2YXIgaSA9IGlzTEUgPyAobkJ5dGVzIC0gMSkgOiAwXG4gIHZhciBkID0gaXNMRSA/IC0xIDogMVxuICB2YXIgcyA9IGJ1ZmZlcltvZmZzZXQgKyBpXVxuXG4gIGkgKz0gZFxuXG4gIGUgPSBzICYgKCgxIDw8ICgtbkJpdHMpKSAtIDEpXG4gIHMgPj49ICgtbkJpdHMpXG4gIG5CaXRzICs9IGVMZW5cbiAgZm9yICg7IG5CaXRzID4gMDsgZSA9IGUgKiAyNTYgKyBidWZmZXJbb2Zmc2V0ICsgaV0sIGkgKz0gZCwgbkJpdHMgLT0gOCkge31cblxuICBtID0gZSAmICgoMSA8PCAoLW5CaXRzKSkgLSAxKVxuICBlID4+PSAoLW5CaXRzKVxuICBuQml0cyArPSBtTGVuXG4gIGZvciAoOyBuQml0cyA+IDA7IG0gPSBtICogMjU2ICsgYnVmZmVyW29mZnNldCArIGldLCBpICs9IGQsIG5CaXRzIC09IDgpIHt9XG5cbiAgaWYgKGUgPT09IDApIHtcbiAgICBlID0gMSAtIGVCaWFzXG4gIH0gZWxzZSBpZiAoZSA9PT0gZU1heCkge1xuICAgIHJldHVybiBtID8gTmFOIDogKChzID8gLTEgOiAxKSAqIEluZmluaXR5KVxuICB9IGVsc2Uge1xuICAgIG0gPSBtICsgTWF0aC5wb3coMiwgbUxlbilcbiAgICBlID0gZSAtIGVCaWFzXG4gIH1cbiAgcmV0dXJuIChzID8gLTEgOiAxKSAqIG0gKiBNYXRoLnBvdygyLCBlIC0gbUxlbilcbn1cblxuZXhwb3J0cy53cml0ZSA9IGZ1bmN0aW9uIChidWZmZXIsIHZhbHVlLCBvZmZzZXQsIGlzTEUsIG1MZW4sIG5CeXRlcykge1xuICB2YXIgZSwgbSwgY1xuICB2YXIgZUxlbiA9IG5CeXRlcyAqIDggLSBtTGVuIC0gMVxuICB2YXIgZU1heCA9ICgxIDw8IGVMZW4pIC0gMVxuICB2YXIgZUJpYXMgPSBlTWF4ID4+IDFcbiAgdmFyIHJ0ID0gKG1MZW4gPT09IDIzID8gTWF0aC5wb3coMiwgLTI0KSAtIE1hdGgucG93KDIsIC03NykgOiAwKVxuICB2YXIgaSA9IGlzTEUgPyAwIDogKG5CeXRlcyAtIDEpXG4gIHZhciBkID0gaXNMRSA/IDEgOiAtMVxuICB2YXIgcyA9IHZhbHVlIDwgMCB8fCAodmFsdWUgPT09IDAgJiYgMSAvIHZhbHVlIDwgMCkgPyAxIDogMFxuXG4gIHZhbHVlID0gTWF0aC5hYnModmFsdWUpXG5cbiAgaWYgKGlzTmFOKHZhbHVlKSB8fCB2YWx1ZSA9PT0gSW5maW5pdHkpIHtcbiAgICBtID0gaXNOYU4odmFsdWUpID8gMSA6IDBcbiAgICBlID0gZU1heFxuICB9IGVsc2Uge1xuICAgIGUgPSBNYXRoLmZsb29yKE1hdGgubG9nKHZhbHVlKSAvIE1hdGguTE4yKVxuICAgIGlmICh2YWx1ZSAqIChjID0gTWF0aC5wb3coMiwgLWUpKSA8IDEpIHtcbiAgICAgIGUtLVxuICAgICAgYyAqPSAyXG4gICAgfVxuICAgIGlmIChlICsgZUJpYXMgPj0gMSkge1xuICAgICAgdmFsdWUgKz0gcnQgLyBjXG4gICAgfSBlbHNlIHtcbiAgICAgIHZhbHVlICs9IHJ0ICogTWF0aC5wb3coMiwgMSAtIGVCaWFzKVxuICAgIH1cbiAgICBpZiAodmFsdWUgKiBjID49IDIpIHtcbiAgICAgIGUrK1xuICAgICAgYyAvPSAyXG4gICAgfVxuXG4gICAgaWYgKGUgKyBlQmlhcyA+PSBlTWF4KSB7XG4gICAgICBtID0gMFxuICAgICAgZSA9IGVNYXhcbiAgICB9IGVsc2UgaWYgKGUgKyBlQmlhcyA+PSAxKSB7XG4gICAgICBtID0gKHZhbHVlICogYyAtIDEpICogTWF0aC5wb3coMiwgbUxlbilcbiAgICAgIGUgPSBlICsgZUJpYXNcbiAgICB9IGVsc2Uge1xuICAgICAgbSA9IHZhbHVlICogTWF0aC5wb3coMiwgZUJpYXMgLSAxKSAqIE1hdGgucG93KDIsIG1MZW4pXG4gICAgICBlID0gMFxuICAgIH1cbiAgfVxuXG4gIGZvciAoOyBtTGVuID49IDg7IGJ1ZmZlcltvZmZzZXQgKyBpXSA9IG0gJiAweGZmLCBpICs9IGQsIG0gLz0gMjU2LCBtTGVuIC09IDgpIHt9XG5cbiAgZSA9IChlIDw8IG1MZW4pIHwgbVxuICBlTGVuICs9IG1MZW5cbiAgZm9yICg7IGVMZW4gPiAwOyBidWZmZXJbb2Zmc2V0ICsgaV0gPSBlICYgMHhmZiwgaSArPSBkLCBlIC89IDI1NiwgZUxlbiAtPSA4KSB7fVxuXG4gIGJ1ZmZlcltvZmZzZXQgKyBpIC0gZF0gfD0gcyAqIDEyOFxufVxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gYzovamVua2lucy93b3Jrc3BhY2UvY2FtX3NieF9hbGxfbWFzdGVyX3NpZ25lZC9zYngtYWxsLXNpZ25lZC9ub2RlX21vZHVsZXMvaWVlZTc1NC9pbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gNzRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIHRvU3RyaW5nID0ge30udG9TdHJpbmc7XG5cbm1vZHVsZS5leHBvcnRzID0gQXJyYXkuaXNBcnJheSB8fCBmdW5jdGlvbiAoYXJyKSB7XG4gIHJldHVybiB0b1N0cmluZy5jYWxsKGFycikgPT0gJ1tvYmplY3QgQXJyYXldJztcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBjOi9qZW5raW5zL3dvcmtzcGFjZS9jYW1fc2J4X2FsbF9tYXN0ZXJfc2lnbmVkL3NieC1hbGwtc2lnbmVkL25vZGVfbW9kdWxlcy9idWZmZXIvbm9kZV9tb2R1bGVzL2lzYXJyYXkvaW5kZXguanNcbi8vIG1vZHVsZSBpZCA9IDc1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qIChpZ25vcmVkKSAqL1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIHV0aWwgKGlnbm9yZWQpXG4vLyBtb2R1bGUgaWQgPSA3NlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIndXNlIHN0cmljdCc7XG5cbi8qPHJlcGxhY2VtZW50PiovXG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbnZhciBCdWZmZXIgPSByZXF1aXJlKCdzYWZlLWJ1ZmZlcicpLkJ1ZmZlcjtcbi8qPC9yZXBsYWNlbWVudD4qL1xuXG5mdW5jdGlvbiBjb3B5QnVmZmVyKHNyYywgdGFyZ2V0LCBvZmZzZXQpIHtcbiAgc3JjLmNvcHkodGFyZ2V0LCBvZmZzZXQpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gQnVmZmVyTGlzdCgpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQnVmZmVyTGlzdCk7XG5cbiAgICB0aGlzLmhlYWQgPSBudWxsO1xuICAgIHRoaXMudGFpbCA9IG51bGw7XG4gICAgdGhpcy5sZW5ndGggPSAwO1xuICB9XG5cbiAgQnVmZmVyTGlzdC5wcm90b3R5cGUucHVzaCA9IGZ1bmN0aW9uIHB1c2godikge1xuICAgIHZhciBlbnRyeSA9IHsgZGF0YTogdiwgbmV4dDogbnVsbCB9O1xuICAgIGlmICh0aGlzLmxlbmd0aCA+IDApIHRoaXMudGFpbC5uZXh0ID0gZW50cnk7ZWxzZSB0aGlzLmhlYWQgPSBlbnRyeTtcbiAgICB0aGlzLnRhaWwgPSBlbnRyeTtcbiAgICArK3RoaXMubGVuZ3RoO1xuICB9O1xuXG4gIEJ1ZmZlckxpc3QucHJvdG90eXBlLnVuc2hpZnQgPSBmdW5jdGlvbiB1bnNoaWZ0KHYpIHtcbiAgICB2YXIgZW50cnkgPSB7IGRhdGE6IHYsIG5leHQ6IHRoaXMuaGVhZCB9O1xuICAgIGlmICh0aGlzLmxlbmd0aCA9PT0gMCkgdGhpcy50YWlsID0gZW50cnk7XG4gICAgdGhpcy5oZWFkID0gZW50cnk7XG4gICAgKyt0aGlzLmxlbmd0aDtcbiAgfTtcblxuICBCdWZmZXJMaXN0LnByb3RvdHlwZS5zaGlmdCA9IGZ1bmN0aW9uIHNoaWZ0KCkge1xuICAgIGlmICh0aGlzLmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xuICAgIHZhciByZXQgPSB0aGlzLmhlYWQuZGF0YTtcbiAgICBpZiAodGhpcy5sZW5ndGggPT09IDEpIHRoaXMuaGVhZCA9IHRoaXMudGFpbCA9IG51bGw7ZWxzZSB0aGlzLmhlYWQgPSB0aGlzLmhlYWQubmV4dDtcbiAgICAtLXRoaXMubGVuZ3RoO1xuICAgIHJldHVybiByZXQ7XG4gIH07XG5cbiAgQnVmZmVyTGlzdC5wcm90b3R5cGUuY2xlYXIgPSBmdW5jdGlvbiBjbGVhcigpIHtcbiAgICB0aGlzLmhlYWQgPSB0aGlzLnRhaWwgPSBudWxsO1xuICAgIHRoaXMubGVuZ3RoID0gMDtcbiAgfTtcblxuICBCdWZmZXJMaXN0LnByb3RvdHlwZS5qb2luID0gZnVuY3Rpb24gam9pbihzKSB7XG4gICAgaWYgKHRoaXMubGVuZ3RoID09PSAwKSByZXR1cm4gJyc7XG4gICAgdmFyIHAgPSB0aGlzLmhlYWQ7XG4gICAgdmFyIHJldCA9ICcnICsgcC5kYXRhO1xuICAgIHdoaWxlIChwID0gcC5uZXh0KSB7XG4gICAgICByZXQgKz0gcyArIHAuZGF0YTtcbiAgICB9cmV0dXJuIHJldDtcbiAgfTtcblxuICBCdWZmZXJMaXN0LnByb3RvdHlwZS5jb25jYXQgPSBmdW5jdGlvbiBjb25jYXQobikge1xuICAgIGlmICh0aGlzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIEJ1ZmZlci5hbGxvYygwKTtcbiAgICBpZiAodGhpcy5sZW5ndGggPT09IDEpIHJldHVybiB0aGlzLmhlYWQuZGF0YTtcbiAgICB2YXIgcmV0ID0gQnVmZmVyLmFsbG9jVW5zYWZlKG4gPj4+IDApO1xuICAgIHZhciBwID0gdGhpcy5oZWFkO1xuICAgIHZhciBpID0gMDtcbiAgICB3aGlsZSAocCkge1xuICAgICAgY29weUJ1ZmZlcihwLmRhdGEsIHJldCwgaSk7XG4gICAgICBpICs9IHAuZGF0YS5sZW5ndGg7XG4gICAgICBwID0gcC5uZXh0O1xuICAgIH1cbiAgICByZXR1cm4gcmV0O1xuICB9O1xuXG4gIHJldHVybiBCdWZmZXJMaXN0O1xufSgpO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGM6L2plbmtpbnMvd29ya3NwYWNlL2NhbV9zYnhfYWxsX21hc3Rlcl9zaWduZWQvc2J4LWFsbC1zaWduZWQvbm9kZV9tb2R1bGVzL3N0cmVhbS1icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9yZWFkYWJsZS1zdHJlYW0vbGliL2ludGVybmFsL3N0cmVhbXMvQnVmZmVyTGlzdC5qc1xuLy8gbW9kdWxlIGlkID0gNzdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIGFwcGx5ID0gRnVuY3Rpb24ucHJvdG90eXBlLmFwcGx5O1xuXG4vLyBET00gQVBJcywgZm9yIGNvbXBsZXRlbmVzc1xuXG5leHBvcnRzLnNldFRpbWVvdXQgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIG5ldyBUaW1lb3V0KGFwcGx5LmNhbGwoc2V0VGltZW91dCwgd2luZG93LCBhcmd1bWVudHMpLCBjbGVhclRpbWVvdXQpO1xufTtcbmV4cG9ydHMuc2V0SW50ZXJ2YWwgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIG5ldyBUaW1lb3V0KGFwcGx5LmNhbGwoc2V0SW50ZXJ2YWwsIHdpbmRvdywgYXJndW1lbnRzKSwgY2xlYXJJbnRlcnZhbCk7XG59O1xuZXhwb3J0cy5jbGVhclRpbWVvdXQgPVxuZXhwb3J0cy5jbGVhckludGVydmFsID0gZnVuY3Rpb24odGltZW91dCkge1xuICBpZiAodGltZW91dCkge1xuICAgIHRpbWVvdXQuY2xvc2UoKTtcbiAgfVxufTtcblxuZnVuY3Rpb24gVGltZW91dChpZCwgY2xlYXJGbikge1xuICB0aGlzLl9pZCA9IGlkO1xuICB0aGlzLl9jbGVhckZuID0gY2xlYXJGbjtcbn1cblRpbWVvdXQucHJvdG90eXBlLnVucmVmID0gVGltZW91dC5wcm90b3R5cGUucmVmID0gZnVuY3Rpb24oKSB7fTtcblRpbWVvdXQucHJvdG90eXBlLmNsb3NlID0gZnVuY3Rpb24oKSB7XG4gIHRoaXMuX2NsZWFyRm4uY2FsbCh3aW5kb3csIHRoaXMuX2lkKTtcbn07XG5cbi8vIERvZXMgbm90IHN0YXJ0IHRoZSB0aW1lLCBqdXN0IHNldHMgdXAgdGhlIG1lbWJlcnMgbmVlZGVkLlxuZXhwb3J0cy5lbnJvbGwgPSBmdW5jdGlvbihpdGVtLCBtc2Vjcykge1xuICBjbGVhclRpbWVvdXQoaXRlbS5faWRsZVRpbWVvdXRJZCk7XG4gIGl0ZW0uX2lkbGVUaW1lb3V0ID0gbXNlY3M7XG59O1xuXG5leHBvcnRzLnVuZW5yb2xsID0gZnVuY3Rpb24oaXRlbSkge1xuICBjbGVhclRpbWVvdXQoaXRlbS5faWRsZVRpbWVvdXRJZCk7XG4gIGl0ZW0uX2lkbGVUaW1lb3V0ID0gLTE7XG59O1xuXG5leHBvcnRzLl91bnJlZkFjdGl2ZSA9IGV4cG9ydHMuYWN0aXZlID0gZnVuY3Rpb24oaXRlbSkge1xuICBjbGVhclRpbWVvdXQoaXRlbS5faWRsZVRpbWVvdXRJZCk7XG5cbiAgdmFyIG1zZWNzID0gaXRlbS5faWRsZVRpbWVvdXQ7XG4gIGlmIChtc2VjcyA+PSAwKSB7XG4gICAgaXRlbS5faWRsZVRpbWVvdXRJZCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gb25UaW1lb3V0KCkge1xuICAgICAgaWYgKGl0ZW0uX29uVGltZW91dClcbiAgICAgICAgaXRlbS5fb25UaW1lb3V0KCk7XG4gICAgfSwgbXNlY3MpO1xuICB9XG59O1xuXG4vLyBzZXRpbW1lZGlhdGUgYXR0YWNoZXMgaXRzZWxmIHRvIHRoZSBnbG9iYWwgb2JqZWN0XG5yZXF1aXJlKFwic2V0aW1tZWRpYXRlXCIpO1xuZXhwb3J0cy5zZXRJbW1lZGlhdGUgPSBzZXRJbW1lZGlhdGU7XG5leHBvcnRzLmNsZWFySW1tZWRpYXRlID0gY2xlYXJJbW1lZGlhdGU7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBjOi9qZW5raW5zL3dvcmtzcGFjZS9jYW1fc2J4X2FsbF9tYXN0ZXJfc2lnbmVkL3NieC1hbGwtc2lnbmVkL25vZGVfbW9kdWxlcy90aW1lcnMtYnJvd3NlcmlmeS9tYWluLmpzXG4vLyBtb2R1bGUgaWQgPSA3OFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIoZnVuY3Rpb24gKGdsb2JhbCwgdW5kZWZpbmVkKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICBpZiAoZ2xvYmFsLnNldEltbWVkaWF0ZSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIG5leHRIYW5kbGUgPSAxOyAvLyBTcGVjIHNheXMgZ3JlYXRlciB0aGFuIHplcm9cbiAgICB2YXIgdGFza3NCeUhhbmRsZSA9IHt9O1xuICAgIHZhciBjdXJyZW50bHlSdW5uaW5nQVRhc2sgPSBmYWxzZTtcbiAgICB2YXIgZG9jID0gZ2xvYmFsLmRvY3VtZW50O1xuICAgIHZhciByZWdpc3RlckltbWVkaWF0ZTtcblxuICAgIGZ1bmN0aW9uIHNldEltbWVkaWF0ZShjYWxsYmFjaykge1xuICAgICAgLy8gQ2FsbGJhY2sgY2FuIGVpdGhlciBiZSBhIGZ1bmN0aW9uIG9yIGEgc3RyaW5nXG4gICAgICBpZiAodHlwZW9mIGNhbGxiYWNrICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgY2FsbGJhY2sgPSBuZXcgRnVuY3Rpb24oXCJcIiArIGNhbGxiYWNrKTtcbiAgICAgIH1cbiAgICAgIC8vIENvcHkgZnVuY3Rpb24gYXJndW1lbnRzXG4gICAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoIC0gMSk7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBhcmdzW2ldID0gYXJndW1lbnRzW2kgKyAxXTtcbiAgICAgIH1cbiAgICAgIC8vIFN0b3JlIGFuZCByZWdpc3RlciB0aGUgdGFza1xuICAgICAgdmFyIHRhc2sgPSB7IGNhbGxiYWNrOiBjYWxsYmFjaywgYXJnczogYXJncyB9O1xuICAgICAgdGFza3NCeUhhbmRsZVtuZXh0SGFuZGxlXSA9IHRhc2s7XG4gICAgICByZWdpc3RlckltbWVkaWF0ZShuZXh0SGFuZGxlKTtcbiAgICAgIHJldHVybiBuZXh0SGFuZGxlKys7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2xlYXJJbW1lZGlhdGUoaGFuZGxlKSB7XG4gICAgICAgIGRlbGV0ZSB0YXNrc0J5SGFuZGxlW2hhbmRsZV07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcnVuKHRhc2spIHtcbiAgICAgICAgdmFyIGNhbGxiYWNrID0gdGFzay5jYWxsYmFjaztcbiAgICAgICAgdmFyIGFyZ3MgPSB0YXNrLmFyZ3M7XG4gICAgICAgIHN3aXRjaCAoYXJncy5sZW5ndGgpIHtcbiAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICBjYWxsYmFjayhhcmdzWzBdKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICBjYWxsYmFjayhhcmdzWzBdLCBhcmdzWzFdKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICBjYWxsYmFjayhhcmdzWzBdLCBhcmdzWzFdLCBhcmdzWzJdKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgY2FsbGJhY2suYXBwbHkodW5kZWZpbmVkLCBhcmdzKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcnVuSWZQcmVzZW50KGhhbmRsZSkge1xuICAgICAgICAvLyBGcm9tIHRoZSBzcGVjOiBcIldhaXQgdW50aWwgYW55IGludm9jYXRpb25zIG9mIHRoaXMgYWxnb3JpdGhtIHN0YXJ0ZWQgYmVmb3JlIHRoaXMgb25lIGhhdmUgY29tcGxldGVkLlwiXG4gICAgICAgIC8vIFNvIGlmIHdlJ3JlIGN1cnJlbnRseSBydW5uaW5nIGEgdGFzaywgd2UnbGwgbmVlZCB0byBkZWxheSB0aGlzIGludm9jYXRpb24uXG4gICAgICAgIGlmIChjdXJyZW50bHlSdW5uaW5nQVRhc2spIHtcbiAgICAgICAgICAgIC8vIERlbGF5IGJ5IGRvaW5nIGEgc2V0VGltZW91dC4gc2V0SW1tZWRpYXRlIHdhcyB0cmllZCBpbnN0ZWFkLCBidXQgaW4gRmlyZWZveCA3IGl0IGdlbmVyYXRlZCBhXG4gICAgICAgICAgICAvLyBcInRvbyBtdWNoIHJlY3Vyc2lvblwiIGVycm9yLlxuICAgICAgICAgICAgc2V0VGltZW91dChydW5JZlByZXNlbnQsIDAsIGhhbmRsZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YXIgdGFzayA9IHRhc2tzQnlIYW5kbGVbaGFuZGxlXTtcbiAgICAgICAgICAgIGlmICh0YXNrKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudGx5UnVubmluZ0FUYXNrID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBydW4odGFzayk7XG4gICAgICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJJbW1lZGlhdGUoaGFuZGxlKTtcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudGx5UnVubmluZ0FUYXNrID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW5zdGFsbE5leHRUaWNrSW1wbGVtZW50YXRpb24oKSB7XG4gICAgICAgIHJlZ2lzdGVySW1tZWRpYXRlID0gZnVuY3Rpb24oaGFuZGxlKSB7XG4gICAgICAgICAgICBwcm9jZXNzLm5leHRUaWNrKGZ1bmN0aW9uICgpIHsgcnVuSWZQcmVzZW50KGhhbmRsZSk7IH0pO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNhblVzZVBvc3RNZXNzYWdlKCkge1xuICAgICAgICAvLyBUaGUgdGVzdCBhZ2FpbnN0IGBpbXBvcnRTY3JpcHRzYCBwcmV2ZW50cyB0aGlzIGltcGxlbWVudGF0aW9uIGZyb20gYmVpbmcgaW5zdGFsbGVkIGluc2lkZSBhIHdlYiB3b3JrZXIsXG4gICAgICAgIC8vIHdoZXJlIGBnbG9iYWwucG9zdE1lc3NhZ2VgIG1lYW5zIHNvbWV0aGluZyBjb21wbGV0ZWx5IGRpZmZlcmVudCBhbmQgY2FuJ3QgYmUgdXNlZCBmb3IgdGhpcyBwdXJwb3NlLlxuICAgICAgICBpZiAoZ2xvYmFsLnBvc3RNZXNzYWdlICYmICFnbG9iYWwuaW1wb3J0U2NyaXB0cykge1xuICAgICAgICAgICAgdmFyIHBvc3RNZXNzYWdlSXNBc3luY2hyb25vdXMgPSB0cnVlO1xuICAgICAgICAgICAgdmFyIG9sZE9uTWVzc2FnZSA9IGdsb2JhbC5vbm1lc3NhZ2U7XG4gICAgICAgICAgICBnbG9iYWwub25tZXNzYWdlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgcG9zdE1lc3NhZ2VJc0FzeW5jaHJvbm91cyA9IGZhbHNlO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGdsb2JhbC5wb3N0TWVzc2FnZShcIlwiLCBcIipcIik7XG4gICAgICAgICAgICBnbG9iYWwub25tZXNzYWdlID0gb2xkT25NZXNzYWdlO1xuICAgICAgICAgICAgcmV0dXJuIHBvc3RNZXNzYWdlSXNBc3luY2hyb25vdXM7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpbnN0YWxsUG9zdE1lc3NhZ2VJbXBsZW1lbnRhdGlvbigpIHtcbiAgICAgICAgLy8gSW5zdGFsbHMgYW4gZXZlbnQgaGFuZGxlciBvbiBgZ2xvYmFsYCBmb3IgdGhlIGBtZXNzYWdlYCBldmVudDogc2VlXG4gICAgICAgIC8vICogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4vRE9NL3dpbmRvdy5wb3N0TWVzc2FnZVxuICAgICAgICAvLyAqIGh0dHA6Ly93d3cud2hhdHdnLm9yZy9zcGVjcy93ZWItYXBwcy9jdXJyZW50LXdvcmsvbXVsdGlwYWdlL2NvbW1zLmh0bWwjY3Jvc3NEb2N1bWVudE1lc3NhZ2VzXG5cbiAgICAgICAgdmFyIG1lc3NhZ2VQcmVmaXggPSBcInNldEltbWVkaWF0ZSRcIiArIE1hdGgucmFuZG9tKCkgKyBcIiRcIjtcbiAgICAgICAgdmFyIG9uR2xvYmFsTWVzc2FnZSA9IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICBpZiAoZXZlbnQuc291cmNlID09PSBnbG9iYWwgJiZcbiAgICAgICAgICAgICAgICB0eXBlb2YgZXZlbnQuZGF0YSA9PT0gXCJzdHJpbmdcIiAmJlxuICAgICAgICAgICAgICAgIGV2ZW50LmRhdGEuaW5kZXhPZihtZXNzYWdlUHJlZml4KSA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHJ1bklmUHJlc2VudCgrZXZlbnQuZGF0YS5zbGljZShtZXNzYWdlUHJlZml4Lmxlbmd0aCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChnbG9iYWwuYWRkRXZlbnRMaXN0ZW5lcikge1xuICAgICAgICAgICAgZ2xvYmFsLmFkZEV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsIG9uR2xvYmFsTWVzc2FnZSwgZmFsc2UpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZ2xvYmFsLmF0dGFjaEV2ZW50KFwib25tZXNzYWdlXCIsIG9uR2xvYmFsTWVzc2FnZSk7XG4gICAgICAgIH1cblxuICAgICAgICByZWdpc3RlckltbWVkaWF0ZSA9IGZ1bmN0aW9uKGhhbmRsZSkge1xuICAgICAgICAgICAgZ2xvYmFsLnBvc3RNZXNzYWdlKG1lc3NhZ2VQcmVmaXggKyBoYW5kbGUsIFwiKlwiKTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpbnN0YWxsTWVzc2FnZUNoYW5uZWxJbXBsZW1lbnRhdGlvbigpIHtcbiAgICAgICAgdmFyIGNoYW5uZWwgPSBuZXcgTWVzc2FnZUNoYW5uZWwoKTtcbiAgICAgICAgY2hhbm5lbC5wb3J0MS5vbm1lc3NhZ2UgPSBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgdmFyIGhhbmRsZSA9IGV2ZW50LmRhdGE7XG4gICAgICAgICAgICBydW5JZlByZXNlbnQoaGFuZGxlKTtcbiAgICAgICAgfTtcblxuICAgICAgICByZWdpc3RlckltbWVkaWF0ZSA9IGZ1bmN0aW9uKGhhbmRsZSkge1xuICAgICAgICAgICAgY2hhbm5lbC5wb3J0Mi5wb3N0TWVzc2FnZShoYW5kbGUpO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGluc3RhbGxSZWFkeVN0YXRlQ2hhbmdlSW1wbGVtZW50YXRpb24oKSB7XG4gICAgICAgIHZhciBodG1sID0gZG9jLmRvY3VtZW50RWxlbWVudDtcbiAgICAgICAgcmVnaXN0ZXJJbW1lZGlhdGUgPSBmdW5jdGlvbihoYW5kbGUpIHtcbiAgICAgICAgICAgIC8vIENyZWF0ZSBhIDxzY3JpcHQ+IGVsZW1lbnQ7IGl0cyByZWFkeXN0YXRlY2hhbmdlIGV2ZW50IHdpbGwgYmUgZmlyZWQgYXN5bmNocm9ub3VzbHkgb25jZSBpdCBpcyBpbnNlcnRlZFxuICAgICAgICAgICAgLy8gaW50byB0aGUgZG9jdW1lbnQuIERvIHNvLCB0aHVzIHF1ZXVpbmcgdXAgdGhlIHRhc2suIFJlbWVtYmVyIHRvIGNsZWFuIHVwIG9uY2UgaXQncyBiZWVuIGNhbGxlZC5cbiAgICAgICAgICAgIHZhciBzY3JpcHQgPSBkb2MuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKTtcbiAgICAgICAgICAgIHNjcmlwdC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcnVuSWZQcmVzZW50KGhhbmRsZSk7XG4gICAgICAgICAgICAgICAgc2NyaXB0Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgaHRtbC5yZW1vdmVDaGlsZChzY3JpcHQpO1xuICAgICAgICAgICAgICAgIHNjcmlwdCA9IG51bGw7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaHRtbC5hcHBlbmRDaGlsZChzY3JpcHQpO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGluc3RhbGxTZXRUaW1lb3V0SW1wbGVtZW50YXRpb24oKSB7XG4gICAgICAgIHJlZ2lzdGVySW1tZWRpYXRlID0gZnVuY3Rpb24oaGFuZGxlKSB7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KHJ1bklmUHJlc2VudCwgMCwgaGFuZGxlKTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvLyBJZiBzdXBwb3J0ZWQsIHdlIHNob3VsZCBhdHRhY2ggdG8gdGhlIHByb3RvdHlwZSBvZiBnbG9iYWwsIHNpbmNlIHRoYXQgaXMgd2hlcmUgc2V0VGltZW91dCBldCBhbC4gbGl2ZS5cbiAgICB2YXIgYXR0YWNoVG8gPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YgJiYgT2JqZWN0LmdldFByb3RvdHlwZU9mKGdsb2JhbCk7XG4gICAgYXR0YWNoVG8gPSBhdHRhY2hUbyAmJiBhdHRhY2hUby5zZXRUaW1lb3V0ID8gYXR0YWNoVG8gOiBnbG9iYWw7XG5cbiAgICAvLyBEb24ndCBnZXQgZm9vbGVkIGJ5IGUuZy4gYnJvd3NlcmlmeSBlbnZpcm9ubWVudHMuXG4gICAgaWYgKHt9LnRvU3RyaW5nLmNhbGwoZ2xvYmFsLnByb2Nlc3MpID09PSBcIltvYmplY3QgcHJvY2Vzc11cIikge1xuICAgICAgICAvLyBGb3IgTm9kZS5qcyBiZWZvcmUgMC45XG4gICAgICAgIGluc3RhbGxOZXh0VGlja0ltcGxlbWVudGF0aW9uKCk7XG5cbiAgICB9IGVsc2UgaWYgKGNhblVzZVBvc3RNZXNzYWdlKCkpIHtcbiAgICAgICAgLy8gRm9yIG5vbi1JRTEwIG1vZGVybiBicm93c2Vyc1xuICAgICAgICBpbnN0YWxsUG9zdE1lc3NhZ2VJbXBsZW1lbnRhdGlvbigpO1xuXG4gICAgfSBlbHNlIGlmIChnbG9iYWwuTWVzc2FnZUNoYW5uZWwpIHtcbiAgICAgICAgLy8gRm9yIHdlYiB3b3JrZXJzLCB3aGVyZSBzdXBwb3J0ZWRcbiAgICAgICAgaW5zdGFsbE1lc3NhZ2VDaGFubmVsSW1wbGVtZW50YXRpb24oKTtcblxuICAgIH0gZWxzZSBpZiAoZG9jICYmIFwib25yZWFkeXN0YXRlY2hhbmdlXCIgaW4gZG9jLmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIikpIHtcbiAgICAgICAgLy8gRm9yIElFIDbigJM4XG4gICAgICAgIGluc3RhbGxSZWFkeVN0YXRlQ2hhbmdlSW1wbGVtZW50YXRpb24oKTtcblxuICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEZvciBvbGRlciBicm93c2Vyc1xuICAgICAgICBpbnN0YWxsU2V0VGltZW91dEltcGxlbWVudGF0aW9uKCk7XG4gICAgfVxuXG4gICAgYXR0YWNoVG8uc2V0SW1tZWRpYXRlID0gc2V0SW1tZWRpYXRlO1xuICAgIGF0dGFjaFRvLmNsZWFySW1tZWRpYXRlID0gY2xlYXJJbW1lZGlhdGU7XG59KHR5cGVvZiBzZWxmID09PSBcInVuZGVmaW5lZFwiID8gdHlwZW9mIGdsb2JhbCA9PT0gXCJ1bmRlZmluZWRcIiA/IHRoaXMgOiBnbG9iYWwgOiBzZWxmKSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBjOi9qZW5raW5zL3dvcmtzcGFjZS9jYW1fc2J4X2FsbF9tYXN0ZXJfc2lnbmVkL3NieC1hbGwtc2lnbmVkL25vZGVfbW9kdWxlcy9zZXRpbW1lZGlhdGUvc2V0SW1tZWRpYXRlLmpzXG4vLyBtb2R1bGUgaWQgPSA3OVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJcbi8qKlxuICogTW9kdWxlIGV4cG9ydHMuXG4gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBkZXByZWNhdGU7XG5cbi8qKlxuICogTWFyayB0aGF0IGEgbWV0aG9kIHNob3VsZCBub3QgYmUgdXNlZC5cbiAqIFJldHVybnMgYSBtb2RpZmllZCBmdW5jdGlvbiB3aGljaCB3YXJucyBvbmNlIGJ5IGRlZmF1bHQuXG4gKlxuICogSWYgYGxvY2FsU3RvcmFnZS5ub0RlcHJlY2F0aW9uID0gdHJ1ZWAgaXMgc2V0LCB0aGVuIGl0IGlzIGEgbm8tb3AuXG4gKlxuICogSWYgYGxvY2FsU3RvcmFnZS50aHJvd0RlcHJlY2F0aW9uID0gdHJ1ZWAgaXMgc2V0LCB0aGVuIGRlcHJlY2F0ZWQgZnVuY3Rpb25zXG4gKiB3aWxsIHRocm93IGFuIEVycm9yIHdoZW4gaW52b2tlZC5cbiAqXG4gKiBJZiBgbG9jYWxTdG9yYWdlLnRyYWNlRGVwcmVjYXRpb24gPSB0cnVlYCBpcyBzZXQsIHRoZW4gZGVwcmVjYXRlZCBmdW5jdGlvbnNcbiAqIHdpbGwgaW52b2tlIGBjb25zb2xlLnRyYWNlKClgIGluc3RlYWQgb2YgYGNvbnNvbGUuZXJyb3IoKWAuXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gLSB0aGUgZnVuY3Rpb24gdG8gZGVwcmVjYXRlXG4gKiBAcGFyYW0ge1N0cmluZ30gbXNnIC0gdGhlIHN0cmluZyB0byBwcmludCB0byB0aGUgY29uc29sZSB3aGVuIGBmbmAgaXMgaW52b2tlZFxuICogQHJldHVybnMge0Z1bmN0aW9ufSBhIG5ldyBcImRlcHJlY2F0ZWRcIiB2ZXJzaW9uIG9mIGBmbmBcbiAqIEBhcGkgcHVibGljXG4gKi9cblxuZnVuY3Rpb24gZGVwcmVjYXRlIChmbiwgbXNnKSB7XG4gIGlmIChjb25maWcoJ25vRGVwcmVjYXRpb24nKSkge1xuICAgIHJldHVybiBmbjtcbiAgfVxuXG4gIHZhciB3YXJuZWQgPSBmYWxzZTtcbiAgZnVuY3Rpb24gZGVwcmVjYXRlZCgpIHtcbiAgICBpZiAoIXdhcm5lZCkge1xuICAgICAgaWYgKGNvbmZpZygndGhyb3dEZXByZWNhdGlvbicpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihtc2cpO1xuICAgICAgfSBlbHNlIGlmIChjb25maWcoJ3RyYWNlRGVwcmVjYXRpb24nKSkge1xuICAgICAgICBjb25zb2xlLnRyYWNlKG1zZyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLndhcm4obXNnKTtcbiAgICAgIH1cbiAgICAgIHdhcm5lZCA9IHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9XG5cbiAgcmV0dXJuIGRlcHJlY2F0ZWQ7XG59XG5cbi8qKlxuICogQ2hlY2tzIGBsb2NhbFN0b3JhZ2VgIGZvciBib29sZWFuIHZhbHVlcyBmb3IgdGhlIGdpdmVuIGBuYW1lYC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gbmFtZVxuICogQHJldHVybnMge0Jvb2xlYW59XG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5mdW5jdGlvbiBjb25maWcgKG5hbWUpIHtcbiAgLy8gYWNjZXNzaW5nIGdsb2JhbC5sb2NhbFN0b3JhZ2UgY2FuIHRyaWdnZXIgYSBET01FeGNlcHRpb24gaW4gc2FuZGJveGVkIGlmcmFtZXNcbiAgdHJ5IHtcbiAgICBpZiAoIWdsb2JhbC5sb2NhbFN0b3JhZ2UpIHJldHVybiBmYWxzZTtcbiAgfSBjYXRjaCAoXykge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICB2YXIgdmFsID0gZ2xvYmFsLmxvY2FsU3RvcmFnZVtuYW1lXTtcbiAgaWYgKG51bGwgPT0gdmFsKSByZXR1cm4gZmFsc2U7XG4gIHJldHVybiBTdHJpbmcodmFsKS50b0xvd2VyQ2FzZSgpID09PSAndHJ1ZSc7XG59XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBjOi9qZW5raW5zL3dvcmtzcGFjZS9jYW1fc2J4X2FsbF9tYXN0ZXJfc2lnbmVkL3NieC1hbGwtc2lnbmVkL25vZGVfbW9kdWxlcy91dGlsLWRlcHJlY2F0ZS9icm93c2VyLmpzXG4vLyBtb2R1bGUgaWQgPSA4MFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvLyBDb3B5cmlnaHQgSm95ZW50LCBJbmMuIGFuZCBvdGhlciBOb2RlIGNvbnRyaWJ1dG9ycy5cbi8vXG4vLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYVxuLy8gY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZVxuLy8gXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nXG4vLyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsXG4vLyBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0XG4vLyBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGVcbi8vIGZvbGxvd2luZyBjb25kaXRpb25zOlxuLy9cbi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkXG4vLyBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbi8vXG4vLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTXG4vLyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GXG4vLyBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOXG4vLyBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSxcbi8vIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUlxuLy8gT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRVxuLy8gVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cblxuLy8gYSBwYXNzdGhyb3VnaCBzdHJlYW0uXG4vLyBiYXNpY2FsbHkganVzdCB0aGUgbW9zdCBtaW5pbWFsIHNvcnQgb2YgVHJhbnNmb3JtIHN0cmVhbS5cbi8vIEV2ZXJ5IHdyaXR0ZW4gY2h1bmsgZ2V0cyBvdXRwdXQgYXMtaXMuXG5cbid1c2Ugc3RyaWN0JztcblxubW9kdWxlLmV4cG9ydHMgPSBQYXNzVGhyb3VnaDtcblxudmFyIFRyYW5zZm9ybSA9IHJlcXVpcmUoJy4vX3N0cmVhbV90cmFuc2Zvcm0nKTtcblxuLyo8cmVwbGFjZW1lbnQ+Ki9cbnZhciB1dGlsID0gcmVxdWlyZSgnY29yZS11dGlsLWlzJyk7XG51dGlsLmluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKTtcbi8qPC9yZXBsYWNlbWVudD4qL1xuXG51dGlsLmluaGVyaXRzKFBhc3NUaHJvdWdoLCBUcmFuc2Zvcm0pO1xuXG5mdW5jdGlvbiBQYXNzVGhyb3VnaChvcHRpb25zKSB7XG4gIGlmICghKHRoaXMgaW5zdGFuY2VvZiBQYXNzVGhyb3VnaCkpIHJldHVybiBuZXcgUGFzc1Rocm91Z2gob3B0aW9ucyk7XG5cbiAgVHJhbnNmb3JtLmNhbGwodGhpcywgb3B0aW9ucyk7XG59XG5cblBhc3NUaHJvdWdoLnByb3RvdHlwZS5fdHJhbnNmb3JtID0gZnVuY3Rpb24gKGNodW5rLCBlbmNvZGluZywgY2IpIHtcbiAgY2IobnVsbCwgY2h1bmspO1xufTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBjOi9qZW5raW5zL3dvcmtzcGFjZS9jYW1fc2J4X2FsbF9tYXN0ZXJfc2lnbmVkL3NieC1hbGwtc2lnbmVkL25vZGVfbW9kdWxlcy9zdHJlYW0tYnJvd3NlcmlmeS9ub2RlX21vZHVsZXMvcmVhZGFibGUtc3RyZWFtL2xpYi9fc3RyZWFtX3Bhc3N0aHJvdWdoLmpzXG4vLyBtb2R1bGUgaWQgPSA4MVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4vbGliL19zdHJlYW1fd3JpdGFibGUuanMnKTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGM6L2plbmtpbnMvd29ya3NwYWNlL2NhbV9zYnhfYWxsX21hc3Rlcl9zaWduZWQvc2J4LWFsbC1zaWduZWQvbm9kZV9tb2R1bGVzL3N0cmVhbS1icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9yZWFkYWJsZS1zdHJlYW0vd3JpdGFibGUtYnJvd3Nlci5qc1xuLy8gbW9kdWxlIGlkID0gODJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL2xpYi9fc3RyZWFtX2R1cGxleC5qcycpO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gYzovamVua2lucy93b3Jrc3BhY2UvY2FtX3NieF9hbGxfbWFzdGVyX3NpZ25lZC9zYngtYWxsLXNpZ25lZC9ub2RlX21vZHVsZXMvc3RyZWFtLWJyb3dzZXJpZnkvbm9kZV9tb2R1bGVzL3JlYWRhYmxlLXN0cmVhbS9kdXBsZXgtYnJvd3Nlci5qc1xuLy8gbW9kdWxlIGlkID0gODNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL3JlYWRhYmxlJykuVHJhbnNmb3JtXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBjOi9qZW5raW5zL3dvcmtzcGFjZS9jYW1fc2J4X2FsbF9tYXN0ZXJfc2lnbmVkL3NieC1hbGwtc2lnbmVkL25vZGVfbW9kdWxlcy9zdHJlYW0tYnJvd3NlcmlmeS9ub2RlX21vZHVsZXMvcmVhZGFibGUtc3RyZWFtL3RyYW5zZm9ybS5qc1xuLy8gbW9kdWxlIGlkID0gODRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL3JlYWRhYmxlJykuUGFzc1Rocm91Z2hcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGM6L2plbmtpbnMvd29ya3NwYWNlL2NhbV9zYnhfYWxsX21hc3Rlcl9zaWduZWQvc2J4LWFsbC1zaWduZWQvbm9kZV9tb2R1bGVzL3N0cmVhbS1icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9yZWFkYWJsZS1zdHJlYW0vcGFzc3Rocm91Z2guanNcbi8vIG1vZHVsZSBpZCA9IDg1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImV4cG9ydCBmdW5jdGlvbiBpc09iamVjdCh2YWx1ZTogYW55KTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBPYmplY3Q7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBpc0Jvb2xlYW4odmFsdWU6IGFueSk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gXCJib29sZWFuXCI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBpc051bWJlcih2YWx1ZTogYW55KTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSBcIm51bWJlclwiO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaXNBcnJheSh2YWx1ZTogYW55KTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gQXJyYXkuaXNBcnJheSh2YWx1ZSk7XHJcbn1cclxuXHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuLi9saWIvY29tbW9uL3R5cGUtdXRpbHMudHMiLCJleHBvcnQgY29uc3QgY2hyb21lTmV3VGFiUGFnZVVybHMgPSBbXHJcbiAgICBcImh0dHBzOi8vd3d3LmJpbmcuY29tL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmFjL18vY2hyb21lL25ld3RhYlwiLFxyXG4gICAgXCJodHRwczovL3d3dy5nb29nbGUuYWQvXy9jaHJvbWUvbmV3dGFiXCIsXHJcbiAgICBcImh0dHBzOi8vd3d3Lmdvb2dsZS5hZS9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmFmL18vY2hyb21lL25ld3RhYlwiLFxyXG4gICAgXCJodHRwczovL3d3dy5nb29nbGUuYWcvXy9jaHJvbWUvbmV3dGFiXCIsXHJcbiAgICBcImh0dHBzOi8vd3d3Lmdvb2dsZS5hbC9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmFtL18vY2hyb21lL25ld3RhYlwiLFxyXG4gICAgXCJodHRwczovL3d3dy5nb29nbGUuYXMvXy9jaHJvbWUvbmV3dGFiXCIsXHJcbiAgICBcImh0dHBzOi8vd3d3Lmdvb2dsZS5hdC9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmF3L18vY2hyb21lL25ld3RhYlwiLFxyXG4gICAgXCJodHRwczovL3d3dy5nb29nbGUuYXovXy9jaHJvbWUvbmV3dGFiXCIsXHJcbiAgICBcImh0dHBzOi8vd3d3Lmdvb2dsZS5iYS9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmJlL18vY2hyb21lL25ld3RhYlwiLFxyXG4gICAgXCJodHRwczovL3d3dy5nb29nbGUuYmYvXy9jaHJvbWUvbmV3dGFiXCIsXHJcbiAgICBcImh0dHBzOi8vd3d3Lmdvb2dsZS5iZy9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmJpL18vY2hyb21lL25ld3RhYlwiLFxyXG4gICAgXCJodHRwczovL3d3dy5nb29nbGUuYmovXy9jaHJvbWUvbmV3dGFiXCIsXHJcbiAgICBcImh0dHBzOi8vd3d3Lmdvb2dsZS5ibS9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmJuL18vY2hyb21lL25ld3RhYlwiLFxyXG4gICAgXCJodHRwczovL3d3dy5nb29nbGUuYm8vXy9jaHJvbWUvbmV3dGFiXCIsXHJcbiAgICBcImh0dHBzOi8vd3d3Lmdvb2dsZS5icy9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmJ0L18vY2hyb21lL25ld3RhYlwiLFxyXG4gICAgXCJodHRwczovL3d3dy5nb29nbGUuYnkvXy9jaHJvbWUvbmV3dGFiXCIsXHJcbiAgICBcImh0dHBzOi8vd3d3Lmdvb2dsZS5jYS9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmNhdC9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmNjL18vY2hyb21lL25ld3RhYlwiLFxyXG4gICAgXCJodHRwczovL3d3dy5nb29nbGUuY2QvXy9jaHJvbWUvbmV3dGFiXCIsXHJcbiAgICBcImh0dHBzOi8vd3d3Lmdvb2dsZS5jZi9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmNnL18vY2hyb21lL25ld3RhYlwiLFxyXG4gICAgXCJodHRwczovL3d3dy5nb29nbGUuY2gvXy9jaHJvbWUvbmV3dGFiXCIsXHJcbiAgICBcImh0dHBzOi8vd3d3Lmdvb2dsZS5jaS9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmNsL18vY2hyb21lL25ld3RhYlwiLFxyXG4gICAgXCJodHRwczovL3d3dy5nb29nbGUuY20vXy9jaHJvbWUvbmV3dGFiXCIsXHJcbiAgICBcImh0dHBzOi8vd3d3Lmdvb2dsZS5jbi9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmNvLmFvL18vY2hyb21lL25ld3RhYlwiLFxyXG4gICAgXCJodHRwczovL3d3dy5nb29nbGUuY28uYncvXy9jaHJvbWUvbmV3dGFiXCIsXHJcbiAgICBcImh0dHBzOi8vd3d3Lmdvb2dsZS5jby5jay9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmNvLmNyL18vY2hyb21lL25ld3RhYlwiLFxyXG4gICAgXCJodHRwczovL3d3dy5nb29nbGUuY28uZ3kvXy9jaHJvbWUvbmV3dGFiXCIsXHJcbiAgICBcImh0dHBzOi8vd3d3Lmdvb2dsZS5jby5odS9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmNvLmlkL18vY2hyb21lL25ld3RhYlwiLFxyXG4gICAgXCJodHRwczovL3d3dy5nb29nbGUuY28uaWwvXy9jaHJvbWUvbmV3dGFiXCIsXHJcbiAgICBcImh0dHBzOi8vd3d3Lmdvb2dsZS5jby5pbS9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmNvLmluL18vY2hyb21lL25ld3RhYlwiLFxyXG4gICAgXCJodHRwczovL3d3dy5nb29nbGUuY28uamUvXy9jaHJvbWUvbmV3dGFiXCIsXHJcbiAgICBcImh0dHBzOi8vd3d3Lmdvb2dsZS5jby5qcC9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmNvLmtlL18vY2hyb21lL25ld3RhYlwiLFxyXG4gICAgXCJodHRwczovL3d3dy5nb29nbGUuY28ua3IvXy9jaHJvbWUvbmV3dGFiXCIsXHJcbiAgICBcImh0dHBzOi8vd3d3Lmdvb2dsZS5jby5scy9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmNvLm1hL18vY2hyb21lL25ld3RhYlwiLFxyXG4gICAgXCJodHRwczovL3d3dy5nb29nbGUuY28ubXovXy9jaHJvbWUvbmV3dGFiXCIsXHJcbiAgICBcImh0dHBzOi8vd3d3Lmdvb2dsZS5jby5uei9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmNvLnJzL18vY2hyb21lL25ld3RhYlwiLFxyXG4gICAgXCJodHRwczovL3d3dy5nb29nbGUuY28udGgvXy9jaHJvbWUvbmV3dGFiXCIsXHJcbiAgICBcImh0dHBzOi8vd3d3Lmdvb2dsZS5jby50ei9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmNvLnVnL18vY2hyb21lL25ld3RhYlwiLFxyXG4gICAgXCJodHRwczovL3d3dy5nb29nbGUuY28udWsvXy9jaHJvbWUvbmV3dGFiXCIsXHJcbiAgICBcImh0dHBzOi8vd3d3Lmdvb2dsZS5jby51ei9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmNvLnZlL18vY2hyb21lL25ld3RhYlwiLFxyXG4gICAgXCJodHRwczovL3d3dy5nb29nbGUuY28udmkvXy9jaHJvbWUvbmV3dGFiXCIsXHJcbiAgICBcImh0dHBzOi8vd3d3Lmdvb2dsZS5jby56YS9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmNvLnptL18vY2hyb21lL25ld3RhYlwiLFxyXG4gICAgXCJodHRwczovL3d3dy5nb29nbGUuY28uencvXy9jaHJvbWUvbmV3dGFiXCIsXHJcbiAgICBcImh0dHBzOi8vd3d3Lmdvb2dsZS5jby9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS5hZi9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS5hZy9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS5haS9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS5hci9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS5hdS9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS5iZC9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS5iaC9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS5iaS9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS5ibi9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS5iby9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS5ici9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS5ieS9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS5iei9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS5jbi9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS5jby9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS5jdS9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS5jeS9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS5kby9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS5kei9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS5lYy9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS5lZy9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS5lci9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS5ldC9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS5mai9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS5nZS9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS5naC9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS5naS9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS5ncC9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS5nci9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS5ndC9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS5neS9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS5oay9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS5odC9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS5pcS9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS5qbS9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS5qby9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS5raC9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS5rdy9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS5rei9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS5sYi9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS5sdi9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS5seS9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS5tbS9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS5tdC9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS5teC9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS5teS9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS5uYS9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS5uYy9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS5uZi9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS5uZy9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS5uaS9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS5ucC9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS5uci9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS5vbS9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS5wYS9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS5wZS9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS5wZy9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS5waC9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS5way9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS5wbC9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS5wci9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS5wcy9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS5wdC9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS5weS9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS5xYS9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS5ydS9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS5zYS9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS5zYi9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS5zZy9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS5zbC9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS5zdi9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS50ai9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS50bS9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS50bi9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS50ci9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS50dy9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS51YS9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS51eS9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS52Yy9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS52ZS9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS52bi9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmN2L18vY2hyb21lL25ld3RhYlwiLFxyXG4gICAgXCJodHRwczovL3d3dy5nb29nbGUuY3ovXy9jaHJvbWUvbmV3dGFiXCIsXHJcbiAgICBcImh0dHBzOi8vd3d3Lmdvb2dsZS5kZS9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmRqL18vY2hyb21lL25ld3RhYlwiLFxyXG4gICAgXCJodHRwczovL3d3dy5nb29nbGUuZGsvXy9jaHJvbWUvbmV3dGFiXCIsXHJcbiAgICBcImh0dHBzOi8vd3d3Lmdvb2dsZS5kbS9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmRvL18vY2hyb21lL25ld3RhYlwiLFxyXG4gICAgXCJodHRwczovL3d3dy5nb29nbGUuZHovXy9jaHJvbWUvbmV3dGFiXCIsXHJcbiAgICBcImh0dHBzOi8vd3d3Lmdvb2dsZS5lYy9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmVlL18vY2hyb21lL25ld3RhYlwiLFxyXG4gICAgXCJodHRwczovL3d3dy5nb29nbGUuZXMvXy9jaHJvbWUvbmV3dGFiXCIsXHJcbiAgICBcImh0dHBzOi8vd3d3Lmdvb2dsZS5ldS9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmZpL18vY2hyb21lL25ld3RhYlwiLFxyXG4gICAgXCJodHRwczovL3d3dy5nb29nbGUuZm0vXy9jaHJvbWUvbmV3dGFiXCIsXHJcbiAgICBcImh0dHBzOi8vd3d3Lmdvb2dsZS5mci9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmdhL18vY2hyb21lL25ld3RhYlwiLFxyXG4gICAgXCJodHRwczovL3d3dy5nb29nbGUuZ2QvXy9jaHJvbWUvbmV3dGFiXCIsXHJcbiAgICBcImh0dHBzOi8vd3d3Lmdvb2dsZS5nZS9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmdmL18vY2hyb21lL25ld3RhYlwiLFxyXG4gICAgXCJodHRwczovL3d3dy5nb29nbGUuZ2cvXy9jaHJvbWUvbmV3dGFiXCIsXHJcbiAgICBcImh0dHBzOi8vd3d3Lmdvb2dsZS5nbC9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmdtL18vY2hyb21lL25ld3RhYlwiLFxyXG4gICAgXCJodHRwczovL3d3dy5nb29nbGUuZ3AvXy9jaHJvbWUvbmV3dGFiXCIsXHJcbiAgICBcImh0dHBzOi8vd3d3Lmdvb2dsZS5nci9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmd3L18vY2hyb21lL25ld3RhYlwiLFxyXG4gICAgXCJodHRwczovL3d3dy5nb29nbGUuZ3kvXy9jaHJvbWUvbmV3dGFiXCIsXHJcbiAgICBcImh0dHBzOi8vd3d3Lmdvb2dsZS5oay9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmhuL18vY2hyb21lL25ld3RhYlwiLFxyXG4gICAgXCJodHRwczovL3d3dy5nb29nbGUuaHIvXy9jaHJvbWUvbmV3dGFiXCIsXHJcbiAgICBcImh0dHBzOi8vd3d3Lmdvb2dsZS5odC9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmh1L18vY2hyb21lL25ld3RhYlwiLFxyXG4gICAgXCJodHRwczovL3d3dy5nb29nbGUuaWUvXy9jaHJvbWUvbmV3dGFiXCIsXHJcbiAgICBcImh0dHBzOi8vd3d3Lmdvb2dsZS5pbS9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmluL18vY2hyb21lL25ld3RhYlwiLFxyXG4gICAgXCJodHRwczovL3d3dy5nb29nbGUuaW5mby9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmlvL18vY2hyb21lL25ld3RhYlwiLFxyXG4gICAgXCJodHRwczovL3d3dy5nb29nbGUuaXEvXy9jaHJvbWUvbmV3dGFiXCIsXHJcbiAgICBcImh0dHBzOi8vd3d3Lmdvb2dsZS5pcy9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLml0LmFvL18vY2hyb21lL25ld3RhYlwiLFxyXG4gICAgXCJodHRwczovL3d3dy5nb29nbGUuaXQvXy9jaHJvbWUvbmV3dGFiXCIsXHJcbiAgICBcImh0dHBzOi8vd3d3Lmdvb2dsZS5qZS9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmpvL18vY2hyb21lL25ld3RhYlwiLFxyXG4gICAgXCJodHRwczovL3d3dy5nb29nbGUuam9icy9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmpwL18vY2hyb21lL25ld3RhYlwiLFxyXG4gICAgXCJodHRwczovL3d3dy5nb29nbGUua2cvXy9jaHJvbWUvbmV3dGFiXCIsXHJcbiAgICBcImh0dHBzOi8vd3d3Lmdvb2dsZS5raS9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmttL18vY2hyb21lL25ld3RhYlwiLFxyXG4gICAgXCJodHRwczovL3d3dy5nb29nbGUua3IvXy9jaHJvbWUvbmV3dGFiXCIsXHJcbiAgICBcImh0dHBzOi8vd3d3Lmdvb2dsZS5rei9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmxhL18vY2hyb21lL25ld3RhYlwiLFxyXG4gICAgXCJodHRwczovL3d3dy5nb29nbGUubGkvXy9jaHJvbWUvbmV3dGFiXCIsXHJcbiAgICBcImh0dHBzOi8vd3d3Lmdvb2dsZS5say9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmx0L18vY2hyb21lL25ld3RhYlwiLFxyXG4gICAgXCJodHRwczovL3d3dy5nb29nbGUubHUvXy9jaHJvbWUvbmV3dGFiXCIsXHJcbiAgICBcImh0dHBzOi8vd3d3Lmdvb2dsZS5sdi9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLm1hL18vY2hyb21lL25ld3RhYlwiLFxyXG4gICAgXCJodHRwczovL3d3dy5nb29nbGUubWQvXy9jaHJvbWUvbmV3dGFiXCIsXHJcbiAgICBcImh0dHBzOi8vd3d3Lmdvb2dsZS5tZS9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLm1nL18vY2hyb21lL25ld3RhYlwiLFxyXG4gICAgXCJodHRwczovL3d3dy5nb29nbGUubWgvXy9jaHJvbWUvbmV3dGFiXCIsXHJcbiAgICBcImh0dHBzOi8vd3d3Lmdvb2dsZS5tay9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLm1sL18vY2hyb21lL25ld3RhYlwiLFxyXG4gICAgXCJodHRwczovL3d3dy5nb29nbGUubW4vXy9jaHJvbWUvbmV3dGFiXCIsXHJcbiAgICBcImh0dHBzOi8vd3d3Lmdvb2dsZS5tci9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLm1zL18vY2hyb21lL25ld3RhYlwiLFxyXG4gICAgXCJodHRwczovL3d3dy5nb29nbGUubXUvXy9jaHJvbWUvbmV3dGFiXCIsXHJcbiAgICBcImh0dHBzOi8vd3d3Lmdvb2dsZS5tdi9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLm13L18vY2hyb21lL25ld3RhYlwiLFxyXG4gICAgXCJodHRwczovL3d3dy5nb29nbGUubXgvXy9jaHJvbWUvbmV3dGFiXCIsXHJcbiAgICBcImh0dHBzOi8vd3d3Lmdvb2dsZS5uZS5qcC9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLm5lL18vY2hyb21lL25ld3RhYlwiLFxyXG4gICAgXCJodHRwczovL3d3dy5nb29nbGUubmV0L18vY2hyb21lL25ld3RhYlwiLFxyXG4gICAgXCJodHRwczovL3d3dy5nb29nbGUubmcvXy9jaHJvbWUvbmV3dGFiXCIsXHJcbiAgICBcImh0dHBzOi8vd3d3Lmdvb2dsZS5ubC9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLm5vL18vY2hyb21lL25ld3RhYlwiLFxyXG4gICAgXCJodHRwczovL3d3dy5nb29nbGUubnIvXy9jaHJvbWUvbmV3dGFiXCIsXHJcbiAgICBcImh0dHBzOi8vd3d3Lmdvb2dsZS5udS9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLm9mZi5haS9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLm9yZy9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLnBmL18vY2hyb21lL25ld3RhYlwiLFxyXG4gICAgXCJodHRwczovL3d3dy5nb29nbGUucGgvXy9jaHJvbWUvbmV3dGFiXCIsXHJcbiAgICBcImh0dHBzOi8vd3d3Lmdvb2dsZS5way9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLnBsL18vY2hyb21lL25ld3RhYlwiLFxyXG4gICAgXCJodHRwczovL3d3dy5nb29nbGUucG4vXy9jaHJvbWUvbmV3dGFiXCIsXHJcbiAgICBcImh0dHBzOi8vd3d3Lmdvb2dsZS5wcy9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLnB0L18vY2hyb21lL25ld3RhYlwiLFxyXG4gICAgXCJodHRwczovL3d3dy5nb29nbGUucWEvXy9jaHJvbWUvbmV3dGFiXCIsXHJcbiAgICBcImh0dHBzOi8vd3d3Lmdvb2dsZS5yZS9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLnJvL18vY2hyb21lL25ld3RhYlwiLFxyXG4gICAgXCJodHRwczovL3d3dy5nb29nbGUucnMvXy9jaHJvbWUvbmV3dGFiXCIsXHJcbiAgICBcImh0dHBzOi8vd3d3Lmdvb2dsZS5ydS9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLnJ3L18vY2hyb21lL25ld3RhYlwiLFxyXG4gICAgXCJodHRwczovL3d3dy5nb29nbGUuc2MvXy9jaHJvbWUvbmV3dGFiXCIsXHJcbiAgICBcImh0dHBzOi8vd3d3Lmdvb2dsZS5zZS9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLnNnL18vY2hyb21lL25ld3RhYlwiLFxyXG4gICAgXCJodHRwczovL3d3dy5nb29nbGUuc2gvXy9jaHJvbWUvbmV3dGFiXCIsXHJcbiAgICBcImh0dHBzOi8vd3d3Lmdvb2dsZS5zaS9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLnNrL18vY2hyb21lL25ld3RhYlwiLFxyXG4gICAgXCJodHRwczovL3d3dy5nb29nbGUuc2wvXy9jaHJvbWUvbmV3dGFiXCIsXHJcbiAgICBcImh0dHBzOi8vd3d3Lmdvb2dsZS5zbS9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLnNuL18vY2hyb21lL25ld3RhYlwiLFxyXG4gICAgXCJodHRwczovL3d3dy5nb29nbGUuc28vXy9jaHJvbWUvbmV3dGFiXCIsXHJcbiAgICBcImh0dHBzOi8vd3d3Lmdvb2dsZS5zci9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLnN0L18vY2hyb21lL25ld3RhYlwiLFxyXG4gICAgXCJodHRwczovL3d3dy5nb29nbGUuc3ovXy9jaHJvbWUvbmV3dGFiXCIsXHJcbiAgICBcImh0dHBzOi8vd3d3Lmdvb2dsZS50ZC9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLnRlbC9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLnRnL18vY2hyb21lL25ld3RhYlwiLFxyXG4gICAgXCJodHRwczovL3d3dy5nb29nbGUudGsvXy9jaHJvbWUvbmV3dGFiXCIsXHJcbiAgICBcImh0dHBzOi8vd3d3Lmdvb2dsZS50bC9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLnRtL18vY2hyb21lL25ld3RhYlwiLFxyXG4gICAgXCJodHRwczovL3d3dy5nb29nbGUudG4vXy9jaHJvbWUvbmV3dGFiXCIsXHJcbiAgICBcImh0dHBzOi8vd3d3Lmdvb2dsZS50by9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLnR0L18vY2hyb21lL25ld3RhYlwiLFxyXG4gICAgXCJodHRwczovL3d3dy5nb29nbGUudHcvXy9jaHJvbWUvbmV3dGFiXCIsXHJcbiAgICBcImh0dHBzOi8vd3d3Lmdvb2dsZS51YS9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLnVzL18vY2hyb21lL25ld3RhYlwiLFxyXG4gICAgXCJodHRwczovL3d3dy5nb29nbGUudXovXy9jaHJvbWUvbmV3dGFiXCIsXHJcbiAgICBcImh0dHBzOi8vd3d3Lmdvb2dsZS52Zy9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLnZuL18vY2hyb21lL25ld3RhYlwiLFxyXG4gICAgXCJodHRwczovL3d3dy5nb29nbGUudnUvXy9jaHJvbWUvbmV3dGFiXCIsXHJcbiAgICBcImh0dHBzOi8vd3d3Lmdvb2dsZS53cy9fL2Nocm9tZS9uZXd0YWJcIixcclxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLnl0L18vY2hyb21lL25ld3RhYlwiLFxyXG5dO1xyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9jaHJvbWUtbmV3LXRhYi11cmxzLnRzIiwiLy8gQ29weXJpZ2h0IChjKSAyMDE4IEJyb21pdW0sIEluYy5cclxuLy8gVXNlIG9mIHRoZSBCcm9taXVtLCBJbmMuIHNvZnR3YXJlIHJlcXVpcmVzIGEgbGljZW5zZSBhZ3JlZW1lbnQgd2l0aCBCcm9taXVtLCBJbmMuIG9yIGFuIGF1dGhvcml6ZWQgcmVzZWxsZXIuXHJcblxyXG4vLy8gPHJlZmVyZW5jZSB0eXBlcz1cImNocm9tZVwiLz5cclxuaW1wb3J0IHsgY3VycmVudERhdGVUaW1lU3RyaW5nIH0gZnJvbSBcIi4vZGF0ZS11dGlsc1wiO1xyXG5pbXBvcnQgeyBUYWJTdGFsa2VyIH0gZnJvbSBcIi4vdGFiLXN0YWxrZXJcIjtcclxuaW1wb3J0IHsgV2ViUmVxdWVzdExpc3RlbmVyIH0gZnJvbSBcIi4vd2ViLXJlcXVlc3QtbGlzdGVuZXJcIjtcclxuaW1wb3J0IHsgQ29uZmlnIH0gZnJvbSBcIi4vY29uZmlnXCI7XHJcbmltcG9ydCB7IFVSTCB9IGZyb20gXCIuL3VybC11dGlsc1wiO1xyXG5pbXBvcnQgeyBNYXliZSwgc29tZSB9IGZyb20gXCIuL21heWJlXCI7XHJcbmltcG9ydCB7IGRvT25jZSB9IGZyb20gXCIuL29uY2VcIjtcclxuaW1wb3J0IHsgR2VuZXJpY01lc3NhZ2VSb3V0ZXIgfSBmcm9tIFwiLi9tZXNzYWdlLXJvdXRlclwiO1xyXG5pbXBvcnQgeyBsb2csIGxvZ0Vycm9yLCBsb2dnZXIgfSBmcm9tIFwiLi9sb2dcIjtcclxuaW1wb3J0IHsgVHJ1c3RlZFVybFRyYWNrZXIgfSBmcm9tIFwiLi90cnVzdGVkLXVybC10cmFja2VyXCI7XHJcbmltcG9ydCB7IFBsYWNlbWVudE1hbmFnZXIgfSBmcm9tIFwiLi9wbGFjZW1lbnQtbWFuYWdlclwiO1xyXG5pbXBvcnQgeyBCbG9ja2VkUGFnZUNvbnRyb2xsZXIsIEJyb3dzZXJMYXVuY2hlciB9IGZyb20gXCIuL2Jsb2NrZWQtcGFnZS1jb250cm9sbGVyXCI7XHJcbmltcG9ydCB7IERvd25sb2FkVHJhY2tlcn0gZnJvbSBcIi4vZG93bmxvYWQtdHJhY2tlclwiO1xyXG5pbXBvcnQgeyBDb25maWdOb3RpZmllciB9IGZyb20gXCIuL2NvbmZpZy1ub3RpZmllclwiO1xyXG5pbXBvcnQgeyBDb25maWdVcGRhdGVyIH0gZnJvbSBcIi4vY29uZmlnLXVwZGF0ZXJcIjtcclxuaW1wb3J0IHsgUGhpc2hpbmdOYXZTZXF1ZW5jZURldGVjdG9yIH0gZnJvbSBcIi4vbmF2LXNlcXVlbmNlLWRldGVjdG9yXCI7XHJcbmltcG9ydCB7IEVycm9ySGFuZGxlciB9IGZyb20gXCIuL2Vycm9yLWhhbmRsZXJcIjtcclxuaW1wb3J0IHsgQ2hyYWdFcnJvciB9IGZyb20gXCIuL2Vycm9yc1wiO1xyXG5pbXBvcnQgeyBNZXNzYWdlVHlwZSB9IGZyb20gXCIuL21lc3NhZ2UtdHlwZXNcIjtcclxuaW1wb3J0IHsgRXh0ZXJuYWxBcHBMaW5rQ29udHJvbGxlciB9IGZyb20gXCIuL2V4dGVybmFsLWFwcC1saW5rLWNvbnRyb2xsZXJcIjtcclxuaW1wb3J0IHsgVGFiSWQgfSBmcm9tIFwiLi9jb21tb24tdHlwZXNcIjtcclxuaW1wb3J0IHsgRmlsZVVybFRyYWNrZXIgfSBmcm9tIFwiLi9maWxlLXVybC10cmFja2VyXCI7XHJcbmltcG9ydCB7IEZpbGVCbG9ja2VyIH0gZnJvbSBcIi4vZmlsZS1ibG9ja2VyXCI7XHJcbmltcG9ydCB7IFBvcHVwQ29udHJvbGxlciB9IGZyb20gXCIuL3BvcHVwLXBhZ2UtY29udHJvbGxlclwiO1xyXG5pbXBvcnQgeyBnZXRDdXJyZW50QnJvd3NlciwgQnJvd3NlciwgaXMzMmJpdEZpcmVmb3ggfSBmcm9tIFwiLi9icm93c2VyXCI7XHJcbmltcG9ydCB7IEZlYXR1cmVNYW5hZ2VyIH0gZnJvbSBcIi4vZmVhdHVyZS1tYW5hZ2VyXCI7XHJcbmltcG9ydCB7IEhlYXJ0YmVhdENvbnRyb2xsZXIgfSBmcm9tIFwiLi9oZWFydGJlYXRcIjtcclxuaW1wb3J0IHsgT3B0aW9uc0NvbnRyb2xsZXIgfSBmcm9tIFwiLi9vcHRpb25zLXBhZ2UtY29udHJvbGxlclwiO1xyXG5pbXBvcnQgeyBPbkNvbmZpZ3VyZWRNYW5hZ2VyIH0gZnJvbSBcIi4vb24tY29uZmlndXJlZFwiO1xyXG5pbXBvcnQgeyBOZXdUYWJQYWdlVXJsVHJhY2tlciB9IGZyb20gXCIuL25ldy10YWItcGFnZS11cmwtdHJhY2tlclwiO1xyXG5pbXBvcnQgeyBIZWxwZXJQb3J0Q2hhbm5lbCB9IGZyb20gXCIuL2hvc3QtaGVscGVyLWNoYW5uZWxcIjtcclxuaW1wb3J0IHsgSGVscGVyTG9nU2luaywgTWVzc2FnZUxvZ2dlciB9IGZyb20gXCIuL2xvZ2dlclwiO1xyXG5pbXBvcnQgeyBDb250ZXh0TWVudU1hbmFnZXIgfSBmcm9tIFwiLi9jb250ZXh0LW1lbnVzXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgRXZlbnRQYWdlTGlzdGVuZXIge1xyXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBjb25maWc6IENvbmZpZykge1xyXG4gICAgICAgIC8vIEdldCB0aGUgYnJvd3NlciB0aGF0IHRoZSBleHRlbnNpb24gaXMgbG9hZGVkIGluLlxyXG4gICAgICAgIC8vIFNvbWUgY2xhc3NlcyBoYXZlIGRpZmZlcmVudCBiZWhhdmlvdXIgaW4gZGlmZmVyZW50IGJyb3dzZXJzLlxyXG4gICAgICAgIGNvbnN0IGJyb3dzZXIgPSBnZXRDdXJyZW50QnJvd3NlcigpO1xyXG5cclxuICAgICAgICBjb25zdCBjb25maWdOb3RpZmllciA9IG5ldyBDb25maWdOb3RpZmllcih0aGlzLmNvbmZpZyk7XHJcbiAgICAgICAgY29uc3QgbWVzc2FnZVJvdXRlciA9IG5ldyBHZW5lcmljTWVzc2FnZVJvdXRlcigpO1xyXG4gICAgICAgIG1lc3NhZ2VSb3V0ZXIucmVnaXN0ZXJNZXNzYWdlSGFuZGxlcihNZXNzYWdlVHlwZS5lZGdlQWNrVjEwLCAoKSA9PiB7fSk7XHJcbiAgICAgICAgY29uc3Qgb25Db25maWd1cmVkTWFuYWdlciA9IG5ldyBPbkNvbmZpZ3VyZWRNYW5hZ2VyKCk7XHJcbiAgICAgICAgY29uc3QgZXJyb3JIYW5kbGVyID0gbmV3IEVycm9ySGFuZGxlcihicm93c2VyLCBtZXNzYWdlUm91dGVyLCBjb25maWdOb3RpZmllciwgb25Db25maWd1cmVkTWFuYWdlcik7XHJcbiAgICAgICAgY29uc3QgaG9zdEhlbHBlckNoYW5uZWwgPSBuZXcgSGVscGVyUG9ydENoYW5uZWwoZXJyb3JIYW5kbGVyLCBtZXNzYWdlUm91dGVyKTtcclxuICAgICAgICBjb25zdCBtZXNzYWdlU2VuZGVyID0gaG9zdEhlbHBlckNoYW5uZWwubWVzc2FnZVNlbmRlcjtcclxuICAgICAgICBlcnJvckhhbmRsZXIuc2V0dXAobWVzc2FnZVNlbmRlciwgaG9zdEhlbHBlckNoYW5uZWwsIGhvc3RIZWxwZXJDaGFubmVsLCAoKSA9PiBob3N0SGVscGVyQ2hhbm5lbC5yZWNvbm5lY3QoKSk7XHJcbiAgICAgICAgbG9nZ2VyLmFkZFNpbmsobmV3IEhlbHBlckxvZ1NpbmsobWVzc2FnZVNlbmRlcikpO1xyXG4gICAgICAgIG5ldyBNZXNzYWdlTG9nZ2VyKG1lc3NhZ2VSb3V0ZXIsIGhvc3RIZWxwZXJDaGFubmVsKTtcclxuICAgICAgICBuZXcgSGVhcnRiZWF0Q29udHJvbGxlcihlcnJvckhhbmRsZXIsIG1lc3NhZ2VTZW5kZXIsIG1lc3NhZ2VSb3V0ZXIsIGhvc3RIZWxwZXJDaGFubmVsKTtcclxuICAgICAgICBuZXcgQ29uZmlnVXBkYXRlcih0aGlzLmNvbmZpZywgY29uZmlnTm90aWZpZXIsIG1lc3NhZ2VTZW5kZXIsIG1lc3NhZ2VSb3V0ZXIsIGhvc3RIZWxwZXJDaGFubmVsLCBvbkNvbmZpZ3VyZWRNYW5hZ2VyKTtcclxuICAgICAgICBjb25zdCBmZWF0dXJlTWFuYWdlciA9IG5ldyBGZWF0dXJlTWFuYWdlcihtZXNzYWdlUm91dGVyLCBtZXNzYWdlU2VuZGVyLCBob3N0SGVscGVyQ2hhbm5lbCwgY29uZmlnTm90aWZpZXIsIG9uQ29uZmlndXJlZE1hbmFnZXIpO1xyXG4gICAgICAgIGNvbnN0IHRhYlN0YWxrZXIgPSBuZXcgVGFiU3RhbGtlcihicm93c2VyKTtcclxuICAgICAgICBjb25zdCB0cnVzdGVkVXJsVHJhY2tlciA9IG5ldyBUcnVzdGVkVXJsVHJhY2tlcihjb25maWdOb3RpZmllciwgbWVzc2FnZVNlbmRlcik7XHJcbiAgICAgICAgY29uc3QgZmlsZVVybFRyYWNrZXIgPSBuZXcgRmlsZVVybFRyYWNrZXIobWVzc2FnZVJvdXRlciwgbWVzc2FnZVNlbmRlciwgYnJvd3Nlcik7XHJcbiAgICAgICAgY29uc3QgbmV3VGFiUGFnZVVybFRyYWNrZXIgPSBuZXcgTmV3VGFiUGFnZVVybFRyYWNrZXIoY29uZmlnTm90aWZpZXIsIGJyb3dzZXIpO1xyXG4gICAgICAgIGNvbnN0IHBsYWNlbWVudE1hbmFnZXIgPSBuZXcgUGxhY2VtZW50TWFuYWdlcih0cnVzdGVkVXJsVHJhY2tlciwgZmlsZVVybFRyYWNrZXIsIG5ld1RhYlBhZ2VVcmxUcmFja2VyLCBjb25maWdOb3RpZmllcik7XHJcbiAgICAgICAgY29uc3QgYnJvd3NlckxhdW5jaGVyID0gbmV3IEJyb3dzZXJMYXVuY2hlcihtZXNzYWdlUm91dGVyLCBtZXNzYWdlU2VuZGVyLCBob3N0SGVscGVyQ2hhbm5lbCk7XHJcbiAgICAgICAgYnJvd3NlckxhdW5jaGVyLnJlZ2lzdGVyRXZlbnRIYW5kbGVyKGV2ZW50ID0+IGVycm9ySGFuZGxlci5vbkJyb3dzZXJMYXVuY2hFdmVudChldmVudCkpO1xyXG4gICAgICAgIGNvbnN0IGNvbnRleHRNZW51TWFuYWdlciA9IG5ldyBDb250ZXh0TWVudU1hbmFnZXIoYnJvd3NlckxhdW5jaGVyLCBwbGFjZW1lbnRNYW5hZ2VyLCBlcnJvckhhbmRsZXIsIGNvbmZpZ05vdGlmaWVyKTtcclxuICAgICAgICBjb25zdCBibG9ja2VkUGFnZUNvbnRyb2xsZXIgPSBuZXcgQmxvY2tlZFBhZ2VDb250cm9sbGVyKGJyb3dzZXIsIHRydXN0ZWRVcmxUcmFja2VyLCBicm93c2VyTGF1bmNoZXIsIGNvbmZpZ05vdGlmaWVyLCBob3N0SGVscGVyQ2hhbm5lbCwgb25Db25maWd1cmVkTWFuYWdlciwgbWVzc2FnZVNlbmRlcik7XHJcbiAgICAgICAgY29uc3QgZmlsZUJsb2NrZXIgPSBuZXcgRmlsZUJsb2NrZXIoYnJvd3NlciwgZmlsZVVybFRyYWNrZXIsIGJyb3dzZXJMYXVuY2hlciwgb25Db25maWd1cmVkTWFuYWdlcik7XHJcbiAgICAgICAgY29uc3QgYmxvY2tMaW5rID0gKGxpbmtVUkw6IE1heWJlPFVSTD4sIHRhYklkOiBUYWJJZCkgPT4gYmxvY2tlZFBhZ2VDb250cm9sbGVyLmJsb2NrTGluayhsaW5rVVJMLCB0YWJJZCk7XHJcbiAgICAgICAgY29uc3QgZXh0ZXJuYWxBcHBMaW5rQ29udHJvbGxlciA9IG5ldyBFeHRlcm5hbEFwcExpbmtDb250cm9sbGVyKGJyb3dzZXIsIGJsb2NrTGluaywgb25Db25maWd1cmVkTWFuYWdlciwgZXJyb3JIYW5kbGVyKTtcclxuICAgICAgICBuZXcgUG9wdXBDb250cm9sbGVyKG1lc3NhZ2VTZW5kZXIsIGNvbmZpZ05vdGlmaWVyLCBlcnJvckhhbmRsZXIsIGZlYXR1cmVNYW5hZ2VyLCBob3N0SGVscGVyQ2hhbm5lbCk7XHJcbiAgICAgICAgbmV3IE9wdGlvbnNDb250cm9sbGVyKG1lc3NhZ2VTZW5kZXIsIGNvbmZpZ05vdGlmaWVyLCBob3N0SGVscGVyQ2hhbm5lbCk7XHJcbiAgICAgICAgY29uc3QgcGhpc2hpbmdOYXZTZXF1ZW5jZURldGVjdG9yID0gbmV3IFBoaXNoaW5nTmF2U2VxdWVuY2VEZXRlY3Rvcihicm93c2VyLCBjb25maWdOb3RpZmllciwgdGFiU3RhbGtlcik7XHJcbiAgICAgICAgY29uc3QgZG93bmxvYWRUcmFja2VyID0gbmV3IERvd25sb2FkVHJhY2tlcihicm93c2VyLCBtZXNzYWdlU2VuZGVyLCBob3N0SGVscGVyQ2hhbm5lbCwgZmVhdHVyZU1hbmFnZXIsIGVycm9ySGFuZGxlcik7XHJcbiAgICAgICAgY29uc3Qgd2ViUmVxdWVzdExpc3RlbmVyID0gbmV3IFdlYlJlcXVlc3RMaXN0ZW5lcihcclxuICAgICAgICAgICAgYnJvd3NlciwgY29uZmlnTm90aWZpZXIsIHRhYlN0YWxrZXIsXHJcbiAgICAgICAgICAgIHBsYWNlbWVudE1hbmFnZXIsXHJcbiAgICAgICAgICAgIGJsb2NrZWRQYWdlQ29udHJvbGxlciwgZmlsZUJsb2NrZXIsXHJcbiAgICAgICAgICAgIGJyb3dzZXJMYXVuY2hlciwgcGhpc2hpbmdOYXZTZXF1ZW5jZURldGVjdG9yLFxyXG4gICAgICAgICAgICBleHRlcm5hbEFwcExpbmtDb250cm9sbGVyLCBmZWF0dXJlTWFuYWdlcixcclxuICAgICAgICAgICAgb25Db25maWd1cmVkTWFuYWdlciwgZXJyb3JIYW5kbGVyKTtcclxuICAgICAgICBjb25zdCByZWdpc3Rlckxpc3RlbmVycyA9IGRvT25jZSgoKSA9PiB7XHJcbiAgICAgICAgICAgIGNocm9tZS5ydW50aW1lLm9uSW5zdGFsbGVkLmFkZExpc3RlbmVyKHRoaXMub25JbnN0YWxsZWQuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgICAgIGNocm9tZS5ydW50aW1lLm9uVXBkYXRlQXZhaWxhYmxlLmFkZExpc3RlbmVyKHRoaXMub25VcGRhdGVBdmFpbGFibGUuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgICAgIGNvbnRleHRNZW51TWFuYWdlci5yZWdpc3Rlckxpc3RlbmVycygpO1xyXG4gICAgICAgICAgICBob3N0SGVscGVyQ2hhbm5lbC5jb25uZWN0KCk7XHJcbiAgICAgICAgICAgIHRhYlN0YWxrZXIucmVnaXN0ZXJMaXN0ZW5lcnMoKTtcclxuICAgICAgICAgICAgZG93bmxvYWRUcmFja2VyLnJlZ2lzdGVyTGlzdGVuZXJzKCk7XHJcbiAgICAgICAgICAgIHdlYlJlcXVlc3RMaXN0ZW5lci5yZWdpc3Rlckxpc3RlbmVycygpO1xyXG4gICAgICAgICAgICAvLyBPbmNlIHdlJ3ZlIHJlZ2lzdGVyZWQgYWxsIHRoZSBsaXN0ZW5lcnMgdGhlbiBnZXQgdGhlIGluaXRhbCAocmVzdG9yZWQgc2Vzc2lvbikgdGFicy5cclxuICAgICAgICAgICAgLy8gVGhpcyBhdm9pZHMgYSBwb3RlbnRpYWwgcmFjZSB3aGVyZSB0YWJzIGNoYW5nZSBhZnRlciB3ZSd2ZSBxdWVyaWVkIHRoZSBpbml0YWwgdGFic1xyXG4gICAgICAgICAgICAvLyBidXQgYmVmb3JlIG91dCBsaXN0ZW5lcnMgb3VyIHJlZ2lzdGVkIHRvIHVwZGF0ZSB1cyBhYm91dCBjaGFuZ2VzLiBTZWUgS1JZLTQ3NzYzLlxyXG4gICAgICAgICAgICB0YWJTdGFsa2VyLnF1ZXJ5UmVzdG9yZWRTZXNzaW9uVGFicygpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBMb2cgaGVyZSByYXRoZXIgdGhhbiBhZnRlciB0aGUgY2FsbCB8Z2V0Q3VycmVudEJyb3dzZXIoKXwgc28gdGhhdCB8SGVscGVyTG9nU2lua3wgaGFzIGJlZW4gY29uc3RydWN0ZWQuXHJcbiAgICAgICAgaWYgKHNvbWUoYnJvd3NlcikpIHtcclxuICAgICAgICAgICAgbG9nKGBUaGUgY3VycmVudCBicm93c2VyIGlzICR7QnJvd3Nlclticm93c2VyXX0gd2l0aCB1c2VyQWdlbnQgXCIke25hdmlnYXRvci51c2VyQWdlbnR9XCJgKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBsb2dFcnJvcihuZXcgRXJyb3IoXCJVbmFibGUgdG8gd29yayBvdXQgdGhlIGN1cnJlbnQgYnJvd3NlclwiKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsb2coYEV2ZW50UGFnZUxpc3RlbmVyIGNvbnN0cnVjdGVkIGZvciBleHRlbnNpb24gdmVyc2lvbjogJHtjaHJvbWUucnVudGltZS5nZXRNYW5pZmVzdCgpLnZlcnNpb259YCk7XHJcbiAgICAgICAgcmVnaXN0ZXJMaXN0ZW5lcnMoKTtcclxuXHJcbiAgICAgICAgaWYgKGJyb3dzZXIgPT0gQnJvd3Nlci5maXJlZm94ICYmIGlzMzJiaXRGaXJlZm94KCkpIHtcclxuICAgICAgICAgICAgZXJyb3JIYW5kbGVyLnJhaXNlRXJyb3IoQ2hyYWdFcnJvci5pczMyYml0RmlyZWZveCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIEhhdmUgb25JbnN0YWxsZWQgbGlzdGVuZXIgc28gdGhhdCB3ZSBsb2cgd2hlbiB0aGUgZXh0ZW5zaW9uIGhhcyB1cGRhdGVkLlxyXG4gICAgb25JbnN0YWxsZWQoZGV0YWlsczogY2hyb21lLnJ1bnRpbWUuSW5zdGFsbGVkRGV0YWlscyk6IHZvaWQge1xyXG4gICAgICAgIGxvZyhgb25JbnN0YWxsZWQoJHtKU09OLnN0cmluZ2lmeShkZXRhaWxzKX0pYCk7XHJcbiAgICAgICAgbG9nKGBvbkluc3RhbGxlZDogJHtjdXJyZW50RGF0ZVRpbWVTdHJpbmcoKX1gKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBCeSBoYXZpbmcgYW4gb25VcGRhdGVBdmFpbGFibGUgbGlzdGVuZXIgdGhlIGV4dGVuc2lvbiB3b24ndCB1cGRhdGUgYXMgc29vblxyXG4gICAgLy8gYXMgdGhlIHVwZGF0ZSBpcyBhdmFpbGFibGUsIGl0IHdpbGwgaW5zdGVhZCB3YWl0IHVudGlsIHRoZSBicm93c2VyIHJlc3RhcnRzLlxyXG4gICAgb25VcGRhdGVBdmFpbGFibGUoZGV0YWlsczogY2hyb21lLnJ1bnRpbWUuVXBkYXRlQXZhaWxhYmxlRGV0YWlscyk6IHZvaWQge1xyXG4gICAgICAgIGxvZyhgb25VcGRhdGVBdmFpbGFibGUoJHtKU09OLnN0cmluZ2lmeShkZXRhaWxzKX0pYCk7XHJcbiAgICAgICAgbG9nKGBvblVwZGF0ZUF2YWlsYWJsZTogJHtjdXJyZW50RGF0ZVRpbWVTdHJpbmcoKX1gKTtcclxuICAgIH1cclxufVxyXG5cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vZXZlbnQtcGFnZS1saXN0ZW5lci50cyIsImltcG9ydCB7IE1heWJlLCBzb21lLCBub25lIH0gZnJvbSBcIi4vbWF5YmVcIjtcclxuaW1wb3J0IHsgbWF5YmVGaXJzdCB9IGZyb20gXCIuL2FycmF5LXV0aWxzXCI7XHJcbmltcG9ydCB7IFRyZWUsIENoYXJDb2RlLCBJU3RyZWFtLCBtYWtlU3RyaW5nU3RyZWFtLCBWYWx1ZVN0cmVhbU1hdGNoZXIsIG1hdGNoQ2hhckNvZGUsIG1hdGNoQ2hhciwgbWF0Y2hDaGFycywgbWF0Y2hDaGFyQ29kZVJhbmdlLCBtYXRjaENoYXJSYW5nZSwgbWF0Y2hDaGFyU2V0LCBtYXRjaE5vdENoYXIsIG1hdGNoQW5kQ2hhciwgbWF0Y2hTdHJlYW0sIG1hdGNoQ2hhclNlcSwgbWF0Y2hTZXEsIG1hdGNoTWF5YmUsIG1hdGNoQXRMZWFzdE9uY2UsIG1hdGNoUmVwZWF0LCBtYXRjaEFsdCwgbWF0Y2hUcmVlLCBtYXRjaFRyZWVGbGF0dGVuLCBUcmVlU3RyZWFtTWF0Y2hlciB9IGZyb20gXCIuL3BhcnNlci11dGlsc1wiO1xyXG5pbXBvcnQgeyBwYXJzZU51bWJlciB9IGZyb20gXCIuL251bWJlci11dGlsc1wiO1xyXG5cclxuLy8gUmVmZXIgdG8gUkZDIDI2MTZcclxuZXhwb3J0IGNvbnN0IGNoYXJMZXhlcnMgPSAoKCkgPT4ge1xyXG4gICAgY29uc3Qgb2N0ZXQgPSBtYXRjaENoYXJDb2RlUmFuZ2UoMCwgMjU1KTtcclxuICAgIGNvbnN0IGNoYXIgPSAgbWF0Y2hDaGFyQ29kZVJhbmdlKDAsIDEyNyk7XHJcbiAgICBjb25zdCB1cGFscGhhID0gbWF0Y2hDaGFyUmFuZ2UoJ0EnLCAnWicpO1xyXG4gICAgY29uc3QgbG9hbHBoYSA9IG1hdGNoQ2hhclJhbmdlKCdhJywgJ3onKTtcclxuICAgIGNvbnN0IGRpZ2l0ID0gbWF0Y2hDaGFyUmFuZ2UoJzAnLCAnOScpO1xyXG4gICAgY29uc3QgY3RsID0gbWF0Y2hDaGFyU2V0KFxyXG4gICAgICAgIG1hdGNoQ2hhckNvZGVSYW5nZSgwLCAzMSksXHJcbiAgICAgICAgbWF0Y2hDaGFyQ29kZSgxMjcpKTtcclxuICAgIGNvbnN0IGNyID0gbWF0Y2hDaGFyQ29kZSgxMyk7XHJcbiAgICBjb25zdCBsZiA9IG1hdGNoQ2hhckNvZGUoMTApO1xyXG4gICAgY29uc3Qgc3AgPSBtYXRjaENoYXJDb2RlKDMyKTtcclxuICAgIGNvbnN0IGh0ID0gbWF0Y2hDaGFyQ29kZSg5KTtcclxuICAgIGNvbnN0IGRvdWJsZVF1b3RlID0gbWF0Y2hDaGFyQ29kZSgzNCk7XHJcbiAgICBjb25zdCBjcmxmID0gbWF0Y2hDaGFyU2VxKGNyLCBsZik7XHJcbiAgICBjb25zdCBsd3MgPSBtYXRjaFNlcShcclxuICAgICAgICBtYXRjaE1heWJlKGNybGYpLFxyXG4gICAgICAgIG1hdGNoQXRMZWFzdE9uY2UobWF0Y2hTdHJlYW0obWF0Y2hDaGFyU2V0KHNwLCBodCkpKSk7XHJcbiAgICBjb25zdCBub25XaGl0ZXNwYWNlVGV4dCA9IG1hdGNoU3RyZWFtKG1hdGNoQW5kQ2hhcihcclxuICAgICAgICBvY3RldCxcclxuICAgICAgICBtYXRjaE5vdENoYXIoY3RsKSkpO1xyXG4gICAgY29uc3QgdGV4dCA9IG1hdGNoQXRMZWFzdE9uY2UobWF0Y2hBbHQoXHJcbiAgICAgICAgbm9uV2hpdGVzcGFjZVRleHQsXHJcbiAgICAgICAgbHdzKSk7XHJcbiAgICBjb25zdCBoZXggPSBtYXRjaENoYXJTZXQoXHJcbiAgICAgICAgbWF0Y2hDaGFyUmFuZ2UoJ0EnLCAnRicpLFxyXG4gICAgICAgIG1hdGNoQ2hhclJhbmdlKCdhJywgJ2YnKSxcclxuICAgICAgICBkaWdpdCk7XHJcbiAgICBjb25zdCBzZXBhcmF0b3JzID0gbWF0Y2hDaGFyU2V0KFxyXG4gICAgICAgIG1hdGNoQ2hhcnMoJygnLCAnKScsICc8JywgJz4nLCAnQCcsICcsJywgJzsnLCAnOicsICdcXFxcJywgJ1wiJywgJy8nLCAnWycsICddJywgJz8nLCAnPScsICd7JywgJ30nKSxcclxuICAgICAgICBzcCxcclxuICAgICAgICBodCk7XHJcbiAgICBjb25zdCB0b2tlbiA9IG1hdGNoQXRMZWFzdE9uY2UobWF0Y2hTdHJlYW0oXHJcbiAgICAgICAgbWF0Y2hBbmRDaGFyKFxyXG4gICAgICAgICAgICBjaGFyLFxyXG4gICAgICAgICAgICBtYXRjaE5vdENoYXIoY3RsKSxcclxuICAgICAgICBtYXRjaE5vdENoYXIoc2VwYXJhdG9ycykpKSk7XHJcbiAgICBjb25zdCBub25XaGl0ZXNwYWNlTm9uUGFyZW5zID0gbWF0Y2hTdHJlYW0obWF0Y2hBbmRDaGFyKFxyXG4gICAgICAgIG9jdGV0LFxyXG4gICAgICAgIG1hdGNoTm90Q2hhcihjdGwpLFxyXG4gICAgICAgIG1hdGNoTm90Q2hhcihtYXRjaENoYXJzKCcoJywgJyknKSkpKTtcclxuICAgIGNvbnN0IGN0ZXh0ID0gbWF0Y2hBdExlYXN0T25jZShtYXRjaEFsdChcclxuICAgICAgICBub25XaGl0ZXNwYWNlTm9uUGFyZW5zLFxyXG4gICAgICAgIGx3cykpO1xyXG4gICAgY29uc3QgcXVvdGVkUGFpciA9IG1hdGNoQ2hhclNlcShcclxuICAgICAgICBtYXRjaENoYXIoJ1xcXFwnKSxcclxuICAgICAgICBjaGFyKTtcclxuICAgIGxldCBjb21tZW50OiBWYWx1ZVN0cmVhbU1hdGNoZXI8Q2hhckNvZGU+O1xyXG4gICAgY29uc3QgbWF0Y2hDb21tZW50ID0gKHN0cmVhbTogSVN0cmVhbTxDaGFyQ29kZT4pID0+IHtcclxuICAgICAgICByZXR1cm4gY29tbWVudChzdHJlYW0pO1xyXG4gICAgfTtcclxuICAgIGNvbW1lbnQgPSBtYXRjaFNlcShcclxuICAgICAgICBtYXRjaFN0cmVhbShtYXRjaENoYXIoJygnKSksXHJcbiAgICAgICAgbWF0Y2hSZXBlYXQobWF0Y2hBbHQoXHJcbiAgICAgICAgICAgIGN0ZXh0LFxyXG4gICAgICAgICAgICBxdW90ZWRQYWlyLFxyXG4gICAgICAgICAgICBtYXRjaENvbW1lbnQpKSxcclxuICAgICAgICBtYXRjaFN0cmVhbShtYXRjaENoYXIoJyknKSkpO1xyXG4gICAgY29uc3Qgbm9uV2hpdGVzcGFjZU5vblF1b3RlZFRleHQgPSBtYXRjaFN0cmVhbShtYXRjaEFuZENoYXIoXHJcbiAgICAgICAgb2N0ZXQsXHJcbiAgICAgICAgbWF0Y2hOb3RDaGFyKGN0bCksXHJcbiAgICAgICAgbWF0Y2hOb3RDaGFyKG1hdGNoQ2hhcignXCInKSkpKTtcclxuICAgIGNvbnN0IHFkdGV4dCA9IG1hdGNoQXRMZWFzdE9uY2UobWF0Y2hBbHQoXHJcbiAgICAgICAgbm9uV2hpdGVzcGFjZU5vblF1b3RlZFRleHQsXHJcbiAgICAgICAgbHdzKSk7XHJcbiAgICBjb25zdCBxdW90ZWRTdHJpbmcgPSBtYXRjaFNlcShcclxuICAgICAgICBtYXRjaFN0cmVhbShkb3VibGVRdW90ZSksXHJcbiAgICAgICAgbWF0Y2hSZXBlYXQobWF0Y2hBbHQoXHJcbiAgICAgICAgICAgIHFkdGV4dCxcclxuICAgICAgICAgICAgcXVvdGVkUGFpcikpLFxyXG4gICAgICAgIG1hdGNoU3RyZWFtKGRvdWJsZVF1b3RlKSk7XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBvY3RldCxcclxuICAgICAgICBjaGFyLFxyXG4gICAgICAgIHVwYWxwaGEsXHJcbiAgICAgICAgbG9hbHBoYSxcclxuICAgICAgICBkaWdpdCxcclxuICAgICAgICBjdGwsXHJcbiAgICAgICAgY3IsXHJcbiAgICAgICAgbGYsXHJcbiAgICAgICAgc3AsXHJcbiAgICAgICAgaHQsXHJcbiAgICAgICAgZG91YmxlUXVvdGUsXHJcbiAgICAgICAgY3JsZixcclxuICAgICAgICBsd3MsXHJcbiAgICAgICAgdGV4dCxcclxuICAgICAgICBoZXgsXHJcbiAgICAgICAgdG9rZW4sXHJcbiAgICAgICAgY29tbWVudCxcclxuICAgICAgICBxdW90ZWRTdHJpbmcsXHJcbiAgICAgICAgcXVvdGVkUGFpclxyXG4gICAgfTtcclxufSkoKTtcclxuXHJcbmV4cG9ydCBlbnVtIFRva2VuVHlwZSB7XHJcbiAgICB1bnNwZWNpZmllZCxcclxuICAgIGNvbW1lbnQsXHJcbiAgICBwcm9kdWN0TmFtZSxcclxuICAgIHByb2R1Y3RWZXJzaW9uLFxyXG4gICAgcHJvZHVjdCxcclxuICAgIHVzZXJBZ2VudCxcclxuICAgIHZlcnNpb25OdW1iZXJDb21wb25lbnQsXHJcbiAgICB2ZXJzaW9uTnVtYmVyXHJcbn1cclxuXHJcbmV4cG9ydCB0eXBlIFRva2VuTWF0Y2hlciA9IFRyZWVTdHJlYW1NYXRjaGVyPFRva2VuVHlwZSwgQ2hhckNvZGUsIENoYXJDb2RlPjtcclxuZXhwb3J0IHR5cGUgVG9rZW5UcmVlID0gVHJlZTxUb2tlblR5cGUsIENoYXJDb2RlW10+O1xyXG5cclxuZnVuY3Rpb24gbWF0Y2hVbnNwZWNpZmllZFRva2VuKG1hdGNoZXI6IFZhbHVlU3RyZWFtTWF0Y2hlcjxDaGFyQ29kZT4pOiBUb2tlbk1hdGNoZXIge1xyXG4gICAgcmV0dXJuIG1hdGNoVHJlZShUb2tlblR5cGUudW5zcGVjaWZpZWQsIG1hdGNoZXIpO1xyXG59XHJcblxyXG5leHBvcnQgY29uc3QgdG9rZW5QYXJzZXJzID0gKCgpID0+IHtcclxuICAgIGNvbnN0IGNvbW1lbnQgPSBtYXRjaFRyZWUoVG9rZW5UeXBlLmNvbW1lbnQsIGNoYXJMZXhlcnMuY29tbWVudCk7XHJcbiAgICBjb25zdCBwcm9kdWN0TmFtZSA9IG1hdGNoVHJlZShUb2tlblR5cGUucHJvZHVjdE5hbWUsIGNoYXJMZXhlcnMudG9rZW4pO1xyXG4gICAgY29uc3QgcHJvZHVjdFZlcnNpb24gPSBtYXRjaFRyZWUoVG9rZW5UeXBlLnByb2R1Y3RWZXJzaW9uLCBjaGFyTGV4ZXJzLnRva2VuKTtcclxuICAgIGNvbnN0IHByb2R1Y3QgPSBtYXRjaFRyZWVGbGF0dGVuKFRva2VuVHlwZS5wcm9kdWN0LFxyXG4gICAgICAgIG1hdGNoU2VxKFxyXG4gICAgICAgICAgICBwcm9kdWN0TmFtZSxcclxuICAgICAgICAgICAgbWF0Y2hNYXliZShtYXRjaFNlcShcclxuICAgICAgICAgICAgICAgIG1hdGNoVW5zcGVjaWZpZWRUb2tlbihtYXRjaFN0cmVhbShtYXRjaENoYXIoJy8nKSkpLFxyXG4gICAgICAgICAgICAgICAgcHJvZHVjdFZlcnNpb24pKSkpO1xyXG4gICAgY29uc3QgdXNlckFnZW50ID0gbWF0Y2hUcmVlRmxhdHRlbihUb2tlblR5cGUudXNlckFnZW50LFxyXG4gICAgICAgIG1hdGNoU2VxKFxyXG4gICAgICAgICAgICBtYXRjaEFsdChwcm9kdWN0LCBjb21tZW50KSxcclxuICAgICAgICAgICAgbWF0Y2hSZXBlYXQobWF0Y2hTZXEoXHJcbiAgICAgICAgICAgICAgICBtYXRjaFRyZWUoVG9rZW5UeXBlLnVuc3BlY2lmaWVkLCBjaGFyTGV4ZXJzLmx3cyksXHJcbiAgICAgICAgICAgICAgICBtYXRjaEFsdChwcm9kdWN0LCBjb21tZW50KSkpKSk7XHJcbiAgICBjb25zdCB2ZXJzaW9uTnVtYmVyQ29tcG9uZW50ID0gbWF0Y2hUcmVlKFRva2VuVHlwZS52ZXJzaW9uTnVtYmVyQ29tcG9uZW50LFxyXG4gICAgICAgIG1hdGNoQXRMZWFzdE9uY2UobWF0Y2hTdHJlYW0oY2hhckxleGVycy5kaWdpdCkpKTtcclxuICAgIGNvbnN0IHZlcnNpb25OdW1iZXIgPSBtYXRjaFRyZWVGbGF0dGVuKFRva2VuVHlwZS52ZXJzaW9uTnVtYmVyLFxyXG4gICAgICAgIG1hdGNoU2VxKFxyXG4gICAgICAgICAgICB2ZXJzaW9uTnVtYmVyQ29tcG9uZW50LFxyXG4gICAgICAgICAgICBtYXRjaFJlcGVhdChtYXRjaFNlcShcclxuICAgICAgICAgICAgICAgIG1hdGNoVW5zcGVjaWZpZWRUb2tlbihtYXRjaFN0cmVhbShtYXRjaENoYXIoJy4nKSkpLFxyXG4gICAgICAgICAgICAgICAgdmVyc2lvbk51bWJlckNvbXBvbmVudCkpKSk7XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBjb21tZW50LFxyXG4gICAgICAgIHByb2R1Y3QsXHJcbiAgICAgICAgdXNlckFnZW50LFxyXG4gICAgICAgIHZlcnNpb25OdW1iZXJcclxuICAgIH07XHJcbn0pKCk7XHJcblxyXG5leHBvcnQgY2xhc3MgUHJvZHVjdCB7XHJcbiAgICBjb25zdHJ1Y3RvcihyZWFkb25seSBuYW1lOiBzdHJpbmcsIHJlYWRvbmx5IHZlcnNpb246IE1heWJlPHN0cmluZz4pIHt9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHBhcnNlVG9rZW4obWF0Y2hUb2tlbjogVG9rZW5NYXRjaGVyLCB0eXBlOiBUb2tlblR5cGUsIHRva2VuU3RyOiBzdHJpbmcpOiBNYXliZTxUb2tlblRyZWU+IHtcclxuICAgIGNvbnN0IHN0cmVhbSA9IG1ha2VTdHJpbmdTdHJlYW0odG9rZW5TdHIpO1xyXG4gICAgY29uc3QgdHJlZSA9IG1heWJlRmlyc3QobWF0Y2hUb2tlbihzdHJlYW0pKTtcclxuICAgIGlmIChub25lKHRyZWUpKSB7XHJcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgIH1cclxuICAgIGlmICh0cmVlLmtleSAhPT0gdHlwZSkge1xyXG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdHJlZTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlVXNlckFnZW50KHVzZXJBZ2VudFN0cjogc3RyaW5nKTogTWF5YmU8UHJvZHVjdFtdPiB7XHJcbiAgICBjb25zdCB1c2VyQWdlbnRUcmVlID0gcGFyc2VUb2tlbih0b2tlblBhcnNlcnMudXNlckFnZW50LCBUb2tlblR5cGUudXNlckFnZW50LCB1c2VyQWdlbnRTdHIpO1xyXG4gICAgaWYgKG5vbmUodXNlckFnZW50VHJlZSkpIHtcclxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgfVxyXG4gICAgY29uc3QgcHJvZHVjdFRyZWVzID0gdXNlckFnZW50VHJlZS5maW5kKFRva2VuVHlwZS5wcm9kdWN0KTtcclxuXHJcbiAgICBjb25zdCBmaW5kVW5pcXVlQ2hpbGQgPSAodHlwZTogVG9rZW5UeXBlLCB0cmVlOiBUb2tlblRyZWUpOiBNYXliZTxUb2tlblRyZWU+ID0+IHtcclxuICAgICAgICBjb25zdCBjaGlsZCA9IG1heWJlRmlyc3QodHJlZS5maW5kKHR5cGUpKTtcclxuICAgICAgICByZXR1cm4gY2hpbGQ7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgZmluZFVuaXF1ZUNoaWxkVmFsdWUgPSAodHlwZTogVG9rZW5UeXBlLCB0cmVlOiBUb2tlblRyZWUpOiBNYXliZTxzdHJpbmc+ID0+IHtcclxuICAgICAgICBjb25zdCBjaGlsZCA9IGZpbmRVbmlxdWVDaGlsZCh0eXBlLCB0cmVlKTtcclxuICAgICAgICBpZiAobm9uZShjaGlsZCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUoLi4uY2hpbGQudmFsdWUpO1xyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdCBtYWtlUHJvZHVjdCA9IChwcm9kdWN0VHJlZTogVG9rZW5UcmVlKTogTWF5YmU8UHJvZHVjdD4gPT4ge1xyXG4gICAgICAgIGNvbnN0IHByb2R1Y3ROYW1lID0gZmluZFVuaXF1ZUNoaWxkVmFsdWUoVG9rZW5UeXBlLnByb2R1Y3ROYW1lLCBwcm9kdWN0VHJlZSk7XHJcbiAgICAgICAgaWYgKG5vbmUocHJvZHVjdE5hbWUpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHByb2R1Y3RWZXJzaW9uID0gZmluZFVuaXF1ZUNoaWxkVmFsdWUoVG9rZW5UeXBlLnByb2R1Y3RWZXJzaW9uLCBwcm9kdWN0VHJlZSk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9kdWN0KHByb2R1Y3ROYW1lLCBwcm9kdWN0VmVyc2lvbik7XHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IHByb2R1Y3RzID0gcHJvZHVjdFRyZWVzLm1hcChtYWtlUHJvZHVjdCkuZmlsdGVyKHNvbWUpO1xyXG4gICAgcmV0dXJuIHByb2R1Y3RzO1xyXG59XHJcblxyXG5leHBvcnQgdHlwZSBQcm9kdWN0VmVyc2lvbiA9IG51bWJlcltdO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlUHJvZHVjdFZlcnNpb24ocHJvZHVjdFZlcnNpb25TdHI6IHN0cmluZyk6IE1heWJlPFByb2R1Y3RWZXJzaW9uPiB7XHJcbiAgICBjb25zdCBwcm9kdWN0VmVyc2lvblRyZWUgPSBwYXJzZVRva2VuKHRva2VuUGFyc2Vycy52ZXJzaW9uTnVtYmVyLCBUb2tlblR5cGUudmVyc2lvbk51bWJlciwgcHJvZHVjdFZlcnNpb25TdHIpO1xyXG4gICAgaWYgKG5vbmUocHJvZHVjdFZlcnNpb25UcmVlKSkge1xyXG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICB9XHJcbiAgICBjb25zdCB2ZXJzaW9uQ29tcG9uZW50VHJlZXMgPSBwcm9kdWN0VmVyc2lvblRyZWUuZmluZChUb2tlblR5cGUudmVyc2lvbk51bWJlckNvbXBvbmVudCk7XHJcbiAgICBjb25zdCBwYXJzZWRWZXJzaW9uQ29tcG9uZW50cyA9IHZlcnNpb25Db21wb25lbnRUcmVlcy5tYXAoKHRyZWUpID0+IHBhcnNlTnVtYmVyKFN0cmluZy5mcm9tQ2hhckNvZGUoLi4udHJlZS52YWx1ZSkpKTtcclxuICAgIGlmIChwYXJzZWRWZXJzaW9uQ29tcG9uZW50cy5zb21lKG5vbmUpKSB7XHJcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgIH1cclxuICAgIGNvbnN0IHZlcnNpb25Db21wb25lbnRzID0gcGFyc2VkVmVyc2lvbkNvbXBvbmVudHMuZmlsdGVyKHNvbWUpO1xyXG4gICAgcmV0dXJuIHZlcnNpb25Db21wb25lbnRzO1xyXG59XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4uL2xpYi9jb21tb24vdXNlci1hZ2VudC1wYXJzZXIudHMiLCJpbXBvcnQgeyBNYXliZSwgc29tZSwgbm9uZSwgaXNFcXVhbCB9IGZyb20gXCIuL21heWJlXCI7XHJcbmltcG9ydCB7IGhhcywgY29tcGFyZUFycmF5cyB9IGZyb20gXCIuL2FycmF5LXV0aWxzXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgVHJlZTxLLCBWPiB7XHJcbiAgICBjb25zdHJ1Y3RvcihyZWFkb25seSBrZXk6IEssIHJlYWRvbmx5IHZhbHVlOiBWLCByZWFkb25seSBjaGlsZHJlbjogVHJlZTxLLCBWPltdID0gW10pIHt9XHJcblxyXG4gICAgYWRkQ2hpbGQoa2V5OiBLLCB2YWx1ZTogVik6IFRyZWU8SywgVj4ge1xyXG4gICAgICAgIGNvbnN0IGNoaWxkID0gbmV3IFRyZWUoa2V5LCB2YWx1ZSk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBUcmVlKHRoaXMua2V5LCB0aGlzLnZhbHVlLCBbLi4udGhpcy5jaGlsZHJlbiwgY2hpbGRdKTtcclxuICAgIH1cclxuXHJcbiAgICBmaW5kKGtleTogSywgY29tcGFyZUtleXM6IChhOiBLLCBiOiBLKSA9PiBib29sZWFuID0gaXNFcXVhbCk6IFRyZWU8SywgVj5bXSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZG9GaW5kKGtleSwgY29tcGFyZUtleXMsIFtdKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGRvRmluZChrZXk6IEssIGNvbXBhcmVLZXlzOiAoYTogSywgYjogSykgPT4gYm9vbGVhbiwgcmVzdWx0OiBUcmVlPEssIFY+W10pOiBUcmVlPEssIFY+W10ge1xyXG4gICAgICAgIGlmIChrZXkgPT09IHRoaXMua2V5KSB7XHJcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKHRoaXMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKGNvbnN0IGNoaWxkIG9mIHRoaXMuY2hpbGRyZW4pIHtcclxuICAgICAgICAgICAgY2hpbGQuZG9GaW5kKGtleSwgY29tcGFyZUtleXMsIHJlc3VsdCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcblxyXG4gICAgaXNFcXVhbChvdGhlcjogVHJlZTxLLCBWPiwgY29tcGFyZUtleXM6IChhOiBLLCBiOiBLKSA9PiBib29sZWFuID0gaXNFcXVhbCwgY29tcGFyZVZhbHVlczogKGE6IFYsIGI6IFYpID0+IGJvb2xlYW4gPSBpc0VxdWFsKTogYm9vbGVhbiB7XHJcbiAgICAgICAgaWYgKCFjb21wYXJlS2V5cyh0aGlzLmtleSwgb3RoZXIua2V5KSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghY29tcGFyZVZhbHVlcyh0aGlzLnZhbHVlLCBvdGhlci52YWx1ZSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gY29tcGFyZUFycmF5cyh0aGlzLmNoaWxkcmVuLCBvdGhlci5jaGlsZHJlbiwgKGEsIGIpID0+IGEuaXNFcXVhbChiLCBjb21wYXJlS2V5cywgY29tcGFyZVZhbHVlcykpO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gbWFrZVRyZWU8SywgVj4oa2V5OiBLLCB2YWx1ZTogViwgLi4uY2hpbGRyZW46IFRyZWU8SywgVj5bXSkge1xyXG4gICAgcmV0dXJuIG5ldyBUcmVlPEssIFY+KGtleSwgdmFsdWUsIGNoaWxkcmVuKTtcclxufVxyXG5cclxuZXhwb3J0IHR5cGUgQ2hhciA9IHN0cmluZztcclxuZXhwb3J0IHR5cGUgQ2hhckNvZGUgPSBudW1iZXI7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY2hhclRvQ29kZShjaGFyOiBDaGFyKTogQ2hhckNvZGUge1xyXG4gICAgcmV0dXJuIGNoYXIuY2hhckNvZGVBdCgwKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHN0clRvQ2hhckNvZGVzKHN0cjogc3RyaW5nKTogQ2hhckNvZGVbXSB7XHJcbiAgICBjb25zdCBjb2RlcyA9IG5ldyBBcnJheTxDaGFyQ29kZT4oKTtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSArPSAxKSB7XHJcbiAgICAgICAgY29uc3QgY29kZSA9IHN0ci5jaGFyQ29kZUF0KGkpO1xyXG4gICAgICAgIGNvZGVzLnB1c2goY29kZSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gY29kZXM7XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSVN0cmVhbTxUPiB7XHJcbiAgICByZWFkb25seSBwb3NpdGlvbjogbnVtYmVyO1xyXG4gICAgcmVhZG9ubHkgbGVuZ3RoOiBudW1iZXI7XHJcbiAgICBpc0F0RW5kKCk6IGJvb2xlYW47XHJcbiAgICBjYW5SZWFkKCk6IGJvb2xlYW47XHJcbiAgICByZWFkKCk6IE1heWJlPFQ+O1xyXG4gICAgc2F2ZVBvc2l0aW9uKCk6IG51bWJlcjtcclxuICAgIHJlc3RvcmVQb3NpdGlvbihwb3NpdGlvbjogbnVtYmVyKTogdm9pZDtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFN0cmVhbTxUPiBpbXBsZW1lbnRzIElTdHJlYW08VD4ge1xyXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBjb250ZW50OiBUW10sIHByaXZhdGUgcG9zID0gMCkge31cclxuXHJcbiAgICBnZXQgcG9zaXRpb24oKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5wb3M7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGxlbmd0aCgpIDogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jb250ZW50Lmxlbmd0aDtcclxuICAgIH1cclxuXHJcbiAgICBpc0F0RW5kKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnBvc2l0aW9uID09PSB0aGlzLmxlbmd0aDtcclxuICAgIH1cclxuXHJcbiAgICBjYW5SZWFkKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnBvc2l0aW9uIDwgdGhpcy5sZW5ndGg7XHJcbiAgICB9XHJcblxyXG4gICAgcmVhZCgpOiBNYXliZTxUPiB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmNhblJlYWQoKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCB2YWx1ZSA9IHRoaXMuY29udGVudFt0aGlzLnBvc2l0aW9uXTtcclxuICAgICAgICB0aGlzLnNldFBvc2l0aW9uKHRoaXMucG9zaXRpb24gKyAxKTtcclxuICAgICAgICByZXR1cm4gdmFsdWU7XHJcbiAgICB9XHJcblxyXG4gICAgc2F2ZVBvc2l0aW9uKCk6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucG9zaXRpb247XHJcbiAgICB9XHJcblxyXG4gICAgcmVzdG9yZVBvc2l0aW9uKHBvc2l0aW9uOiBudW1iZXIpIHtcclxuICAgICAgICB0aGlzLnNldFBvc2l0aW9uKHBvc2l0aW9uKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNldFBvc2l0aW9uKHBvc2l0aW9uOiBudW1iZXIpIHtcclxuICAgICAgICB0aGlzLnBvcyA9IHBvc2l0aW9uO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gbWFrZVN0cmluZ1N0cmVhbShzdHI6IHN0cmluZyk6IElTdHJlYW08Q2hhckNvZGU+IHtcclxuICAgIGNvbnN0IGNvbnRlbnQgPSBzdHJUb0NoYXJDb2RlcyhzdHIpO1xyXG4gICAgcmV0dXJuIG5ldyBTdHJlYW08Q2hhckNvZGU+KGNvbnRlbnQpO1xyXG59XHJcblxyXG5leHBvcnQgdHlwZSBNYXRjaGVyPFQsIFU+ID0gKHZhbHVlOiBUKSA9PiBNYXliZTxVPjtcclxuZXhwb3J0IHR5cGUgVmFsdWVNYXRjaGVyPFQ+ID0gTWF0Y2hlcjxULCBUPjtcclxuZXhwb3J0IHR5cGUgU3RyZWFtTWF0Y2hlcjxULCBVPiA9IE1hdGNoZXI8SVN0cmVhbTxUPiwgVVtdPjtcclxuZXhwb3J0IHR5cGUgVmFsdWVTdHJlYW1NYXRjaGVyPFQ+ID0gU3RyZWFtTWF0Y2hlcjxULCBUPjtcclxuZXhwb3J0IHR5cGUgVHJlZVN0cmVhbU1hdGNoZXI8VCwgSywgVj4gPSBTdHJlYW1NYXRjaGVyPFQsIFRyZWU8SywgVltdPj5cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBtYXRjaENoYXJDb2RlKHZhbHVlVG9NYXRjaDogQ2hhckNvZGUpOiBWYWx1ZU1hdGNoZXI8Q2hhckNvZGU+IHtcclxuICAgIHJldHVybiAodmFsdWU6IENoYXJDb2RlKSA9PiB7XHJcbiAgICAgICAgaWYgKHZhbHVlID09PSB2YWx1ZVRvTWF0Y2gpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgfTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIG1hdGNoQ2hhcih2YWx1ZVRvTWF0Y2g6IENoYXIpOiBWYWx1ZU1hdGNoZXI8Q2hhckNvZGU+IHtcclxuICAgIHJldHVybiBtYXRjaENoYXJDb2RlKGNoYXJUb0NvZGUodmFsdWVUb01hdGNoKSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBtYXRjaENoYXJDb2RlcyguLi52YWx1ZXM6IENoYXJDb2RlW10pOiBWYWx1ZU1hdGNoZXI8Q2hhckNvZGU+IHtcclxuICAgIHJldHVybiAodmFsdWU6IENoYXJDb2RlKSA9PiB7XHJcbiAgICAgICAgaWYgKGhhcyh2YWx1ZXMsIHZhbHVlKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdmFsdWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICB9O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gbWF0Y2hDaGFycyguLi52YWx1ZXM6IENoYXJbXSk6IFZhbHVlTWF0Y2hlcjxDaGFyQ29kZT4ge1xyXG4gICAgcmV0dXJuIG1hdGNoQ2hhckNvZGVzKC4uLnZhbHVlcy5tYXAoY2hhclRvQ29kZSkpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gbWF0Y2hDaGFyQ29kZVJhbmdlKGZpcnN0OiBDaGFyQ29kZSwgbGFzdDogQ2hhckNvZGUpOiBWYWx1ZU1hdGNoZXI8Q2hhckNvZGU+IHtcclxuICAgIHJldHVybiAodmFsdWU6IENoYXJDb2RlKSA9PiB7XHJcbiAgICAgICAgaWYgKHZhbHVlID49IGZpcnN0ICYmIHZhbHVlIDw9IGxhc3QpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgfTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIG1hdGNoQ2hhclJhbmdlKGZpcnN0OiBDaGFyLCBsYXN0OiBDaGFyKTogVmFsdWVNYXRjaGVyPENoYXJDb2RlPiB7XHJcbiAgICByZXR1cm4gbWF0Y2hDaGFyQ29kZVJhbmdlKGNoYXJUb0NvZGUoZmlyc3QpLCBjaGFyVG9Db2RlKGxhc3QpKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIG1hdGNoQ2hhclNldCguLi5tYXRjaGVyczogVmFsdWVNYXRjaGVyPENoYXJDb2RlPltdKTogVmFsdWVNYXRjaGVyPENoYXJDb2RlPiB7XHJcbiAgICByZXR1cm4gKHZhbHVlOiBDaGFyQ29kZSkgPT4ge1xyXG4gICAgICAgIGlmIChtYXRjaGVycy5zb21lKG1hdGNoZXIgPT4gc29tZShtYXRjaGVyKHZhbHVlKSkpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgIH07XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBtYXRjaE5vdENoYXIobWF0Y2hlcjogVmFsdWVNYXRjaGVyPENoYXJDb2RlPik6IFZhbHVlTWF0Y2hlcjxDaGFyQ29kZT4ge1xyXG4gICAgcmV0dXJuICh2YWx1ZTogQ2hhckNvZGUpID0+IHtcclxuICAgICAgICBpZiAobm9uZShtYXRjaGVyKHZhbHVlKSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgfTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIG1hdGNoQW5kQ2hhciguLi5tYXRjaGVyczogVmFsdWVNYXRjaGVyPENoYXJDb2RlPltdKTogVmFsdWVNYXRjaGVyPENoYXJDb2RlPiB7XHJcbiAgICByZXR1cm4gKHZhbHVlOiBDaGFyQ29kZSkgPT4ge1xyXG4gICAgICAgIGlmIChtYXRjaGVycy5ldmVyeShtYXRjaGVyID0+IHNvbWUobWF0Y2hlcih2YWx1ZSkpKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdmFsdWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICB9O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gbWF0Y2hTdHJlYW08VD4obWF0Y2hlcjogVmFsdWVNYXRjaGVyPFQ+KTogVmFsdWVTdHJlYW1NYXRjaGVyPFQ+IHtcclxuICAgIHJldHVybiAoc3RyZWFtOiBJU3RyZWFtPFQ+KSA9PiB7XHJcbiAgICAgICAgY29uc3QgcG9zaXRpb24gPSBzdHJlYW0uc2F2ZVBvc2l0aW9uKCk7XHJcbiAgICAgICAgY29uc3Qgb25NYXRjaEZhaWxlZCA9ICgpID0+IHtcclxuICAgICAgICAgICAgc3RyZWFtLnJlc3RvcmVQb3NpdGlvbihwb3NpdGlvbik7XHJcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBuZXcgQXJyYXk8VD4oKTtcclxuICAgICAgICBjb25zdCB2YWx1ZSA9IHN0cmVhbS5yZWFkKCk7XHJcbiAgICAgICAgaWYgKG5vbmUodmFsdWUpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBvbk1hdGNoRmFpbGVkKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IG1hdGNoID0gbWF0Y2hlcih2YWx1ZSk7XHJcbiAgICAgICAgaWYgKG5vbmUobWF0Y2gpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBvbk1hdGNoRmFpbGVkKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJlc3VsdC5wdXNoKG1hdGNoKTtcclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIG1hdGNoQ2hhclNlcSguLi5tYXRjaGVyczogVmFsdWVNYXRjaGVyPENoYXJDb2RlPltdKTogVmFsdWVTdHJlYW1NYXRjaGVyPENoYXJDb2RlPiB7XHJcbiAgICByZXR1cm4gKHN0cmVhbTogSVN0cmVhbTxDaGFyQ29kZT4pID0+IHtcclxuICAgICAgICBjb25zdCBwb3NpdGlvbiA9IHN0cmVhbS5zYXZlUG9zaXRpb24oKTtcclxuICAgICAgICBjb25zdCBkaWROb3RNYXRjaCA9ICgpID0+IHtcclxuICAgICAgICAgICAgc3RyZWFtLnJlc3RvcmVQb3NpdGlvbihwb3NpdGlvbik7XHJcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBuZXcgQXJyYXk8Q2hhckNvZGU+KCk7XHJcbiAgICAgICAgZm9yIChjb25zdCBtYXRjaGVyIG9mIG1hdGNoZXJzKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gc3RyZWFtLnJlYWQoKTtcclxuICAgICAgICAgICAgaWYgKG5vbmUodmFsdWUpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZGlkTm90TWF0Y2goKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zdCBtYXRjaCA9IG1hdGNoZXIodmFsdWUpO1xyXG4gICAgICAgICAgICBpZiAobm9uZShtYXRjaCkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBkaWROb3RNYXRjaCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKG1hdGNoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH07XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBtYXRjaFNlcTxULCBVPiguLi5tYXRjaGVyczogU3RyZWFtTWF0Y2hlcjxULCBVPltdKTogU3RyZWFtTWF0Y2hlcjxULCBVPiB7XHJcbiAgICByZXR1cm4gKHN0cmVhbTogSVN0cmVhbTxUPikgPT4ge1xyXG4gICAgICAgIGNvbnN0IHBvc2l0aW9uID0gc3RyZWFtLnNhdmVQb3NpdGlvbigpO1xyXG4gICAgICAgIGxldCByZXN1bHQgPSBuZXcgQXJyYXk8VT4oKTtcclxuICAgICAgICBmb3IgKGNvbnN0IG1hdGNoZXIgb2YgbWF0Y2hlcnMpIHtcclxuICAgICAgICAgICAgY29uc3QgbWF0Y2ggPSBtYXRjaGVyKHN0cmVhbSk7XHJcbiAgICAgICAgICAgIGlmIChub25lKG1hdGNoKSkge1xyXG4gICAgICAgICAgICAgICAgc3RyZWFtLnJlc3RvcmVQb3NpdGlvbihwb3NpdGlvbik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJlc3VsdCA9IHJlc3VsdC5jb25jYXQobWF0Y2gpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIG1hdGNoTWF5YmU8VCwgVT4obWF0Y2hlcjogU3RyZWFtTWF0Y2hlcjxULCBVPik6IFN0cmVhbU1hdGNoZXI8VCwgVT4ge1xyXG4gICAgcmV0dXJuIChzdHJlYW06IElTdHJlYW08VD4pID0+IHtcclxuICAgICAgICBjb25zdCBwb3NpdGlvbiA9IHN0cmVhbS5zYXZlUG9zaXRpb24oKTtcclxuICAgICAgICBjb25zdCBtYXRjaCA9IG1hdGNoZXIoc3RyZWFtKTtcclxuICAgICAgICBpZiAobm9uZShtYXRjaCkpIHtcclxuICAgICAgICAgICAgc3RyZWFtLnJlc3RvcmVQb3NpdGlvbihwb3NpdGlvbik7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgQXJyYXk8VT4oKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG1hdGNoO1xyXG4gICAgfTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIG1hdGNoQXRMZWFzdE9uY2U8VCwgVT4obWF0Y2hlcjogU3RyZWFtTWF0Y2hlcjxULCBVPik6IFN0cmVhbU1hdGNoZXI8VCwgVT4ge1xyXG4gICAgcmV0dXJuIChzdHJlYW06IElTdHJlYW08VD4pID0+IHtcclxuICAgICAgICBjb25zdCBwb3NpdGlvbiA9IHN0cmVhbS5zYXZlUG9zaXRpb24oKTtcclxuICAgICAgICBjb25zdCBtYXRjaCA9IG1hdGNoZXIoc3RyZWFtKTtcclxuICAgICAgICBpZiAobm9uZShtYXRjaCkpIHtcclxuICAgICAgICAgICAgc3RyZWFtLnJlc3RvcmVQb3NpdGlvbihwb3NpdGlvbik7XHJcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCByZXN1bHQgPSBtYXRjaDtcclxuICAgICAgICB3aGlsZSAodHJ1ZSkge1xyXG4gICAgICAgICAgICBjb25zdCBwb3NpdGlvbiA9IHN0cmVhbS5zYXZlUG9zaXRpb24oKTtcclxuICAgICAgICAgICAgY29uc3QgbWF0Y2ggPSBtYXRjaGVyKHN0cmVhbSk7XHJcbiAgICAgICAgICAgIGlmIChub25lKG1hdGNoKSkge1xyXG4gICAgICAgICAgICAgICAgc3RyZWFtLnJlc3RvcmVQb3NpdGlvbihwb3NpdGlvbik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJlc3VsdCA9IHJlc3VsdC5jb25jYXQobWF0Y2gpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBtYXRjaFJlcGVhdDxULCBVPihtYXRjaGVyOiBTdHJlYW1NYXRjaGVyPFQsIFU+KTogU3RyZWFtTWF0Y2hlcjxULCBVPiB7XHJcbiAgICBjb25zdCBkb01hdGNoQXRMZWFzdE9uY2UgPSBtYXRjaEF0TGVhc3RPbmNlKG1hdGNoZXIpO1xyXG4gICAgcmV0dXJuIChzdHJlYW06IElTdHJlYW08VD4pID0+IHtcclxuICAgICAgICBjb25zdCBtYXRjaCA9IGRvTWF0Y2hBdExlYXN0T25jZShzdHJlYW0pO1xyXG4gICAgICAgIGlmIChub25lKG1hdGNoKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEFycmF5PFU+KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBtYXRjaDtcclxuICAgIH07XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBtYXRjaEFsdDxULCBVPiguLi5tYXRjaGVyczogU3RyZWFtTWF0Y2hlcjxULCBVPltdKTogU3RyZWFtTWF0Y2hlcjxULCBVPiB7XHJcbiAgICByZXR1cm4gKHN0cmVhbTogSVN0cmVhbTxUPikgPT4ge1xyXG4gICAgICAgIGZvciAoY29uc3QgbWF0Y2hlciBvZiBtYXRjaGVycykge1xyXG4gICAgICAgICAgICBjb25zdCBwb3NpdGlvbiA9IHN0cmVhbS5zYXZlUG9zaXRpb24oKTtcclxuICAgICAgICAgICAgY29uc3QgbWF0Y2ggPSBtYXRjaGVyKHN0cmVhbSk7XHJcbiAgICAgICAgICAgIGlmIChzb21lKG1hdGNoKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG1hdGNoO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHN0cmVhbS5yZXN0b3JlUG9zaXRpb24ocG9zaXRpb24pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgfTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIG1hdGNoVHJlZTxULCBLLCBWPihrZXk6IEssIG1hdGNoZXI6IFN0cmVhbU1hdGNoZXI8VCwgVj4pOiBUcmVlU3RyZWFtTWF0Y2hlcjxULCBLLCBWPiB7XHJcbiAgICByZXR1cm4gKHN0cmVhbTogSVN0cmVhbTxUPikgPT4ge1xyXG4gICAgICAgIGNvbnN0IG1hdGNoID0gbWF0Y2hlcihzdHJlYW0pO1xyXG4gICAgICAgIGlmIChub25lKG1hdGNoKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gW21ha2VUcmVlKGtleSwgbWF0Y2gpXTtcclxuICAgIH07XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBtYXRjaFRyZWVGbGF0dGVuPFQsIEssIFY+KGtleTogSywgbWF0Y2hlcjogVHJlZVN0cmVhbU1hdGNoZXI8VCwgSywgVj4pOiBUcmVlU3RyZWFtTWF0Y2hlcjxULCBLLCBWPiB7XHJcbiAgICByZXR1cm4gKHN0cmVhbTogSVN0cmVhbTxUPikgPT4ge1xyXG4gICAgICAgIGNvbnN0IG1hdGNoID0gbWF0Y2hlcihzdHJlYW0pO1xyXG4gICAgICAgIGlmIChub25lKG1hdGNoKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCB2YWx1ZSA9IG1hdGNoLnJlZHVjZSgoY3VycmVudFZhbHVlLCB0cmVlKSA9PiBjdXJyZW50VmFsdWUuY29uY2F0KHRyZWUudmFsdWUpLCBuZXcgQXJyYXk8Vj4oKSk7XHJcbiAgICAgICAgcmV0dXJuIFttYWtlVHJlZShrZXksIHZhbHVlLCAuLi5tYXRjaCldO1xyXG4gICAgfTtcclxufVxyXG5cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4uL2xpYi9jb21tb24vcGFyc2VyLXV0aWxzLnRzIiwiLy8gQ29weXJpZ2h0IChjKSAyMDE4IEJyb21pdW0sIEluYy5cclxuLy8gVXNlIG9mIHRoZSBCcm9taXVtLCBJbmMuIHNvZnR3YXJlIHJlcXVpcmVzIGEgbGljZW5zZSBhZ3JlZW1lbnQgd2l0aCBCcm9taXVtLCBJbmMuIG9yIGFuIGF1dGhvcml6ZWQgcmVzZWxsZXIuXHJcblxyXG4vLy8gPHJlZmVyZW5jZSB0eXBlcz1cImNocm9tZVwiLz5cclxuaW1wb3J0IHsgUmVxdWVzdElkLCBUYWJJZCwgV2luZG93SWQgfSBmcm9tIFwiLi9jb21tb24tdHlwZXNcIjtcclxuaW1wb3J0IHsgUGxhY2VtZW50TWFuYWdlciB9IGZyb20gXCIuL3BsYWNlbWVudC1tYW5hZ2VyXCI7XHJcbmltcG9ydCB7IENvbmZpZ1JlYWRlciB9IGZyb20gXCIuL2NvbmZpZy1yZWFkZXJcIjtcclxuaW1wb3J0IHsgVVJMLCBwYXJzZVVybCwgVVJMVG9TdHJpbmcsIGlzU2FtZVVybCwgaXNGaWxlVXJsLCBwYXJzZVVSTElmTmVjZXNzYXJ5LCBpc0V4dGVuc2lvblVybCwgVXJsQ29tcGFyZU9wdGlvbnMgfSBmcm9tIFwiLi91cmwtdXRpbHNcIjtcclxuaW1wb3J0IHsgVGFiU3RhbGtlciwgcGFyc2VCcm93c2VyTmV3VGFiVVJMcyB9IGZyb20gXCIuL3RhYi1zdGFsa2VyXCI7XHJcbmltcG9ydCB7IGlzVHJ1ZSwgaXNGYWxzZSB9IGZyb20gXCIuL2Jvb2xlYW4tdXRpbHNcIjtcclxuaW1wb3J0IHsgQmxvY2tlZFBhZ2VDb250cm9sbGVyIH0gZnJvbSBcIi4vYmxvY2tlZC1wYWdlLWNvbnRyb2xsZXJcIjtcclxuaW1wb3J0IHsgZmlyc3QgfSBmcm9tIFwiLi9hcnJheS11dGlsc1wiO1xyXG5pbXBvcnQgeyBsb2csIGxvZ0Vycm9yIH0gZnJvbSBcIi4vbG9nXCI7XHJcbmltcG9ydCB7IHRvU3RyaW5nIH0gZnJvbSBcIi4vc3RyaW5nLXV0aWxzXCI7XHJcbmltcG9ydCB7IHBhcnNlT3JpZ2luLCBpc1NhbWVPcmlnaW4gfSBmcm9tIFwiLi9vcmlnaW5cIjtcclxuaW1wb3J0IHsgTWF5YmUsIHNvbWUsIG5vbmUgfSBmcm9tIFwiLi9tYXliZVwiO1xyXG5pbXBvcnQgeyBCcm93c2VyTGF1bmNoZXIgfSBmcm9tIFwiLi9ibG9ja2VkLXBhZ2UtY29udHJvbGxlclwiO1xyXG5pbXBvcnQge1xyXG4gICAgUGhpc2hpbmdOYXZTZXF1ZW5jZURldGVjdG9yLFxyXG4gICAgSU5hdlNlcXVlbmNlRGV0ZWN0aW9ucyxcclxuICAgIElOYXZTZXF1ZW5jZURldGVjdGlvbixcclxuICAgIEVtcHR5TmF2U2VxdWVuY2VEZXRlY3Rpb25zXHJcbn0gZnJvbSBcIi4vbmF2LXNlcXVlbmNlLWRldGVjdG9yXCI7XHJcbmltcG9ydCB7XHJcbiAgICBjYXRlZ29yaXplVXJsLFxyXG4gICAgVXJsQ2F0ZWdvcnksXHJcbiAgICB1cmxDYXRlZ29yeVRvU3RyaW5nLFxyXG4gICAgTmF2VHlwZSxcclxuICAgIHBhcnNlSGVhZGVyVHlwZSxcclxuICAgIEh0dHBIZWFkZXJUeXBlLFxyXG4gICAgR3JvdXBOYW1lXHJcbn0gZnJvbSBcIi4vbmF2LXNlcXVlbmNlLXBhcnNlclwiO1xyXG5pbXBvcnQgeyBpc0VtcHR5IH0gZnJvbSBcIi4vYXJyYXktdXRpbHNcIjtcclxuaW1wb3J0IHsgVGFiVHlwZSB9IGZyb20gXCIuL3BoaXNoaW5nLXNvdXJjZS1zaXRlc1wiO1xyXG5pbXBvcnQgeyBwYXJzZUh0dHBNZXRob2QsIGh0dHBNZXRob2RUeXBlVG9TdHJpbmcsIEh0dHBNZXRob2RUeXBlIH0gZnJvbSBcIi4vaHR0cC1tZXRob2RcIjtcclxuaW1wb3J0IHsgRXh0ZXJuYWxBcHBMaW5rQ29udHJvbGxlciB9IGZyb20gXCIuL2V4dGVybmFsLWFwcC1saW5rLWNvbnRyb2xsZXJcIjtcclxuaW1wb3J0IHsgRmlsZUJsb2NrZXIgfSBmcm9tIFwiLi9maWxlLWJsb2NrZXJcIjtcclxuaW1wb3J0IHsgRXJyb3JIYW5kbGVyIH0gZnJvbSBcIi4vZXJyb3ItaGFuZGxlclwiO1xyXG5pbXBvcnQgeyBCcm93c2VyLCBicm93c2VyVG9TdHJpbmcsIGZpbmRFZGdlTWFqb3JWZXJzaW9uIH0gZnJvbSBcIi4vYnJvd3NlclwiO1xyXG5pbXBvcnQgeyBJRmVhdHVyZU1hbmFnZXIgfSBmcm9tIFwiLi9mZWF0dXJlLW1hbmFnZXJcIjtcclxuaW1wb3J0IHsgSU9uQ29uZmlndXJlZCB9IGZyb20gXCIuL29uLWNvbmZpZ3VyZWRcIjtcclxuaW1wb3J0IHsgaG9zdENvbnN0YW50cyB9IGZyb20gXCIuL2hvc3QtY29uc3RhbnRzXCI7XHJcbmltcG9ydCB7IGZpbmREb2N1bWVudFF1ZXJ5UGFyYW0gfSBmcm9tIFwiLi91cmwtcGFyc2UtdXRpbHNcIjtcclxuaW1wb3J0IHsgQ29uZmlnTm90aWZpZXIgfSBmcm9tIFwiLi9jb25maWctbm90aWZpZXJcIjtcclxuaW1wb3J0IHsgQ29uZmlnS2V5IH0gZnJvbSBcIi4vY29uZmlnLWtleXNcIjtcclxuaW1wb3J0IHsgT3B0aW9uTmFtZXMgfSBmcm9tIFwiLi9ibG9ja2VkLXBhZ2Utb3B0aW9uc1wiO1xyXG5pbXBvcnQgeyBmaW5kVVJMRG9jdW1lbnRRdWVyeVBhcmFtIH0gZnJvbSBcIi4vdXJsLXBhcnNlLXV0aWxzXCI7XHJcbmltcG9ydCB7IElkR2VuZXJhdG9yIH0gZnJvbSBcIi4vaWQtZ2VuZXJhdG9yXCI7XHJcbmltcG9ydCB7IGdldFdlYlJlcXVlc3RMaXN0ZW5lclVybEZpbHRlciB9IGZyb20gXCIuL3dlYi1yZXF1ZXN0LWxpc3RlbmVyLWZpbHRlclwiO1xyXG5pbXBvcnQgeyByZW1vdmVVcmxGcm9tSGlzdG9yeSB9IGZyb20gXCIuL2hpc3RvcnlcIjtcclxuaW1wb3J0IHsgQ29udGVudFR5cGUsIGNvbnRlbnRUeXBlVG9TdHJpbmcsIHBhcnNlQ29udGVudFR5cGUgfSBmcm9tIFwiLi9jb250ZW50LXR5cGVcIjtcclxuXHJcbmZ1bmN0aW9uIGlmSW5jb2duaXRvVGFiKHRhYklkOiBUYWJJZCwgYWN0aW9uOiAoKSA9PiB2b2lkKSB7XHJcbiAgICBjaHJvbWUudGFicy5nZXQodGFiSWQsIHRhYiA9PiB7XHJcbiAgICAgICAgaWYgKHRhYi5pbmNvZ25pdG8pIHtcclxuICAgICAgICAgICAgYWN0aW9uKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn1cclxuXHJcbnR5cGUgUGFyZW50VGFiRGF0YSA9IFtNYXliZTxUYWJJZD4sIE1heWJlPFVSTD4sIFVybENhdGVnb3J5XTtcclxuXHJcbmVudW0gQ29tcGFyaXNvbiB7XHJcbiAgICBsZXNzVGhhbiA9IC0xLFxyXG4gICAgZXF1YWwgPSAwLFxyXG4gICAgZ3JlYXRlclRoYW4gPSAxXHJcbn1cclxuXHJcbmludGVyZmFjZSBSZWRpcmVjdEJhY2tUb1NyY0luZm8ge1xyXG4gICAgc3JjVVJMOiBVUkw7XHJcbiAgICBpc05ld1RhYjogYm9vbGVhbjtcclxuICAgIGRpZFVzZXJDcmVhdGVUYWI6IGJvb2xlYW47XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBXZWJSZXF1ZXN0TGlzdGVuZXIge1xyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAgICAgICAgIHByaXZhdGUgYnJvd3NlcjogTWF5YmU8QnJvd3Nlcj4sXHJcbiAgICAgICAgICAgIGNvbmZpZ05vdGlmaWVyOiBDb25maWdOb3RpZmllcixcclxuICAgICAgICAgICAgcHJpdmF0ZSB0YWJTdGFsa2VyOiBUYWJTdGFsa2VyLFxyXG4gICAgICAgICAgICBwcml2YXRlIHBsYWNlbWVudE1hbmFnZXI6IFBsYWNlbWVudE1hbmFnZXIsXHJcbiAgICAgICAgICAgIHByaXZhdGUgYmxvY2tlZFBhZ2VDb250cm9sbGVyOiBCbG9ja2VkUGFnZUNvbnRyb2xsZXIsXHJcbiAgICAgICAgICAgIHByaXZhdGUgZmlsZUJsb2NrZXI6IEZpbGVCbG9ja2VyLFxyXG4gICAgICAgICAgICBwcml2YXRlIGJyb3dzZXJMYXVuY2hlcjogQnJvd3NlckxhdW5jaGVyLFxyXG4gICAgICAgICAgICBwcml2YXRlIHBoaXNoaW5nTmF2U2VxdWVuY2VEZXRlY3RvcjogUGhpc2hpbmdOYXZTZXF1ZW5jZURldGVjdG9yLFxyXG4gICAgICAgICAgICBwcml2YXRlIGV4dGVybmFsQXBwTGlua0NvbnRyb2xsZXI6IEV4dGVybmFsQXBwTGlua0NvbnRyb2xsZXIsXHJcbiAgICAgICAgICAgIHByaXZhdGUgZmVhdHVyZU1hbmFnZXI6IElGZWF0dXJlTWFuYWdlcixcclxuICAgICAgICAgICAgcHJpdmF0ZSBvbkNvbmZpZ3VyZWQ6IElPbkNvbmZpZ3VyZWQsXHJcbiAgICAgICAgICAgIGVycm9ySGFuZGxlcjogRXJyb3JIYW5kbGVyKSB7XHJcbiAgICAgICAgY29uZmlnTm90aWZpZXIuYWRkQ29uZmlnTGlzdGVuZXJGb3JLZXlzKFxyXG4gICAgICAgICAgICAoa2V5LCBjb25maWcpID0+IHsgdGhpcy5vbkNvbmZpZ0NoYW5nZWQoa2V5LCBjb25maWcpOyB9LFxyXG4gICAgICAgICAgICBbIENvbmZpZ0tleS5wcm9tcHRGb3JVbmNhdGVnb3JpemVkIF0pO1xyXG4gICAgICAgIHRoaXMudGFiU3RhbGtlci5yZWdpc3Rlck9uVGFiQ2xvc2VkSGFuZGxlcigodGFiSWQpID0+IHRoaXMub25UYWJDbG9zZWQodGFiSWQpKTtcclxuICAgICAgICB0aGlzLnRhYlN0YWxrZXIucmVnaXN0ZXJPblRhYlJlc3RvcmVkTGlzdGVuZXJzKCh0YWJJZCwgdXJsKSA9PiB0aGlzLm9uVGFiUmVzdG9yZWQodGFiSWQsIHVybCkpO1xyXG4gICAgICAgIGVycm9ySGFuZGxlci5vbkRvcm1hbnRTdGF0ZUNoYW5nZWQucmVnaXN0ZXJFdmVudEhhbmRsZXIodGhpcy5vbkRvcm1hbnRTdGF0ZUNoYW5nZWQuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgdGhpcy5vbkNvbmZpZ3VyZWQucmVnaXN0ZXJMaXN0ZW5lcigoKSA9PiB0aGlzLnJlbW92ZUhvbGRpbmdQYWdlRnJvbUhpc3RvcnkoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBvbkNvbmZpZ0NoYW5nZWQoa2V5OiBDb25maWdLZXksIGNvbmZpZzogQ29uZmlnUmVhZGVyKSB7XHJcbiAgICAgICAgc3dpdGNoIChrZXkpIHtcclxuICAgICAgICAgICAgY2FzZSBDb25maWdLZXkucHJvbXB0Rm9yVW5jYXRlZ29yaXplZDpcclxuICAgICAgICAgICAgICAgIHRoaXMucHJvbXB0Rm9yVW5jYXRlZ29yaXplZCA9IGNvbmZpZy5wcm9tcHRGb3JVbmNhdGVnb3JpemVkO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgb25Eb3JtYW50U3RhdGVDaGFuZ2VkKGRvcm1hbnRTdGF0ZTogYm9vbGVhbikge1xyXG4gICAgICAgIHRoaXMuaXNEb3JtYW50ID0gZG9ybWFudFN0YXRlO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcmVtb3ZlSG9sZGluZ1BhZ2VGcm9tSGlzdG9yeSgpIHtcclxuICAgICAgICBjb25zdCBleHRlbnNpb25XaW5kb3dzID0gY2hyb21lLmV4dGVuc2lvbi5nZXRWaWV3cyh7dHlwZTogXCJ0YWJcIn0pO1xyXG4gICAgICAgIC8vIFdlIGNhbid0IHJlbW92ZSB0aGUgaG9sZGluZyBwYWdlIGZyb20gaGlzdG9yeSB3aGlsZSBzb21lIHRhYnMgYXJlIHN0aWxsIG9wZW4gb24gdGhlIGhvbGRpbmcgcGFnZS4gTm90ZSB0aGF0XHJcbiAgICAgICAgLy8gdGhlIGhvbGRpbmcgcGFnZSBkb2Vzbid0IHVzZSBxdWVyeSBwYXJhbXMgc28gd2UgZG9uJ3QgbmVlZCB0byBjb21wYXJlIHRoZSBVUkxzIGJlbG93IHdpdGhvdXQgdGhlbS5cclxuICAgICAgICBpZiAoZXh0ZW5zaW9uV2luZG93cy5zb21lKHdpbmRvdyA9PiB3aW5kb3cubG9jYXRpb24uaHJlZiA9PT0gdGhpcy5leHRlbnNpb25Ib2xkaW5nUGFnZVVSTCkpIHtcclxuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB0aGlzLnJlbW92ZUhvbGRpbmdQYWdlRnJvbUhpc3RvcnkoKSwgNTAwKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZW1vdmVVcmxGcm9tSGlzdG9yeSh0aGlzLmJyb3dzZXIsIHRoaXMuZXh0ZW5zaW9uSG9sZGluZ1BhZ2VVUkwpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgb25UYWJSZXN0b3JlZCh0YWJJZDogVGFiSWQsIHVybDogTWF5YmU8VVJMPikge1xyXG4gICAgICAgIGNvbnN0IGlzTmV3VGFiID0gdGhpcy5kZXRlY3RlZFRhYih0YWJJZCk7XHJcbiAgICAgICAgaWYgKCFpc05ld1RhYikge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIElmIHRoZSBleHRlbnNpb24gYWxyZWFkeSBoYXMgY29uZmlnIHRoZW4gdGhlIGxpc3RlbmVyIGZ1bmN0aW9uIHdpbGwgYmUgaW1tZWRpYXRlbHkgY2FsbGVkXHJcbiAgICAgICAgdGhpcy5vbkNvbmZpZ3VyZWQucmVnaXN0ZXJMaXN0ZW5lcigoKSA9PiB7XHJcbiAgICAgICAgICAgIGxvZyhgV2ViUmVxdWVzdExpc3RlbmVyLm9uVGFiUmVzdG9yZWQ6IHRhYklkOiAke3RhYklkfSB1cmw6ICR7dXJsfWApO1xyXG4gICAgICAgICAgICBjb25zdCB1cmxDYXRlZ29yeSA9IHRoaXMuY2F0ZWdvcml6ZVVSTCh1cmwpO1xyXG4gICAgICAgICAgICBjb25zdCBncm91cHMgPSB0aGlzLmZpbmRHcm91cHModXJsKTtcclxuICAgICAgICAgICAgY29uc3QgZGlkVXNlckNyZWF0ZVRhYiA9IHRoaXMuZGlkVXNlckNyZWF0ZVRhYih0YWJJZCk7XHJcbiAgICAgICAgICAgIHRoaXMuZGV0ZWN0UGhpc2hpbmdOYXZTZXF1ZW5jZU9uTmF2aWdhdGUodGFiSWQsIHVybCwgdXJsQ2F0ZWdvcnksIGdyb3VwcywgaXNOZXdUYWIsIGRpZFVzZXJDcmVhdGVUYWIpO1xyXG4gICAgICAgICAgICB0aGlzLm9uVGFiTmF2aWdhdGVkKHRhYklkLCB1cmwpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgaXNSZXN0b3JlZFNlc3Npb25UYWIodGFiSWQ6IFRhYklkKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudGFiU3RhbGtlci5pc1Jlc3RvcmVkU2Vzc2lvblRhYih0YWJJZCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBmaW5kVGFiVVJMKHRhYklkOiBNYXliZTxUYWJJZD4pOiBNYXliZTxVUkw+IHtcclxuICAgICAgICBpZiAobm9uZSh0YWJJZCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IHdlYlJlcXVlc3RMaXN0ZW5lclVSTCA9IHRoaXMudGFiVVJMcy5nZXQodGFiSWQpO1xyXG5cclxuICAgICAgICBsZXQgdGFiU3RhbGtlclVSTDogTWF5YmU8VVJMPiA9IHVuZGVmaW5lZDtcclxuICAgICAgICBjb25zdCB1cmxPclNwZWMgPSB0aGlzLnRhYlN0YWxrZXIuZmluZFRhYlVSTCh0YWJJZCk7XHJcbiAgICAgICAgaWYgKHNvbWUodXJsT3JTcGVjKSkge1xyXG4gICAgICAgICAgICB0YWJTdGFsa2VyVVJMID0gcGFyc2VVUkxJZk5lY2Vzc2FyeSh1cmxPclNwZWMpXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBDaGVjayBib3RoIHRoZSBUYWJTdGFsa2VyIGFuZCBXZWJSZXF1ZXN0TGlzdGVuZXIgVGFiSWQgLT4gVVJMIG1hcHMuXHJcbiAgICAgICAgLy8gVGhlIFRhYlN0YWxrZXIgcmVsaWVzIG9uIGNocm9tZS50YWJzIGV2ZW50cyBhbmQgdGhlIFdlYlJlcXVlc3RMaXN0ZW5lclxyXG4gICAgICAgIC8vIHVwZGF0ZXMgaXRzIG1hcCB2aWEgb25CZWZvcmVSZXF1ZXN0LiBUaGV5IHNob3VsZCBhZ3JlZSBidXQgdGhleSBjYW5cclxuICAgICAgICAvLyBzb21ldGltZXMgZ2V0IG91dCBvZiBzeW5jIHdpdGggZWFjaCBvdGhlciAoYW5kIHRoZSBicm93c2VyKSwgZm9yXHJcbiAgICAgICAgLy8gZXhhbXBsZSBLUlktNDc3NjMuIElmIGluIGRvdWJ0IHRydXN0IHRoZSBUYWJTdGFsa2VyIHNpbmNlIGl0IHdhc1xyXG4gICAgICAgIC8vIGNvcnJlY3QgaW4gS1JZLTQ3NzYzIGFuZCBGaXJlZm94IGhhcyBoYWQgaXNzdWVzIG5vdCBnZXR0aW5nXHJcbiAgICAgICAgLy8gb25CZWZvcmVSZXF1ZXN0IGV2ZW50cy5cclxuICAgICAgICBpZiAoc29tZSh3ZWJSZXF1ZXN0TGlzdGVuZXJVUkwpICYmIHNvbWUodGFiU3RhbGtlclVSTCkpIHtcclxuICAgICAgICAgICAgaWYgKCFpc1NhbWVVcmwod2ViUmVxdWVzdExpc3RlbmVyVVJMLCB0YWJTdGFsa2VyVVJMKSkge1xyXG4gICAgICAgICAgICAgICAgbG9nRXJyb3IobmV3IEVycm9yKGB3ZWJSZXF1ZXN0TGlzdGVuZXJVUkwgKCR7d2ViUmVxdWVzdExpc3RlbmVyVVJMfSkgYW5kIHRhYlN0YWxrZXJVUkxgICtcclxuICAgICAgICAgICAgICAgICAgICBgICgke3RhYlN0YWxrZXJVUkx9KSBkbyBub3QgbWF0Y2ggZm9yIHRhYiAke3RhYklkfS4gV2lsbCB1c2UgdGFiU3RhbGtlclVSTGApKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gdGFiU3RhbGtlclVSTDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChzb21lKHdlYlJlcXVlc3RMaXN0ZW5lclVSTCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHdlYlJlcXVlc3RMaXN0ZW5lclVSTDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChzb21lKHRhYlN0YWxrZXJVUkwpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0YWJTdGFsa2VyVVJMO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGZpbmRPcGVuZXJUYWJJZCh0YWJJZDogVGFiSWQpOiBNYXliZTxUYWJJZD4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnRhYlN0YWxrZXIuZmluZE9wZW5lclRhYklkKHRhYklkKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGZpbmRPcGVuZXJXaW5kb3dUYWJJZCh3aW5kb3dJZDogV2luZG93SWQpOiBNYXliZTxUYWJJZD4ge1xyXG4gICAgICAgIGNvbnN0IGlkcyA9IHRoaXMudGFiU3RhbGtlci5maW5kT3BlbmVyV2luZG93SWQod2luZG93SWQpO1xyXG4gICAgICAgIGlmIChub25lKGlkcykpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgWywgb3BlbmVyVGFiSWRdID0gaWRzO1xyXG4gICAgICAgIHJldHVybiBvcGVuZXJUYWJJZDtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGZpbmRQYXJlbnRUYWJJZHModGFiSWQ6IFRhYklkLCBpc05ld1RhYjogYm9vbGVhbik6IFRhYklkW10ge1xyXG4gICAgICAgIGNvbnN0IGZpbHRlclVuaXF1ZVRhYklkcyA9ICh0YWJJZHM6IFRhYklkW10pOiBUYWJJZFtdID0+IHtcclxuICAgICAgICAgICAgY29uc3QgdW5pcXVlVGFic0lkczogVGFiSWRbXSA9IFtdO1xyXG4gICAgICAgICAgICBjb25zdCB1bm9yZGVyZWRVbmlxdWVUYWJJZHMgPSBuZXcgU2V0PFRhYklkPigpO1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IHRhYklkIG9mIHRhYklkcykge1xyXG4gICAgICAgICAgICAgICAgaWYgKCF1bm9yZGVyZWRVbmlxdWVUYWJJZHMuaGFzKHRhYklkKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHVub3JkZXJlZFVuaXF1ZVRhYklkcy5hZGQodGFiSWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIHVuaXF1ZVRhYnNJZHMucHVzaCh0YWJJZCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHVuaXF1ZVRhYnNJZHM7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgY29uc3QgcmVtb3ZlVGFiSWQgPSAodGFiSWRzOiBUYWJJZFtdLCB0YWJJZFRvUmVtb3ZlOiBUYWJJZCk6IFRhYklkW10gPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gdGFiSWRzLmZpbHRlcigodGFiSWQpID0+IHRhYklkICE9PSB0YWJJZFRvUmVtb3ZlKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBjb25zdCBpc1NhbWVUYWIgPSAocGFyZW50VGFiSWQ6IFRhYklkKSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiB0YWJJZCA9PT0gcGFyZW50VGFiSWQ7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgbGV0IHBhcmVudFRhYklkcyA9IFtdO1xyXG4gICAgICAgIGNvbnN0IG9wZW5lclRhYklkID0gdGhpcy5maW5kT3BlbmVyVGFiSWQodGFiSWQpO1xyXG4gICAgICAgIGlmIChzb21lKG9wZW5lclRhYklkKSAmJiAhaXNTYW1lVGFiKG9wZW5lclRhYklkKSkge1xyXG4gICAgICAgICAgICBwYXJlbnRUYWJJZHMucHVzaChvcGVuZXJUYWJJZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGFjdGl2YXRlZFRhYklkID0gdGhpcy50YWJTdGFsa2VyLmFjdGl2YXRlZFRhYklkO1xyXG4gICAgICAgIGlmIChzb21lKGFjdGl2YXRlZFRhYklkKSkge1xyXG4gICAgICAgICAgICBpZighaXNTYW1lVGFiKGFjdGl2YXRlZFRhYklkKSkge1xyXG4gICAgICAgICAgICAgICAgcGFyZW50VGFiSWRzLnB1c2goYWN0aXZhdGVkVGFiSWQpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gQ2hlY2sgdGhlIGxhc3QgYWN0aXZhdGVkIHRhYiBpZCBzaW5jZSB0aGUgdGFiIGFjdGl2YXRpb24gbWF5XHJcbiAgICAgICAgICAgICAgICAvLyBoYXZlIGNoYW5nZWQgZnJvbSB0aGUgY29ycmVjdCBwYXJlbnQgdGFiIHRvIHRoZSBjdXJyZW50IHRhYlxyXG4gICAgICAgICAgICAgICAgLy8ganVzdCBiZWZvcmUgdGhlIG9uQmVmb3JlUmVxdWVzdCBldmVudC5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGxhc3RBY3RpdmF0ZWRUYWJJZCA9IHRoaXMudGFiU3RhbGtlci5sYXN0QWN0aXZhdGVkVGFiSWQ7XHJcbiAgICAgICAgICAgICAgICBpZiAoc29tZShsYXN0QWN0aXZhdGVkVGFiSWQpICYmICFpc1NhbWVUYWIobGFzdEFjdGl2YXRlZFRhYklkKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudFRhYklkcy5wdXNoKGxhc3RBY3RpdmF0ZWRUYWJJZCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gVE9ETyAtIHNob3VsZCB3ZSBjaGVjayB0aGUgbGFzdEZvY3VzZWRXaW5kb3dMYXN0QWN0aXZhdGVkVGFiSWQ/XHJcbiAgICAgICAgY29uc3QgbGFzdEZvY3VzZWRXaW5kb3dBY3RpdmF0ZWRUYWJJZCA9IHRoaXMudGFiU3RhbGtlci5sYXN0Rm9jdXNlZFdpbmRvd0FjdGl2YXRlZFRhYklkO1xyXG4gICAgICAgIGlmIChzb21lKGxhc3RGb2N1c2VkV2luZG93QWN0aXZhdGVkVGFiSWQpICYmICFpc1NhbWVUYWIobGFzdEZvY3VzZWRXaW5kb3dBY3RpdmF0ZWRUYWJJZCkpIHtcclxuICAgICAgICAgICAgcGFyZW50VGFiSWRzLnB1c2gobGFzdEZvY3VzZWRXaW5kb3dBY3RpdmF0ZWRUYWJJZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IG1heWJlTmV3V2luZG93SWQgPSB0aGlzLnRhYlN0YWxrZXIubWF5YmVOZXdXaW5kb3dJZDtcclxuICAgICAgICBpZiAoc29tZShtYXliZU5ld1dpbmRvd0lkKSAmJiBpc05ld1RhYikge1xyXG4gICAgICAgICAgICBjb25zdCBvcGVuZXJXaW5kb3dUYWJJZCA9IHRoaXMuZmluZE9wZW5lcldpbmRvd1RhYklkKG1heWJlTmV3V2luZG93SWQpO1xyXG4gICAgICAgICAgICBpZiAoc29tZShvcGVuZXJXaW5kb3dUYWJJZCkgJiYgIWlzU2FtZVRhYihvcGVuZXJXaW5kb3dUYWJJZCkpIHtcclxuICAgICAgICAgICAgICAgIHBhcmVudFRhYklkcy5wdXNoKG9wZW5lcldpbmRvd1RhYklkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBsYXN0Rm9jdXNlZFdpbmRvd0lkID0gdGhpcy50YWJTdGFsa2VyLmxhc3RGb2N1c2VkV2luZG93SWQ7XHJcbiAgICAgICAgaWYgKHNvbWUobGFzdEZvY3VzZWRXaW5kb3dJZCkgJiYgaXNOZXdUYWIpIHtcclxuICAgICAgICAgICAgY29uc3QgcG9wdXBXaW5kb3dUYWJJZCA9IHRoaXMudGFiU3RhbGtlci5maW5kUG9wdXBXaW5kb3dUYWJJZChsYXN0Rm9jdXNlZFdpbmRvd0lkKTtcclxuICAgICAgICAgICAgaWYgKHNvbWUocG9wdXBXaW5kb3dUYWJJZCkgJiYgIWlzU2FtZVRhYihwb3B1cFdpbmRvd1RhYklkKSkge1xyXG4gICAgICAgICAgICAgICAgcGFyZW50VGFiSWRzLnB1c2gocG9wdXBXaW5kb3dUYWJJZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuYnJvd3NlciA9PSBCcm93c2VyLmVkZ2UpIHtcclxuICAgICAgICAgICAgLy8gVGhlIGNhbGwgdG8gZmluZFBvcHVwV2luZG93VGFiSWRzIHdhcyBhZGRlZCB0byBlbnN1cmUgdGhhdCBTQlhcclxuICAgICAgICAgICAgLy8gYmxvY2tzIGxpbmsgY2xpY2tzIGZyb20gcG9wdXAgR29vZ2xlIEhhbmdvdXRzIHdpbmRvd3MuIEhvd2V2ZXIsXHJcbiAgICAgICAgICAgIC8vIGl0IGNhbiBjYXVzZSBTQlggdG8gaW5jb3JyZWN0bHkgYmxvY2sgc29tZSBuYXZpZ2F0aW9ucywgc2VlXHJcbiAgICAgICAgICAgIC8vIEtSWS01Mzc5MS4gQnkgcmVseWluZyBvbiB0aGUgfGluaXRpYXRvcnwsIFNCWCBDaHJvbWUgYW5kIEZpcmVmb3hcclxuICAgICAgICAgICAgLy8gd2lsbCBibG9jayBwb3B1cCBIYW5nb3V0cyBsaW5rcyB3aXRob3V0IGZpbmRQb3B1cFdpbmRvd1RhYklkcy5cclxuICAgICAgICAgICAgLy8gVW5mb3J0dW5hdGVseSBFZGdlIGRvZXNuJ3QgcHJvdmlkZSB8aW5pdGlhdG9yfCBzbyB3ZSBzdGlsbCBoYXZlXHJcbiAgICAgICAgICAgIC8vIHRvIGNhbGwgZmluZFBvcHVwV2luZG93VGFiSWRzIChhbmQgc3VmZmVyIHRoZSBidWcgb24gS1JZLTUzNzkxKS5cclxuICAgICAgICAgICAgcGFyZW50VGFiSWRzID0gcGFyZW50VGFiSWRzLmNvbmNhdCh0aGlzLnRhYlN0YWxrZXIuZmluZFBvcHVwV2luZG93VGFiSWRzKCkpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHBhcmVudFRhYklkcyA9IGZpbHRlclVuaXF1ZVRhYklkcyhwYXJlbnRUYWJJZHMpO1xyXG4gICAgICAgIHBhcmVudFRhYklkcyA9IHJlbW92ZVRhYklkKHBhcmVudFRhYklkcywgdGFiSWQpO1xyXG5cclxuICAgICAgICBsb2coYGZpbmRQYXJlbnRUYWJJZHM6ICR7dG9TdHJpbmcoe1xyXG4gICAgICAgICAgICBwYXJlbnRUYWJJZHM6IHBhcmVudFRhYklkcyxcclxuICAgICAgICAgICAgdGFiU3RhbGtlcjogdGhpcy50YWJTdGFsa2VyXHJcbiAgICAgICAgfSl9YCk7XHJcbiAgICAgICAgcmV0dXJuIHBhcmVudFRhYklkcztcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGZpbmRTcmNVUkwodGFiSWQ6IFRhYklkLCBpbml0aWF0b3I6IE1heWJlPHN0cmluZz4sIGluaXRpYXRvcklzU3JjOiBib29sZWFuKTogTWF5YmU8VVJMPiB7XHJcbiAgICAgICAgbGV0IHNyY1VSTCA9IHRoaXMuZmluZFRhYlVSTCh0YWJJZCk7XHJcbiAgICAgICAgLy8gT25seSBsb29rIGF0IHRoZSBpbml0aWF0b3IgaWYgd2UgY2FuJ3QgZmluZCB0aGUgc3JjVVJMIG91cnNlbHZlcy5cclxuICAgICAgICAvLyBTb21ldGltZXMgdGhlIGluaXRhdG9yIHNlZW1zIHdyb25nIHdoZW4gaXQncyBub3QgYSBuZXcgdGFiLCBmb3JcclxuICAgICAgICAvLyBleGFtcGxlIHdoZW4gU0JYIGlzIHJlZGlyZWN0aW5nIGEgbmV3IHRhYiBmcm9tIGFuIE91dGxvb2sgY2xpY2sgdG9cclxuICAgICAgICAvLyB0aGUgYmxvY2tpbmcgcGFnZSB0aGUgaW5pdGlhdG9yIGlzIHN0aWxsIE91dGxvb2suXHJcbiAgICAgICAgaWYgKG5vbmUoc3JjVVJMKSAmJiBpbml0aWF0b3JJc1NyYyAmJiBzb21lKGluaXRpYXRvcikpIHtcclxuICAgICAgICAgICAgc3JjVVJMID0gcGFyc2VVcmwoaW5pdGlhdG9yKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHNyY1VSTDtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGlzQmxvY2tlZFBhZ2VVUkwodXJsOiBNYXliZTxVUkw+KTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYmxvY2tlZFBhZ2VDb250cm9sbGVyLmlzQmxvY2tlZFBhZ2VVUkwodXJsKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGlzQmxvY2tlZEZpbGVQYWdlVVJMKHVybDogTWF5YmU8VVJMPik6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmZpbGVCbG9ja2VyLmlzQmxvY2tlZEZpbGVQYWdlVVJMKHVybCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBpc0V4dGVybmFsQXBwTGlua1VSTCh1cmw6IE1heWJlPFVSTD4pOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5leHRlcm5hbEFwcExpbmtDb250cm9sbGVyLmlzRXh0ZXJuYWxBcHBMaW5rVVJMKHVybCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBpc05ld1RhYlBhZ2VVcmwodXJsOiBNYXliZTxVUkw+KTogYm9vbGVhbiB7XHJcbiAgICAgICAgaWYgKG5vbmUodXJsKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLnBsYWNlbWVudE1hbmFnZXIuaXNOZXdUYWJQYWdlVXJsKHVybCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBpc1BoaXNoaW5nU291cmNlU2l0ZSh1cmw6IE1heWJlPFVSTD4pOiBib29sZWFuIHtcclxuICAgICAgICBpZiAobm9uZSh1cmwpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgaXNQaGlzaGluZ1NvdXJjZVNpdGUgPSB0aGlzLnBsYWNlbWVudE1hbmFnZXIuaXNQaGlzaGluZ1NvdXJjZVNpdGUodXJsKTtcclxuICAgICAgICByZXR1cm4gaXNUcnVlKGlzUGhpc2hpbmdTb3VyY2VTaXRlKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGlzV2ViTWFpbFNpdGUodXJsOiBNYXliZTxVUkw+KTogYm9vbGVhbiB7XHJcbiAgICAgICAgaWYgKG5vbmUodXJsKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGlzV2ViTWFpbFNpdGUgPSB0aGlzLnBsYWNlbWVudE1hbmFnZXIuaXNXZWJNYWlsU2l0ZSh1cmwpO1xyXG4gICAgICAgIHJldHVybiBpc1RydWUoaXNXZWJNYWlsU2l0ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBmaW5kR3JvdXBzKHVybDogTWF5YmU8VVJMPik6IEdyb3VwTmFtZVtdIHtcclxuICAgICAgICBpZiAobm9uZSh1cmwpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBbXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgZ3JvdXBzID0gdGhpcy5wbGFjZW1lbnRNYW5hZ2VyLmZpbmRHcm91cHModXJsKTtcclxuICAgICAgICBpZiAobm9uZShncm91cHMpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBbXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGdyb3VwcztcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNob3VsZEJsb2NrTmF2aWdhdGlvbihpc05ld1RhYjogYm9vbGVhbiwgaXNSZWRpcmVjdDogYm9vbGVhbixcclxuICAgICAgICAgICAgaHR0cE1ldGhvZDogTWF5YmU8SHR0cE1ldGhvZFR5cGU+LCBzcmNVUkw6IE1heWJlPFVSTD4sXHJcbiAgICAgICAgICAgIHBhcmVudFVSTDogTWF5YmU8VVJMPik6IGJvb2xlYW4ge1xyXG4gICAgICAgIGlmIChub25lKGh0dHBNZXRob2QpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgdXJsID0gaXNOZXdUYWIgPyBwYXJlbnRVUkwgOiBzcmNVUkw7XHJcbiAgICAgICAgaWYgKG5vbmUodXJsKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHRhYlR5cGUgPSBpc05ld1RhYiA/IFRhYlR5cGUubmV3VGFiIDogVGFiVHlwZS5zYW1lVGFiO1xyXG4gICAgICAgIGNvbnN0IG5hdlR5cGUgPSBpc1JlZGlyZWN0ID8gTmF2VHlwZS5yZWRpcmVjdCA6IE5hdlR5cGUubmF2aWdhdGlvbjtcclxuICAgICAgICBjb25zdCBzaG91bGRCbG9jayA9IHRoaXMucGxhY2VtZW50TWFuYWdlci5zaG91bGRCbG9ja05hdmlnYXRpb24odGFiVHlwZSwgbmF2VHlwZSwgaHR0cE1ldGhvZCwgdXJsKTtcclxuICAgICAgICByZXR1cm4gaXNUcnVlKHNob3VsZEJsb2NrKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGlzQXV0aFJlcXVlc3Qoc3JjVVJMOiBNYXliZTxVUkw+LCBkZXN0VVJMOiBNYXliZTxVUkw+KTogYm9vbGVhbiB7XHJcbiAgICAgICAgaWYgKG5vbmUoc3JjVVJMKSB8fCBub25lKGRlc3RVUkwpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3Qgc2l0ZVJlcXVpcmVzQXV0aCA9IHRoaXMucGxhY2VtZW50TWFuYWdlci5zaXRlUmVxdWlyZXNBdXRoKHNyY1VSTCk7XHJcbiAgICAgICAgY29uc3QgaXNBdXRoU2l0ZSA9IHRoaXMucGxhY2VtZW50TWFuYWdlci5pc0F1dGhTaXRlKGRlc3RVUkwpO1xyXG4gICAgICAgIGNvbnN0IGlzQXV0aFJlcXVlc3QgPSBpc1RydWUoc2l0ZVJlcXVpcmVzQXV0aCkgJiYgaXNUcnVlKGlzQXV0aFNpdGUpO1xyXG4gICAgICAgIHJldHVybiBpc0F1dGhSZXF1ZXN0O1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgaXNUcnVzdGVkVVJMKHVybDogTWF5YmU8VVJMPik6IFtib29sZWFuLCBib29sZWFuXSB7XHJcbiAgICAgICAgY29uc3QgaXNUcnVzdGVkID0gdHJ1ZTtcclxuICAgICAgICBjb25zdCBpc1VudHJ1c3RlZCA9IHRydWU7XHJcbiAgICAgICAgaWYgKG5vbmUodXJsKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gWyFpc1RydXN0ZWQsICFpc1VudHJ1c3RlZF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGlzVHJ1c3RlZFVSTCA9IHRoaXMucGxhY2VtZW50TWFuYWdlci5pc1RydXN0ZWRVcmwodXJsKTtcclxuICAgICAgICBpZiAobm9uZShpc1RydXN0ZWRVUkwpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBbIWlzVHJ1c3RlZCwgIWlzVW50cnVzdGVkXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIFtpc1RydXN0ZWRVUkwsICFpc1RydXN0ZWRVUkxdO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgaXNUcnVzdGVkRmlsZVVSTChmaWxlVVJMOiBNYXliZTxVUkw+KTogW2Jvb2xlYW4sIGJvb2xlYW4sIGJvb2xlYW5dIHtcclxuICAgICAgICBjb25zdCBpc0ZpbGVVUkwgPSB0cnVlO1xyXG4gICAgICAgIGNvbnN0IGlzVHJ1c3RlZCA9IHRydWU7XHJcbiAgICAgICAgY29uc3QgaXNVbnRydXN0ZWQgPSB0cnVlO1xyXG4gICAgICAgIGlmIChub25lKGZpbGVVUkwpIHx8ICFpc0ZpbGVVcmwoZmlsZVVSTCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFshaXNGaWxlVVJMLCAhaXNUcnVzdGVkLCAhaXNVbnRydXN0ZWRdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBpc1RydXN0ZWRGaWxlVVJMID0gdGhpcy5wbGFjZW1lbnRNYW5hZ2VyLmlzVHJ1c3RlZEZpbGVVcmwoZmlsZVVSTCk7XHJcbiAgICAgICAgaWYgKG5vbmUoaXNUcnVzdGVkRmlsZVVSTCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFtpc0ZpbGVVUkwsICFpc1RydXN0ZWQsICFpc1VudHJ1c3RlZF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBbaXNGaWxlVVJMLCBpc1RydXN0ZWRGaWxlVVJMLCAhaXNUcnVzdGVkRmlsZVVSTF07XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBpc1NhbWVPcmlnaW4oc3JjVVJMOiBNYXliZTxVUkw+LCBkZXN0VVJMOiBNYXliZTxVUkw+KTogYm9vbGVhbiB7XHJcbiAgICAgICAgaWYgKG5vbmUoc3JjVVJMKSB8fCBub25lKGRlc3RVUkwpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3Qgc3JjT3JpZ2luID0gcGFyc2VPcmlnaW4oc3JjVVJMKTtcclxuICAgICAgICBjb25zdCBkZXN0T3JpZ2luID0gcGFyc2VPcmlnaW4oZGVzdFVSTCk7XHJcbiAgICAgICAgaWYgKG5vbmUoc3JjT3JpZ2luKSB8fCBub25lKGRlc3RPcmlnaW4pKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGlzU2FtZU9yaWdpbihzcmNPcmlnaW4sIGRlc3RPcmlnaW4pO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgaXNSZWRpcmVjdChyZXF1ZXN0SWQ6IFJlcXVlc3RJZCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnBlbmRpbmdSZWRpcmVjdHMuaGFzKHJlcXVlc3RJZCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjbGVhclBlbmRpbmdSZWRpcmVjdChyZXF1ZXN0SWQ6IFJlcXVlc3RJZCkge1xyXG4gICAgICAgIHRoaXMucGVuZGluZ1JlZGlyZWN0cy5kZWxldGUocmVxdWVzdElkKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBSZXR1cm5zIHRydWUgaWYgbGF1bmNoQnJvd3NlciB3b3VsZCByZXR1cm4gdHJ1ZS4gT3RoZXJ3aXNlIGZhbHNlLlxyXG4gICAgcHJpdmF0ZSBjYW5MYXVuY2hCcm93c2VyKHVybDogVVJMKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYnJvd3NlckxhdW5jaGVyLmNhbkxhdW5jaEJyb3dzZXIodXJsKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGxhdW5jaEJyb3dzZXIodXJsIDogTWF5YmU8VVJMPikgOiB2b2lkIHtcclxuICAgICAgICBpZiAobm9uZSh1cmwpKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5icm93c2VyTGF1bmNoZXIubGF1bmNoQnJvd3Nlcih1cmwsICgpID0+IHt9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGxhdW5jaEJyb3dzZXJBbmRDbG9zZVRhYk9yTmF2aWdhdGVUYWIodGFiSWQ6IFRhYklkLCB1cmw6IE1heWJlPFVSTD4sIGNsb3NlVGFiOiBib29sZWFuKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKG5vbmUodXJsKSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuYnJvd3NlckxhdW5jaGVyLmxhdW5jaEJyb3dzZXJBbmRDbG9zZVRhYk9yTmF2aWdhdGVUYWIodGFiSWQsIHVybCwgY2xvc2VUYWIpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgY2xvc2VUYWIodGFiSWQ6IFRhYklkLCBvblRhYkNsb3NlZDogKHRhYklkOiBUYWJJZCkgPT4gdm9pZCA9ICgpID0+IHt9KSB7XHJcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgIGNocm9tZS50YWJzLnJlbW92ZSh0YWJJZCwgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgbG9nKGBXZWJSZXF1ZXN0TGlzdGVuZXIuY2xvc2VUYWI6IHRhYklkOiAke3RhYklkfWApO1xyXG4gICAgICAgICAgICAgICAgb25UYWJDbG9zZWQodGFiSWQpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9LCAxMDApO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgY2xvc2VUYWJBbmRMYXVuY2hCcm93c2VyKHRhYklkOiBUYWJJZCwgdXJsOiBNYXliZTxVUkw+KSB7XHJcbiAgICAgICAgdGhpcy5jbG9zZVRhYih0YWJJZCwgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmxhdW5jaEJyb3dzZXIodXJsKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGNyZWF0ZVRhYih1cmw6IHN0cmluZywgb25UYWJDcmVhdGVkOiAodGFiOiBjaHJvbWUudGFicy5UYWIpID0+IHZvaWQgPSAoKSA9PiB7fSkge1xyXG4gICAgICAgIGNocm9tZS50YWJzLmNyZWF0ZSh7IHVybDogdXJsIH0sICh0YWIpID0+IHtcclxuICAgICAgICAgICAgbG9nKGBXZWJSZXF1ZXN0TGlzdGVuZXIuY3JlYXRlVGFiOiAke3RvU3RyaW5nKHtcclxuICAgICAgICAgICAgICAgIHRhYklkOiB0YWIuaWQsXHJcbiAgICAgICAgICAgICAgICB1cmw6IHVybFxyXG4gICAgICAgICAgICB9KX1gKTtcclxuICAgICAgICAgICAgb25UYWJDcmVhdGVkKHRhYik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBvblRhYkNsb3NlZCh0YWJJZDogVGFiSWQpIHtcclxuICAgICAgICBsb2coYFdlYlJlcXVlc3RMaXN0ZW5lci5vblRhYkNsb3NlZDogdGFiSWQ6ICR7dGFiSWR9YCk7XHJcbiAgICAgICAgdGhpcy50YWJVUkxzLmRlbGV0ZSh0YWJJZCk7XHJcbiAgICAgICAgdGhpcy50YWJzLmRlbGV0ZSh0YWJJZCk7XHJcbiAgICAgICAgdGhpcy5kZWxheWVkVGFicy5kZWxldGUodGFiSWQpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZGV0ZWN0ZWRUYWIodGFiSWQ6IFRhYklkKTogYm9vbGVhbiB7XHJcbiAgICAgICAgY29uc3QgaXNOZXdUYWIgPSAhdGhpcy50YWJzLmhhcyh0YWJJZCk7XHJcbiAgICAgICAgaWYgKGlzTmV3VGFiKSB7XHJcbiAgICAgICAgICAgIHRoaXMudGFicy5hZGQodGFiSWQpO1xyXG4gICAgICAgICAgICB0aGlzLnBoaXNoaW5nTmF2U2VxdWVuY2VEZXRlY3Rvci5vblRhYkRldGVjdGVkKHRhYklkKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGlzTmV3VGFiO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZGlkVXNlckNyZWF0ZVRhYih0YWJJZDogVGFiSWQpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy50YWJTdGFsa2VyLmRpZFVzZXJDcmVhdGVUYWIodGFiSWQpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgb25UYWJOYXZpZ2F0ZWQodGFiSWQ6IFRhYklkLCB1cmw6IE1heWJlPFVSTD4pIHtcclxuICAgICAgICBpZiAobm9uZSh1cmwpKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy50YWJVUkxzLnNldCh0YWJJZCwgdXJsKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGRldGVjdGVkRXh0ZXJuYWxBcHBMaW5rKHRhYklkOiBUYWJJZCkge1xyXG4gICAgICAgIHRoaXMuZXh0ZXJuYWxBcHBMaW5rQ29udHJvbGxlci5vbkV4dGVybmFsQXBwTGlua0RldGVjdGVkKHRhYklkKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGRldGVjdGVkUGFyZW50VGFiKHRhYklkOiBUYWJJZCwgdXJsOiBNYXliZTxVUkw+LFxyXG4gICAgICAgICAgICB1cmxDYXRlZ29yeTogVXJsQ2F0ZWdvcnksIGdyb3VwczogR3JvdXBOYW1lW10pIHtcclxuICAgICAgICBpZiAobm9uZSh1cmwpKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuaXNCbG9ja2VkUGFnZVVSTCh1cmwpKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCF0aGlzLnBoaXNoaW5nTmF2U2VxdWVuY2VEZXRlY3Rvci5vblBhcmVudFRhYkRldGVjdGVkKFxyXG4gICAgICAgICAgICAgICAgdGFiSWQsIHVybCwgdXJsQ2F0ZWdvcnksIGdyb3VwcykpIHtcclxuICAgICAgICAgICAgbG9nRXJyb3IobmV3IEVycm9yKGBXZWJSZXF1ZXN0TGlzdGVuZXIuZGV0ZWN0ZWRQYXJlbnRUYWI6ICR7dG9TdHJpbmcoe1xyXG4gICAgICAgICAgICAgICAgdGFiSWQ6IHRhYklkLFxyXG4gICAgICAgICAgICAgICAgdXJsOiB1cmwsXHJcbiAgICAgICAgICAgICAgICB1cmxDYXRlZ29yeTogdXJsQ2F0ZWdvcnlUb1N0cmluZyh1cmxDYXRlZ29yeSksXHJcbiAgICAgICAgICAgICAgICBncm91cHM6IGdyb3Vwc1xyXG4gICAgICAgICAgICB9KX1gKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZGV0ZWN0UGhpc2hpbmdOYXZTZXF1ZW5jZSh1cmw6IE1heWJlPFVSTD4sXHJcbiAgICAgICAgICAgIGRvRGV0ZWN0OiAocGhpc2hpbmdOYXZTZXF1ZW5jZURldGVjdG9yOiBQaGlzaGluZ05hdlNlcXVlbmNlRGV0ZWN0b3IsIHVybDogVVJMKSA9PiBJTmF2U2VxdWVuY2VEZXRlY3Rpb25zKTogSU5hdlNlcXVlbmNlRGV0ZWN0aW9ucyB7XHJcbiAgICAgICAgaWYgKG5vbmUodXJsKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEVtcHR5TmF2U2VxdWVuY2VEZXRlY3Rpb25zKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmlzQmxvY2tlZFBhZ2VVUkwodXJsKSB8fCB0aGlzLmlzQmxvY2tlZEZpbGVQYWdlVVJMKHVybCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBFbXB0eU5hdlNlcXVlbmNlRGV0ZWN0aW9ucygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZG9EZXRlY3QodGhpcy5waGlzaGluZ05hdlNlcXVlbmNlRGV0ZWN0b3IsIHVybCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBkZXRlY3RQaGlzaGluZ05hdlNlcXVlbmNlT25OYXZpZ2F0ZSh0YWJJZDogVGFiSWQsIHVybDogTWF5YmU8VVJMPixcclxuICAgICAgICAgICAgdXJsQ2F0ZWdvcnk6IFVybENhdGVnb3J5LCBncm91cHM6IEdyb3VwTmFtZVtdLCBpc05ld1RhYjogYm9vbGVhbiwgZGlkVXNlckNyZWF0ZVRhYjogYm9vbGVhbik6IElOYXZTZXF1ZW5jZURldGVjdGlvbnMge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRldGVjdFBoaXNoaW5nTmF2U2VxdWVuY2UodXJsLCAocGhpc2hpbmdOYXZTZXF1ZW5jZURldGVjdG9yLCB1cmwpID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHBoaXNoaW5nTmF2U2VxdWVuY2VEZXRlY3Rvci5vbk5hdmlnYXRlKHRhYklkLCB1cmwsIHVybENhdGVnb3J5LCBncm91cHMsIGlzTmV3VGFiLCBkaWRVc2VyQ3JlYXRlVGFiKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGRldGVjdFBoaXNoaW5nTmF2U2VxdWVuY2VPblJlZGlyZWN0KHRhYklkOiBUYWJJZCwgdXJsOiBNYXliZTxVUkw+LFxyXG4gICAgICAgICAgICB1cmxDYXRlZ29yeTogVXJsQ2F0ZWdvcnksIGdyb3VwczogR3JvdXBOYW1lW10pOiBJTmF2U2VxdWVuY2VEZXRlY3Rpb25zIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5kZXRlY3RQaGlzaGluZ05hdlNlcXVlbmNlKHVybCwgKHBoaXNoaW5nTmF2U2VxdWVuY2VEZXRlY3RvciwgdXJsKSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBwaGlzaGluZ05hdlNlcXVlbmNlRGV0ZWN0b3Iub25SZWRpcmVjdCh0YWJJZCwgdXJsLCB1cmxDYXRlZ29yeSwgZ3JvdXBzKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGRldGVjdFBoaXNoaW5nTmF2U2VxdWVuY2VPbkNvbnRlbnRUeXBlKHRhYklkOiBUYWJJZCwgdXJsOiBNYXliZTxVUkw+LFxyXG4gICAgICAgICAgICB1cmxDYXRlZ29yeTogVXJsQ2F0ZWdvcnksIGdyb3VwczogR3JvdXBOYW1lW10sIGNvbnRlbnRUeXBlOiBNYXliZTxDb250ZW50VHlwZT4pOiBJTmF2U2VxdWVuY2VEZXRlY3Rpb25zIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5kZXRlY3RQaGlzaGluZ05hdlNlcXVlbmNlKHVybCwgKHBoaXNoaW5nTmF2U2VxdWVuY2VEZXRlY3RvciwgdXJsKSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBwaGlzaGluZ05hdlNlcXVlbmNlRGV0ZWN0b3Iub25Db250ZW50VHlwZSh0YWJJZCwgdXJsLCB1cmxDYXRlZ29yeSwgZ3JvdXBzLCBjb250ZW50VHlwZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBoYXNIaWdoZXJQcmVjZWRlbmNlVGhhbkJ1aWx0aW4obmF2U2VxdWVuY2VEZXRlY3Rpb25zOiBJTmF2U2VxdWVuY2VEZXRlY3Rpb25zKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucGhpc2hpbmdOYXZTZXF1ZW5jZURldGVjdG9yLmhhc0hpZ2hlclByZWNlZGVuY2VUaGFuQnVpbHRpbihuYXZTZXF1ZW5jZURldGVjdGlvbnMpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgY2F0ZWdvcml6ZVVSTCh1cmw6IE1heWJlPFVSTD4pOiBVcmxDYXRlZ29yeSB7XHJcbiAgICAgICAgY29uc3QgW2lzVHJ1c3RlZFVSTCwgaXNVbnRydXN0ZWRVUkxdID0gdGhpcy5pc1RydXN0ZWRVUkwodXJsKTtcclxuICAgICAgICBjb25zdCBpc1BoaXNoaW5nU291cmNlU2l0ZSA9IHRoaXMuaXNQaGlzaGluZ1NvdXJjZVNpdGUodXJsKTtcclxuICAgICAgICBjb25zdCBpc1dlYk1haWxTaXRlID0gdGhpcy5pc1dlYk1haWxTaXRlKHVybCk7XHJcbiAgICAgICAgY29uc3QgaXNFeHRlcm5hbEFwcExpbmtVUkwgPSB0aGlzLmlzRXh0ZXJuYWxBcHBMaW5rVVJMKHVybCk7XHJcblxyXG4gICAgICAgIGNvbnN0IHVybENhdGVnb3J5ID0gY2F0ZWdvcml6ZVVybChpc1RydXN0ZWRVUkwsIGlzVW50cnVzdGVkVVJMLFxyXG4gICAgICAgICAgICAgICAgaXNQaGlzaGluZ1NvdXJjZVNpdGUsIGlzV2ViTWFpbFNpdGUsIGlzRXh0ZXJuYWxBcHBMaW5rVVJMKTtcclxuXHJcbiAgICAgICAgbG9nKGBXZWJSZXF1ZXN0TGlzdGVuZXIuY2F0ZWdvcml6ZVVSTDogJHt0b1N0cmluZyh7XHJcbiAgICAgICAgICAgIHVybDogdXJsLFxyXG4gICAgICAgICAgICBpc1RydXN0ZWRVUkw6IGlzVHJ1c3RlZFVSTCxcclxuICAgICAgICAgICAgaXNVbnRydXN0ZWRVUkw6IGlzVW50cnVzdGVkVVJMLFxyXG4gICAgICAgICAgICBpc1BoaXNoaW5nU291cmNlU2l0ZTogaXNQaGlzaGluZ1NvdXJjZVNpdGUsXHJcbiAgICAgICAgICAgIGlzV2ViTWFpbFNpdGU6IGlzV2ViTWFpbFNpdGUsXHJcbiAgICAgICAgICAgIGlzRXh0ZXJuYWxBcHBMaW5rVVJMOiBpc0V4dGVybmFsQXBwTGlua1VSTCxcclxuICAgICAgICAgICAgdXJsQ2F0ZWdvcnk6IHVybENhdGVnb3J5VG9TdHJpbmcodXJsQ2F0ZWdvcnkpXHJcbiAgICAgICAgfSl9YCk7XHJcblxyXG4gICAgICAgIHJldHVybiB1cmxDYXRlZ29yeTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGdldCBzaG91bGRPcGVuUGhpc2hpbmdMaW5rc0luU2VjdXJlQnJvd3NlcigpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5wbGFjZW1lbnRNYW5hZ2VyLnNob3VsZE9wZW5QaGlzaGluZ0xpbmtzSW5TZWN1cmVCcm93c2VyO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgaXNCbG9ja2VkUGFnZUNvbnRpbnVlTmF2aWdhdGlvbihzcmNVUkw6IE1heWJlPFVSTD4sIGRlc3RVUkw6IE1heWJlPFVSTD4pOiBib29sZWFuIHtcclxuICAgICAgICBpZiAodGhpcy5pc0Jsb2NrZWRQYWdlVVJMKHNyY1VSTCkpIHtcclxuICAgICAgICAgICAgY29uc3Qgc3JjQmxvY2tlZFBhZ2VOYXZpZ2F0ZVRvVVJMID0gZmluZFVSTERvY3VtZW50UXVlcnlQYXJhbShzcmNVUkwsIE9wdGlvbk5hbWVzLm5hdmlnYXRlVG9TcGVjKTtcclxuICAgICAgICAgICAgaWYgKHNvbWUoZGVzdFVSTCkgJiYgc29tZShzcmNCbG9ja2VkUGFnZU5hdmlnYXRlVG9VUkwpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gaXNTYW1lVXJsKGRlc3RVUkwsIHNyY0Jsb2NrZWRQYWdlTmF2aWdhdGVUb1VSTCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgY29udGludWVOYXZpZ2F0aW9uKCk6IGNocm9tZS53ZWJSZXF1ZXN0LkJsb2NraW5nUmVzcG9uc2Uge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGNhbmNlbDogZmFsc2VcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYmxvY2tOYXZpZ2F0aW9uKCk6IGNocm9tZS53ZWJSZXF1ZXN0LkJsb2NraW5nUmVzcG9uc2Uge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGNhbmNlbDogdHJ1ZVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSByZWRpcmVjdE5hdmlnYXRpb24odGFiSWQ6IFRhYklkLCB1cmw6IE1heWJlPFVSTD4pOiBjaHJvbWUud2ViUmVxdWVzdC5CbG9ja2luZ1Jlc3BvbnNlIHtcclxuICAgICAgICBpZiAobm9uZSh1cmwpKSB7XHJcbiAgICAgICAgICAgIC8vIFdlIHNob3VsZCBjYWxsIG9uVGFiTmF2aWdhdGVkIGhlcmUgYnV0IGl0IGRvZXNuJ3QgcmVhbGx5IG1hdHRlclxyXG4gICAgICAgICAgICAvLyB3aGVuIHdlJ3ZlIGFscmVhZHkgaGl0IGFuIGVycm9yIHdoaWxlIHRyeWluZyB0byByZWRpcmVjdC5cclxuICAgICAgICAgICAgbG9nRXJyb3IobmV3IEVycm9yKFwiSW52YWxpZCByZWRpcmVjdCBVUkwuIExldHRpbmcgbmF2aWdhdGlvbiBwcm9jZWVkXCIpKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29udGludWVOYXZpZ2F0aW9uKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBVcGRhdGUgdGhlIFdlYlJlcXVlc3RMaXN0ZW5lciBUYWJJZCAtPiBVUkwgbWFwLlxyXG4gICAgICAgIHRoaXMub25UYWJOYXZpZ2F0ZWQodGFiSWQsIHVybCk7XHJcblxyXG4gICAgICAgIC8vIEluIFJlZHN0b25lIDQgRWRnZSBubyBsb25nZXIgYWxsb3dzIHJlZGlyZWN0cyB0byBleHRlbnNpb24gVVJMcy5cclxuICAgICAgICAvLyBodHRwczovL2RldmVsb3Blci5taWNyb3NvZnQuY29tL2VuLXVzL21pY3Jvc29mdC1lZGdlL3BsYXRmb3JtL2lzc3Vlcy8xNzk1MDEyMy9cclxuICAgICAgICBpZiAodGhpcy5icm93c2VyID09PSBCcm93c2VyLmVkZ2UgJiYgaXNFeHRlbnNpb25VcmwodXJsKSkge1xyXG4gICAgICAgICAgICB0aGlzLmNyZWF0ZVRhYihVUkxUb1N0cmluZyh1cmwpLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlVGFiKHRhYklkKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmJsb2NrTmF2aWdhdGlvbigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgcmVkaXJlY3RVcmw6IFVSTFRvU3RyaW5nKHVybClcclxuICAgICAgICB9O1xyXG4gICAgfTtcclxuXHJcbiAgICBwcml2YXRlIGxhdW5jaEJyb3dzZXJBbmRDbG9zZVRhYih0YWJJZDogVGFiSWQsIGxhdW5jaFVSTDogTWF5YmU8VVJMPiwgcmVkaXJlY3RVUkw6IE1heWJlPFVSTD4gPSB1bmRlZmluZWQpOiBjaHJvbWUud2ViUmVxdWVzdC5CbG9ja2luZ1Jlc3BvbnNlIHtcclxuICAgICAgICBpZiAobm9uZShsYXVuY2hVUkwpIHx8ICF0aGlzLmNhbkxhdW5jaEJyb3dzZXIobGF1bmNoVVJMKSkge1xyXG4gICAgICAgICAgICAvLyBXZSBzaG91bGQgY2FsbCBvblRhYk5hdmlnYXRlZCBoZXJlIGJ1dCBpdCBkb2Vzbid0IHJlYWxseSBtYXR0ZXJcclxuICAgICAgICAgICAgLy8gd2hlbiB3ZSd2ZSBhbHJlYWR5IGhpdCBhbiBlcnJvciB3aGlsZSB0cnlpbmcgdG8gcmVkaXJlY3QuXHJcbiAgICAgICAgICAgIGxvZ0Vycm9yKG5ldyBFcnJvcihcIkNhbid0IGxhdW5jaCBTZWN1cmUgQnJvd3Nlci4gTGV0dGluZyBuYXZpZ2F0aW9uIHByb2NlZWRcIikpO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb250aW51ZU5hdmlnYXRpb24oKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEluIHNvbWUgY2FzZXMgd2Ugd2FudCB0byByZWRpcmVjdCB0aGUgbmF2aWdhdGlvbiBhbmQga2VlcCB0aGUgdGFiIG9wZW5cclxuICAgICAgICAvLyBpbnN0ZWFkIG9mIGNhbmNlbGxpbmcgdGhlIG5hdmlnYXRpb24gYW5kIGNsb3NpbmcgdGhlIG5hdGl2ZSBicm93c2VyIHRhYi5cclxuICAgICAgICAvLyBGb3IgZXhhbXBsZSwgd2hlbiB0aGUgdXNlciBuYXZpZ2F0ZXMgdG8gYSBQREYgaW4gdGhlIHNhbWUgdGFiIHRoZXkgZ2V0XHJcbiAgICAgICAgLy8gYSBiZXR0ZXIgZXhwZXJpZW5jZSAoa2VlcGluZyBoaXN0b3J5IGV0Yy4pIGlmIHdlIHJlZGlyZWN0IHRoZW0gYmFjayB0b1xyXG4gICAgICAgIC8vIHRoZSBzcmNVUkwgYW5kIG9wZW4gdGhlIFBERiBpbiB0aGUgU2VjdXJlIEJyb3dzZXIuXHJcbiAgICAgICAgY29uc3Qgc2hvdWxkUmVkaXJlY3RBbmRLZWVwVGFiID0gc29tZShyZWRpcmVjdFVSTCkgJiYgIWlzU2FtZVVybChsYXVuY2hVUkwsIHJlZGlyZWN0VVJMKTtcclxuXHJcbiAgICAgICAgLy8gQ2hlY2sgdGhhdCB0aGUgdGFiSWQgY29ycmVzcG9uZHMgdG8gYSByZWFsIHRhYiBiZWZvcmUgbGF1bmNoaW5nIHRoZVxyXG4gICAgICAgIC8vIHNlY3VyZSBicm93c2VyLCB0aGlzIGNoZWNrIHdpbGwgZmFpbCB3aGVuIENocm9tZSBwcmUtbG9hZHMgYSB3ZWIgcGFnZVxyXG4gICAgICAgIC8vIHdoaWxlIHRoZSB1c2VyIGlzIHR5cGluZyB0aGUgVVJMIGluIHRoZSBhZGRyZXNzIGJhci4gVGhpcyBjaGVjayBzdG9wc1xyXG4gICAgICAgIC8vIGFuIGV4dHJhIHRhYiBiZWluZyBvcGVuZWQgaW4gQnJDaHJvbWUgd2hlbiBhIHVzZXIgZG9lcyBhbiB1bnRydXN0ZWRcclxuICAgICAgICAvLyBhZGRyZXNzIGJhciBuYXZpZ2F0aW9uLlxyXG4gICAgICAgIGNocm9tZS50YWJzLmdldCh0YWJJZCwgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBlcnIgPSBjaHJvbWUucnVudGltZS5sYXN0RXJyb3I7XHJcbiAgICAgICAgICAgIGlmIChlcnIpIHtcclxuICAgICAgICAgICAgICAgIGxvZyhgbGF1bmNoQnJvd3NlciB3aWxsIG5vdCBiZSBjYWxsZWQgYmVjYXVzZSBhbiBlcnJvciBgICtcclxuICAgICAgICAgICAgICAgICAgICBgd2FzIGVuY291bnRlcmVkIHdoaWxlIGNoZWNraW5nIGlmIHRoZSB0YWJJZCAoJHt0YWJJZH0pIHdhcyBgICtcclxuICAgICAgICAgICAgICAgICAgICBgdmFsaWQgaW4gb25CZWZvcmVSZXF1ZXN0OiBibG9ja1VudHJ1c3RlZCAtIFwiJHtlcnIubWVzc2FnZX1cImApO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIERvbid0IGNsb3NlIHRoZSB0YWIgaWYgd2UncmUgcmVkaXJlY3RpbmcgcmF0aGVyIHRoYW4gY2FuY2VsbGluZyB0aGUgbmF2aWdhdGlvbi5cclxuICAgICAgICAgICAgdGhpcy5sYXVuY2hCcm93c2VyQW5kQ2xvc2VUYWJPck5hdmlnYXRlVGFiKHRhYklkLCBsYXVuY2hVUkwsICFzaG91bGRSZWRpcmVjdEFuZEtlZXBUYWIpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBOZWVkIHRvIHJldHVybiBhIGNocm9tZS53ZWJSZXF1ZXN0LkJsb2NraW5nUmVzcG9uc2UgZnJvbSB0aGlzXHJcbiAgICAgICAgLy8gZnVuY3Rpb24gd2hpbGUgbGF1bmNoaW5nIHRoZSBicm93c2VyIGFuZCBwb3NzaWJseSBjbG9zaW5nIHRoZSB0YWJcclxuICAgICAgICAvLyBoYXBwZW4gaW4gYW4gYXN5bmMgY2FsbGJhY2suXHJcbiAgICAgICAgaWYgKHNob3VsZFJlZGlyZWN0QW5kS2VlcFRhYikge1xyXG4gICAgICAgICAgICBsb2coYEluc3RlYWQgb2YgY2FuY2VsbGluZyB0aGUgbmF2aWdhdGlvbiBhbmQgY2xvc2luZyB0aGUgdGFiIHdlIGFyZSBgICtcclxuICAgICAgICAgICAgICAgIGByZWRpcmVjdGluZyB0byAke3JlZGlyZWN0VVJMfSBhbmQga2VlcGluZyB0aGUgbmF0aXZlIHRhYiAoJHt0YWJJZH0pIG9wZW5gKVxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yZWRpcmVjdE5hdmlnYXRpb24odGFiSWQsIHJlZGlyZWN0VVJMKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5ibG9ja05hdmlnYXRpb24oKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gRmlyZWZveCBhbmQgRWRnZSBkb24ndCBnZXQgb25CZWZvcmVSZXF1ZXN0IGZvciBuYXZpZ2F0aW9ucyBzbyBleHRlcm5hbFxyXG4gICAgLy8gYXBwIGxpbmsgY29ubmVjdGlvbnMgYXJlIGFsd2F5cyB1bnJlc29sdmVkIGluIEV4dGVybmFsQXBwTGlua0NvbnRyb2xsZXJcclxuICAgIC8vIGFuZCBzbyB3ZSBtdXN0IGRldGVjdCB0aGUgbmF2aWdhdGlvbiBhd2F5IGZyb20gdGhlIGV4dGVybmFsIGFwcCBsaW5rIHBhZ2VcclxuICAgIC8vIGFuZCB0aGVuIHRha2UgYXBwcm9wcmlhdGUgYWN0aW9uLlxyXG4gICAgcHJpdmF0ZSBkZXRlY3ROb3RDaHJvbWVFeHRlcm5hbEFwcExpbmtGaWxlTmF2aWdhdGlvbih0YWJJZDogVGFiSWQsIHNyY1VSTDogTWF5YmU8VVJMPiwgaXNOZXdUYWI6IGJvb2xlYW4sIGRpZFVzZXJDcmVhdGVUYWI6IGJvb2xlYW4pIHtcclxuICAgICAgICBpZiAodGhpcy5icm93c2VyID09PSBCcm93c2VyLmNocm9tZSB8fCB0aGlzLmJyb3dzZXIgPT09IEJyb3dzZXIuZWRnZUNocm9taXVtKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGlzU3JjRXh0ZXJuYWxBcHBMaW5rVVJMID0gdGhpcy5pc0V4dGVybmFsQXBwTGlua1VSTChzcmNVUkwpO1xyXG4gICAgICAgIGxvZyhgZGV0ZWN0Tm90Q2hyb21lRXh0ZXJuYWxBcHBMaW5rRmlsZU5hdmlnYXRpb24oJHt0b1N0cmluZyh7XHJcbiAgICAgICAgICAgIHRhYklkOiB0YWJJZCxcclxuICAgICAgICAgICAgc3JjVVJMOiBzcmNVUkwsXHJcbiAgICAgICAgICAgIGlzU3JjRXh0ZXJuYWxBcHBMaW5rUGFnZVVSTDogaXNTcmNFeHRlcm5hbEFwcExpbmtVUkwsXHJcbiAgICAgICAgfSl9KWApO1xyXG4gICAgICAgIGlmICghaXNTcmNFeHRlcm5hbEFwcExpbmtVUkwpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3Qgc3JjR3JvdXBzID0gdGhpcy5maW5kR3JvdXBzKHNyY1VSTCk7XHJcbiAgICAgICAgdGhpcy5kZXRlY3RQaGlzaGluZ05hdlNlcXVlbmNlT25OYXZpZ2F0ZSh0YWJJZCwgc3JjVVJMLCBVcmxDYXRlZ29yeS5leHRlcm5hbEFwcExpbmssIHNyY0dyb3VwcywgaXNOZXdUYWIsIGRpZFVzZXJDcmVhdGVUYWIpO1xyXG4gICAgICAgIHRoaXMub25UYWJOYXZpZ2F0ZWQodGFiSWQsIHNyY1VSTCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gRWRnZSBhZGRzIGEgcXVlcnkgcGFyYW0gdG8gbGlua3MgZnJvbSBleHRlcm5hbCBhcHBzIChyYXRoZXIgdGhhblxyXG4gICAgLy8gcmVkaXJlY3RpbmcgdmlhIGEgZmlsZSBVUkwpIGFuZCBkb2VzIGF3YXkgd2l0aCB0aGVcclxuICAgIC8vIEV4dGVybmFsQXBwTGlua0NvbnRyb2xsZXIuIEluc3RlYWQgd2UgZGV0ZWN0IHRoZSBhZGRlZCBxdWVyeSBwYXJhbSBhbmRcclxuICAgIC8vIHRoZW4gdGFrZSBhcHByb3ByaWF0ZSBhY3Rpb24uXHJcbiAgICBwcml2YXRlIGlzRWRnZUV4dGVybmFsQXBwTGlua05hdmlnYXRpb24oZGVzdFVSTDogVVJMKTogYm9vbGVhbiB7XHJcbiAgICAgICAgaWYgKHRoaXMuYnJvd3NlciAhPT0gQnJvd3Nlci5lZGdlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGVkZ2VFeHRlcm5hbEFwcExpbmtRdWVyeVZhbHVlID1cclxuICAgICAgICAgICAgZmluZERvY3VtZW50UXVlcnlQYXJhbShkZXN0VVJMLCBob3N0Q29uc3RhbnRzLmVkZ2VFeHRlcm5hbEFwcExpbmtRdWVyeUtleSk7XHJcbiAgICAgICAgY29uc3QgaGFzRWRnZUV4dGVybmFsQXBwTGlua1F1ZXJ5UGFyYW0gPSBzb21lKGVkZ2VFeHRlcm5hbEFwcExpbmtRdWVyeVZhbHVlKTtcclxuXHJcbiAgICAgICAgbG9nKGBkZXRlY3RFZGdlRXh0ZXJuYWxBcHBMaW5rTmF2aWdhdGlvbigke3RvU3RyaW5nKHtcclxuICAgICAgICAgICAgZGVzdFVSTFNlYXJjaFBhcmFtczogZGVzdFVSTC5zZWFyY2gsXHJcbiAgICAgICAgICAgIGhhc0VkZ2VFeHRlcm5hbEFwcExpbmtRdWVyeVBhcmFtOiBoYXNFZGdlRXh0ZXJuYWxBcHBMaW5rUXVlcnlQYXJhbVxyXG4gICAgICAgIH0pfSlgKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGhhc0VkZ2VFeHRlcm5hbEFwcExpbmtRdWVyeVBhcmFtO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc3RyaXBFZGdlRXh0ZXJuYWxBcHBMaW5rTmF2aWdhdGlvblF1ZXJ5UGFyYW0oZGVzdFVSTDogVVJMKTogVVJMICB7XHJcbiAgICAgICAgY29uc3QgdGFyZ2V0VVJMID0gZGVzdFVSTDtcclxuXHJcbiAgICAgICAgLy8gRWRnZSBhZGRzIGEgcXVlcnkgcGFyYW0gdG8gaWRlbnRpZnkgZXh0ZXJuYWwgYXBwIGxpbmsgbmF2aWdhdGlvbnNcclxuICAgICAgICAvLyB3aGljaCB3ZSBtdXN0IHJlbW92ZSBvbmNlIHdlJ3ZlIGRldGVjdGVkIHRoZSBuYXZpZ2F0aW9uLlxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNlYXJjaFBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXModGFyZ2V0VVJMLnNlYXJjaCk7XHJcbiAgICAgICAgICAgIHNlYXJjaFBhcmFtcy5kZWxldGUoaG9zdENvbnN0YW50cy5lZGdlRXh0ZXJuYWxBcHBMaW5rUXVlcnlLZXkpO1xyXG4gICAgICAgICAgICB0YXJnZXRVUkwuc2VhcmNoID0gc2VhcmNoUGFyYW1zLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgLy8gQmVmb3JlIFJlZHN0b25lIDQgRWRnZSBkb2Vzbid0IHN1cHBvcnQgdGhlIFVSTFNlYXJjaFBhcmFtcyB0eXBlLlxyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgY29uc3Qgc2VhcmNoUGFyYW1zID0gdGFyZ2V0VVJMLnNlYXJjaDtcclxuICAgICAgICAgICAgY29uc3QgcmUgPSBuZXcgUmVnRXhwKFxyXG4gICAgICAgICAgICAgICAgXCJbPyZdXCIgKyBob3N0Q29uc3RhbnRzLmVkZ2VFeHRlcm5hbEFwcExpbmtRdWVyeUtleSArXHJcbiAgICAgICAgICAgICAgICBcIj1cIiArIGhvc3RDb25zdGFudHMuZWRnZUV4dGVybmFsQXBwTGlua1F1ZXJ5VmFsdWUpO1xyXG4gICAgICAgICAgICB0YXJnZXRVUkwuc2VhcmNoID0gc2VhcmNoUGFyYW1zLnJlcGxhY2UocmUsIFwiXCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRhcmdldFVSTDtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNlbGVjdFBhcmVudFRhYihwYXJlbnRUYWJJZHM6IFRhYklkW10sIGluaXRpYXRvcjogTWF5YmU8c3RyaW5nPiwgaW5pdGlhdG9ySXNQYXJlbnQ6IGJvb2xlYW4pOiBQYXJlbnRUYWJEYXRhIHtcclxuICAgICAgICBpZiAoaW5pdGlhdG9ySXNQYXJlbnQgJiYgc29tZShpbml0aWF0b3IpKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHBhcmVudFVSTCA9IHBhcnNlVXJsKGluaXRpYXRvcik7XHJcbiAgICAgICAgICAgIGlmIChzb21lKHBhcmVudFVSTCkpIHtcclxuICAgICAgICAgICAgICAgIC8vIFdlIGRvbid0IGtub3cgdGhlIHBhcmVudCB0YWIgSUQgd2hlbiByZWx5aW5nIG9uIHRoZSBpbml0aWF0b3IsXHJcbiAgICAgICAgICAgICAgICAvLyBob3dldmVyLCB0aGUgcGFyZW50IHRhYiBJRCBpc24ndCB1c2VkIHdoZW4gZGVjaWRpbmcgd2hldGhlciB0b1xyXG4gICAgICAgICAgICAgICAgLy8gYmxvY2sgYSBuYXZpZ2FpdG9uIHNvIHRoaXMgaXMgZmluZS5cclxuICAgICAgICAgICAgICAgIHJldHVybiBbdW5kZWZpbmVkLCBwYXJlbnRVUkwsIHRoaXMuY2F0ZWdvcml6ZVVSTChwYXJlbnRVUkwpXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3Qgc29ydGVkUGFyZW50VGFicyA9IHBhcmVudFRhYklkcy5tYXAoKHBhcmVudFRhYklkKTogUGFyZW50VGFiRGF0YSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHBhcmVudFVSTCA9IHRoaXMuZmluZFRhYlVSTChwYXJlbnRUYWJJZCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHBhcmVudFVSTENhdGVnb3J5ID0gdGhpcy5jYXRlZ29yaXplVVJMKHBhcmVudFVSTCk7XHJcbiAgICAgICAgICAgIHJldHVybiBbcGFyZW50VGFiSWQsIHBhcmVudFVSTCwgcGFyZW50VVJMQ2F0ZWdvcnldO1xyXG4gICAgICAgIH0pLnNvcnQoKGEsIGIpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgWywsIHVybENhdGVnb3J5QV0gPSBhO1xyXG4gICAgICAgICAgICBjb25zdCBbLCwgdXJsQ2F0ZWdvcnlCXSA9IGI7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBpc1dlYk1haWxTaXRlQSA9IHVybENhdGVnb3J5QSA9PT0gVXJsQ2F0ZWdvcnkud2ViTWFpbFNpdGVVcmw7XHJcbiAgICAgICAgICAgIGNvbnN0IGlzV2ViTWFpbFNpdGVCID0gdXJsQ2F0ZWdvcnlCID09PSBVcmxDYXRlZ29yeS53ZWJNYWlsU2l0ZVVybDtcclxuICAgICAgICAgICAgY29uc3QgaXNQaGlzaGluZ1NvdXJjZVNpdGVBID0gdXJsQ2F0ZWdvcnlBID09PSBVcmxDYXRlZ29yeS5waGlzaGluZ1NvdXJjZVNpdGVVcmw7XHJcbiAgICAgICAgICAgIGNvbnN0IGlzUGhpc2hpbmdTb3VyY2VTaXRlQiA9IHVybENhdGVnb3J5QiA9PT0gVXJsQ2F0ZWdvcnkucGhpc2hpbmdTb3VyY2VTaXRlVXJsO1xyXG5cclxuICAgICAgICAgICAgaWYgKGlzV2ViTWFpbFNpdGVBKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gQ29tcGFyaXNvbi5sZXNzVGhhbjtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChpc1dlYk1haWxTaXRlQikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIENvbXBhcmlzb24uZ3JlYXRlclRoYW47XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaXNQaGlzaGluZ1NvdXJjZVNpdGVBKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gQ29tcGFyaXNvbi5sZXNzVGhhbjtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChpc1BoaXNoaW5nU291cmNlU2l0ZUIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBDb21wYXJpc29uLmdyZWF0ZXJUaGFuO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIENvbXBhcmlzb24uZXF1YWw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICBsb2coYHNlbGVjdFBhcmVudFRhYjogc29ydGVkUGFyZW50VGFiczogJHt0b1N0cmluZyhzb3J0ZWRQYXJlbnRUYWJzLm1hcChcclxuICAgICAgICAgICAgKFt0YWJJZCwgdXJsLCB1cmxDYXRlZ29yeV0pID0+IFtcclxuICAgICAgICAgICAgICAgIHRhYklkLFxyXG4gICAgICAgICAgICAgICAgdXJsLFxyXG4gICAgICAgICAgICAgICAgdXJsQ2F0ZWdvcnlUb1N0cmluZyh1cmxDYXRlZ29yeSlcclxuICAgICAgICAgICAgXVxyXG4gICAgICAgICkpfWApO1xyXG4gICAgICAgIGlmIChpc0VtcHR5KHNvcnRlZFBhcmVudFRhYnMpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBbdW5kZWZpbmVkLCB1bmRlZmluZWQsIFVybENhdGVnb3J5LnVuY2F0ZWdvcml6ZWRVcmxdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBzZWxlY3RlZFBhcmVudFRhYiA9IGZpcnN0KHNvcnRlZFBhcmVudFRhYnMpO1xyXG4gICAgICAgIHJldHVybiBzZWxlY3RlZFBhcmVudFRhYjtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IGV4dGVuc2lvbkhvbGRpbmdQYWdlVVJMID0gY2hyb21lLnJ1bnRpbWUuZ2V0VVJMKGhvc3RDb25zdGFudHMuaG9sZGluZ1BhZ2UpO1xyXG5cclxuICAgIHByaXZhdGUgZ2V0IGhvbGRpbmdQYWdlVVJMKCkge1xyXG4gICAgICAgIC8vIFdlIGNhbm5vdCByZWRpcmVjdCBhIHdlYiByZXF1ZXN0IHRvIGFuIGV4dGVuc2lvbiBVUkwgaW4gRWRnZSBiZWZvcmUgUlM1XHJcbiAgICAgICAgaWYgKHRoaXMuYnJvd3NlciA9PT0gQnJvd3Nlci5lZGdlKSB7XHJcbiAgICAgICAgICAgIGlmIChub25lKHRoaXMuZWRnZU1ham9yVmVyc2lvbikgfHwgdGhpcy5lZGdlTWFqb3JWZXJzaW9uIDwgMTgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBcImFib3V0OmJsYW5rXCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZXh0ZW5zaW9uSG9sZGluZ1BhZ2VVUkw7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBnZXRFZGdlUmVkaXJlY3RVUkwocmVkaXJlY3RVUkw6IFVSTCk6IE1heWJlPFVSTD4ge1xyXG4gICAgICAgIC8vIEV4dGVuc2lvbiByZWRpcmVjdGluZyB0byB0aGUgRWRnZSBuZXcgdGFiIHBhZ2Ugc29tZXRpbWVzIGhhbmdzLFxyXG4gICAgICAgIC8vIG1ha2luZyBpdCBsb29rIGxpa2Ugc29tZXRoaW5nIGlzIGxvYWRpbmcgd2hlbiBpdCBpc24ndC4gSWYgaXRcclxuICAgICAgICAvLyBkb2Vzbid0IGhhbmcgdGhlbiBpdCBqdXN0IHNob3dzIGEgd2hpdGUgcGFnZSBzbyB3ZSBtYXkgYXMgd2VsbFxyXG4gICAgICAgIC8vIHJlZGlyZWN0IHRvIGFib3V0OmJsYW5rIGluc3RlYWQgdG8gYXZvaWQgdGhlIGhhbmcuXHJcbiAgICAgICAgY29uc3QgbmV3VGFiVVJMID0gdGhpcy5uZXdUYWJVUkxzLmdldChCcm93c2VyLmVkZ2UpO1xyXG4gICAgICAgIGlmIChuZXdUYWJVUkwgJiYgaXNTYW1lVXJsKHJlZGlyZWN0VVJMLCBuZXdUYWJVUkwsIFVybENvbXBhcmVPcHRpb25zLklnbm9yZVNlYXJjaFBhcmFtcykpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYWJvdXRCbGFua1VSTDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiByZWRpcmVjdFVSTDtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGdldFJlZGlyZWN0VVJMKHJlcXVlc3RJZDogUmVxdWVzdElkKTogTWF5YmU8VVJMPiB7XHJcbiAgICAgICAgLy8gSWYgd2UncmUgYmxvY2tpbmcgYW4gdW50cnVzdGVkIHNpdGUgb3IgUERGIHRoZW4gdGhlIHVzZXIgZXhwZXJpZW5jZVxyXG4gICAgICAgIC8vIGlzIGJldHRlciBpZiB3ZSBkb24ndCBjbG9zZSB0aGUgbmF0aXZlIGJyb3dzZXIgdGFiLiBJZiB3ZSBrbm93IHRoZVxyXG4gICAgICAgIC8vIHNyY1VSTCB0aGVuIHdlIGNhbiByZWRpcmVjdCBiYWNrIHRoZXJlIGFuZCBrZWVwIHRoZSB0YWIgb3Blbi5cclxuICAgICAgICBjb25zdCBpbmZvID0gdGhpcy5yZWRpcmVjdEJhY2tUb1NyY0luZm8uZ2V0KHJlcXVlc3RJZCk7XHJcbiAgICAgICAgaWYgKG5vbmUoaW5mbykpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3Qge3NyY1VSTCwgaXNOZXdUYWIsIGRpZFVzZXJDcmVhdGVUYWJ9ID0gaW5mbztcclxuXHJcbiAgICAgICAgLy8gSG93ZXZlciwgd2UgZG9uJ3Qgd2FudCB0byBrZWVwIHRoZSB0YWIgb3BlbiBvbiBlbWFpbCBjbGlja3MgZXRjLixcclxuICAgICAgICAvLyBzbyB3ZSBjbG9zZSB0aGUgdGFiIGlmIGl0J3MgYSBuZXcgdGFiIG5vdCBjcmVhdGVkIGJ5IHRoZSB1c2VyLlxyXG4gICAgICAgIGlmIChpc05ld1RhYiAmJiAhZGlkVXNlckNyZWF0ZVRhYikge1xyXG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5icm93c2VyID09PSBCcm93c2VyLmVkZ2UpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0RWRnZVJlZGlyZWN0VVJMKHNyY1VSTCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gc3JjVVJMO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEZpcmVmb3ggJiBDaHJvbWUgZ2l2ZSBpbmZvcm1hdGlvbiBhYm91dCB0aGUgVVJMIHdoaWNoIGluaXRpYXRlZCB0aGVcclxuICAgIC8vIG5hdmlnYXRpb24gaW4gdGhlIG9uQmVmb3JlUmVxdWVzdCBjYWxsYmFjay4gQ2hyb21lIGdpdmVzIHRoZSBvcmlnaW4gYXNcclxuICAgIC8vIFwiaW5pdGlhdG9yXCIgd2hpbGUgRmlyZWZveCBnaXZlcyB0aGUgZnVsbCBVUkwgYXMgXCJvcmlnaW5VcmxcIi4gQmVpbmcgYW5cclxuICAgIC8vIG9yaWdpbiByYXRoZXIgdGhhbiBhIGZ1bGwgVVJMIGlzIGZpbmUgc2luY2Ugb3VyIHRydXN0ZWQgc2l0ZXMgbGlzdHNcclxuICAgIC8vIGFyZSBhbGwgb3JpZ2lucy5cclxuICAgIHByaXZhdGUgZ2V0SW5pdGlhdG9yKG9uQmVmb3JlUmVxdWVzdERldGFpbHM6IGFueSk6IE1heWJlPHN0cmluZz4ge1xyXG4gICAgICAgIHN3aXRjaCAodGhpcy5icm93c2VyKSB7XHJcbiAgICAgICAgICAgIGNhc2UgQnJvd3Nlci5jaHJvbWU6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gb25CZWZvcmVSZXF1ZXN0RGV0YWlscy5pbml0aWF0b3I7XHJcbiAgICAgICAgICAgIGNhc2UgQnJvd3Nlci5lZGdlQ2hyb21pdW06XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gb25CZWZvcmVSZXF1ZXN0RGV0YWlscy5pbml0aWF0b3I7XHJcbiAgICAgICAgICAgIGNhc2UgQnJvd3Nlci5maXJlZm94OlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG9uQmVmb3JlUmVxdWVzdERldGFpbHMub3JpZ2luVXJsO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgb25CZWZvcmVSZXF1ZXN0KGRldGFpbHM6IGNocm9tZS53ZWJSZXF1ZXN0LldlYlJlcXVlc3RCb2R5RGV0YWlscyk6IGNocm9tZS53ZWJSZXF1ZXN0LkJsb2NraW5nUmVzcG9uc2Uge1xyXG4gICAgICAgIGlmICh0aGlzLm9uQ29uZmlndXJlZC5pc0NvbmZpZ3VyZWQgfHwgdGhpcy5pc0Rvcm1hbnQgfHwgdGhpcy5kZWxheWVkVGFicy5oYXMoZGV0YWlscy50YWJJZCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMub25CZWZvcmVSZXF1ZXN0SW1wbChkZXRhaWxzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgdGFiSWQgPSBkZXRhaWxzLnRhYklkO1xyXG4gICAgICAgIHRoaXMuZGVsYXllZFRhYnMuYWRkKHRhYklkKTtcclxuXHJcbiAgICAgICAgY29uc3QgcHJvY2VlZFVSTCA9IGRldGFpbHMudXJsO1xyXG4gICAgICAgIGNvbnN0IGhvbGRpbmdVUkwgPSB0aGlzLmhvbGRpbmdQYWdlVVJMO1xyXG4gICAgICAgIGlmIChwcm9jZWVkVVJMID09PSBob2xkaW5nVVJMKSB7XHJcbiAgICAgICAgICAgIGxvZyhgb25CZWZvcmVSZXF1ZXN0IHRvIFtob2xkaW5nVVJMXSB3aWxsIHByb2NlZWQuIERldGFpbHM6ICR7dG9TdHJpbmcoZGV0YWlscyl9YCk7XHJcbiAgICAgICAgICAgIHRoaXMub25UYWJOYXZpZ2F0ZWQodGFiSWQsIHBhcnNlVXJsKHByb2NlZWRVUkwpKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29udGludWVOYXZpZ2F0aW9uKClcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIElmIFNCWCBoYXNuJ3QgeWV0IGdvdCBhbGwgY29uZmlndXJhdGlvbiBhbmQgU0JYIGlzbid0IGRvcm1hbnQgdGhlbiB3ZVxyXG4gICAgICAgIC8vIHRyeSB0byAncG9zdHBvbmUnIHRoZSBkZWNpc2lvbiB0byBibG9jayBvciBhbGxvdyB0aGUgbmF2aWdhdGlvbiB3aGljaFxyXG4gICAgICAgIC8vIGhhcHBlbnMgaW4gb25CZWZvcmVSZXF1ZXN0SW1wbCgpLiBXZSBkbyB0aGlzIGJ5IGNhbmNlbGxpbmcgdGhlXHJcbiAgICAgICAgLy8gY3VycmVudCBuYXZpZ2F0aW9uIChieSBuYXZpZ2F0aW5nIHRvIGEgYmxhbmsgaG9sZGluZyBwYWdlKSBhbmQgdGhlblxyXG4gICAgICAgIC8vIGxhdGVyIHVzaW5nIHRoZSBjaHJvbWUudGFicyBBUEkgdG8gbmF2aWdhdGUgYXMgaWYgd2UgaGFkIGNhbGxlZFxyXG4gICAgICAgIC8vIG9uQmVmb3JlUmVxdWVzdEltcGwoKSBhdCB0aGUgY29ycmVjdCB0aW1lLiBPbmx5IHBvc3Rwb25lIG9uZVxyXG4gICAgICAgIC8vIG5hdmlnYXRpb24gcGVyIHRhYi4gQWZ0ZXIgb25lIHBvc3RvbmUgd2UncmUgZWl0aGVyIGZ1bGx5IGNvbmZpZ3VyZWRcclxuICAgICAgICAvLyBvciB3ZSd2ZSB0aW1lZCBvdXQgd2FpdGluZyBmb3IgY29uZmlnIChzbyB0aGVyZSdzIHByb2JhYmx5IGFuIGVycm9yKVxyXG4gICAgICAgIC8vIGFuZCB3ZSBzaG91bGQgZ2V0IG91dCBvZiB0aGUgdXNlcidzIHdheS5cclxuICAgICAgICBsZXQgZGlkVGltZW91dCA9IGZhbHNlO1xyXG4gICAgICAgIGNvbnN0IHRpbWVvdXQgPSBob3N0Q29uc3RhbnRzLnBvc3Rwb25lbWVudFRpbWVvdXQ7XHJcbiAgICAgICAgY29uc3QgaWQgPSB0aGlzLmlkR2VuZXJhdG9yLmdlbmVyYXRlSWQoKTtcclxuICAgICAgICBsb2coYG9uQmVmb3JlUmVxdWVzdDogU0JYIGhhc24ndCByZWNlaXZlZCBhbGwgY29uZmlndXJhdGlvbiBzbyB0aGlzIG9uQmVmb3JlUmVxdWVzdCBldmVudCB0byBgICtcclxuICAgICAgICAgICAgYCR7cHJvY2VlZFVSTH0gaW4gdGFiICR7dGFiSWR9IGhhcyBiZWVuIHBvc3Rwb25lZCBmb3IgdXAgdG8gJHt0aW1lb3V0fW1zIGFuZCBnaXZlbiBpZCAke2lkfWApO1xyXG5cclxuICAgICAgICBjb25zdCBwcm9jZWVkID0gKCkgPT4ge1xyXG4gICAgICAgICAgICBsb2coYG9uQmVmb3JlUmVxdWVzdDogcG9zdHBvbmVkIGlkICR7aWR9OiBwcm9jZWVkOiAke3RvU3RyaW5nKHtcclxuICAgICAgICAgICAgICAgIHRhYklkOiB0YWJJZCxcclxuICAgICAgICAgICAgICAgIHByb2NlZWRVUkw6IHByb2NlZWRVUkxcclxuICAgICAgICAgICAgfSl9YCk7XHJcbiAgICAgICAgICAgIGNocm9tZS50YWJzLnVwZGF0ZSh0YWJJZCwge3VybDogcHJvY2VlZFVSTH0pO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGNvbnN0IHJlZGlyZWN0ID0gKHJlZGlyZWN0VVJMOiBzdHJpbmcpID0+IHtcclxuICAgICAgICAgICAgbG9nKGBvbkJlZm9yZVJlcXVlc3Q6IHBvc3Rwb25lZCBpZCAke2lkfTogcmVkaXJlY3Q6ICR7dG9TdHJpbmcoe1xyXG4gICAgICAgICAgICAgICAgdGFiSWQ6IHRhYklkLFxyXG4gICAgICAgICAgICAgICAgcmVkaXJlY3RVUkw6IHJlZGlyZWN0VVJMXHJcbiAgICAgICAgICAgIH0pfWApO1xyXG4gICAgICAgICAgICBjaHJvbWUudGFicy51cGRhdGUoZGV0YWlscy50YWJJZCwge3VybDogcmVkaXJlY3RVUkx9KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBjb25zdCBvblRpbWVvdXQgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgIGRpZFRpbWVvdXQgPSB0cnVlO1xyXG4gICAgICAgICAgICBsb2coYG9uQmVmb3JlUmVxdWVzdDogcG9zdHBvbmVkIGlkOiAke2lkfSBvblRpbWVvdXRgKVxyXG4gICAgICAgICAgICB0aGlzLm9uVGFiTmF2aWdhdGVkKHRhYklkLCBwYXJzZVVybChwcm9jZWVkVVJMKSk7XHJcbiAgICAgICAgICAgIHByb2NlZWQoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFByb2NlZWQgYWZ0ZXIgW3RpbWVvdXRdIG1pbGxpc2Vjb25kIGlmIHdlIGFyZW4ndCBjb25maWd1cmVkIGJ5IHRoZW4uXHJcbiAgICAgICAgY29uc3QgdGltZW91dElkID0gc2V0VGltZW91dChvblRpbWVvdXQsIHRpbWVvdXQpO1xyXG5cclxuICAgICAgICB0aGlzLm9uQ29uZmlndXJlZC5yZWdpc3Rlckxpc3RlbmVyKCgpID0+IHtcclxuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7XHJcbiAgICAgICAgICAgIGlmIChkaWRUaW1lb3V0KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbG9nKGBvbkJlZm9yZVJlcXVlc3Q6IHBvc3Rwb25lZCBpZCAke2lkfTogb25Db25maWd1cmVkYCk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBvbkJlZm9yZVJlcXVlc3RBY3Rpb24gPSB0aGlzLm9uQmVmb3JlUmVxdWVzdEltcGwoZGV0YWlscyk7XHJcbiAgICAgICAgICAgIGxvZyhgb25CZWZvcmVSZXF1ZXN0OiBwb3N0cG9uZWQgaWQgJHtpZH06IG9uQmVmb3JlUmVxdWVzdEFjdGlvbjogJHt0b1N0cmluZyhvbkJlZm9yZVJlcXVlc3RBY3Rpb24pfWApO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgY2FuY2VsOiBNYXliZTxib29sZWFuPiA9IG9uQmVmb3JlUmVxdWVzdEFjdGlvbi5jYW5jZWw7XHJcbiAgICAgICAgICAgIGlmIChpc0ZhbHNlKGNhbmNlbCkpIHtcclxuICAgICAgICAgICAgICAgcHJvY2VlZCgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCByZWRpcmVjdFVSTDogTWF5YmU8c3RyaW5nPiA9IG9uQmVmb3JlUmVxdWVzdEFjdGlvbi5yZWRpcmVjdFVybDtcclxuICAgICAgICAgICAgaWYgKHNvbWUocmVkaXJlY3RVUkwpKSB7XHJcbiAgICAgICAgICAgICAgICByZWRpcmVjdChyZWRpcmVjdFVSTCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIElmIG5vdCBwcm9jZWVkaW5nIG9yIHJlZGlyZWN0aW5nIHRoZW4gd2Ugd291bGQgaGF2ZSBjYW5jZWxsZWQgdGhlIG5hdmlnYXRpb24uIFRoaXMgY2FuY2VsbGF0aW9uXHJcbiAgICAgICAgICAgIC8vIGNvbWVzIGVpdGhlciBhcyBwYXJ0IG9mIHRoaXMubGF1bmNoQnJvd3NlckFuZENsb3NlVGFiIG9yIHZpYSB0aGlzLnJlZGlyZWN0TmF2aWdhdGlvbiBpZiB0aGVcclxuICAgICAgICAgICAgLy8gYnJvd3NlciBpcyBFZGdlLCBpbiBlaXRoZXIgY2FzZSB3ZSBkb24ndCBuZWVkIHRvIGRvIGFueXRoaW5nIGhlcmUgc2luY2UgdGhlIHRhYiB3aWxsIGJlIGNsb3NlZFxyXG4gICAgICAgICAgICAvLyAob3IgcmVkaXJlY3RlZCBpbiB0aGlzLmxhdW5jaEJyb3dzZXJBbmRDbG9zZVRhYiBpZiB0aGVyZSdzIGFuIGlzc3VlIGxhdW5jaGluZyB0aGUgU2VjdXJlIEJyb3dzZXIpLlxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLm9uVGFiTmF2aWdhdGVkKHRhYklkLCBwYXJzZVVybChob2xkaW5nVVJMKSk7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgcmVkaXJlY3RVcmw6IGhvbGRpbmdVUkxcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIG9uQmVmb3JlUmVxdWVzdEltcGwoZGV0YWlsczogY2hyb21lLndlYlJlcXVlc3QuV2ViUmVxdWVzdEJvZHlEZXRhaWxzKTogY2hyb21lLndlYlJlcXVlc3QuQmxvY2tpbmdSZXNwb25zZSB7XHJcbiAgICAgICAgbG9nKGBvbkJlZm9yZVJlcXVlc3QoJHt0b1N0cmluZyhkZXRhaWxzKX0pYCk7XHJcblxyXG4gICAgICAgIGNvbnN0IHJlcXVlc3RJZCA9IGRldGFpbHMucmVxdWVzdElkO1xyXG4gICAgICAgIGNvbnN0IHRhYklkID0gZGV0YWlscy50YWJJZDtcclxuICAgICAgICBjb25zdCBmcmFtZUlkID0gZGV0YWlscy5mcmFtZUlkO1xyXG4gICAgICAgIGNvbnN0IGRlc3RVUkwgPSBwYXJzZVVybChkZXRhaWxzLnVybCk7XHJcbiAgICAgICAgY29uc3QgaHR0cE1ldGhvZCA9IHBhcnNlSHR0cE1ldGhvZChkZXRhaWxzLm1ldGhvZCk7XHJcblxyXG4gICAgICAgIGNvbnN0IGRpZFVzZXJDcmVhdGVUYWIgPSB0aGlzLmRpZFVzZXJDcmVhdGVUYWIodGFiSWQpO1xyXG4gICAgICAgIGNvbnN0IGlzTmV3VGFiID0gdGhpcy5kZXRlY3RlZFRhYih0YWJJZCk7XHJcbiAgICAgICAgY29uc3QgaXNSZXN0b3JlZFNlc3Npb25UYWIgPSB0aGlzLmlzUmVzdG9yZWRTZXNzaW9uVGFiKHRhYklkKTtcclxuICAgICAgICBjb25zdCBjb25zaWRlclBhcmVudFRhYiA9IGlzTmV3VGFiICYmICFkaWRVc2VyQ3JlYXRlVGFiO1xyXG5cclxuICAgICAgICBjb25zdCBpbml0aWF0b3IgPSB0aGlzLmdldEluaXRpYXRvcihkZXRhaWxzKTtcclxuICAgICAgICBjb25zdCBpbml0aWF0b3JJc1BhcmVudCA9IGNvbnNpZGVyUGFyZW50VGFiO1xyXG4gICAgICAgIGNvbnN0IGluaXRpYXRvcklzU3JjID0gIWNvbnNpZGVyUGFyZW50VGFiO1xyXG5cclxuICAgICAgICBjb25zdCBwYXJlbnRUYWJJZHMgPSB0aGlzLmZpbmRQYXJlbnRUYWJJZHModGFiSWQsIGlzTmV3VGFiKTtcclxuICAgICAgICBjb25zdCBzZWxlY3RlZFBhcmVudFRhYiA9IHRoaXMuc2VsZWN0UGFyZW50VGFiKHBhcmVudFRhYklkcywgaW5pdGlhdG9yLCBpbml0aWF0b3JJc1BhcmVudCk7XHJcbiAgICAgICAgY29uc3QgW3BhcmVudFRhYklkLCBwYXJlbnRVUkwsIHBhcmVudFVSTENhdGVnb3J5XSA9IHNlbGVjdGVkUGFyZW50VGFiO1xyXG4gICAgICAgIGNvbnN0IHNyY1VSTCA9IHRoaXMuZmluZFNyY1VSTCh0YWJJZCwgaW5pdGlhdG9yLCBpbml0aWF0b3JJc1NyYyk7XHJcblxyXG4gICAgICAgIHRoaXMuZGV0ZWN0Tm90Q2hyb21lRXh0ZXJuYWxBcHBMaW5rRmlsZU5hdmlnYXRpb24odGFiSWQsIHNyY1VSTCwgaXNOZXdUYWIsIGRpZFVzZXJDcmVhdGVUYWIpO1xyXG5cclxuICAgICAgICBjb25zdCBpc1JlZGlyZWN0ID0gdGhpcy5pc1JlZGlyZWN0KHJlcXVlc3RJZCk7XHJcbiAgICAgICAgaWYgKGlzUmVkaXJlY3QpIHtcclxuICAgICAgICAgICAgdGhpcy5jbGVhclBlbmRpbmdSZWRpcmVjdChyZXF1ZXN0SWQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gVGhpcyBpbmZvcm1hdGlvbiBtaWdodCBiZSB1c2VkIGluIGJsb2NrVW50cnVzdGVkIChiZWxvdykgb3IgaW5cclxuICAgICAgICAvLyBvbkhlYWRlcnNSZWNlaXZlZCB0byByZWRpcmVjdCB0aGUgbmF2aWdhdGlvbiBiYWNrIHRvIHNyY1VSTC4gSG93ZXZlcixcclxuICAgICAgICAvLyB3ZSBkb24ndCB3YW50IHRvIHJlZGlyZWN0IGJhY2sgdG8gc3JjVVJMIGlmIHRoZSBuYXZpZ2F0aW9uIGlzIHBhcnQgb2ZcclxuICAgICAgICAvLyBhIHJlZGlyZWN0IGNoYWluIHNpbmNlIHdlIG1pZ2h0IHJlZGlyZWN0IGJhY2sgdG8gZGVzdFVSTCBhbmQgZ2V0IGluIGFcclxuICAgICAgICAvLyBsb29wIG9yIG90aGVyd2lzZSBicmVhayB0aGluZ3MuXHJcbiAgICAgICAgaWYgKHNvbWUoc3JjVVJMKSAmJiAhdGhpcy5pc0V4dGVybmFsQXBwTGlua1VSTChzcmNVUkwpICYmICFpc1JlZGlyZWN0KSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVkaXJlY3RCYWNrVG9TcmNJbmZvLnNldChyZXF1ZXN0SWQsIHtzcmNVUkwsIGlzTmV3VGFiLCBkaWRVc2VyQ3JlYXRlVGFifSlcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnJlZGlyZWN0QmFja1RvU3JjSW5mby5kZWxldGUocmVxdWVzdElkKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IHByb2NlZWQgPSAoKTogY2hyb21lLndlYlJlcXVlc3QuQmxvY2tpbmdSZXNwb25zZSA9PiB7XHJcbiAgICAgICAgICAgIGxvZyhgb25CZWZvcmVSZXF1ZXN0OiBwcm9jZWVkKCR7dG9TdHJpbmcoe1xyXG4gICAgICAgICAgICAgICAgZGVzdFVSTDogZGVzdFVSTCxcclxuICAgICAgICAgICAgICAgIHRhYklkOiB0YWJJZCxcclxuICAgICAgICAgICAgICAgIGlzTmV3VGFiOiBpc05ld1RhYixcclxuICAgICAgICAgICAgICAgIGlzUmVkaXJlY3Q6IGlzUmVkaXJlY3RcclxuICAgICAgICAgICAgfSl9KWApO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5vblRhYk5hdmlnYXRlZCh0YWJJZCwgZGVzdFVSTCk7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnRpbnVlTmF2aWdhdGlvbigpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGNvbnN0IGJsb2NrID0gKHVybDogTWF5YmU8VVJMPik6IGNocm9tZS53ZWJSZXF1ZXN0LkJsb2NraW5nUmVzcG9uc2UgPT4ge1xyXG4gICAgICAgICAgICBsb2coYG9uQmVmb3JlUmVxdWVzdDogYmxvY2soJHt0b1N0cmluZyh7XHJcbiAgICAgICAgICAgICAgICBkZXN0VVJMOiBkZXN0VVJMLFxyXG4gICAgICAgICAgICAgICAgdGFiSWQ6IHRhYklkLFxyXG4gICAgICAgICAgICAgICAgaXNOZXdUYWI6IGlzTmV3VGFiLFxyXG4gICAgICAgICAgICAgICAgaXNSZWRpcmVjdDogaXNSZWRpcmVjdCxcclxuICAgICAgICAgICAgICAgIHNob3VsZE9wZW5QaGlzaGluZ0xpbmtzSW5TZWN1cmVCcm93c2VyOiB0aGlzLnNob3VsZE9wZW5QaGlzaGluZ0xpbmtzSW5TZWN1cmVCcm93c2VyXHJcbiAgICAgICAgICAgIH0pfSlgKTtcclxuXHJcbiAgICAgICAgICAgIGlmICghdGhpcy5mZWF0dXJlTWFuYWdlci5pc0xpbmtQcm90ZWN0aW9uRW5hYmxlZCkge1xyXG4gICAgICAgICAgICAgICAgbG9nKGBvbkJlZm9yZVJlcXVlc3Q6IGJsb2NrOiBsaW5rIHByb3RlY3Rpb24gaXMgbm90IGVuYWJsZWRgKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBwcm9jZWVkKCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNob3VsZE9wZW5QaGlzaGluZ0xpbmtzSW5TZWN1cmVCcm93c2VyKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5sYXVuY2hCcm93c2VyQW5kQ2xvc2VUYWIodGFiSWQsIHVybCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmSW5jb2duaXRvVGFiKHRhYklkLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlVGFiQW5kTGF1bmNoQnJvd3Nlcih0YWJJZCwgdXJsKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAvLyBSZXNldCB0aGUgZGV0ZWN0b3IgaGVyZSAoYXMgd2VsbCBhcyBpbiBvbkJlZm9yZVJlcXVlc3QgaWYgaXNEZXN0QmxvY2tlZFBhZ2VVUkwpXHJcbiAgICAgICAgICAgIC8vIGJlY2F1c2UgRmlyZWZveCBhbmQgRWRnZSBkb24ndCBnZXQgb25CZWZvcmVSZXF1ZXN0IGV2ZW50cyBmb3IgZXh0ZW5zaW9uIFVSTHMuXHJcbiAgICAgICAgICAgIHRoaXMucGhpc2hpbmdOYXZTZXF1ZW5jZURldGVjdG9yLnJlc2V0RGV0ZWN0b3IodGFiSWQpO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgYmxvY2tlZFBhZ2VVUkwgPSB0aGlzLmJsb2NrZWRQYWdlQ29udHJvbGxlci5ibG9ja05hdmlnYXRpb24odXJsLCB0YWJJZCk7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJlZGlyZWN0TmF2aWdhdGlvbih0YWJJZCwgYmxvY2tlZFBhZ2VVUkwpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGNvbnN0IGJsb2NrV2l0aE5hdlNlcXVlbmNlID0gKHVybDogTWF5YmU8VVJMPiwgYmxvY2tlZE5hdlNlcXVlbmNlOiBJTmF2U2VxdWVuY2VEZXRlY3Rpb24pOiBjaHJvbWUud2ViUmVxdWVzdC5CbG9ja2luZ1Jlc3BvbnNlID0+IHtcclxuICAgICAgICAgICAgbG9nKGBvbkJlZm9yZVJlcXVlc3Q6IGJsb2NrV2l0aE5hdlNlcXVlbmNlKCR7dG9TdHJpbmcoe1xyXG4gICAgICAgICAgICAgICAgZGVzdFVSTDogZGVzdFVSTCxcclxuICAgICAgICAgICAgICAgIHRhYklkOiB0YWJJZCxcclxuICAgICAgICAgICAgICAgIGlzTmV3VGFiOiBpc05ld1RhYixcclxuICAgICAgICAgICAgICAgIGlzUmVkaXJlY3Q6IGlzUmVkaXJlY3QsXHJcbiAgICAgICAgICAgICAgICBzaG91bGRPcGVuUGhpc2hpbmdMaW5rc0luU2VjdXJlQnJvd3NlcjogdGhpcy5zaG91bGRPcGVuUGhpc2hpbmdMaW5rc0luU2VjdXJlQnJvd3NlclxyXG4gICAgICAgICAgICB9KX0pYCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoIXRoaXMuZmVhdHVyZU1hbmFnZXIuaXNMaW5rUHJvdGVjdGlvbkVuYWJsZWQpIHtcclxuICAgICAgICAgICAgICAgIGxvZyhgb25CZWZvcmVSZXF1ZXN0OiBibG9ja1dpdGhOYXZTZXF1ZW5jZTogbGluayBwcm90ZWN0aW9uIGlzIG5vdCBlbmFibGVkYCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcHJvY2VlZCgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5zaG91bGRPcGVuUGhpc2hpbmdMaW5rc0luU2VjdXJlQnJvd3Nlcikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMubGF1bmNoQnJvd3NlckFuZENsb3NlVGFiKHRhYklkLCB1cmwpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZkluY29nbml0b1RhYih0YWJJZCwgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZVRhYkFuZExhdW5jaEJyb3dzZXIodGFiSWQsIHVybCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgLy8gUmVzZXQgdGhlIGRldGVjdG9yIGhlcmUgKGFzIHdlbGwgYXMgaW4gb25CZWZvcmVSZXF1ZXN0IGlmIGlzRGVzdEJsb2NrZWRQYWdlVVJMKVxyXG4gICAgICAgICAgICAvLyBiZWNhdXNlIEZpcmVmb3ggZG9lc24ndCBub3QgZ2V0IG9uQmVmb3JlUmVxdWVzdCBldmVudHMgZm9yIGV4dGVuc2lvbiBVUkxzLlxyXG4gICAgICAgICAgICB0aGlzLnBoaXNoaW5nTmF2U2VxdWVuY2VEZXRlY3Rvci5yZXNldERldGVjdG9yKHRhYklkKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGJsb2NrZWRQYWdlVVJMID0gdGhpcy5ibG9ja2VkUGFnZUNvbnRyb2xsZXIuYmxvY2tOYXZpZ2F0aW9uV2l0aE5hdlNlcXVlbmNlKHVybCwgYmxvY2tlZE5hdlNlcXVlbmNlLCB0YWJJZCk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yZWRpcmVjdE5hdmlnYXRpb24odGFiSWQsIGJsb2NrZWRQYWdlVVJMKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBjb25zdCBibG9ja1VudHJ1c3RlZCA9ICh1cmw6IE1heWJlPFVSTD4pOiBjaHJvbWUud2ViUmVxdWVzdC5CbG9ja2luZ1Jlc3BvbnNlID0+IHtcclxuICAgICAgICAgICAgbG9nKGBvbkJlZm9yZVJlcXVlc3Q6IGJsb2NrVW50cnVzdGVkKCR7dG9TdHJpbmcoe1xyXG4gICAgICAgICAgICAgICAgZGVzdFVSTDogZGVzdFVSTCxcclxuICAgICAgICAgICAgICAgIHRhYklkOiB0YWJJZCxcclxuICAgICAgICAgICAgICAgIGlzTmV3VGFiOiBpc05ld1RhYixcclxuICAgICAgICAgICAgICAgIGlzUmVkaXJlY3Q6IGlzUmVkaXJlY3RcclxuICAgICAgICAgICAgfSl9KWApO1xyXG5cclxuICAgICAgICAgICAgaWYgKCF0aGlzLmZlYXR1cmVNYW5hZ2VyLmlzTGlua1Byb3RlY3Rpb25FbmFibGVkKSB7XHJcbiAgICAgICAgICAgICAgICBsb2coYG9uQmVmb3JlUmVxdWVzdDogYmxvY2tVbnRydXN0ZWQ6IGxpbmsgcHJvdGVjdGlvbiBpcyBub3QgZW5hYmxlZGApO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHByb2NlZWQoKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gVHJ5IHRvIHJlZGlyZWN0IGJhY2sgdG8gdGhlIHNyYyBwYWdlIHJhdGhlciB0aGFuIGNsb3NpbmcgdGhlIHRhYi5cclxuICAgICAgICAgICAgY29uc3QgcmVkaXJlY3RVUkwgPSB0aGlzLmdldFJlZGlyZWN0VVJMKHJlcXVlc3RJZCk7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmxhdW5jaEJyb3dzZXJBbmRDbG9zZVRhYih0YWJJZCwgdXJsLCByZWRpcmVjdFVSTCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgY29uc3QgYmxvY2tGaWxlID0gKGZpbGVVUkw6IE1heWJlPFVSTD4pOiBjaHJvbWUud2ViUmVxdWVzdC5CbG9ja2luZ1Jlc3BvbnNlID0+IHtcclxuICAgICAgICAgICAgbG9nKGBvbkJlZm9yZVJlcXVlc3Q6IGJsb2NrRmlsZSgke3RvU3RyaW5nKHtcclxuICAgICAgICAgICAgICAgIGRlc3RVUkw6IGRlc3RVUkwsXHJcbiAgICAgICAgICAgICAgICB0YWJJZDogdGFiSWQsXHJcbiAgICAgICAgICAgICAgICBpc05ld1RhYjogaXNOZXdUYWIsXHJcbiAgICAgICAgICAgICAgICBpc1JlZGlyZWN0OiBpc1JlZGlyZWN0XHJcbiAgICAgICAgICAgIH0pfSlgKTtcclxuXHJcbiAgICAgICAgICAgIGlmICghdGhpcy5mZWF0dXJlTWFuYWdlci5pc0ZpbGVVUkxQcm90ZWN0aW9uRW5hYmxlZCkge1xyXG4gICAgICAgICAgICAgICAgbG9nKGBvbkJlZm9yZVJlcXVlc3Q6IGJsb2NrRmlsZTogZmlsZSBVUkwgcHJvdGVjdGlvbiBpcyBub3QgZW5hYmxlZGApO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHByb2NlZWQoKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWZJbmNvZ25pdG9UYWIodGFiSWQsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2VUYWJBbmRMYXVuY2hCcm93c2VyKHRhYklkLCBmaWxlVVJMKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAvLyBSZXNldCB0aGUgZGV0ZWN0b3IgaGVyZSAoYXMgd2VsbCBhcyBpbiBvbkJlZm9yZVJlcXVlc3QgaWYgaXNEZXN0QmxvY2tlZEZpbGVQYWdlVVJMKVxyXG4gICAgICAgICAgICAvLyBiZWNhdXNlIEZpcmVmb3ggYW5kIEVkZ2UgZG9uJ3QgZ2V0IG9uQmVmb3JlUmVxdWVzdCBldmVudHMgZm9yIGV4dGVuc2lvbiBVUkxzLlxyXG4gICAgICAgICAgICB0aGlzLnBoaXNoaW5nTmF2U2VxdWVuY2VEZXRlY3Rvci5yZXNldERldGVjdG9yKHRhYklkKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGJsb2NrZWRGaWxlUGFnZVVSTCA9IHRoaXMuZmlsZUJsb2NrZXIuYmxvY2tGaWxlKGZpbGVVUkwsIHRhYklkKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVkaXJlY3ROYXZpZ2F0aW9uKHRhYklkLCBibG9ja2VkRmlsZVBhZ2VVUkwpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGNvbnN0IGJsb2NrVW50cnVzdGVkRmlsZSA9IChmaWxlVVJMOiBNYXliZTxVUkw+KTogY2hyb21lLndlYlJlcXVlc3QuQmxvY2tpbmdSZXNwb25zZSA9PiB7XHJcbiAgICAgICAgICAgIGxvZyhgb25CZWZvcmVSZXF1ZXN0OiBibG9ja1VudHJ1c3RlZEZpbGUoJHt0b1N0cmluZyh7XHJcbiAgICAgICAgICAgICAgICBkZXN0VVJMOiBkZXN0VVJMLFxyXG4gICAgICAgICAgICAgICAgdGFiSWQ6IHRhYklkLFxyXG4gICAgICAgICAgICAgICAgaXNOZXdUYWI6IGlzTmV3VGFiLFxyXG4gICAgICAgICAgICAgICAgaXNSZWRpcmVjdDogaXNSZWRpcmVjdFxyXG4gICAgICAgICAgICB9KX0pYCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoIXRoaXMuZmVhdHVyZU1hbmFnZXIuaXNGaWxlVVJMUHJvdGVjdGlvbkVuYWJsZWQpIHtcclxuICAgICAgICAgICAgICAgIGxvZyhgb25CZWZvcmVSZXF1ZXN0OiBibG9ja1VudHJ1c3RlZEZpbGU6IGZpbGUgVVJMIHByb3RlY3Rpb24gaXMgbm90IGVuYWJsZWRgKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBwcm9jZWVkKCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmxhdW5jaEJyb3dzZXJBbmRDbG9zZVRhYih0YWJJZCwgZmlsZVVSTCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgY29uc3Qgc2VuZFRvRXh0ZXJuYWxBcHBMaW5rUGFnZSA9ICh1cmw6IFVSTCk6IGNocm9tZS53ZWJSZXF1ZXN0LkJsb2NraW5nUmVzcG9uc2UgPT4ge1xyXG4gICAgICAgICAgICBsb2coYG9uQmVmb3JlUmVxdWVzdDogc2VuZFRvRXh0ZXJuYWxBcHBMaW5rUGFnZSgke3RvU3RyaW5nKHtcclxuICAgICAgICAgICAgICAgIFVSTDogdXJsLFxyXG4gICAgICAgICAgICAgICAgdGFiSWQ6IHRhYklkLFxyXG4gICAgICAgICAgICAgICAgaXNOZXdUYWI6IGlzTmV3VGFiLFxyXG4gICAgICAgICAgICAgICAgaXNSZWRpcmVjdDogaXNSZWRpcmVjdFxyXG4gICAgICAgICAgICB9KX0pYCk7XHJcblxyXG4gICAgICAgICAgICAvLyBUT0RPIC0gc2hvdWxkIHdlIGJlIHJlc2V0aW5nIHRoZSBkZXRlY3RvciBoZXJlP1xyXG4gICAgICAgICAgICB0aGlzLnBoaXNoaW5nTmF2U2VxdWVuY2VEZXRlY3Rvci5yZXNldERldGVjdG9yKHRhYklkKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGV4dGVybmFsQXBwTGlua1VSTCA9XHJcbiAgICAgICAgICAgICAgICBVUkxUb1N0cmluZyh0aGlzLmV4dGVybmFsQXBwTGlua0NvbnRyb2xsZXIuZ2V0RXh0ZXJuYWxBcHBMaW5rVVJMKCkpXHJcbiAgICAgICAgICAgICAgICArIFwiP2xpbmtTcGVjPVwiICsgZW5jb2RlVVJJQ29tcG9uZW50KHVybC50b1N0cmluZygpKVxyXG4gICAgICAgICAgICAgICAgKyBcIiZleHRlcm5hbEFwcE5hbWU9dW5rbm93blwiO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVkaXJlY3ROYXZpZ2F0aW9uKHRhYklkLCBwYXJzZVVybChleHRlcm5hbEFwcExpbmtVUkwpKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBjb25zdCBpc0F1dGhSZXF1ZXN0ID0gdGhpcy5pc0F1dGhSZXF1ZXN0KHNyY1VSTCwgZGVzdFVSTCk7XHJcbiAgICAgICAgY29uc3QgaXNQYXJlbnRQaGlzaGluZ1NvdXJjZVNpdGUgPSB0aGlzLmlzUGhpc2hpbmdTb3VyY2VTaXRlKHBhcmVudFVSTCk7XHJcbiAgICAgICAgY29uc3QgaXNTcmNQaGlzaGluZ1NvdXJjZVNpdGUgPSB0aGlzLmlzUGhpc2hpbmdTb3VyY2VTaXRlKHNyY1VSTCk7XHJcbiAgICAgICAgY29uc3QgaXNEZXN0UGhpc2hpbmdTb3VyY2VTaXRlID0gdGhpcy5pc1BoaXNoaW5nU291cmNlU2l0ZShkZXN0VVJMKTtcclxuICAgICAgICBjb25zdCBpc1BhcmVudFdlYk1haWxTaXRlID0gdGhpcy5pc1dlYk1haWxTaXRlKHBhcmVudFVSTCk7XHJcbiAgICAgICAgY29uc3QgaXNTcmNXZWJNYWlsU2l0ZSA9IHRoaXMuaXNXZWJNYWlsU2l0ZShzcmNVUkwpO1xyXG4gICAgICAgIGNvbnN0IGlzRGVzdFdlYk1haWxTaXRlID0gdGhpcy5pc1dlYk1haWxTaXRlKGRlc3RVUkwpO1xyXG4gICAgICAgIGNvbnN0IHNob3VsZEJsb2NrTmF2aWdhdGlvbiA9IHRoaXMuc2hvdWxkQmxvY2tOYXZpZ2F0aW9uKGlzTmV3VGFiLCBpc1JlZGlyZWN0LCBodHRwTWV0aG9kLCBzcmNVUkwsIHBhcmVudFVSTCk7XHJcbiAgICAgICAgY29uc3QgW2lzUGFyZW50VHJ1c3RlZFVSTF0gPSB0aGlzLmlzVHJ1c3RlZFVSTChwYXJlbnRVUkwpO1xyXG4gICAgICAgIGNvbnN0IFtpc0Rlc3RUcnVzdGVkVVJMLCBpc0Rlc3RVbnRydXN0ZWRVUkxdID0gdGhpcy5pc1RydXN0ZWRVUkwoZGVzdFVSTCk7XHJcbiAgICAgICAgY29uc3QgaXNEZXN0VW5jYXRlZ29yaXplZFVSTCA9IChzb21lKGRlc3RVUkwpICYmICFpc0Rlc3RUcnVzdGVkVVJMICYmICFpc0Rlc3RVbnRydXN0ZWRVUkwpO1xyXG4gICAgICAgIGNvbnN0IFtpc0Rlc3RGaWxlVVJMLCBpc0Rlc3RUcnVzdGVkRmlsZVVSTCwgaXNEZXN0VW50cnVzdGVkRmlsZVVSTF0gPSB0aGlzLmlzVHJ1c3RlZEZpbGVVUkwoZGVzdFVSTCk7XHJcbiAgICAgICAgY29uc3QgaXNEZXN0QmxvY2tlZFBhZ2VVUkwgPSB0aGlzLmlzQmxvY2tlZFBhZ2VVUkwoZGVzdFVSTCk7XHJcbiAgICAgICAgY29uc3QgaXNEZXN0QmxvY2tlZEZpbGVQYWdlVVJMID0gdGhpcy5pc0Jsb2NrZWRGaWxlUGFnZVVSTChkZXN0VVJMKTtcclxuICAgICAgICBjb25zdCBpc0Rlc3RFeHRlcm5hbEFwcExpbmtVUkwgPSB0aGlzLmlzRXh0ZXJuYWxBcHBMaW5rVVJMKGRlc3RVUkwpO1xyXG4gICAgICAgIGNvbnN0IGlzUGFyZW50RXh0ZXJuYWxBcHBMaW5rVVJMID0gdGhpcy5pc0V4dGVybmFsQXBwTGlua1VSTChwYXJlbnRVUkwpO1xyXG4gICAgICAgIGNvbnN0IGlzRGVzdE5ld1RhYlBhZ2VVcmwgPSB0aGlzLmlzTmV3VGFiUGFnZVVybChkZXN0VVJMKTtcclxuICAgICAgICBjb25zdCBwYXJlbnRHcm91cHMgPSB0aGlzLmZpbmRHcm91cHMocGFyZW50VVJMKTtcclxuICAgICAgICBjb25zdCBkZXN0R3JvdXBzID0gdGhpcy5maW5kR3JvdXBzKGRlc3RVUkwpO1xyXG4gICAgICAgIGNvbnN0IGlzU3JjU2FtZU9yaWdpbiA9IHRoaXMuaXNTYW1lT3JpZ2luKHNyY1VSTCwgZGVzdFVSTCk7XHJcbiAgICAgICAgY29uc3QgaXNQYXJlbnRTYW1lT3JpZ2luID0gdGhpcy5pc1NhbWVPcmlnaW4ocGFyZW50VVJMLCBkZXN0VVJMKTtcclxuICAgICAgICBjb25zdCBpc0Jsb2NrZWRQYWdlQ29udGludWUgPSB0aGlzLmlzQmxvY2tlZFBhZ2VDb250aW51ZU5hdmlnYXRpb24oc3JjVVJMLCBkZXN0VVJMKTtcclxuXHJcbiAgICAgICAgaWYgKGlzRGVzdEV4dGVybmFsQXBwTGlua1VSTCkge1xyXG4gICAgICAgICAgICB0aGlzLmRldGVjdGVkRXh0ZXJuYWxBcHBMaW5rKHRhYklkKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGRlc3RVUkxDYXRlZ29yeSA9IGNhdGVnb3JpemVVcmwoaXNEZXN0VHJ1c3RlZFVSTCxcclxuICAgICAgICAgICAgICAgIGlzRGVzdFVudHJ1c3RlZFVSTCwgaXNEZXN0UGhpc2hpbmdTb3VyY2VTaXRlLFxyXG4gICAgICAgICAgICAgICAgaXNEZXN0V2ViTWFpbFNpdGUsIGlzRGVzdEV4dGVybmFsQXBwTGlua1VSTCk7XHJcblxyXG4gICAgICAgIGlmIChpc0Rlc3RCbG9ja2VkUGFnZVVSTCB8fFxyXG4gICAgICAgICAgICBpc0Rlc3RCbG9ja2VkRmlsZVBhZ2VVUkwpIHtcclxuICAgICAgICAgICAgdGhpcy5waGlzaGluZ05hdlNlcXVlbmNlRGV0ZWN0b3IucmVzZXREZXRlY3Rvcih0YWJJZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChjb25zaWRlclBhcmVudFRhYikge1xyXG4gICAgICAgICAgICB0aGlzLmRldGVjdGVkUGFyZW50VGFiKHRhYklkLCBwYXJlbnRVUkwsIHBhcmVudFVSTENhdGVnb3J5LFxyXG4gICAgICAgICAgICAgICAgcGFyZW50R3JvdXBzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgbmF2U2VxdWVuY2VEZXRlY3Rpb25zID0gKGlzUmVkaXJlY3QgP1xyXG4gICAgICAgICAgICB0aGlzLmRldGVjdFBoaXNoaW5nTmF2U2VxdWVuY2VPblJlZGlyZWN0KHRhYklkLCBkZXN0VVJMLCBkZXN0VVJMQ2F0ZWdvcnksIGRlc3RHcm91cHMpIDpcclxuICAgICAgICAgICAgdGhpcy5kZXRlY3RQaGlzaGluZ05hdlNlcXVlbmNlT25OYXZpZ2F0ZSh0YWJJZCwgZGVzdFVSTCwgZGVzdFVSTENhdGVnb3J5LCBkZXN0R3JvdXBzLCBpc05ld1RhYiwgZGlkVXNlckNyZWF0ZVRhYikpO1xyXG4gICAgICAgIGNvbnN0IGhhc0hpZ2hlclByZWNlZGVuY2VUaGFuQnVpbHRpbiA9IHRoaXMuaGFzSGlnaGVyUHJlY2VkZW5jZVRoYW5CdWlsdGluKG5hdlNlcXVlbmNlRGV0ZWN0aW9ucyk7XHJcbiAgICAgICAgY29uc3Qgc2hvdWxkQWxsb3dOYXZpZ2F0aW9uID0gKFxyXG4gICAgICAgICAgICAgICAgbmF2U2VxdWVuY2VEZXRlY3Rpb25zLnNob3VsZEFsbG93IHx8XHJcbiAgICAgICAgICAgICAgICBuYXZTZXF1ZW5jZURldGVjdGlvbnMuc2hvdWxkUG9zc2libHlBbGxvdyB8fFxyXG4gICAgICAgICAgICAgICAgbmF2U2VxdWVuY2VEZXRlY3Rpb25zLnNob3VsZFBvc3NpYmx5QmxvY2spICYmXHJcbiAgICAgICAgICAgIGhhc0hpZ2hlclByZWNlZGVuY2VUaGFuQnVpbHRpbjtcclxuXHJcbiAgICAgICAgbG9nKGBvbkJlZm9yZVJlcXVlc3QoJHt0b1N0cmluZyh7XHJcbiAgICAgICAgICAgIHJlcXVlc3RJZDogcmVxdWVzdElkLFxyXG4gICAgICAgICAgICBmcmFtZUlkOiBmcmFtZUlkLFxyXG4gICAgICAgICAgICB0YWJJZDogdGFiSWQsXHJcbiAgICAgICAgICAgIHBhcmVudFRhYklkOiBwYXJlbnRUYWJJZCxcclxuICAgICAgICAgICAgaXNOZXdUYWI6IGlzTmV3VGFiLFxyXG4gICAgICAgICAgICBkaWRVc2VyQ3JlYXRlVGFiOiBkaWRVc2VyQ3JlYXRlVGFiLFxyXG4gICAgICAgICAgICBjb25zaWRlclBhcmVudFRhYjogY29uc2lkZXJQYXJlbnRUYWIsXHJcbiAgICAgICAgICAgIGlzUmVzdG9yZWRTZXNzaW9uVGFiOiBpc1Jlc3RvcmVkU2Vzc2lvblRhYixcclxuICAgICAgICAgICAgaW5pdGlhdG9yOiBpbml0aWF0b3IsXHJcbiAgICAgICAgICAgIHNyY1VSTDogc3JjVVJMLFxyXG4gICAgICAgICAgICBkZXN0VVJMOiBkZXN0VVJMLFxyXG4gICAgICAgICAgICBwYXJlbnRVUkw6IHBhcmVudFVSTCxcclxuICAgICAgICAgICAgaXNSZWRpcmVjdDogaXNSZWRpcmVjdCxcclxuICAgICAgICAgICAgaXNBdXRoUmVxdWVzdDogaXNBdXRoUmVxdWVzdCxcclxuICAgICAgICAgICAgaHR0cE1ldGhvZDogc29tZShodHRwTWV0aG9kKSA/IGh0dHBNZXRob2RUeXBlVG9TdHJpbmcoaHR0cE1ldGhvZCkgOiBkZXRhaWxzLm1ldGhvZCxcclxuICAgICAgICAgICAgaXNTcmNQaGlzaGluZ1NvdXJjZVNpdGU6IGlzU3JjUGhpc2hpbmdTb3VyY2VTaXRlLFxyXG4gICAgICAgICAgICBpc0Rlc3RQaGlzaGluZ1NvdXJjZVNpdGU6IGlzRGVzdFBoaXNoaW5nU291cmNlU2l0ZSxcclxuICAgICAgICAgICAgaXNQYXJlbnRQaGlzaGluZ1NvdXJjZVNpdGU6IGlzUGFyZW50UGhpc2hpbmdTb3VyY2VTaXRlLFxyXG4gICAgICAgICAgICBpc1NyY1dlYk1haWxTaXRlOiBpc1NyY1dlYk1haWxTaXRlLFxyXG4gICAgICAgICAgICBpc0Rlc3RXZWJNYWlsU2l0ZTogaXNEZXN0V2ViTWFpbFNpdGUsXHJcbiAgICAgICAgICAgIGlzUGFyZW50V2ViTWFpbFNpdGU6IGlzUGFyZW50V2ViTWFpbFNpdGUsXHJcbiAgICAgICAgICAgIGlzRGVzdFRydXN0ZWRVUkw6IGlzRGVzdFRydXN0ZWRVUkwsXHJcbiAgICAgICAgICAgIGlzRGVzdFVudHJ1c3RlZFVSTDogaXNEZXN0VW50cnVzdGVkVVJMLFxyXG4gICAgICAgICAgICBpc0Rlc3RVbmNhdGVnb3JpemVkVVJMOiBpc0Rlc3RVbmNhdGVnb3JpemVkVVJMLFxyXG4gICAgICAgICAgICBpc1BhcmVudFRydXN0ZWRVUkw6IGlzUGFyZW50VHJ1c3RlZFVSTCxcclxuICAgICAgICAgICAgaXNEZXN0QmxvY2tlZFBhZ2VVUkw6IGlzRGVzdEJsb2NrZWRQYWdlVVJMLFxyXG4gICAgICAgICAgICBpc0Rlc3RCbG9ja2VkRmlsZVBhZ2VVUkw6IGlzRGVzdEJsb2NrZWRGaWxlUGFnZVVSTCxcclxuICAgICAgICAgICAgaXNEZXN0RXh0ZXJuYWxBcHBMaW5rUGFnZVVSTDogaXNEZXN0RXh0ZXJuYWxBcHBMaW5rVVJMLFxyXG4gICAgICAgICAgICBpc1BhcmVudEV4dGVybmFsQXBwTGlua1BhZ2VVUkw6IGlzUGFyZW50RXh0ZXJuYWxBcHBMaW5rVVJMLFxyXG4gICAgICAgICAgICBpc0Rlc3ROZXdUYWJQYWdlVXJsOiBpc0Rlc3ROZXdUYWJQYWdlVXJsLFxyXG4gICAgICAgICAgICBwYXJlbnRHcm91cHM6IHBhcmVudEdyb3VwcyxcclxuICAgICAgICAgICAgZGVzdEdyb3VwczogZGVzdEdyb3VwcyxcclxuICAgICAgICAgICAgc2hvdWxkQmxvY2tOYXZpZ2F0aW9uOiBzaG91bGRCbG9ja05hdmlnYXRpb24sXHJcbiAgICAgICAgICAgIHNob3VsZEFsbG93TmF2aWdhdGlvbjogc2hvdWxkQWxsb3dOYXZpZ2F0aW9uLFxyXG4gICAgICAgICAgICBkZXN0VVJMQ2F0ZWdvcnk6IHVybENhdGVnb3J5VG9TdHJpbmcoZGVzdFVSTENhdGVnb3J5KSxcclxuICAgICAgICAgICAgcGFyZW50VVJMQ2F0ZWdvcnk6IHVybENhdGVnb3J5VG9TdHJpbmcocGFyZW50VVJMQ2F0ZWdvcnkpLFxyXG4gICAgICAgICAgICBpc1NyY1NhbWVPcmlnaW46IGlzU3JjU2FtZU9yaWdpbixcclxuICAgICAgICAgICAgaXNQYXJlbnRTYW1lT3JpZ2luOiBpc1BhcmVudFNhbWVPcmlnaW4sXHJcbiAgICAgICAgICAgIGlzQmxvY2tlZFBhZ2VDb250aW51ZTogaXNCbG9ja2VkUGFnZUNvbnRpbnVlLFxyXG4gICAgICAgICAgICBpc0Jsb2NrZWROYXZTZXF1ZW5jZTogbmF2U2VxdWVuY2VEZXRlY3Rpb25zLnNob3VsZEJsb2NrLFxyXG4gICAgICAgICAgICBpc1Bvc3NpYmxlQmxvY2tlZE5hdlNlcXVlbmNlOiBuYXZTZXF1ZW5jZURldGVjdGlvbnMuc2hvdWxkUG9zc2libHlCbG9jayxcclxuICAgICAgICAgICAgaXNBbGxvd2VkTmF2U2VxdWVuY2U6IG5hdlNlcXVlbmNlRGV0ZWN0aW9ucy5zaG91bGRBbGxvdyxcclxuICAgICAgICAgICAgaXNQb3NzaWJsZUFsbG93ZWROYXZTZXF1ZW5jZTogbmF2U2VxdWVuY2VEZXRlY3Rpb25zLnNob3VsZFBvc3NpYmx5QWxsb3csXHJcbiAgICAgICAgICAgIG5hdlNlcXVlbmNlRGV0ZWN0aW9uc1ByZWNlZGVuY2U6IG5hdlNlcXVlbmNlRGV0ZWN0aW9ucy5wcmVjZWRlbmNlLFxyXG4gICAgICAgICAgICBoYXNIaWdoZXJQcmVjZWRlbmNlVGhhbkJ1aWx0aW46IGhhc0hpZ2hlclByZWNlZGVuY2VUaGFuQnVpbHRpbixcclxuICAgICAgICB9KX0pYCk7XHJcblxyXG4gICAgICAgIC8vIElmIHdlIGRldGVjdCBhbiBleHRlcm5hbCBhcHAgbmF2aWdhdGlvbiBpbiBFZGdlIHRoZW4gd2UgcmVkaXJlY3RcclxuICAgICAgICAvLyB0byB0aGUgZXh0ZXJuYWwgYXBwIGxpbmsgcGFnZSB0aGF0IGV4dGVybmFsIGxpbmtzIGluIENocm9tZSAmIEZpcmVmb3hcclxuICAgICAgICAvLyBuYXR1cmFsbHkgZ28gdGhyb3VnaCAodmlhIHRoZSBmaWxlIFVSTCBleHRlcm5hbCBhcHAgbGluayBuYXZpZ2F0b3IpLlxyXG4gICAgICAgIC8vIFRoaXMgdGFrZXMgcHJpb3JpdHkgb3ZlciBiZWluZyBkb3JtYW50IHNvIHRoYXQgd2Ugc3RpbGwgc3RyaXAgdGhlXHJcbiAgICAgICAgLy8gYWRkZWQgcXVlcnkgcGFyYW0gZnJvbSBleHRlcm5hbCBuYXZpZ2F0aW9ucyB3aGVuIGRvcm1hbnQuXHJcbiAgICAgICAgaWYgKHNvbWUoZGVzdFVSTCkgJiYgdGhpcy5pc0VkZ2VFeHRlcm5hbEFwcExpbmtOYXZpZ2F0aW9uKGRlc3RVUkwpKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRhcmdldFVSTCA9IHRoaXMuc3RyaXBFZGdlRXh0ZXJuYWxBcHBMaW5rTmF2aWdhdGlvblF1ZXJ5UGFyYW0oZGVzdFVSTCk7XHJcbiAgICAgICAgICAgIHJldHVybiBzZW5kVG9FeHRlcm5hbEFwcExpbmtQYWdlKHRhcmdldFVSTCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5pc0Rvcm1hbnQpIHtcclxuICAgICAgICAgICAgbG9nKFwiRXh0ZW5zaW9uIGlzIGluIGEgZG9ybWFudCBzdGF0ZSBzbyBvbkJlZm9yZVJlcXVlc3Qgd2lsbCByZXR1cm4gcHJvY2VlZCgpXCIpO1xyXG4gICAgICAgICAgICByZXR1cm4gcHJvY2VlZCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGlzRGVzdEJsb2NrZWRQYWdlVVJMIHx8XHJcbiAgICAgICAgICAgIGlzRGVzdEJsb2NrZWRGaWxlUGFnZVVSTCB8fFxyXG4gICAgICAgICAgICBpc0Rlc3RFeHRlcm5hbEFwcExpbmtVUkwgfHxcclxuICAgICAgICAgICAgaXNEZXN0TmV3VGFiUGFnZVVybCB8fFxyXG4gICAgICAgICAgICBpc0Jsb2NrZWRQYWdlQ29udGludWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHByb2NlZWQoKTtcclxuXHJcbiAgICAgICAgfSBlbHNlIGlmIChpc0Rlc3RVbnRydXN0ZWRVUkwpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGJsb2NrVW50cnVzdGVkKGRlc3RVUkwpO1xyXG5cclxuICAgICAgICB9IGVsc2UgaWYgKGlzRGVzdEZpbGVVUkwpIHtcclxuICAgICAgICAgICAgaWYgKGlzRGVzdFRydXN0ZWRGaWxlVVJMKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcHJvY2VlZCgpO1xyXG5cclxuICAgICAgICAgICAgfSBlbHNlIGlmIChpc0Rlc3RVbnRydXN0ZWRGaWxlVVJMKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYmxvY2tVbnRydXN0ZWRGaWxlKGRlc3RVUkwpO1xyXG5cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBibG9ja0ZpbGUoZGVzdFVSTCk7XHJcblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIGlmIChuYXZTZXF1ZW5jZURldGVjdGlvbnMuc2hvdWxkQmxvY2sgJiZcclxuICAgICAgICAgICAgICAgICAgICBoYXNIaWdoZXJQcmVjZWRlbmNlVGhhbkJ1aWx0aW4pIHtcclxuICAgICAgICAgICAgcmV0dXJuIGJsb2NrV2l0aE5hdlNlcXVlbmNlKGRlc3RVUkwsIG5hdlNlcXVlbmNlRGV0ZWN0aW9ucy5ibG9ja2VkKTtcclxuXHJcbiAgICAgICAgfSBlbHNlIGlmIChuYXZTZXF1ZW5jZURldGVjdGlvbnMuc2hvdWxkQWxsb3cgJiZcclxuICAgICAgICAgICAgICAgICAgICBoYXNIaWdoZXJQcmVjZWRlbmNlVGhhbkJ1aWx0aW4pIHtcclxuICAgICAgICAgICAgcmV0dXJuIHByb2NlZWQoKTtcclxuXHJcbiAgICAgICAgLy8gUHJvbXB0IGZvciB1bmNhdGVnb3JpemVkIG5lZWRzIHRvIGJlIGFmdGVyIGZpbGUgVVJMIGxvZ2ljIG9yIHdlIGJsb2NrIGV2ZXJ5IG5hdmlnYXRpb24gaW5jb3JyZWN0bHkgd2l0aCBibG9jaygpIG5vdCBibG9ja0ZpbGUoKVxyXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5wcm9tcHRGb3JVbmNhdGVnb3JpemVkICYmXHJcbiAgICAgICAgICAgICAgICAgICBpc0Rlc3RVbmNhdGVnb3JpemVkVVJMICYmXHJcbiAgICAgICAgICAgICAgICAgICAhaXNCbG9ja2VkUGFnZUNvbnRpbnVlKSB7IC8vIE5lZWQgdG8gYWxsb3cgbmF2aWdhdGlvbnMgYXdheSBmcm9tIHRoZSBibG9ja2VkIHBhZ2UgKGJ1dCBvbmx5IHRvIHRoZSBibG9ja2VkIFVSTCkgb3Igd2UgY2FuIGdldCBpbiBzdHVjayBpbiBibG9ja2luZyBsb29wc1xyXG4gICAgICAgICAgICByZXR1cm4gYmxvY2soZGVzdFVSTCk7XHJcblxyXG4gICAgICAgIH0gZWxzZSBpZiAoaXNOZXdUYWIgJiYgaXNSZWRpcmVjdCkge1xyXG4gICAgICAgICAgICBsb2dFcnJvcihuZXcgRXJyb3IoYG9uQmVmb3JlUmVxdWVzdDogdW5leHBlY3RlZDogJHt0b1N0cmluZyh7XHJcbiAgICAgICAgICAgICAgICBkZXN0VVJMOiBkZXN0VVJMLFxyXG4gICAgICAgICAgICAgICAgdGFiSWQ6IHRhYklkLFxyXG4gICAgICAgICAgICAgICAgaXNOZXdUYWI6IGlzTmV3VGFiLFxyXG4gICAgICAgICAgICAgICAgaXNSZWRpcmVjdDogaXNSZWRpcmVjdFxyXG4gICAgICAgICAgICB9KX1gKSk7XHJcbiAgICAgICAgICAgIHJldHVybiBwcm9jZWVkKCk7XHJcblxyXG4gICAgICAgIH0gZWxzZSBpZiAoaXNOZXdUYWIpIHtcclxuICAgICAgICAgICAgaWYgKGlzUmVzdG9yZWRTZXNzaW9uVGFiKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcHJvY2VlZCgpO1xyXG5cclxuICAgICAgICAgICAgfSBlbHNlIGlmIChzaG91bGRCbG9ja05hdmlnYXRpb24gJiZcclxuICAgICAgICAgICAgICAgICFzaG91bGRBbGxvd05hdmlnYXRpb24gJiZcclxuICAgICAgICAgICAgICAgICFpc0Rlc3RUcnVzdGVkVVJMICYmXHJcbiAgICAgICAgICAgICAgICAhaXNQYXJlbnRTYW1lT3JpZ2luICYmXHJcbiAgICAgICAgICAgICAgICAhZGlkVXNlckNyZWF0ZVRhYikge1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBibG9jayhkZXN0VVJMKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSBpZiAoaXNSZWRpcmVjdCkge1xyXG4gICAgICAgICAgICBpZiAoc2hvdWxkQmxvY2tOYXZpZ2F0aW9uICYmXHJcbiAgICAgICAgICAgICAgICAhc2hvdWxkQWxsb3dOYXZpZ2F0aW9uICYmXHJcbiAgICAgICAgICAgICAgICAhaXNBdXRoUmVxdWVzdCAmJlxyXG4gICAgICAgICAgICAgICAgIWlzRGVzdFRydXN0ZWRVUkwgJiZcclxuICAgICAgICAgICAgICAgICFpc1NyY1NhbWVPcmlnaW4pIHtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYmxvY2soZGVzdFVSTCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgaWYgKHNob3VsZEJsb2NrTmF2aWdhdGlvbiAmJlxyXG4gICAgICAgICAgICAhbmF2U2VxdWVuY2VEZXRlY3Rpb25zLnNob3VsZEFsbG93ICYmXHJcbiAgICAgICAgICAgICFuYXZTZXF1ZW5jZURldGVjdGlvbnMuc2hvdWxkUG9zc2libHlCbG9jayAmJlxyXG4gICAgICAgICAgICAhbmF2U2VxdWVuY2VEZXRlY3Rpb25zLnNob3VsZFBvc3NpYmx5QWxsb3cgJiZcclxuICAgICAgICAgICAgIWlzQXV0aFJlcXVlc3QgJiZcclxuICAgICAgICAgICAgIWlzRGVzdFRydXN0ZWRVUkwgJiZcclxuICAgICAgICAgICAgIWlzU3JjU2FtZU9yaWdpbikge1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGJsb2NrKGRlc3RVUkwpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKG5hdlNlcXVlbmNlRGV0ZWN0aW9ucy5zaG91bGRCbG9jayAmJlxyXG4gICAgICAgICAgICAgICAgICAgICFoYXNIaWdoZXJQcmVjZWRlbmNlVGhhbkJ1aWx0aW4pIHtcclxuICAgICAgICAgICAgcmV0dXJuIGJsb2NrV2l0aE5hdlNlcXVlbmNlKGRlc3RVUkwsIG5hdlNlcXVlbmNlRGV0ZWN0aW9ucy5ibG9ja2VkKTtcclxuXHJcbiAgICAgICAgfSBlbHNlIGlmIChuYXZTZXF1ZW5jZURldGVjdGlvbnMuc2hvdWxkQWxsb3cgJiZcclxuICAgICAgICAgICAgICAgICAgICAhaGFzSGlnaGVyUHJlY2VkZW5jZVRoYW5CdWlsdGluKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBwcm9jZWVkKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gcHJvY2VlZCgpO1xyXG4gICAgfVxyXG5cclxuICAgIG9uQmVmb3JlUmVkaXJlY3QoZGV0YWlsczogY2hyb21lLndlYlJlcXVlc3QuV2ViUmVkaXJlY3Rpb25SZXNwb25zZURldGFpbHMpIHtcclxuICAgICAgICBsb2coYG9uQmVmb3JlUmVkaXJlY3QoJHt0b1N0cmluZyhkZXRhaWxzKX0pYCk7XHJcbiAgICAgICAgdGhpcy5wZW5kaW5nUmVkaXJlY3RzLmFkZChkZXRhaWxzLnJlcXVlc3RJZCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSByZWFkQ29udGVudFR5cGVIZWFkZXIoaGVhZGVyczogTWF5YmU8Y2hyb21lLndlYlJlcXVlc3QuSHR0cEhlYWRlcltdPik6IE1heWJlPHN0cmluZz4ge1xyXG4gICAgICAgIGlmIChub25lKGhlYWRlcnMpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGZpbHRlcmVkSGVhZGVycyA9IGhlYWRlcnMuZmlsdGVyKChoZWFkZXIpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgaGVhZGVyVHlwZSA9IHBhcnNlSGVhZGVyVHlwZShoZWFkZXIubmFtZSk7XHJcbiAgICAgICAgICAgIHJldHVybiBoZWFkZXJUeXBlID09PSBIdHRwSGVhZGVyVHlwZS5jb250ZW50VHlwZTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBpZiAoZmlsdGVyZWRIZWFkZXJzLmxlbmd0aCAhPT0gMSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBjb250ZW50VHlwZUhlYWRlciA9IGZpcnN0KGZpbHRlcmVkSGVhZGVycyk7XHJcbiAgICAgICAgcmV0dXJuIGNvbnRlbnRUeXBlSGVhZGVyLnZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcmVhZENvbnRlbnRUeXBlKGNvbnRlbnRUeXBlSGVhZGVyOiBNYXliZTxzdHJpbmc+KTogTWF5YmU8Q29udGVudFR5cGU+IHtcclxuICAgICAgICBpZiAobm9uZShjb250ZW50VHlwZUhlYWRlcikpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHBhcnNlQ29udGVudFR5cGUoY29udGVudFR5cGVIZWFkZXIpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgaXNQREZDb250ZW50VHlwZSAoY29udGVudFR5cGU6IE1heWJlPENvbnRlbnRUeXBlPik6IGJvb2xlYW4ge1xyXG4gICAgICAgIGlmIChub25lKGNvbnRlbnRUeXBlKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBjb250ZW50VHlwZSA9PT0gQ29udGVudFR5cGUucGRmO1xyXG4gICAgfVxyXG5cclxuICAgIG9uSGVhZGVyc1JlY2VpdmVkKGRldGFpbHM6IGNocm9tZS53ZWJSZXF1ZXN0LldlYlJlc3BvbnNlSGVhZGVyc0RldGFpbHMpOiBjaHJvbWUud2ViUmVxdWVzdC5CbG9ja2luZ1Jlc3BvbnNlIHtcclxuICAgICAgICBjb25zdCByZXF1ZXN0SWQgPSBkZXRhaWxzLnJlcXVlc3RJZDtcclxuICAgICAgICBjb25zdCB0YWJJZCA9IGRldGFpbHMudGFiSWQ7XHJcbiAgICAgICAgY29uc3QgdXJsID0gcGFyc2VVcmwoZGV0YWlscy51cmwpO1xyXG4gICAgICAgIGNvbnN0IGhlYWRlcnMgPSBkZXRhaWxzLnJlc3BvbnNlSGVhZGVycztcclxuICAgICAgICBjb25zdCBjb250ZW50VHlwZUhlYWRlciA9IHRoaXMucmVhZENvbnRlbnRUeXBlSGVhZGVyKGhlYWRlcnMpO1xyXG4gICAgICAgIGNvbnN0IGNvbnRlbnRUeXBlID0gdGhpcy5yZWFkQ29udGVudFR5cGUoY29udGVudFR5cGVIZWFkZXIpO1xyXG4gICAgICAgIGNvbnN0IGlzUERGQ29udGVudFR5cGUgPSB0aGlzLmlzUERGQ29udGVudFR5cGUoY29udGVudFR5cGUpO1xyXG4gICAgICAgIGNvbnN0IHVybENhdGVnb3J5ID0gdGhpcy5jYXRlZ29yaXplVVJMKHVybCk7XHJcbiAgICAgICAgY29uc3QgZ3JvdXBzID0gdGhpcy5maW5kR3JvdXBzKHVybCk7XHJcbiAgICAgICAgY29uc3QgbmF2U2VxdWVuY2VEZXRlY3Rpb25zID0gdGhpcy5kZXRlY3RQaGlzaGluZ05hdlNlcXVlbmNlT25Db250ZW50VHlwZShcclxuICAgICAgICAgICAgICAgIHRhYklkLCB1cmwsIHVybENhdGVnb3J5LCBncm91cHMsIGNvbnRlbnRUeXBlKTtcclxuXHJcbiAgICAgICAgbG9nKGBvbkhlYWRlcnNSZWNlaXZlZDogJHt0b1N0cmluZyh7XHJcbiAgICAgICAgICAgIHJlcXVlc3RJZDogcmVxdWVzdElkLFxyXG4gICAgICAgICAgICB0YWJJZDogdGFiSWQsXHJcbiAgICAgICAgICAgIHVybDogdXJsLFxyXG4gICAgICAgICAgICBjb250ZW50VHlwZUhlYWRlcjogY29udGVudFR5cGVIZWFkZXIsXHJcbiAgICAgICAgICAgIGNvbnRlbnRUeXBlOiBzb21lKGNvbnRlbnRUeXBlKSA/IGNvbnRlbnRUeXBlVG9TdHJpbmcoY29udGVudFR5cGUpIDogY29udGVudFR5cGVIZWFkZXIsXHJcbiAgICAgICAgICAgIGlzUERGQ29udGVudFR5cGU6IGlzUERGQ29udGVudFR5cGUsXHJcbiAgICAgICAgICAgIHVybENhdGVnb3J5OiB1cmxDYXRlZ29yeVRvU3RyaW5nKHVybENhdGVnb3J5KSxcclxuICAgICAgICAgICAgZ3JvdXBzOiBncm91cHMsXHJcbiAgICAgICAgICAgIHNob3VsZEJsb2NrOiBuYXZTZXF1ZW5jZURldGVjdGlvbnMuc2hvdWxkQmxvY2ssXHJcbiAgICAgICAgICAgIHNob3VsZEFsbG93OiBuYXZTZXF1ZW5jZURldGVjdGlvbnMuc2hvdWxkQWxsb3csXHJcbiAgICAgICAgICAgIHNob3VsZFBvc3NpYmx5QmxvY2s6IG5hdlNlcXVlbmNlRGV0ZWN0aW9ucy5zaG91bGRQb3NzaWJseUJsb2NrLFxyXG4gICAgICAgICAgICBzaG91bGRQb3NzaWJseUFsbG93OiBuYXZTZXF1ZW5jZURldGVjdGlvbnMuc2hvdWxkUG9zc2libHlBbGxvdyxcclxuICAgICAgICB9KX1gKTtcclxuXHJcbiAgICAgICAgY29uc3QgcHJvY2VlZCA9ICgpOiBjaHJvbWUud2ViUmVxdWVzdC5CbG9ja2luZ1Jlc3BvbnNlID0+IHtcclxuICAgICAgICAgICAgbG9nKGBvbkhlYWRlcnNSZWNlaXZlZDogcHJvY2VlZDogJHt0b1N0cmluZyh7XHJcbiAgICAgICAgICAgICAgICB0YWJJZDogdGFiSWQsXHJcbiAgICAgICAgICAgICAgICB1cmw6IHVybCxcclxuICAgICAgICAgICAgICAgIGlzUERGQ29udGVudFR5cGU6IGlzUERGQ29udGVudFR5cGVcclxuICAgICAgICAgICAgfSl9YCk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb250aW51ZU5hdmlnYXRpb24oKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBjb25zdCBibG9jayA9IChwaGlzaGluZ05hdlNlcXVlbmNlOiBJTmF2U2VxdWVuY2VEZXRlY3Rpb24pOiBjaHJvbWUud2ViUmVxdWVzdC5CbG9ja2luZ1Jlc3BvbnNlID0+IHtcclxuICAgICAgICAgICAgbG9nKGBvbkhlYWRlcnNSZWNlaXZlZDogYmxvY2s6ICR7dG9TdHJpbmcoe1xyXG4gICAgICAgICAgICAgICAgdGFiSWQ6IHRhYklkLFxyXG4gICAgICAgICAgICAgICAgdXJsOiB1cmwsXHJcbiAgICAgICAgICAgICAgICBpc1BERkNvbnRlbnRUeXBlOiBpc1BERkNvbnRlbnRUeXBlXHJcbiAgICAgICAgICAgIH0pfWApO1xyXG5cclxuICAgICAgICAgICAgaWYgKCF0aGlzLmZlYXR1cmVNYW5hZ2VyLmlzUERGUHJvdGVjdGlvbkVuYWJsZWQpIHtcclxuICAgICAgICAgICAgICAgIGxvZyhgb25IZWFkZXJzUmVjZWl2ZWQ6IGJsb2NrOiBQREYgcHJvdGVjdGlvbiBpcyBub3QgZW5hYmxlZGApO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHByb2NlZWQoKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuc2hvdWxkT3BlblBoaXNoaW5nTGlua3NJblNlY3VyZUJyb3dzZXIpIHtcclxuICAgICAgICAgICAgICAgIC8vIElmIHdlJ3JlIGJsb2NraW5nIGEgUERGIHRoZW4gdGhlIHVzZXIgZXhwZXJpZW5jZSBpcyBiZXR0ZXIgaWZcclxuICAgICAgICAgICAgICAgIC8vIHdlIGRvbid0IGNsb3NlIHRoZSBuYXRpdmUgYnJvd3NlciB0YWIuIFRyeSB0byByZWRpcmVjdCBiYWNrXHJcbiAgICAgICAgICAgICAgICAvLyB0byB0aGUgc3JjIHBhZ2UgcmF0aGVyIHRoYW4gY2xvc2luZyB0aGUgdGFiLlxyXG4gICAgICAgICAgICAgICAgaWYgKGlzUERGQ29udGVudFR5cGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCByZWRpcmVjdFVSTCA9IHRoaXMuZ2V0UmVkaXJlY3RVUkwocmVxdWVzdElkKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5sYXVuY2hCcm93c2VyQW5kQ2xvc2VUYWIodGFiSWQsIHVybCwgcmVkaXJlY3RVUkwpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5sYXVuY2hCcm93c2VyQW5kQ2xvc2VUYWIodGFiSWQsIHVybCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIFJlc2V0IHRoZSBkZXRlY3RvciBoZXJlIChhcyB3ZWxsIGFzIGluIG9uQmVmb3JlUmVxdWVzdCBpZiBpc0Rlc3RCbG9ja2VkKEZpbGUpUGFnZVVSTClcclxuICAgICAgICAgICAgLy8gYmVjYXVzZSBGaXJlZm94IGFuZCBFZGdlIGRvbid0IGdldCBvbkJlZm9yZVJlcXVlc3QgZXZlbnRzIGZvciBleHRlbnNpb24gVVJMcy5cclxuICAgICAgICAgICAgdGhpcy5waGlzaGluZ05hdlNlcXVlbmNlRGV0ZWN0b3IucmVzZXREZXRlY3Rvcih0YWJJZCk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBibG9ja2VkUGFnZVVSTCA9IHRoaXMuYmxvY2tlZFBhZ2VDb250cm9sbGVyLmJsb2NrQ29udGVudFR5cGUodXJsLCBjb250ZW50VHlwZUhlYWRlciwgcGhpc2hpbmdOYXZTZXF1ZW5jZSwgdGFiSWQpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVkaXJlY3ROYXZpZ2F0aW9uKHRhYklkLCBibG9ja2VkUGFnZVVSTClcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBpZiAodGhpcy5pc0Rvcm1hbnQpIHtcclxuICAgICAgICAgICAgbG9nKFwiRXh0ZW5zaW9uIGlzIGluIGEgZG9ybWFudCBzdGF0ZSBzbyBvbkhlYWRlcnNSZWNlaXZlZCB3aWxsIHJldHVybiBwcm9jZWVkKClcIik7XHJcbiAgICAgICAgICAgIHJldHVybiBwcm9jZWVkKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAobmF2U2VxdWVuY2VEZXRlY3Rpb25zLnNob3VsZEJsb2NrKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBibG9jayhuYXZTZXF1ZW5jZURldGVjdGlvbnMuYmxvY2tlZCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHByb2NlZWQoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgb25Db21wbGV0ZWQoZGV0YWlsczogY2hyb21lLndlYlJlcXVlc3QuV2ViUmVzcG9uc2VDYWNoZURldGFpbHMpIHtcclxuICAgICAgICB0aGlzLnJlZGlyZWN0QmFja1RvU3JjSW5mby5kZWxldGUoZGV0YWlscy5yZXF1ZXN0SWQpO1xyXG4gICAgfVxyXG5cclxuICAgIG9uRXJyb3JPY2N1cnJlZChkZXRhaWxzOiBjaHJvbWUud2ViUmVxdWVzdC5XZWJSZXNwb25zZUVycm9yRGV0YWlscykge1xyXG4gICAgICAgIHRoaXMucmVkaXJlY3RCYWNrVG9TcmNJbmZvLmRlbGV0ZShkZXRhaWxzLnJlcXVlc3RJZCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVnaXN0ZXJMaXN0ZW5lcnMoKTogdm9pZCB7XHJcbiAgICAgICAgY29uc3QgbWFpbkZyYW1lRmlsdGVyID0gJ21haW5fZnJhbWUnO1xyXG4gICAgICAgIGNvbnN0IGZpbHRlcjogY2hyb21lLndlYlJlcXVlc3QuUmVxdWVzdEZpbHRlciA9IHtcclxuICAgICAgICAgICAgdXJsczogZ2V0V2ViUmVxdWVzdExpc3RlbmVyVXJsRmlsdGVyKHRoaXMuYnJvd3NlciksXHJcbiAgICAgICAgICAgIHR5cGVzOiBbbWFpbkZyYW1lRmlsdGVyXVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgbG9nKGBXZWJSZXF1ZXN0TGlzdGVuZXIucmVnaXN0ZXJMaXN0ZW5lcnM6ICR7dG9TdHJpbmcoe1xyXG4gICAgICAgICAgICBicm93c2VyOiBicm93c2VyVG9TdHJpbmcodGhpcy5icm93c2VyKSxcclxuICAgICAgICAgICAgZmlsdGVyXHJcbiAgICAgICAgfSl9YClcclxuXHJcbiAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIGxpc3RlbmVyIGlzIGFscmVhZHkgcmVnaXN0ZXJlZCB0byBhdm9pZCBkdXBsaWNhdGUgZXZlbnQgbm90aWZpY2F0aW9ucy5cclxuICAgICAgICBpZiAoIWNocm9tZS53ZWJSZXF1ZXN0Lm9uQmVmb3JlUmVxdWVzdC5oYXNMaXN0ZW5lcih0aGlzLm9uQmVmb3JlUmVxdWVzdENCKSkge1xyXG4gICAgICAgICAgICBjaHJvbWUud2ViUmVxdWVzdC5vbkJlZm9yZVJlcXVlc3QuYWRkTGlzdGVuZXIodGhpcy5vbkJlZm9yZVJlcXVlc3RDQixcclxuICAgICAgICAgICAgICAgICAgICBmaWx0ZXIsIFsnYmxvY2tpbmcnLCAncmVxdWVzdEJvZHknXSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghY2hyb21lLndlYlJlcXVlc3Qub25CZWZvcmVSZWRpcmVjdC5oYXNMaXN0ZW5lcih0aGlzLm9uQmVmb3JlUmVkaXJlY3RDQikpIHtcclxuICAgICAgICAgICAgY2hyb21lLndlYlJlcXVlc3Qub25CZWZvcmVSZWRpcmVjdC5hZGRMaXN0ZW5lcih0aGlzLm9uQmVmb3JlUmVkaXJlY3RDQiwgZmlsdGVyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCFjaHJvbWUud2ViUmVxdWVzdC5vbkhlYWRlcnNSZWNlaXZlZC5oYXNMaXN0ZW5lcih0aGlzLm9uSGVhZGVyc1JlY2VpdmVkQ0IpKSB7XHJcbiAgICAgICAgICAgIGNocm9tZS53ZWJSZXF1ZXN0Lm9uSGVhZGVyc1JlY2VpdmVkLmFkZExpc3RlbmVyKHRoaXMub25IZWFkZXJzUmVjZWl2ZWRDQixcclxuICAgICAgICAgICAgICAgICAgICBmaWx0ZXIsIFsnYmxvY2tpbmcnLCAncmVzcG9uc2VIZWFkZXJzJ10pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIWNocm9tZS53ZWJSZXF1ZXN0Lm9uQ29tcGxldGVkLmhhc0xpc3RlbmVyKHRoaXMub25Db21wbGV0ZWRDQikpIHtcclxuICAgICAgICAgICAgY2hyb21lLndlYlJlcXVlc3Qub25Db21wbGV0ZWQuYWRkTGlzdGVuZXIodGhpcy5vbkNvbXBsZXRlZENCLCBmaWx0ZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIWNocm9tZS53ZWJSZXF1ZXN0Lm9uRXJyb3JPY2N1cnJlZC5oYXNMaXN0ZW5lcih0aGlzLm9uRXJyb3JPY2N1cnJlZENCKSkge1xyXG4gICAgICAgICAgICBjaHJvbWUud2ViUmVxdWVzdC5vbkVycm9yT2NjdXJyZWQuYWRkTGlzdGVuZXIodGhpcy5vbkVycm9yT2NjdXJyZWRDQiwgZmlsdGVyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2hyb21lLndlYlJlcXVlc3QuaGFuZGxlckJlaGF2aW9yQ2hhbmdlZCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbW92ZUxpc3RlbmVycygpOiB2b2lkIHtcclxuICAgICAgICBjaHJvbWUud2ViUmVxdWVzdC5vbkJlZm9yZVJlcXVlc3QucmVtb3ZlTGlzdGVuZXIodGhpcy5vbkJlZm9yZVJlcXVlc3RDQik7XHJcbiAgICAgICAgY2hyb21lLndlYlJlcXVlc3Qub25CZWZvcmVSZWRpcmVjdC5yZW1vdmVMaXN0ZW5lcih0aGlzLm9uQmVmb3JlUmVkaXJlY3RDQik7XHJcbiAgICAgICAgY2hyb21lLndlYlJlcXVlc3Qub25IZWFkZXJzUmVjZWl2ZWQucmVtb3ZlTGlzdGVuZXIodGhpcy5vbkhlYWRlcnNSZWNlaXZlZENCKTtcclxuICAgICAgICBjaHJvbWUud2ViUmVxdWVzdC5vbkNvbXBsZXRlZC5yZW1vdmVMaXN0ZW5lcih0aGlzLm9uQ29tcGxldGVkQ0IpO1xyXG4gICAgICAgIGNocm9tZS53ZWJSZXF1ZXN0Lm9uRXJyb3JPY2N1cnJlZC5yZW1vdmVMaXN0ZW5lcih0aGlzLm9uRXJyb3JPY2N1cnJlZENCKTtcclxuICAgICAgICBjaHJvbWUud2ViUmVxdWVzdC5oYW5kbGVyQmVoYXZpb3JDaGFuZ2VkKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gTmVlZCB0byBwYXNzIHRoZSBleGFjdCBzYW1lIGNhbGxiYWNrIChpbmNsdWRpbmcgYmluZGluZykgdG9cclxuICAgIC8vIHJlbW92ZUxpc3RlbmVyKCkgdGhhdCB3YXMgcGFzc2VkIHRvIGFkZExpc3RlbmVyKCkgaW4gb3JkZXIgdG8gcmVtb3ZlIGFcclxuICAgIC8vIGxpc3RlbmVyIGZyb20gYW4gZXZlbnQsIGhlbmNlIGtlZXAgYSBsb2NhbCBjb3B5IHNpbmNlIGZ1bmN0aW9uLmJpbmQodGhpcylcclxuICAgIC8vIGdpdmVzIGEgZGlmZmVyZW50IHJlc3VsdCBldmVyeXRpbWUuXHJcbiAgICBwcml2YXRlIG9uQmVmb3JlUmVxdWVzdENCID0gKGRldGFpbHM6IGNocm9tZS53ZWJSZXF1ZXN0LldlYlJlcXVlc3RCb2R5RGV0YWlscyk6IGNocm9tZS53ZWJSZXF1ZXN0LkJsb2NraW5nUmVzcG9uc2UgPT4gdGhpcy5vbkJlZm9yZVJlcXVlc3QoZGV0YWlscyk7XHJcbiAgICBwcml2YXRlIG9uQmVmb3JlUmVkaXJlY3RDQiA9IChkZXRhaWxzOiBjaHJvbWUud2ViUmVxdWVzdC5XZWJSZWRpcmVjdGlvblJlc3BvbnNlRGV0YWlscykgPT4gdGhpcy5vbkJlZm9yZVJlZGlyZWN0KGRldGFpbHMpO1xyXG4gICAgcHJpdmF0ZSBvbkhlYWRlcnNSZWNlaXZlZENCID0gKGRldGFpbHM6IGNocm9tZS53ZWJSZXF1ZXN0LldlYlJlc3BvbnNlSGVhZGVyc0RldGFpbHMpOiBjaHJvbWUud2ViUmVxdWVzdC5CbG9ja2luZ1Jlc3BvbnNlID0+IHRoaXMub25IZWFkZXJzUmVjZWl2ZWQoZGV0YWlscyk7XHJcbiAgICBwcml2YXRlIG9uQ29tcGxldGVkQ0IgPSAoZGV0YWlsczogY2hyb21lLndlYlJlcXVlc3QuV2ViUmVzcG9uc2VDYWNoZURldGFpbHMpID0+IHRoaXMub25Db21wbGV0ZWQoZGV0YWlscyk7XHJcbiAgICBwcml2YXRlIG9uRXJyb3JPY2N1cnJlZENCID0gKGRldGFpbHM6IGNocm9tZS53ZWJSZXF1ZXN0LldlYlJlc3BvbnNlRXJyb3JEZXRhaWxzKSA9PiB0aGlzLm9uRXJyb3JPY2N1cnJlZChkZXRhaWxzKTtcclxuICAgIHByaXZhdGUgcGVuZGluZ1JlZGlyZWN0cyA9IG5ldyBTZXQ8UmVxdWVzdElkPigpO1xyXG4gICAgcHJpdmF0ZSB0YWJzID0gbmV3IFNldDxUYWJJZD4oKTtcclxuICAgIHByaXZhdGUgdGFiVVJMcyA9IG5ldyBNYXA8VGFiSWQsIFVSTD4oKTtcclxuICAgIHByaXZhdGUgcmVkaXJlY3RCYWNrVG9TcmNJbmZvID0gbmV3IE1hcDxSZXF1ZXN0SWQsIFJlZGlyZWN0QmFja1RvU3JjSW5mbz4oKTtcclxuICAgIC8vIFN0YXJ0IGluaXRpYWxseSBpbiBhbiBlcnJvci1mcmVlIHN0YXRlLlxyXG4gICAgcHJpdmF0ZSBpc0Rvcm1hbnQgPSBmYWxzZTtcclxuICAgIHByaXZhdGUgcHJvbXB0Rm9yVW5jYXRlZ29yaXplZCA9IGZhbHNlO1xyXG4gICAgcHJpdmF0ZSBkZWxheWVkVGFicyA9IG5ldyBTZXQ8VGFiSWQ+KCk7XHJcbiAgICBwcml2YXRlIGlkR2VuZXJhdG9yID0gbmV3IElkR2VuZXJhdG9yKCk7XHJcbiAgICBwcml2YXRlIG5ld1RhYlVSTHMgPSBwYXJzZUJyb3dzZXJOZXdUYWJVUkxzKCk7XHJcbiAgICBwcml2YXRlIGFib3V0QmxhbmtVUkwgPSBwYXJzZVVybChcImFib3V0OmJsYW5rXCIpO1xyXG4gICAgcHJpdmF0ZSBlZGdlTWFqb3JWZXJzaW9uID0gZmluZEVkZ2VNYWpvclZlcnNpb24oKTtcclxufVxyXG5cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vd2ViLXJlcXVlc3QtbGlzdGVuZXIudHMiLCIvLyBDb3B5cmlnaHQgKGMpIDIwMTggQnJvbWl1bSwgSW5jLlxyXG4vLyBVc2Ugb2YgdGhlIEJyb21pdW0sIEluYy4gc29mdHdhcmUgcmVxdWlyZXMgYSBsaWNlbnNlIGFncmVlbWVudCB3aXRoIEJyb21pdW0sIEluYy4gb3IgYW4gYXV0aG9yaXplZCByZXNlbGxlci5cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBpc1RydWUodmFsdWU6IGFueSkge1xyXG4gICAgcmV0dXJuIHZhbHVlID09PSB0cnVlO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaXNGYWxzZSh2YWx1ZTogYW55KSB7XHJcbiAgICByZXR1cm4gdmFsdWUgPT09IGZhbHNlO1xyXG59XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4uL2xpYi9jb21tb24vYm9vbGVhbi11dGlscy50cyIsImV4cG9ydCBmdW5jdGlvbiB1bnVzZWQ8VD4oYXJnOiBUKSB7XHJcbn1cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4uL2xpYi9jb21tb24vdW51c2VkLnRzIiwiLy8gQ29weXJpZ2h0IChjKSAyMDE4IEJyb21pdW0sIEluYy5cclxuLy8gVXNlIG9mIHRoZSBCcm9taXVtLCBJbmMuIHNvZnR3YXJlIHJlcXVpcmVzIGEgbGljZW5zZSBhZ3JlZW1lbnQgd2l0aCBCcm9taXVtLCBJbmMuIG9yIGFuIGF1dGhvcml6ZWQgcmVzZWxsZXIuXHJcblxyXG5pbXBvcnQgeyBTZXJpYWxpemVkUGhpc2hpbmdOYXZTZXFEYXRhIH0gZnJvbSBcIi4vbWVzc2FnZXNcIjtcclxuXHJcbmV4cG9ydCBjb25zdCBidWlsdGluUnVsZXM6IFNlcmlhbGl6ZWRQaGlzaGluZ05hdlNlcURhdGEgPSB7XHJcbiAgICBcInZlcnNpb25cIjogMSxcclxuICAgIFwiYnVpbHRpblJ1bGVzUHJlY2VkZW5jZVwiOiAxMCxcclxuICAgIFwic2Vxc1wiOiBbXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBcInNlcVwiOiBbXHJcbiAgICAgICAgICAgICAgICBbXCJwYXJlbnRUYWJcIiwgXCIkZ21haWxcIl0sXHJcbiAgICAgICAgICAgICAgICBbXCJuYXZpZ2F0ZVRvXCIsIFwiaHR0cHM6Ly9hY2NvdW50cy5nb29nbGUuY29tXCJdXHJcbiAgICAgICAgICAgIF0sXHJcbiAgICAgICAgICAgIFwibWV0YWRhdGFcIjoge1xyXG4gICAgICAgICAgICAgICAgXCJwcmVjZWRlbmNlXCI6IDExLFxyXG4gICAgICAgICAgICAgICAgXCJhbGxvd1wiOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgXCJibG9ja1wiOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIFwibmF2aWdhdGVUb1wiOiAzXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgXCJzZXFcIjogW1xyXG4gICAgICAgICAgICAgICAgW1wicGFyZW50VGFiXCIsIFwiJGdtYWlsXCJdLFxyXG4gICAgICAgICAgICAgICAgW1wibmF2aWdhdGVUb1wiLCBcImh0dHBzOi8vaGFuZ291dHMuZ29vZ2xlLmNvbVwiXVxyXG4gICAgICAgICAgICBdLFxyXG4gICAgICAgICAgICBcIm1ldGFkYXRhXCI6IHtcclxuICAgICAgICAgICAgICAgIFwicHJlY2VkZW5jZVwiOiAxMixcclxuICAgICAgICAgICAgICAgIFwiYWxsb3dcIjogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIFwiYmxvY2tcIjogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBcIm5hdmlnYXRlVG9cIjogM1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFwic2VxXCI6IFtcclxuICAgICAgICAgICAgICAgIFtcInBhcmVudFRhYlwiLCBcIiRnbWFpbFwiXSxcclxuICAgICAgICAgICAgICAgIFtcIm5hdmlnYXRlVG9cIiwgXCJodHRwczovL3d3dy5nb29nbGUuY29tXCJdLFxyXG4gICAgICAgICAgICAgICAgW1wibmF2T3JSZWRpcmVjdFRvXCIsIFwiPHVuY2F0ZWdvcml6ZWRVcmw+XCJdXHJcbiAgICAgICAgICAgIF0sXHJcbiAgICAgICAgICAgIFwibWV0YWRhdGFcIjoge1xyXG4gICAgICAgICAgICAgICAgXCJwcmVjZWRlbmNlXCI6IDEzLFxyXG4gICAgICAgICAgICAgICAgXCJhbGxvd1wiOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIFwiYmxvY2tcIjogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIFwibmF2aWdhdGVUb1wiOiAzXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgXCJzZXFcIjogW1xyXG4gICAgICAgICAgICAgICAgW1wibmF2aWdhdGVUb1wiLCBcIjxleHRlcm5hbEFwcExpbms+XCJdLFxyXG4gICAgICAgICAgICAgICAgW1wibmF2aWdhdGVUb1wiLCBcIjx3ZWJNYWlsU2l0ZVVybD5cIl1cclxuICAgICAgICAgICAgXSxcclxuICAgICAgICAgICAgXCJtZXRhZGF0YVwiOiB7XHJcbiAgICAgICAgICAgICAgICBcInByZWNlZGVuY2VcIjogMTQsXHJcbiAgICAgICAgICAgICAgICBcImFsbG93XCI6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBcImJsb2NrXCI6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgXCJuYXZpZ2F0ZVRvXCI6IDJcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBcInNlcVwiOiBbXHJcbiAgICAgICAgICAgICAgICBbXCJwYXJlbnRUYWJcIiwgXCI8d2ViTWFpbFNpdGVVcmw+XCJdLFxyXG4gICAgICAgICAgICAgICAgW1wibmF2aWdhdGVUb1wiLCBcIjx1bmNhdGVnb3JpemVkVXJsPlwiXVxyXG4gICAgICAgICAgICBdLFxyXG4gICAgICAgICAgICBcIm1ldGFkYXRhXCI6IHtcclxuICAgICAgICAgICAgICAgIFwicHJlY2VkZW5jZVwiOiA5LFxyXG4gICAgICAgICAgICAgICAgXCJhbGxvd1wiOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIFwiYmxvY2tcIjogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIFwibmF2aWdhdGVUb1wiOiA0XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgXCJzZXFcIjogW1xyXG4gICAgICAgICAgICAgICAgW1wicGFyZW50VGFiXCIsIFwiPHdlYk1haWxTaXRlVXJsPlwiXSxcclxuICAgICAgICAgICAgICAgIFtcIm5hdmlnYXRlVG9cIiwgXCI8dHJ1c3RlZFVybD5cIl0sXHJcbiAgICAgICAgICAgICAgICBbXCJyZXBlYXRcIiwgXCJyZWRpcmVjdFRvXCIsIFwibm90XCIsIFwiPHVudHJ1c3RlZFVybD5cIl0sXHJcbiAgICAgICAgICAgICAgICBbXCJyZWRpcmVjdFRvXCIsIFwiPHVuY2F0ZWdvcml6ZWRVcmw+XCJdXHJcbiAgICAgICAgICAgIF0sXHJcbiAgICAgICAgICAgIFwibWV0YWRhdGFcIjoge1xyXG4gICAgICAgICAgICAgICAgXCJwcmVjZWRlbmNlXCI6IDgsXHJcbiAgICAgICAgICAgICAgICBcImFsbG93XCI6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgXCJibG9ja1wiOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgXCJuYXZpZ2F0ZVRvXCI6IDRcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBcInNlcVwiOiBbXHJcbiAgICAgICAgICAgICAgICBbXCJuYXZpZ2F0ZVRvXCIsIFwiPGV4dGVybmFsQXBwTGluaz5cIl0sXHJcbiAgICAgICAgICAgICAgICBbXCJuYXZpZ2F0ZVRvXCIsIFwiPHRydXN0ZWRVcmw+XCJdLFxyXG4gICAgICAgICAgICAgICAgW1wicmVwZWF0XCIsIFwicmVkaXJlY3RUb1wiLCBcIm5vdFwiLCBcIjx1bnRydXN0ZWRVcmw+XCJdLFxyXG4gICAgICAgICAgICAgICAgW1wicmVkaXJlY3RUb1wiLCBcIjx1bmNhdGVnb3JpemVkVXJsPlwiXVxyXG4gICAgICAgICAgICBdLFxyXG4gICAgICAgICAgICBcIm1ldGFkYXRhXCI6IHtcclxuICAgICAgICAgICAgICAgIFwicHJlY2VkZW5jZVwiOiA1LFxyXG4gICAgICAgICAgICAgICAgXCJhbGxvd1wiOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIFwiYmxvY2tcIjogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIFwibmF2aWdhdGVUb1wiOiA0XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgXCJzZXFcIjogW1xyXG4gICAgICAgICAgICAgICAgW1wibmF2aWdhdGVUb1wiLCBcIjxleHRlcm5hbEFwcExpbms+XCJdLFxyXG4gICAgICAgICAgICAgICAgW1wibmF2aWdhdGVUb1wiLCBcIiRuYXZpZ2F0aW5nRW1haWxSZXdyaXRlclwiXSxcclxuICAgICAgICAgICAgICAgIFtcIm5hdmlnYXRlVG9cIiwgXCI8dW5jYXRlZ29yaXplZFVybD5cIl1cclxuICAgICAgICAgICAgXSxcclxuICAgICAgICAgICAgXCJtZXRhZGF0YVwiOiB7XHJcbiAgICAgICAgICAgICAgICBcInByZWNlZGVuY2VcIjogNixcclxuICAgICAgICAgICAgICAgIFwiYWxsb3dcIjogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBcImJsb2NrXCI6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBcIm5hdmlnYXRlVG9cIjogM1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFwic2VxXCI6IFtcclxuICAgICAgICAgICAgICAgIFtcIm5hdmlnYXRlVG9cIiwgXCI8ZXh0ZXJuYWxBcHBMaW5rPlwiXSxcclxuICAgICAgICAgICAgICAgIFtcIm5hdmlnYXRlVG9cIiwgXCJub3RcIiwgXCI8dHJ1c3RlZFVybD5cIl1cclxuICAgICAgICAgICAgXSxcclxuICAgICAgICAgICAgXCJtZXRhZGF0YVwiOiB7XHJcbiAgICAgICAgICAgICAgICBcInByZWNlZGVuY2VcIjogNyxcclxuICAgICAgICAgICAgICAgIFwiYWxsb3dcIjogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBcImJsb2NrXCI6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBcIm5hdmlnYXRlVG9cIjogMlxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFwic2VxXCI6IFtcclxuICAgICAgICAgICAgICAgIFtcIm5hdk9yUmVkaXJlY3RUb1wiLCBcIm5vdFwiLCBcIjx0cnVzdGVkVXJsPlwiXSxcclxuICAgICAgICAgICAgICAgIFtcIm5hdmlnYXRlVG9cIiwgXCJub3RcIiwgXCI8dHJ1c3RlZFVybD5cIl0sXHJcbiAgICAgICAgICAgICAgICBbXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi9wZGZcIl1cclxuICAgICAgICAgICAgXSxcclxuICAgICAgICAgICAgXCJtZXRhZGF0YVwiOiB7XHJcbiAgICAgICAgICAgICAgICBcInByZWNlZGVuY2VcIjogMixcclxuICAgICAgICAgICAgICAgIFwiYWxsb3dcIjogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBcImJsb2NrXCI6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBcIm5hdmlnYXRlVG9cIjogMlxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFwic2VxXCI6IFtcclxuICAgICAgICAgICAgICAgIFtcIm5hdk9yUmVkaXJlY3RUb1wiLCBcIm5vdFwiLCBcIjx0cnVzdGVkVXJsPlwiXSxcclxuICAgICAgICAgICAgICAgIFtcInJlcGVhdFwiLCBcInJlZGlyZWN0VG9cIiwgXCJub3RcIiwgXCI8dW50cnVzdGVkVXJsPlwiXSxcclxuICAgICAgICAgICAgICAgIFtcInJlZGlyZWN0VG9cIiwgXCJub3RcIiwgXCI8dHJ1c3RlZFVybD5cIl0sXHJcbiAgICAgICAgICAgICAgICBbXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi9wZGZcIl1cclxuICAgICAgICAgICAgXSxcclxuICAgICAgICAgICAgXCJtZXRhZGF0YVwiOiB7XHJcbiAgICAgICAgICAgICAgICBcInByZWNlZGVuY2VcIjogMSxcclxuICAgICAgICAgICAgICAgIFwiYWxsb3dcIjogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBcImJsb2NrXCI6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBcIm5hdmlnYXRlVG9cIjogMyxcclxuICAgICAgICAgICAgICAgIFwicmVxdWlyZXNVc2VyQ2xpY2tcIjogMlxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFwic2VxXCI6IFtcclxuICAgICAgICAgICAgICAgIFtcInBhcmVudFRhYlwiLCBcIm5vdFwiLCBcIjx0cnVzdGVkVXJsPlwiXSxcclxuICAgICAgICAgICAgICAgIFtcIm5hdmlnYXRlVG9cIiwgXCJub3RcIiwgXCI8dHJ1c3RlZFVybD5cIl0sXHJcbiAgICAgICAgICAgICAgICBbXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi9wZGZcIl1cclxuICAgICAgICAgICAgXSxcclxuICAgICAgICAgICAgXCJtZXRhZGF0YVwiOiB7XHJcbiAgICAgICAgICAgICAgICBcInByZWNlZGVuY2VcIjogNCxcclxuICAgICAgICAgICAgICAgIFwiYWxsb3dcIjogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBcImJsb2NrXCI6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBcIm5hdmlnYXRlVG9cIjogMlxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFwic2VxXCI6IFtcclxuICAgICAgICAgICAgICAgIFtcInBhcmVudFRhYlwiLCBcIm5vdFwiLCBcIjx0cnVzdGVkVXJsPlwiXSxcclxuICAgICAgICAgICAgICAgIFtcIm5hdmlnYXRlVG9cIiwgXCJub3RcIiwgXCI8dHJ1c3RlZFVybD5cIl0sXHJcbiAgICAgICAgICAgICAgICBbXCJyZXBlYXRcIiwgXCJyZWRpcmVjdFRvXCIsIFwibm90XCIsIFwiPHVudHJ1c3RlZFVybD5cIl0sXHJcbiAgICAgICAgICAgICAgICBbXCJyZWRpcmVjdFRvXCIsIFwibm90XCIsIFwiPHRydXN0ZWRVcmw+XCJdLFxyXG4gICAgICAgICAgICAgICAgW1wiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24vcGRmXCJdXHJcbiAgICAgICAgICAgIF0sXHJcbiAgICAgICAgICAgIFwibWV0YWRhdGFcIjoge1xyXG4gICAgICAgICAgICAgICAgXCJwcmVjZWRlbmNlXCI6IDMsXHJcbiAgICAgICAgICAgICAgICBcImFsbG93XCI6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgXCJibG9ja1wiOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgXCJuYXZpZ2F0ZVRvXCI6IDQsXHJcbiAgICAgICAgICAgICAgICBcInJlcXVpcmVzVXNlckNsaWNrXCI6IDJcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIF1cclxufTtcclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vYnVpbHRpbi1uYXYtc2VxdWVuY2UtZGV0ZWN0b3ItcnVsZXMudHMiLCJpbXBvcnQgeyBNYXliZSwgbm9uZSB9IGZyb20gXCIuL21heWJlXCI7XHJcbmltcG9ydCB7IEJyb3dzZXIsIGZpbmRFZGdlTWFqb3JWZXJzaW9uIH0gZnJvbSBcIi4vYnJvd3NlclwiO1xyXG5pbXBvcnQgeyBTY2hlbWUgfSBmcm9tIFwiLi9vcmlnaW5cIjtcclxuaW1wb3J0IHsgbG9nIH0gZnJvbSBcIi4vbG9nXCI7XHJcbmltcG9ydCB7IHRvU3RyaW5nIH0gZnJvbSBcIi4vc3RyaW5nLXV0aWxzXCJcclxuXHJcbmV4cG9ydCB0eXBlIFVybEZpbHRlciA9IHN0cmluZ1tdO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFdlYlJlcXVlc3RMaXN0ZW5lclVybEZpbHRlcihicm93c2VyOiBNYXliZTxCcm93c2VyPik6IFVybEZpbHRlciB7XHJcbiAgICBjb25zdCBnZXREZWZhdWx0VXJsRmlsdGVyID0gKCk6IFVybEZpbHRlciA9PiB7XHJcbiAgICAgICAgcmV0dXJuIFtcIjxhbGxfdXJscz5cIl07XHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IGdldEVkZ2VVcmxGaWx0ZXIgPSAoKTogVXJsRmlsdGVyID0+IHtcclxuICAgICAgICBjb25zdCBlZGdlTWFqb3JWZXJzaW9uID0gZmluZEVkZ2VNYWpvclZlcnNpb24oKTtcclxuICAgICAgICBsb2coYGdldEVkZ2VVcmxGaWx0ZXI6ICR7dG9TdHJpbmcoe1xyXG4gICAgICAgICAgICBlZGdlTWFqb3JWZXJzaW9uXHJcbiAgICAgICAgfSl9YCk7XHJcbiAgICAgICAgaWYgKG5vbmUoZWRnZU1ham9yVmVyc2lvbikpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGdldERlZmF1bHRVcmxGaWx0ZXIoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gS1JZLTUwMzMxOiBPbiBXaW5kb3dzIDEwIFJlZHN0b25lIDIsIHdpdGggRWRnZSAxNSwgaWYgYSB3ZWIgcmVxdWVzdCBsaXN0ZW5lciBpcyByZWdpc3RlcmVkIGZvciBmaWxlIFVSTHMsXHJcbiAgICAgICAgLy8gdGhlbiBmaWxlIFVSTCBuYXZpZ2F0aW9ucyB3aWxsIGNlYXNlIHRvIHdvcmsuXHJcbiAgICAgICAgaWYgKGVkZ2VNYWpvclZlcnNpb24gPT09IDE1KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1ha2VVcmxTY2hlbWVGaWx0ZXIgPSAoLi4uc2NoZW1lczogU2NoZW1lW10pOiBVcmxGaWx0ZXIgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHNjaGVtZXMubWFwKHNjaGVtZSA9PiBgJHtzY2hlbWV9Ly8qLypgKVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICByZXR1cm4gbWFrZVVybFNjaGVtZUZpbHRlcihcclxuICAgICAgICAgICAgICAgIFNjaGVtZS5XSUxEQ0FSRF9TT01FKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGdldERlZmF1bHRVcmxGaWx0ZXIoKTtcclxuICAgIH07XHJcblxyXG4gICAgaWYgKG5vbmUoYnJvd3NlcikpIHtcclxuICAgICAgICByZXR1cm4gZ2V0RGVmYXVsdFVybEZpbHRlcigpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGJyb3dzZXJVcmxGaWx0ZXJzID0gbmV3IE1hcChbXHJcbiAgICAgICAgW0Jyb3dzZXIuY2hyb21lLCBnZXREZWZhdWx0VXJsRmlsdGVyXSxcclxuICAgICAgICBbQnJvd3Nlci5maXJlZm94LCBnZXREZWZhdWx0VXJsRmlsdGVyXSxcclxuICAgICAgICBbQnJvd3Nlci5lZGdlLCBnZXRFZGdlVXJsRmlsdGVyXSxcclxuICAgICAgICBbQnJvd3Nlci5lZGdlQ2hyb21pdW0sIGdldERlZmF1bHRVcmxGaWx0ZXJdXHJcbiAgICBdKTtcclxuXHJcbiAgICBjb25zdCBnZXRVcmxGaWx0ZXIgPSBicm93c2VyVXJsRmlsdGVycy5nZXQoYnJvd3Nlcik7XHJcbiAgICBpZiAobm9uZShnZXRVcmxGaWx0ZXIpKSB7XHJcbiAgICAgICAgcmV0dXJuIGdldERlZmF1bHRVcmxGaWx0ZXIoKTtcclxuICAgIH1cclxuICAgIHJldHVybiBnZXRVcmxGaWx0ZXIoKTtcclxufVxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3dlYi1yZXF1ZXN0LWxpc3RlbmVyLWZpbHRlci50cyIsIi8vIENvcHlyaWdodCAoYykgMjAxOCBCcm9taXVtLCBJbmMuXHJcbi8vIFVzZSBvZiB0aGUgQnJvbWl1bSwgSW5jLiBzb2Z0d2FyZSByZXF1aXJlcyBhIGxpY2Vuc2UgYWdyZWVtZW50IHdpdGggQnJvbWl1bSwgSW5jLiBvciBhbiBhdXRob3JpemVkIHJlc2VsbGVyLlxyXG5cclxuLy8vIDxyZWZlcmVuY2UgdHlwZXM9XCJjaHJvbWVcIi8+XHJcbmltcG9ydCB7IE9yaWdpbiwgcGFyc2VPcmlnaW4sIG1ha2VPcmlnaW5TZXQsIHBhcnNlT3JpZ2luU2V0LCBwYXJzZU9yaWdpbk1hdGNoZXIsIE9yaWdpblBhcnNlT3B0aW9ucywgT3JpZ2luTWF0Y2hlciwgT3JpZ2luSGFzaE9wdGlvbnMsIE9yaWdpbkV4cGlyeU1hdGNoZXIsIHBhcnNlT3JpZ2luRXhwaXJ5TWF0Y2hlciB9IGZyb20gXCIuL29yaWdpblwiO1xyXG5pbXBvcnQgeyBIYXNoU2V0IH0gZnJvbSBcIi4vaGFzaC1tYXBcIjtcclxuaW1wb3J0IHsgVVJMLCBpc0V4dGVuc2lvblVybCwgaXNCcm93c2VyVXJsIH0gZnJvbSBcIi4vdXJsLXV0aWxzXCI7XHJcbmltcG9ydCB7IENvbmZpZ0tleSB9IGZyb20gXCIuL2NvbmZpZy1rZXlzXCI7XHJcbmltcG9ydCB7IENvbmZpZ1JlYWRlciB9IGZyb20gXCIuL2NvbmZpZy1yZWFkZXJcIjtcclxuaW1wb3J0IHsgSUNvbmZpZ05vdGlmaWVyIH0gZnJvbSBcIi4vY29uZmlnLW5vdGlmaWVyXCI7XHJcbmltcG9ydCB7IE1heWJlLCBub25lLCBzb21lfSBmcm9tIFwiLi9tYXliZVwiXHJcbmltcG9ydCB7IE1lc3NhZ2VUeXBlIH0gZnJvbSBcIi4vbWVzc2FnZS10eXBlc1wiO1xyXG5pbXBvcnQgeyBBZGRVc2VyVHJ1c3RlZE9yaWdpblYxLCBBZGRVc2VyVW50cnVzdGVkT3JpZ2luVjEgfSBmcm9tIFwiLi9tZXNzYWdlc1wiO1xyXG5pbXBvcnQgeyBNZXNzYWdlU2VuZGVyIH0gZnJvbSBcIi4vbWVzc2FnZS1zZW5kZXJcIjtcclxuaW1wb3J0IHsgU2l0ZUFuZEV4cGlyeSB9IGZyb20gXCIuL21lc3NhZ2VzXCI7XHJcbmltcG9ydCB7IGxvZ0Vycm9yIH0gZnJvbSBcIi4vbG9nXCI7XHJcbmltcG9ydCB7IHN1cmVDbGlja0FkdmFuY2VkSGVscEhvc3RuYW1lLCBzdXJlQ2xpY2tIZWxwSG9zdG5hbWUsIGJyb21pdW1IZWxwSG9zdG5hbWUgfSBmcm9tIFwiLi9wb3B1cC1wYWdlLWNvbnRyb2xsZXJcIjtcclxuXHJcbnR5cGUgT3JpZ2luSGFuZGxlciA9ICgpID0+IE1heWJlPGJvb2xlYW4+O1xyXG5cclxuY29uc3Qgb3JpZ2luTWF0Y2hlck9wdGlvbnMgPSBuZXcgT3JpZ2luUGFyc2VPcHRpb25zKHsgYWxsb3dXaWxkY2FyZHM6IHRydWUsIGFsbG93TWlzc2luZ1dpbGRjYXJkU2NoZW1lOiB0cnVlIH0pO1xyXG5jb25zdCBvcmlnaW5IYXNoT3B0aW9ucyA9IG5ldyBPcmlnaW5IYXNoT3B0aW9ucyh7IGlnbm9yZUh0dHBIdHRwc0RpZmZlcmVuY2U6IHRydWUsIGlnbm9yZVBvcnQ6IHRydWUgfSk7XHJcblxyXG5leHBvcnQgY2xhc3MgVHJ1c3RlZFVybFRyYWNrZXIge1xyXG4gICAgY29uc3RydWN0b3IoY29uZmlnTm90aWZpZXI6IElDb25maWdOb3RpZmllcixcclxuICAgICAgICAgICAgICAgIHByaXZhdGUgbWVzc2FnZVNlbmRlcjogTWVzc2FnZVNlbmRlcikgeyBcclxuICAgICAgICBjb25maWdOb3RpZmllci5hZGRDb25maWdMaXN0ZW5lckZvcktleXMoXHJcbiAgICAgICAgICAgIChrZXksIGNvbmZpZykgPT4gdGhpcy5vbkNvbmZpZ0NoYW5nZWQoa2V5LCBjb25maWcpLCBbIFxyXG4gICAgICAgICAgICAgICAgQ29uZmlnS2V5LnRydXN0ZWRVcmxzLCBcclxuICAgICAgICAgICAgICAgIENvbmZpZ0tleS51bnRydXN0ZWRVcmxzLFxyXG4gICAgICAgICAgICAgICAgQ29uZmlnS2V5LnVzZXJUcnVzdGVkT3JpZ2lucywgXHJcbiAgICAgICAgICAgICAgICBDb25maWdLZXkudXNlclVudHJ1c3RlZE9yaWdpbnMsXHJcbiAgICAgICAgICAgICAgICBDb25maWdLZXkucHJpb3JpdGlzZVRydXN0ZWRTaXRlcyxcclxuICAgICAgICAgICAgICAgIENvbmZpZ0tleS5yZXB1dGFibGVVcmxzXHJcbiAgICAgICAgICAgIF0pO1xyXG5cclxuICAgICAgICAvLyBNYXRjaGVyIGZvciBVUkxzIHdoaWNoIGFyZSBwYXJ0IG9mIFNCWCB3aGljaCB3ZSBzaG91bGQgdHJ1c3QsIGVnLiB0aGUgcG9wdXAgaGVscCBsaW5rIFVSTFxyXG4gICAgICAgIHRoaXMuc2J4VHJ1c3RlZE9yaWdpbnMgPSBwYXJzZU9yaWdpbk1hdGNoZXIoW1xyXG4gICAgICAgICAgICBzdXJlQ2xpY2tBZHZhbmNlZEhlbHBIb3N0bmFtZSxcclxuICAgICAgICAgICAgc3VyZUNsaWNrSGVscEhvc3RuYW1lLFxyXG4gICAgICAgICAgICBicm9taXVtSGVscEhvc3RuYW1lLFxyXG4gICAgICAgIF0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgb25Db25maWdDaGFuZ2VkKGtleTogQ29uZmlnS2V5LCBjb25maWc6IENvbmZpZ1JlYWRlcikge1xyXG4gICAgICAgIHN3aXRjaCAoa2V5KSB7XHJcbiAgICAgICAgICAgIGNhc2UgQ29uZmlnS2V5LnRydXN0ZWRVcmxzOlxyXG4gICAgICAgICAgICAgICAgdGhpcy50cnVzdGVkT3JpZ2lucyA9IHBhcnNlT3JpZ2luTWF0Y2hlcihjb25maWcudHJ1c3RlZFVybHMsIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvcmlnaW5NYXRjaGVyT3B0aW9ucyk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIGNhc2UgQ29uZmlnS2V5LnVudHJ1c3RlZFVybHM6XHJcbiAgICAgICAgICAgICAgICB0aGlzLnVudHJ1c3RlZE9yaWdpbnMgPSBwYXJzZU9yaWdpbk1hdGNoZXIoY29uZmlnLnVudHJ1c3RlZFVybHMsIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvcmlnaW5NYXRjaGVyT3B0aW9ucyk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIGNhc2UgQ29uZmlnS2V5LnVzZXJUcnVzdGVkT3JpZ2luczpcclxuICAgICAgICAgICAgICAgIHRoaXMudXNlclRydXN0ZWRPcmlnaW5zID0gcGFyc2VPcmlnaW5TZXQoY29uZmlnLnVzZXJUcnVzdGVkT3JpZ2lucywgb3JpZ2luSGFzaE9wdGlvbnMpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICBjYXNlIENvbmZpZ0tleS51c2VyVW50cnVzdGVkT3JpZ2luczpcclxuICAgICAgICAgICAgICAgIHRoaXMudXNlclVudHJ1c3RlZE9yaWdpbnMgPSBwYXJzZU9yaWdpblNldChjb25maWcudXNlclVudHJ1c3RlZE9yaWdpbnMsIG9yaWdpbkhhc2hPcHRpb25zKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgY2FzZSBDb25maWdLZXkucHJpb3JpdGlzZVRydXN0ZWRTaXRlczpcclxuICAgICAgICAgICAgICAgIHRoaXMucHJpb3JpdGlzZVRydXN0ZWRTaXRlcyA9IGNvbmZpZy5wcmlvcml0aXNlVHJ1c3RlZFNpdGVzO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiBcclxuICAgICAgICAgICAgY2FzZSBDb25maWdLZXkucmVwdXRhYmxlVXJsczpcclxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlUmVwdXRhdGlvbihjb25maWcpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgdXBkYXRlUmVwdXRhdGlvbihjb25maWc6IENvbmZpZ1JlYWRlcikge1xyXG4gICAgICAgIGNvbnN0IGluZGV4ID0gY29uZmlnLnJlcHV0YWJsZVNpdGVzLmluZGV4O1xyXG4gICAgICAgIGlmIChpbmRleCA9PT0gMCkge1xyXG4gICAgICAgICAgICB0aGlzLnBlbmRpbmdSZXB1dGFibGVTaXRlcyA9IFtdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgbGVuZ3RoID0gdGhpcy5wZW5kaW5nUmVwdXRhYmxlU2l0ZXMubGVuZ3RoO1xyXG4gICAgICAgIGlmIChsZW5ndGggIT09IGluZGV4KSB7XHJcbiAgICAgICAgICAgIGxvZ0Vycm9yKG5ldyBFcnJvcihgUmVwdXRhYmxlIHNpdGUgaW5kZXggbWlzbWF0Y2g6IGluZGV4PSR7aW5kZXh9IGxlbmd0aD0ke2xlbmd0aH1gKSk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gTm90ZTogcHVzaCguLi5jb25maWcucmVwdXRhYmxlU2l0ZXMucmVwdXRhYmxlU2l0ZXMpIHdvdWxkIG92ZXJmbG93IHN0YWNrIGZvciBsb3RzIG9mIHNpdGVzXHJcbiAgICAgICAgdGhpcy5wZW5kaW5nUmVwdXRhYmxlU2l0ZXMgPSB0aGlzLnBlbmRpbmdSZXB1dGFibGVTaXRlcy5jb25jYXQoY29uZmlnLnJlcHV0YWJsZVNpdGVzLnJlcHV0YWJsZVNpdGVzKTtcclxuICAgICAgICBsZW5ndGggPSB0aGlzLnBlbmRpbmdSZXB1dGFibGVTaXRlcy5sZW5ndGg7XHJcbiAgICAgICAgY29uc3QgdG90YWwgPSBjb25maWcucmVwdXRhYmxlU2l0ZXMudG90YWw7XHJcbiAgICAgICAgaWYgKGxlbmd0aCA+IHRvdGFsKSB7XHJcbiAgICAgICAgICAgIGxvZ0Vycm9yKG5ldyBFcnJvcihgUmVwdXRhYmxlIHNpdGUgbGVuZ3RoIG1pc21hdGNoOiB0b3RhbD0ke3RvdGFsfSBsZW5ndGg9JHtsZW5ndGh9YCkpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChsZW5ndGggPT09IHRvdGFsKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVwdXRhYmxlT3JpZ2lucyA9IHBhcnNlT3JpZ2luRXhwaXJ5TWF0Y2hlcih0aGlzLnBlbmRpbmdSZXB1dGFibGVTaXRlcyxcclxuICAgICAgICAgICAgICAgIG9yaWdpbk1hdGNoZXJPcHRpb25zKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdHJ1c3RVcmwodXJsOiBVUkwsIHRydXN0OiBib29sZWFuKSB7XHJcbiAgICAgICAgY29uc3Qgb3JpZ2luID0gcGFyc2VPcmlnaW4odXJsKTtcclxuICAgICAgICBpZiAobm9uZShvcmlnaW4pKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy50cnVzdE9yaWdpbihvcmlnaW4sIHRydXN0KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHRydXN0T3JpZ2luKG9yaWdpbjogT3JpZ2luLCB0cnVzdDogYm9vbGVhbikge1xyXG4gICAgICAgIGlmICh0cnVzdCkge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMudXNlclRydXN0ZWRPcmlnaW5zLmFkZChvcmlnaW4pKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3QgcmVxdWVzdCA9IG5ldyBBZGRVc2VyVHJ1c3RlZE9yaWdpblYxKG9yaWdpbi50b1N0cmluZygpKTtcclxuICAgICAgICAgICAgdGhpcy5tZXNzYWdlU2VuZGVyLnNlbmRNZXNzYWdlKE1lc3NhZ2VUeXBlLmFkZFVzZXJUcnVzdGVkT3JpZ2luVjEsIHJlcXVlc3QpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy51c2VyVW50cnVzdGVkT3JpZ2lucy5hZGQob3JpZ2luKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnN0IHJlcXVlc3QgPSBuZXcgQWRkVXNlclVudHJ1c3RlZE9yaWdpblYxKG9yaWdpbi50b1N0cmluZygpKTtcclxuICAgICAgICAgICAgdGhpcy5tZXNzYWdlU2VuZGVyLnNlbmRNZXNzYWdlKE1lc3NhZ2VUeXBlLmFkZFVzZXJVbnRydXN0ZWRPcmlnaW5WMSwgcmVxdWVzdCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlzVHJ1c3RlZFVybCh1cmw6IFVSTCk6IE1heWJlPGJvb2xlYW4+IHtcclxuICAgICAgICBpZiAoaXNFeHRlbnNpb25VcmwodXJsKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGlzQnJvd3NlclVybCh1cmwpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBvcmlnaW4gPSBwYXJzZU9yaWdpbih1cmwpO1xyXG4gICAgICAgIGlmIChub25lKG9yaWdpbikpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnNieFRydXN0ZWRPcmlnaW5zLmhhcyhvcmlnaW4pKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gRnVuY3Rpb24gdG8gY2hlY2sgaWYgc2l0ZSBpcyB1bnRydXN0ZWQgYnkgcG9saWN5LlxyXG4gICAgICAgIGNvbnN0IGhhbmRsZVVudHJ1c3RlZE9yaWdpbiA9ICgpIDogTWF5YmU8Ym9vbGVhbj4gPT4ge1xyXG4gICAgICAgICAgICBpZiAodGhpcy51bnRydXN0ZWRPcmlnaW5zLmhhcyhvcmlnaW4pKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvLyBGdW5jdGlvbiB0byBjaGVjayBpZiBzaXRlIGlzIHRydXN0ZWQgYnkgcG9saWN5LlxyXG4gICAgICAgIGNvbnN0IGhhbmRsZVRydXN0ZWRPcmlnaW4gPSAoKSA6IE1heWJlPGJvb2xlYW4+ID0+IHtcclxuICAgICAgICAgICAgaWYgKHRoaXMudHJ1c3RlZE9yaWdpbnMuaGFzKG9yaWdpbikpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy8gRnVuY3Rpb24gdG8gY2hlY2sgaWYgc2l0ZSBpcyB1c2VyIHVudHJ1c3RlZC5cclxuICAgICAgICBjb25zdCBoYW5kbGVVc2VyVW50cnVzdGVkT3JpZ2luID0gKCkgOiBNYXliZTxib29sZWFuPiA9PiB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnVzZXJVbnRydXN0ZWRPcmlnaW5zLmhhcyhvcmlnaW4pKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvLyBGdW5jdGlvbiB0byBjaGVjayBpZiBzaXRlIGlzIHVzZXIgdHJ1c3RlZC5cclxuICAgICAgICBjb25zdCBoYW5kbGVVc2VyVHJ1c3RlZE9yaWdpbiA9ICgpIDogTWF5YmU8Ym9vbGVhbj4gPT4ge1xyXG4gICAgICAgICAgICBpZiAodGhpcy51c2VyVHJ1c3RlZE9yaWdpbnMuaGFzKG9yaWdpbikpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy8gRnVuY3Rpb24gdG8gY2hlY2sgaWYgc2l0ZSBpcyB0cnVzdGVkIGJ5IHJlcHV0YXRpb24uXHJcbiAgICAgICAgY29uc3QgaGFuZGxlUmVwdXRhYmxlT3JpZ2luID0gKCkgOiBNYXliZTxib29sZWFuPiA9PiB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnJlcHV0YWJsZU9yaWdpbnMuaGFzKG9yaWdpbikpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy8gT3JkZXIgdGhlIHZhcmlvdXMgb3JpZ2luIGhhbmRsZXIgZnVuY3Rpb25zIGFwcHJvcHJpYXRlbHkuXHJcbiAgICAgICAgLy8gUG9saWN5IGNvbmZpZ3MgYWx3YXlzIGhhdmUgYSBoaWdoZXIgcHJlY2VkZW5jZSB0aGFuIHVzZXIgY29uZmlncy5cclxuICAgICAgICBjb25zdCBvcmlnaW5IYW5kbGVycyA9IHRoaXMucHJpb3JpdGlzZVRydXN0ZWRTaXRlcyA/IFtcclxuICAgICAgICAgICAgaGFuZGxlVHJ1c3RlZE9yaWdpbixcclxuICAgICAgICAgICAgaGFuZGxlVW50cnVzdGVkT3JpZ2luLFxyXG4gICAgICAgICAgICBoYW5kbGVVc2VyVHJ1c3RlZE9yaWdpbixcclxuICAgICAgICAgICAgaGFuZGxlVXNlclVudHJ1c3RlZE9yaWdpbixcclxuICAgICAgICAgICAgaGFuZGxlUmVwdXRhYmxlT3JpZ2luXHJcbiAgICAgICAgXSA6IFtcclxuICAgICAgICAgICAgaGFuZGxlVW50cnVzdGVkT3JpZ2luLFxyXG4gICAgICAgICAgICBoYW5kbGVUcnVzdGVkT3JpZ2luLFxyXG4gICAgICAgICAgICBoYW5kbGVVc2VyVW50cnVzdGVkT3JpZ2luLFxyXG4gICAgICAgICAgICBoYW5kbGVVc2VyVHJ1c3RlZE9yaWdpbixcclxuICAgICAgICAgICAgaGFuZGxlUmVwdXRhYmxlT3JpZ2luXHJcbiAgICAgICAgXVxyXG5cclxuICAgICAgICAvLyBUcnkgYWxsIHRoZSBvcmlnaW4gaGFuZGxlcnMgKGhpZ2hlc3QgcHJlY2VkZW5jZSBmaXJzdCksIHJldHVybmluZyBvbiBzdWNjZXNzLlxyXG4gICAgICAgIGZvciAoY29uc3Qgb3JpZ2luSGFuZGxlciBvZiBvcmlnaW5IYW5kbGVycykge1xyXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBvcmlnaW5IYW5kbGVyKCk7XHJcbiAgICAgICAgICAgIGlmIChzb21lKHJlc3VsdCkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzYnhUcnVzdGVkT3JpZ2luczogT3JpZ2luTWF0Y2hlcjtcclxuICAgIHByaXZhdGUgdHJ1c3RlZE9yaWdpbnM6IE9yaWdpbk1hdGNoZXIgPSBuZXcgT3JpZ2luTWF0Y2hlcigpO1xyXG4gICAgcHJpdmF0ZSB1bnRydXN0ZWRPcmlnaW5zOiBPcmlnaW5NYXRjaGVyID0gbmV3IE9yaWdpbk1hdGNoZXIoKTtcclxuICAgIHByaXZhdGUgcGVuZGluZ1JlcHV0YWJsZVNpdGVzOiBTaXRlQW5kRXhwaXJ5W10gPSBbXTtcclxuICAgIHByaXZhdGUgcmVwdXRhYmxlT3JpZ2luczogT3JpZ2luRXhwaXJ5TWF0Y2hlciA9IG5ldyBPcmlnaW5FeHBpcnlNYXRjaGVyKCk7XHJcbiAgICBwcml2YXRlIHVzZXJUcnVzdGVkT3JpZ2luczogSGFzaFNldDxPcmlnaW4+ID0gbWFrZU9yaWdpblNldChvcmlnaW5IYXNoT3B0aW9ucyk7XHJcbiAgICBwcml2YXRlIHVzZXJVbnRydXN0ZWRPcmlnaW5zOiBIYXNoU2V0PE9yaWdpbj4gPSBtYWtlT3JpZ2luU2V0KG9yaWdpbkhhc2hPcHRpb25zKTtcclxuICAgIHByaXZhdGUgcHJpb3JpdGlzZVRydXN0ZWRTaXRlcyA9IGZhbHNlO1xyXG59XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4uL2xpYi9jb21tb24vdHJ1c3RlZC11cmwtdHJhY2tlci50cyIsIi8vIENvcHlyaWdodCAoYykgMjAxOCBCcm9taXVtLCBJbmMuXHJcbi8vIFVzZSBvZiB0aGUgQnJvbWl1bSwgSW5jLiBzb2Z0d2FyZSByZXF1aXJlcyBhIGxpY2Vuc2UgYWdyZWVtZW50IHdpdGggQnJvbWl1bSwgSW5jLiBvciBhbiBhdXRob3JpemVkIHJlc2VsbGVyLlxyXG5cclxuaW1wb3J0IHsgRXZlbnREaXNwYXRjaGVyIH0gZnJvbSBcIi4vZXZlbnQtZGlzcGF0Y2hlclwiO1xyXG5pbXBvcnQgeyBNYXliZSB9IGZyb20gXCIuL21heWJlXCI7XHJcbmltcG9ydCB7IFByb3RvY29sVmVyc2lvbiB9IGZyb20gXCIuL3Byb3RvY29sLXZlcnNpb25zXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgSGFuZHNoYWtlbkV2ZW50IHtcclxuICAgIGNvbnN0cnVjdG9yKHJlYWRvbmx5IG5lZ290aWF0ZWRWZXJzaW9uIDogUHJvdG9jb2xWZXJzaW9uKSB7IH1cclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJSGFuZHNoYWtlciB7XHJcbiAgICByZWFkb25seSBvbkhhbmRzaGFrZW4gOiBFdmVudERpc3BhdGNoZXI8SGFuZHNoYWtlbkV2ZW50PjtcclxuICAgIGlzSGFuZHNoYWtlbiA6IGJvb2xlYW47XHJcbiAgICBuZWdvdGlhdGVkVmVyc2lvbiA6IE1heWJlPFByb3RvY29sVmVyc2lvbj47XHJcbn1cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4uL2xpYi9jb21tb24vaGFuZHNoYWtlci50cyIsIi8vIENvcHlyaWdodCAoYykgMjAxOCBCcm9taXVtLCBJbmMuXHJcbi8vIFVzZSBvZiB0aGUgQnJvbWl1bSwgSW5jLiBzb2Z0d2FyZSByZXF1aXJlcyBhIGxpY2Vuc2UgYWdyZWVtZW50IHdpdGggQnJvbWl1bSwgSW5jLiBvciBhbiBhdXRob3JpemVkIHJlc2VsbGVyLlxyXG5cclxuaW1wb3J0IHsgaXNJblJhbmdlIH0gZnJvbSBcIi4vbnVtYmVyLXV0aWxzXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgUmFuZ2Uge1xyXG4gICAgY29uc3RydWN0b3IocmVhZG9ubHkgbWluOiBudW1iZXIsIHJlYWRvbmx5IG1heDogbnVtYmVyKSB7fVxyXG5cclxuICAgIGNvbnRhaW5zKHZhbHVlOiBudW1iZXIpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gaXNJblJhbmdlKHZhbHVlLCB0aGlzLm1pbiwgdGhpcy5tYXgpO1xyXG4gICAgfVxyXG59XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuLi9saWIvY29tbW9uL3JhbmdlLnRzIiwiLy8gQ29weXJpZ2h0IChjKSAyMDE4IEJyb21pdW0sIEluYy5cclxuLy8gVXNlIG9mIHRoZSBCcm9taXVtLCBJbmMuIHNvZnR3YXJlIHJlcXVpcmVzIGEgbGljZW5zZSBhZ3JlZW1lbnQgd2l0aCBCcm9taXVtLCBJbmMuIG9yIGFuIGF1dGhvcml6ZWQgcmVzZWxsZXIuXHJcblxyXG5pbXBvcnQgeyBnZXRJMThuLCBJMThuTWVzc2FnZXMgfSBmcm9tIFwiLi9pMThuXCI7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaXNTdXJlQ2xpY2soKSB7XHJcbiAgICBjb25zdCBuYW1lID0gZ2V0STE4bihJMThuTWVzc2FnZXMubmFtZSk7XHJcbiAgICByZXR1cm4gbmFtZS5zdGFydHNXaXRoKFwiSFBcIik7XHJcbn1cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi4vbGliL2NvbW1vbi9icmFuZGluZy50cyIsIi8vIENvcHlyaWdodCAoYykgMjAxOCBCcm9taXVtLCBJbmMuXHJcbi8vIFVzZSBvZiB0aGUgQnJvbWl1bSwgSW5jLiBzb2Z0d2FyZSByZXF1aXJlcyBhIGxpY2Vuc2UgYWdyZWVtZW50IHdpdGggQnJvbWl1bSwgSW5jLiBvciBhbiBhdXRob3JpemVkIHJlc2VsbGVyLlxyXG5cclxuaW1wb3J0IHsgTm9uZSwgU29tZSwgTWF5YmUsIG5vbmUsIHNvbWUgfSBmcm9tIFwiLi9tYXliZVwiO1xyXG5pbXBvcnQgeyBUYWJJZCwgUmVxdWVzdElkIH0gZnJvbSBcIi4vY29tbW9uLXR5cGVzXCI7XHJcbmltcG9ydCB7IFVSTCwgaXNTYW1lVXJsLCBVcmxDb21wYXJlT3B0aW9ucyB9IGZyb20gXCIuL3VybC11dGlsc1wiO1xyXG5pbXBvcnQgeyBUcnVzdGVkVXJsVHJhY2tlciB9IGZyb20gXCIuL3RydXN0ZWQtdXJsLXRyYWNrZXJcIjtcclxuaW1wb3J0IHsgQ29uZmlnUmVhZGVyIH0gZnJvbSBcIi4vY29uZmlnLXJlYWRlclwiO1xyXG5pbXBvcnQgeyBPcmlnaW4sIHBhcnNlT3JpZ2luLCBtYWtlT3JpZ2luU2V0LCBwYXJzZU9yaWdpblNldCB9IGZyb20gXCIuL29yaWdpblwiO1xyXG5pbXBvcnQgeyBIYXNoU2V0IH0gZnJvbSBcIi4vaGFzaC1tYXBcIjtcclxuaW1wb3J0IHsgSUNvbmZpZ05vdGlmaWVyIH0gZnJvbSBcIi4vY29uZmlnLW5vdGlmaWVyXCI7XHJcbmltcG9ydCB7IENvbmZpZ0tleSB9IGZyb20gXCIuL2NvbmZpZy1rZXlzXCI7XHJcbmltcG9ydCB7IFBoaXNoaW5nU291cmNlU2l0ZXMsIElQaGlzaGluZ1NvdXJjZVNpdGVzLCBFbXB0eVBoaXNoaW5nU291cmNlU2l0ZXMsIFRhYlR5cGUgfSBmcm9tIFwiLi9waGlzaGluZy1zb3VyY2Utc2l0ZXNcIjtcclxuaW1wb3J0IHsgQ29uZmlnIH0gZnJvbSBcIi4vY29uZmlnXCI7XHJcbmltcG9ydCB7IE5hdlR5cGUsIEdyb3VwTmFtZSB9IGZyb20gXCIuL25hdi1zZXF1ZW5jZS1wYXJzZXJcIjtcclxuaW1wb3J0IHsgSHR0cE1ldGhvZFR5cGUgfSBmcm9tIFwiLi9odHRwLW1ldGhvZFwiO1xyXG5pbXBvcnQgeyBGaWxlVXJsVHJhY2tlciB9IGZyb20gXCIuL2ZpbGUtdXJsLXRyYWNrZXJcIjtcclxuaW1wb3J0IHsgTmV3VGFiUGFnZVVybFRyYWNrZXIgfSBmcm9tIFwiLi9uZXctdGFiLXBhZ2UtdXJsLXRyYWNrZXJcIjtcclxuXHJcbmZ1bmN0aW9uIG1heWJlSXNTYW1lVXJsKGE6IFVSTCwgYjogTWF5YmU8VVJMPikge1xyXG4gICAgaWYgKGIgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIHJldHVybiBpc1NhbWVVcmwoYSwgYiwgVXJsQ29tcGFyZU9wdGlvbnMuSWdub3JlU2VhcmNoUGFyYW1zKTtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFBsYWNlbWVudE1hbmFnZXIge1xyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAgICAgcHJpdmF0ZSB0cnVzdGVkVXJsVHJhY2tlcjogVHJ1c3RlZFVybFRyYWNrZXIsXHJcbiAgICAgICAgcHJpdmF0ZSBmaWxlVXJsVHJhY2tlcjogRmlsZVVybFRyYWNrZXIsXHJcbiAgICAgICAgcHJpdmF0ZSBuZXdUYWJQYWdlVXJsVHJhY2tlcjogTmV3VGFiUGFnZVVybFRyYWNrZXIsXHJcbiAgICAgICAgY29uZmlnTm90aWZpZXI6IElDb25maWdOb3RpZmllcikge1xyXG4gICAgICAgIGNvbmZpZ05vdGlmaWVyLmFkZENvbmZpZ0xpc3RlbmVyRm9yS2V5cyhcclxuICAgICAgICAgICAgKGtleSwgY29uZmlnKSA9PiB0aGlzLm9uQ29uZmlnQ2hhbmdlZChrZXksIGNvbmZpZyksIFsgXHJcbiAgICAgICAgICAgICAgICBDb25maWdLZXkucGhpc2hpbmdTb3VyY2VTaXRlcywgXHJcbiAgICAgICAgICAgICAgICBDb25maWdLZXkub3BlblBoaXNoaW5nTGlua3NJblNlY3VyZUJyb3dzZXIgXHJcbiAgICAgICAgICAgIF0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgb25Db25maWdDaGFuZ2VkKGtleTogQ29uZmlnS2V5LCBjb25maWc6IENvbmZpZ1JlYWRlcikge1xyXG4gICAgICAgIHN3aXRjaCAoa2V5KSB7XHJcbiAgICAgICAgICAgIGNhc2UgQ29uZmlnS2V5LnBoaXNoaW5nU291cmNlU2l0ZXM6IHtcclxuICAgICAgICAgICAgICAgIGlmIChzb21lKGNvbmZpZy5waGlzaGluZ1NvdXJjZVNpdGVzKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjb25maWcucGhpc2hpbmdTb3VyY2VTaXRlcy52ZXJzaW9uID09PSBDb25maWcucGhpc2hpbmdTb3VyY2VTaXRlc1ZlcnNpb24oKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBoaXNoaW5nU291cmNlU2l0ZXMgPSBuZXcgUGhpc2hpbmdTb3VyY2VTaXRlcyhjb25maWcucGhpc2hpbmdTb3VyY2VTaXRlcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2FzZSBDb25maWdLZXkub3BlblBoaXNoaW5nTGlua3NJblNlY3VyZUJyb3dzZXI6IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2hvdWxkT3BlblBoaXNoaW5nTGlua3NJblNlY3VyZUJyb3dzZXIgPSBjb25maWcub3BlblBoaXNoaW5nTGlua3NJblNlY3VyZUJyb3dzZXI7XHJcbiAgICAgICAgICAgICAgICBicmVha1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaXNOZXdUYWJQYWdlVXJsKHVybDogVVJMKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubmV3VGFiUGFnZVVybFRyYWNrZXIuaXNOZXdUYWJQYWdlVXJsKHVybCk7XHJcbiAgICB9XHJcblxyXG4gICAgaXNUcnVzdGVkVXJsKHVybDogVVJMKTogTWF5YmU8Ym9vbGVhbj4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnRydXN0ZWRVcmxUcmFja2VyLmlzVHJ1c3RlZFVybCh1cmwpO1xyXG4gICAgfVxyXG5cclxuICAgIGlzVHJ1c3RlZEZpbGVVcmwoZmlsZVVybDogVVJMKTogTWF5YmU8Ym9vbGVhbj4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmZpbGVVcmxUcmFja2VyLmlzRmlsZVVybFRydXN0ZWQoZmlsZVVybCk7XHJcbiAgICB9XHJcblxyXG4gICAgaXNQaGlzaGluZ1NvdXJjZVNpdGUodXJsOiBVUkwpOiBNYXliZTxib29sZWFuPiB7XHJcbiAgICAgICAgY29uc3Qgb3JpZ2luID0gcGFyc2VPcmlnaW4odXJsKTtcclxuICAgICAgICBpZiAobm9uZShvcmlnaW4pKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLnBoaXNoaW5nU291cmNlU2l0ZXMuaXNQaGlzaGluZ1NvdXJjZVNpdGUob3JpZ2luKTtcclxuICAgIH1cclxuXHJcbiAgICBpc1dlYk1haWxTaXRlKHVybDogVVJMKTogTWF5YmU8Ym9vbGVhbj4ge1xyXG4gICAgICAgIGNvbnN0IG9yaWdpbiA9IHBhcnNlT3JpZ2luKHVybCk7XHJcbiAgICAgICAgaWYgKG5vbmUob3JpZ2luKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5waGlzaGluZ1NvdXJjZVNpdGVzLmlzV2ViTWFpbFNpdGUob3JpZ2luKTtcclxuICAgIH1cclxuXHJcbiAgICBzaXRlUmVxdWlyZXNBdXRoKHVybDogVVJMKTogTWF5YmU8Ym9vbGVhbj4ge1xyXG4gICAgICAgIGNvbnN0IG9yaWdpbiA9IHBhcnNlT3JpZ2luKHVybCk7XHJcbiAgICAgICAgaWYgKG5vbmUob3JpZ2luKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5waGlzaGluZ1NvdXJjZVNpdGVzLnNpdGVSZXF1aXJlc0F1dGgob3JpZ2luKTtcclxuICAgIH1cclxuXHJcbiAgICBpc0F1dGhTaXRlKHVybDogVVJMKTogTWF5YmU8Ym9vbGVhbj4ge1xyXG4gICAgICAgIGNvbnN0IG9yaWdpbiA9IHBhcnNlT3JpZ2luKHVybCk7XHJcbiAgICAgICAgaWYgKG5vbmUob3JpZ2luKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5waGlzaGluZ1NvdXJjZVNpdGVzLmlzQXV0aFNpdGUob3JpZ2luKTtcclxuICAgIH1cclxuXHJcbiAgICBmaW5kR3JvdXBzKHVybDogVVJMKTogTWF5YmU8R3JvdXBOYW1lW10+IHtcclxuICAgICAgICBjb25zdCBvcmlnaW4gPSBwYXJzZU9yaWdpbih1cmwpO1xyXG4gICAgICAgIGlmIChub25lKG9yaWdpbikpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucGhpc2hpbmdTb3VyY2VTaXRlcy5maW5kR3JvdXBzKG9yaWdpbik7XHJcbiAgICB9XHJcblxyXG4gICAgc2hvdWxkQmxvY2tOYXZpZ2F0aW9uKHRhYlR5cGU6IFRhYlR5cGUsIG5hdlR5cGU6IE5hdlR5cGUsIG1ldGhvZFR5cGU6IEh0dHBNZXRob2RUeXBlLCB1cmw6IFVSTCk6IE1heWJlPGJvb2xlYW4+IHtcclxuICAgICAgICBjb25zdCBvcmlnaW4gPSBwYXJzZU9yaWdpbih1cmwpO1xyXG4gICAgICAgIGlmIChub25lKG9yaWdpbikpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucGhpc2hpbmdTb3VyY2VTaXRlcy5zaG91bGRCbG9ja05hdmlnYXRpb24odGFiVHlwZSwgbmF2VHlwZSwgbWV0aG9kVHlwZSwgb3JpZ2luKTtcclxuICAgIH1cclxuXHJcbiAgICBzaG91bGRPcGVuUGhpc2hpbmdMaW5rc0luU2VjdXJlQnJvd3NlcjogYm9vbGVhbiA9IGZhbHNlO1xyXG5cclxuICAgIHByaXZhdGUgcGhpc2hpbmdTb3VyY2VTaXRlczogSVBoaXNoaW5nU291cmNlU2l0ZXMgPSBuZXcgRW1wdHlQaGlzaGluZ1NvdXJjZVNpdGVzKCk7XHJcbn1cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi4vbGliL2NvbW1vbi9wbGFjZW1lbnQtbWFuYWdlci50cyIsIi8vIENvcHlyaWdodCAoYykgMjAxOCBCcm9taXVtLCBJbmMuXHJcbi8vIFVzZSBvZiB0aGUgQnJvbWl1bSwgSW5jLiBzb2Z0d2FyZSByZXF1aXJlcyBhIGxpY2Vuc2UgYWdyZWVtZW50IHdpdGggQnJvbWl1bSwgSW5jLiBvciBhbiBhdXRob3JpemVkIHJlc2VsbGVyLlxyXG5cclxuLy8vIDxyZWZlcmVuY2UgdHlwZXM9XCJjaHJvbWVcIi8+XHJcbmltcG9ydCB7IENvbmZpZ1JlYWRlciB9IGZyb20gXCIuL2NvbmZpZy1yZWFkZXJcIjtcclxuaW1wb3J0IHsgVVJMLCBwYXJzZVVybCwgVVJMVG9TdHJpbmcsIGlzU2FtZVVybCwgVXJsQ29tcGFyZU9wdGlvbnMsIGlzVVJMIH0gZnJvbSBcIi4vdXJsLXV0aWxzXCI7XHJcbmltcG9ydCB7IE1heWJlLCBzb21lLCBub25lIH0gZnJvbSBcIi4vbWF5YmVcIjtcclxuaW1wb3J0IHsgSWQsIElkR2VuZXJhdG9yfSBmcm9tIFwiLi9pZC1nZW5lcmF0b3JcIjtcclxuaW1wb3J0IHsgTWVzc2FnZVR5cGUgfSBmcm9tIFwiLi9tZXNzYWdlLXR5cGVzXCI7XHJcbmltcG9ydCB7IE1lc3NhZ2UsIExhdW5jaEJyb3dzZXJSZXF1ZXN0VjEsIFRydXN0VXJsVjgsIExhdW5jaEJyb3dzZXJSZXNwb25zZVYxLCBEb250QXNrQWdhaW5WOCwgRG9udEFza0FnYWluVjkgfSBmcm9tIFwiLi9tZXNzYWdlc1wiO1xyXG5pbXBvcnQgeyBtYWtlUHJvbWlzZSB9IGZyb20gXCIuL3Byb21pc2UtdXRpbHNcIjtcclxuaW1wb3J0IHsgTWVzc2FnZVNlbmRlciB9IGZyb20gXCIuL21lc3NhZ2Utc2VuZGVyXCI7XHJcbmltcG9ydCB7IFRydXN0ZWRVcmxUcmFja2VyIH0gZnJvbSBcIi4vdHJ1c3RlZC11cmwtdHJhY2tlclwiO1xyXG5pbXBvcnQgeyBsb2csIGxvZ0Vycm9yIH0gZnJvbSBcIi4vbG9nXCI7XHJcbmltcG9ydCB7IHRvU3RyaW5nIH0gZnJvbSBcIi4vc3RyaW5nLXV0aWxzXCI7XHJcbmltcG9ydCB7IFRhYklkIH0gZnJvbSBcIi4vY29tbW9uLXR5cGVzXCI7XHJcbmltcG9ydCB7IElIYW5kc2hha2VyIH0gZnJvbSBcIi4vaGFuZHNoYWtlclwiO1xyXG5pbXBvcnQgeyBJTmF2U2VxdWVuY2VEZXRlY3Rpb24gfSBmcm9tIFwiLi9uYXYtc2VxdWVuY2UtZGV0ZWN0b3JcIjtcclxuaW1wb3J0IHsgT3B0aW9uTmFtZXMgfSBmcm9tIFwiLi9ibG9ja2VkLXBhZ2Utb3B0aW9uc1wiXHJcbmltcG9ydCB7IGhvc3RDb25zdGFudHMgfSBmcm9tIFwiLi9ob3N0LWNvbnN0YW50c1wiO1xyXG5pbXBvcnQgeyBQYWdlUG9ydFJlc29sdmVyLCBnZXRCcm93c2VyU3BlY2lmaWNFeHRlbnNpb25QYWdlUG9ydFJlc29sdmVyIH0gZnJvbSBcIi4vcGFnZS1wb3J0LXJlc29sdmVyXCI7XHJcbmltcG9ydCB7IElNZXNzYWdlUm91dGVyIH0gZnJvbSBcIi4vbWVzc2FnZS1yb3V0ZXJcIjtcclxuaW1wb3J0IHsgUGFnZVBvcnRDb250cm9sbGVyIH0gZnJvbSBcIi4vcGFnZS1wb3J0LWNvbnRyb2xsZXJcIjtcclxuaW1wb3J0IHsgVXJsRW5jb2RlciB9IGZyb20gXCIuL3VybC1lbmNvZGVyXCI7XHJcbmltcG9ydCB7IElDb25maWdOb3RpZmllciB9IGZyb20gXCIuL2NvbmZpZy1ub3RpZmllclwiO1xyXG5pbXBvcnQgeyBDb25maWdLZXkgfSBmcm9tIFwiLi9jb25maWcta2V5c1wiO1xyXG5pbXBvcnQgeyBFdmVudERpc3BhdGNoZXIsIEhhbmRsZUV2ZW50IH0gZnJvbSBcIi4vZXZlbnQtZGlzcGF0Y2hlclwiO1xyXG5pbXBvcnQgeyBCcm93c2VyIH0gZnJvbSBcIi4vYnJvd3NlclwiO1xyXG5pbXBvcnQgeyBJT25Db25maWd1cmVkIH0gZnJvbSBcIi4vb24tY29uZmlndXJlZFwiO1xyXG5pbXBvcnQgeyByZW1vdmVFeHRlbnNpb25QYWdlRnJvbUhpc3RvcnlBZnRlckNsb3NpbmcgfSBmcm9tIFwiLi9oaXN0b3J5XCI7XHJcbmltcG9ydCB7IENvbnRlbnRUeXBlLCBwYXJzZVJhd0NvbnRlbnRUeXBlIH0gZnJvbSBcIi4vY29udGVudC10eXBlXCI7XHJcbmltcG9ydCB7IGlzTWVzc2FnZVR5cGVTdXBwb3J0ZWQsIFByb3RvY29sVmVyc2lvbiB9IGZyb20gXCIuL3Byb3RvY29sLXZlcnNpb25zXCI7XHJcblxyXG50eXBlIE9uVHJ1c3RVcmwgPSAodHJ1c3RVcmw6IGJvb2xlYW4sIHBlcm1hbmVudGx5VHJ1c3RVcmw6IGJvb2xlYW4sIG5hdmlnYXRlVG9VUkw6IFVSTCwgYmxvY2tlZFVSTDogVVJMLCB0YWJJZDogVGFiSWQsIGNvbnRlbnRUeXBlOiBNYXliZTxDb250ZW50VHlwZT4pID0+IHZvaWQ7XHJcbnR5cGUgb25QYWdlRGlzY29ubm5lY3RlZCA9IChwb3J0OiBjaHJvbWUucnVudGltZS5Qb3J0KSA9PiB2b2lkO1xyXG5cclxuY2xhc3MgQmxvY2tlZFBhZ2VQYWdlQ29udHJvbGxlciB7XHJcbiAgICBjb25zdHJ1Y3RvcihcclxuICAgICAgICAgICAgcmVhZG9ubHkgdGFiSWQ6IFRhYklkLFxyXG4gICAgICAgICAgICBwcml2YXRlIHBvcnQ6IFByb21pc2U8Y2hyb21lLnJ1bnRpbWUuUG9ydD4sXHJcbiAgICAgICAgICAgIG9uQ29uZmlndXJlZDogSU9uQ29uZmlndXJlZCxcclxuICAgICAgICAgICAgcHJpdmF0ZSBvblRydXN0VXJsOiBPblRydXN0VXJsLFxyXG4gICAgICAgICAgICBwcml2YXRlIG9uRGlzY29ubmVjdDogb25QYWdlRGlzY29ubm5lY3RlZCxcclxuICAgICAgICAgICAgcHJpdmF0ZSBtZXNzYWdlU2VuZGVyOiBNZXNzYWdlU2VuZGVyLFxyXG4gICAgICAgICAgICBjb25maWdOb3RpZmllcjogSUNvbmZpZ05vdGlmaWVyLFxyXG4gICAgICAgICAgICBwcml2YXRlIGhhbmRzaGFrZXI6IElIYW5kc2hha2VyKSB7XHJcbiAgICAgICAgY29uZmlnTm90aWZpZXIuYWRkQ29uZmlnTGlzdGVuZXJGb3JLZXlzKChrZXksIGNvbmZpZykgPT4gdGhpcy5vbkNvbmZpZ0NoYW5nZWQoa2V5LCBjb25maWcpLFxyXG4gICAgICAgICAgICBbIENvbmZpZ0tleS5pc0NvbnN1bWVyUHJvZHVjdCBdKTtcclxuICAgICAgICB0aGlzLnBhZ2VQb3J0Q29udHJvbGxlciA9IG5ldyBQYWdlUG9ydENvbnRyb2xsZXIoXHJcbiAgICAgICAgICAgIHRhYklkLCBwb3J0LFxyXG4gICAgICAgICAgICAocG9ydCkgPT4gdGhpcy5vblBhZ2VDb25uZWN0ZWQocG9ydCksIFxyXG4gICAgICAgICAgICAocG9ydCkgPT4gdGhpcy5vblBhZ2VEaXNjb25ubmVjdGVkKHBvcnQpLFxyXG4gICAgICAgICAgICBvbkNvbmZpZ3VyZWQpO1xyXG4gICAgICAgIHRoaXMucGFnZVBvcnRDb250cm9sbGVyLnJlZ2lzdGVyTWVzc2FnZUhhbmRsZXIoXHJcbiAgICAgICAgICAgIE1lc3NhZ2VUeXBlLnRydXN0VXJsVjgsXHJcbiAgICAgICAgICAgIChtZXNzYWdlKSA9PiB0aGlzLmhhbmRsZVRydXN0VXJsKG1lc3NhZ2UpKTtcclxuICAgICAgICB0aGlzLnBhZ2VQb3J0Q29udHJvbGxlci5jb25uZWN0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBvblBhZ2VDb25uZWN0ZWQocG9ydDogY2hyb21lLnJ1bnRpbWUuUG9ydCkge31cclxuXHJcbiAgICBwcml2YXRlIG9uUGFnZURpc2Nvbm5uZWN0ZWQocG9ydDogY2hyb21lLnJ1bnRpbWUuUG9ydCkge1xyXG4gICAgICAgIHRoaXMub25EaXNjb25uZWN0KHBvcnQpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgb25Db25maWdDaGFuZ2VkKGtleTogQ29uZmlnS2V5LCBjb25maWc6IENvbmZpZ1JlYWRlcikge1xyXG4gICAgICAgIHN3aXRjaCAoa2V5KSB7XHJcbiAgICAgICAgICAgIGNhc2UgQ29uZmlnS2V5LmlzQ29uc3VtZXJQcm9kdWN0OlxyXG4gICAgICAgICAgICAgICAgdGhpcy5pc0NvbnN1bWVyUHJvZHVjdCA9IGNvbmZpZy5pc0NvbnN1bWVyUHJvZHVjdDtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNlbmREb250QXNrQWdhaW4ocHJvdG9jb2xWZXJzaW9uOiBQcm90b2NvbFZlcnNpb24pIHtcclxuICAgICAgICBpZiAoaXNNZXNzYWdlVHlwZVN1cHBvcnRlZChNZXNzYWdlVHlwZS5kb250QXNrQWdhaW5WOSwgcHJvdG9jb2xWZXJzaW9uKSkge1xyXG4gICAgICAgICAgICB0aGlzLm1lc3NhZ2VTZW5kZXIuc2VuZE1lc3NhZ2UoTWVzc2FnZVR5cGUuZG9udEFza0FnYWluVjksIG5ldyBEb250QXNrQWdhaW5WOSh0cnVlKSk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChpc01lc3NhZ2VUeXBlU3VwcG9ydGVkKE1lc3NhZ2VUeXBlLmRvbnRBc2tBZ2FpblY4LCBwcm90b2NvbFZlcnNpb24pKSB7XHJcbiAgICAgICAgICAgIHRoaXMubWVzc2FnZVNlbmRlci5zZW5kTWVzc2FnZShNZXNzYWdlVHlwZS5kb250QXNrQWdhaW5WOCwgbmV3IERvbnRBc2tBZ2FpblY4KCkpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGxvZ0Vycm9yKG5ldyBFcnJvcihgVXNlciBoYXMgY2hvc2VuIFwiRG9uJ3QgYXNrIG1lIGFnYWdpblwiIGJ1dCB0aGUgcHJvdG9jb2wgdmVyc2lvbiBkb2Vzbid0IGAgK1xyXG4gICAgICAgICAgICAgICAgYHN1cHBvcnQgdGhlIERvbnRBc2tBZ2FpbiBtZXNzYWdlczogXCIke3Byb3RvY29sVmVyc2lvbn1cImApKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBoYW5kbGVUcnVzdFVybChtZXNzYWdlOiBNZXNzYWdlKSB7XHJcbiAgICAgICAgY29uc3QgdHJ1c3RVcmxNZXNzYWdlID0gbWVzc2FnZS5wYXlsb2FkIGFzIFRydXN0VXJsVjg7XHJcbiAgICAgICAgY29uc3QgY29udGVudFR5cGUgPSBwYXJzZVJhd0NvbnRlbnRUeXBlKHRydXN0VXJsTWVzc2FnZS5jb250ZW50VHlwZSk7XHJcbiAgICAgICAgY29uc3QgbmF2aWdhdGVUb1VSTCA9IHBhcnNlVXJsKHRydXN0VXJsTWVzc2FnZS5uYXZpZ2F0ZVRvVXJsU3BlYyk7XHJcbiAgICAgICAgY29uc3QgYmxvY2tlZFVSTCA9IHBhcnNlVXJsKHRydXN0VXJsTWVzc2FnZS5ibG9ja2VkVXJsU3BlYyk7XHJcbiAgICAgICAgaWYgKHNvbWUobmF2aWdhdGVUb1VSTCkgJiYgc29tZShibG9ja2VkVVJMKSkge1xyXG4gICAgICAgICAgICB0aGlzLm9uVHJ1c3RVcmwodHJ1c3RVcmxNZXNzYWdlLnRydXN0VXJsLCBcclxuICAgICAgICAgICAgICAgICAgICB0cnVzdFVybE1lc3NhZ2UucmVtZW1iZXJEZWNpc2lvbiwgXHJcbiAgICAgICAgICAgICAgICAgICAgbmF2aWdhdGVUb1VSTCwgYmxvY2tlZFVSTCxcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRhYklkLCBjb250ZW50VHlwZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodHJ1c3RVcmxNZXNzYWdlLmRvbnRBc2tBZ2FpbiAmJiB0aGlzLmlzQ29uc3VtZXJQcm9kdWN0KSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmhhbmRzaGFrZXIuaXNIYW5kc2hha2VuICYmIHNvbWUodGhpcy5oYW5kc2hha2VyLm5lZ290aWF0ZWRWZXJzaW9uKSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZW5kRG9udEFza0FnYWluKHRoaXMuaGFuZHNoYWtlci5uZWdvdGlhdGVkVmVyc2lvbik7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRzaGFrZXIub25IYW5kc2hha2VuLnJlZ2lzdGVyRXZlbnRIYW5kbGVyKGV2ZW50ID0+IHRoaXMuc2VuZERvbnRBc2tBZ2FpbihldmVudC5uZWdvdGlhdGVkVmVyc2lvbikpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcGFnZVBvcnRDb250cm9sbGVyOiBQYWdlUG9ydENvbnRyb2xsZXI7XHJcbiAgICBwcml2YXRlIGlzQ29uc3VtZXJQcm9kdWN0ID0gZmFsc2U7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBCcm93c2VyTGF1bmNoRXZlbnQge1xyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAgICAgICAgIHJlYWRvbmx5IHVybFNwZWM6IHN0cmluZywgXHJcbiAgICAgICAgICAgIHJlYWRvbmx5IGlkOiBJZCwgXHJcbiAgICAgICAgICAgIHJlYWRvbmx5IGRpZExhdW5jaDogYm9vbGVhbikge31cclxufVxyXG5cclxuZXhwb3J0IHR5cGUgT25Ccm93c2VyTGF1bmNoUmVzcG9uc2UgPSAodXJsU3BlYzogc3RyaW5nLCBkaWRMYXVuY2g6IGJvb2xlYW4pID0+IHZvaWQ7XHJcblxyXG5leHBvcnQgY2xhc3MgQnJvd3NlckxhdW5jaGVyIHtcclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgICAgICBtZXNzYWdlUm91dGVyOiBJTWVzc2FnZVJvdXRlciwgXHJcbiAgICAgICAgICAgIHByaXZhdGUgbWVzc2FnZVNlbmRlcjogTWVzc2FnZVNlbmRlciwgXHJcbiAgICAgICAgICAgIHByaXZhdGUgaGFuZHNoYWtlcjogSUhhbmRzaGFrZXIpIHtcclxuICAgICAgICBjb25zdCBibG9ja2VkUGFnZVNwZWMgPSBjaHJvbWUucnVudGltZS5nZXRVUkwoaG9zdENvbnN0YW50cy5ibG9ja2VkUGFnZSk7XHJcbiAgICAgICAgY29uc3QgYmxvY2tlZFBhZ2VVUkwgPSBwYXJzZVVybChibG9ja2VkUGFnZVNwZWMpO1xyXG4gICAgICAgIGlmIChub25lKGJsb2NrZWRQYWdlVVJMKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBwYXJzZSBibG9ja2VkUGFnZVVSTCAke2Jsb2NrZWRQYWdlU3BlY31gKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5ibG9ja2VkUGFnZVVSTCA9IGJsb2NrZWRQYWdlVVJMO1xyXG4gICAgICAgIG1lc3NhZ2VSb3V0ZXIucmVnaXN0ZXJNZXNzYWdlSGFuZGxlcihcclxuICAgICAgICAgICAgICAgIE1lc3NhZ2VUeXBlLmxhdW5jaEJyb3dzZXJSZXNwb25zZVYxLFxyXG4gICAgICAgICAgICAgICAgKG1lc3NhZ2UpID0+IHRoaXMub25MYXVuY2hCcm93c2VyUmVzcG9uc2UobWVzc2FnZSkpXHJcbiAgICB9XHJcblxyXG4gICAgcmVnaXN0ZXJFdmVudEhhbmRsZXIoZXZlbnRIYW5kbGVyOiBIYW5kbGVFdmVudDxCcm93c2VyTGF1bmNoRXZlbnQ+KSB7XHJcbiAgICAgICAgdGhpcy5ldmVudERpc3BhdGNoZXIucmVnaXN0ZXJFdmVudEhhbmRsZXIoZXZlbnRIYW5kbGVyKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIG9uTGF1bmNoQnJvd3NlclJlc3BvbnNlKG1lc3NhZ2U6IE1lc3NhZ2UpIHtcclxuICAgICAgICBjb25zdCByZXNwb25zZSA9IG1lc3NhZ2UucGF5bG9hZCBhcyBMYXVuY2hCcm93c2VyUmVzcG9uc2VWMTtcclxuICAgICAgICBjb25zdCBpZCA9IHJlc3BvbnNlLmlkO1xyXG4gICAgICAgIGNvbnN0IG9uQnJvd3NlckxhdW5jaFJlc3BvbnNlID0gdGhpcy5wZW5kaW5nUmVxdWVzdHMuZ2V0KGlkKTtcclxuICAgICAgICBpZiAobm9uZShvbkJyb3dzZXJMYXVuY2hSZXNwb25zZSkpIHtcclxuICAgICAgICAgICAgbG9nRXJyb3IobmV3IEVycm9yKGBVbmV4cGVjdGVkIGxhdW5jaCBicm93c2VyIHJlc3BvbnNlOiAke3RvU3RyaW5nKHJlc3BvbnNlKX1gKSlcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsb2coYEJyb3dzZXJMYXVuY2hlci5vbkxhdW5jaEJyb3dzZXJSZXNwb25zZTogJHt0b1N0cmluZyhyZXNwb25zZSl9YCk7XHJcbiAgICAgICAgb25Ccm93c2VyTGF1bmNoUmVzcG9uc2UocmVzcG9uc2UudXJsU3BlYywgcmVzcG9uc2UuZGlkTGF1bmNoKTtcclxuICAgICAgICB0aGlzLnBlbmRpbmdSZXF1ZXN0cy5kZWxldGUoaWQpO1xyXG4gICAgICAgIHRoaXMuZXZlbnREaXNwYXRjaGVyLmRpc3BhdGNoRXZlbnQoXHJcbiAgICAgICAgICAgICAgICBuZXcgQnJvd3NlckxhdW5jaEV2ZW50KFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZS51cmxTcGVjLCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuaWQsIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5kaWRMYXVuY2gpKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBSZXR1cm5zIHRydWUgaWYgbGF1bmNoQnJvd3NlciB3b3VsZCByZXR1cm4gdHJ1ZS4gT3RoZXJ3aXNlIGZhbHNlLlxyXG4gICAgY2FuTGF1bmNoQnJvd3Nlcih1cmw6IFVSTCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIGlmICh0aGlzLmhhbmRzaGFrZXIuaXNIYW5kc2hha2VuKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gUmV0dXJucyB0cnVlIGlmIHRoZSBsYXVuY2hCcm93c2VyIG1lc3NhZ2UgaXMgc2VudC4gT3RoZXJ3aXNlIGZhbHNlLlxyXG4gICAgbGF1bmNoQnJvd3Nlcih1cmw6IFVSTCwgb25Ccm93c2VyTGF1bmNoUmVzcG9uc2U6IE9uQnJvd3NlckxhdW5jaFJlc3BvbnNlKTogYm9vbGVhbiB7XHJcbiAgICAgICAgaWYgKHRoaXMuaGFuZHNoYWtlci5pc0hhbmRzaGFrZW4pIHtcclxuICAgICAgICAgICAgY29uc3QgaWQgPSB0aGlzLmlkR2VuZXJhdG9yLmdlbmVyYXRlSWQoKTtcclxuICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IG5ldyBMYXVuY2hCcm93c2VyUmVxdWVzdFYxKFVSTFRvU3RyaW5nKHVybCksIGlkKTtcclxuICAgICAgICAgICAgdGhpcy5tZXNzYWdlU2VuZGVyLnNlbmRNZXNzYWdlKE1lc3NhZ2VUeXBlLmxhdW5jaEJyb3dzZXJSZXF1ZXN0VjEsIG1lc3NhZ2UpO1xyXG4gICAgICAgICAgICB0aGlzLnBlbmRpbmdSZXF1ZXN0cy5zZXQoaWQsIG9uQnJvd3NlckxhdW5jaFJlc3BvbnNlKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgbG9nRXJyb3IobmV3IEVycm9yKGBOb3QgaGFuZHNoYWtlbiBzbyBub3Qgc2VuZGluZyBsYXVuY2ggYnJvd3NlciBtZXNzYWdlIGZvciB1cmw9PCR7dXJsfT5gKSk7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgbGF1bmNoQnJvd3NlckFuZENsb3NlVGFiT3JOYXZpZ2F0ZVRhYih0YWJJZDogVGFiSWQsIHVybDogVVJMLCBjbG9zZVRhYjogYm9vbGVhbiA9IHRydWUpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCBmYWlsT3BlbiA9ICgpID0+IHtcclxuICAgICAgICAgICAgY2hyb21lLnRhYnMudXBkYXRlKHRhYklkLCB7IHVybDogVVJMVG9TdHJpbmcodXJsKSB9KTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIGNvbnN0IGRpc3BsYXlMYXVuY2hlZFBhZ2UgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgIGxvZyhgQnJvd3NlckxhdW5jaGVyLmxhdW5jaEJyb3dzZXJBbmRDbG9zZVRhYk9yTmF2aWdhdGVUYWI6IERpc3BsYXlpbmcgbGF1bmNoZWQgcGFnZSBmb3IgdGFiICR7dGFiSWR9IGAgK1xyXG4gICAgICAgICAgICAgICAgYHJhdGhlciB0aGFuIGNsb3NpbmcgYmVjYXVzZSBpdCBpcyB0aGUgb25seSB0YWIuYCk7XHJcbiAgICAgICAgICAgIC8vIFRoZSBsYXVuY2hlZFNwZWMgb3B0aW9uIHRlbGxzIHRoZSBibG9ja2VkIHBhZ2UgdG8gZ28gc3RyYWlnaHQgdG8gYSBtZXNzYWdlIGFib3V0IHRoZSBzaXRlIGJlaW5nIG9wZW5lZCBpblxyXG4gICAgICAgICAgICAvLyB0aGUgU2VjdXJlIEJyb3dzZXIgd2hpY2ggaXMgbm9ybWFsbHkgc2hvd24gYWZ0ZXIgYSB1c2VyIGNsaWNrcyBcIk9wZW4gaW4gU2VjdXJlIEJyb3dzZXJcIi5cclxuICAgICAgICAgICAgY29uc3QgdXJsRW5jb2RlciA9IG5ldyBVcmxFbmNvZGVyKHRoaXMuYmxvY2tlZFBhZ2VVUkwpO1xyXG4gICAgICAgICAgICB1cmxFbmNvZGVyLmFkZFVybFF1ZXJ5UGFyYW0oT3B0aW9uTmFtZXMubGF1bmNoZWRTcGVjLCB1cmwpO1xyXG4gICAgICAgICAgICBjb25zdCBibG9ja2VkUGFnZVVSTCA9IHVybEVuY29kZXIuZW5jb2RlVXJsKCk7XHJcbiAgICAgICAgICAgIGlmIChzb21lKGJsb2NrZWRQYWdlVVJMKSkge1xyXG4gICAgICAgICAgICAgICAgY2hyb21lLnRhYnMudXBkYXRlKHRhYklkLCB7IHVybDogVVJMVG9TdHJpbmcoYmxvY2tlZFBhZ2VVUkwpIH0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZmFpbE9wZW4oKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBvbkJyb3dzZXJMYXVuY2hSZXNwb25zZSA9ICh1cmxTcGVjOiBzdHJpbmcsIGRpZExhdW5jaDogYm9vbGVhbikgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZGlkTGF1bmNoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoY2xvc2VUYWIpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBEb24ndCBjbG9zZSB0aGUgdGFiIGlmIGl0J3MgdGhlIG9ubHkgdGFiIGFuZCB3aWxsIGNsb3NlIHRoZSBicm93c2VyLlxyXG4gICAgICAgICAgICAgICAgICAgIGNocm9tZS50YWJzLnF1ZXJ5KHt9LCAodGFicykgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGFicy5sZW5ndGggPiAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlVGFiKHRhYklkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIG5vdCBjbG9zaW5nIHRoZSB0YWIgdGhlbiBzaG93IGEgcGFnZSBleHBsYWluaW5nIHRoYXQgdGhlIHNpdGUgaGFzIGJlZW4gb3BlbmVkIGluIEJTQi5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXlMYXVuY2hlZFBhZ2UoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGZhaWxPcGVuKCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBpZiAoIXRoaXMubGF1bmNoQnJvd3Nlcih1cmwsIG9uQnJvd3NlckxhdW5jaFJlc3BvbnNlKSkge1xyXG4gICAgICAgICAgICBmYWlsT3BlbigpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIG9uVGFiQ2xvc2VkKHRhYklkOiBUYWJJZCkge1xyXG4gICAgICAgIGxvZyhgQnJvd3NlckxhdW5jaGVyLm9uVGFiQ2xvc2VkOiB0YWJJZDogJHt0YWJJZH1gKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGNsb3NlVGFiKHRhYklkOiBUYWJJZCkge1xyXG4gICAgICAgIGNocm9tZS50YWJzLnJlbW92ZSh0YWJJZCwgKCkgPT4gdGhpcy5vblRhYkNsb3NlZCh0YWJJZCkpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcGVuZGluZ1JlcXVlc3RzID0gbmV3IE1hcDxJZCwgT25Ccm93c2VyTGF1bmNoUmVzcG9uc2U+KCk7XHJcbiAgICBwcml2YXRlIGV2ZW50RGlzcGF0Y2hlciA9IG5ldyBFdmVudERpc3BhdGNoZXI8QnJvd3NlckxhdW5jaEV2ZW50PigpO1xyXG4gICAgcHJpdmF0ZSBpZEdlbmVyYXRvciA9IG5ldyBJZEdlbmVyYXRvcigpO1xyXG4gICAgcHJpdmF0ZSBibG9ja2VkUGFnZVVSTDogVVJMO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgQmxvY2tlZFBhZ2VDb250cm9sbGVyIHtcclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgICAgICBwcml2YXRlIGJyb3dzZXI6IE1heWJlPEJyb3dzZXI+LFxyXG4gICAgICAgICAgICBwcml2YXRlIHRydXN0ZWRVUkxUcmFja2VyOiBUcnVzdGVkVXJsVHJhY2tlcixcclxuICAgICAgICAgICAgcHJpdmF0ZSBicm93c2VyTGF1bmNoZXI6IEJyb3dzZXJMYXVuY2hlcixcclxuICAgICAgICAgICAgcHJpdmF0ZSBjb25maWdOb3RpZmllcjogSUNvbmZpZ05vdGlmaWVyLFxyXG4gICAgICAgICAgICBwcml2YXRlIGhhbmRzaGFrZXI6IElIYW5kc2hha2VyLFxyXG4gICAgICAgICAgICBwcml2YXRlIG9uQ29uZmlndXJlZDogSU9uQ29uZmlndXJlZCxcclxuICAgICAgICAgICAgcHJpdmF0ZSBtZXNzYWdlU2VuZGVyOiBNZXNzYWdlU2VuZGVyKSB7XHJcbiAgICAgICAgY29uZmlnTm90aWZpZXIuYWRkQ29uZmlnTGlzdGVuZXJGb3JLZXlzKFxyXG4gICAgICAgICAgICAoa2V5LCBjb25maWcpID0+IHRoaXMub25Db25maWdDaGFuZ2VkKGtleSwgY29uZmlnKSwgWyBcclxuICAgICAgICAgICAgICAgIENvbmZpZ0tleS5wcm9tcHRGb3JVbmNhdGVnb3JpemVkLCBcclxuICAgICAgICAgICAgICAgIENvbmZpZ0tleS5pc0NvbnN1bWVyUHJvZHVjdCxcclxuICAgICAgICAgICAgICAgIENvbmZpZ0tleS5ibG9ja2VkUGFnZUxlYXJuTW9yZVVSTFxyXG4gICAgICAgICAgICBdKTtcclxuICAgICAgICBjb25zdCBibG9ja2VkUGFnZVNwZWMgPSBjaHJvbWUucnVudGltZS5nZXRVUkwoaG9zdENvbnN0YW50cy5ibG9ja2VkUGFnZSk7XHJcbiAgICAgICAgY29uc3QgYmxvY2tlZFBhZ2VVUkwgPSBwYXJzZVVybChibG9ja2VkUGFnZVNwZWMpO1xyXG4gICAgICAgIGlmIChub25lKGJsb2NrZWRQYWdlVVJMKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBwYXJzZSBibG9ja2VkUGFnZVVSTCAke2Jsb2NrZWRQYWdlU3BlY31gKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5ibG9ja2VkUGFnZVVSTCA9IGJsb2NrZWRQYWdlVVJMO1xyXG4gICAgICAgIHRoaXMucG9ydFJlc29sdmVyID0gZ2V0QnJvd3NlclNwZWNpZmljRXh0ZW5zaW9uUGFnZVBvcnRSZXNvbHZlcihcclxuICAgICAgICAgICAgdGhpcy5icm93c2VyLFxyXG4gICAgICAgICAgICBob3N0Q29uc3RhbnRzLmJsb2NrZWRQYWdlUG9ydE5hbWUsXHJcbiAgICAgICAgICAgICh0YWJJZCwgcG9ydCkgPT4gdGhpcy5vblVucmVzb2x2ZWRQb3J0Q29ubmVjdGVkKHRhYklkLCBwb3J0KSxcclxuICAgICAgICAgICAgKHVybCkgPT4gdGhpcy5pc0Jsb2NrZWRQYWdlVVJMKHVybCkpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgb25Db25maWdDaGFuZ2VkKGtleTogQ29uZmlnS2V5LCBjb25maWc6IENvbmZpZ1JlYWRlcikge1xyXG4gICAgICAgIHN3aXRjaCAoa2V5KSB7XHJcbiAgICAgICAgICAgIGNhc2UgQ29uZmlnS2V5LnByb21wdEZvclVuY2F0ZWdvcml6ZWQ6XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbWVtYmVyRGVjaXNpb25zRGVmYXVsdCA9IGNvbmZpZy5wcm9tcHRGb3JVbmNhdGVnb3JpemVkO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgQ29uZmlnS2V5LmlzQ29uc3VtZXJQcm9kdWN0OlxyXG4gICAgICAgICAgICAgICAgdGhpcy5pc0NvbnN1bWVyUHJvZHVjdCA9IGNvbmZpZy5pc0NvbnN1bWVyUHJvZHVjdDtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIENvbmZpZ0tleS5ibG9ja2VkUGFnZUxlYXJuTW9yZVVSTDpcclxuICAgICAgICAgICAgICAgIHRoaXMubGVhcm5Nb3JlVVJMID0gY29uZmlnLmJsb2NrZWRQYWdlTGVhcm5Nb3JlVVJMO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgb25VbnJlc29sdmVkUG9ydENvbm5lY3RlZCh0YWJJZDogVGFiSWQsIHBvcnQ6IGNocm9tZS5ydW50aW1lLlBvcnQpIHtcclxuICAgICAgICB0aGlzLmFkZEJsb2NrZWRQYWdlQ29udHJvbGxlcih0YWJJZCwgbWFrZVByb21pc2UoKCkgPT4gcG9ydCkpO1xyXG4gICAgfVxyXG5cclxuICAgIGlzQmxvY2tlZFBhZ2VVUkwodXJsOiBNYXliZTxVUkw+KTogYm9vbGVhbiB7XHJcbiAgICAgICAgaWYgKHVybCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGlzU2FtZVVybCh1cmwsIHRoaXMuYmxvY2tlZFBhZ2VVUkwsIFVybENvbXBhcmVPcHRpb25zLklnbm9yZVNlYXJjaFBhcmFtcyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBtYWtlQmxvY2tlZFBhZ2VVUkwobmF2aWdhdGVUb1VSTDogTWF5YmU8VVJMPiwgYmxvY2tlZFVSTDogTWF5YmU8VVJMPiwgY29udGVudFR5cGU6IE1heWJlPHN0cmluZz4pOiBVUkwge1xyXG4gICAgICAgIGNvbnN0IHVybEVuY29kZXIgPSBuZXcgVXJsRW5jb2Rlcih0aGlzLmJsb2NrZWRQYWdlVVJMKTtcclxuICAgICAgICB1cmxFbmNvZGVyLmFkZFVybFF1ZXJ5UGFyYW0oT3B0aW9uTmFtZXMubmF2aWdhdGVUb1NwZWMsIG5hdmlnYXRlVG9VUkwpO1xyXG4gICAgICAgIHVybEVuY29kZXIuYWRkVXJsUXVlcnlQYXJhbShPcHRpb25OYW1lcy5ibG9ja2VkU3BlYywgYmxvY2tlZFVSTCk7XHJcbiAgICAgICAgaWYgKHNvbWUoY29udGVudFR5cGUpKSB7XHJcbiAgICAgICAgICAgIHVybEVuY29kZXIuYWRkUXVlcnlQYXJhbShPcHRpb25OYW1lcy5jb250ZW50VHlwZSwgY29udGVudFR5cGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBUaGUgcmVtZW1iZXIgbXkgZGVjaXNpb24gY2hlY2tib3ggaXMgdW50aWNrZWQgYnkgZGVmYXVsdCBzbyBvbmx5IGFkZCB0aGUgcGFyYW0gaWYgd2Ugd2FudCBpdCB0aWNrZWRcclxuICAgICAgICBpZiAodGhpcy5yZW1lbWJlckRlY2lzaW9uc0RlZmF1bHQpIHtcclxuICAgICAgICAgICAgdXJsRW5jb2Rlci5hZGRRdWVyeVBhcmFtKE9wdGlvbk5hbWVzLnJlbWVtYmVyRGVjaXNpb25zRGVmYXVsdCwgXCJ0cnVlXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBOb3QgYmVpbmcgYSBjb25zdW1lciBwcm9kdWN0IGlzIHRoZSBkZWZhdWx0XHJcbiAgICAgICAgaWYgKHRoaXMuaXNDb25zdW1lclByb2R1Y3QpIHtcclxuICAgICAgICAgICAgdXJsRW5jb2Rlci5hZGRRdWVyeVBhcmFtKE9wdGlvbk5hbWVzLmlzQ29uc3VtZXJQcm9kdWN0LCBcInRydWVcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChzb21lKHRoaXMubGVhcm5Nb3JlVVJMKSkge1xyXG4gICAgICAgICAgICB1cmxFbmNvZGVyLmFkZFF1ZXJ5UGFyYW0oT3B0aW9uTmFtZXMubGVhcm5Nb3JlVVJMLCB0aGlzLmxlYXJuTW9yZVVSTCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGJsb2NrZWRQYWdlVVJMID0gdXJsRW5jb2Rlci5lbmNvZGVVcmwoKTtcclxuXHJcbiAgICAgICAgaWYgKG5vbmUoYmxvY2tlZFBhZ2VVUkwpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmJsb2NrZWRQYWdlVVJMO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gYmxvY2tlZFBhZ2VVUkw7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhZGRCbG9ja2VkUGFnZUNvbnRyb2xsZXIodGFiSWQ6IFRhYklkLCBwb3J0OiBQcm9taXNlPGNocm9tZS5ydW50aW1lLlBvcnQ+KSB7XHJcbiAgICAgICAgY29uc3QgaWQgPSB0aGlzLmlkR2VuZXJhdG9yLmdlbmVyYXRlSWQoKTtcclxuICAgICAgICBjb25zdCBjb250cm9sbGVyID0gbmV3IEJsb2NrZWRQYWdlUGFnZUNvbnRyb2xsZXIoXHJcbiAgICAgICAgICAgICAgICB0YWJJZCxcclxuICAgICAgICAgICAgICAgIHBvcnQsXHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uQ29uZmlndXJlZCxcclxuICAgICAgICAgICAgICAgICh0cnVzdFVSTCwgcmVtZW1iZXJEZWNpc2lvbiwgbmF2aWdhdGVUb1VSTCwgYmxvY2tlZFVSTCwgdGFiSWQsIGNvbnRlbnRUeXBlKSA9PiB0aGlzLnRydXN0VVJMKHRydXN0VVJMLCByZW1lbWJlckRlY2lzaW9uLCBuYXZpZ2F0ZVRvVVJMLCBibG9ja2VkVVJMLCB0YWJJZCwgY29udGVudFR5cGUsIGlkKSxcclxuICAgICAgICAgICAgICAgIHBvcnQgPT4gdGhpcy5vblBhZ2VEaXNjb25uZWN0ZWQocG9ydCwgaWQpLFxyXG4gICAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlU2VuZGVyLFxyXG4gICAgICAgICAgICAgICAgdGhpcy5jb25maWdOb3RpZmllcixcclxuICAgICAgICAgICAgICAgIHRoaXMuaGFuZHNoYWtlcik7XHJcbiAgICAgICAgdGhpcy5ibG9ja2VkUGFnZUNvbnRyb2xsZXJzLnNldChpZCwgY29udHJvbGxlcik7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBvblBhZ2VEaXNjb25uZWN0ZWQocG9ydDogY2hyb21lLnJ1bnRpbWUuUG9ydCwgaWQ6IElkKSB7XHJcbiAgICAgICAgdGhpcy5ibG9ja2VkUGFnZUNvbnRyb2xsZXJzLmRlbGV0ZShpZCk7XHJcbiAgICAgICAgLy8gTm93IHRoYXQgdGhlIGJsb2NrZWQgcGFnZSBjb250cm9sbGVyIGhhcyBkaXNjb25uZWN0ZWQgd2UgY2FuIHJlbW92ZSB0aGUgYmxvY2tlZCBwYWdlIGZyb20gaGlzdG9yeS5cclxuICAgICAgICAvLyBvblBvcnREaXNjb25uZWN0ZWQgY2FsbGJhY2tzIGRvbid0IGdldCBjYWxsZWQgaW4gRmlyZWZveCBidXQgZGVsZXRpbmcgaGlzdG9yeSBpbiBGaXJlZm94IGRvZXNuJ3QgYWZmZWN0IHRoZVxyXG4gICAgICAgIC8vICdiYWNrJyBidXR0b24gaW4gdGhlIGJyb3dzZXIgc28gaXQncyBub3QgYXMgaW1wb3J0YW50IGFzIGZvciBDaHJvbWUuXHJcbiAgICAgICAgcmVtb3ZlRXh0ZW5zaW9uUGFnZUZyb21IaXN0b3J5QWZ0ZXJDbG9zaW5nKHRoaXMuYnJvd3NlciwgcG9ydCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSB0cnVzdFVSTCh0cnVzdFVSTDogYm9vbGVhbiwgcmVtZW1iZXJEZWNpc2lvbjogYm9vbGVhbiwgXHJcbiAgICAgICAgICAgIG5hdmlnYXRlVG9VUkw6IE1heWJlPFVSTD4sIGJsb2NrZWRVUkw6IE1heWJlPFVSTD4sXHJcbiAgICAgICAgICAgIHRhYklkOiBUYWJJZCwgY29udGVudFR5cGU6IE1heWJlPENvbnRlbnRUeXBlPiwgaWQ6IElkKSB7XHJcbiAgICAgICAgY29uc3QgY29udHJvbGxlciA9IHRoaXMuYmxvY2tlZFBhZ2VDb250cm9sbGVycy5nZXQoaWQpO1xyXG4gICAgICAgIGlmIChub25lKGNvbnRyb2xsZXIpIHx8IFxyXG4gICAgICAgICAgICAgICAgbm9uZShuYXZpZ2F0ZVRvVVJMKSB8fCAhaXNVUkwobmF2aWdhdGVUb1VSTCkgfHwgXHJcbiAgICAgICAgICAgICAgICBub25lKGJsb2NrZWRVUkwpIHx8ICFpc1VSTChibG9ja2VkVVJMKSkge1xyXG4gICAgICAgICAgICBsb2dFcnJvcihuZXcgRXJyb3IoYE5hdmlnYXRpb25CbG9ja2VyLnRydXN0VVJMOiBpbnZhbGlkIHBhcmFtZXRlcnM6ICR7dG9TdHJpbmcoe1xyXG4gICAgICAgICAgICAgICAgdHJ1c3RVUkw6IHRydXN0VVJMLFxyXG4gICAgICAgICAgICAgICAgdHJ1c3RVUkxQZXJtYW5lbnRseTogcmVtZW1iZXJEZWNpc2lvbiwgXHJcbiAgICAgICAgICAgICAgICBuYXZpZ2F0ZVRvVVJMOiBuYXZpZ2F0ZVRvVVJMLFxyXG4gICAgICAgICAgICAgICAgYmxvY2tlZFVSTDogYmxvY2tlZFVSTCxcclxuICAgICAgICAgICAgICAgIHRhYklkOiB0YWJJZCxcclxuICAgICAgICAgICAgfSl9YCkpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAocmVtZW1iZXJEZWNpc2lvbikge1xyXG4gICAgICAgICAgICB0aGlzLnRydXN0ZWRVUkxUcmFja2VyLnRydXN0VXJsKGJsb2NrZWRVUkwsIHRydXN0VVJMKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCF0cnVzdFVSTCkge1xyXG4gICAgICAgICAgICAvLyBEb24ndCBjbG9zZSB0aGUgdGFiIHdoZW4gb3BlbmluZyBhIFBERiBpbiB0aGUgU2VjdXJlIEJyb3dzZXIuXHJcbiAgICAgICAgICAgIGNvbnN0IHNob3VsZENsb3NlVGFiID0gY29udGVudFR5cGUgIT09IENvbnRlbnRUeXBlLnBkZjtcclxuICAgICAgICAgICAgdGhpcy5icm93c2VyTGF1bmNoZXIubGF1bmNoQnJvd3NlckFuZENsb3NlVGFiT3JOYXZpZ2F0ZVRhYih0YWJJZCwgbmF2aWdhdGVUb1VSTCwgc2hvdWxkQ2xvc2VUYWIpO1xyXG4gICAgICAgIH0gXHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBmaW5kTmF2aWdhdGVUb1VSTCh1cmw6IE1heWJlPFVSTD4sIHBoaXNoaW5nTmF2U2VxdWVuY2U6IE1heWJlPElOYXZTZXF1ZW5jZURldGVjdGlvbj4pOiBNYXliZTxVUkw+IHtcclxuICAgICAgICBpZiAobm9uZSh1cmwpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChub25lKHBoaXNoaW5nTmF2U2VxdWVuY2UpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB1cmw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IG5hdmlnYXRlVG9VUkwgPSBwaGlzaGluZ05hdlNlcXVlbmNlLm5hdmlnYXRlVG9VUkw7XHJcbiAgICAgICAgaWYgKG5vbmUobmF2aWdhdGVUb1VSTCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHVybDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5hdmlnYXRlVG9VUkw7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBibG9ja1VSTChibG9ja2VkVVJMOiBNYXliZTxVUkw+LCBuYXZpZ2F0ZVRvVVJMOiBNYXliZTxVUkw+LCB0YWJJZDogVGFiSWQsIGNvbnRlbnRUeXBlOiBNYXliZTxzdHJpbmc+ID0gdW5kZWZpbmVkKTogVVJMIHtcclxuICAgICAgICBjb25zdCBwb3J0ID0gdGhpcy5wb3J0UmVzb2x2ZXIucmVzb2x2ZVBvcnQodGFiSWQpO1xyXG4gICAgICAgIHRoaXMuYWRkQmxvY2tlZFBhZ2VDb250cm9sbGVyKHRhYklkLCBwb3J0KTtcclxuICAgICAgICBjb25zdCBibG9ja2VkUGFnZVVybCA9IHRoaXMubWFrZUJsb2NrZWRQYWdlVVJMKG5hdmlnYXRlVG9VUkwsIGJsb2NrZWRVUkwsIGNvbnRlbnRUeXBlKTtcclxuICAgICAgICByZXR1cm4gYmxvY2tlZFBhZ2VVcmw7XHJcbiAgICB9XHJcblxyXG4gICAgYmxvY2tOYXZpZ2F0aW9uKGJsb2NrZWRVUkw6IE1heWJlPFVSTD4sIHRhYklkOiBUYWJJZCk6IFVSTCB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYmxvY2tVUkwoYmxvY2tlZFVSTCwgYmxvY2tlZFVSTCwgdGFiSWQpO1xyXG4gICAgfVxyXG5cclxuICAgIGJsb2NrTmF2aWdhdGlvbldpdGhOYXZTZXF1ZW5jZShibG9ja2VkVVJMOiBNYXliZTxVUkw+LCBwaGlzaGluZ05hdlNlcXVlbmNlOiBNYXliZTxJTmF2U2VxdWVuY2VEZXRlY3Rpb24+LCB0YWJJZDogVGFiSWQpOiBVUkwge1xyXG4gICAgICAgIGNvbnN0IG5hdmlnYXRlVG9VUkwgPSB0aGlzLmZpbmROYXZpZ2F0ZVRvVVJMKGJsb2NrZWRVUkwsIHBoaXNoaW5nTmF2U2VxdWVuY2UpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmJsb2NrVVJMKGJsb2NrZWRVUkwsIG5hdmlnYXRlVG9VUkwsIHRhYklkKTtcclxuICAgIH1cclxuXHJcbiAgICBibG9ja0xpbmsobGlua1VSTDogTWF5YmU8VVJMPiwgdGFiSWQ6IFRhYklkKTogVVJMIHtcclxuICAgICAgICBjb25zdCBibG9ja2VkVVJMID0gbGlua1VSTDtcclxuICAgICAgICBjb25zdCBuYXZpZ2F0ZVRvVVJMID0gbGlua1VSTDtcclxuICAgICAgICByZXR1cm4gdGhpcy5ibG9ja1VSTChibG9ja2VkVVJMLCBuYXZpZ2F0ZVRvVVJMLCB0YWJJZCk7XHJcbiAgICB9XHJcblxyXG4gICAgYmxvY2tDb250ZW50VHlwZShibG9ja2VkVVJMOiBNYXliZTxVUkw+LCBjb250ZW50VHlwZTogTWF5YmU8c3RyaW5nPixcclxuICAgICAgICAgICAgcGhpc2hpbmdOYXZTZXF1ZW5jZTogTWF5YmU8SU5hdlNlcXVlbmNlRGV0ZWN0aW9uPiwgdGFiSWQ6IFRhYklkKSB7XHJcbiAgICAgICAgY29uc3QgbmF2aWdhdGVUb1VSTCA9IHRoaXMuZmluZE5hdmlnYXRlVG9VUkwoYmxvY2tlZFVSTCwgXHJcbiAgICAgICAgICAgICAgICBwaGlzaGluZ05hdlNlcXVlbmNlKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5ibG9ja1VSTChibG9ja2VkVVJMLCBuYXZpZ2F0ZVRvVVJMLCB0YWJJZCwgY29udGVudFR5cGUpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYmxvY2tlZFBhZ2VVUkw6IFVSTDtcclxuICAgIHByaXZhdGUgcG9ydFJlc29sdmVyOiBQYWdlUG9ydFJlc29sdmVyO1xyXG4gICAgcHJpdmF0ZSBibG9ja2VkUGFnZUNvbnRyb2xsZXJzID0gbmV3IE1hcDxJZCwgQmxvY2tlZFBhZ2VQYWdlQ29udHJvbGxlcj4oKTtcclxuICAgIHByaXZhdGUgcmVtZW1iZXJEZWNpc2lvbnNEZWZhdWx0ID0gZmFsc2U7XHJcbiAgICBwcml2YXRlIGlzQ29uc3VtZXJQcm9kdWN0ID0gZmFsc2U7XHJcbiAgICBwcml2YXRlIGxlYXJuTW9yZVVSTDogTWF5YmU8c3RyaW5nPjtcclxuICAgIHByaXZhdGUgaWRHZW5lcmF0b3IgPSBuZXcgSWRHZW5lcmF0b3IoKTtcclxufVxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2Jsb2NrZWQtcGFnZS1jb250cm9sbGVyLnRzIiwiLy8gQ29weXJpZ2h0IChjKSAyMDE4IEJyb21pdW0sIEluYy5cclxuLy8gVXNlIG9mIHRoZSBCcm9taXVtLCBJbmMuIHNvZnR3YXJlIHJlcXVpcmVzIGEgbGljZW5zZSBhZ3JlZW1lbnQgd2l0aCBCcm9taXVtLCBJbmMuIG9yIGFuIGF1dGhvcml6ZWQgcmVzZWxsZXIuXHJcblxyXG4vLy8gPHJlZmVyZW5jZSB0eXBlcz1cImNocm9tZVwiLz5cclxuaW1wb3J0IHsgTWVzc2FnZVNlbmRlciB9IGZyb20gXCIuL21lc3NhZ2Utc2VuZGVyXCI7XHJcbmltcG9ydCB7IE1lc3NhZ2VUeXBlIH0gZnJvbSBcIi4vbWVzc2FnZS10eXBlc1wiO1xyXG5pbXBvcnQgeyBEb3dubG9hZENvbXBsZXRlVjEgfSBmcm9tIFwiLi9tZXNzYWdlc1wiO1xyXG5pbXBvcnQgeyBJSGFuZHNoYWtlciB9IGZyb20gXCIuL2hhbmRzaGFrZXJcIjtcclxuaW1wb3J0IHsgbG9nLCBsb2dFcnJvciB9IGZyb20gXCIuL2xvZ1wiO1xyXG5pbXBvcnQgeyBFcnJvckhhbmRsZXIgfSBmcm9tIFwiLi9lcnJvci1oYW5kbGVyXCI7XHJcbmltcG9ydCB7IElGZWF0dXJlTWFuYWdlciB9IGZyb20gXCIuL2ZlYXR1cmUtbWFuYWdlclwiO1xyXG5pbXBvcnQgeyBNYXliZSwgc29tZSB9IGZyb20gXCIuL21heWJlXCI7XHJcbmltcG9ydCB7IEJyb3dzZXIgfSBmcm9tIFwiLi9icm93c2VyXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgRG93bmxvYWRUcmFja2VyIHtcclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgICAgICBicm93c2VyOiBNYXliZTxCcm93c2VyPixcclxuICAgICAgICAgICAgcHJpdmF0ZSBtZXNzYWdlU2VuZGVyOiBNZXNzYWdlU2VuZGVyLFxyXG4gICAgICAgICAgICBwcml2YXRlIGhhbmRzaGFrZXIgOiBJSGFuZHNoYWtlcixcclxuICAgICAgICAgICAgcHJpdmF0ZSBmZWF0dXJlTWFuYWdlcjogSUZlYXR1cmVNYW5hZ2VyLFxyXG4gICAgICAgICAgICBlcnJvckhhbmRsZXI6IEVycm9ySGFuZGxlcikge1xyXG4gICAgICAgIC8vIEVkZ2UgZG9lcyBub3QgY3VycmVudGx5IHN1cHBvcnQgdGhlIGJyb3dzZXIuZG93bmxvYWRzIEFQSS5cclxuICAgICAgICAvLyBJZiB0aGlzLmJyb3dzZXIgPT09IHVuZGVmaW5lZCB0aGVuIGFzc3VtZSB3ZSBkb24ndCBzdXBwb3J0IGRvd25sb2Fkcy5cclxuICAgICAgICBpZiAoc29tZShicm93c2VyKSAmJiBicm93c2VyICE9PSBCcm93c2VyLmVkZ2UpIHtcclxuICAgICAgICAgICAgdGhpcy5pc0Rvd25sb2Fkc0FwaVN1cHBvcnRlZCA9IHRydWU7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5pc0Rvd25sb2Fkc0FwaVN1cHBvcnRlZCA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZXJyb3JIYW5kbGVyLm9uRG9ybWFudFN0YXRlQ2hhbmdlZC5yZWdpc3RlckV2ZW50SGFuZGxlcih0aGlzLm9uRG9ybWFudFN0YXRlQ2hhbmdlZC5iaW5kKHRoaXMpKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIG9uRG9ybWFudFN0YXRlQ2hhbmdlZChkb3JtYW50U3RhdGU6IGJvb2xlYW4pIHtcclxuICAgICAgICB0aGlzLmlzRG9ybWFudCA9IGRvcm1hbnRTdGF0ZTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIG9uQ2hhbmdlZChkb3dubG9hZERlbHRhOiBjaHJvbWUuZG93bmxvYWRzLkRvd25sb2FkRGVsdGEpIHtcclxuICAgICAgICBpZiAoZG93bmxvYWREZWx0YS5zdGF0ZSAmJlxyXG4gICAgICAgICAgICAoZG93bmxvYWREZWx0YS5zdGF0ZS5jdXJyZW50ID09PSAnY29tcGxldGUnKSkge1xyXG4gICAgICAgICAgICBjaHJvbWUuZG93bmxvYWRzLnNlYXJjaCh7IGlkOiBkb3dubG9hZERlbHRhLmlkIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZm91bmREb3dubG9hZHMuYmluZCh0aGlzKSk7XHJcbiAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBmb3VuZERvd25sb2Fkcyhkb3dubG9hZEl0ZW1zIDogY2hyb21lLmRvd25sb2Fkcy5Eb3dubG9hZEl0ZW1bXSkge1xyXG4gICAgICAgIGlmIChkb3dubG9hZEl0ZW1zLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBkb3dubG9hZEl0ZW0gPSBkb3dubG9hZEl0ZW1zWzBdO1xyXG4gICAgICAgIGxvZyhgRG93bmxvYWQgY29tcGxldGVkIHVybD08JHtkb3dubG9hZEl0ZW0udXJsfT4gZmlsZW5hbWU9PCR7ZG93bmxvYWRJdGVtLmZpbGVuYW1lfT5gKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuaXNEb3JtYW50KSB7XHJcbiAgICAgICAgICAgIGxvZyhcIkV4dGVuc2lvbiBpcyBpbiBhIGRvcm1hbnQgc3RhdGUgc28gZm91bmREb3dubG9hZHMgd2lsbCBub3Qgc2VuZCBkb3dubG9hZENvbXBsZXRlIG1lc3NhZ2VcIik7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghdGhpcy5mZWF0dXJlTWFuYWdlci5pc0Rvd25sb2FkUHJvdGVjdGlvbkVuYWJsZWQpIHtcclxuICAgICAgICAgICAgbG9nKFwiRG93bmxvYWRUcmFja2VyOiBmb3VuZERvd25sb2FkczogZG93bmxvYWQgcHJvdGVjdGlvbiBpcyBub3QgZW5hYmxlZFwiKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuaGFuZHNoYWtlci5pc0hhbmRzaGFrZW4pIHtcclxuICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IG5ldyBEb3dubG9hZENvbXBsZXRlVjEoZG93bmxvYWRJdGVtLnVybCwgZG93bmxvYWRJdGVtLmZpbGVuYW1lKTtcclxuICAgICAgICAgICAgdGhpcy5tZXNzYWdlU2VuZGVyLnNlbmRNZXNzYWdlKE1lc3NhZ2VUeXBlLmRvd25sb2FkQ29tcGxldGVWMSwgbWVzc2FnZSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgbG9nRXJyb3IobmV3IEVycm9yKGBOb3QgaGFuZHNoYWtlbiBzbyBub3Qgc2VuZGluZyBkb3dubG9hZCBjb21wbGV0ZSBtZXNzYWdlIGZvciB1cmw9PCR7ZG93bmxvYWRJdGVtLnVybH0+IGZpbGVuYW1lPTwke2Rvd25sb2FkSXRlbS5maWxlbmFtZX0+YCkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZWdpc3Rlckxpc3RlbmVycygpOiB2b2lkIHtcclxuICAgICAgICBpZiAodGhpcy5pc0Rvd25sb2Fkc0FwaVN1cHBvcnRlZCkge1xyXG4gICAgICAgICAgICAvLyBDaGVjayBpZiB0aGUgbGlzdGVuZXIgaXMgYWxyZWFkeSByZWdpc3RlcmVkIHRvIGF2b2lkIGR1cGxpY2F0ZSBldmVudCBub3RpZmljYXRpb25zLlxyXG4gICAgICAgICAgICBpZiAoIWNocm9tZS5kb3dubG9hZHMub25DaGFuZ2VkLmhhc0xpc3RlbmVyKHRoaXMub25DaGFuZ2VkQ0IpKSB7XHJcbiAgICAgICAgICAgICAgICBjaHJvbWUuZG93bmxvYWRzLm9uQ2hhbmdlZC5hZGRMaXN0ZW5lcih0aGlzLm9uQ2hhbmdlZENCKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZW1vdmVMaXN0ZW5lcnMoKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNEb3dubG9hZHNBcGlTdXBwb3J0ZWQpIHtcclxuICAgICAgICAgICAgY2hyb21lLmRvd25sb2Fkcy5vbkNoYW5nZWQucmVtb3ZlTGlzdGVuZXIodGhpcy5vbkNoYW5nZWRDQik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIE5lZWQgdG8gcGFzcyB0aGUgZXhhY3Qgc2FtZSBjYWxsYmFjayAoaW5jbHVkaW5nIGJpbmRpbmcpIHRvXHJcbiAgICAvLyByZW1vdmVMaXN0ZW5lcigpIHRoYXQgd2FzIHBhc3NlZCB0byBhZGRMaXN0ZW5lcigpIGluIG9yZGVyIHRvIHJlbW92ZSBhXHJcbiAgICAvLyBsaXN0ZW5lciBmcm9tIGFuIGV2ZW50LCBoZW5jZSBrZWVwIGEgbG9jYWwgY29weSBzaW5jZSBmdW5jdGlvbi5iaW5kKHRoaXMpXHJcbiAgICAvLyBnaXZlcyBhIGRpZmZlcmVudCByZXN1bHQgZXZlcnl0aW1lLlxyXG4gICAgcHJpdmF0ZSBvbkNoYW5nZWRDQiA9IHRoaXMub25DaGFuZ2VkLmJpbmQodGhpcyk7XHJcbiAgICAvLyBTdGFydCBpbml0aWFsbHkgaW4gYW4gZXJyb3ItZnJlZSBzdGF0ZS5cclxuICAgIHByaXZhdGUgaXNEb3JtYW50ID0gZmFsc2U7XHJcbiAgICBwcml2YXRlIGlzRG93bmxvYWRzQXBpU3VwcG9ydGVkOiBib29sZWFuO1xyXG59XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vZG93bmxvYWQtdHJhY2tlci50cyIsIi8vIENvcHlyaWdodCAoYykgMjAxOCBCcm9taXVtLCBJbmMuXHJcbi8vIFVzZSBvZiB0aGUgQnJvbWl1bSwgSW5jLiBzb2Z0d2FyZSByZXF1aXJlcyBhIGxpY2Vuc2UgYWdyZWVtZW50IHdpdGggQnJvbWl1bSwgSW5jLiBvciBhbiBhdXRob3JpemVkIHJlc2VsbGVyLlxyXG5cclxuaW1wb3J0IHsgQ29uZmlnS2V5IH0gZnJvbSBcIi4vY29uZmlnLWtleXNcIjtcclxuaW1wb3J0IHsgQ29uZmlnIH0gZnJvbSBcIi4vY29uZmlnXCI7XHJcbmltcG9ydCB7IENvbmZpZ1JlYWRlciB9IGZyb20gXCIuL2NvbmZpZy1yZWFkZXJcIjtcclxuaW1wb3J0IHsgc29tZSB9IGZyb20gXCIuL21heWJlXCI7XHJcblxyXG5leHBvcnQgdHlwZSBDb25maWdMaXN0ZW5lciA9IChrZXk6IENvbmZpZ0tleSwgY29uZmlnOiBDb25maWdSZWFkZXIpID0+IHZvaWQ7XHJcbmV4cG9ydCB0eXBlIENvbmZpZ3VyZWRMaXN0ZW5lciA9ICgpID0+IHZvaWQ7XHJcbmV4cG9ydCBpbnRlcmZhY2UgSUNvbmZpZ05vdGlmaWVyIHtcclxuICAgIGFkZENvbmZpZ0xpc3RlbmVyRm9yS2V5KGxpc3RlbmVyOiBDb25maWdMaXN0ZW5lciwga2V5OiBDb25maWdLZXkpOiB2b2lkO1xyXG4gICAgYWRkQ29uZmlnTGlzdGVuZXJGb3JLZXlzKGxpc3RlbmVyOiBDb25maWdMaXN0ZW5lciwga2V5czogQ29uZmlnS2V5W10pOiB2b2lkO1xyXG4gICAgb25Db25maWdDaGFuZ2VkKGtleTogQ29uZmlnS2V5KSA6IHZvaWQ7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBDb25maWdOb3RpZmllciBpbXBsZW1lbnRzIElDb25maWdOb3RpZmllciB7XHJcbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIGNvbmZpZyA6IENvbmZpZykge31cclxuXHJcbiAgICBhZGRDb25maWdMaXN0ZW5lckZvcktleShsaXN0ZW5lcjogQ29uZmlnTGlzdGVuZXIsIGtleTogQ29uZmlnS2V5KSB7XHJcbiAgICAgICAgY29uc3QgbGlzdGVuZXJzRm9yS2V5ID0gdGhpcy5rZXlMaXN0ZW5lcnMuZ2V0KGtleSk7XHJcbiAgICAgICAgaWYgKHNvbWUobGlzdGVuZXJzRm9yS2V5KSkge1xyXG4gICAgICAgICAgICBsaXN0ZW5lcnNGb3JLZXkucHVzaChsaXN0ZW5lcik7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5rZXlMaXN0ZW5lcnMuc2V0KGtleSwgW2xpc3RlbmVyXSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxpc3RlbmVyKGtleSwgdGhpcy5jb25maWcpO1xyXG4gICAgfVxyXG5cclxuICAgIGFkZENvbmZpZ0xpc3RlbmVyRm9yS2V5cyhsaXN0ZW5lcjogQ29uZmlnTGlzdGVuZXIsIGtleXM6IENvbmZpZ0tleVtdKSB7XHJcbiAgICAgICAgZm9yIChjb25zdCBrZXkgb2Yga2V5cykge1xyXG4gICAgICAgICAgICB0aGlzLmFkZENvbmZpZ0xpc3RlbmVyRm9yS2V5KGxpc3RlbmVyLCBrZXkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBvbkNvbmZpZ0NoYW5nZWQoa2V5OiBDb25maWdLZXkpIHtcclxuICAgICAgICBjb25zdCBsaXN0ZW5lcnNGb3JLZXkgPSB0aGlzLmtleUxpc3RlbmVycy5nZXQoa2V5KTtcclxuICAgICAgICBpZiAoc29tZShsaXN0ZW5lcnNGb3JLZXkpKSB7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgbGlzdGVuZXIgb2YgbGlzdGVuZXJzRm9yS2V5KSB7XHJcbiAgICAgICAgICAgICAgICBsaXN0ZW5lcihrZXksIHRoaXMuY29uZmlnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGtleUxpc3RlbmVycyA9IG5ldyBNYXA8Q29uZmlnS2V5LCBDb25maWdMaXN0ZW5lcltdPigpO1xyXG59XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2NvbmZpZy1ub3RpZmllci50cyIsIi8vIENvcHlyaWdodCAoYykgMjAxOCBCcm9taXVtLCBJbmMuXHJcbi8vIFVzZSBvZiB0aGUgQnJvbWl1bSwgSW5jLiBzb2Z0d2FyZSByZXF1aXJlcyBhIGxpY2Vuc2UgYWdyZWVtZW50IHdpdGggQnJvbWl1bSwgSW5jLiBvciBhbiBhdXRob3JpemVkIHJlc2VsbGVyLlxyXG5cclxuaW1wb3J0IHsgSU1lc3NhZ2VSb3V0ZXIgfSBmcm9tIFwiLi9tZXNzYWdlLXJvdXRlclwiO1xyXG5pbXBvcnQgeyBNZXNzYWdlVHlwZSB9IGZyb20gXCIuL21lc3NhZ2UtdHlwZXNcIjtcclxuaW1wb3J0IHtcclxuICAgIE1lc3NhZ2UsXHJcbiAgICBDb25maWdSZXF1ZXN0VjEsXHJcbiAgICBDb25maWdDaGFuZ2VkVjEsXHJcbiAgICBDb25maWdDaGFuZ2VkVjMsXHJcbiAgICBSZXB1dGF0aW9uQ2hhbmdlZFYzLFxyXG4gICAgQ29uZmlnQ2hhbmdlZFY0LFxyXG4gICAgQ29uZmlnQ2hhbmdlZFY1LFxyXG4gICAgQ29uZmlnQ2hhbmdlZFY3LFxyXG4gICAgQ29uZmlnQ2hhbmdlZFY4LFxyXG4gICAgQ29uZmlnQ2hhbmdlZFY5LFxyXG4gICAgQ29uZmlnQ2hhbmdlZFYxMSxcclxuICAgIENvbmZpZ0NoYW5nZWRWMTIsXHJcbiAgICBFeHRlbnNpYmxlQ29uZmlnQ2hhbmdlZFYxLFxyXG4gICAgU2VyaWFsaXplZElzRW5hYmxlZERhdGEsXHJcbiAgICBTZXJpYWxpemVkTmV3VGFiUGFnZVVybHMsXHJcbiAgICBFeHRlbnNpYmxlQ29uZmlnQ2hhbmdlZFYzLFxyXG4gICAgRXh0ZW5zaWJsZUNvbmZpZ0NoYW5nZWRWNCxcclxuICAgIEV4dGVuc2libGVDb25maWdDaGFuZ2VkVjUsXHJcbiAgICBFeHRlbnNpYmxlQ29uZmlnQ2hhbmdlZFY3LFxyXG4gICAgRXh0ZW5zaWJsZUNvbmZpZ0NoYW5nZWRWOSxcclxuICAgIEV4dGVuc2libGVDb25maWdDaGFuZ2VkVjgsXHJcbiAgICBFeHRlbnNpYmxlQ29uZmlnQ2hhbmdlZFYxMSxcclxuICAgIEV4dGVuc2libGVDb25maWdDaGFuZ2VkVjEyLFxyXG4gICAgaXNTZXJpYWxpemVkSXNFbmFibGVkRGF0YVYxMixcclxuICAgIGlzU2VyaWFsaXplZElzRW5hYmxlZERhdGFWMSxcclxuICAgIGlzU2VyaWFsaXplZFBoaXNoaW5nTmF2U2VxRGF0YSxcclxuICAgIGlzU2VyaWFsaXplZE5ld1RhYlBhZ2VVcmxzVjEyLFxyXG4gICAgaXNTZXJpYWxpemVkTmV3VGFiUGFnZVVybHNWNyxcclxufSBmcm9tIFwiLi9tZXNzYWdlc1wiO1xyXG5pbXBvcnQgeyBNZXNzYWdlU2VuZGVyIH0gZnJvbSBcIi4vbWVzc2FnZS1zZW5kZXJcIjtcclxuaW1wb3J0IHsgQ29uZmlnIH0gZnJvbSBcIi4vY29uZmlnXCI7XHJcbmltcG9ydCB7IElDb25maWdOb3RpZmllciB9IGZyb20gXCIuL2NvbmZpZy1ub3RpZmllclwiO1xyXG5pbXBvcnQgeyBDb25maWdLZXkgfSBmcm9tIFwiLi9jb25maWcta2V5c1wiO1xyXG5pbXBvcnQgeyBJSGFuZHNoYWtlciB9IGZyb20gXCIuL2hhbmRzaGFrZXJcIjtcclxuaW1wb3J0IHsgaXNWYWxpZFNlcmlhbGl6ZWRQaGlzaGluZ1NvdXJjZVNpdGVzIH0gZnJvbSBcIi4vc2VyaWFsaXplZC1waGlzaGluZy1zb3VyY2Utc2l0ZXNcIjtcclxuaW1wb3J0IHsgZ2V0Q3VycmVudEJyb3dzZXJJbmZvIH0gZnJvbSBcIi4vYnJvd3NlclwiO1xyXG5pbXBvcnQgeyBJT25Db25maWd1cmVkUmFpc2VyIH0gZnJvbSBcIi4vb24tY29uZmlndXJlZFwiO1xyXG5pbXBvcnQgeyBpc0VtcHR5U3RyaW5nIH0gZnJvbSBcIi4vc3RyaW5nLXV0aWxzXCI7XHJcblxyXG50eXBlIENvbmZpZ0NoYW5nZWQgPVxyXG4gICAgRXh0ZW5zaWJsZUNvbmZpZ0NoYW5nZWRWMTxTZXJpYWxpemVkSXNFbmFibGVkRGF0YT4gfFxyXG4gICAgRXh0ZW5zaWJsZUNvbmZpZ0NoYW5nZWRWMzxTZXJpYWxpemVkSXNFbmFibGVkRGF0YT4gfFxyXG4gICAgRXh0ZW5zaWJsZUNvbmZpZ0NoYW5nZWRWNDxTZXJpYWxpemVkSXNFbmFibGVkRGF0YT4gfFxyXG4gICAgRXh0ZW5zaWJsZUNvbmZpZ0NoYW5nZWRWNTxTZXJpYWxpemVkSXNFbmFibGVkRGF0YT4gfFxyXG4gICAgRXh0ZW5zaWJsZUNvbmZpZ0NoYW5nZWRWNzxTZXJpYWxpemVkSXNFbmFibGVkRGF0YSwgU2VyaWFsaXplZE5ld1RhYlBhZ2VVcmxzPiB8XHJcbiAgICBFeHRlbnNpYmxlQ29uZmlnQ2hhbmdlZFY4PFNlcmlhbGl6ZWRJc0VuYWJsZWREYXRhLCBTZXJpYWxpemVkTmV3VGFiUGFnZVVybHM+IHxcclxuICAgIEV4dGVuc2libGVDb25maWdDaGFuZ2VkVjk8U2VyaWFsaXplZElzRW5hYmxlZERhdGEsIFNlcmlhbGl6ZWROZXdUYWJQYWdlVXJscz4gfFxyXG4gICAgRXh0ZW5zaWJsZUNvbmZpZ0NoYW5nZWRWMTE8U2VyaWFsaXplZElzRW5hYmxlZERhdGEsIFNlcmlhbGl6ZWROZXdUYWJQYWdlVXJscz4gfFxyXG4gICAgRXh0ZW5zaWJsZUNvbmZpZ0NoYW5nZWRWMTI8U2VyaWFsaXplZElzRW5hYmxlZERhdGEsIFNlcmlhbGl6ZWROZXdUYWJQYWdlVXJscz47XHJcblxyXG5pbnRlcmZhY2UgSUNvbmZpZ1VwZGF0ZXJWMCB7XHJcbiAgICB1cGRhdGVDb25maWcoY29uZmlnQ2hhbmdlZDogQ29uZmlnQ2hhbmdlZCk6IHZvaWQ7XHJcbn1cclxuXHJcbmNsYXNzIENvbmZpZ1VwZGF0ZXJWMSBpbXBsZW1lbnRzIElDb25maWdVcGRhdGVyVjAge1xyXG4gICAgY29uc3RydWN0b3IocHJvdGVjdGVkIGNvbmZpZzogQ29uZmlnKSB7fVxyXG5cclxuICAgIHVwZGF0ZUNvbmZpZyhjb25maWdDaGFuZ2VkOiBFeHRlbnNpYmxlQ29uZmlnQ2hhbmdlZFYxPFNlcmlhbGl6ZWRJc0VuYWJsZWREYXRhPikge1xyXG4gICAgICAgIGNvbnN0IGlzRW5hYmxlZCA9IGNvbmZpZ0NoYW5nZWQuaXNFbmFibGVkO1xyXG4gICAgICAgIGNvbnN0IHBoaXNoaW5nU291cmNlU2l0ZXMgPSBjb25maWdDaGFuZ2VkLnBoaXNoaW5nU291cmNlU2l0ZXM7XHJcbiAgICAgICAgY29uc3QgcGhpc2hpbmdOYXZpZ2F0aW9uU2VxdWVuY2VzID0gY29uZmlnQ2hhbmdlZC5waGlzaGluZ05hdmlnYXRpb25TZXF1ZW5jZXM7XHJcbiAgICAgICAgY29uc3QgdHJ1c3RlZFNpdGVzID0gY29uZmlnQ2hhbmdlZC50cnVzdGVkU2l0ZXM7XHJcbiAgICAgICAgY29uc3QgdW50cnVzdGVkU2l0ZXMgPSBjb25maWdDaGFuZ2VkLnVudHJ1c3RlZFNpdGVzO1xyXG4gICAgICAgIGNvbnN0IHVzZXJUcnVzdGVkT3JpZ2lucyA9IGNvbmZpZ0NoYW5nZWQudXNlclRydXN0ZWRPcmlnaW5zO1xyXG4gICAgICAgIGNvbnN0IHVzZXJVbnRydXN0ZWRPcmlnaW5zID0gY29uZmlnQ2hhbmdlZC51c2VyVW50cnVzdGVkT3JpZ2lucztcclxuICAgICAgICBjb25zdCBvcGVuUGhpc2hpbmdMaW5rc0luU2VjdXJlQnJvd3NlciA9IGNvbmZpZ0NoYW5nZWQub3BlblBoaXNoaW5nTGlua3NJblNlY3VyZUJyb3dzZXI7XHJcbiAgICAgICAgLy8gTXVzdCBjaGVjayB0eXBlcyBpbiBvcmRlciBvZiBuZXdlc3QgdG8gb2xkZXN0XHJcbiAgICAgICAgaWYgKGlzU2VyaWFsaXplZElzRW5hYmxlZERhdGFWMTIoaXNFbmFibGVkKSkge1xyXG4gICAgICAgICAgICB0aGlzLmNvbmZpZy5pc0VuYWJsZWQgPSBpc0VuYWJsZWQ7XHJcbiAgICAgICAgfSBlbHNlIGlmIChpc1NlcmlhbGl6ZWRJc0VuYWJsZWREYXRhVjEoaXNFbmFibGVkKSkge1xyXG4gICAgICAgICAgICB0aGlzLmNvbmZpZy5pc0VuYWJsZWQgPSB7XHJcbiAgICAgICAgICAgICAgICAuLi5pc0VuYWJsZWQsXHJcbiAgICAgICAgICAgICAgICBlZGdlQ2hyb21pdW06IGZhbHNlXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5jb25maWcuaXNFbmFibGVkID0ge1xyXG4gICAgICAgICAgICAgICAgY2hyb21lOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIGZpcmVmb3g6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgZWRnZTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBlZGdlQ2hyb21pdW06IGZhbHNlXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChpc1ZhbGlkU2VyaWFsaXplZFBoaXNoaW5nU291cmNlU2l0ZXMocGhpc2hpbmdTb3VyY2VTaXRlcykgJiZcclxuICAgICAgICAgICAgICAgIChwaGlzaGluZ1NvdXJjZVNpdGVzLnZlcnNpb24gPT09IENvbmZpZy5waGlzaGluZ1NvdXJjZVNpdGVzVmVyc2lvbigpKSkge1xyXG4gICAgICAgICAgICB0aGlzLmNvbmZpZy5waGlzaGluZ1NvdXJjZVNpdGVzID0gcGhpc2hpbmdTb3VyY2VTaXRlcztcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmNvbmZpZy5waGlzaGluZ1NvdXJjZVNpdGVzID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoaXNTZXJpYWxpemVkUGhpc2hpbmdOYXZTZXFEYXRhKHBoaXNoaW5nTmF2aWdhdGlvblNlcXVlbmNlcykpIHtcclxuICAgICAgICAgICAgdGhpcy5jb25maWcucGhpc2hpbmdOYXZpZ2F0aW9uU2VxdWVuY2VzID0gcGhpc2hpbmdOYXZpZ2F0aW9uU2VxdWVuY2VzO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29uZmlnLnBoaXNoaW5nTmF2aWdhdGlvblNlcXVlbmNlcyA9IHVuZGVmaW5lZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jb25maWcudHJ1c3RlZFVybHMgPSB0cnVzdGVkU2l0ZXM7XHJcbiAgICAgICAgdGhpcy5jb25maWcudW50cnVzdGVkVXJscyA9IHVudHJ1c3RlZFNpdGVzO1xyXG4gICAgICAgIHRoaXMuY29uZmlnLnVzZXJUcnVzdGVkT3JpZ2lucyA9IHVzZXJUcnVzdGVkT3JpZ2lucztcclxuICAgICAgICB0aGlzLmNvbmZpZy51c2VyVW50cnVzdGVkT3JpZ2lucyA9IHVzZXJVbnRydXN0ZWRPcmlnaW5zO1xyXG4gICAgICAgIHRoaXMuY29uZmlnLm9wZW5QaGlzaGluZ0xpbmtzSW5TZWN1cmVCcm93c2VyID0gb3BlblBoaXNoaW5nTGlua3NJblNlY3VyZUJyb3dzZXI7XHJcbiAgICB9XHJcbn1cclxuXHJcbmNsYXNzIENvbmZpZ1VwZGF0ZXJWMyBleHRlbmRzIENvbmZpZ1VwZGF0ZXJWMSB7XHJcbiAgICB1cGRhdGVDb25maWcoY29uZmlnQ2hhbmdlZDogRXh0ZW5zaWJsZUNvbmZpZ0NoYW5nZWRWMzxTZXJpYWxpemVkSXNFbmFibGVkRGF0YT4pIHtcclxuICAgICAgICBzdXBlci51cGRhdGVDb25maWcoY29uZmlnQ2hhbmdlZCk7XHJcbiAgICAgICAgY29uc3QgcHJpb3JpdGlzZVRydXN0ZWRTaXRlcyA9IGNvbmZpZ0NoYW5nZWQucHJpb3JpdGlzZVRydXN0ZWRTaXRlcztcclxuICAgICAgICB0aGlzLmNvbmZpZy5wcmlvcml0aXNlVHJ1c3RlZFNpdGVzID0gcHJpb3JpdGlzZVRydXN0ZWRTaXRlcztcclxuICAgIH1cclxufVxyXG5cclxuY2xhc3MgQ29uZmlnVXBkYXRlclY0IGV4dGVuZHMgQ29uZmlnVXBkYXRlclYzIHtcclxuICAgIHVwZGF0ZUNvbmZpZyhjb25maWdDaGFuZ2VkOiBFeHRlbnNpYmxlQ29uZmlnQ2hhbmdlZFY0PFNlcmlhbGl6ZWRJc0VuYWJsZWREYXRhPikge1xyXG4gICAgICAgIHN1cGVyLnVwZGF0ZUNvbmZpZyhjb25maWdDaGFuZ2VkKTtcclxuICAgICAgICBjb25zdCBwcm9tcHRGb3JVbmNhdGVnb3JpemVkID0gY29uZmlnQ2hhbmdlZC5wcm9tcHRGb3JVbmNhdGVnb3JpemVkO1xyXG4gICAgICAgIHRoaXMuY29uZmlnLnByb21wdEZvclVuY2F0ZWdvcml6ZWQgPSBwcm9tcHRGb3JVbmNhdGVnb3JpemVkO1xyXG4gICAgfVxyXG59XHJcblxyXG5jbGFzcyBDb25maWdVcGRhdGVyVjUgZXh0ZW5kcyBDb25maWdVcGRhdGVyVjQge1xyXG4gICAgdXBkYXRlQ29uZmlnKGNvbmZpZ0NoYW5nZWQ6IEV4dGVuc2libGVDb25maWdDaGFuZ2VkVjU8U2VyaWFsaXplZElzRW5hYmxlZERhdGE+KSB7XHJcbiAgICAgICAgc3VwZXIudXBkYXRlQ29uZmlnKGNvbmZpZ0NoYW5nZWQpO1xyXG4gICAgICAgIGNvbnN0IGlzRW50ZXJwcmlzZVByb2R1Y3QgPSBjb25maWdDaGFuZ2VkLmlzRW50ZXJwcmlzZVByb2R1Y3Q7XHJcbiAgICAgICAgdGhpcy5jb25maWcuaXNFbnRlcnByaXNlUHJvZHVjdCA9IGlzRW50ZXJwcmlzZVByb2R1Y3Q7XHJcbiAgICB9XHJcbn1cclxuXHJcbmNsYXNzIENvbmZpZ1VwZGF0ZXJWNyBleHRlbmRzIENvbmZpZ1VwZGF0ZXJWNSB7XHJcbiAgICB1cGRhdGVDb25maWcoY29uZmlnQ2hhbmdlZDogRXh0ZW5zaWJsZUNvbmZpZ0NoYW5nZWRWNzxTZXJpYWxpemVkSXNFbmFibGVkRGF0YSwgU2VyaWFsaXplZE5ld1RhYlBhZ2VVcmxzPikge1xyXG4gICAgICAgIHN1cGVyLnVwZGF0ZUNvbmZpZyhjb25maWdDaGFuZ2VkKTtcclxuICAgICAgICBjb25zdCBuZXdUYWJQYWdlVXJscyA9IGNvbmZpZ0NoYW5nZWQubmV3VGFiUGFnZVVybHM7XHJcbiAgICAgICAgLy8gTXVzdCBjaGVjayB0eXBlcyBpbiBvcmRlciBvZiBuZXdlc3QgdG8gb2xkZXN0XHJcbiAgICAgICAgaWYgKGlzU2VyaWFsaXplZE5ld1RhYlBhZ2VVcmxzVjEyKG5ld1RhYlBhZ2VVcmxzKSkge1xyXG4gICAgICAgICAgICB0aGlzLmNvbmZpZy5uZXdUYWJQYWdlVXJscyA9IG5ld1RhYlBhZ2VVcmxzO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoaXNTZXJpYWxpemVkTmV3VGFiUGFnZVVybHNWNyhuZXdUYWJQYWdlVXJscykpIHtcclxuICAgICAgICAgICAgdGhpcy5jb25maWcubmV3VGFiUGFnZVVybHMgPSB7XHJcbiAgICAgICAgICAgICAgICAuLi5uZXdUYWJQYWdlVXJscyxcclxuICAgICAgICAgICAgICAgIGVkZ2VDaHJvbWl1bTogW11cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuY2xhc3MgQ29uZmlnVXBkYXRlclY4IGV4dGVuZHMgQ29uZmlnVXBkYXRlclY3IHtcclxuICAgIHVwZGF0ZUNvbmZpZyhjb25maWdDaGFuZ2VkOiBFeHRlbnNpYmxlQ29uZmlnQ2hhbmdlZFY4PFNlcmlhbGl6ZWRJc0VuYWJsZWREYXRhLCBTZXJpYWxpemVkTmV3VGFiUGFnZVVybHM+KSB7XHJcbiAgICAgICAgc3VwZXIudXBkYXRlQ29uZmlnKGNvbmZpZ0NoYW5nZWQpO1xyXG4gICAgICAgIGNvbnN0IGlzQ29uc3VtZXJQcm9kdWN0ID0gY29uZmlnQ2hhbmdlZC5pc0NvbnN1bWVyUHJvZHVjdDtcclxuICAgICAgICBjb25zdCBibG9ja2VkUGFnZUxlYXJuTW9yZVVSTCA9IGNvbmZpZ0NoYW5nZWQuYmxvY2tlZFBhZ2VMZWFybk1vcmVVUkw7XHJcbiAgICAgICAgdGhpcy5jb25maWcuaXNDb25zdW1lclByb2R1Y3QgPSBpc0NvbnN1bWVyUHJvZHVjdDtcclxuICAgICAgICBpZiAoIWlzRW1wdHlTdHJpbmcoYmxvY2tlZFBhZ2VMZWFybk1vcmVVUkwpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29uZmlnLmJsb2NrZWRQYWdlTGVhcm5Nb3JlVVJMID0gYmxvY2tlZFBhZ2VMZWFybk1vcmVVUkw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5jbGFzcyBDb25maWdVcGRhdGVyVjkgZXh0ZW5kcyBDb25maWdVcGRhdGVyVjgge1xyXG4gICAgdXBkYXRlQ29uZmlnKGNvbmZpZ0NoYW5nZWQ6IEV4dGVuc2libGVDb25maWdDaGFuZ2VkVjk8U2VyaWFsaXplZElzRW5hYmxlZERhdGEsIFNlcmlhbGl6ZWROZXdUYWJQYWdlVXJscz4pIHtcclxuICAgICAgICBzdXBlci51cGRhdGVDb25maWcoY29uZmlnQ2hhbmdlZCk7XHJcbiAgICAgICAgY29uc3QgZG9udEFza0FnYWluID0gY29uZmlnQ2hhbmdlZC5kb250QXNrQWdhaW47XHJcbiAgICAgICAgdGhpcy5jb25maWcuZG9udEFza0FnYWluID0gZG9udEFza0FnYWluO1xyXG4gICAgfVxyXG59XHJcblxyXG5jbGFzcyBDb25maWdVcGRhdGVyVjExIGV4dGVuZHMgQ29uZmlnVXBkYXRlclY5IHtcclxuICAgIHVwZGF0ZUNvbmZpZyhjb25maWdDaGFuZ2VkOiBFeHRlbnNpYmxlQ29uZmlnQ2hhbmdlZFYxMTxTZXJpYWxpemVkSXNFbmFibGVkRGF0YSwgU2VyaWFsaXplZE5ld1RhYlBhZ2VVcmxzPikge1xyXG4gICAgICAgIHN1cGVyLnVwZGF0ZUNvbmZpZyhjb25maWdDaGFuZ2VkKTtcclxuICAgICAgICBjb25zdCBzZWN1cmVCcm93c2VyUmVkaXJlY3RUcnVzdGVkU2l0ZXMgPSBjb25maWdDaGFuZ2VkLnNlY3VyZUJyb3dzZXJSZWRpcmVjdFRydXN0ZWRTaXRlcztcclxuICAgICAgICBjb25zdCBwcm9kdWN0U3RhdHVzID0gY29uZmlnQ2hhbmdlZC5wcm9kdWN0U3RhdHVzO1xyXG4gICAgICAgIHRoaXMuY29uZmlnLnNlY3VyZUJyb3dzZXJSZWRpcmVjdFRydXN0ZWRTaXRlcyA9IHNlY3VyZUJyb3dzZXJSZWRpcmVjdFRydXN0ZWRTaXRlcztcclxuICAgICAgICB0aGlzLmNvbmZpZy5wcm9kdWN0U3RhdHVzID0gcHJvZHVjdFN0YXR1cztcclxuICAgIH1cclxufVxyXG5cclxuY2xhc3MgQ29uZmlnVXBkYXRlclYxMiBleHRlbmRzIENvbmZpZ1VwZGF0ZXJWMTEge1xyXG4gICAgdXBkYXRlQ29uZmlnKGNvbmZpZ0NoYW5nZWQ6IEV4dGVuc2libGVDb25maWdDaGFuZ2VkVjEyPFNlcmlhbGl6ZWRJc0VuYWJsZWREYXRhLCBTZXJpYWxpemVkTmV3VGFiUGFnZVVybHM+KSB7XHJcbiAgICAgICAgc3VwZXIudXBkYXRlQ29uZmlnKGNvbmZpZ0NoYW5nZWQpO1xyXG4gICAgfVxyXG59XHJcblxyXG5pbnRlcmZhY2UgSUNvbmZpZ05vdGlmaWVyVjAge1xyXG4gICAgbm90aWZ5KCk6IHZvaWQ7XHJcbn1cclxuXHJcbmNsYXNzIENvbmZpZ05vdGlmaWVyVjEgaW1wbGVtZW50cyBJQ29uZmlnTm90aWZpZXJWMCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihwcm90ZWN0ZWQgY29uZmlnTm90aWZpZXI6IElDb25maWdOb3RpZmllcikge31cclxuXHJcbiAgICBub3RpZnkoKSB7XHJcbiAgICAgICAgdGhpcy5jb25maWdOb3RpZmllci5vbkNvbmZpZ0NoYW5nZWQoQ29uZmlnS2V5LmlzRW5hYmxlZCk7XHJcbiAgICAgICAgdGhpcy5jb25maWdOb3RpZmllci5vbkNvbmZpZ0NoYW5nZWQoQ29uZmlnS2V5LnBoaXNoaW5nU291cmNlU2l0ZXMpO1xyXG4gICAgICAgIHRoaXMuY29uZmlnTm90aWZpZXIub25Db25maWdDaGFuZ2VkKENvbmZpZ0tleS5waGlzaGluZ05hdmlnYXRpb25TZXF1ZW5jZXMpO1xyXG4gICAgICAgIHRoaXMuY29uZmlnTm90aWZpZXIub25Db25maWdDaGFuZ2VkKENvbmZpZ0tleS50cnVzdGVkVXJscyk7XHJcbiAgICAgICAgdGhpcy5jb25maWdOb3RpZmllci5vbkNvbmZpZ0NoYW5nZWQoQ29uZmlnS2V5LnVudHJ1c3RlZFVybHMpO1xyXG4gICAgICAgIHRoaXMuY29uZmlnTm90aWZpZXIub25Db25maWdDaGFuZ2VkKENvbmZpZ0tleS51c2VyVHJ1c3RlZE9yaWdpbnMpO1xyXG4gICAgICAgIHRoaXMuY29uZmlnTm90aWZpZXIub25Db25maWdDaGFuZ2VkKENvbmZpZ0tleS51c2VyVW50cnVzdGVkT3JpZ2lucyk7XHJcbiAgICAgICAgdGhpcy5jb25maWdOb3RpZmllci5vbkNvbmZpZ0NoYW5nZWQoQ29uZmlnS2V5Lm9wZW5QaGlzaGluZ0xpbmtzSW5TZWN1cmVCcm93c2VyKTtcclxuICAgIH1cclxufVxyXG5cclxuY2xhc3MgQ29uZmlnTm90aWZpZXJWMyBleHRlbmRzIENvbmZpZ05vdGlmaWVyVjEge1xyXG4gICAgbm90aWZ5KCkge1xyXG4gICAgICAgIHN1cGVyLm5vdGlmeSgpO1xyXG4gICAgICAgIHRoaXMuY29uZmlnTm90aWZpZXIub25Db25maWdDaGFuZ2VkKENvbmZpZ0tleS5wcmlvcml0aXNlVHJ1c3RlZFNpdGVzKTtcclxuICAgIH1cclxufVxyXG5cclxuY2xhc3MgQ29uZmlnTm90aWZpZXJWNCBleHRlbmRzIENvbmZpZ05vdGlmaWVyVjMge1xyXG4gICAgbm90aWZ5KCkge1xyXG4gICAgICAgIHN1cGVyLm5vdGlmeSgpO1xyXG4gICAgICAgIHRoaXMuY29uZmlnTm90aWZpZXIub25Db25maWdDaGFuZ2VkKENvbmZpZ0tleS5wcm9tcHRGb3JVbmNhdGVnb3JpemVkKTtcclxuICAgIH1cclxufVxyXG5cclxuY2xhc3MgQ29uZmlnTm90aWZpZXJWNSBleHRlbmRzIENvbmZpZ05vdGlmaWVyVjQge1xyXG4gICAgbm90aWZ5KCkge1xyXG4gICAgICAgIHN1cGVyLm5vdGlmeSgpO1xyXG4gICAgICAgIHRoaXMuY29uZmlnTm90aWZpZXIub25Db25maWdDaGFuZ2VkKENvbmZpZ0tleS5pc0VudGVycHJpc2VQcm9kdWN0KTtcclxuICAgIH1cclxufVxyXG5cclxuY2xhc3MgQ29uZmlnTm90aWZpZXJWNyBleHRlbmRzIENvbmZpZ05vdGlmaWVyVjUge1xyXG4gICAgbm90aWZ5KCkge1xyXG4gICAgICAgIHN1cGVyLm5vdGlmeSgpO1xyXG4gICAgICAgIHRoaXMuY29uZmlnTm90aWZpZXIub25Db25maWdDaGFuZ2VkKENvbmZpZ0tleS5uZXdUYWJQYWdlVXJscyk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmNsYXNzIENvbmZpZ05vdGlmaWVyVjggZXh0ZW5kcyBDb25maWdOb3RpZmllclY3IHtcclxuICAgIG5vdGlmeSgpIHtcclxuICAgICAgICBzdXBlci5ub3RpZnkoKTtcclxuICAgICAgICB0aGlzLmNvbmZpZ05vdGlmaWVyLm9uQ29uZmlnQ2hhbmdlZChDb25maWdLZXkuaXNDb25zdW1lclByb2R1Y3QpO1xyXG4gICAgICAgIHRoaXMuY29uZmlnTm90aWZpZXIub25Db25maWdDaGFuZ2VkKENvbmZpZ0tleS5ibG9ja2VkUGFnZUxlYXJuTW9yZVVSTCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmNsYXNzIENvbmZpZ05vdGlmaWVyVjkgZXh0ZW5kcyBDb25maWdOb3RpZmllclY4IHtcclxuICAgIG5vdGlmeSgpIHtcclxuICAgICAgICBzdXBlci5ub3RpZnkoKTtcclxuICAgICAgICB0aGlzLmNvbmZpZ05vdGlmaWVyLm9uQ29uZmlnQ2hhbmdlZChDb25maWdLZXkuZG9udEFza0FnYWluKTtcclxuICAgIH1cclxufVxyXG5cclxuY2xhc3MgQ29uZmlnTm90aWZpZXJWMTEgZXh0ZW5kcyBDb25maWdOb3RpZmllclY5IHtcclxuICAgIG5vdGlmeSgpIHtcclxuICAgICAgICBzdXBlci5ub3RpZnkoKTtcclxuICAgICAgICB0aGlzLmNvbmZpZ05vdGlmaWVyLm9uQ29uZmlnQ2hhbmdlZChDb25maWdLZXkuc2VjdXJlQnJvd3NlclJlZGlyZWN0VHJ1c3RlZFNpdGVzKTtcclxuICAgICAgICB0aGlzLmNvbmZpZ05vdGlmaWVyLm9uQ29uZmlnQ2hhbmdlZChDb25maWdLZXkucHJvZHVjdFN0YXR1cyk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmNsYXNzIENvbmZpZ05vdGlmaWVyVjEyIGV4dGVuZHMgQ29uZmlnTm90aWZpZXJWMTEge1xyXG4gICAgbm90aWZ5KCkge1xyXG4gICAgICAgIHN1cGVyLm5vdGlmeSgpO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgQ29uZmlnVXBkYXRlciB7XHJcbiAgICBjb25zdHJ1Y3RvcihcclxuICAgICAgICAgICAgcHJpdmF0ZSBjb25maWc6IENvbmZpZyxcclxuICAgICAgICAgICAgcHJpdmF0ZSBjb25maWdOb3RpZmllcjogSUNvbmZpZ05vdGlmaWVyLFxyXG4gICAgICAgICAgICBwcml2YXRlIG1lc3NhZ2VTZW5kZXI6IE1lc3NhZ2VTZW5kZXIsXHJcbiAgICAgICAgICAgIG1lc3NhZ2VSb3V0ZXI6IElNZXNzYWdlUm91dGVyLFxyXG4gICAgICAgICAgICBoYW5kc2hha2VyOiBJSGFuZHNoYWtlcixcclxuICAgICAgICAgICAgcHJpdmF0ZSBvbkNvbmZpZ3VyZWRSYWlzZXI6IElPbkNvbmZpZ3VyZWRSYWlzZXIpIHtcclxuICAgICAgICBtZXNzYWdlUm91dGVyLnJlZ2lzdGVyTWVzc2FnZUhhbmRsZXIoTWVzc2FnZVR5cGUuY29uZmlnQ2hhbmdlZFYxLCAobWVzc2FnZSkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLm9uQ29uZmlnVXBkYXRlZFYxKG1lc3NhZ2UpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIG1lc3NhZ2VSb3V0ZXIucmVnaXN0ZXJNZXNzYWdlSGFuZGxlcihNZXNzYWdlVHlwZS5jb25maWdDaGFuZ2VkVjMsIChtZXNzYWdlKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMub25Db25maWdVcGRhdGVkVjMobWVzc2FnZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgbWVzc2FnZVJvdXRlci5yZWdpc3Rlck1lc3NhZ2VIYW5kbGVyKE1lc3NhZ2VUeXBlLmNvbmZpZ0NoYW5nZWRWNCwgKG1lc3NhZ2UpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5vbkNvbmZpZ1VwZGF0ZWRWNChtZXNzYWdlKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBtZXNzYWdlUm91dGVyLnJlZ2lzdGVyTWVzc2FnZUhhbmRsZXIoTWVzc2FnZVR5cGUuY29uZmlnQ2hhbmdlZFY1LCAobWVzc2FnZSkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLm9uQ29uZmlnVXBkYXRlZFY1KG1lc3NhZ2UpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIG1lc3NhZ2VSb3V0ZXIucmVnaXN0ZXJNZXNzYWdlSGFuZGxlcihNZXNzYWdlVHlwZS5jb25maWdDaGFuZ2VkVjcsIChtZXNzYWdlKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMub25Db25maWdVcGRhdGVkVjcobWVzc2FnZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgbWVzc2FnZVJvdXRlci5yZWdpc3Rlck1lc3NhZ2VIYW5kbGVyKE1lc3NhZ2VUeXBlLmNvbmZpZ0NoYW5nZWRWOCwgKG1lc3NhZ2UpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5vbkNvbmZpZ1VwZGF0ZWRWOChtZXNzYWdlKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBtZXNzYWdlUm91dGVyLnJlZ2lzdGVyTWVzc2FnZUhhbmRsZXIoTWVzc2FnZVR5cGUuY29uZmlnQ2hhbmdlZFY5LCAobWVzc2FnZSkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLm9uQ29uZmlnVXBkYXRlZFY5KG1lc3NhZ2UpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIG1lc3NhZ2VSb3V0ZXIucmVnaXN0ZXJNZXNzYWdlSGFuZGxlcihNZXNzYWdlVHlwZS5jb25maWdDaGFuZ2VkVjExLCAobWVzc2FnZSkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLm9uQ29uZmlnVXBkYXRlZFYxMShtZXNzYWdlKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBtZXNzYWdlUm91dGVyLnJlZ2lzdGVyTWVzc2FnZUhhbmRsZXIoTWVzc2FnZVR5cGUuY29uZmlnQ2hhbmdlZFYxMiwgKG1lc3NhZ2UpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5vbkNvbmZpZ1VwZGF0ZWRWMTIobWVzc2FnZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgbWVzc2FnZVJvdXRlci5yZWdpc3Rlck1lc3NhZ2VIYW5kbGVyKE1lc3NhZ2VUeXBlLnJlcHV0YXRpb25DaGFuZ2VkVjMsIG1lc3NhZ2UgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLm9uUmVwdXRhdGlvblVwZGF0ZWRWMyhtZXNzYWdlKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBoYW5kc2hha2VyLm9uSGFuZHNoYWtlbi5yZWdpc3RlckV2ZW50SGFuZGxlcigoXykgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnJlcXVlc3RDb25maWdVcGRhdGUoKVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHJlcXVlc3RDb25maWdVcGRhdGUoKSA6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IHJlcXVlc3QgPSBuZXcgQ29uZmlnUmVxdWVzdFYxKFxyXG4gICAgICAgICAgICAgICAgQ29uZmlnLnBoaXNoaW5nU291cmNlU2l0ZXNWZXJzaW9uKCksXHJcbiAgICAgICAgICAgICAgICBDb25maWcucGhpc2hpbmdOYXZpZ2F0aW9uU2VxdWVuY2VzVmVyc2lvbigpLFxyXG4gICAgICAgICAgICAgICAgZ2V0Q3VycmVudEJyb3dzZXJJbmZvKCkpO1xyXG4gICAgICAgIHRoaXMubWVzc2FnZVNlbmRlci5zZW5kTWVzc2FnZShNZXNzYWdlVHlwZS5jb25maWdSZXF1ZXN0VjEsIHJlcXVlc3QpO1xyXG4gICAgfVxyXG5cclxuICAgIG9uQ29uZmlnVXBkYXRlZDxUQ29uZmlnQ2hhbmdlZCBleHRlbmRzIENvbmZpZ0NoYW5nZWQ+KFxyXG4gICAgICAgICAgICBtZXNzYWdlOiBNZXNzYWdlLFxyXG4gICAgICAgICAgICB1cGRhdGVyOiBJQ29uZmlnVXBkYXRlclYwLFxyXG4gICAgICAgICAgICBub3RpZmllcjogSUNvbmZpZ05vdGlmaWVyVjApIDogdm9pZCB7XHJcbiAgICAgICAgY29uc3QgY29uZmlnQ2hhbmdlZCA9IG1lc3NhZ2UucGF5bG9hZCBhcyBUQ29uZmlnQ2hhbmdlZDtcclxuICAgICAgICB1cGRhdGVyLnVwZGF0ZUNvbmZpZyhjb25maWdDaGFuZ2VkKTtcclxuICAgICAgICBub3RpZmllci5ub3RpZnkoKTtcclxuICAgIH1cclxuXHJcbiAgICBvbkNvbmZpZ1VwZGF0ZWRWMShtZXNzYWdlOiBNZXNzYWdlKSB7XHJcbiAgICAgICAgdGhpcy5vbkNvbmZpZ1VwZGF0ZWQ8Q29uZmlnQ2hhbmdlZFYxPihtZXNzYWdlLCBuZXcgQ29uZmlnVXBkYXRlclYxKHRoaXMuY29uZmlnKSwgbmV3IENvbmZpZ05vdGlmaWVyVjEodGhpcy5jb25maWdOb3RpZmllcikpO1xyXG4gICAgICAgIC8vIElmIHdlJ3JlIHVzaW5nIHByb3RvY29sIHZlcnNpb24gMSB0aGVuIHRoZXJlJ3Mgbm8gZmVhdHVyZSBtYW5hZ2VyIHNvXHJcbiAgICAgICAgLy8gcmFpc2UgdGhlIG9uQ29uZmlndXJlZCBldmVudCBvbmNlIHdlJ3ZlIHJlY2VpdmVkIGNvbmZpZ0NoYW5nZWRWMS5cclxuICAgICAgICB0aGlzLm9uQ29uZmlndXJlZFJhaXNlci5vbkNvbmZpZ3VyZWQoKTtcclxuICAgIH1cclxuXHJcbiAgICBvbkNvbmZpZ1VwZGF0ZWRWMyhtZXNzYWdlOiBNZXNzYWdlKSB7XHJcbiAgICAgICAgdGhpcy5vbkNvbmZpZ1VwZGF0ZWQ8Q29uZmlnQ2hhbmdlZFYzPihtZXNzYWdlLCBuZXcgQ29uZmlnVXBkYXRlclYzKHRoaXMuY29uZmlnKSwgbmV3IENvbmZpZ05vdGlmaWVyVjModGhpcy5jb25maWdOb3RpZmllcikpO1xyXG4gICAgfVxyXG5cclxuICAgIG9uQ29uZmlnVXBkYXRlZFY0KG1lc3NhZ2U6IE1lc3NhZ2UpIHtcclxuICAgICAgICB0aGlzLm9uQ29uZmlnVXBkYXRlZDxDb25maWdDaGFuZ2VkVjQ+KG1lc3NhZ2UsIG5ldyBDb25maWdVcGRhdGVyVjQodGhpcy5jb25maWcpLCBuZXcgQ29uZmlnTm90aWZpZXJWNCh0aGlzLmNvbmZpZ05vdGlmaWVyKSk7XHJcbiAgICB9XHJcblxyXG4gICAgb25Db25maWdVcGRhdGVkVjUobWVzc2FnZTogTWVzc2FnZSkge1xyXG4gICAgICAgIHRoaXMub25Db25maWdVcGRhdGVkPENvbmZpZ0NoYW5nZWRWNT4obWVzc2FnZSwgbmV3IENvbmZpZ1VwZGF0ZXJWNSh0aGlzLmNvbmZpZyksIG5ldyBDb25maWdOb3RpZmllclY1KHRoaXMuY29uZmlnTm90aWZpZXIpKTtcclxuICAgIH1cclxuXHJcbiAgICBvbkNvbmZpZ1VwZGF0ZWRWNyhtZXNzYWdlOiBNZXNzYWdlKSB7XHJcbiAgICAgICAgdGhpcy5vbkNvbmZpZ1VwZGF0ZWQ8Q29uZmlnQ2hhbmdlZFY3PihtZXNzYWdlLCBuZXcgQ29uZmlnVXBkYXRlclY3KHRoaXMuY29uZmlnKSwgbmV3IENvbmZpZ05vdGlmaWVyVjcodGhpcy5jb25maWdOb3RpZmllcikpO1xyXG4gICAgfVxyXG5cclxuICAgIG9uQ29uZmlnVXBkYXRlZFY4KG1lc3NhZ2U6IE1lc3NhZ2UpIHtcclxuICAgICAgICB0aGlzLm9uQ29uZmlnVXBkYXRlZDxDb25maWdDaGFuZ2VkVjg+KG1lc3NhZ2UsIG5ldyBDb25maWdVcGRhdGVyVjgodGhpcy5jb25maWcpLCBuZXcgQ29uZmlnTm90aWZpZXJWOCh0aGlzLmNvbmZpZ05vdGlmaWVyKSk7XHJcbiAgICB9XHJcblxyXG4gICAgb25Db25maWdVcGRhdGVkVjkobWVzc2FnZTogTWVzc2FnZSkge1xyXG4gICAgICAgIHRoaXMub25Db25maWdVcGRhdGVkPENvbmZpZ0NoYW5nZWRWOT4obWVzc2FnZSwgbmV3IENvbmZpZ1VwZGF0ZXJWOSh0aGlzLmNvbmZpZyksIG5ldyBDb25maWdOb3RpZmllclY5KHRoaXMuY29uZmlnTm90aWZpZXIpKTtcclxuICAgIH1cclxuXHJcbiAgICBvbkNvbmZpZ1VwZGF0ZWRWMTEobWVzc2FnZTogTWVzc2FnZSkge1xyXG4gICAgICAgIHRoaXMub25Db25maWdVcGRhdGVkPENvbmZpZ0NoYW5nZWRWMTE+KG1lc3NhZ2UsIG5ldyBDb25maWdVcGRhdGVyVjExKHRoaXMuY29uZmlnKSwgbmV3IENvbmZpZ05vdGlmaWVyVjExKHRoaXMuY29uZmlnTm90aWZpZXIpKTtcclxuICAgIH1cclxuXHJcbiAgICBvbkNvbmZpZ1VwZGF0ZWRWMTIobWVzc2FnZTogTWVzc2FnZSkge1xyXG4gICAgICAgIHRoaXMub25Db25maWdVcGRhdGVkPENvbmZpZ0NoYW5nZWRWMTI+KG1lc3NhZ2UsIG5ldyBDb25maWdVcGRhdGVyVjEyKHRoaXMuY29uZmlnKSwgbmV3IENvbmZpZ05vdGlmaWVyVjEyKHRoaXMuY29uZmlnTm90aWZpZXIpKTtcclxuICAgIH1cclxuXHJcbiAgICBvblJlcHV0YXRpb25VcGRhdGVkVjMobWVzc2FnZSA6IE1lc3NhZ2UpIHtcclxuICAgICAgICBjb25zdCByZXB1dGF0aW9uQ2hhbmdlZCA9IG1lc3NhZ2UucGF5bG9hZCBhcyBSZXB1dGF0aW9uQ2hhbmdlZFYzO1xyXG4gICAgICAgIHRoaXMuY29uZmlnLnJlcHV0YWJsZVNpdGVzID0gcmVwdXRhdGlvbkNoYW5nZWQ7XHJcbiAgICAgICAgdGhpcy5jb25maWdOb3RpZmllci5vbkNvbmZpZ0NoYW5nZWQoQ29uZmlnS2V5LnJlcHV0YWJsZVVybHMpO1xyXG4gICAgfVxyXG59XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2NvbmZpZy11cGRhdGVyLnRzIiwiLy8gQ29weXJpZ2h0IChjKSAyMDE4IEJyb21pdW0sIEluYy5cclxuLy8gVXNlIG9mIHRoZSBCcm9taXVtLCBJbmMuIHNvZnR3YXJlIHJlcXVpcmVzIGEgbGljZW5zZSBhZ3JlZW1lbnQgd2l0aCBCcm9taXVtLCBJbmMuIG9yIGFuIGF1dGhvcml6ZWQgcmVzZWxsZXIuXHJcblxyXG5pbXBvcnQgeyBzb21lIH0gZnJvbSBcIi4vbWF5YmVcIjtcclxuXHJcbmV4cG9ydCB0eXBlIFNlcmlhbGl6ZWRQaGlzaGluZ0dyb3VwcyA9IHtcclxuICAgIFtrZXk6IHN0cmluZ106IHN0cmluZ1tdXHJcbn1cclxuXHJcbmV4cG9ydCB0eXBlIFNlcmlhbGl6ZWRQaGlzaGluZ1NvdXJjZVNpdGVzID0ge1xyXG4gICAgdmVyc2lvbjogbnVtYmVyLFxyXG4gICAgcGhpc2hpbmdTb3VyY2VTaXRlczogc3RyaW5nW10sXHJcbiAgICB3ZWJNYWlsOiBzdHJpbmdbXSxcclxuICAgIGdyb3VwczogU2VyaWFsaXplZFBoaXNoaW5nR3JvdXBzLFxyXG4gICAgYWR2YW5jZWQ6IHtcclxuICAgICAgICByZXF1aXJlQXV0aDogc3RyaW5nW10sXHJcbiAgICAgICAgYXV0aDogc3RyaW5nW10sXHJcbiAgICAgICAgaGV1cmlzdGljczoge1xyXG4gICAgICAgICAgICBwYWdlSW5wdXRFdmVudHM6IGJvb2xlYW4sXHJcbiAgICAgICAgICAgIG5hdmlnYXRpb25SZXF1ZXN0VHlwZTogYm9vbGVhblxyXG4gICAgICAgIH1cclxuICAgICAgICBuZXdUYWI6IHtcclxuICAgICAgICAgICAgbmF2aWdhdGU6IHtcclxuICAgICAgICAgICAgICAgIGdldDogc3RyaW5nW10sXHJcbiAgICAgICAgICAgICAgICBwb3N0OiBzdHJpbmdbXVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICByZWRpcmVjdDoge1xyXG4gICAgICAgICAgICAgICAgZ2V0OiBzdHJpbmdbXSxcclxuICAgICAgICAgICAgICAgIHBvc3Q6IHN0cmluZ1tdXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHNhbWVUYWI6IHtcclxuICAgICAgICAgICAgbmF2aWdhdGU6IHtcclxuICAgICAgICAgICAgICAgIGdldDogc3RyaW5nW10sXHJcbiAgICAgICAgICAgICAgICBwb3N0OiBzdHJpbmdbXVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICByZWRpcmVjdDoge1xyXG4gICAgICAgICAgICAgICAgZ2V0OiBzdHJpbmdbXSxcclxuICAgICAgICAgICAgICAgIHBvc3Q6IHN0cmluZ1tdXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaXNWYWxpZFNlcmlhbGl6ZWRQaGlzaGluZ1NvdXJjZVNpdGVzKHZhbHVlOiBhbnkpOiB2YWx1ZSBpcyBTZXJpYWxpemVkUGhpc2hpbmdTb3VyY2VTaXRlcyB7XHJcbiAgICBjb25zdCBpc1ZhbGlkTWV0aG9kRGF0YSA9ICh2YWx1ZTogYW55KSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIHNvbWUodmFsdWUuZ2V0KSAmJlxyXG4gICAgICAgICAgICBzb21lKHZhbHVlLnBvc3QpO1xyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdCBpc1ZhbGlkTmF2RGF0YSA9ICh2YWx1ZTogYW55KSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIHNvbWUodmFsdWUubmF2aWdhdGUpICYmXHJcbiAgICAgICAgICAgIHNvbWUodmFsdWUucmVkaXJlY3QpICYmXHJcbiAgICAgICAgICAgIGlzVmFsaWRNZXRob2REYXRhKHZhbHVlLm5hdmlnYXRlKSAmJlxyXG4gICAgICAgICAgICBpc1ZhbGlkTWV0aG9kRGF0YSh2YWx1ZS5yZWRpcmVjdCk7XHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IGlzVmFsaWRIZXVyaXN0aWNzID0gKHZhbHVlOiBhbnkpID0+IHtcclxuICAgICAgICByZXR1cm4gc29tZSh2YWx1ZS5wYWdlSW5wdXRFdmVudHMpICYmXHJcbiAgICAgICAgICAgIHNvbWUodmFsdWUubmF2aWdhdGlvblJlcXVlc3RUeXBlKTtcclxuICAgIH07XHJcblxyXG4gICAgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgT2JqZWN0ICYmXHJcbiAgICAgICAgc29tZSh2YWx1ZS52ZXJzaW9uKSAmJlxyXG4gICAgICAgIHNvbWUodmFsdWUucGhpc2hpbmdTb3VyY2VTaXRlcykgJiZcclxuICAgICAgICBzb21lKHZhbHVlLndlYk1haWwpICYmXHJcbiAgICAgICAgc29tZSh2YWx1ZS5hZHZhbmNlZCkgJiZcclxuICAgICAgICBzb21lKHZhbHVlLmFkdmFuY2VkLnJlcXVpcmVBdXRoKSAmJlxyXG4gICAgICAgIHNvbWUodmFsdWUuYWR2YW5jZWQuYXV0aCkgJiZcclxuICAgICAgICBzb21lKHZhbHVlLmFkdmFuY2VkLmhldXJpc3RpY3MpICYmXHJcbiAgICAgICAgc29tZSh2YWx1ZS5hZHZhbmNlZC5uZXdUYWIpICYmXHJcbiAgICAgICAgc29tZSh2YWx1ZS5hZHZhbmNlZC5zYW1lVGFiKSAmJlxyXG4gICAgICAgIGlzVmFsaWRIZXVyaXN0aWNzKHZhbHVlLmFkdmFuY2VkLmhldXJpc3RpY3MpICYmXHJcbiAgICAgICAgaXNWYWxpZE5hdkRhdGEodmFsdWUuYWR2YW5jZWQubmV3VGFiKSAmJlxyXG4gICAgICAgIGlzVmFsaWROYXZEYXRhKHZhbHVlLmFkdmFuY2VkLnNhbWVUYWIpO1xyXG59XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4uL2xpYi9ob3N0L3NlcmlhbGl6ZWQtcGhpc2hpbmctc291cmNlLXNpdGVzLnRzIiwiLy8gQ29weXJpZ2h0IChjKSAyMDE4IEJyb21pdW0sIEluYy5cclxuLy8gVXNlIG9mIHRoZSBCcm9taXVtLCBJbmMuIHNvZnR3YXJlIHJlcXVpcmVzIGEgbGljZW5zZSBhZ3JlZW1lbnQgd2l0aCBCcm9taXVtLCBJbmMuIG9yIGFuIGF1dGhvcml6ZWQgcmVzZWxsZXIuXHJcblxyXG4vLy8gPHJlZmVyZW5jZSB0eXBlcz1cImNocm9tZVwiLz5cclxuaW1wb3J0IHsgc29tZSwgTWF5YmUsIG5vbmUgfSBmcm9tIFwiLi9tYXliZVwiO1xyXG5pbXBvcnQgeyBsb2dFcnJvciB9IGZyb20gXCIuL2xvZ1wiO1xyXG5pbXBvcnQgeyBCcm93c2VyIH0gZnJvbSBcIi4vYnJvd3NlclwiO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHNldE5vcm1hbEJhZGdlKCk6IHZvaWQge1xyXG4gICAgY2hyb21lLmJyb3dzZXJBY3Rpb24uc2V0QmFkZ2VUZXh0KHt0ZXh0OiBcIlwifSlcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHNldEVycm9yQmFkZ2UoKTogdm9pZCB7XHJcbiAgICBjaHJvbWUuYnJvd3NlckFjdGlvbi5zZXRCYWRnZUJhY2tncm91bmRDb2xvcih7Y29sb3I6IFsyNTUsIDAsIDAsIDI1NV19KTtcclxuICAgIGNocm9tZS5icm93c2VyQWN0aW9uLnNldEJhZGdlVGV4dCh7dGV4dDogXCIhXCJ9KVxyXG59XHJcblxyXG5jb25zdCBub3JtYWxJY29uID0ge1xyXG4gICAgcGF0aDoge1xyXG4gICAgICAgIDE2OiBcImljb25zL2ljb24xNi5wbmdcIixcclxuICAgICAgICAzMjogXCJpY29ucy9pY29uMzIucG5nXCIsXHJcbiAgICAgICAgNjQ6IFwiaWNvbnMvaWNvbjY0LnBuZ1wiXHJcbiAgICB9XHJcbn07XHJcbmNvbnN0IG5vcm1hbEVkZ2VJY29uID0geyBwYXRoOiBcImljb25zL2ljb242NC5wbmdcIiB9O1xyXG5cclxuY29uc3QgZXJyb3JJY29uID0ge1xyXG4gICAgcGF0aDoge1xyXG4gICAgICAgIDE2OiBcImljb25zL2dyZXlzY2FsZV9pY29uMTYucG5nXCIsXHJcbiAgICAgICAgMzI6IFwiaWNvbnMvZ3JleXNjYWxlX2ljb24zMi5wbmdcIixcclxuICAgICAgICA2NDogXCJpY29ucy9ncmV5c2NhbGVfaWNvbjY0LnBuZ1wiXHJcbiAgICB9XHJcbn07XHJcbmNvbnN0IGVycm9yRWRnZUljb24gPSB7IHBhdGg6IFwiaWNvbnMvZ3JleXNjYWxlX2ljb242NC5wbmdcIiB9O1xyXG5cclxuZXhwb3J0IGVudW0gSWNvblR5cGUge1xyXG4gICAgbm9ybWFsLFxyXG4gICAgZXJyb3JcclxufVxyXG5cclxudHlwZSBJY29uR2V0dGVyID0gKCkgPT4gY2hyb21lLmJyb3dzZXJBY3Rpb24uVGFiSWNvbkRldGFpbHM7XHJcblxyXG5leHBvcnQgY2xhc3MgSWNvblVwZGF0ZXIge1xyXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBicm93c2VyOiBNYXliZTxCcm93c2VyPiwgcHJpdmF0ZSBjdXJyZW50SWNvblR5cGU6IEljb25UeXBlKSB7XHJcbiAgICAgICAgLy8gRWRnZSB3YW50cyBkaWZmZXJlbnQgaWNvbiBzaXplcyBhbmQgd2lsbCBlcnJvciBpZiBnaXZlbiB0aGUgd3JvbmdcclxuICAgICAgICAvLyBzaXplcywgc28gZG9uJ3QgZ2l2ZSBhbnkgc2l6ZSBvcHRpb25zIGZvciBFZGdlIGF0IHRoZSBtb21lbnQuXHJcbiAgICAgICAgdGhpcy5nZXROb3JtYWxJY29uID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHNvbWUodGhpcy5icm93c2VyKSAmJiB0aGlzLmJyb3dzZXIgIT09IEJyb3dzZXIuZWRnZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBub3JtYWxJY29uO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gSWYgdGhpcy5icm93c2VyID09PSB1bmRlZmluZWQgdGhlbiByZXR1cm4gdGhlIEVkZ2UgaWNvbiBzaW5jZVxyXG4gICAgICAgICAgICAgICAgLy8gaXQnbGwgd29yayBmb3IgYWxsIGJyb3dzZXJzIGFuZCB3ZSBuZWVkIHRvIGJlIGFibGUgdG8gc2V0XHJcbiAgICAgICAgICAgICAgICAvLyB0aGUgaWNvbiwgZXBzZWNpYWxseSBpZiB3ZSdyZSBpbiBhbiBlcnJvcmVkIHN0YXRlLlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5vcm1hbEVkZ2VJY29uO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuZ2V0RXJyb3JJY29uID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHNvbWUodGhpcy5icm93c2VyKSAmJiB0aGlzLmJyb3dzZXIgIT09IEJyb3dzZXIuZWRnZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBlcnJvckljb247XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3JFZGdlSWNvbjtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdGhpcy51cGRhdGVJY29uKHRoaXMuY3VycmVudEljb25UeXBlKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGNob29zZUljb24odHlwZTogSWNvblR5cGUpOiBjaHJvbWUuYnJvd3NlckFjdGlvbi5UYWJJY29uRGV0YWlscyB7XHJcbiAgICAgICAgc3dpdGNoICh0eXBlKSB7XHJcbiAgICAgICAgICAgIGNhc2UgSWNvblR5cGUubm9ybWFsOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Tm9ybWFsSWNvbigpO1xyXG4gICAgICAgICAgICBjYXNlIEljb25UeXBlLmVycm9yOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0RXJyb3JJY29uKCk7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRFcnJvckljb24oKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0SWNvbigpOiBJY29uVHlwZSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY3VycmVudEljb25UeXBlO1xyXG4gICAgfVxyXG5cclxuICAgIHNldEljb24obmV3SWNvblR5cGU6IEljb25UeXBlKSB7XHJcbiAgICAgICAgaWYgKHNvbWUodGhpcy5wZW5kaW5nSWNvblR5cGUpKSB7XHJcbiAgICAgICAgICAgIHRoaXMucGVuZGluZ0ljb25UeXBlID0gbmV3SWNvblR5cGU7XHJcbiAgICAgICAgfSBlbHNlIGlmIChuZXdJY29uVHlwZSAhPT0gdGhpcy5jdXJyZW50SWNvblR5cGUpIHtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGVJY29uKG5ld0ljb25UeXBlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSB1cGRhdGVJY29uKG5ld0ljb25UeXBlOiBJY29uVHlwZSkge1xyXG4gICAgICAgIHRoaXMucGVuZGluZ0ljb25UeXBlID0gbmV3SWNvblR5cGU7XHJcbiAgICAgICAgY29uc3QgbmV3SWNvbiA9IHRoaXMuY2hvb3NlSWNvbihuZXdJY29uVHlwZSk7XHJcblxyXG4gICAgICAgIGNocm9tZS5icm93c2VyQWN0aW9uLnNldEljb24obmV3SWNvbiwgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRJY29uVHlwZSA9IG5ld0ljb25UeXBlO1xyXG4gICAgICAgICAgICBpZiAobm9uZSh0aGlzLnBlbmRpbmdJY29uVHlwZSkpIHtcclxuICAgICAgICAgICAgICAgIGxvZ0Vycm9yKG5ldyBFcnJvciggXCJ1cGRhdGVJY29uIGNhbGxiYWNrOiB1bmV4cGVjdGVkIHVuZGVmaW5lZCBwZW5kaW5nSWNvblR5cGVcIikpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMucGVuZGluZ0ljb25UeXBlID09PSB0aGlzLmN1cnJlbnRJY29uVHlwZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wZW5kaW5nSWNvblR5cGUgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUljb24odGhpcy5wZW5kaW5nSWNvblR5cGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBwZW5kaW5nSWNvblR5cGU6IE1heWJlPEljb25UeXBlPjtcclxuICAgIHByaXZhdGUgZ2V0Tm9ybWFsSWNvbjogSWNvbkdldHRlcjtcclxuICAgIHByaXZhdGUgZ2V0RXJyb3JJY29uOiBJY29uR2V0dGVyO1xyXG59XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vYnJvd3Nlci1hY3Rpb24udHMiLCIvLyBDb3B5cmlnaHQgKGMpIDIwMTggQnJvbWl1bSwgSW5jLlxyXG4vLyBVc2Ugb2YgdGhlIEJyb21pdW0sIEluYy4gc29mdHdhcmUgcmVxdWlyZXMgYSBsaWNlbnNlIGFncmVlbWVudCB3aXRoIEJyb21pdW0sIEluYy4gb3IgYW4gYXV0aG9yaXplZCByZXNlbGxlci5cclxuXHJcbi8vLyA8cmVmZXJlbmNlIHR5cGVzPVwiY2hyb21lXCIvPlxyXG5pbXBvcnQgeyBQYWdlUG9ydFJlc29sdmVyLCBnZXRCcm93c2VyU3BlY2lmaWNFeHRlbnNpb25QYWdlUG9ydFJlc29sdmVyIH0gZnJvbSBcIi4vcGFnZS1wb3J0LXJlc29sdmVyXCI7XHJcbmltcG9ydCB7IFRhYklkIH0gZnJvbSBcIi4vY29tbW9uLXR5cGVzXCI7XHJcbmltcG9ydCB7IG1ha2VQcm9taXNlIH0gZnJvbSBcIi4vcHJvbWlzZS11dGlsc1wiO1xyXG5pbXBvcnQgeyBNZXNzYWdlVHlwZSB9IGZyb20gXCIuL21lc3NhZ2UtdHlwZXNcIjtcclxuaW1wb3J0IHsgTWVzc2FnZSwgRXh0ZXJuYWxBcHBMaW5rUmVxdWVzdFYxLCBFeHRlcm5hbEFwcExpbmtSZXNwb25zZVYxLCBNZXNzYWdlUGF5bG9hZCB9IGZyb20gXCIuL21lc3NhZ2VzXCI7XHJcbmltcG9ydCB7IGxvZyB9IGZyb20gXCIuL2xvZ1wiO1xyXG5pbXBvcnQgeyB0b1N0cmluZyB9IGZyb20gXCIuL3N0cmluZy11dGlsc1wiO1xyXG5pbXBvcnQgeyBVUkwsIHBhcnNlVXJsLCBpc1NhbWVVcmwsIFVybENvbXBhcmVPcHRpb25zLCBVUkxUb1N0cmluZyB9IGZyb20gXCIuL3VybC11dGlsc1wiO1xyXG5pbXBvcnQgeyBzb21lLCBNYXliZSwgbm9uZSB9IGZyb20gXCIuL21heWJlXCI7XHJcbmltcG9ydCB7IHJlYWRQb3J0UGFnZVVybCB9IGZyb20gXCIuL3BvcnQtdXRpbHNcIjtcclxuaW1wb3J0IHsgaG9zdENvbnN0YW50cyB9IGZyb20gXCIuL2hvc3QtY29uc3RhbnRzXCI7XHJcbmltcG9ydCB7IFBhZ2VQb3J0Q29udHJvbGxlciB9IGZyb20gXCIuL3BhZ2UtcG9ydC1jb250cm9sbGVyXCI7XHJcbmltcG9ydCB7IEVycm9ySGFuZGxlciB9IGZyb20gXCIuL2Vycm9yLWhhbmRsZXJcIjtcclxuaW1wb3J0IHsgQnJvd3NlciB9IGZyb20gXCIuL2Jyb3dzZXJcIjtcclxuaW1wb3J0IHsgSU9uQ29uZmlndXJlZCB9IGZyb20gXCIuL29uLWNvbmZpZ3VyZWRcIjtcclxuaW1wb3J0IHsgcmVtb3ZlRXh0ZW5zaW9uUGFnZUZyb21IaXN0b3J5QWZ0ZXJDbG9zaW5nIH0gZnJvbSBcIi4vaGlzdG9yeVwiO1xyXG5cclxudHlwZSBPblBhZ2VEaXNjb25uZWN0ZWQgPSAocG9ydDogY2hyb21lLnJ1bnRpbWUuUG9ydCwgdGFiSWQ6IFRhYklkKSA9PiB2b2lkO1xyXG50eXBlIEJsb2NrTGluayA9IChsaW5rU3BlYzogTWF5YmU8VVJMPiwgdGFiSWQ6IFRhYklkKSA9PiBVUkw7XHJcblxyXG5lbnVtIEJsb2NrTGlua1R5cGUge1xyXG4gICAgYWxsb3csXHJcbiAgICByZXRyeVxyXG59XHJcblxyXG5jbGFzcyBFeHRlcm5hbEFwcExpbmtQYWdlQ29udHJvbGxlciB7XHJcbiAgICBjb25zdHJ1Y3RvcihcclxuICAgICAgICAgICAgcmVhZG9ubHkgdGFiSWQ6IFRhYklkLFxyXG4gICAgICAgICAgICBwb3J0OiBQcm9taXNlPGNocm9tZS5ydW50aW1lLlBvcnQ+LFxyXG4gICAgICAgICAgICBwcml2YXRlIG9uRGlzY29ubmVjdDogT25QYWdlRGlzY29ubmVjdGVkLFxyXG4gICAgICAgICAgICBwcml2YXRlIGJsb2NrTGluazogQmxvY2tMaW5rLFxyXG4gICAgICAgICAgICBwcml2YXRlIHJlYWRvbmx5IHNob3VsZEJsb2NrTGlua1R5cGU6IEJsb2NrTGlua1R5cGUsXHJcbiAgICAgICAgICAgIG9uQ29uZmlndXJlZDogSU9uQ29uZmlndXJlZCkge1xyXG4gICAgICAgIHRoaXMucGFnZVBvcnRDb250cm9sbGVyID0gbmV3IFBhZ2VQb3J0Q29udHJvbGxlcihcclxuICAgICAgICAgICAgICAgIHRhYklkLCBwb3J0LFxyXG4gICAgICAgICAgICAgICAgKHBvcnQpID0+IHRoaXMub25QYWdlQ29ubmVjdGVkKHBvcnQpLFxyXG4gICAgICAgICAgICAgICAgKHBvcnQpID0+IHRoaXMub25QYWdlRGlzY29ubmVjdGVkKHBvcnQpLFxyXG4gICAgICAgICAgICAgICAgb25Db25maWd1cmVkKTtcclxuICAgICAgICB0aGlzLnBhZ2VQb3J0Q29udHJvbGxlci5yZWdpc3Rlck1lc3NhZ2VIYW5kbGVyKFxyXG4gICAgICAgICAgICAgICAgTWVzc2FnZVR5cGUuZXh0ZXJuYWxBcHBMaW5rUmVxdWVzdFYxLFxyXG4gICAgICAgICAgICAgICAgKG1lc3NhZ2UpID0+IHRoaXMuaGFuZGxlUmVxdWVzdChtZXNzYWdlKSk7XHJcbiAgICAgICAgdGhpcy5wYWdlUG9ydENvbnRyb2xsZXIuY29ubmVjdCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZ2V0IHNob3VsZFJldHJ5TGluaygpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zaG91bGRCbG9ja0xpbmtUeXBlID09PSBCbG9ja0xpbmtUeXBlLnJldHJ5O1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2VuZE1lc3NhZ2UodHlwZTogTWVzc2FnZVR5cGUsIHBheWxvYWQ6IE1lc3NhZ2VQYXlsb2FkKSB7XHJcbiAgICAgICAgdGhpcy5wYWdlUG9ydENvbnRyb2xsZXIuc2VuZE1lc3NhZ2UodHlwZSwgcGF5bG9hZCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBoYW5kbGVSZXF1ZXN0KG1lc3NhZ2U6IE1lc3NhZ2UpIHtcclxuICAgICAgICBjb25zdCByZXF1ZXN0ID0gbWVzc2FnZS5wYXlsb2FkIGFzIEV4dGVybmFsQXBwTGlua1JlcXVlc3RWMTtcclxuICAgICAgICBjb25zdCBsaW5rU3BlYyA9IHJlcXVlc3QubGlua1NwZWM7XHJcbiAgICAgICAgY29uc3QgbGlua1VSTCA9IHBhcnNlVXJsKGxpbmtTcGVjKTtcclxuXHJcbiAgICAgICAgbG9nKGBFeHRlcm5hbEFwcExpbmtQYWdlQ29udHJvbGxlci5oYW5kbGVFeHRlcm5hbEFwcExpbms6ICR7dG9TdHJpbmcoe1xyXG4gICAgICAgICAgICB0YWJJZDogdGhpcy50YWJJZCxcclxuICAgICAgICAgICAgbGlua1NwZWM6IHJlcXVlc3QubGlua1NwZWMsXHJcbiAgICAgICAgICAgIGV4dGVybmFsQXBwTmFtZTogcmVxdWVzdC5leHRlcm5hbEFwcE5hbWUsXHJcbiAgICAgICAgICAgIG5hdmlnYXRlVG9MaW5rOiBzb21lKGxpbmtVUkwpLFxyXG4gICAgICAgICAgICBzaG91bGRSZXRyeUxpbms6IHRoaXMuc2hvdWxkUmV0cnlMaW5rXHJcbiAgICAgICAgfSl9YCk7XHJcblxyXG4gICAgICAgIGxldCBuYXZpZ2F0ZVRvVVJMIDogTWF5YmU8VVJMPjtcclxuICAgICAgICBpZiAoc29tZShsaW5rVVJMKSkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5zaG91bGRSZXRyeUxpbmspIHtcclxuICAgICAgICAgICAgICAgIGlmIChzb21lKHRoaXMuc2VuZGVyVVJMKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG5hdmlnYXRlVG9VUkwgPSB0aGlzLnNlbmRlclVSTDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIG5hdmlnYXRlVG9VUkwgPSBsaW5rVVJMO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnNlbmRSZXNwb25zZShzb21lKG5hdmlnYXRlVG9VUkwpID8gbmF2aWdhdGVUb1VSTCA6IHRoaXMuYmxvY2tMaW5rKGxpbmtVUkwsIHRoaXMudGFiSWQpKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNlbmRSZXNwb25zZShuYXZpZ2F0ZVRvVVJMOiBVUkwpIHtcclxuICAgICAgICBjb25zdCBuYXZpZ2F0ZVRvU3BlYyA9IFVSTFRvU3RyaW5nKG5hdmlnYXRlVG9VUkwpO1xyXG5cclxuICAgICAgICB0aGlzLnNlbmRNZXNzYWdlKFxyXG4gICAgICAgICAgICAgICAgTWVzc2FnZVR5cGUuZXh0ZXJuYWxBcHBMaW5rUmVzcG9uc2VWMSwgXHJcbiAgICAgICAgICAgICAgICBuZXcgRXh0ZXJuYWxBcHBMaW5rUmVzcG9uc2VWMShuYXZpZ2F0ZVRvU3BlYykpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgb25QYWdlQ29ubmVjdGVkKHBvcnQ6IGNocm9tZS5ydW50aW1lLlBvcnQpIHtcclxuICAgICAgICB0aGlzLnNlbmRlclVSTCA9IHJlYWRQb3J0UGFnZVVybChwb3J0KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIG9uUGFnZURpc2Nvbm5lY3RlZChwb3J0OiBjaHJvbWUucnVudGltZS5Qb3J0KSB7XHJcbiAgICAgICAgdGhpcy5vbkRpc2Nvbm5lY3QocG9ydCwgdGhpcy50YWJJZCk7XHJcbiAgICB9XHJcblxyXG4gICAgcGFnZVBvcnRDb250cm9sbGVyOiBQYWdlUG9ydENvbnRyb2xsZXI7XHJcbiAgICBwcml2YXRlIHNlbmRlclVSTCA6IE1heWJlPFVSTD47XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBFeHRlcm5hbEFwcExpbmtDb250cm9sbGVyIHtcclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgICAgICBwcml2YXRlIGJyb3dzZXI6IE1heWJlPEJyb3dzZXI+LFxyXG4gICAgICAgICAgICBwcml2YXRlIGJsb2NrTGluazogQmxvY2tMaW5rLFxyXG4gICAgICAgICAgICBwcml2YXRlIG9uQ29uZmlndXJlZDogSU9uQ29uZmlndXJlZCxcclxuICAgICAgICAgICAgZXJyb3JIYW5kbGVyOiBFcnJvckhhbmRsZXIpIHtcclxuICAgICAgICB0aGlzLmV4dGVybmFsQXBwTGlua1BhZ2UgPSBwYXJzZVVybChjaHJvbWUucnVudGltZS5nZXRVUkwoaG9zdENvbnN0YW50cy5leHRlcm5hbEFwcExpbmtQYWdlKSk7XHJcbiAgICAgICAgdGhpcy5wb3J0UmVzb2x2ZXIgPSBnZXRCcm93c2VyU3BlY2lmaWNFeHRlbnNpb25QYWdlUG9ydFJlc29sdmVyKFxyXG4gICAgICAgICAgICB0aGlzLmJyb3dzZXIsXHJcbiAgICAgICAgICAgIGhvc3RDb25zdGFudHMuZXh0ZXJuYWxBcHBMaW5rUGFnZVBvcnROYW1lLFxyXG4gICAgICAgICAgICAodGFiSWQsIHBvcnQpID0+IHRoaXMub25VbnJlc29sdmVkUG9ydENvbm5lY3RlZCh0YWJJZCwgcG9ydCksXHJcbiAgICAgICAgICAgICh1cmwpID0+IHRoaXMuaXNFeHRlcm5hbEFwcExpbmtVUkwodXJsKSk7XHJcbiAgICAgICAgZXJyb3JIYW5kbGVyLm9uRG9ybWFudFN0YXRlQ2hhbmdlZC5yZWdpc3RlckV2ZW50SGFuZGxlcih0aGlzLm9uRG9ybWFudFN0YXRlQ2hhbmdlZC5iaW5kKHRoaXMpKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIG9uRG9ybWFudFN0YXRlQ2hhbmdlZChkb3JtYW50U3RhdGU6IGJvb2xlYW4pIHtcclxuICAgICAgICB0aGlzLmlzRG9ybWFudCA9IGRvcm1hbnRTdGF0ZTtcclxuICAgIH1cclxuXHJcbiAgICBpc0V4dGVybmFsQXBwTGlua1VSTCh1cmw6IE1heWJlPFVSTD4pOiBib29sZWFuIHtcclxuICAgICAgICBpZiAobm9uZSh1cmwpIHx8IG5vbmUodGhpcy5leHRlcm5hbEFwcExpbmtQYWdlKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBpc1NhbWVVcmwodXJsLCB0aGlzLmV4dGVybmFsQXBwTGlua1BhZ2UsIFVybENvbXBhcmVPcHRpb25zLklnbm9yZVNlYXJjaFBhcmFtcyk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0RXh0ZXJuYWxBcHBMaW5rVVJMKCk6IE1heWJlPFVSTD4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmV4dGVybmFsQXBwTGlua1BhZ2U7XHJcbiAgICB9XHJcblxyXG4gICAgb25FeHRlcm5hbEFwcExpbmtEZXRlY3RlZCh0YWJJZDogVGFiSWQpIHtcclxuICAgICAgICBjb25zdCBwb3J0ID0gdGhpcy5wb3J0UmVzb2x2ZXIucmVzb2x2ZVBvcnQodGFiSWQpO1xyXG4gICAgICAgIHRoaXMuYWRkUGFnZUNvbnRyb2xsZXIodGFiSWQsIHBvcnQsIEJsb2NrTGlua1R5cGUuYWxsb3cpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYWRkUGFnZUNvbnRyb2xsZXIodGFiSWQ6IFRhYklkLCBwb3J0OiBQcm9taXNlPGNocm9tZS5ydW50aW1lLlBvcnQ+LCBcclxuICAgICAgICAgICAgc2hvdWxkQmxvY2tMaW5rOiBCbG9ja0xpbmtUeXBlKSB7XHJcbiAgICAgICAgY29uc3Qgb25Qb3J0RGlzY29ubmVjdGVkID0gKHBvcnQ6IGNocm9tZS5ydW50aW1lLlBvcnQsIHRhYklkOiBUYWJJZCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLm9uUG9ydERpc2Nvbm5lY3RlZChwb3J0LCB0YWJJZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHBhZ2VDb250cm9sbGVyID0gbmV3IEV4dGVybmFsQXBwTGlua1BhZ2VDb250cm9sbGVyKFxyXG4gICAgICAgICAgICB0YWJJZCxcclxuICAgICAgICAgICAgcG9ydCxcclxuICAgICAgICAgICAgb25Qb3J0RGlzY29ubmVjdGVkLFxyXG4gICAgICAgICAgICB0aGlzLmJsb2NrTGluayxcclxuICAgICAgICAgICAgc2hvdWxkQmxvY2tMaW5rLFxyXG4gICAgICAgICAgICB0aGlzLm9uQ29uZmlndXJlZFxyXG4gICAgICAgICk7XHJcbiAgICAgICAgdGhpcy5wYWdlQ29udHJvbGxlcnMuc2V0KHRhYklkLCBwYWdlQ29udHJvbGxlcik7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBvblBvcnREaXNjb25uZWN0ZWQocG9ydDogY2hyb21lLnJ1bnRpbWUuUG9ydCwgdGFiSWQ6IFRhYklkKSB7XHJcbiAgICAgICAgdGhpcy5wYWdlQ29udHJvbGxlcnMuZGVsZXRlKHRhYklkKTtcclxuICAgICAgICAvLyBOb3cgdGhhdCB0aGUgZXh0ZXJuYWwgYXBwIGxpbmsgY29udHJvbGxlciBoYXMgZGlzY29ubmVjdGVkIHdlIGNhbiByZW1vdmUgdGhlIGV4dGVybmFsIGFwcCBsaW5rIHBhZ2UgZnJvbSBoaXN0b3J5LlxyXG4gICAgICAgIC8vIG9uUG9ydERpc2Nvbm5lY3RlZCBjYWxsYmFja3MgZG9uJ3QgZ2V0IGNhbGxlZCBpbiBGaXJlZm94IGJ1dCBkZWxldGluZyBoaXN0b3J5IGluIEZpcmVmb3ggZG9lc24ndCBhZmZlY3QgdGhlXHJcbiAgICAgICAgLy8gJ2JhY2snIGJ1dHRvbiBpbiB0aGUgYnJvd3NlciBzbyBpdCdzIG5vdCBhcyBpbXBvcnRhbnQgYXMgZm9yIENocm9tZS5cclxuICAgICAgICByZW1vdmVFeHRlbnNpb25QYWdlRnJvbUhpc3RvcnlBZnRlckNsb3NpbmcodGhpcy5icm93c2VyLCBwb3J0KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIG9uVW5yZXNvbHZlZFBvcnRDb25uZWN0ZWQodGFiSWQ6IFRhYklkLCBwb3J0OiBjaHJvbWUucnVudGltZS5Qb3J0KSB7XHJcbiAgICAgICAgbG9nKGBFeHRlcm5hbEFwcExpbmtDb250cm9sbGVyLm9uVW5leHBlY3RlZFBvcnRDb25uZWN0ZWQ6IHRhYklkOiAke3RhYklkfWApO1xyXG4gICAgICAgIGlmICh0aGlzLmlzRG9ybWFudCkge1xyXG4gICAgICAgICAgICAvLyBEb24ndCBib3RoZXIgcmV0cnlpbmcgaWYgd2UncmUgZG9ybWFudCwganVzdCBhbGxvdy5cclxuICAgICAgICAgICAgbG9nKFwiRXh0ZW5zaW9uIGluIGEgZG9ybWFudCBzdGF0ZSBzbyBzZXQgQmxvY2tMaW5rVHlwZS5hbGxvdyBpbnN0ZWFkIG9mIHJldHJ5LlwiKVxyXG4gICAgICAgICAgICB0aGlzLmFkZFBhZ2VDb250cm9sbGVyKHRhYklkLCBtYWtlUHJvbWlzZSgoKSA9PiBwb3J0KSwgQmxvY2tMaW5rVHlwZS5hbGxvdyk7XHJcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmJyb3dzZXIgPT09IEJyb3dzZXIuY2hyb21lIHx8IHRoaXMuYnJvd3NlciA9PT0gQnJvd3Nlci5lZGdlQ2hyb21pdW0pIHtcclxuICAgICAgICAgICAgdGhpcy5hZGRQYWdlQ29udHJvbGxlcih0YWJJZCwgbWFrZVByb21pc2UoKCkgPT4gcG9ydCksIEJsb2NrTGlua1R5cGUucmV0cnkpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIEZpcmVmb3ggZG9lc24ndCBnZXQgb25CZWZvcmVSZXF1ZXN0IGZvciBleHRlbnNpb24gVVJMcyBzbyB3ZVxyXG4gICAgICAgICAgICAvLyBoYXZlIHRvIGFsbG93IHVucmVzb2x2ZWQgbmF2aWdhdGlvbnMgaGVyZSBhbmQgdGhlbiBpbnRlcmNlcHRcclxuICAgICAgICAgICAgLy8gdGhlIG5hdmlnYXRpb24gYXdheSBmcm9tIHRoZSBleHRlcm5hbCBhcHAgbGluayBwYWdlLlxyXG4gICAgICAgICAgICAvLyBFZGdlIGRvZXNuJ3QgZ2V0IG9uQmVmb3JlUmVxdWVzdCBmb3IgZXh0ZW5zaW9uIFVSTHMgZWl0aGVyLCBidXRcclxuICAgICAgICAgICAgLy8gaXQgZG9lc24ndCB1c2UgdGhpcyBjb250cm9sbGVyIGZvciBleHRlcm5hbCBsaW5rcy5cclxuICAgICAgICAgICAgdGhpcy5hZGRQYWdlQ29udHJvbGxlcih0YWJJZCwgbWFrZVByb21pc2UoKCkgPT4gcG9ydCksIEJsb2NrTGlua1R5cGUuYWxsb3cpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGV4dGVybmFsQXBwTGlua1BhZ2U6IE1heWJlPFVSTD4gPSB1bmRlZmluZWQ7XHJcbiAgICBwcml2YXRlIHBvcnRSZXNvbHZlcjogUGFnZVBvcnRSZXNvbHZlcjtcclxuICAgIHByaXZhdGUgcGFnZUNvbnRyb2xsZXJzID0gbmV3IE1hcDxUYWJJZCwgRXh0ZXJuYWxBcHBMaW5rUGFnZUNvbnRyb2xsZXI+KCk7XHJcbiAgICAvLyBTdGFydCBpbml0aWFsbHkgaW4gYW4gZXJyb3ItZnJlZSBzdGF0ZS5cclxuICAgIHByaXZhdGUgaXNEb3JtYW50ID0gZmFsc2U7XHJcbn0gXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vZXh0ZXJuYWwtYXBwLWxpbmstY29udHJvbGxlci50cyIsIi8vIENvcHlyaWdodCAoYykgMjAxOCBCcm9taXVtLCBJbmMuXHJcbi8vIFVzZSBvZiB0aGUgQnJvbWl1bSwgSW5jLiBzb2Z0d2FyZSByZXF1aXJlcyBhIGxpY2Vuc2UgYWdyZWVtZW50IHdpdGggQnJvbWl1bSwgSW5jLiBvciBhbiBhdXRob3JpemVkIHJlc2VsbGVyLlxyXG5cclxuaW1wb3J0IHsgUmVxdWVzdFJlc3BvbnNlSGFuZGxlciwgTWFrZVJlcXVlc3QgfSBmcm9tIFwiLi9yZXF1ZXN0LXJlc3BvbnNlLWhhbmRsZXJcIjtcclxuaW1wb3J0IHsgVVJMLCBVUkxUb1N0cmluZywgbWFrZVVybEhhc2hTZXQsIFVybENvbXBhcmVPcHRpb25zLCBpc0ZpbGVVcmwgfSBmcm9tIFwiLi91cmwtdXRpbHNcIjtcclxuaW1wb3J0IHsgTWVzc2FnZVR5cGUgfSBmcm9tIFwiLi9tZXNzYWdlLXR5cGVzXCI7XHJcbmltcG9ydCB7IE1lc3NhZ2UsIElzRmlsZVVSTFRydXN0ZWRSZXF1ZXN0VjEsIElzRmlsZVVSTFRydXN0ZWRSZXNwb25zZVYxLCBNZXNzYWdlUGF5bG9hZCB9IGZyb20gXCIuL21lc3NhZ2VzXCI7XHJcbmltcG9ydCB7IElkLCBJZEdlbmVyYXRvciB9IGZyb20gXCIuL2lkLWdlbmVyYXRvclwiO1xyXG5pbXBvcnQgeyByZWFkIH0gZnJvbSBcImZzXCI7XHJcbmltcG9ydCB7IElNZXNzYWdlUm91dGVyIH0gZnJvbSBcIi4vbWVzc2FnZS1yb3V0ZXJcIjtcclxuaW1wb3J0IHsgTWVzc2FnZVNlbmRlciB9IGZyb20gXCIuL21lc3NhZ2Utc2VuZGVyXCI7XHJcbmltcG9ydCB7IE1heWJlIH0gZnJvbSBcIi4vbWF5YmVcIjtcclxuaW1wb3J0IHsgQnJvd3NlciB9IGZyb20gXCIuL2Jyb3dzZXJcIjtcclxuaW1wb3J0IHsgQnJvd3NlckxhdW5jaEV2ZW50IH0gZnJvbSBcIi4vYmxvY2tlZC1wYWdlLWNvbnRyb2xsZXJcIjtcclxuXHJcbnR5cGUgSXNGaWxlVXJsVHJ1c3RlZFJlcXVlc3RIYW5kbGVyID0gUmVxdWVzdFJlc3BvbnNlSGFuZGxlcjxVUkwsIGJvb2xlYW4+O1xyXG5cclxuZnVuY3Rpb24gbWFrZUlzRmlsZVVybFRydXN0ZWRSZXF1ZXN0SGFuZGxlcihcclxuICAgICAgICBtZXNzYWdlUm91dGVyOiBJTWVzc2FnZVJvdXRlciwgXHJcbiAgICAgICAgbWVzc2FnZVNlbmRlcjogTWVzc2FnZVNlbmRlciwgXHJcbiAgICAgICAgaWRHZW5lcmF0b3I6IElkR2VuZXJhdG9yKTogSXNGaWxlVXJsVHJ1c3RlZFJlcXVlc3RIYW5kbGVyIHtcclxuICAgIGNvbnN0IG1ha2VSZXF1ZXN0ID0gKGlkOiBJZCwgZmlsZVVybDogVVJMKTogTWVzc2FnZVBheWxvYWQgPT4ge1xyXG4gICAgICAgIHJldHVybiBuZXcgSXNGaWxlVVJMVHJ1c3RlZFJlcXVlc3RWMShpZCwgVVJMVG9TdHJpbmcoZmlsZVVybCkpO1xyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdCByZWFkUmVzcG9uc2UgPSAobWVzc2FnZTogTWVzc2FnZSk6IFtJZCwgYm9vbGVhbl0gPT4ge1xyXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gbWVzc2FnZS5wYXlsb2FkIGFzIElzRmlsZVVSTFRydXN0ZWRSZXNwb25zZVYxO1xyXG4gICAgICAgIGNvbnN0IGlkID0gcmVzcG9uc2UuaWQ7XHJcbiAgICAgICAgY29uc3QgaXNUcnVzdGVkID0gcmVzcG9uc2UuaXNUcnVzdGVkO1xyXG4gICAgICAgIHJldHVybiBbaWQsIGlzVHJ1c3RlZF07XHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiBuZXcgUmVxdWVzdFJlc3BvbnNlSGFuZGxlcjxVUkwsIGJvb2xlYW4+KFxyXG4gICAgICAgICAgICBNZXNzYWdlVHlwZS5pc0ZpbGVVUkxUcnVzdGVkUmVxdWVzdFYxLFxyXG4gICAgICAgICAgICBNZXNzYWdlVHlwZS5pc0ZpbGVVUkxUcnVzdGVkUmVzcG9uc2VWMSxcclxuICAgICAgICAgICAgbWFrZVJlcXVlc3QsXHJcbiAgICAgICAgICAgIHJlYWRSZXNwb25zZSxcclxuICAgICAgICAgICAgbWVzc2FnZVJvdXRlcixcclxuICAgICAgICAgICAgbWVzc2FnZVNlbmRlcixcclxuICAgICAgICAgICAgaWRHZW5lcmF0b3IpO1xyXG59XHJcblxyXG5leHBvcnQgdHlwZSBPbkZpbGVVcmxUcnVzdGVkbmVzc1F1ZXJ5Q29tcGxldGUgPSAoZmlsZVVybDogVVJMLCBpc1RydXN0ZWQ6IGJvb2xlYW4pID0+IHZvaWQ7IFxyXG5cclxuZXhwb3J0IGNsYXNzIEZpbGVVcmxUcmFja2VyIHtcclxuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2VSb3V0ZXI6IElNZXNzYWdlUm91dGVyLCBtZXNzYWdlU2VuZGVyOiBNZXNzYWdlU2VuZGVyLCBwcml2YXRlIGJyb3dzZXI6IE1heWJlPEJyb3dzZXI+KSB7XHJcbiAgICAgICAgdGhpcy5yZXF1ZXN0SGFuZGxlciA9IG1ha2VJc0ZpbGVVcmxUcnVzdGVkUmVxdWVzdEhhbmRsZXIoXHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlUm91dGVyLCBtZXNzYWdlU2VuZGVyLCB0aGlzLmlkR2VuZXJhdG9yKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGlzRWRnZURuc0Vycm9yUGFnZShmaWxlVXJsOiBVUkwpOiBib29sZWFuIHtcclxuICAgICAgICBjb25zdCBpc0VkZ2UgPSB0aGlzLmJyb3dzZXIgPT09IEJyb3dzZXIuZWRnZTtcclxuICAgICAgICBjb25zdCBpc0Ruc0Vycm9yUGFnZSA9IGZpbGVVcmwucGF0aG5hbWUuZW5kc1dpdGgoXCJkbnNlcnJvci5odG1sXCIpO1xyXG4gICAgICAgIHJldHVybiBpc0VkZ2UgJiYgaXNEbnNFcnJvclBhZ2U7XHJcbiAgICB9XHJcblxyXG4gICAgaXNGaWxlVXJsVHJ1c3RlZChmaWxlVXJsOiBVUkwpOiBNYXliZTxib29sZWFuPiB7XHJcbiAgICAgICAgaWYgKCFpc0ZpbGVVcmwoZmlsZVVybCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMudW50cnVzdGVkRmlsZVVybHMuaGFzKGZpbGVVcmwpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMudHJ1c3RlZEZpbGVVcmxzLmhhcyhmaWxlVXJsKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuaXNFZGdlRG5zRXJyb3JQYWdlKGZpbGVVcmwpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgfVxyXG5cclxuICAgIHF1ZXJ5RmlsZVVybFRydXN0ZWRuZXNzKGZpbGVVcmw6IFVSTCwgb25RdWVyeUNvbXBsZXRlOiBPbkZpbGVVcmxUcnVzdGVkbmVzc1F1ZXJ5Q29tcGxldGUpOiBib29sZWFuIHtcclxuICAgICAgICBpZiAoIWlzRmlsZVVybChmaWxlVXJsKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMucmVxdWVzdEhhbmRsZXIuc2VuZFJlcXVlc3QoZmlsZVVybCwgKGZpbGVVcmwsIGlzVHJ1c3RlZCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnVudHJ1c3RlZEZpbGVVcmxzLnJlbW92ZShmaWxlVXJsKTtcclxuICAgICAgICAgICAgdGhpcy50cnVzdGVkRmlsZVVybHMucmVtb3ZlKGZpbGVVcmwpO1xyXG4gICAgICAgICAgICBpZiAoaXNUcnVzdGVkKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRydXN0ZWRGaWxlVXJscy5hZGQoZmlsZVVybCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnVudHJ1c3RlZEZpbGVVcmxzLmFkZChmaWxlVXJsKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBvblF1ZXJ5Q29tcGxldGUoZmlsZVVybCwgaXNUcnVzdGVkKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGlkR2VuZXJhdG9yID0gbmV3IElkR2VuZXJhdG9yKCk7XHJcbiAgICBwcml2YXRlIHJlcXVlc3RIYW5kbGVyOiBJc0ZpbGVVcmxUcnVzdGVkUmVxdWVzdEhhbmRsZXI7XHJcbiAgICBwcml2YXRlIHRydXN0ZWRGaWxlVXJscyA9IG1ha2VVcmxIYXNoU2V0KFVybENvbXBhcmVPcHRpb25zLklnbm9yZVNlYXJjaFBhcmFtcyk7XHJcbiAgICBwcml2YXRlIHVudHJ1c3RlZEZpbGVVcmxzID0gbWFrZVVybEhhc2hTZXQoVXJsQ29tcGFyZU9wdGlvbnMuSWdub3JlU2VhcmNoUGFyYW1zKTtcclxufVxyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi4vbGliL2NvbW1vbi9maWxlLXVybC10cmFja2VyLnRzIiwiLy8gQ29weXJpZ2h0IChjKSAyMDE4IEJyb21pdW0sIEluYy5cclxuLy8gVXNlIG9mIHRoZSBCcm9taXVtLCBJbmMuIHNvZnR3YXJlIHJlcXVpcmVzIGEgbGljZW5zZSBhZ3JlZW1lbnQgd2l0aCBCcm9taXVtLCBJbmMuIG9yIGFuIGF1dGhvcml6ZWQgcmVzZWxsZXIuXHJcblxyXG5pbXBvcnQgeyBNZXNzYWdlVHlwZSB9IGZyb20gXCIuL21lc3NhZ2UtdHlwZXNcIjtcclxuaW1wb3J0IHsgTWVzc2FnZSwgQmxvY2tlZEZpbGVSZXF1ZXN0VjEsIEJsb2NrZWRGaWxlUmVzcG9uc2VWMSB9IGZyb20gXCIuL21lc3NhZ2VzXCI7XHJcbmltcG9ydCB7IFBhZ2VQb3J0UmVzb2x2ZXIsIGdldEJyb3dzZXJTcGVjaWZpY0V4dGVuc2lvblBhZ2VQb3J0UmVzb2x2ZXIgfSBmcm9tIFwiLi9wYWdlLXBvcnQtcmVzb2x2ZXJcIjtcclxuaW1wb3J0IHsgaG9zdENvbnN0YW50cyB9IGZyb20gXCIuL2hvc3QtY29uc3RhbnRzXCI7XHJcbmltcG9ydCB7IFRhYklkIH0gZnJvbSBcIi4vY29tbW9uLXR5cGVzXCI7XHJcbmltcG9ydCB7IE1heWJlLCBub25lIH0gZnJvbSBcIi4vbWF5YmVcIjtcclxuaW1wb3J0IHsgVVJMLCBwYXJzZVVybCwgaXNTYW1lVXJsLCBVcmxDb21wYXJlT3B0aW9ucywgVVJMVG9TdHJpbmcsIGlzRmlsZVVybCB9IGZyb20gXCIuL3VybC11dGlsc1wiO1xyXG5pbXBvcnQgeyBQYWdlUG9ydENvbnRyb2xsZXIgfSBmcm9tIFwiLi9wYWdlLXBvcnQtY29udHJvbGxlclwiO1xyXG5pbXBvcnQgeyBGaWxlVXJsVHJhY2tlciB9IGZyb20gXCIuL2ZpbGUtdXJsLXRyYWNrZXJcIjtcclxuaW1wb3J0IHsgbG9nIH0gZnJvbSBcIi4vbG9nXCI7XHJcbmltcG9ydCB7IHRvU3RyaW5nIH0gZnJvbSBcIi4vc3RyaW5nLXV0aWxzXCI7XHJcbmltcG9ydCB7IEJyb3dzZXJMYXVuY2hlciB9IGZyb20gXCIuL2Jsb2NrZWQtcGFnZS1jb250cm9sbGVyXCI7XHJcbmltcG9ydCB7IFVybEVuY29kZXIgfSBmcm9tIFwiLi91cmwtZW5jb2RlclwiO1xyXG5pbXBvcnQgeyBPcHRpb25OYW1lcyB9IGZyb20gXCIuL2Jsb2NrZWQtZmlsZS1wYWdlLW9wdGlvbnNcIjtcclxuaW1wb3J0IHsgbWFrZVByb21pc2UgfSBmcm9tIFwiLi9wcm9taXNlLXV0aWxzXCI7XHJcbmltcG9ydCB7IEJyb3dzZXIgfSBmcm9tIFwiLi9icm93c2VyXCI7XHJcbmltcG9ydCB7IElPbkNvbmZpZ3VyZWQgfSBmcm9tIFwiLi9vbi1jb25maWd1cmVkXCI7XHJcbmltcG9ydCB7IHJlbW92ZUV4dGVuc2lvblBhZ2VGcm9tSGlzdG9yeUFmdGVyQ2xvc2luZyB9IGZyb20gXCIuL2hpc3RvcnlcIjtcclxuXHJcbnR5cGUgUG9ydCA9IGNocm9tZS5ydW50aW1lLlBvcnQ7XHJcbnR5cGUgT25QYWdlRGlzY29ubmVjdGVkID0gKHBvcnQ6IGNocm9tZS5ydW50aW1lLlBvcnQsIHRhYklkOiBUYWJJZCkgPT4gdm9pZDtcclxuXHJcbmNsYXNzIEJsb2NrZWRGaWxlUGFnZUNvbnRyb2xsZXIge1xyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAgICAgICAgIHJlYWRvbmx5IGJyb3dzZXI6IE1heWJlPEJyb3dzZXI+LFxyXG4gICAgICAgICAgICByZWFkb25seSB0YWJJZDogVGFiSWQsIFxyXG4gICAgICAgICAgICBwcml2YXRlIHBvcnQ6IFByb21pc2U8UG9ydD4sIFxyXG4gICAgICAgICAgICBwcml2YXRlIG9uRGlzY29ubmVjdDogT25QYWdlRGlzY29ubmVjdGVkLFxyXG4gICAgICAgICAgICBwcml2YXRlIGZpbGVVcmxUcmFja2VyOiBGaWxlVXJsVHJhY2tlcixcclxuICAgICAgICAgICAgcHJpdmF0ZSBicm93c2VyTGF1bmNoZXI6IEJyb3dzZXJMYXVuY2hlcixcclxuICAgICAgICAgICAgb25Db25maWd1cmVkOiBJT25Db25maWd1cmVkKSB7XHJcbiAgICAgICAgdGhpcy5wYWdlUG9ydENvbnRyb2xsZXIgPSBuZXcgUGFnZVBvcnRDb250cm9sbGVyKFxyXG4gICAgICAgICAgICAgICAgdGFiSWQsIFxyXG4gICAgICAgICAgICAgICAgcG9ydCxcclxuICAgICAgICAgICAgICAgIChwb3J0KSA9PiB0aGlzLm9uUG9ydENvbm5lY3RlZChwb3J0KSxcclxuICAgICAgICAgICAgICAgIChwb3J0KSA9PiB0aGlzLm9uUG9ydERpc2Nvbm5lY3RlZChwb3J0KSxcclxuICAgICAgICAgICAgICAgIG9uQ29uZmlndXJlZCk7XHJcbiAgICAgICAgdGhpcy5wYWdlUG9ydENvbnRyb2xsZXIucmVnaXN0ZXJNZXNzYWdlSGFuZGxlcihcclxuICAgICAgICAgICAgICAgIE1lc3NhZ2VUeXBlLmJsb2NrZWRGaWxlUmVxdWVzdFYxLFxyXG4gICAgICAgICAgICAgICAgKG1lc3NhZ2UpID0+IHRoaXMuaGFuZGxlUmVxdWVzdChtZXNzYWdlKSk7XHJcbiAgICAgICAgdGhpcy5wYWdlUG9ydENvbnRyb2xsZXIuY29ubmVjdCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgY2xvc2VUYWIoKSB7XHJcbiAgICAgICAgY2hyb21lLnRhYnMucmVtb3ZlKHRoaXMudGFiSWQsICgpID0+IHtcclxuICAgICAgICAgICAgbG9nKGBCbG9ja2VkRmlsZVBhZ2VDb250cm9sbGVyLmNsb3NlVGFiOiB0YWJJZDogJHt0aGlzLnRhYklkfWApO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgaGFuZGxlUmVxdWVzdChtZXNzYWdlOiBNZXNzYWdlKSB7XHJcbiAgICAgICAgY29uc3QgcmVxdWVzdCA9IG1lc3NhZ2UucGF5bG9hZCBhcyBCbG9ja2VkRmlsZVJlcXVlc3RWMTtcclxuICAgICAgICBjb25zdCBmaWxlVXJsID0gcGFyc2VVcmwocmVxdWVzdC5maWxlVXJsU3BlYyk7XHJcblxyXG4gICAgICAgIGlmIChub25lKGZpbGVVcmwpIHx8ICFpc0ZpbGVVcmwoZmlsZVVybCkpIHtcclxuICAgICAgICAgICAgdGhpcy5jbG9zZVRhYigpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmZpbGVVcmxUcmFja2VyLnF1ZXJ5RmlsZVVybFRydXN0ZWRuZXNzKGZpbGVVcmwsIChmaWxlVXJsLCBpc1RydXN0ZWQpID0+IHtcclxuICAgICAgICAgICAgbG9nKGBCbG9ja2VkRmlsZVBhZ2VDb250cm9sbGVyLmhhbmRsZVJlcXVlc3Q6ICR7dG9TdHJpbmcoe1xyXG4gICAgICAgICAgICAgICAgZmlsZVVybDogZmlsZVVybCxcclxuICAgICAgICAgICAgICAgIGlzVHJ1c3RlZDogaXNUcnVzdGVkXHJcbiAgICAgICAgICAgIH0pfWApO1xyXG5cclxuICAgICAgICAgICAgLy8gRmlsZSBpcyBub3QgdHJ1c3RlZCBzbyBsYXVuY2ggaW4gc2VjdXJlIGJyb3dzZXIuXHJcbiAgICAgICAgICAgIGlmICghaXNUcnVzdGVkKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmJyb3dzZXJMYXVuY2hlci5sYXVuY2hCcm93c2VyQW5kQ2xvc2VUYWJPck5hdmlnYXRlVGFiKHRoaXMudGFiSWQsIGZpbGVVcmwpO1xyXG4gICAgICAgICAgICAvLyBGaWxlIGlzIHRydXN0ZWQgYnV0IEVkZ2Ugd2lsbCBub3QgbGV0IHRoZSBzY3JpcHRzIGluIHRoZSBibG9ja2VkXHJcbiAgICAgICAgICAgIC8vIGZpbGUgcGFnZSBuYXZpZ2F0ZSB0byBhIGZpbGUgVVJMIHNvIHdlIG5hdmlnYXRlIHRoZSB0YWIgaGVyZS5cclxuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmJyb3dzZXIgPT09IEJyb3dzZXIuZWRnZSkge1xyXG4gICAgICAgICAgICAgICAgY2hyb21lLnRhYnMudXBkYXRlKHRoaXMudGFiSWQsIHt1cmw6IFVSTFRvU3RyaW5nKGZpbGVVcmwpfSk7XHJcbiAgICAgICAgICAgIC8vIEZpbGUgcGFnZSBpcyB0cnVzdGVkIGFuZCB0aGUgYnJvd3NlciBpcyBub3QgRWRnZSBzbyBsZXQgdGhlXHJcbiAgICAgICAgICAgIC8vIGJsb2NrZWQgZmlsZSBwYWdlIHNjcmlwdHMgZG8gdGhlIG5hdmlnYXRpb24uXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbmRSZXNwb25zZShmaWxlVXJsLCBpc1RydXN0ZWQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzZW5kUmVzcG9uc2UoZmlsZVVybDogVVJMLCBpc1RydXN0ZWQ6IGJvb2xlYW4pIHtcclxuICAgICAgICB0aGlzLnBhZ2VQb3J0Q29udHJvbGxlci5zZW5kTWVzc2FnZShcclxuICAgICAgICAgICAgTWVzc2FnZVR5cGUuYmxvY2tlZEZpbGVSZXNwb25zZVYxLFxyXG4gICAgICAgICAgICBuZXcgQmxvY2tlZEZpbGVSZXNwb25zZVYxKFVSTFRvU3RyaW5nKGZpbGVVcmwpLCBpc1RydXN0ZWQpKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIG9uUG9ydENvbm5lY3RlZChwb3J0OiBQb3J0KSB7fVxyXG5cclxuICAgIHByaXZhdGUgb25Qb3J0RGlzY29ubmVjdGVkKHBvcnQ6IFBvcnQpIHtcclxuICAgICAgICB0aGlzLm9uRGlzY29ubmVjdChwb3J0LCB0aGlzLnRhYklkKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHBhZ2VQb3J0Q29udHJvbGxlcjogUGFnZVBvcnRDb250cm9sbGVyO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgRmlsZUJsb2NrZXIge1xyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAgICAgICAgIHJlYWRvbmx5IGJyb3dzZXI6IE1heWJlPEJyb3dzZXI+LFxyXG4gICAgICAgICAgICBwcml2YXRlIGZpbGVVcmxUcmFja2VyOiBGaWxlVXJsVHJhY2tlciwgXHJcbiAgICAgICAgICAgIHByaXZhdGUgYnJvd3NlckxhdW5jaGVyOiBCcm93c2VyTGF1bmNoZXIsXHJcbiAgICAgICAgICAgIHByaXZhdGUgb25Db25maWd1cmVkOiBJT25Db25maWd1cmVkKSB7XHJcbiAgICAgICAgY29uc3QgYmxvY2tlZEZpbGVQYWdlU3BlYyA9IGNocm9tZS5ydW50aW1lLmdldFVSTChob3N0Q29uc3RhbnRzLmJsb2NrZWRGaWxlUGFnZSk7XHJcbiAgICAgICAgY29uc3QgYmxvY2tlZEZpbGVQYWdlVVJMID0gcGFyc2VVcmwoYmxvY2tlZEZpbGVQYWdlU3BlYyk7XHJcbiAgICAgICAgaWYgKG5vbmUoYmxvY2tlZEZpbGVQYWdlVVJMKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEZpbGVCbG9ja2VyLmNvbnN0cnVjdG9yOiBpbnZhbGlkIGJsb2NrZWRGaWxlUGFnZVVSTDogJHtob3N0Q29uc3RhbnRzLmJsb2NrZWRGaWxlUGFnZX1gKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5ibG9ja2VkRmlsZVBhZ2VVUkwgPSBibG9ja2VkRmlsZVBhZ2VVUkw7XHJcbiAgICAgICAgdGhpcy5wYWdlUG9ydFJlc29sdmVyID0gZ2V0QnJvd3NlclNwZWNpZmljRXh0ZW5zaW9uUGFnZVBvcnRSZXNvbHZlcihcclxuICAgICAgICAgICAgdGhpcy5icm93c2VyLFxyXG4gICAgICAgICAgICBob3N0Q29uc3RhbnRzLmJsb2NrZWRGaWxlUGFnZVBvcnROYW1lLCBcclxuICAgICAgICAgICAgKHRhYklkLCBwb3J0KSA9PiB0aGlzLm9uVW5yZXNvbHZlZFBhZ2VQb3J0Q29ubmVjdGVkKHRhYklkLCBwb3J0KSxcclxuICAgICAgICAgICAgKHVybCkgPT4gdGhpcy5pc0Jsb2NrZWRGaWxlUGFnZVVSTCh1cmwpKTtcclxuICAgIH1cclxuXHJcbiAgICBpc0Jsb2NrZWRGaWxlUGFnZVVSTCh1cmw6IE1heWJlPFVSTD4pOiBib29sZWFuIHtcclxuICAgICAgICBpZiAobm9uZSh1cmwpIHx8IG5vbmUodGhpcy5ibG9ja2VkRmlsZVBhZ2VVUkwpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGlzU2FtZVVybCh1cmwsIHRoaXMuYmxvY2tlZEZpbGVQYWdlVVJMLCBVcmxDb21wYXJlT3B0aW9ucy5JZ25vcmVTZWFyY2hQYXJhbXMpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgbWFrZUJsb2NrZWRGaWxlUGFnZVVSTChmaWxlVXJsOiBNYXliZTxVUkw+KTogVVJMIHtcclxuICAgICAgICBjb25zdCB1cmxFbmNvZGVyID0gbmV3IFVybEVuY29kZXIodGhpcy5ibG9ja2VkRmlsZVBhZ2VVUkwpO1xyXG4gICAgICAgIHVybEVuY29kZXIuYWRkVXJsUXVlcnlQYXJhbShPcHRpb25OYW1lcy5maWxlVXJsU3BlYywgZmlsZVVybCk7XHJcbiAgICAgICAgY29uc3QgYmxvY2tlZEZpbGVQYWdlVVJMID0gdXJsRW5jb2Rlci5lbmNvZGVVcmwoKTtcclxuXHJcbiAgICAgICAgaWYgKG5vbmUoYmxvY2tlZEZpbGVQYWdlVVJMKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5ibG9ja2VkRmlsZVBhZ2VVUkw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBibG9ja2VkRmlsZVBhZ2VVUkw7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhZGRCbG9ja2VkRmlsZVBhZ2VDb250cm9sbGVyKHRhYklkOiBUYWJJZCwgcG9ydDogUHJvbWlzZTxQb3J0Pikge1xyXG4gICAgICAgIGNvbnN0IGNvbnRyb2xsZXIgPSBuZXcgQmxvY2tlZEZpbGVQYWdlQ29udHJvbGxlcihcclxuICAgICAgICAgICAgICAgIHRoaXMuYnJvd3NlcixcclxuICAgICAgICAgICAgICAgIHRhYklkLCBcclxuICAgICAgICAgICAgICAgIHBvcnQsXHJcbiAgICAgICAgICAgICAgICAocG9ydCwgdGFiSWQpID0+IHRoaXMub25QYWdlRGlzY29ubmVjdGVkKHBvcnQsIHRhYklkKSxcclxuICAgICAgICAgICAgICAgIHRoaXMuZmlsZVVybFRyYWNrZXIsXHJcbiAgICAgICAgICAgICAgICB0aGlzLmJyb3dzZXJMYXVuY2hlcixcclxuICAgICAgICAgICAgICAgIHRoaXMub25Db25maWd1cmVkKTtcclxuICAgICAgICB0aGlzLnBhZ2VDb250cm9sbGVycy5zZXQodGFiSWQsIGNvbnRyb2xsZXIpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgb25QYWdlRGlzY29ubmVjdGVkKHBvcnQ6IGNocm9tZS5ydW50aW1lLlBvcnQsIHRhYklkOiBUYWJJZCkge1xyXG4gICAgICAgIHRoaXMucGFnZUNvbnRyb2xsZXJzLmRlbGV0ZSh0YWJJZCk7XHJcbiAgICAgICAgLy8gTm93IHRoYXQgdGhlIGJsb2NrZWQgZmlsZSBwYWdlIGNvbnRyb2xsZXIgaGFzIGRpc2Nvbm5lY3RlZCB3ZSBjYW4gcmVtb3ZlIHRoZSBibG9ja2VkIGZpbGUgcGFnZSBmcm9tIGhpc3RvcnkuXHJcbiAgICAgICAgLy8gb25Qb3J0RGlzY29ubmVjdGVkIGNhbGxiYWNrcyBkb24ndCBnZXQgY2FsbGVkIGluIEZpcmVmb3ggYnV0IGRlbGV0aW5nIGhpc3RvcnkgaW4gRmlyZWZveCBkb2Vzbid0IGFmZmVjdCB0aGVcclxuICAgICAgICAvLyAnYmFjaycgYnV0dG9uIGluIHRoZSBicm93c2VyIHNvIGl0J3Mgbm90IGFzIGltcG9ydGFudCBhcyBmb3IgQ2hyb21lLlxyXG4gICAgICAgIHJlbW92ZUV4dGVuc2lvblBhZ2VGcm9tSGlzdG9yeUFmdGVyQ2xvc2luZyh0aGlzLmJyb3dzZXIsIHBvcnQpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgb25VbnJlc29sdmVkUGFnZVBvcnRDb25uZWN0ZWQodGFiSWQ6IFRhYklkLCBwb3J0OiBQb3J0KSB7XHJcbiAgICAgICAgdGhpcy5hZGRCbG9ja2VkRmlsZVBhZ2VDb250cm9sbGVyKHRhYklkLCBtYWtlUHJvbWlzZSgoKSA9PiBwb3J0KSk7XHJcbiAgICB9XHJcblxyXG4gICAgYmxvY2tGaWxlKGZpbGVVcmw6IE1heWJlPFVSTD4sIHRhYklkOiBUYWJJZCkge1xyXG4gICAgICAgIGNvbnN0IHBvcnQgPSB0aGlzLnBhZ2VQb3J0UmVzb2x2ZXIucmVzb2x2ZVBvcnQodGFiSWQpO1xyXG4gICAgICAgIHRoaXMuYWRkQmxvY2tlZEZpbGVQYWdlQ29udHJvbGxlcih0YWJJZCwgcG9ydCk7XHJcbiAgICAgICAgY29uc3QgYmxvY2tlZEZpbGVQYWdlVVJMID0gdGhpcy5tYWtlQmxvY2tlZEZpbGVQYWdlVVJMKGZpbGVVcmwpO1xyXG4gICAgICAgIHJldHVybiBibG9ja2VkRmlsZVBhZ2VVUkw7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBibG9ja2VkRmlsZVBhZ2VVUkw6IFVSTDtcclxuICAgIHByaXZhdGUgcGFnZVBvcnRSZXNvbHZlcjogUGFnZVBvcnRSZXNvbHZlcjtcclxuICAgIHByaXZhdGUgcGFnZUNvbnRyb2xsZXJzID0gbmV3IE1hcDxUYWJJZCwgQmxvY2tlZEZpbGVQYWdlQ29udHJvbGxlcj4oKTtcclxufVxyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9maWxlLWJsb2NrZXIudHMiLCIvLyBDb3B5cmlnaHQgKGMpIDIwMTggQnJvbWl1bSwgSW5jLlxyXG4vLyBVc2Ugb2YgdGhlIEJyb21pdW0sIEluYy4gc29mdHdhcmUgcmVxdWlyZXMgYSBsaWNlbnNlIGFncmVlbWVudCB3aXRoIEJyb21pdW0sIEluYy4gb3IgYW4gYXV0aG9yaXplZCByZXNlbGxlci5cclxuXHJcbmV4cG9ydCBlbnVtIE9wdGlvbk5hbWVzIHtcclxuICAgIGZpbGVVcmxTcGVjID0gXCJmaWxlVXJsU3BlY1wiXHJcbn1cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4uL2xpYi9ob3N0L2Jsb2NrZWQtZmlsZS1wYWdlLW9wdGlvbnMudHMiLCIvLyBDb3B5cmlnaHQgKGMpIDIwMTggQnJvbWl1bSwgSW5jLlxyXG4vLyBVc2Ugb2YgdGhlIEJyb21pdW0sIEluYy4gc29mdHdhcmUgcmVxdWlyZXMgYSBsaWNlbnNlIGFncmVlbWVudCB3aXRoIEJyb21pdW0sIEluYy4gb3IgYW4gYXV0aG9yaXplZCByZXNlbGxlci5cclxuXHJcbmltcG9ydCB7IFJlcXVlc3RSZXNwb25zZUhhbmRsZXIgfSBmcm9tIFwiLi9yZXF1ZXN0LXJlc3BvbnNlLWhhbmRsZXJcIjtcclxuaW1wb3J0IHsgSU1lc3NhZ2VSb3V0ZXIgfSBmcm9tIFwiLi9tZXNzYWdlLXJvdXRlclwiO1xyXG5pbXBvcnQgeyBNZXNzYWdlU2VuZGVyIH0gZnJvbSBcIi4vbWVzc2FnZS1zZW5kZXJcIjtcclxuaW1wb3J0IHsgSWRHZW5lcmF0b3IsIElkIH0gZnJvbSBcIi4vaWQtZ2VuZXJhdG9yXCI7XHJcbmltcG9ydCB7IE1lc3NhZ2VQYXlsb2FkLCBFbmFibGVkRmVhdHVyZXNSZXF1ZXN0VjIsIE1lc3NhZ2UsIEVuYWJsZWRGZWF0dXJlc1Jlc3BvbnNlVjIgfSBmcm9tIFwiLi9tZXNzYWdlc1wiO1xyXG5pbXBvcnQgeyBNZXNzYWdlVHlwZSB9IGZyb20gXCIuL21lc3NhZ2UtdHlwZXNcIjtcclxuaW1wb3J0IHsgSUhhbmRzaGFrZXIsIEhhbmRzaGFrZW5FdmVudCB9IGZyb20gXCIuL2hhbmRzaGFrZXJcIjtcclxuaW1wb3J0IHsgaXNNZXNzYWdlVHlwZVN1cHBvcnRlZCwgUHJvdG9jb2xWZXJzaW9uIH0gZnJvbSBcIi4vcHJvdG9jb2wtdmVyc2lvbnNcIjtcclxuaW1wb3J0IHsgTWF5YmUsIHNvbWUgfSBmcm9tIFwiLi9tYXliZVwiO1xyXG5pbXBvcnQgeyBJT25Db25maWd1cmVkUmFpc2VyIH0gZnJvbSBcIi4vb24tY29uZmlndXJlZFwiO1xyXG5pbXBvcnQgeyBJQ29uZmlnTm90aWZpZXIgfSBmcm9tIFwiLi9jb25maWctbm90aWZpZXJcIjtcclxuaW1wb3J0IHsgQ29uZmlnS2V5IH0gZnJvbSBcIi4vY29uZmlnLWtleXNcIjtcclxuaW1wb3J0IHsgQ29uZmlnUmVhZGVyIH0gZnJvbSBcIi4vY29uZmlnLXJlYWRlclwiO1xyXG5pbXBvcnQgeyBsb2cgfSBmcm9tIFwiLi9sb2dcIjtcclxuXHJcbnR5cGUgRW5hYmxlZEZlYXR1cmVzID0ge1xyXG4gICAgcmVhZG9ubHkgbGlua1Byb3RlY3Rpb246IGJvb2xlYW47IFxyXG4gICAgcmVhZG9ubHkgZmlsZVVSTFByb3RlY3Rpb246IGJvb2xlYW47XHJcbiAgICByZWFkb25seSBwZGZQcm90ZWN0aW9uOiBib29sZWFuO1xyXG4gICAgcmVhZG9ubHkgZG93bmxvYWRQcm90ZWN0aW9uOiBib29sZWFuO1xyXG59O1xyXG5cclxuZW51bSBSZXNwb25zZVRpbWUge1xyXG4gICAgcmVzcG9uZEltbWVkaWF0ZWx5LFxyXG4gICAgcmVzcG9uZFdoZW5DaGFuZ2VkXHJcbn1cclxuXHJcbnR5cGUgRW5hYmxlZEZlYXR1cmVzUmVxdWVzdEhhbmRsZXIgPSBSZXF1ZXN0UmVzcG9uc2VIYW5kbGVyPFJlc3BvbnNlVGltZSwgRW5hYmxlZEZlYXR1cmVzPjtcclxuXHJcbmZ1bmN0aW9uIG1ha2VFbmFibGVkRmVhdHVyZXNSZXF1ZXN0SGFuZGxlcihcclxuICAgICAgICBtZXNzYWdlUm91dGVyOiBJTWVzc2FnZVJvdXRlcixcclxuICAgICAgICBtZXNzYWdlU2VuZGVyOiBNZXNzYWdlU2VuZGVyLFxyXG4gICAgICAgIGlkR2VuZXJhdG9yOiBJZEdlbmVyYXRvcik6IEVuYWJsZWRGZWF0dXJlc1JlcXVlc3RIYW5kbGVyIHtcclxuICAgIGNvbnN0IG1ha2VSZXF1ZXN0ID0gKGlkOiBJZCwgcmVzcG9uc2VUaW1lOiBSZXNwb25zZVRpbWUpOiBNZXNzYWdlUGF5bG9hZCA9PiB7XHJcbiAgICAgICAgY29uc3QgcmVzcG9uZEltbWVkaWF0ZWx5ID0gcmVzcG9uc2VUaW1lID09PSBSZXNwb25zZVRpbWUucmVzcG9uZEltbWVkaWF0ZWx5O1xyXG4gICAgICAgIHJldHVybiBuZXcgRW5hYmxlZEZlYXR1cmVzUmVxdWVzdFYyKGlkLCByZXNwb25kSW1tZWRpYXRlbHkpO1xyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdCByZWFkUmVzcG9uc2UgPSAobWVzc2FnZTogTWVzc2FnZSk6IFtJZCwgRW5hYmxlZEZlYXR1cmVzXSA9PiB7XHJcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBtZXNzYWdlLnBheWxvYWQgYXMgRW5hYmxlZEZlYXR1cmVzUmVzcG9uc2VWMjtcclxuICAgICAgICBjb25zdCBpZCA9IHJlc3BvbnNlLmlkO1xyXG4gICAgICAgIGNvbnN0IGVuYWJsZWRGZWF0dXJlczogRW5hYmxlZEZlYXR1cmVzID0gcmVzcG9uc2U7XHJcbiAgICAgICAgcmV0dXJuIFtpZCwgZW5hYmxlZEZlYXR1cmVzXTtcclxuICAgIH07XHJcblxyXG4gICAgcmV0dXJuIG5ldyBSZXF1ZXN0UmVzcG9uc2VIYW5kbGVyPFJlc3BvbnNlVGltZSwgRW5hYmxlZEZlYXR1cmVzPihcclxuICAgICAgICAgICAgTWVzc2FnZVR5cGUuZW5hYmxlZEZlYXR1cmVzUmVxdWVzdFYyLFxyXG4gICAgICAgICAgICBNZXNzYWdlVHlwZS5lbmFibGVkRmVhdHVyZXNSZXNwb25zZVYyLFxyXG4gICAgICAgICAgICBtYWtlUmVxdWVzdCxcclxuICAgICAgICAgICAgcmVhZFJlc3BvbnNlLFxyXG4gICAgICAgICAgICBtZXNzYWdlUm91dGVyLFxyXG4gICAgICAgICAgICBtZXNzYWdlU2VuZGVyLFxyXG4gICAgICAgICAgICBpZEdlbmVyYXRvcik7XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSUZlYXR1cmVNYW5hZ2VyIHtcclxuICAgIHJlYWRvbmx5IGlzTGlua1Byb3RlY3Rpb25FbmFibGVkOiBib29sZWFuO1xyXG4gICAgcmVhZG9ubHkgaXNGaWxlVVJMUHJvdGVjdGlvbkVuYWJsZWQ6IGJvb2xlYW47XHJcbiAgICByZWFkb25seSBpc1BERlByb3RlY3Rpb25FbmFibGVkOiBib29sZWFuO1xyXG4gICAgcmVhZG9ubHkgaXNEb3dubG9hZFByb3RlY3Rpb25FbmFibGVkOiBib29sZWFuO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgRmVhdHVyZU1hbmFnZXIgaW1wbGVtZW50cyBJRmVhdHVyZU1hbmFnZXIge1xyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAgICAgICAgIG1lc3NhZ2VSb3V0ZXI6IElNZXNzYWdlUm91dGVyLCBcclxuICAgICAgICAgICAgbWVzc2FnZVNlbmRlcjogTWVzc2FnZVNlbmRlciwgXHJcbiAgICAgICAgICAgIGhhbmRzaGFrZXI6IElIYW5kc2hha2VyLFxyXG4gICAgICAgICAgICBjb25maWdOb3RpZmllcjogSUNvbmZpZ05vdGlmaWVyLFxyXG4gICAgICAgICAgICBwcml2YXRlIG9uQ29uZmlndXJlZFJhaXNlcjogSU9uQ29uZmlndXJlZFJhaXNlcikge1xyXG4gICAgICAgIHRoaXMucmVxdWVzdEhhbmRsZXIgPSBtYWtlRW5hYmxlZEZlYXR1cmVzUmVxdWVzdEhhbmRsZXIobWVzc2FnZVJvdXRlciwgXHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlU2VuZGVyLCB0aGlzLmlkR2VuZXJhdG9yKTtcclxuICAgICAgICBoYW5kc2hha2VyLm9uSGFuZHNoYWtlbi5yZWdpc3RlckV2ZW50SGFuZGxlcigoZXZlbnQpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5vbkhhbmRzaGFrZW4oZXZlbnQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNvbmZpZ05vdGlmaWVyLmFkZENvbmZpZ0xpc3RlbmVyRm9yS2V5cyhcclxuICAgICAgICAgICAgKGtleSwgY29uZmlnKSA9PiB0aGlzLm9uQ29uZmlnQ2hhbmdlZChrZXksIGNvbmZpZyksXHJcbiAgICAgICAgICAgIFsgQ29uZmlnS2V5LmRvbnRBc2tBZ2FpbiwgQ29uZmlnS2V5LmlzQ29uc3VtZXJQcm9kdWN0IF0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgb25Db25maWdDaGFuZ2VkKGtleTogQ29uZmlnS2V5LCBjb25maWc6IENvbmZpZ1JlYWRlcikge1xyXG4gICAgICAgIHN3aXRjaChrZXkpIHtcclxuICAgICAgICAgICAgY2FzZSBDb25maWdLZXkuZG9udEFza0FnYWluOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5kb250QXNrQWdhaW4gPSBjb25maWcuZG9udEFza0FnYWluO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgQ29uZmlnS2V5LmlzQ29uc3VtZXJQcm9kdWN0OlxyXG4gICAgICAgICAgICAgICAgdGhpcy5pc0NvbnN1bWVyUHJvZHVjdCA9IGNvbmZpZy5pc0NvbnN1bWVyUHJvZHVjdDtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGdldCBzaG91bGROb3RBc2tBZ2FpbigpIHtcclxuICAgICAgICAvLyBPbmx5IGFjdCB1cG9uIHRoZSBcIkRvbid0IGFzayBhZ2FpblwiIGNvbmZpZyBmb3IgY29uc3VtZXIgdmVyc2lvbnNcclxuICAgICAgICByZXR1cm4gdGhpcy5pc0NvbnN1bWVyUHJvZHVjdCAmJiB0aGlzLmRvbnRBc2tBZ2FpbjtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgaXNMaW5rUHJvdGVjdGlvbkVuYWJsZWQoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgaWYgKHRoaXMuc2hvdWxkTm90QXNrQWdhaW4pIHtcclxuICAgICAgICAgICAgbG9nKGBUcmVhdGluZyBsaW5rIHByb3RlY3Rpb24gYXMgZGlzYWJsZWQgYmVjYXVzZSB0aGUgdXNlciBoYXMgY2hvc2VuIFwiRG9uJ3QgYXNrIGFnYWluXCJgKTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gc29tZSh0aGlzLmVuYWJsZWRGZWF0dXJlcykgJiYgdGhpcy5lbmFibGVkRmVhdHVyZXMubGlua1Byb3RlY3Rpb247XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGlzRmlsZVVSTFByb3RlY3Rpb25FbmFibGVkKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiBzb21lKHRoaXMuZW5hYmxlZEZlYXR1cmVzKSAmJiB0aGlzLmVuYWJsZWRGZWF0dXJlcy5maWxlVVJMUHJvdGVjdGlvbjtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgaXNQREZQcm90ZWN0aW9uRW5hYmxlZCgpOiBib29sZWFuIHtcclxuICAgICAgICBpZiAodGhpcy5zaG91bGROb3RBc2tBZ2Fpbikge1xyXG4gICAgICAgICAgICBsb2coYFRyZWF0aW5nIFBERiBwcm90ZWN0aW9uIGFzIGRpc2FibGVkIGJlY2F1c2UgdGhlIHVzZXIgaGFzIGNob3NlbiBcIkRvbid0IGFzayBhZ2FpblwiYCk7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHNvbWUodGhpcy5lbmFibGVkRmVhdHVyZXMpICYmIHRoaXMuZW5hYmxlZEZlYXR1cmVzLnBkZlByb3RlY3Rpb247XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGlzRG93bmxvYWRQcm90ZWN0aW9uRW5hYmxlZCgpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gc29tZSh0aGlzLmVuYWJsZWRGZWF0dXJlcykgJiYgdGhpcy5lbmFibGVkRmVhdHVyZXMuZG93bmxvYWRQcm90ZWN0aW9uO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgb25IYW5kc2hha2VuKGV2ZW50OiBIYW5kc2hha2VuRXZlbnQpIHtcclxuICAgICAgICBjb25zdCBwcm90b2NvbFZlcnNpb24gPSBldmVudC5uZWdvdGlhdGVkVmVyc2lvbjtcclxuICAgICAgICBpZiAoaXNNZXNzYWdlVHlwZVN1cHBvcnRlZChNZXNzYWdlVHlwZS5lbmFibGVkRmVhdHVyZXNSZXF1ZXN0VjIsXHJcbiAgICAgICAgICAgICAgICBwcm90b2NvbFZlcnNpb24pKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVxdWVzdEhhbmRsZXIuc2VuZFJlcXVlc3QoUmVzcG9uc2VUaW1lLnJlc3BvbmRJbW1lZGlhdGVseSxcclxuICAgICAgICAgICAgICAgIChyZXNwb25zZVRpbWUsIGVuYWJsZWRGZWF0dXJlcykgPT4gdGhpcy5vblJlc3BvbnNlUmVjZWl2ZWQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlVGltZSwgZW5hYmxlZEZlYXR1cmVzKSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgdGFsa2luZyB0byBhIHZlcnNpb24gb2YgQnJIb3N0SGVscGVyIHRoYXQgb25seSBzcGVha3NcclxuICAgICAgICAgICAgLy8gcHJvdG9jb2wgdmVyc2lvbiAxLCBlbmFibGUgYWxsIGZlYXR1cmVzIGFzIGl0IGlzIG5vdCBwb3NzaWJsZSB0b1xyXG4gICAgICAgICAgICAvLyBxdWVyeSB3aGF0IGZlYXR1cmVzIHNob3VsZCBiZSBlbmFibGVkLlxyXG4gICAgICAgICAgICB0aGlzLmVuYWJsZWRGZWF0dXJlcyA9IHtcclxuICAgICAgICAgICAgICAgIGxpbmtQcm90ZWN0aW9uOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgZmlsZVVSTFByb3RlY3Rpb246IHRydWUsXHJcbiAgICAgICAgICAgICAgICBwZGZQcm90ZWN0aW9uOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgZG93bmxvYWRQcm90ZWN0aW9uOiB0cnVlXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgb25SZXNwb25zZVJlY2VpdmVkKHJlc3BvbnNlVGltZTogUmVzcG9uc2VUaW1lLCBcclxuICAgICAgICAgICAgZW5hYmxlZEZlYXR1cmVzOiBFbmFibGVkRmVhdHVyZXMpIHtcclxuICAgICAgICB0aGlzLmVuYWJsZWRGZWF0dXJlcyA9IGVuYWJsZWRGZWF0dXJlcztcclxuICAgICAgICB0aGlzLnJlcXVlc3RIYW5kbGVyLnNlbmRSZXF1ZXN0KFJlc3BvbnNlVGltZS5yZXNwb25kV2hlbkNoYW5nZWQsXHJcbiAgICAgICAgICAgIChyZXNwb25zZVRpbWUsIGVuYWJsZWRGZWF0dXJlcykgPT4gdGhpcy5vblJlc3BvbnNlUmVjZWl2ZWQoXHJcbiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2VUaW1lLCBlbmFibGVkRmVhdHVyZXMpKTtcclxuICAgICAgICAvLyBXZSBkbyBvbiBjb25maWd1cmVkIGhlcmUgYmVjYXVzZSBhbmVjZG90YWxseSB0aGUgW0VuYWJsZWRGZWF0dXJlc1YyXVxyXG4gICAgICAgIC8vIG1lc3NhZ2UgaXMgdGhlIGxhc3QgY29uZmlnIG1lc3NhZ2UgdG8gY29tZSB0aHJvdWdoIGZyb20gQnJIb3N0SGVscGVyLiBJXHJcbiAgICAgICAgLy8gdGhpbmsgdGhpcyBpcyBiZWNhdXNlIHRoZSBbRmVhdHVyZU1hbmFnZXJdIGFkZHMgaXRzIGxpc3RlbmVyIHRvIHRoZVxyXG4gICAgICAgIC8vIG9uSGFuZHNoYWtlbiBldmVudCBhZnRlciB0aGUgW0NvbmZpZ1VwZGF0ZWRdIChoZW5jZSBpdHMgcmVxdWVzdCBtZXNzYWdlXHJcbiAgICAgICAgLy8gaXMgc2VudCBsYXRlcikgYW5kIEJySG9zdEhlbHBlciByZXNwb25kcyBpbiBhIHNlcmlhbCB3YXkgdG8gdGhlIG1lc3NhZ2VzXHJcbiAgICAgICAgLy8gaXQgcmVjZWl2ZXMuXHJcbiAgICAgICAgdGhpcy5vbkNvbmZpZ3VyZWRSYWlzZXIub25Db25maWd1cmVkKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSByZXF1ZXN0SGFuZGxlcjogRW5hYmxlZEZlYXR1cmVzUmVxdWVzdEhhbmRsZXI7XHJcbiAgICBwcml2YXRlIGlkR2VuZXJhdG9yID0gbmV3IElkR2VuZXJhdG9yKCk7XHJcbiAgICBwcml2YXRlIGVuYWJsZWRGZWF0dXJlczogTWF5YmU8RW5hYmxlZEZlYXR1cmVzPiA9IHVuZGVmaW5lZDtcclxuICAgIHByaXZhdGUgZG9udEFza0FnYWluID0gZmFsc2U7XHJcbiAgICBwcml2YXRlIGlzQ29uc3VtZXJQcm9kdWN0ID0gZmFsc2U7XHJcbn1cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vZmVhdHVyZS1tYW5hZ2VyLnRzIiwiLy8gQ29weXJpZ2h0IChjKSAyMDE4IEJyb21pdW0sIEluYy5cclxuLy8gVXNlIG9mIHRoZSBCcm9taXVtLCBJbmMuIHNvZnR3YXJlIHJlcXVpcmVzIGEgbGljZW5zZSBhZ3JlZW1lbnQgd2l0aCBCcm9taXVtLCBJbmMuIG9yIGFuIGF1dGhvcml6ZWQgcmVzZWxsZXIuXHJcblxyXG5pbXBvcnQgeyBJTWVzc2FnZVJvdXRlciB9IGZyb20gXCIuL21lc3NhZ2Utcm91dGVyXCI7XHJcbmltcG9ydCB7IE1lc3NhZ2VUeXBlIH0gZnJvbSBcIi4vbWVzc2FnZS10eXBlc1wiO1xyXG5pbXBvcnQgeyBIZWFydGJlYXRWMTAsIE1lc3NhZ2UgfSBmcm9tIFwiLi9tZXNzYWdlc1wiO1xyXG5pbXBvcnQgeyBNZXNzYWdlU2VuZGVyIH0gZnJvbSBcIi4vbWVzc2FnZS1zZW5kZXJcIjtcclxuaW1wb3J0IHsgSUhhbmRzaGFrZXIgfSBmcm9tIFwiLi9oYW5kc2hha2VyXCI7XHJcbmltcG9ydCB7IElkR2VuZXJhdG9yLCBJZCB9IGZyb20gXCIuL2lkLWdlbmVyYXRvclwiO1xyXG5pbXBvcnQgeyBNYXliZSwgc29tZSwgbm9uZSB9IGZyb20gXCIuL21heWJlXCI7XHJcbmltcG9ydCB7IEVycm9ySGFuZGxlciB9IGZyb20gXCIuL2Vycm9yLWhhbmRsZXJcIjtcclxuaW1wb3J0IHsgQ2hyYWdFcnJvciB9IGZyb20gXCIuL2Vycm9yc1wiO1xyXG5pbXBvcnQgeyBpc01lc3NhZ2VUeXBlU3VwcG9ydGVkIH0gZnJvbSBcIi4vcHJvdG9jb2wtdmVyc2lvbnNcIjtcclxuaW1wb3J0IHsgdGhyb3dzIH0gZnJvbSBcImFzc2VydFwiO1xyXG5cclxuLy8gSSB3b3VsZCBsaWtlIHRvIGJlIG1vcmUgc3BlY2lmaWMgYWJvdXQgdGhlIHR5cGUgb2YgVGltZW91dElkIGJ1dFxyXG4vLyB0aGUgc2lnbmF0dXJlIG9mIHNldFRpbWVvdXQgYW5kIGNsZWFyVGltZW91dCBkaWZmZXJzIGJldHdlZW5cclxuLy8gdGhlIG5vZGUgYW5kIGJyb3dzZXIgZW52aXJvbm1lbnRzLlxyXG50eXBlIFRpbWVvdXRJZCA9IGFueTtcclxuXHJcbmV4cG9ydCBjbGFzcyBIZWFydGJlYXRDb250cm9sbGVyIHtcclxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgZXJyb3JIYW5kbGVyOiBFcnJvckhhbmRsZXIsXHJcbiAgICAgICAgICAgIHByaXZhdGUgbWVzc2FnZVNlbmRlcjogTWVzc2FnZVNlbmRlcixcclxuICAgICAgICAgICAgbWVzc2FnZVJvdXRlcjogSU1lc3NhZ2VSb3V0ZXIsXHJcbiAgICAgICAgICAgIGhhbmRzaGFrZXI6IElIYW5kc2hha2VyKSB7XHJcbiAgICAgICAgbWVzc2FnZVJvdXRlci5yZWdpc3Rlck1lc3NhZ2VIYW5kbGVyKFxyXG4gICAgICAgICAgICBNZXNzYWdlVHlwZS5oZWFydGJlYXRWMTAsIChtZXNzYWdlKSA9PiB0aGlzLm9uSGVhcnRiZWF0UmVjZWl2ZWQobWVzc2FnZSkpO1xyXG5cclxuICAgICAgICBoYW5kc2hha2VyLm9uSGFuZHNoYWtlbi5yZWdpc3RlckV2ZW50SGFuZGxlcigoZXZlbnQpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5yZXNldFBlbmRpbmdIZWFydGJlYXQoKTtcclxuICAgICAgICAgICAgdGhpcy5jYW5jZWxUaW1lb3V0KCk7XHJcbiAgICAgICAgICAgIGNvbnN0IG5lZ290aWF0ZWRWZXJzaW9uID0gZXZlbnQubmVnb3RpYXRlZFZlcnNpb247XHJcbiAgICAgICAgICAgIGlmIChzb21lKG5lZ290aWF0ZWRWZXJzaW9uKSAmJiBpc01lc3NhZ2VUeXBlU3VwcG9ydGVkKE1lc3NhZ2VUeXBlLmhlYXJ0YmVhdFYxMCwgbmVnb3RpYXRlZFZlcnNpb24pKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbmRIZWFydGJlYXQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgb25IZWFydGJlYXRSZWNlaXZlZChtZXNzYWdlOiBNZXNzYWdlKSB7XHJcbiAgICAgICAgY29uc3QgaGVhcnRiZWF0ID0gbWVzc2FnZS5wYXlsb2FkIGFzIEhlYXJ0YmVhdFYxMDtcclxuICAgICAgICBpZiAoc29tZSh0aGlzLnBlbmRpbmdIZWFydGJlYXQpICYmIHRoaXMucGVuZGluZ0hlYXJ0YmVhdCA9PT0gaGVhcnRiZWF0LmlkKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVzZXRQZW5kaW5nSGVhcnRiZWF0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2VuZEhlYXJ0YmVhdCgpIHtcclxuICAgICAgICB0aGlzLnJlc2V0UGVuZGluZ0hlYXJ0YmVhdCgpO1xyXG4gICAgICAgIHRoaXMuY2FuY2VsVGltZW91dCgpO1xyXG5cclxuICAgICAgICBjb25zdCBpZCA9IHRoaXMuaWRHZW5lcmF0b3IuZ2VuZXJhdGVJZCgpO1xyXG4gICAgICAgIHRoaXMubWVzc2FnZVNlbmRlci5zZW5kTWVzc2FnZShNZXNzYWdlVHlwZS5oZWFydGJlYXRWMTAsIG5ldyBIZWFydGJlYXRWMTAoaWQpKTtcclxuXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3Qgb25lTWludXRlID0gNjAwMDA7XHJcbiAgICAgICAgICAgIHRoaXMudGltZW91dElkID0gc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoc29tZSh0aGlzLnBlbmRpbmdIZWFydGJlYXQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXNldFBlbmRpbmdIZWFydGJlYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmVycm9ySGFuZGxlci5yYWlzZUVycm9yKENocmFnRXJyb3IuaGVscGVyVW5yZXNwb25zaXZlKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VuZEhlYXJ0YmVhdCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LCBvbmVNaW51dGUpO1xyXG4gICAgICAgIH0gZmluYWxseSB7XHJcbiAgICAgICAgICAgIHRoaXMucGVuZGluZ0hlYXJ0YmVhdCA9IGlkO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHJlc2V0UGVuZGluZ0hlYXJ0YmVhdCgpIHtcclxuICAgICAgICBpZiAobm9uZSh0aGlzLnBlbmRpbmdIZWFydGJlYXQpKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5wZW5kaW5nSGVhcnRiZWF0ID0gdW5kZWZpbmVkO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgY2FuY2VsVGltZW91dCgpIHtcclxuICAgICAgICBpZiAobm9uZSh0aGlzLnRpbWVvdXRJZCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy50aW1lb3V0SWQpO1xyXG4gICAgICAgIH0gZmluYWxseSB7XHJcbiAgICAgICAgICAgIHRoaXMudGltZW91dElkID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHRpbWVvdXRJZDogTWF5YmU8VGltZW91dElkPiA9IHVuZGVmaW5lZDtcclxuICAgIHByaXZhdGUgcGVuZGluZ0hlYXJ0YmVhdDogTWF5YmU8SWQ+ID0gdW5kZWZpbmVkO1xyXG4gICAgcHJpdmF0ZSBpZEdlbmVyYXRvciA9IG5ldyBJZEdlbmVyYXRvcigpO1xyXG59XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4uL2xpYi9jb21tb24vaGVhcnRiZWF0LnRzIiwiLy8gQ29weXJpZ2h0IChjKSAyMDE4IEJyb21pdW0sIEluYy5cclxuLy8gVXNlIG9mIHRoZSBCcm9taXVtLCBJbmMuIHNvZnR3YXJlIHJlcXVpcmVzIGEgbGljZW5zZSBhZ3JlZW1lbnQgd2l0aCBCcm9taXVtLCBJbmMuIG9yIGFuIGF1dGhvcml6ZWQgcmVzZWxsZXIuXHJcblxyXG4vLy8gPHJlZmVyZW5jZSB0eXBlcz1cImNocm9tZVwiLz5cclxuaW1wb3J0IHsgaG9zdENvbnN0YW50cyB9IGZyb20gXCIuL2hvc3QtY29uc3RhbnRzXCI7XHJcbmltcG9ydCB7IFBvcnRSZXNvbHZlciB9IGZyb20gXCIuLi9saWIvY29tbW9uL3BvcnQtcmVzb2x2ZXJcIjtcclxuaW1wb3J0IHsgUGFnZVBvcnRDb250cm9sbGVyIH0gZnJvbSBcIi4vcGFnZS1wb3J0LWNvbnRyb2xsZXJcIjtcclxuaW1wb3J0IHsgSUNvbmZpZ05vdGlmaWVyIH0gZnJvbSBcIi4vY29uZmlnLW5vdGlmaWVyXCI7XHJcbmltcG9ydCB7IE1lc3NhZ2VUeXBlIH0gZnJvbSBcIi4vbWVzc2FnZS10eXBlc1wiO1xyXG5pbXBvcnQgeyBNZXNzYWdlLCBPcHRpb25zRGF0YVJlc3BvbnNlVjMsIENsZWFyUmVtZW1iZXJlZERlY2lzaW9uc1YxLCBDbGVhclJlbWVtYmVyZWRPcmlnaW5WMyB9IGZyb20gXCIuL21lc3NhZ2VzXCI7XHJcbmltcG9ydCB7IE1lc3NhZ2VTZW5kZXIgfSBmcm9tIFwiLi9tZXNzYWdlLXNlbmRlclwiO1xyXG5pbXBvcnQgeyBsb2cgfSBmcm9tIFwiLi9sb2dcIjtcclxuaW1wb3J0IHsgbWFrZVByb21pc2UgfSBmcm9tIFwiLi9wcm9taXNlLXV0aWxzXCI7XHJcbmltcG9ydCB7IG5vbmUsIE1heWJlLCBzb21lIH0gZnJvbSBcIi4vbWF5YmVcIjtcclxuaW1wb3J0IHsgQWN0aW9uIH0gZnJvbSBcIi4vb25jZVwiO1xyXG5pbXBvcnQgeyBDb25maWdLZXkgfSBmcm9tIFwiLi9jb25maWcta2V5c1wiO1xyXG5pbXBvcnQgeyBDb25maWdSZWFkZXIgfSBmcm9tIFwiLi9jb25maWctcmVhZGVyXCI7XHJcbmltcG9ydCB7IElIYW5kc2hha2VyIH0gZnJvbSBcIi4vaGFuZHNoYWtlclwiO1xyXG5pbXBvcnQgeyBpc01lc3NhZ2VUeXBlU3VwcG9ydGVkLCBWZXJzaW9uU3VwcG9ydFN0YXR1cywgUHJvdG9jb2xWZXJzaW9uIH0gZnJvbSBcIi4vcHJvdG9jb2wtdmVyc2lvbnNcIjtcclxuXHJcbmNsYXNzIE9wdGlvbnNQYWdlQ29udHJvbGxlciB7XHJcbiAgICBjb25zdHJ1Y3RvcihcclxuICAgICAgICAgICAgcHJpdmF0ZSBoYW5kc2hha2VyOiBJSGFuZHNoYWtlcixcclxuICAgICAgICAgICAgcG9ydDogUHJvbWlzZTxjaHJvbWUucnVudGltZS5Qb3J0PixcclxuICAgICAgICAgICAgcHJpdmF0ZSBvcGVuUGhpc2hpbmdMaW5rc0luU2VjdXJlQnJvd3NlcjogYm9vbGVhbixcclxuICAgICAgICAgICAgcHJpdmF0ZSB1c2VyVHJ1c3RlZE9yaWdpbnM6IHN0cmluZ1tdLFxyXG4gICAgICAgICAgICBwcml2YXRlIHVzZXJVbnRydXN0ZWRPcmlnaW5zOiBzdHJpbmdbXSxcclxuICAgICAgICAgICAgcHJpdmF0ZSBvbkRpc2Nvbm5lY3Q6IEFjdGlvbixcclxuICAgICAgICAgICAgcHJpdmF0ZSBob3N0SGVscGVyTWVzc2FnZVNlbmRlcjogTWVzc2FnZVNlbmRlcikge1xyXG4gICAgICAgIHRoaXMucGFnZVBvcnRDb250cm9sbGVyID0gbmV3IFBhZ2VQb3J0Q29udHJvbGxlcihcclxuICAgICAgICAgICAgY2hyb21lLnRhYnMuVEFCX0lEX05PTkUsXHJcbiAgICAgICAgICAgIHBvcnQsXHJcbiAgICAgICAgICAgIChwb3J0OiBjaHJvbWUucnVudGltZS5Qb3J0KSA9PiB7IH0sXHJcbiAgICAgICAgICAgIChwb3J0OiBjaHJvbWUucnVudGltZS5Qb3J0KSA9PiB7IHRoaXMub25EaXNjb25uZWN0KCkgfSk7XHJcbiAgICAgICAgdGhpcy5wYWdlUG9ydENvbnRyb2xsZXIucmVnaXN0ZXJNZXNzYWdlSGFuZGxlcihcclxuICAgICAgICAgICAgTWVzc2FnZVR5cGUub3B0aW9uc0RhdGFSZXF1ZXN0VjMsXHJcbiAgICAgICAgICAgIChtZXNzYWdlKSA9PiB0aGlzLmhhbmRsZU9wdGlvbnNEYXRhUmVxdWVzdChtZXNzYWdlKSk7XHJcbiAgICAgICAgdGhpcy5wYWdlUG9ydENvbnRyb2xsZXIucmVnaXN0ZXJNZXNzYWdlSGFuZGxlcihcclxuICAgICAgICAgICAgTWVzc2FnZVR5cGUuY2xlYXJSZW1lbWJlcmVkRGVjaXNpb25zVjEsXHJcbiAgICAgICAgICAgIChtZXNzYWdlKSA9PiB0aGlzLmNsZWFyQWxsUmVtZW1iZXJlZERlY2lzaW9ucyhtZXNzYWdlKSk7XHJcbiAgICAgICAgdGhpcy5wYWdlUG9ydENvbnRyb2xsZXIucmVnaXN0ZXJNZXNzYWdlSGFuZGxlcihcclxuICAgICAgICAgICAgTWVzc2FnZVR5cGUuY2xlYXJSZW1lbWJlcmVkT3JpZ2luVjMsXHJcbiAgICAgICAgICAgIChtZXNzYWdlKSA9PiB0aGlzLmNsZWFyUmVtZW1iZXJlZE9yaWdpbihtZXNzYWdlKSk7XHJcbiAgICAgICAgdGhpcy5wYWdlUG9ydENvbnRyb2xsZXIuY29ubmVjdCgpO1xyXG5cclxuICAgICAgICAvLyBGaW5kIG91dCBpZiB0aGUgbmVnb3RpYXRlZCBwcm90b2NvbCB2ZXJzaW9uIHN1cHBvcnRzIHRoZSBvcHRpb25zXHJcbiAgICAgICAgLy8gcGFnZS4gSWYgd2UncmUgbm90IHlldCBoYW5kc2hha2VuIHRoZW4gcmVnaXN0ZXIgZm9yIHRoZSBldmVudC5cclxuICAgICAgICBpZiAodGhpcy5oYW5kc2hha2VyLmlzSGFuZHNoYWtlbiAmJiBzb21lKHRoaXMuaGFuZHNoYWtlci5uZWdvdGlhdGVkVmVyc2lvbikpIHtcclxuICAgICAgICAgICAgdGhpcy5zZXRPcHRpb25zUGFnZVN1cHBvcnRTdGF0dXModGhpcy5oYW5kc2hha2VyLm5lZ290aWF0ZWRWZXJzaW9uKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmhhbmRzaGFrZXIub25IYW5kc2hha2VuLnJlZ2lzdGVyRXZlbnRIYW5kbGVyKFxyXG4gICAgICAgICAgICAgICAgKGhhbmRzaGFrZW5FdmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMub25OZWdvdGlhdGVkVmVyc2lvbihoYW5kc2hha2VuRXZlbnQubmVnb3RpYXRlZFZlcnNpb24pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2V0T3B0aW9uc1BhZ2VTdXBwb3J0U3RhdHVzKG5lZ290aWF0ZWRWZXJzaW9uOiBQcm90b2NvbFZlcnNpb24pIHtcclxuICAgICAgICBpZiAoaXNNZXNzYWdlVHlwZVN1cHBvcnRlZChNZXNzYWdlVHlwZS5vcHRpb25zRGF0YVJlc3BvbnNlVjMsIG5lZ290aWF0ZWRWZXJzaW9uKSkge1xyXG4gICAgICAgICAgICB0aGlzLm9wdGlvbnNQYWdlU3VwcG9ydFN0YXR1cyA9IFZlcnNpb25TdXBwb3J0U3RhdHVzLnN1cHBvcnRlZDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLm9wdGlvbnNQYWdlU3VwcG9ydFN0YXR1cyA9IFZlcnNpb25TdXBwb3J0U3RhdHVzLnVuc3VwcG9ydGVkO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIG9uTmVnb3RpYXRlZFZlcnNpb24obmVnb3RpYXRlZFZlcnNpb246IFByb3RvY29sVmVyc2lvbikge1xyXG4gICAgICAgIHRoaXMuc2V0T3B0aW9uc1BhZ2VTdXBwb3J0U3RhdHVzKG5lZ290aWF0ZWRWZXJzaW9uKTtcclxuICAgICAgICB0aGlzLnNlbmRPcHRpb25zRGF0YVJlc3BvbnNlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlT3B0aW9uc0RhdGEoXHJcbiAgICAgICAgICAgIG9wZW5QaGlzaGluZ0xpbmtzSW5TZWN1cmVCcm93c2VyOiBib29sZWFuLFxyXG4gICAgICAgICAgICB1c2VyVHJ1c3RlZE9yaWdpbnM6IHN0cmluZ1tdLFxyXG4gICAgICAgICAgICB1c2VyVW50cnVzdGVkT3JpZ2luczogc3RyaW5nW10pIHtcclxuICAgICAgICB0aGlzLm9wZW5QaGlzaGluZ0xpbmtzSW5TZWN1cmVCcm93c2VyID0gb3BlblBoaXNoaW5nTGlua3NJblNlY3VyZUJyb3dzZXI7XHJcbiAgICAgICAgdGhpcy51c2VyVHJ1c3RlZE9yaWdpbnMgPSB1c2VyVHJ1c3RlZE9yaWdpbnM7XHJcbiAgICAgICAgdGhpcy51c2VyVW50cnVzdGVkT3JpZ2lucyA9IHVzZXJVbnRydXN0ZWRPcmlnaW5zO1xyXG4gICAgICAgIHRoaXMuc2VuZE9wdGlvbnNEYXRhUmVzcG9uc2UoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNlbmRPcHRpb25zRGF0YVJlc3BvbnNlKCkge1xyXG4gICAgICAgIC8vIFNlbmQgdG8gdGhlIG9wdGlvbnMgcGFnZS5cclxuICAgICAgICB0aGlzLnBhZ2VQb3J0Q29udHJvbGxlci5zZW5kTWVzc2FnZShcclxuICAgICAgICAgICAgTWVzc2FnZVR5cGUub3B0aW9uc0RhdGFSZXNwb25zZVYzLFxyXG4gICAgICAgICAgICBuZXcgT3B0aW9uc0RhdGFSZXNwb25zZVYzKFxyXG4gICAgICAgICAgICAgICAgdGhpcy5vcHRpb25zUGFnZVN1cHBvcnRTdGF0dXMsXHJcbiAgICAgICAgICAgICAgICB0aGlzLm9wZW5QaGlzaGluZ0xpbmtzSW5TZWN1cmVCcm93c2VyLFxyXG4gICAgICAgICAgICAgICAgdGhpcy51c2VyVHJ1c3RlZE9yaWdpbnMsXHJcbiAgICAgICAgICAgICAgICB0aGlzLnVzZXJVbnRydXN0ZWRPcmlnaW5zKSk7XHJcbiAgICB9IFxyXG5cclxuICAgIHByaXZhdGUgaGFuZGxlT3B0aW9uc0RhdGFSZXF1ZXN0KG1lc3NhZ2U6IE1lc3NhZ2UpIHtcclxuICAgICAgICB0aGlzLnNlbmRPcHRpb25zRGF0YVJlc3BvbnNlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjbGVhclJlbWVtYmVyZWRPcmlnaW4obWVzc2FnZTogTWVzc2FnZSkge1xyXG4gICAgICAgIC8vIFNlbmQgdG8gdGhlIGhlbHBlciBwcm9jZXNzLiBTYW5pdHkgY2hlY2sgdGhhdCB0aGUgbWVzc2FnZSBpcyBzdXBwb3J0ZWQuXHJcbiAgICAgICAgY29uc3QgcHJvdG9jb2wgPSB0aGlzLmhhbmRzaGFrZXIubmVnb3RpYXRlZFZlcnNpb247XHJcbiAgICAgICAgaWYgKHNvbWUocHJvdG9jb2wpICYmIGlzTWVzc2FnZVR5cGVTdXBwb3J0ZWQoTWVzc2FnZVR5cGUuY2xlYXJSZW1lbWJlcmVkT3JpZ2luVjMsIHByb3RvY29sKSkge1xyXG4gICAgICAgICAgICB0aGlzLmhvc3RIZWxwZXJNZXNzYWdlU2VuZGVyLnNlbmRNZXNzYWdlKFxyXG4gICAgICAgICAgICAgICAgTWVzc2FnZVR5cGUuY2xlYXJSZW1lbWJlcmVkT3JpZ2luVjMsXHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlLnBheWxvYWQgYXMgQ2xlYXJSZW1lbWJlcmVkT3JpZ2luVjMpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGNsZWFyQWxsUmVtZW1iZXJlZERlY2lzaW9ucyhtZXNzYWdlOiBNZXNzYWdlKSB7XHJcbiAgICAgICAgLy8gU2VuZCB0byB0aGUgaGVscGVyIHByb2Nlc3MuXHJcbiAgICAgICAgdGhpcy5ob3N0SGVscGVyTWVzc2FnZVNlbmRlci5zZW5kTWVzc2FnZShcclxuICAgICAgICAgICAgTWVzc2FnZVR5cGUuY2xlYXJSZW1lbWJlcmVkRGVjaXNpb25zVjEsXHJcbiAgICAgICAgICAgIG5ldyBDbGVhclJlbWVtYmVyZWREZWNpc2lvbnNWMSgpKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHBhZ2VQb3J0Q29udHJvbGxlcjogUGFnZVBvcnRDb250cm9sbGVyO1xyXG4gICAgcHJpdmF0ZSBvcHRpb25zUGFnZVN1cHBvcnRTdGF0dXMgPSBWZXJzaW9uU3VwcG9ydFN0YXR1cy5ub3RIYW5kc2hha2VuO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgT3B0aW9uc0NvbnRyb2xsZXIge1xyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAgICAgICAgIHByaXZhdGUgaG9zdEhlbHBlck1lc3NhZ2VTZW5kZXI6IE1lc3NhZ2VTZW5kZXIsXHJcbiAgICAgICAgICAgIGNvbmZpZ05vdGlmaWVyOiBJQ29uZmlnTm90aWZpZXIsXHJcbiAgICAgICAgICAgIHByaXZhdGUgaGFuZHNoYWtlcjogSUhhbmRzaGFrZXIpIHtcclxuICAgICAgICBjb25maWdOb3RpZmllci5hZGRDb25maWdMaXN0ZW5lckZvcktleXMoXHJcbiAgICAgICAgICAgIChrZXksIGNvbmZpZykgPT4geyB0aGlzLm9uQ29uZmlnQ2hhbmdlZChrZXksIGNvbmZpZykgfSxcclxuICAgICAgICAgICAgW1xyXG4gICAgICAgICAgICAgICAgQ29uZmlnS2V5Lm9wZW5QaGlzaGluZ0xpbmtzSW5TZWN1cmVCcm93c2VyLFxyXG4gICAgICAgICAgICAgICAgQ29uZmlnS2V5LnVzZXJUcnVzdGVkT3JpZ2lucyxcclxuICAgICAgICAgICAgICAgIENvbmZpZ0tleS51c2VyVW50cnVzdGVkT3JpZ2luc1xyXG4gICAgICAgICAgICBdKTtcclxuICAgICAgICB0aGlzLnBvcnRSZXNvbHZlciA9IG5ldyBQb3J0UmVzb2x2ZXIoXHJcbiAgICAgICAgICAgIGhvc3RDb25zdGFudHMub3B0aW9uc1BvcnROYW1lLFxyXG4gICAgICAgICAgICBwb3J0ID0+IHRoaXMub25VbnJlc29sdmVkUG9ydENvbm5lY3RlZChwb3J0KSk7IFxyXG4gICAgICAgIGNvbnN0IHBvcnQgPSB0aGlzLnBvcnRSZXNvbHZlci5yZXNvbHZlUG9ydCgpO1xyXG4gICAgICAgIHRoaXMubWFrZU5ld1BhZ2VDb250cm9sbGVyKHBvcnQpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgb25Db25maWdDaGFuZ2VkKGtleTogQ29uZmlnS2V5LCBjb25maWc6IENvbmZpZ1JlYWRlcikge1xyXG4gICAgICAgIHN3aXRjaCAoa2V5KSB7XHJcbiAgICAgICAgICAgIGNhc2UgQ29uZmlnS2V5Lm9wZW5QaGlzaGluZ0xpbmtzSW5TZWN1cmVCcm93c2VyOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5vcGVuUGhpc2hpbmdMaW5rc0luU2VjdXJlQnJvd3NlciA9IGNvbmZpZy5vcGVuUGhpc2hpbmdMaW5rc0luU2VjdXJlQnJvd3NlcjtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIENvbmZpZ0tleS51c2VyVHJ1c3RlZE9yaWdpbnM6XHJcbiAgICAgICAgICAgICAgICB0aGlzLnVzZXJUcnVzdGVkT3JpZ2lucyA9IGNvbmZpZy51c2VyVHJ1c3RlZE9yaWdpbnM7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBDb25maWdLZXkudXNlclVudHJ1c3RlZE9yaWdpbnM6XHJcbiAgICAgICAgICAgICAgICB0aGlzLnVzZXJVbnRydXN0ZWRPcmlnaW5zID0gY29uZmlnLnVzZXJVbnRydXN0ZWRPcmlnaW5zO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoc29tZSh0aGlzLm9wdGlvbnNQYWdlQ29udHJvbGxlcikpIHtcclxuICAgICAgICAgICAgdGhpcy5vcHRpb25zUGFnZUNvbnRyb2xsZXIudXBkYXRlT3B0aW9uc0RhdGEoXHJcbiAgICAgICAgICAgICAgICB0aGlzLm9wZW5QaGlzaGluZ0xpbmtzSW5TZWN1cmVCcm93c2VyLFxyXG4gICAgICAgICAgICAgICAgdGhpcy51c2VyVHJ1c3RlZE9yaWdpbnMsXHJcbiAgICAgICAgICAgICAgICB0aGlzLnVzZXJVbnRydXN0ZWRPcmlnaW5zKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIG1ha2VOZXdQYWdlQ29udHJvbGxlcihwb3J0OiBQcm9taXNlPGNocm9tZS5ydW50aW1lLlBvcnQ+KSB7XHJcbiAgICAgICAgdGhpcy5vcHRpb25zUGFnZUNvbnRyb2xsZXIgPSBuZXcgT3B0aW9uc1BhZ2VDb250cm9sbGVyKFxyXG4gICAgICAgICAgICB0aGlzLmhhbmRzaGFrZXIsXHJcbiAgICAgICAgICAgIHBvcnQsXHJcbiAgICAgICAgICAgIHRoaXMub3BlblBoaXNoaW5nTGlua3NJblNlY3VyZUJyb3dzZXIsXHJcbiAgICAgICAgICAgIHRoaXMudXNlclRydXN0ZWRPcmlnaW5zLFxyXG4gICAgICAgICAgICB0aGlzLnVzZXJVbnRydXN0ZWRPcmlnaW5zLFxyXG4gICAgICAgICAgICAoKSA9PiB7IHRoaXMub25Qb3J0RGlzY29ubmVjdGVkKCkgfSxcclxuICAgICAgICAgICAgdGhpcy5ob3N0SGVscGVyTWVzc2FnZVNlbmRlcik7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBvblBvcnREaXNjb25uZWN0ZWQoKSB7XHJcbiAgICAgICAgdGhpcy5vcHRpb25zUGFnZUNvbnRyb2xsZXIgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgY29uc3QgcG9ydCA9IHRoaXMucG9ydFJlc29sdmVyLnJlc29sdmVQb3J0KCk7XHJcbiAgICAgICAgdGhpcy5tYWtlTmV3UGFnZUNvbnRyb2xsZXIocG9ydCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBvblVucmVzb2x2ZWRQb3J0Q29ubmVjdGVkKHBvcnQ6IGNocm9tZS5ydW50aW1lLlBvcnQpIHtcclxuICAgICAgICBsb2coXCJPcHRpb25zQ29udHJvbGxlci5vblVuZXhwZWN0ZWRQb3J0Q29ubmVjdGVkXCIpO1xyXG4gICAgICAgIC8vIFVzZSB0aGUgdW5yZXNvbHZlZCBwb3J0IGlmIHdlIGRvbid0IGN1cnJlbnRseSBoYXZlIGEgT3B0aW9uc1BhZ2VDb250cm9sbGVyLlxyXG4gICAgICAgIGlmIChub25lKHRoaXMub3B0aW9uc1BhZ2VDb250cm9sbGVyKSkge1xyXG4gICAgICAgICAgICB0aGlzLm1ha2VOZXdQYWdlQ29udHJvbGxlcihtYWtlUHJvbWlzZSgoKSA9PiBwb3J0KSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgb3BlblBoaXNoaW5nTGlua3NJblNlY3VyZUJyb3dzZXIgPSBmYWxzZTtcclxuICAgIHByaXZhdGUgdXNlclRydXN0ZWRPcmlnaW5zOiBzdHJpbmdbXSA9IFtdO1xyXG4gICAgcHJpdmF0ZSB1c2VyVW50cnVzdGVkT3JpZ2luczogc3RyaW5nW10gPSBbXTtcclxuICAgIHByaXZhdGUgcG9ydFJlc29sdmVyOiBQb3J0UmVzb2x2ZXI7XHJcbiAgICBwcml2YXRlIG9wdGlvbnNQYWdlQ29udHJvbGxlcjogTWF5YmU8T3B0aW9uc1BhZ2VDb250cm9sbGVyPjtcclxufVxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL29wdGlvbnMtcGFnZS1jb250cm9sbGVyLnRzIiwiaW1wb3J0IHsgSUNvbmZpZ05vdGlmaWVyIH0gZnJvbSBcIi4vY29uZmlnLW5vdGlmaWVyXCI7XHJcbmltcG9ydCB7IENvbmZpZ0tleSB9IGZyb20gXCIuL2NvbmZpZy1rZXlzXCI7XHJcbmltcG9ydCB7IENvbmZpZ1JlYWRlciB9IGZyb20gXCIuL2NvbmZpZy1yZWFkZXJcIjtcclxuaW1wb3J0IHsgVVJMLCBtYWtlVXJsSGFzaFNldCwgcGFyc2VVcmwsIFVybENvbXBhcmVPcHRpb25zIH0gZnJvbSBcIi4vdXJsLXV0aWxzXCI7XHJcbmltcG9ydCB7IEJyb3dzZXIgfSBmcm9tIFwiLi9icm93c2VyXCI7XHJcbmltcG9ydCB7IEhhc2hTZXQgfSBmcm9tIFwiLi9oYXNoLW1hcFwiO1xyXG5pbXBvcnQgeyBTZXJpYWxpemVkTmV3VGFiUGFnZVVybHNWMTIgfSBmcm9tIFwiLi9tZXNzYWdlc1wiO1xyXG5pbXBvcnQgeyBNYXliZSwgc29tZSwgbm9uZSB9IGZyb20gXCIuL21heWJlXCI7XHJcblxyXG5jb25zdCBkZWZhdWx0TmV3VGFiUGFnZVVybHMgPSB7XHJcbiAgICBjaHJvbWU6IFtcclxuICAgICAgICBcImh0dHBzOi8vd3d3Lmdvb2dsZS5jb20vXy9jaHJvbWUvbmV3dGFiXCIsXHJcbiAgICAgICAgXCJodHRwczovL3d3dy5iaW5nLmNvbS9jaHJvbWUvbmV3dGFiXCJcclxuICAgIF0sXHJcbiAgICBmaXJlZm94OiBbXSxcclxuICAgIGVkZ2U6IFtdLFxyXG4gICAgZWRnZUNocm9taXVtOiBbXVxyXG59O1xyXG5cclxuZXhwb3J0IGNsYXNzIE5ld1RhYlBhZ2VVcmxUcmFja2VyIHtcclxuICAgIGNvbnN0cnVjdG9yKGNvbmZpZ05vdGlmaWVyOiBJQ29uZmlnTm90aWZpZXIsIHByaXZhdGUgYnJvd3NlcjogTWF5YmU8QnJvd3Nlcj4pIHtcclxuICAgICAgICB0aGlzLnVwZGF0ZU5ld1RhYlBhZ2VVcmxzKGRlZmF1bHROZXdUYWJQYWdlVXJscyk7XHJcbiAgICAgICAgY29uZmlnTm90aWZpZXIuYWRkQ29uZmlnTGlzdGVuZXJGb3JLZXkoKGtleSwgY29uZmlnKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMub25Db25maWdDaGFuZ2VkKGtleSwgY29uZmlnKTtcclxuICAgICAgICB9LCBDb25maWdLZXkubmV3VGFiUGFnZVVybHMpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBwcml2YXRlIG9uQ29uZmlnQ2hhbmdlZChrZXk6IENvbmZpZ0tleSwgY29uZmlnOiBDb25maWdSZWFkZXIpIHtcclxuICAgICAgICBzd2l0Y2ggKGtleSkge1xyXG4gICAgICAgICAgICBjYXNlIENvbmZpZ0tleS5uZXdUYWJQYWdlVXJsczpcclxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlTmV3VGFiUGFnZVVybHMoY29uZmlnLm5ld1RhYlBhZ2VVcmxzKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIFxyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlzTmV3VGFiUGFnZVVybCh1cmw6IFVSTCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIGlmIChub25lKHRoaXMuYnJvd3NlcikpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCB1cmxzID0gdGhpcy5uZXdUYWJQYWdlVXJscy5nZXQodGhpcy5icm93c2VyKTtcclxuICAgICAgICBpZiAobm9uZSh1cmxzKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB1cmxzLmhhcyh1cmwpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgdXBkYXRlTmV3VGFiUGFnZVVybHMoc2VyaWFsaXplZE5ld1RhYlBhZ2VVcmxzOiBNYXliZTxTZXJpYWxpemVkTmV3VGFiUGFnZVVybHNWMTI+KSB7XHJcbiAgICAgICAgaWYgKG5vbmUoc2VyaWFsaXplZE5ld1RhYlBhZ2VVcmxzKSkge1xyXG4gICAgICAgICAgICB0aGlzLm5ld1RhYlBhZ2VVcmxzID0gbmV3IE1hcDxCcm93c2VyLCBIYXNoU2V0PFVSTD4+KCk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9IFxyXG4gICAgICAgIHRoaXMubmV3VGFiUGFnZVVybHMgPSBuZXcgTWFwPEJyb3dzZXIsIEhhc2hTZXQ8VVJMPj4oKTtcclxuXHJcbiAgICAgICAgY29uc3QgdXBkYXRlQnJvd3Nlck5ld1RhYlBhZ2VVcmxzID0gKGJyb3dzZXI6IEJyb3dzZXIsIHNwZWNzOiBzdHJpbmdbXSkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCB1cmxzID0gbWFrZVVybEhhc2hTZXQoVXJsQ29tcGFyZU9wdGlvbnMuSWdub3JlU2VhcmNoUGFyYW1zKTtcclxuICAgICAgICAgICAgdXJscy5hZGRNYW55KHNwZWNzLm1hcChwYXJzZVVybCkuZmlsdGVyKHNvbWUpKTtcclxuICAgICAgICAgICAgdGhpcy5uZXdUYWJQYWdlVXJscy5zZXQoYnJvd3NlciwgdXJscyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB1cGRhdGVCcm93c2VyTmV3VGFiUGFnZVVybHMoQnJvd3Nlci5jaHJvbWUsIHNlcmlhbGl6ZWROZXdUYWJQYWdlVXJscy5jaHJvbWUpO1xyXG4gICAgICAgIHVwZGF0ZUJyb3dzZXJOZXdUYWJQYWdlVXJscyhCcm93c2VyLmZpcmVmb3gsIHNlcmlhbGl6ZWROZXdUYWJQYWdlVXJscy5maXJlZm94KTtcclxuICAgICAgICB1cGRhdGVCcm93c2VyTmV3VGFiUGFnZVVybHMoQnJvd3Nlci5lZGdlLCBzZXJpYWxpemVkTmV3VGFiUGFnZVVybHMuZWRnZSk7XHJcbiAgICAgICAgdXBkYXRlQnJvd3Nlck5ld1RhYlBhZ2VVcmxzKEJyb3dzZXIuZWRnZUNocm9taXVtLCBzZXJpYWxpemVkTmV3VGFiUGFnZVVybHMuZWRnZUNocm9taXVtKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIG5ld1RhYlBhZ2VVcmxzID0gbmV3IE1hcDxCcm93c2VyLCBIYXNoU2V0PFVSTD4+KCk7XHJcbn1cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9uZXctdGFiLXBhZ2UtdXJsLXRyYWNrZXIudHMiLCJpbXBvcnQgeyBJTWVzc2FnZVBvcnRDaGFubmVsLCBNZXNzYWdlUG9ydENoYW5uZWwsIE5lZ290aWF0aW9uICB9IGZyb20gXCIuL21lc3NhZ2UtcG9ydC1jaGFubmVsXCI7XHJcbmltcG9ydCB7IEVycm9ySGFuZGxlciwgbWF4RmFpbGVkUmVjb25uZWN0QXR0ZW1wdHMgfSBmcm9tIFwiLi9lcnJvci1oYW5kbGVyXCI7XHJcbmltcG9ydCB7IElNZXNzYWdlUm91dGVyIH0gZnJvbSBcIi4vbWVzc2FnZS1yb3V0ZXJcIjtcclxuaW1wb3J0IHsgTWVzc2FnZVNlbmRlciB9IGZyb20gXCIuL21lc3NhZ2Utc2VuZGVyXCI7XHJcbmltcG9ydCB7IG1ha2VQcm9taXNlIH0gZnJvbSBcIi4vcHJvbWlzZS11dGlsc1wiO1xyXG5pbXBvcnQgeyBjcmVhdGVIb3N0SGVscGVyUG9ydCB9IGZyb20gXCIuL2hvc3QtaGVscGVyLWNvbm5lY3Rpb25cIjtcclxuaW1wb3J0IHsgTWVzc2FnZSB9IGZyb20gXCIuL21lc3NhZ2VzXCI7XHJcbmltcG9ydCB7IENocmFnRXJyb3IgfSBmcm9tIFwiLi9lcnJvcnNcIjtcclxuaW1wb3J0IHsgUHJvdG9jb2xWZXJzaW9uIH0gZnJvbSBcIi4vcHJvdG9jb2wtdmVyc2lvbnNcIjtcclxuaW1wb3J0IHsgTWF5YmUgfSBmcm9tIFwiLi9tYXliZVwiO1xyXG5pbXBvcnQgeyBFdmVudERpc3BhdGNoZXIgfSBmcm9tIFwiLi9ldmVudC1kaXNwYXRjaGVyXCI7XHJcbmltcG9ydCB7IEhhbmRzaGFrZW5FdmVudCB9IGZyb20gXCIuL2hhbmRzaGFrZXJcIjtcclxuaW1wb3J0IHsgQ29ubmVjdGlvblN0YXRlQ2hhbmdlZEV2ZW50LCBDb25uZWN0aW9uU3RhdGUgfSBmcm9tIFwiLi9jb25uZWN0aW9uXCI7XHJcblxyXG5jb25zdCBsb2cgPSBjb25zb2xlLmxvZztcclxuXHJcbmNsYXNzIER1bW15TWVzc2FnZVBvcnRDaGFubmVsIGltcGxlbWVudHMgSU1lc3NhZ2VQb3J0Q2hhbm5lbCB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHt9XHJcbiAgICBjb25uZWN0KCk6IHZvaWQge31cclxuICAgIGRpc2Nvbm5lY3QoKTogdm9pZCB7fVxyXG4gICAgc2VuZE1lc3NhZ2UobWVzc2FnZTogTWVzc2FnZSk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIG1lc3NhZ2VTZW5kZXI6IE1lc3NhZ2VTZW5kZXIgPSBuZXcgTWVzc2FnZVNlbmRlcigobWVzc2FnZSkgPT4gdGhpcy5zZW5kTWVzc2FnZShtZXNzYWdlKSk7XHJcbiAgICBvbkNvbm5lY3Rpb25TdGF0ZUNoYW5nZWQgPSBuZXcgRXZlbnREaXNwYXRjaGVyPENvbm5lY3Rpb25TdGF0ZUNoYW5nZWRFdmVudD4oKTtcclxuICAgIG9uSGFuZHNoYWtlbiA9IG5ldyBFdmVudERpc3BhdGNoZXI8SGFuZHNoYWtlbkV2ZW50PigpO1xyXG4gICAgcmVhZG9ubHkgaXNIYW5kc2hha2VuID0gZmFsc2U7XHJcbiAgICByZWFkb25seSBuZWdvdGlhdGVkVmVyc2lvbjogTWF5YmU8UHJvdG9jb2xWZXJzaW9uPiA9IHVuZGVmaW5lZDtcclxuICAgIHJlYWRvbmx5IGNvbm5lY3Rpb25TdGF0ZSA9IENvbm5lY3Rpb25TdGF0ZS5EaXNjb25uZWN0ZWQ7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBIZWxwZXJQb3J0Q2hhbm5lbCBpbXBsZW1lbnRzIElNZXNzYWdlUG9ydENoYW5uZWwge1xyXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBlcnJvckhhbmRsZXI6IEVycm9ySGFuZGxlciwgcHJpdmF0ZSBtZXNzYWdlUm91dGVyOiBJTWVzc2FnZVJvdXRlcikge1xyXG4gICAgICAgIHRoaXMubWVzc2FnZVNlbmRlciA9IG5ldyBNZXNzYWdlU2VuZGVyKChtZXNzYWdlKSA9PiB0aGlzLnNlbmRNZXNzYWdlKG1lc3NhZ2UpKTtcclxuICAgICAgICB0aGlzLmNoYW5uZWwgPSB0aGlzLm1ha2VDb25uZWN0aW9uKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBtYWtlRHVtbXlDb25uZWN0aW9uKCk6IElNZXNzYWdlUG9ydENoYW5uZWwge1xyXG4gICAgICAgIHJldHVybiBuZXcgRHVtbXlNZXNzYWdlUG9ydENoYW5uZWwoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIG1ha2VDb25uZWN0aW9uKCk6IElNZXNzYWdlUG9ydENoYW5uZWwge1xyXG4gICAgICAgIGNvbnN0IGNyZWF0ZVBvcnQgPSBtYWtlUHJvbWlzZSgoKSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBjcmVhdGVIb3N0SGVscGVyUG9ydCgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNvbnN0IGNoYW5uZWwgPSBuZXcgTWVzc2FnZVBvcnRDaGFubmVsKFxyXG4gICAgICAgICAgICBjcmVhdGVQb3J0LFxyXG4gICAgICAgICAgICAocG9ydCkgPT4gdGhpcy5vblBvcnRDb25uZWN0ZWQocG9ydCksXHJcbiAgICAgICAgICAgIChwb3J0KSA9PiB0aGlzLm9uUG9ydERpc2Nvbm5lY3RlZChwb3J0KSxcclxuICAgICAgICAgICAgKGUpID0+IHRoaXMub25Qb3J0RXJyb3IoZSksXHJcbiAgICAgICAgICAgIChlKSA9PiB0aGlzLm9uSGFuZHNoYWtlRXJyb3IoZSksXHJcbiAgICAgICAgICAgIHRoaXMubWVzc2FnZVJvdXRlcixcclxuICAgICAgICAgICAgTmVnb3RpYXRpb24uTmVnb3RpYXRlUHJvdG9jb2xWZXJzaW9uKTtcclxuICAgICAgICBjaGFubmVsLm9uSGFuZHNoYWtlbi5yZWdpc3RlckV2ZW50SGFuZGxlcigoZXZlbnQpID0+IHRoaXMub25IYW5kc2hha2VuLmRpc3BhdGNoRXZlbnQoZXZlbnQpKTtcclxuICAgICAgICBjaGFubmVsLm9uQ29ubmVjdGlvblN0YXRlQ2hhbmdlZC5yZWdpc3RlckV2ZW50SGFuZGxlcigoZXZlbnQpID0+IHRoaXMub25Db25uZWN0aW9uU3RhdGVDaGFuZ2VkLmRpc3BhdGNoRXZlbnQoZXZlbnQpKTtcclxuICAgICAgICByZXR1cm4gY2hhbm5lbDtcclxuICAgIH1cclxuXHJcbiAgICBjb25uZWN0KCk6IHZvaWQge1xyXG4gICAgICAgIGxvZyhcIkhvc3RIZWxwZXJDaGFubmVsLmNvbm5lY3RcIik7XHJcbiAgICAgICAgdGhpcy5jaGFubmVsLmNvbm5lY3QoKTtcclxuICAgIH1cclxuXHJcbiAgICBkaXNjb25uZWN0KCkge1xyXG4gICAgICAgIGxvZyhcIkhvc3RIZWxwZXJDaGFubmVsLmRpc2Nvbm5lY3RcIik7XHJcbiAgICAgICAgdGhpcy5jaGFubmVsLmRpc2Nvbm5lY3QoKTtcclxuICAgIH1cclxuXHJcbiAgICByZWNvbm5lY3QoKTogdm9pZCB7XHJcbiAgICAgICAgbG9nKFwiSG9zdEhlbHBlckNoYW5uZWwucmVjb25uZWN0XCIpO1xyXG4gICAgICAgIGNvbnN0IGNoYW5uZWwgPSB0aGlzLmNoYW5uZWw7XHJcbiAgICAgICAgdGhpcy5jaGFubmVsID0gdGhpcy5tYWtlRHVtbXlDb25uZWN0aW9uKCk7XHJcbiAgICAgICAgY2hhbm5lbC5kaXNjb25uZWN0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgc2VuZE1lc3NhZ2UobWVzc2FnZTogTWVzc2FnZSk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNoYW5uZWwuc2VuZE1lc3NhZ2UobWVzc2FnZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBvblBvcnRDb25uZWN0ZWQocG9ydDogY2hyb21lLnJ1bnRpbWUuUG9ydCkge1xyXG4gICAgICAgIGxvZyhcIkhvc3RIZWxwZXJDaGFubmVsLm9uUG9ydENvbm5lY3RlZFwiKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIG9uUG9ydERpc2Nvbm5lY3RlZChwb3J0OiBjaHJvbWUucnVudGltZS5Qb3J0KSB7XHJcbiAgICAgICAgbG9nKGBIb3N0SGVscGVyQ2hhbm5lbC5vblBvcnREaXNjb25uZWN0ZWQ6IGZhaWxlZFJlY29ubmVjdEF0dGVtcHRzOiAke3RoaXMuZmFpbGVkUmVjb25uZWN0QXR0ZW1wdHN9YCk7XHJcbiAgICAgICAgaWYgKHRoaXMuZmFpbGVkUmVjb25uZWN0QXR0ZW1wdHMgPCBtYXhGYWlsZWRSZWNvbm5lY3RBdHRlbXB0cykge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jaGFubmVsID0gdGhpcy5tYWtlQ29ubmVjdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jaGFubmVsLmNvbm5lY3QoKTtcclxuICAgICAgICAgICAgfSBmaW5hbGx5IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZmFpbGVkUmVjb25uZWN0QXR0ZW1wdHMgKz0gMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuZXJyb3JIYW5kbGVyLnJhaXNlRXJyb3IoQ2hyYWdFcnJvci5oZWxwZXJQb3J0RXJyb3IsIG5ldyBFcnJvcihcImhvc3RIZWxwZXJDaGFubmVsLm9uUG9ydERpc2Nvbm5lY3RlZFwiKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgb25Qb3J0RXJyb3IoZTogRXJyb3IpIHtcclxuICAgICAgICBsb2coYEhvc3RIZWxwZXJDaGFubmVsLm9uUG9ydEVycm9yOiAke2V9YCk7XHJcbiAgICAgICAgdGhpcy5lcnJvckhhbmRsZXIucmFpc2VFcnJvcihDaHJhZ0Vycm9yLmhlbHBlclBvcnRFcnJvciwgZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBvbkhhbmRzaGFrZUVycm9yKGU6IEVycm9yKSB7XHJcbiAgICAgICAgbG9nKGBIb3N0SGVscGVyQ2hhbm5lbC5vbkhhbmRzaGFrZUVycm9yOiAke2V9YCk7XHJcbiAgICAgICAgdGhpcy5lcnJvckhhbmRsZXIucmFpc2VFcnJvcihDaHJhZ0Vycm9yLmhhbmRzaGFrZUVycm9yLCBlKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgaXNIYW5kc2hha2VuKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNoYW5uZWwuaXNIYW5kc2hha2VuO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBuZWdvdGlhdGVkVmVyc2lvbigpOiBNYXliZTxQcm90b2NvbFZlcnNpb24+IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jaGFubmVsLm5lZ290aWF0ZWRWZXJzaW9uO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBjb25uZWN0aW9uU3RhdGUoKTogQ29ubmVjdGlvblN0YXRlIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jaGFubmVsLmNvbm5lY3Rpb25TdGF0ZTtcclxuICAgIH1cclxuXHJcbiAgICByZWFkb25seSBvbkhhbmRzaGFrZW4gPSBuZXcgRXZlbnREaXNwYXRjaGVyPEhhbmRzaGFrZW5FdmVudD4oKTtcclxuICAgIHJlYWRvbmx5IG9uQ29ubmVjdGlvblN0YXRlQ2hhbmdlZCA9IG5ldyBFdmVudERpc3BhdGNoZXI8Q29ubmVjdGlvblN0YXRlQ2hhbmdlZEV2ZW50PigpO1xyXG4gICAgcmVhZG9ubHkgbWVzc2FnZVNlbmRlcjogTWVzc2FnZVNlbmRlcjtcclxuXHJcbiAgICBwcml2YXRlIGNoYW5uZWw6IElNZXNzYWdlUG9ydENoYW5uZWw7XHJcbiAgICBwcml2YXRlIGZhaWxlZFJlY29ubmVjdEF0dGVtcHRzID0gMDtcclxufVxyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9ob3N0LWhlbHBlci1jaGFubmVsLnRzIiwiLy8gQ29weXJpZ2h0IChjKSAyMDE4IEJyb21pdW0sIEluYy5cclxuLy8gVXNlIG9mIHRoZSBCcm9taXVtLCBJbmMuIHNvZnR3YXJlIHJlcXVpcmVzIGEgbGljZW5zZSBhZ3JlZW1lbnQgd2l0aCBCcm9taXVtLCBJbmMuIG9yIGFuIGF1dGhvcml6ZWQgcmVzZWxsZXIuXHJcblxyXG4vLy8gPHJlZmVyZW5jZSB0eXBlcz1cImNocm9tZVwiLz5cclxuaW1wb3J0IHsgaG9zdENvbnN0YW50cyB9IGZyb20gXCIuL2hvc3QtY29uc3RhbnRzXCI7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlSG9zdEhlbHBlclBvcnQoKTogY2hyb21lLnJ1bnRpbWUuUG9ydCB7XHJcbiAgICByZXR1cm4gY2hyb21lLnJ1bnRpbWUuY29ubmVjdE5hdGl2ZShob3N0Q29uc3RhbnRzLmhvc3RIZWxwZXJJZCk7XHJcbn1cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vaG9zdC1oZWxwZXItY29ubmVjdGlvbi50cyIsImltcG9ydCB7IElMb2dTaW5rLCBsb2cgfSBmcm9tIFwiLi9sb2dcIjtcclxuaW1wb3J0IHsgTWVzc2FnZVNlbmRlciB9IGZyb20gXCIuL21lc3NhZ2Utc2VuZGVyXCI7XHJcbmltcG9ydCB7IElDb25uZWN0aW9uLCBDb25uZWN0aW9uU3RhdGUgfSBmcm9tIFwiLi9jb25uZWN0aW9uXCI7XHJcbmltcG9ydCB7IExvZ01lc3NhZ2VWMSwgTG9nTGV2ZWwsIG1lc3NhZ2VUb1N0cmluZyB9IGZyb20gXCIuL21lc3NhZ2VzXCI7XHJcbmltcG9ydCB7IE1lc3NhZ2VUeXBlLCBpc0ZyZXF1ZW50bHlTZW50TWVzc2FnZVR5cGUgfSBmcm9tIFwiLi9tZXNzYWdlLXR5cGVzXCI7XHJcbmltcG9ydCB7IElNZXNzYWdlRGVjb2RlciB9IGZyb20gXCIuL21lc3NhZ2UtZGVjb2RlclwiO1xyXG5pbXBvcnQgeyBJSGFuZHNoYWtlciB9IGZyb20gXCIuL2hhbmRzaGFrZXJcIjtcclxuaW1wb3J0IHsgc29tZSwgTWF5YmUgfSBmcm9tIFwiLi9tYXliZVwiO1xyXG5pbXBvcnQgeyBzaG91bGRMb2dNZXNzYWdlLCBQcm90b2NvbFZlcnNpb24gfSBmcm9tIFwiLi9wcm90b2NvbC12ZXJzaW9uc1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIEhlbHBlckxvZ1NpbmsgaW1wbGVtZW50cyBJTG9nU2luayB7XHJcbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIHNlbmRlcjogTWVzc2FnZVNlbmRlcikge31cclxuXHJcbiAgICBsb2cobWVzc2FnZTogc3RyaW5nKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNTZW5kaW5nTG9nTWVzc2FnZSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IG1zZyA9IG5ldyBMb2dNZXNzYWdlVjEoTG9nTGV2ZWwuSW5mbywgbWVzc2FnZSk7XHJcbiAgICAgICAgdGhpcy5pc1NlbmRpbmdMb2dNZXNzYWdlID0gdHJ1ZTtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAvLyBzZW5kTWVzc2FnZSgpIGNoZWNrcyB0aGUgY29ubmVjdGlvbiBzdGF0ZSBiZWZvcmUgc2VuZGluZy5cclxuICAgICAgICAgICAgdGhpcy5zZW5kZXIuc2VuZE1lc3NhZ2UoTWVzc2FnZVR5cGUubG9nTWVzc2FnZVYxLCBtc2cpO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgLy8gSWdub3JlXHJcbiAgICAgICAgfSBmaW5hbGx5IHtcclxuICAgICAgICAgICAgdGhpcy5pc1NlbmRpbmdMb2dNZXNzYWdlID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGxvZ0Vycm9yKG1lc3NhZ2U6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMubG9nKG1lc3NhZ2UpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgaXNTZW5kaW5nTG9nTWVzc2FnZSA9IGZhbHNlO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgTWVzc2FnZUxvZ2dlciB7XHJcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlRGVjb2RlcjogSU1lc3NhZ2VEZWNvZGVyLCBoYW5kc2hha2VyOiBJSGFuZHNoYWtlcikge1xyXG4gICAgICAgIGhhbmRzaGFrZXIub25IYW5kc2hha2VuLnJlZ2lzdGVyRXZlbnRIYW5kbGVyKChldmVudCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnByb3RvY29sVmVyc2lvbiA9IGV2ZW50Lm5lZ290aWF0ZWRWZXJzaW9uO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBtZXNzYWdlRGVjb2Rlci5vbk1lc3NhZ2VEZWNvZGVkLnJlZ2lzdGVyRXZlbnRIYW5kbGVyKChldmVudCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gZXZlbnQubWVzc2FnZTtcclxuICAgICAgICAgICAgaWYgKCFpc0ZyZXF1ZW50bHlTZW50TWVzc2FnZVR5cGUobWVzc2FnZS50eXBlKSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5sb2coYE1lc3NhZ2VMb2dnZXIub25NZXNzYWdlUmVjZWl2ZWQ6IG1lc3NhZ2U6ICR7bWVzc2FnZVRvU3RyaW5nKG1lc3NhZ2UpfWApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBsb2cobWVzc2FnZTogc3RyaW5nKSB7XHJcbiAgICAgICAgaWYgKHNvbWUodGhpcy5wcm90b2NvbFZlcnNpb24pICYmIHNob3VsZExvZ01lc3NhZ2UodGhpcy5wcm90b2NvbFZlcnNpb24pKSB7XHJcbiAgICAgICAgICAgIGxvZyhtZXNzYWdlKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhtZXNzYWdlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBwcm90b2NvbFZlcnNpb246IE1heWJlPFByb3RvY29sVmVyc2lvbj4gPSB1bmRlZmluZWQ7XHJcbn1cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vbG9nZ2VyLnRzIiwiLy8gQ29weXJpZ2h0IChjKSAyMDE4IEJyb21pdW0sIEluYy5cclxuLy8gVXNlIG9mIHRoZSBCcm9taXVtLCBJbmMuIHNvZnR3YXJlIHJlcXVpcmVzIGEgbGljZW5zZSBhZ3JlZW1lbnQgd2l0aCBCcm9taXVtLCBJbmMuIG9yIGFuIGF1dGhvcml6ZWQgcmVzZWxsZXIuXHJcblxyXG4vLy8gPHJlZmVyZW5jZSB0eXBlcz1cImNocm9tZVwiLz5cclxuaW1wb3J0IHsgZ2V0STE4biwgSTE4bk1lc3NhZ2VzIH0gZnJvbSBcIi4vaTE4blwiO1xyXG5pbXBvcnQgeyBzb21lLCBNYXliZSwgbm9uZSB9IGZyb20gXCIuL21heWJlXCI7XHJcbmltcG9ydCB7IGxvZ0Vycm9yLCBsb2cgfSBmcm9tIFwiLi9sb2dcIjtcclxuaW1wb3J0IHsgQ29uZmlnTm90aWZpZXIgfSBmcm9tIFwiLi9jb25maWctbm90aWZpZXJcIjtcclxuaW1wb3J0IHsgQ29uZmlnUmVhZGVyIH0gZnJvbSBcIi4vY29uZmlnLXJlYWRlclwiO1xyXG5pbXBvcnQgeyBDb25maWdLZXkgfSBmcm9tIFwiLi9jb25maWcta2V5c1wiO1xyXG5pbXBvcnQgeyBwYXJzZVVybCB9IGZyb20gXCIuL3VybC11dGlsc1wiO1xyXG5pbXBvcnQgeyBCcm93c2VyTGF1bmNoZXIgfSBmcm9tIFwiLi9ibG9ja2VkLXBhZ2UtY29udHJvbGxlclwiO1xyXG5pbXBvcnQgeyBQbGFjZW1lbnRNYW5hZ2VyIH0gZnJvbSBcIi4vcGxhY2VtZW50LW1hbmFnZXJcIjtcclxuaW1wb3J0IHsgRXJyb3JIYW5kbGVyIH0gZnJvbSBcIi4vZXJyb3ItaGFuZGxlclwiO1xyXG5cclxuZW51bSBDb250ZXh0TWVudUlkcyB7XHJcbiAgICBick9wZW5MaW5rID0gXCJCck9wZW5MaW5rXCJcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIENvbnRleHRNZW51TWFuYWdlciB7XHJcbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIGJyb3dzZXJMYXVuY2hlcjogQnJvd3NlckxhdW5jaGVyLFxyXG4gICAgICAgICAgICAgICAgcHJpdmF0ZSBwbGFjZW1lbnRNYW5hZ2VyOiBQbGFjZW1lbnRNYW5hZ2VyLFxyXG4gICAgICAgICAgICAgICAgZXJyb3JIYW5kbGVyOiBFcnJvckhhbmRsZXIsXHJcbiAgICAgICAgICAgICAgICBjb25maWdOb3RpZmllcjogQ29uZmlnTm90aWZpZXIpIHtcclxuICAgICAgICBjaHJvbWUuY29udGV4dE1lbnVzLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgIGlkOiBDb250ZXh0TWVudUlkcy5ick9wZW5MaW5rLFxyXG4gICAgICAgICAgICB0aXRsZTogZ2V0STE4bihJMThuTWVzc2FnZXMub3BlbkxpbmtJblNlY3VyZUJyb3dzZXIpLFxyXG4gICAgICAgICAgICBjb250ZXh0czogWydsaW5rJ11cclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyBDb250ZXh0IG1lbnVzIGFyZSBzaG93biBieSBkZWZhdWx0IGJ1dCB3ZSBzaG91bGQgaGlkZSB0aGVtIGlmIHdlJ3JlIGFscmVhZHkgaW4gYSBkb3JtYW50IHN0YXRlXHJcbiAgICAgICAgaWYgKGVycm9ySGFuZGxlci5pc0Rvcm1hbnQpIHtcclxuICAgICAgICAgICAgdGhpcy5oaWRlQ29udGV4dE1lbnVzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVycm9ySGFuZGxlci5vbkRvcm1hbnRTdGF0ZUNoYW5nZWQucmVnaXN0ZXJFdmVudEhhbmRsZXIoaXNEb3JtYW50ID0+IHRoaXMub25Eb3JtYW50U3RhdGVDaGFuZ2VkKGlzRG9ybWFudCkpO1xyXG4gICAgICAgIGNvbmZpZ05vdGlmaWVyLmFkZENvbmZpZ0xpc3RlbmVyRm9yS2V5cygoa2V5LCBjb25maWcpID0+IHRoaXMub25Db25maWdDaGFuZ2VkKGtleSwgY29uZmlnKSxcclxuICAgICAgICAgICAgWyBDb25maWdLZXkuc2VjdXJlQnJvd3NlclJlZGlyZWN0VHJ1c3RlZFNpdGVzIF0pO1xyXG4gICAgfVxyXG5cclxuICAgIHJlZ2lzdGVyTGlzdGVuZXJzKCkge1xyXG4gICAgICAgIGNocm9tZS5jb250ZXh0TWVudXMub25DbGlja2VkLmFkZExpc3RlbmVyKGl0ZW1EYXRhID0+IHRoaXMub25Db250ZXh0TWVudUNsaWNrZWQoaXRlbURhdGEpKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIG9uRG9ybWFudFN0YXRlQ2hhbmdlZChpc0Rvcm1hbnQ6IGJvb2xlYW4pIHtcclxuICAgICAgICBpZiAoaXNEb3JtYW50KSB7XHJcbiAgICAgICAgICAgIHRoaXMuaGlkZUNvbnRleHRNZW51cygpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2hvd0NvbnRleHRNZW51cygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGhpZGVDb250ZXh0TWVudXMoKSB7XHJcbiAgICAgICAgY2hyb21lLmNvbnRleHRNZW51cy51cGRhdGUoQ29udGV4dE1lbnVJZHMuYnJPcGVuTGluaywgeyBlbmFibGVkOiBmYWxzZSB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNob3dDb250ZXh0TWVudXMoKSB7XHJcbiAgICAgICAgY2hyb21lLmNvbnRleHRNZW51cy51cGRhdGUoQ29udGV4dE1lbnVJZHMuYnJPcGVuTGluaywgeyBlbmFibGVkOiB0cnVlIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgb25Db25maWdDaGFuZ2VkKGtleTogQ29uZmlnS2V5LCBjb25maWc6IENvbmZpZ1JlYWRlcikge1xyXG4gICAgICAgIHN3aXRjaCAoa2V5KSB7XHJcbiAgICAgICAgICAgIGNhc2UgQ29uZmlnS2V5LnNlY3VyZUJyb3dzZXJSZWRpcmVjdFRydXN0ZWRTaXRlczpcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VjdXJlQnJvd3NlclJlZGlyZWN0VHJ1c3RlZFNpdGVzID0gY29uZmlnLnNlY3VyZUJyb3dzZXJSZWRpcmVjdFRydXN0ZWRTaXRlcztcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIG9uQ29udGV4dE1lbnVDbGlja2VkKGl0ZW1EYXRhIDogY2hyb21lLmNvbnRleHRNZW51cy5PbkNsaWNrRGF0YSkge1xyXG4gICAgICAgIGlmIChub25lKHRoaXMuYnJvd3NlckxhdW5jaGVyKSB8fCBub25lKHRoaXMucGxhY2VtZW50TWFuYWdlcikpIHtcclxuICAgICAgICAgICAgbG9nRXJyb3IobmV3IEVycm9yKFwiQ29udGV4dCBtZW51IGNsaWNrIGJlZm9yZSBDb250ZXh0TWVudU1hbmFnZXIuc2V0dXAoKSBoYXMgYmVlbiBjYWxsZWRcIikpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoKGl0ZW1EYXRhLm1lbnVJdGVtSWQgPT09IENvbnRleHRNZW51SWRzLmJyT3BlbkxpbmspICYmIGl0ZW1EYXRhLmxpbmtVcmwpIHtcclxuICAgICAgICAgICAgbG9nKGBVc2VyIHdhbnRzIHRvIG9wZW4gbGluayBpbiBzZWN1cmUgYnJvd3NlcjogJHtpdGVtRGF0YS5saW5rVXJsfWApO1xyXG4gICAgICAgICAgICBsZXQgdXJsID0gcGFyc2VVcmwoaXRlbURhdGEubGlua1VybCk7XHJcbiAgICAgICAgICAgIGlmIChzb21lKHVybCkpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNlY3VyZUJyb3dzZXJSZWRpcmVjdFRydXN0ZWRTaXRlcyAmJiB0aGlzLnBsYWNlbWVudE1hbmFnZXIuaXNUcnVzdGVkVXJsKHVybCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBsb2coYElnbm9yaW5nIGNvbnRleHQgbWVudSBjbGljayB0byBvcGVuICR7aXRlbURhdGEubGlua1VybH0gaW4gdGhlIHNlY3VyZSBicm93c2VyIGJlY2F1c2UgdGhlIHNpdGUgYFxyXG4gICAgICAgICAgICAgICAgICAgICAgICArIGBpcyB0cnVzdGVkIGFuZCB0cnVzdGVkIHNpdGUgcmVkaXJlY3Rpb24gZm9yIEJyQ2hyb21lIGlzIGVuYWJsZWRgKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLmJyb3dzZXJMYXVuY2hlci5sYXVuY2hCcm93c2VyKHVybCwgKCkgPT4ge30pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2VjdXJlQnJvd3NlclJlZGlyZWN0VHJ1c3RlZFNpdGVzID0gZmFsc2U7XHJcbn1cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vY29udGV4dC1tZW51cy50cyJdLCJzb3VyY2VSb290IjoiIn0=